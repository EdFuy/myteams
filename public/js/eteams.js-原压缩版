define("teams/task/taskpage","teams/core/page teams/task/taskrightview teams/task/taskview teams/task/mytaskview teams/views/feedbackview teams/views/taskcalendarview teams/component/trashbinview teams/utils teams/report/taskreportview teams/task/taskformview teams/report/taskstatisticsview".split(" "),function(h,q,m){q=h("teams/core/page");h("teams/task/taskrightview");h("teams/task/taskview");var f=h("teams/task/mytaskview"),e=h("teams/views/feedbackview"),c=h("teams/views/taskcalendarview"),b=
h("teams/component/trashbinview");h("teams/utils");var a=h("teams/report/taskreportview"),d=h("teams/task/taskformview"),g=h("teams/report/taskstatisticsview");h=q.extend({initialize:function(a){this.userId=a.userId;this.id=a.id;this.pageKey=a.pageKey||"mine";this.type=a.type;this.template="task.taskpage";this.el="#mainContainer";this.pageActive="task"},delegateEvents:function(){$(this.el);this.on("beforeOpen",function(a){this.mainView&&"function"==typeof this.mainView.beforeOpenTask&&this.mainView.beforeOpenTask(a)});
this.on("create",function(a){this.mainView.insertTask(a)});this.on("remove",function(a){this.mainView.removeTask(a)});this.on("changeStatus",function(a){this.mainView.changeStatus(a.id,a.status)});this.on("changeWatch",function(a){this.mainView.changeWatch(a.id,a.watched)});this.on("changeTitle",function(a){this.mainView.changeTitle(a.id,a.title)});this.on("changeBeginDate",function(a){this.mainView.changeBeginDate(a)});this.on("changeDuedate",function(a){this.mainView.changeDuedate(a)});this.on("changeManager",
function(a){this.mainView.changeManager(a.manager,a.id)});this.on("changeSubtaskStatus",function(a,d){this.subView.subtaskView.changeStatus(a,d)})},render:function(){var l=this;$(l.el);l.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,self:!this.options.userId||this.options.userId==TEAMS.currentUser.id,isAdmin:TEAMS.currentUser.admin},function(){l.renderType()});"calendar"==l.type?l.mainView=new c({userId:this.userId,container:"#j_taskcenter"}):"feedback"==l.type?($(".j_feedback").addClass("active"),
l.mainView=new e({container:"#j_taskcenter",showtitle:"0",navs:[".charger",".participants","subordinatemodule",".task-dynamic"],module:"task",moduleName:"\u4efb\u52a1",userId:this.userId,showReaded:"1",noscroll:!0})):"recylce"==l.type?($(".j_recycle").addClass("active"),l.mainView=new b({container:"#j_taskcenter",userId:this.userId,module:"task"})):"taskstatistics"==l.type?l.mainView=new g({el:"#j_taskcenter"}):"taskreport"==l.type?l.mainView=new a({viewMode:"1",el:"#j_taskcenter"}):"taskform"==l.type?
l.mainView=new d({userId:this.userId,container:"#j_taskcenter"}):($(".aside").find(".sub-nav li.j_"+this.type).addClass("active"),l.mainView=new f({taskId:this.id,userId:this.userId,type:this.type}));l._render(".j_"+("calendar"==this.type?"all":this.type))},renderType:function(){var a="";TEAMS.blogUser?(a="female"==TEAMS.blogUser.sex?"\u5979":"\u4ed6",$("#tasknav li").each(function(){var d=$(this),g=d.data("title");d.hasClass("j_shareToMe")?d.find(".j_type-name").html("\u5171\u4eab\u7ed9"+a+"\u7684\u4efb\u52a1"):
d.find(".j_type-name").html(a+g)})):$("#tasknav li").each(function(){var a=$(this),d=a.data("title");a.hasClass("j_mine")?a.find(".j_type-name").html("\u6211"+d):a.hasClass("j_subordinates")||a.hasClass("j_all")||a.find(".j_type-name").html(d)})}});m.exports=h});
define("teams/task/taskcopyview",["teams/utils","teams/task/taskmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel");h=Backbone.View.extend({initialize:function(c){this.userId=c.userId||TEAMS.currentUser.id;this.target=c.target||"";this.copyTarget=c.copyTarget;this.copyTargetId=c.copyTargetId||"";this.taskModel=new e({id:this.copyTargetId});this.el=".j_item_copy";$("body").append(f.template("task.taskcopy"));$("#task-copy-model").modal()},delegateEvents:function(){var c=this,
b=$(c.el);$("#task-copy-model").on("hidden.bs.modal.TaskCopy",function(){c.remove()});b.off("click.TaskCopy",".j_save_copy").on("click.TaskCopy",".j_save_copy",function(a){var d=$(this);if(!d.data("submit"))if(d.data("submit",!0),a=b.find(".j_title").val(),""!=$.trim(a))if(100<$.trim(a).length)f.notify("\u4efb\u52a1\u540d\u5b57\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57"),d.data("submit",!1);else{$(c.el+" #copy-loading").removeClass("hide").siblings(".j_taskcopy_body").removeClass("hide");a=c.copyTarget;
c.isChecked(c.el+" .j_task_manager");var g=c.isChecked(c.el+" .j_task_manager")?"true":"false",l=c.isChecked(c.el+" .j_task_participants")?"true":"false",n=c.isChecked(c.el+" .j_task_shares")?"true":"false",k=c.isChecked(c.el+" .j_relevance_mainline")?"true":"false",r=c.isChecked(c.el+" .j_relevance_task")?"true":"false",e=c.isChecked(c.el+" .j_relevance_document")?"true":"false",s=c.isChecked(c.el+" .j_relevance_customer")?"true":"false",u=c.isChecked(c.el+" .j_relevance_workflow")?"true":"false",
w=c.isChecked(c.el+" .j_relevance_calendar")?"true":"false",h=$(c.el+" .j_title").val()||"",g="copyTaskManager\x3d"+g+(",copyTaskParticipants\x3d"+l),g=g+(",copyTaskShares\x3d"+n),g=g+(",copyRelevanceMainline\x3d"+k),g=g+(",copyRelevanceTask\x3d"+r),g=g+(",copyRelevanceDocument\x3d"+e),g=g+(",copyRelevanceCustomer\x3d"+s),g=g+(",copyRelevanceWorkflow\x3d"+u),g=g+(",copyRelevanceCalendar\x3d"+w),n={};n.ids=a.id;n.taskName=h;n.copyDetailStr=g;c.taskModel.copyTasks(n,function(a){$(c.el+" #copy-loading").addClass("hide").siblings(".j_taskcopy_body").addClass("hide");
f.notify("\u4efb\u52a1\u590d\u5236\u6210\u529f,\u8bf7\u5230\u521b\u5efa\u7684\u4efb\u52a1\u4e2d\u67e5\u770b");d.data("submit",!1);$("#task-copy-model").modal("hide")})}else f.notify("\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u5b57"),d.data("submit",!1),b.find(".j_title").focus()})},isChecked:function(c){var b=!1;if(!c)return b;$(c).is(":checked")&&(b=!0);return b},render:function(){var c=this,b=c.copyTarget;setTimeout(function(){$(c.el).find(".j_title").focus();$(c.el).find(".j_title").val($(b.el+" #task-title").val()||
"")},500)},undelegateEvents:function(){$(this.el).off(".TaskCopy")},remove:function(){$(this.el).off(".TaskCopy");$("#task-copy-model").remove();$("#task-copy-model").off(".bs.modal");$("#task-copy-model").off(".AddTeam")}});m.exports=h});
define("teams/task/taskview","teams/utils teams/component/typeahead teams/task/taskmodel teams/component/shareallview teams/component/mainline teams/component/tag teams/component/attachment teams/component/relevanceview teams/component/permissionview teams/component/extendview teams/component/validation teams/component/guideview teams/task/subtaskview teams/task/taskcopyview teams/workflow/formview teams/component/entityremindview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),
c=h("teams/task/taskmodel"),b=h("teams/component/shareallview"),a=h("teams/component/mainline"),d=h("teams/component/tag"),g=h("teams/component/attachment"),l=h("teams/component/relevanceview"),n=h("teams/component/permissionview"),k=h("teams/component/extendview"),r=h("teams/component/validation"),p=h("teams/component/guideview"),s=h("teams/task/subtaskview"),u=h("teams/task/taskcopyview"),w=h("teams/workflow/formview"),v=h("teams/component/entityremindview");h=Backbone.View.extend({viewKey:"TaskView",
initialize:function(a){this.id=a.id;this.dueDate=a.dueDate;this.el=a.container;this.closable=a.closable;this.userId=a.userId;this.model=new c({id:this.id});this.callback=a.callback;this.changeEvent=a.changeEvent;this.guideview=new p({module:"task",parentEl:this.el});this.formview=new w;this.page=a.page;this.pageSize=a.pageSize||10;this.backLastPage=a.backLastPage||!1},initComponent:function(){var c=this;this.mainline=new a({targetId:this.id,module:"task",container:"#task-mainline",parentEl:this.el});
this.tag=new d({targetId:this.id,module:"task",container:"#task-tag",ccontainer:"#task-ctag",parentEl:this.el});this.attachment=new g({targetId:this.id,module:"task",container:"#task-attachment",parentEl:this.el});c.relevanceViews=[];_.each([{targetModule:"task",module:"task",container:"#task-relevance-task",moduleLabel:"\u5173\u8054\u4efb\u52a1:"},{targetModule:"document",module:"task",container:"#task-relevance-doc",moduleLabel:"\u5173\u8054\u6587\u6863:"},{targetModule:"customer",module:"task",
container:"#task-relevance-crm",moduleLabel:"\u5173\u8054\u5ba2\u6237:"},{targetModule:"workflow",module:"task",container:"#task-relevance-flow",moduleLabel:"\u5173\u8054\u5ba1\u6279:"},{targetModule:"calendar",module:"task",container:"#task-relevance-agenda",moduleLabel:"\u5173\u8054\u65e5\u7a0b:"}],function(a){this.relevanceView=new l({objectId:c.id,module:a.module,container:a.container,moduleLabel:a.moduleLabel,targetModule:a.targetModule,parentEl:c.el});c.relevanceViews.push(this.relevanceView)});
this.shareView=new b({entityId:this.id,module:"task",shareContainer:"#task-share",partContainer:"#task-participants",parentEl:this.el});this.subtaskView=new s({parentId:this.id,container:"#task-subtask",parentEl:this.el,taskView:this});this.extendView=new k({targetId:this.id,module:"task",container:"#task-container",parentEl:this.el});this.permissionView=new n({module:"task",container:this.el});this.entityremind=new v({entityId:this.id,module:"task",container:"#task-remind",parentEl:this.el})},delegateEvents:function(){var a=
this,d=this.model,g=$(this.el);g.on("click.Task","#parent-task .close",function(g){g.stopPropagation();var b=$(this).parent().attr("data-id");a.id&&b&&f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u4e0e\u7236\u4efb\u52a1\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\u5417\uff1f",function(g){g&&d.removeParent(a.id,b,function(d){if(d.actionMsg)f.notify("\u6ca1\u6709\u53d6\u6d88\u6743\u9650");else{f.notify("\u64cd\u4f5c\u6210\u529f");$(a.el+" #parent-task").addClass("hide");$("#entitySlider").find("#"+a.id).find(".sn-link").text();
$("#entitySlider").find("#"+a.id).remove();$("#entitySlider").find(".task-list li").each(function(a,d){$(d).find(".sn-link").html(a+1)});for(var g=d.subTasksNumber,b=d=0,l=0;l<g.length;l++){var k=g[l];"todo"==k.status?d=parseInt(d)+parseInt(k.count):b=parseInt(b)+parseInt(k.count)}g=d+b;$("#entitySlider").find("#numberDiv").empty().append("\x3cspan\x3e"+d+"\x3c/span\x3e/"+g);a.renderHandle()}})})});g.on("click.Task","#task-watch",function(g){a.isNewTask()||d.watch(function(d,g){d?f.notify("\u5df2\u6dfb\u52a0\u5173\u6ce8"):
f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8");a.renderWatch(d);a.page.trigger("changeWatch",{id:a.id,watched:d});a.page.trigger("changePanelWatch",{id:a.id,watched:d});$("#stream").trigger("insertStream",g);$("#left").trigger("refresh","watched")})});g.on("click.Task","#task-status",function(g){var b="todo"==$(this).attr("data-status")?"finished":"todo",l=$(this);a.isNewTask()||l.data("post")||(l.data("post",!0),d.changeProperty(a.id,"status",b,function(d){a.renderStatus(b,!0);f.notify("\u4efb\u52a1\u72b6\u6001\u4fee\u6539\u6210\u529f!");
a.page.trigger("changeStatus",{id:a.id,status:b});a.page.trigger("changePanelStatus",{id:a.id,status:b});l.data("post",!1);for(var g=d.subTasksNumber,k=0,n=0,c=0;c<g.length;c++){var r=g[c];"todo"==r.status?k=parseInt(k)+parseInt(r.count):n=parseInt(n)+parseInt(r.count)}g=k+n;$("#entitySlider").find("#numberDiv").empty().append("\x3cspan\x3e"+k+"\x3c/span\x3e/"+g);$("#entitySlider").find("#"+a.id).find(".j_finished").attr("status",b);"finished"==b?$("#entitySlider").find("#"+a.id).find(".j_edit .text").addClass("finished-line"):
$("#entitySlider").find("#"+a.id).find(".j_edit .text").removeClass("finished-line");$("#entitySlider").find("#"+a.id).find(".j_finished i").attr("class","icon-"+b);$("#stream").trigger("insertStream",d.stream)}))});g.on("click.Task","#copy-task",function(d){(new u({userId:TEAMS.currentUser.id,target:$(this),copyTarget:a,copyTargetId:a.id})).render()});g.off("click.Task","#btn-calendar").on("click.Task","#btn-calendar",function(d){f.confirm("\u662f\u5426\u786e\u5b9a\u5c06\u8be5\u4efb\u52a1\u8f6c\u65e5\u7a0b\uff1f",
function(d){if(d){d={};var b=new Date,l=b.getFullYear(),k=b.getMonth(),k=k+1,k=10>k?"0"+k:k,n=b.getDate(),b=n,b=l+"-"+k+"-"+(10>b?"0"+b:b),l=l+"-"+k+"-"+(10>n?"0"+n:n),b=Date.create(b).getTime(),l=Date.create(l).getTime();d.allDay=!0;d.content="";d.start=b;d.end=l;d.module="task";d.place="";d.repeat=!1;d.targetId=a.id;l=g.find("#task-title").val();d.title=l;d.visibleType="normal";d=JSON.stringify(d);k="{"+('"fromTargetId":"'+a.id+'",');k=k+'"fromModule":"task",'+('"fromTargetName":"'+l+'",');k+='"webAgenda":'+
d;k+="}";$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda.json",dataType:"json",data:k,success:function(a){f.notify("\u4efb\u52a1\u8f6c\u65e5\u7a0b\u6210\u529f");var d=g.find(".convert-to-calendar");d&&(d.attr("data-id",a.agenda.id),d.click())}})}})});g.on("click.Task","#task-lock",function(g){if(d.task.lockable){var b=!d.task.locked,l=$(this);a.isNewTask()||l.data("post")||(l.data("post",!0),d.changeProperty(a.id,"locked",b,function(d){d&&(f.notify("\u9501\u5b9a\u72b6\u6001\u4fee\u6539\u6210\u529f!"),
a.renderLocked(b));l.data("post",!1)}))}else f.notify("\u5f53\u524d\u7528\u6237\u6ca1\u6709\u8be5\u6743\u9650!")});g.on("click.Task",".j_urgency",function(d){d=$(this).attr("value");var g=$(this).find("i").attr("class");a.isNewTask()?f.alert("\u8bf7\u5148\u5efa\u7acb\u4efb\u52a1\uff0c\u518d\u8bbe\u7f6e\u4efb\u52a1\u7684\u7d27\u6025\u7a0b\u5ea6!"):a.renderUrgency(d,g)});g.off("click.Task","#btn-delete").on("click.Task","#btn-delete",function(g){a.isNewTask()||f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",
function(b){b&&(0<$("#entitybox").length?d.delt(function(d){f.notify("\u4efb\u52a1\u5df2\u5220\u9664");a.page.trigger("remove",a.id);a.page.trigger("removePanel",a.id);$(g.target).trigger("remove");$("#entitySlider").find("#"+a.id).find(".sn-link").text();$("#entitySlider").find("#"+a.id).remove();$("#entitySlider").find(".task-list li").each(function(a,d){$(d).find(".sn-link").html(a+1)});for(var b=d.subTasksNumber,l=d=0,k=0;k<b.length;k++){var n=b[k];"todo"==n.status?d=parseInt(d)+parseInt(n.count):
l=parseInt(l)+parseInt(n.count)}b=d+l;$("#entitySlider").find("#numberDiv").empty().append("\x3cspan\x3e"+d+"\x3c/span\x3e/"+b)}):0<$("#entitySlider").length&&d.delt(function(d){f.notify("\u4efb\u52a1\u5df2\u5220\u9664");a.page.trigger("remove",a.id);a.page.trigger("removePanel",a.id);$(g.target).trigger("remove");$("body").trigger("slideClose")}))})});g.off("keydown.Task","#task-title").on("keydown.Task","#task-title",function(a){13==a.which&&a.preventDefault()});g.off("keyup.Task","#task-title").on("keyup.Task",
"#task-title",function(g){var b=g.which;13==b&&(g.preventDefault(),$(this).trigger("blur"));27==b&&(g=d.task||{},$(this).val(g.name||""),$(this).blur());g=$(this).val();a.page.trigger("changeName",{id:a.id,title:g});a.sn?a.page.trigger("changeTitle",{id:a.sn,title:g}):(a.page.trigger("changeTitle",{id:a.id,title:g}),$("#entitySlider").find("#"+a.id).find(".text").text(g),$("#entitySlider").find("#"+a.id).find(".text").attr("title",g));a.page.trigger("changePanelName",{id:a.id,title:g});a.changeEvent&&
a.changeEvent("title",g)});g.off("click.Task","#task-print").on("click.Task","#task-print",function(d){window.open("/print/"+a.id+"/task")});g.off("click.Task","#i-beginDate").on("click.Task","#i-beginDate",function(a){g.find("#task-beginDate").removeClass("hide").find("#beginDate").focus()});g.off("click.Task",".handle-item\x3ea").on("click.Task",".handle-item\x3ea",function(d){d=$(this);var b=d.attr("data-link");d.parent().addClass("hide");"subtaskCon"!=b&&$(".j_detailCommands").removeClass("hide");
"i-remind"==d[0].id&&(g.find("#dueDate").val()||f.notify("\u8bf7\u8bbe\u7f6e\u4efb\u52a1\u7684\u5230\u671f\u65e5,\u5426\u5219\u8bbe\u7f6e\u7684\u63d0\u9192\u5c06\u65e0\u6cd5\u751f\u6548"));a.renderHandle()});g.off("click.Task",".j_li_save_untrue").on("click.Task",".j_li_save_untrue",function(a){a=g.find("#task-title").val().trim();""==$.trim(a)&&f.notify("\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0")});g.on("click.Task","#form-submit",function(b){if(!a.formview.submitCheck(g.find(".j_form_view")))return!1;
var l=$(this);l.attr("id","");a.formview.submit({parentEl:g.find(".j_form_view"),dataStatus:1,isDel:!1,callback:function(b){d.changeProperty(a.id,"formData",b.formData.id,function(a){f.notify("\u81ea\u5b9a\u4e49\u5b57\u6bb5\u4fdd\u5b58\u6210\u529f");l.attr("id","form-submit");a=formPlugin.submitAssembleForm({parentEl:g.find(".form-view_js")});a=JSON.stringify(a.formData.dataDetails);window.formJsonStr=a})}})});g.on("click.Task",".j_task_form",function(d){d=$(this);var b=g.find(".form-preview"),l=
d.attr("data-load");b.hasClass("hide")?(b.removeClass("hide"),d.find(".js_detail-block-more").text("\u6536\u8d77"),d.find("i").attr("class","icon-angle-up"),l||(d.attr("data-load","true"),a.renderForm())):(b.addClass("hide"),d.find(".js_detail-block-more").text("\u66f4\u591a"),d.find("i").attr("class","icon-angle-down"))})},render:function(){this.isNewTask()?(this.renderNewAfter(),this.delegateCreateEvents(),this.renderParam()):(this.loadTemplate(),this.delegateCreateEvents(),$(this.el).find(".loading_large").show(),
$(this.el).find(".manager-div").removeClass("hide"),$(this.el).find("#task-dueDate").removeClass("hide"),this.initComponent(),this.loadAfter(),this.loadTask())},renderHandle:function(){var a=$(".j_detailhandle .handle-item"),d=!0,g=0;a.each(function(){$(this).hasClass("hide")?"i-subtask"==$(this).find("a").attr("id")&&g++:(d=!1,g++)});d?$(".j_detailhandle").addClass("hide"):g==a.length&&$(this.el+" .j_detailCommands").addClass("hide")},loadTask:function(){var a=this,d=this.model,g=$(a.el),b;$(this).attr("id");
b=$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?"finished":"";var l=!0;a.model.loadTask({pageNo:d.pageNo,pageSize:a.pageSize,taskType:b},function(d){a.data=d;a.renderShowAfter();a.model.task&&1<a.model.task.permission&&(l=!1);31>d.permission&&$(a.el+" #parent-task").attr("undeletable","true");l&&$("#task-urgency").parent().removeClass("dropdown-menu-toggle");"#entitybox-container"==a.el?a.model.task&&"urgency"==a.model.task.priority?($("#entitybox-container #task-urgency").find("i").attr("class",
"icon-time c-danger"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'urgency']").parent().addClass("active")):a.model.task&&"high"==a.model.task.priority?($("#entitybox-container #task-urgency").find("i").attr("class","icon-time c-warning"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'high']").parent().addClass("active")):a.model.task&&"normal"==a.model.task.priority&&($("#entitybox-container #task-urgency").find("i").attr("class","icon-time"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'normal']").parent().addClass("active")):
a.model.task&&"urgency"==a.model.task.priority?($("#entitySlider #task-urgency").find("i").attr("class","icon-time c-danger"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'urgency']").parent().addClass("active")):a.model.task&&"high"==a.model.task.priority?($("#entitySlider #task-urgency").find("i").attr("class","icon-time c-warning"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'high']").parent().addClass("active")):a.model.task&&"normal"==a.model.task.priority&&($("#entitySlider #task-urgency").find("i").attr("class",
"icon-time"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'normal']").parent().addClass("active"));a.renderHandle();a.model.task&&a.model.task.parent&&$(a.el+" #parent-task").parent().removeClass("hide");a.page&&a.page.trigger("beforeOpen",a.id);d.form&&d.form.id&&d.form.layoutId&&!window.systemInfo_print&&g.find(".j_task_form").removeClass("hide");d.form&&d.form.id&&d.form.layoutId&&(g.find("#formDataLog").removeClass("hide"),g.find("#formDataLog a").text("\u81ea\u5b9a\u4e49\u5b57\u6bb5\u4fee\u6539\u65e5\u5fd7"),
a.extendView&&(a.extendView.formDataId=d.task.formData));window.systemInfo_print&&a.renderForm();$("body").trigger("printLoaded")})},renderShowAfter:function(a){var d=this.model.msg;if(d&&d.message)return $(this.el).html(f.template("base.nopermission",{msg:d,module:"task",id:this.id})),$(this.el).find(".scrollwrapper").trigger("resizeSroll"),!1;$(this.el).find(".loading_large").hide();$(this.el).find("#info-div").show();this.renderTaskPanel();this.guideview&&(this.guideview.guideTip("manager","#editManager",
a),this.guideview.guideTip("participant","#editParticipant",!1))},renderNewAfter:function(){var a=$(this.el),d=this.id.split("_");1<d.length&&(this.id=this.model.id=d[0],this.sn=d[1]);this.loadTemplate();a.find("#info-div").removeClass("hide");a.find(".links-control-group,.control-btn").addClass("hide");a.find("#task-finishTime").addClass("hide");this.loadAfter();a.find("#task-title").focus();a.find("#task-print").hide();a.find(".j_detailCommands").addClass("hide");a.find(".j_recommend_block").addClass("hide");
a.find(".j_content_block").addClass("hide");a.find(".j_button_ul li:not([j_li_save_untrue])").addClass("hide");a.find(".j_button_ul .j_li_save_untrue").removeClass("hide");a.find("#btn-close").parent().removeClass("hide")},renderForm:function(){var a=this,d=$(this.el),g=!1,b=a.data;if(1==a.reducePermissionByLock(b.task)||window.systemInfo_print)g=!0;b.task&&b.task.formData?(d.find(".form-preview").show(),a.formview.loadForm({parentEl:$(a.el).find(".j_form_view"),dataId:b.task.formData,layoutId:b.form.layoutId,
readOnly:g,callback:function(b){null!=d.find(".j_form_view").find("div").get(0)?g||d.find("#form-submit").parent().show():(d.find(".form-preview").hide(),d.find(".j_task_form").hide());$(a.el).find(".scrollwrapper").trigger("resizeSroll");if(b=formPlugin.submitAssembleForm({parentEl:d.find(".form-view_js")}))b=JSON.stringify(b.formData.dataDetails),window.formJsonStr=b}})):b.form&&b.form.id&&(b=b.form.id,d.find(".form-preview").show(),$(a.el).find(".form-loading").removeClass("hide"),a.formview.render({parentEl:$(a.el).find(".j_form_view"),
formId:b,readOnly:g,callback:function(b){d.find(".form-loading").remove();d.find(".form-loading").remove();null!=d.find(".j_form_view").find("div").get(0)?g||d.find("#form-submit").parent().show():(d.find(".form-preview").hide(),d.find(".j_task_form").hide());$(a.el).find(".scrollwrapper").trigger("resizeSroll");if(b=formPlugin.submitAssembleForm({parentEl:d.find(".form-view_js")}))b=JSON.stringify(b.formData.dataDetails),window.formJsonStr=b}}))},loadAfter:function(){$(this.el).find("#task-content").autosize();
$(this.el).find("#task-title").autosize();this.backLastPage&&($(this.el).find(".js_entiyDetail_reply").removeClass("hide"),$(this.el).find(".detail-close-li").addClass("hide"));f.layout(this.el+" #task-wrapper")},loadTemplate:function(){$(this.el).html(f.template("task.taskinfo"))},renderTaskPanel:function(){var a=this.model.task,d=this.model.subtaskPage,g=this.model.subtasksNumber;this.renderTaskInfo();this.delegateEditEvents();null!=this.extendView&&(this.extendView.render(a),null!=d&&this.subtaskView.render(a,
d,g),this.shareView.render(a.shareEntrys),d=this.reducePermissionByLock(a),3>d&&(g=$(this.el).find("#copy-task").parent().clone(),$(this.el).find("#copy-task").parent().remove(),$(this.el).find(".j_button_ul .j_more_dropdown").before(g)),this.permissionView.render(d),this.data&&this.entityremind.render(a.entityRemind,a.remindEntryList))},renderParam:function(){var a=$(this.el),d=Date.create(TEAMS.nowTime);switch(this.id){case "today":a.find("#dueDate").val(d.format("{yyyy}-{MM}-{dd}"));break;case "tomorrow":a.find("#dueDate").val(d.addDays(1).format("{yyyy}-{MM}-{dd}"));
break;case "future":a.find("#dueDate").val(d.addWeeks(1).format("{yyyy}-{MM}-{dd}"))}this.dueDate&&a.find("#dueDate").val(Date.create(this.dueDate).format("{yyyy}-{MM}-{dd}"))},renderTaskInfo:function(){var a=$(this.el),d=this.model.task,g=this.model.entityRemind;a.find("#task-container").addClass("taskId"+d.id);this.renderWatch(d.watched);this.renderStatus(d.finished?"finished":"todo",!0);this.renderLocked(d.locked);this.renderTaskUrgency(d.priority);a.find("#task-title").parent().parent().find(".j_summary-avatar").attr("userId",
d.creator.id);a.find("#task-title").val(d.name).data("title",d.name).trigger("autosize.resize");if(d.creator){a.find("#task-creator").text(d.creator?d.creator.username:"");a.find("#task-creator").attr("userId",d.creator.id);var b="images/avatar.png";d.creator.avatar&&(b=d.creator.avatar.p5&&"/base/download/"+d.creator.avatar.p5);a.find(".j_summary-avatar").attr("data-original-title",Date.create(d.createTime).format("{yyyy}-{MM}-{dd}")+" \u7531"+d.creator.username+"\u521b\u5efa").children("img").attr("src",
b)}d.content?(b=a.find("#task-content"),b.get(0).value=d.content,b.trigger("autosize.resize")):a.find("#task-content").get(0).value="";d.beginDate&&(a.find("#beginDate").val(Date.create(d.beginDate).format("{yyyy}-{MM}-{dd}")),a.find("#task-beginDate").removeClass("hide"),a.find("#i-beginDate").parent().addClass("hide"));d.dueDate&&a.find("#dueDate").val(Date.create(d.dueDate).format("{yyyy}-{MM}-{dd}"));d.finishTime?(a.find("#task-finishTime").removeClass("hide"),a.find("#finishTime").text(Date.create(d.finishTime).format("{yyyy}-{MM}-{dd}"))):
a.find("#task-finishTime").addClass("hide");d.manager&&d.manager.username&&(a.find("#task-manager").html(f.template("base.user",d.manager)),b="images/avatar.png",d.manager.avatar&&(b=d.manager.avatar.p5&&"/base/download/"+d.manager.avatar.p5),b="\x3cimg class\x3d'avatar' src\x3d'"+b+"' /\x3e",a.find("#task-manager").find("#"+d.manager.id+" a").prepend($(b)));if(d.parent){var l=d.parent,b=l.id,l='\x3cspan data-id\x3d"'+b+'" class\x3d"entity-item"\x3e\x3ca id\x3d"'+b+'" \x3e'+l.name+"\x3c/a\x3e\x3c/span\x3e";
a.find("#parent-task").removeClass("hide");var k=a.find(".parent-task-name");k.html(l);"#entitybox-container"!=this.el?(k.find("#"+b).addClass("j_entityslider-toggle"),k.find("#"+b).attr({"data-module":"task","data-id":b})):(k.find("#"+b).addClass("entitybox-toggle"),k.find("#"+b).attr({"data-value":b,"data-module":"task","data-id":b}))}a.find("#btn-wechat").attr("targetId",d.id);a.find("#btn-remind").attr("targetId",d.id);a.find("#btn-calendar").attr("targetId",d.id);a.find("#btn-calendar").attr("entity-title",
d.name);null!=this.mainline&&(this.mainline.render(d.mainlines),this.tag.render(d.tags),this.renderRelevanceInfos(d.relevances),this.attachment.render(d.attachments),g&&g.id&&a.find($(this.entityremind.el).attr("icon")).parent().addClass("hide"))},renderRelevanceInfos:function(a){var d=$(this.el),g=this.relevanceViews,b=[],l=[],k=[],n=[],c=[];_.each(a,function(a){var d=a.targetModule;"task"==d?b.push(a):"document"==d?l.push(a):"customer"==d?n.push(a):"workflow"==d?k.push(a):"calendar"==d&&c.push(a)});
_.each(g,function(a){"task"==a._targetModule?(a.render(b),0<b.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"document"==a._targetModule?(a.render(l),0<l.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"customer"==a._targetModule?(a.render(n),0<n.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"workflow"==a._targetModule?(a.render(k),0<k.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"calendar"==a._targetModule&&(a.render(c),0<c.length&&
d.find($(a.el).attr("icon")).parent().addClass("hide"))})},renderTaskUrgency:function(a){var d=$(this.el);"normal"==a?(d.find("#task-urgency .j_urgency_name").text("\u6b63\u5e38"),d.find("#task-urgency .j_importance_level").attr("class","importance-item j_importance_level")):"high"==a?(d.find("#task-urgency .j_urgency_name").text("\u7d27\u6025"),d.find("#task-urgency .j_importance_level").attr("class","importance-item j_importance_level warning")):"urgency"==a&&(d.find("#task-urgency .j_urgency_name").text("\u975e\u5e38\u7d27\u6025"),
d.find("#task-urgency .j_importance_level").attr("class","importance-item j_importance_level danger"))},renderWatch:function(a){var d=$(this.el);a?d.find("#task-watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'):d.find("#task-watch").html('\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e\u5173\u6ce8')},renderStatus:function(a,d){var g=$(this.el).find("#task-status");"finished"==a?(g.html('\x3ci class\x3d"glyphicon icon-finished"\x3e\x3c/i\x3e\u6807\u8bb0\u672a\u5b8c\u6210'),
g.attr({"data-status":"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),d&&$(this.el).find("#task-title").addClass("finished-line")):(g.html('\x3ci class\x3d"glyphicon icon-todo"\x3e\x3c/i\x3e\u6807\u8bb0\u5b8c\u6210'),g.attr({"data-status":"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),d&&$(this.el).find("#task-title").removeClass("finished-line"));g.tooltip("destroy").tooltip({container:"body",
animation:!0})},reducePermissionByLock:function(a){return 3===a.permission&&a.locked?1:a.permission},renderLocked:function(a){var d=$(this.el).find("#task-lock");a?d.html('\x3ci class\x3d"glyphicon icon-lock"\x3e\x3c/i\x3e\u89e3\u9501').attr({title:"\u70b9\u51fb\u89e3\u9501"}):d.html('\x3ci class\x3d"glyphicon icon-unlock-alt"\x3e\x3c/i\x3e\u9501\u5b9a').attr({title:"\u70b9\u51fb\u9501\u5b9a\uff0c\u9501\u5b9a\u540e\u53c2\u4e0e\u4eba\u4e0d\u53ef\u7f16\u8f91"});d.tooltip("destroy").tooltip({container:"body",
animation:!0})},renderUrgency:function(a,d){var g=this;g.model.changeProperty(g.id,"priority",a,function(a){f.notify("\u4efb\u52a1\u7d27\u6025\u7a0b\u5ea6\u4fee\u6539\u6210\u529f!");$(g.el).find("#task-urgency").find("i").attr("class",d);var b=$("#"+g.id);if("#entitybox-container"==g.el){var l=$("#entitybox-container #task-urgency").find(".j_importance_level");"urgency"==a.task.priority?(b.find(".mark").attr("class","mark mark-danger sne"),l.attr("class","importance-item j_importance_level danger"),
$("#entitybox-container #task-urgency").find(".j_urgency_name").text("\u975e\u5e38\u7d27\u6025"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'urgency']").parent().addClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'normal']").parent().removeClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'high']").parent().removeClass("active")):"high"==a.task.priority?(b.find(".mark").attr("class","mark mark-warning sne"),
l.attr("class","importance-item j_importance_level warning"),$("#entitybox-container #task-urgency").find(".j_urgency_name").text("\u7d27\u6025"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'urgency']").parent().removeClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'normal']").parent().removeClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'high']").parent().addClass("active")):"normal"==a.task.priority&&
(b.find(".mark").attr("class","mark mark-normal sne"),l.attr("class","importance-item j_importance_level"),$("#entitybox-container #task-urgency").find(".j_urgency_name").text("\u6b63\u5e38"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'urgency']").parent().removeClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'normal']").parent().addClass("active"),$("#entitybox-container #task-urgency").siblings().find("a[value\x3d'high']").parent().removeClass("active"))}else l=
$("#entitySlider #task-urgency").find(".j_importance_level"),"urgency"==a.task.priority?(b.find(".mark").attr("class","mark mark-danger sne"),l.attr("class","importance-item j_importance_level danger"),$("#entitySlider #task-urgency").find(".j_urgency_name").text("\u975e\u5e38\u7d27\u6025"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'urgency']").parent().addClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'normal']").parent().removeClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'high']").parent().removeClass("active")):
"high"==a.task.priority?(b.find(".mark").attr("class","mark mark-warning sne"),l.attr("class","importance-item j_importance_level warning"),$("#entitySlider #task-urgency").find(".j_urgency_name").text("\u7d27\u6025"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'urgency']").parent().removeClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'normal']").parent().removeClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'high']").parent().addClass("active")):
"normal"==a.task.priority&&(b.find(".mark").attr("class","mark mark-normal sne"),l.attr("class","importance-item j_importance_level"),$("#entitySlider #task-urgency").find(".j_urgency_name").text("\u6b63\u5e38"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'urgency']").parent().removeClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'normal']").parent().addClass("active"),$("#entitySlider #task-urgency").siblings().find("a[value\x3d'high']").parent().removeClass("active"));
$("#stream").trigger("insertStream",a.stream)})},delegateCreateEvents:function(){var a=this,d=this.model,g=$(this.el);g.off("blur.Task","#task-title").on("blur.Task","#task-title",function(b,l){if(!r.validate($(this)))return!1;var k=$(this),n=$.trim($(this).val());$(this).val(n);if(a.isNewTask()){if(n&&!n.isBlank()){var c={content:""};c.name=n;c.sn=a.sn;d.create(c,a.id,function(b){a.data=b;a.id=d.id;f.notify("\u4efb\u52a1\u521b\u5efa\u6210\u529f");g.find("#task-print").show();g.find(".j_recommend_block").removeClass("hide");
g.find(".j_content_block").removeClass("hide");g.find(".j_button_ul li:not([j_li_save_untrue])").removeClass("hide");g.find(".j_button_ul .j_li_save_untrue").addClass("hide");g.find(".j_button_ul .js_entiyDetail_reply").addClass("hide");$(a.el).find(".loading_large").show();$(a.el).find(".manager-div").removeClass("hide");$(a.el).find("#task-dueDate").removeClass("hide");$(a.el).find(".links-control-group,.control-btn").removeClass("hide");l||$(a.el).find("#task-content").focus();$(a.el).find("#dueDate").attr("disabled",
!1);k.data("title",d.task.name);a.initComponent();a.renderShowAfter(!0);a.page.trigger("create",d.task);a.page.trigger("beforeOpen",a.id);a.callback&&a.callback(d.task);b.form&&b.form.id&&b.form.layoutId&&!window.systemInfo_print&&g.find(".j_task_form").removeClass("hide");b.form&&b.form.id&&b.form.layoutId&&(g.find("#formDataLog").removeClass("hide"),g.find("#formDataLog a").text("\u81ea\u5b9a\u4e49\u5b57\u6bb5\u4fee\u6539\u65e5\u5fd7"),a.extendView.formDataId=b.task.formData);window.systemInfo_print&&
a.renderForm();a.sn=null})}}else n&&0<$.trim(n).length?$(this).data("title")&&n!=$(this).data("title")&&(g.find("#btn-calendar").attr("entity-title",n),c=n.trim(),d.changeProperty(a.id,"name",c,function(d){f.notify("\u4efb\u52a1\u540d\u79f0\u5df2\u4fee\u6539");k.data("title",n);$(a.el+"\u3000#stream").trigger("insertStream",d.stream);a.page.trigger("changePanelName",{id:a.id,title:n})})):($(this).val($(this).data("title")),f.notify("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"))});g.off("blur.Task",
"#task-content").on("blur.Task","#task-content",function(b){if(!r.validate($(this)))return!1;var l=$(this);b=$.trim($(this).val());$(this).val(b);if(a.isNewTask()){if(b&&!b.isBlank()){var k=/[,|;|\uff0c|\uff1b|\u3002| |\n]/.exec(b),n={};k?(k=b.substring(0,k.index),n.name=20<k.length?k.substring(0,20):k):n.name=20<b.length?b.substring(0,20):b;n.content=b;n.sn=a.sn;d.create(n,a.id,function(){a.id=d.id;g.find("#task-print").show();g.find(".j_recommend_block").removeClass("hide");g.find(".j_content_block").removeClass("hide");
g.find(".j_button_ul li:not([j_li_save_untrue])").removeClass("hide");g.find(".j_button_ul .j_li_save_untrue").addClass("hide");$(a.el).find(".loading_large").show();$(a.el).find(".manager-div").removeClass("hide");$(a.el).find("#task-dueDate").removeClass("hide");$(a.el).find(".links-control-group,.control-btn").removeClass("hide");$(a.el).find("#task-content").focus();$(a.el).find("#dueDate").attr("disabled",!1);l.data("title",d.task.name);a.initComponent();a.renderShowAfter(!0);a.trigger("create",
d.task);a.trigger("beforeOpen",a.id);a.callback&&a.callback(d.task)})}}else(d.task.content||b)&&b!=d.task.content&&d.changeProperty(a.id,"content",b,function(d){f.notify("\u4efb\u52a1\u5185\u5bb9\u5df2\u4fee\u6539");$(a.el+"\u3000#stream").trigger("insertStream",d.stream)})})},validateDates:function(){var a=$(this.el),d=a.find("#beginDate").val(),a=a.find("#dueDate").val();if(d&&a){if(Date.create(d).isBefore(a,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");
return!1}return!0},delegateEditEvents:function(){var a=this,d=this.model,g=$(this.el);g.on("changeDuedate.Task","#dueDate",function(g,b,l){b||(b="");if(b instanceof Date&&(b=b.format("{yyyy}-{MM}-{dd}"),!a.validateDates()))return;$(this).val(b);g=[{name:"dueDate",value:b}];l&&g.push({name:"sn",value:l});a.model.changeProperties(g,function(){f.notify("\u4efb\u52a1\u5230\u671f\u65e5\u5df2\u4fee\u6539");a.page&&(a.page.trigger("changeDuedate",d.task),a.page.trigger("changePanelDuedate",d.task),$("#entitySlider").find("#"+
a.id).find(".dudate").val(b));a.changeEvent&&a.changeEvent("duedate",d.task.dueDate)})});f.datepicker([{el:a.el+" #beginDate",callback:function(g){g=g.date;if(!g||a.validateDates())g=[{name:"beginDate",value:g?g.format("{yyyy}-{MM}-{dd}"):""}],a.model.changeProperties(g,function(g){f.notify("\u4efb\u52a1\u8d77\u59cb\u65e5\u5df2\u4fee\u6539");a.page&&a.page.trigger("changeBeginDate",d.task)})}},{el:a.el+" #dueDate",callback:function(a){a=a.date;g.find("#dueDate").trigger("changeDuedate",a)}}]);g.off("updateDate.Task",
"#dueDate").on("updateDate.Task","#dueDate",function(a,d){d?$(this).val(d):$(this).val("")});g.off("updateDate.Task","#beginDate").on("updateDate.Task","#beginDate",function(a,d){g.find("#task-beginDate").removeClass("hide");g.find(".control-group #i-beginDate").addClass("hide");d?$(this).val(d):$(this).val("")});e({el:a.el+" #typeahead-manager",callback:function(b){b&&!$.isEmptyObject(b)&&d.updateManager(a.id,b,function(d){$(a.el+" #task-manager").html(f.template("base.user",b));$(a.el+" #stream").trigger("insertStream",
d.stream);a.trigger("changeManager",{manager:b,id:a.id});a.page.trigger("changeManager",{manager:b,id:a.id});a.page.trigger("changePanelManager",{manager:b,id:a.id});$("#readinfo").trigger("updateReadInfo");var l="images/avatar.png";if(d.employee){d.employee.avatar&&(l=d.employee.avatar.p5&&"/base/download/"+d.employee.avatar.p5);var k="\x3cimg class\x3d'avatar' src\x3d'"+l+"' /\x3e";0<g.find("#task-manager").find("#"+d.employee.id+" a img").length?g.find("#task-manager").find("#"+d.employee.id+
" a img").attr("src",l):g.find("#task-manager").find("#"+d.employee.id+" a").prepend($(k));$("#entitySlider").find("#"+a.id).find(".user").html(d.employee.name)}a.changeEvent&&a.changeEvent("manager",b.name);f.notify("\u8d1f\u8d23\u4eba\u4fee\u6539\u6210\u529f")})}})},isNewTask:function(){var a=this.id;return-1<a.indexOf("today")||-1<a.indexOf("tomorrow")||-1<a.indexOf("future")||-1<a.indexOf("memo")},api_changeTitle:function(a){$(this.el).find("#task-title").val(a).trigger("autosize.resize")},api_blurTitle:function(a){$(this.el).find("#task-title").trigger("blur",
!0)},changeStatus:function(a){this.renderStatus(a,!0)},changeWatch:function(a){this.renderWatch(a);$("#left").trigger("refresh","watched")},addShare:function(a){this.shareView.render(a)},api_changeDuedate:function(a,d){$(this.el).find("#dueDate").trigger("changeDuedate",[a,d])},focusTitle:function(){$(this.el).find("#task-title").focus()},undelegateEvents:function(){$(this.el).off(".Task");$(this.el).find("#task-title").trigger("autosize.destroy");$(this.el).find("#task-content").trigger("autosize.destroy")},
remove:function(){this.undelegateEvents();f.removeDatepicker("#beginDate");f.removeDatepicker("input#dueDate");this.shareView&&(this.shareView.remove(),this.shareView=null);this.tag&&(this.tag.remove(),this.tag=null);this.mainline&&(this.mainline.remove(),this.mainline=null);this.attachment&&(this.attachment.remove(),this.attachment=null);this.relevanceViews&&(_.each(this.relevanceViews,function(a){a.remove()}),this.relevanceViews=null);this.extendView&&(this.extendView.remove(),this.extendView=null);
this.permissionView&&(this.permissionView.remove(),this.permissionView=null);this.guideview&&(this.guideview.remove(),this.guideview=null);this.entityremind&&(this.entityremind.remove(),this.entityremind=null);window.formJsonStr&&(window.formJsonStr=null)}});m.exports=h});
define("teams/task/taskrightview",["teams/chart/taskchart","teams/utils"],function(h,q,m){h("teams/chart/taskchart");var f=h("teams/utils");q=Backbone.View.extend({initialize:function(e){this.container=e.container;this.subId=this.userId=e.userId;this.el="#task-right";this.pageNo=1;this.pageSize=5;this.sub=!1;$(this.container).html(f.template("task.taskright"))},delegateEvents:function(){var e=this,c=$(e.el);c.on("click.taskright",".j_submore",function(){e.pageNo++;e.renderSub()});c.on("click.taskright",
".j_employee-click",function(){var b=$(this).parents("#empList"),a=$(this).attr("title");$(this).addClass("checked");e.sub=!0;e.name=a;e.subId=$(this).attr("userId");b.find('a[title!\x3d"'+a+'"]').removeClass("checked");e.subId?e.renderSubChart(!1):e.renderSubChart(!0)})},render:function(){1==TEAMS.noSubordinates&&$(".sbox").last().addClass("hide");var e=this;$(e.el);e.option={tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c}"},legend:{orient:"horizontal",x:"center",y:"bottom",borderColor:"#CCC",
borderWidth:1,textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"},data:[{name:"\u5ef6\u671f\u7684"},{name:"\u672a\u5b8c\u6210\u7684"},{name:"\u6709\u8fdb\u5c55\u7684"},{name:"\u5df2\u5b8c\u6210\u7684"}]},toolbox:{show:!0,feature:{restore:{show:!0},saveAsImage:{show:!0,name:""}}},series:[{name:"\u4efb\u52a1\u7edf\u8ba1",type:"pie",center:["50%","40%"],minAngle:20,startAngle:45,radius:["40%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{c}"},labelLine:{show:!0,length:5}},emphasis:{label:{show:!0,
position:"center",textStyle:{fontSize:"15",fontWeight:"bold"}}}},data:[{value:0,name:"\u672a\u5b8c\u6210\u7684"},{value:0,name:"\u6709\u8fdb\u5c55\u7684"},{value:0,name:"\u5ef6\u671f\u7684"},{value:0,name:"\u5df2\u5b8c\u6210\u7684"}]}]};e.load(!1,function(c){h.async("https://static.eteams.cn/js/echarts.min.js",function(){e.tc=echarts.init($("#mytask")[0]);var b=e.option.series[0].data,a=c.chartData,d=$(e.el).find(".sbox-title");!a||0==a.todoCount&&0==a.feedCount&&0==a.dueCount&&0==a.finishedCount?
(b[0].value=1,b[1].value=1,b[2].value=1,b[3].value=1,e.tc.setOption(e.option),d.text("\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1\u793a\u4f8b")):(b[0].value=a.todoCount,b[1].value=a.feedCount,b[2].value=a.dueCount,b[3].value=a.finishedCount,e.tc.setOption(e.option),d.text("\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1"))})});e.renderSub()},renderSub:function(){var e=$(this.el),c=this;$.ajax({type:"get",url:"/tasks/subList.json",dataType:"json",data:{pageNo:c.pageNo,pageSize:c.pageSize,userId:c.userId},success:function(b){var a=
b.pageSub.result;if(a&&0<a.length){c.sub=!0;e.find("#sub").show();1==c.pageNo&&c.renderSubChart(!0);var d=$("#empList");d.find(".j_submore").remove();if(1==c.pageNo){var g=$("#empItem span").clone();g.find("a").attr({userId:null,title:"\u6240\u6709\u4e0b\u5c5e"}).text("\u6240\u6709\u4e0b\u5c5e").addClass("checked");d.append(g)}$(a).each(function(a,b){g=$("#empItem span").clone();g.find("a").attr({userId:b.subId,title:b.subName}).text(b.subName);d.append(g)});b.pageSub.hasNext&&d.append($(".j_submore ").clone().removeClass("hide"))}else e.find(".j_nosub").show(),
$("#subtask").addClass("hide")}})},renderSubChart:function(e){var c=this,b=c.name?c.name:"\u4e0b\u5c5e";$(c.el).find(".j_sub").text(b+"\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1");c.load(e,function(a){h.async("https://static.eteams.cn/js/echarts.min.js",function(){c.tc1=echarts.init($("#subtask")[0]);var d=c.option.series[0].data,g=a.chartData;!g||0==g.todoCount&&0==g.feedCount&&0==g.dueCount&&0==g.finishedCount?($("#empList").addClass("hide"),$("#subtask").addClass("hide"),$(".j_notask").removeClass("hide")):
(d[0].value=g.todoCount,d[1].value=g.feedCount,d[2].value=g.dueCount,d[3].value=g.finishedCount,$("#empList").removeClass("hide"),$("#subtask").removeClass("hide"),$(".j_notask").addClass("hide"));c.sub&&$("#empList").removeClass("hide");c.tc1.setOption(c.option);c.tc1.resize();c.tc1.restore()})})},load:function(e,c){var b=this.subId,a=this.userId;$.ajax({type:"get",url:"/tasks/chartData.json",dataType:"json",data:{userId:b?b:a,sub:e},success:function(a){c&&c(a)}})},remove:function(){this.tc&&(this.tc.clear(),
this.tc.dispose());this.tc1&&(this.tc1.clear(),this.tc1.dispose());$(this.el).off(".taskright")}});m.exports=q});
define("teams/task/mytaskview","teams/utils teams/component/sharemodel teams/component/watchmodel teams/task/taskrightview teams/component/remind teams/task/mytaskmodel teams/component/filter teams/component/userselector teams/component/batchselector teams/component/atmeview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/sharemodel"),c=h("teams/component/watchmodel"),b=h("teams/task/taskrightview"),a=h("teams/component/remind"),d=h("teams/task/mytaskmodel"),g=h("teams/component/filter"),
l=h("teams/component/userselector"),n=h("teams/component/batchselector"),k=h("teams/component/atmeview");h=Backbone.View.extend({el:"#j_taskcenter",initialize:function(a){this.taskId=a.taskId;this.userId=a.userId;this.type=a.type;this.viewState=this._getConfig("viewState.task")||"list";this.model=new d(a);this.watchModel=new c;this.shareModel=new e({entityId:"",module:""});a=f.template("task.mytask",{userId:this.userId});$(this.el).html(a);this._$MAP=null;this._cache$();this._renderType();this.atmeview=
new k({$input:$(this.el).find("#qcreatetask")})},_cache$:function(){var a=this.$el.find("#mytask-container .j_begin"),d=this.$el.find("#mytask-container .j_due");this._$MAP={body:$("body"),beginDate:{divs:a,ulMap:{past:a.filter(".past").children(".task-list"),today:a.filter(".today").children(".task-list"),tomorrow:a.filter(".tomorrow").children(".task-list"),future:a.filter(".future").children(".task-list"),memo:a.filter(".memo").children(".task-list")}},dueDate:{divs:d,ulMap:{delay:d.filter(".delay").children(".task-list"),
today:d.filter(".today").children(".task-list"),tomorrow:d.filter(".tomorrow").children(".task-list"),future:d.filter(".future").children(".task-list"),memo:d.filter(".memo").children(".task-list")}},list:{div:this.$el.find("#mytask-container .all-type-view"),ul:this.$el.find("#mytask-container .all-type .task-list")},dragableUL:this.$el.find("#mytask-container ul.task-list")}},delegateEvents:function(){var d=this,b=this.model,k=this.$el;this._$MAP.body.off("click.TaskList",".goto-top").on("click.TaskList",
".goto-top",function(a){f.gotoTop(".j_mainscroll")});k.off("click.TaskList",".j_moretask").on("click.TaskList",".j_moretask",function(){b.pageNo++;d.search(!0)});k.off("click.TaskList","#view-state li").on("click.TaskList","#view-state li",function(){var a=$(this);a.addClass("active").siblings().removeClass("active");a=a.data("value");d._toggleViewState(a)});k.off("mouseenter.TaskList","#task-filter").on("mouseenter.TaskList","#task-filter",function(a){$(this).addClass("open");var b=$(this).attr("data-toggle");
d.dropdownFilter||(d.dropdownFilter=new g({el:b,module:"task",targetObj:$(this),userId:d.userId,scroll:!0}),d.dropdownFilter.render(a));a=setTimeout(function(){$(b).parents(".dropdown-filter").slideDown("fast")},300);$(this).data("showTimer",a)}).off("mouseleave.TaskList","#task-filter").on("mouseleave.TaskList","#task-filter",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");var d=$(this).data("showTimer");d&&clearTimeout(d);$(this).removeData("showTimer");$(a).parents(".dropdown-filter").slideUp(100)}).off("filter.TaskList",
"#task-filter").on("filter.TaskList","#task-filter",function(a){"mine"==d.type?d.mine():(b.pageNo=1,d.search(!1));$(this).removeClass("open")});k.off("click.TaskList",".orderType").on("click.TaskList",".orderType",function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#task-order").attr("data-entity",$(this).attr("data-entity"));$("#task-order").attr("data-direction",$(this).attr("data-direction"));"mine"==d.type?d.mine():(b.pageNo=1,d.search(!1));
ROUTER.navigate("/tasks/"+d.userId,{trigger:!1})});k.off("click.TaskList",".j_mineType ul li").on("click.TaskList",".j_mineType ul li",function(){$(this).hasClass("active")||($(this).addClass("active").siblings("li").removeClass("active"),$(this).data("type"),$("#task-taskType").attr("data-entity",$(this).attr("data-entity")),d.mine())});k.off("search.TaskList","#tasksearch-keywords").on("search.TaskList","#tasksearch-keywords",function(a){b.pageNo=1;d.search(!1)});k.off("keyup.TaskList","#tasksearch-keywords").on("keyup.TaskList",
"#tasksearch-keywords",function(a){13==a.which&&$(this).trigger("search")});k.on("click.TaskList",".task-watchs",function(){var a=d.findSelectedLi();0<a.length?d.watchModel.watch('{"module":"task","ids":"'+a+'"}',function(g){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");d.updateFastKey("watch",a)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});this._$MAP.body.off("click.TaskList",".task-reminds").on("click.TaskList",".task-reminds",function(g){g=d.findSelectedLi();if(0<g.length){var b=$(this);
b.attr("module","task");b.attr("targetIds",g);(new a({obj:b})).render()}else f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});k.off("click.TaskList",".shortcut .watch").on("click.TaskList",".shortcut .watch",function(a){a.stopPropagation();var g={},b=$(this);g.module=b.attr("module");g.id=b.attr("targetId");"true"==b.attr("watched")?(g._method="DELETE",d.watchModel.watchOne(g,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");b.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\x26nbsp;\u5173\u6ce8');
b.attr("watched","false");a=d.subView;a.id&&a.id==g.id&&a.changeWatch(!1)})):(g._method="PUT",d.watchModel.watchOne(g,function(a){f.notify("\u5173\u6ce8\u6210\u529f");b.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\x26nbsp;\u53d6\u6d88\u5173\u6ce8');b.attr("watched","true");a=d.subView;a.id&&a.id==g.id&&a.changeWatch(!0)}))});k.off("confirmHandler.TaskList",".task-share").on("confirmHandler.TaskList",".task-share",function(a,g){var b=g.objs;if(b&&!$.isEmptyObject(b)){b=$.isArray(b)?b:[b];d.sids=
"";for(var l=0;l<b.length;l++)d.sids+=b[l].id+",";d.shareModel.sids=d.sids;b=d.findSelectedLi();d.shareModel.entityIds=b;d.shareModel._module="task";d.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});k.off("click.TaskList",".task-share").on("click.TaskList",".task-share",function(a){a.stopPropagation();a=d.findSelectedLi();0<a.length?(new n({module:"task",entityIdArr:a})).render():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});
k.off("click.TaskList",".task-finished").on("click.TaskList",".task-finished",function(){var a=d.findSelectedUsefulLi();0<a.length?d.model.updateStatus("finished",a,function(g){f.notify("\u6279\u91cf\u5b8c\u6210\u64cd\u4f5c\u6210\u529f");d.updateFastKey("finished",a)}):f.notify("\u8bf7\u9009\u62e9\u6709\u5b8c\u6210\u6743\u9650\u7684\u8bb0\u5f55")});k.off("click.TaskList",".shortcut .finish").on("click.TaskList",".shortcut .finish",function(a){a.stopPropagation();var g=$(this);if($(this).attr("targetId")&&
$(this).attr("status")&&!g.data("post")){var l="finished"==g.attr("status")?"todo":"finished";a=g.attr("targetId");g.data("post",!0);b.updateStatus(l,a,function(a){g.data("post",!1);a.actionMsg&&a.actionMsg.message?f.notify(a.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),d._renderStatus(l,g.parents("li")))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});k.off("keyup.TaskList","li.task input.input").on("keyup.TaskList","li.task input.input",function(a,g){var b=$(this),
l=b.parents("ul:first");13==a.which&&(b=b.val())&&$.trim(b)&&d._insertBlank(l)});k.off("confirmHandler.TaskList",".shortcut .share").on("confirmHandler.TaskList",".shortcut .share",function(a,g){var b=g.objs;if(b&&!$.isEmptyObject(b)){b=$.isArray(b)?b:[b];d.sids="";for(var l=0;l<b.length;l++)d.sids+=b[l].id+",";var k=$(this).attr("targetId");d.shareModel.sids=d.sids;d.shareModel.entityIds=k;d.shareModel._module="task";d.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");
var g=d.subView;g.id&&g.id==k&&g.addShare(a.shareEntrys)})}});k.off("click.TaskList",".shortcut .share").on("click.TaskList",".shortcut .share",function(a){a.stopPropagation();$(this).hasClass("selector-toggle")?(new l({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});k.off("click.TaskList",".e-list-head").on("click.TaskList",".e-list-head",function(a){if(!(0<$(a.target).closest(".group-add").length)){a=$(this).find(".group-switch");var d=a.parents(".group-view").find(".task-list");
"on"==a.attr("data-status")?(a.attr("title","\u5c55\u5f00"),a.attr("data-status","off"),a.find("i:last").removeClass().addClass("icon-angle-down"),d.slideUp()):(a.attr("title","\u6298\u53e0"),a.attr("data-status","on"),a.find("i:last").removeClass().addClass("icon-angle-right"),d.slideDown())}});k.off("click.TaskList","#mytask-container .notask").on("click.TaskList","#mytask-container .notask",function(a,d){$(this).parent().siblings().children(".group-add").trigger("click")});k.off("click.TaskList",
"#mytask-container .group-view .group-add").on("click.TaskList","#mytask-container .group-view .group-add",function(){var a=$(this).parents(".group-view"),g=a.find(".task-list");if(g.find("input").size())g.find("input").focus();else{var b=a.find(".group-switch");"off"==b.data("status")&&(b.attr("title","\u6298\u53e0"),b.attr("data-status","on"),b.find("i:last").removeClass().addClass("icon-angle-down"),a.find(".task-list").slideDown());d._insertBlank(g)}});k.off("focusout.TaskList","li.task input.input:not([readonly])").on("focusout.TaskList",
"li.task input.input:not([readonly])",function(a,g){var l=$(this),k=l.parents("li:first"),n=l.parents("ul:first");if(l.val()&&l.val().trim()){l.val();l.attr("title");var c={};k.attr("data-module")||(n=n.attr("group"),c.content="",c.name=l.val(),c.sn=k.attr("sn"),k.find(".e-list-loading").show(),l.attr("readonly",!0),b.create(c,n,function(a){f.notify("\u4efb\u52a1\u521b\u5efa\u6210\u529f");a=b.task;k.attr({id:a.id});k.find(".shortcut").removeClass("hide");k.find(".finish").attr({targetId:a.id,status:a.status});
k.find(".e-list-loading").hide();k.find("input").remove();k.find(".checkbox").after('\x3cdiv class\x3d"title j_entityslider-toggle" data-module\x3d"task" data-id\x3d"'+a.id+'"\x3e\x3cdiv class\x3d"text" title\x3d"'+a.name+'"\x3e\x3c/div\x3e\x3cspan class\x3d"importance" style\x3d"display:none"\x3e\u7d27\u6025\x3c/span\x3e\x3c/div\x3e');k.find(".title .text").text(a.name);d._refreshViewBaseCount()}))}});k.off("click.TaskList","li.task").on("click.TaskList","li.task",function(a){$(this).hasClass("unread")?
(a=$(".j_unread").text().trim(),a=$.isNumeric(a)?a:0,0>=a-1?$(".j_unread").addClass("hide"):$(".j_unread").text(a-1)):$(this).hasClass("newComment")&&(a=$(".j_feed").text().trim(),a=$.isNumeric(a)?a:0,$.isNumeric(a)&&0>=a-1?$(".j_feed").addClass("hide"):$(".j_feed").text(a-1));$(this).removeClass("unread");$(this).removeClass("newComment")});this._$MAP.dragableUL.sortable({opacity:.9,handle:".title",revert:!0,connectWith:".j_center .task-list",placeholder:"task-placeholder",cancel:".readonly",over:function(a,
g){var b=g.item,l=$(this),k;switch(d.viewState){case "beginDate":k=l.attr("group").split("/")[1];l=b.attr("due-date-group");break;case "dueDate":k=b.attr("begin-date-group");l=l.attr("group").split("/")[1];break;default:return}d._dateGroupValid(k,l)?(g.placeholder.removeClass("disable"),b.data("cancel",!1),g.placeholder.html("")):(g.placeholder.addClass("disable"),b.data("cancel",!0),g.placeholder.html("\x26nbsp;\x26nbsp;\u8d77\u59cb\u65e5\u4e0d\u80fd\u5728\u5230\u671f\u65e5\u4e4b\u540e"))},update:function(a,
g){g.item.data("cancel")?$(this).sortable("cancel"):(d.rebuildSN(g.item.parent()),d.changeGroupWhileSort(g.item),"list"!=d.viewState&&g.sender&&(d.rebuildSN(g.sender),d._changDateGroupByDrag(g.item),d._refreshViewBaseCount()))}}).disableSelection().off("click.mytask").on("click.mytask",function(){$("textarea:focus, input:focus").length&&$("textarea:focus, input:focus").trigger("focusout")});k.off("focusin.mytask","#qcreatetask").on("focusin.mytask","#qcreatetask",function(){$(this).parent().addClass("active");
d.atmeview.render()});k.off("focusout.mytask","#qcreatetask").on("focusout.mytask","#qcreatetask",function(){$(this).parent().removeClass("active")});k.off("keydown.mytask","#qcreatetask").on("keydown.mytask","#qcreatetask",function(a){a.ctrlKey&&13==a.which&&k.find(".j_qcreatetask").trigger("click")});k.off("click.mytask",".j_qcreatetask").on("click.mytask",".j_qcreatetask",function(){var a=$("#qcreatetask");if(!a.attr("readonly")){var g=a.val();if(g&&$.trim(g)&&""!=$.trim(g)){var l=null,k=[],n=
a.data("userData");if(n)for(var c=0;c<n.length;c++)if(-1!=g.indexOf(n[c].userName)){var e="@"+n[c].userName;-1!=g.indexOf(e)&&(l?k.push(n[c].userId):l=n[c].userId);g=g.replace(new RegExp(e,"gm"),"")}100<$.trim(g).length?f.notify("\u4efb\u52a1\u540d\u5b57\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57"):0==$.trim(g).length?f.notify("\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"):(n={content:""},n.name=g,n.sn=(new Date).getTime(),n.dueDate=(new Date).getTime(),l&&(n.manager={id:l}),b.create(n,null,function(g){g=
b.task;if(k&&0<k.length){var l=d.shareModel;l.sids=k.join(",");l.entityIds=g.id;l.entryType="user";l._module="task";l.shareType="participants";l.saveAll()}f.notify("\u4efb\u52a1\u521b\u5efa\u6210\u529f");d._renderOneTask(g,!0);d._refreshViewBaseCount();d.highLight(g.id);a.attr("readonly",!1).data("manager",null).val("");k=[]}))}}})},changeGroupWhileSort:function(a){if(a){var d=$(a).parent().attr("group");if(0<d.indexOf("/")&&d.substr(d.indexOf("/"))){var d=d.substr(d.indexOf("/")+1),g=this.model,
b=g.taskList,l=[];if(b)for(var k=0,n=b.length;k<n;k++){if(b[k].id==$(a).data("id"))switch(console.log($(a).data("id")),console.log(d),this.viewState){case "beginDate":b[k].beginDateGroup=d;break;case "dueDate":b[k].dateGroup=d}l.push(b[k])}g.taskList=l}}},_dateGroupValid:function(a,d){if(a&&d){var g=this._getDateByGroup("beginDate",a),b=this._getDateByGroup("dueDate",d);return g&&b?g<=b?!0:!1:!0}return!0},_changDateGroupByDrag:function(a){var d=this.model,g=a.parent().attr("group").split("/"),b=this._getDateByGroup(g[0],
g[1]),l=a.attr("id");d.changeProperty(l,g[0],b,function(d){a.attr({"begin-date-group":d.task.beginDateGroup,"due-date-group":d.task.dueDateGroup});$("#entitySlider .taskId"+l).size()&&("beginDate"==g[0]?$("#entitySlider #beginDate").trigger("updateDate.Task",b):$("#entitySlider #dueDate").trigger("updateDate.Task",b))})},_getDateByGroup:function(a,d){var g=Date.create(),b;switch(d){case "past":case "delay":b=g.addDays(-1).format("{yyyy}-{MM}-{dd}");break;case "today":b=g.format("{yyyy}-{MM}-{dd}");
break;case "tomorrow":b=g.addDays(1).format("{yyyy}-{MM}-{dd}");break;case "future":b=g.addDays(7).format("{yyyy}-{MM}-{dd}");break;case "memo":b=null}return b},render:function(){var a=this,d=this.$el;a._request(a.type,a.viewState);switch(a.type){case "mine":d.find("#view-taskType").removeClass("hide");this.mine();break;case "all":$(".j_timeview").removeClass("hide");case "subordinates":case "mineManager":case "mineParticipants":case "mineCreate":case "unRead":case "newComment":case "watched":case "shareToMe":case "finished":d.find("#view-state-toggle").addClass("hide"),
d.find("#view-state-toggle").addClass("hide"),$(".task-finished").addClass("hide"),a.viewState="list",a.search(!1)}"watched"==a.type?$(".task-watchs").addClass("hide"):$(".task-watchs").removeClass("hide");a.renderUserConfig();(new b({container:"#mytask-right",userId:this.userId})).render();setTimeout(function(){var d=a.$el.find("#mytask-container .e-list-group");_.each(d,function(a){$(a).removeClass("animated");$(a).removeClass("zoomIn")})},1500);f.layout(".j_mainscroll")},_renderAfterLoadMine:function(){var a=
this.model;$("#mytask-loading").addClass("hide");this._renderByViewState(a.taskList,!1);this._renderMeta(!1);this.taskId&&this.highLight(this.taskId)},_renderByViewState:function(a,d){var g=this.viewState;d||this._clearView(this.viewState);switch(g){case "list":this._renderAsList(a);break;case "dueDate":case "beginDate":this._renderAsDateGroup(a,g)}},_clearView:function(a){switch(a){case "list":this.$el.find("#mytask-container .all-type .task-list").empty();break;case "beginDate":a={past:this.$el.find("#mytask-container .j_begin").filter(".past").children(".task-list"),
today:this.$el.find("#mytask-container .j_begin").filter(".today").children(".task-list"),tomorrow:this.$el.find("#mytask-container .j_begin").filter(".tomorrow").children(".task-list"),future:this.$el.find("#mytask-container .j_begin").filter(".future").children(".task-list"),memo:this.$el.find("#mytask-container .j_begin").filter(".memo").children(".task-list")};for(var d in a)a[d].children("[class~\x3dtask]").remove();break;case "dueDate":for(d in a={delay:this.$el.find("#mytask-container .j_due").filter(".delay").children(".task-list"),
today:this.$el.find("#mytask-container .j_due").filter(".today").children(".task-list"),tomorrow:this.$el.find("#mytask-container .j_due").filter(".tomorrow").children(".task-list"),future:this.$el.find("#mytask-container .j_due").filter(".future").children(".task-list"),memo:this.$el.find("#mytask-container .j_due").filter(".memo").children(".task-list")},a)a[d].children("[class~\x3dtask]").remove()}},_renderMeta:function(a){var d=this.model,g;switch(this.viewState){case "list":if(g=this.$el.find("#mytask-container .all-type-view"),
a){a=d.lastPage;var b=(d=a.result)&&d.length==a.pageSize;if(d.length)g.children(".no-result").addClass("hide"),g.children("#all-type-list").removeClass("hide"),b?(g.children(".j_moretask").removeClass("hide"),g.children(".j_nodata").addClass("hide")):(g.children(".j_moretask").addClass("hide"),g.children(".j_nodata, .center-more").addClass("hide"),1<a.pageNo&&g.children(".j_nodata").removeClass("hide"));else switch(g.children().addClass("hide"),this.type){case "mine":case "mineManager":case "mineCreate":g.children(".j_fast-minecreate").removeClass("hide");
break;case "watched":g.children(".j_fast-watchedcreate").removeClass("hide");break;case "shareToMe":g.children(".j_fast-shareToMecreate").removeClass("hide");break;case "finished":g.children(".j_fast-finishedcreate").removeClass("hide");break;case "subordinates":g.children(".j_fast-subordinatescreate").removeClass("hide");break;default:g.children(".j_no-result-tip").removeClass("hide")}}else if(d=d.taskList,g.children().addClass("hide"),d.length)g.children().addClass("hide").filter("#all-type-list").removeClass("hide");
else switch(g.children().addClass("hide"),this.type){case "mine":case "mineManager":case "mineCreate":g.children(".j_fast-create").removeClass("hide");break;default:g.children(".j_no-result-tip").removeClass("hide")}}},_toggleViewState:function(a){var d=this.model;this.viewState=a;this._request(this.type,this.viewState);this.$el.find("#mytask-loading").addClass("hide");this._renderByViewState(d.isPaged?d.lastPage.result:d.taskList);this.setConfig("viewState.task",a)},_getConfig:function(a){var d=
null;return this.userId!=TEAMS.currentUser.id?null:(d=TEAMS.userConfig.find(function(d){return d.configKey==a}))?d.configValue:null},setConfig:function(a,d){if(this.userId==TEAMS.currentUser.id){var g=this.model,b=null,l=!1;if(TEAMS.userConfig){for(var k=0;k<TEAMS.userConfig.length;k++)if(b=TEAMS.userConfig[k],b.configKey==a){l=!0;k=b.configValue;b.configValue=d;k!=d&&g.saveConfig(b);break}l||(b={configKey:a,configValue:d},g.saveConfig(b,function(){TEAMS.userConfig.push(b)}))}}},_renderAsDateGroup:function(a,
d){for(var g=0;g<a.length;g++)this._renderOneTask(a[g]);this._refreshViewBaseCount()},_renderOneTask:function(a,d){$("#task-type").attr("data-entity");var g=$("#taskClone").clone();g.attr({id:a.id,sn:a.sn,"data-module":"task","data-id":a.id,"begin-date-group":a.beginDateGroup,"due-date-group":a.dueDateGroup});g.find(".j_entityslider-toggle").attr({"data-module":"task","data-id":a.id});a.watched?(g.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\x26nbsp;\u53d6\u6d88\u5173\u6ce8'),g.find(".watch").attr("watched",
"true")):g.find(".watch").attr("watched","false");g.find(".watch").attr("targetId",a.id);g.find(".watch").attr("module","task");"urgency"==a.priority?g.find(".importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):"high"==a.priority&&g.find(".importance").removeClass("hide").text("\u7d27\u6025").addClass("high");"finished"!=this.type?this._renderStatus(a.status,g):g.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e\x26nbsp;\u6807\u8bb0\u672a\u5b8c\u6210').attr({status:"finished",
title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"});this.type&&"unRead"==this.type?g.addClass("unread"):this.type&&"newConment"==this.type?g.addClass("newComment"):(a.newConment&&g.addClass("newComment"),a.unread&&g.addClass("unread").removeClass("newComment"));a.commentCount=0;0!=a.commentCount&&g.find(".comment-count").html('\x3ci class\x3d"icon-chat-3 mr-3"\x3e\x3c/i\x3e\x3cem\x3e'+a.commentCount+"\x3c/em\x3e");g.find(".share").attr("targetId",
a.id);g.find(".shortcut").removeClass("hide");1<a.permission?g.addClass("editable"):g.addClass("readonly");1==a.permission?(g.find("input").attr("value",a.name).attr("title",a.name).attr("readonly",!0),"subordinates"==this.type&&g.find(".finish").attr("targetId",a.id),"subordinates"==this.type&&1==a.locked&&g.find(".finish").removeAttr("targetId"),"subordinates"==this.type&&0==a.relationflag&&g.find(".finish").removeAttr("targetId")):(g.find(".finish").attr("targetId",a.id),3===a.permission&&a.locked&&
g.find(".finish").removeAttr("targetId"),g.find("input").attr("value",a.name).attr("title",a.name));g.find(".title .text").attr("title",a.name).text(a.name);var b=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";g.find(".date").html(b);a.manager&&a.manager.username!=TEAMS.currentUser.username&&g.find(".user").html(a.manager.username);b=null;switch(this.viewState){case "beginDate":b=this._$MAP[this.viewState].ulMap[a.beginDateGroup];break;case "dueDate":b=this.$el.find("#mytask-container .j_due");
b={delay:b.filter(".delay").children(".task-list"),today:b.filter(".today").children(".task-list"),tomorrow:b.filter(".tomorrow").children(".task-list"),future:b.filter(".future").children(".task-list"),memo:b.filter(".memo").children(".task-list")}[a.dateGroup];break;case "list":b=this.$el.find("#mytask-container .all-type .task-list")}var l=b.children(".task").size(),l=l?l+1:1;d?(b.prepend(g),this.rebuildSN(b)):(g.find(".sn").html(l),b.append(g))},_refreshViewBaseCount:function(){function a(){for(b in g)l=
g[b],k=l.parent(),n=l.children(".task").size(),0<n?(k.removeClass("hide").find(".j_count").html("("+n+")"),l.children(".notask").addClass("hide")):l.children(".notask").size()?(l.children(".notask").removeClass("hide"),k.removeClass("hide").find(".j_count").html("")):k.addClass("hide").find(".j_count").html("")}function d(a){l=g;k=l.parent();switch(a){case "mine":l.children().size()?(k.children(".j_fast-create, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-create").removeClass("hide"),
k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;case "mineManager":case "mineCreate":l.children().size()?(k.children(".j_fast-minecreate, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-minecreate").removeClass("hide"),k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;case "watched":l.children().size()?(k.children(".j_fast-watchedcreate, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-watchedcreate").removeClass("hide"),
k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;case "shareToMe":l.children().size()?(k.children(".j_fast-shareToMecreate, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-shareToMecreate").removeClass("hide"),k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;case "finished":l.children().size()?(k.children(".j_fast-finishedcreate, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-finishedcreate").removeClass("hide"),
k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;case "subordinates":l.children().size()?(k.children(".j_fast-subordinatescreate, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-subordinatescreate").removeClass("hide"),k.children(".j_no-result-tip").addClass("hide"),l.addClass("hide"));break;default:l.children().size()?(k.children(".j_fast-create, .j_no-result-tip").addClass("hide"),l.removeClass("hide")):(k.children(".j_fast-create").addClass("hide"),
k.children(".j_no-result-tip").removeClass("hide"),l.addClass("hide"))}}var g,b,l,k,n;switch(this.viewState){case "beginDate":g=this._$MAP.beginDate.ulMap;a();break;case "dueDate":g={delay:this.$el.find("#mytask-container .j_due").filter(".delay").children(".task-list"),today:this.$el.find("#mytask-container .j_due").filter(".today").children(".task-list"),tomorrow:this.$el.find("#mytask-container .j_due").filter(".tomorrow").children(".task-list"),future:this.$el.find("#mytask-container .j_due").filter(".future").children(".task-list"),
memo:this.$el.find("#mytask-container .j_due").filter(".memo").children(".task-list")};a();break;case "list":g=this._$MAP.list.ul,d(this.type)}},renderUserConfig:function(){var a=this,d=a._getConfig("order.task.search"),g=a._getConfig("order.task.searchDirection");d&&g&&$(".orderType").each(function(a){a=$(this);a.attr("data-entity")==d&&a.attr("data-direction")==g&&(a.parent().addClass("active"),$("#task-order").attr("data-entity",d).attr("data-direction",g))});a.viewState&&a.$el.find("#view-state").children().removeClass("active").each(function(d){d=
$(this);if(d.attr("data-value")==a.viewState)return d.addClass("active"),!1})},_renderStatus:function(a,d){"finished"==a?(d.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e\x26nbsp;\u6807\u8bb0\u672a\u5b8c\u6210').attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),d.find(".title .text").addClass("finished-line")):(d.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\x26nbsp;\u6807\u8bb0\u5b8c\u6210').attr({status:"todo",
title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),d.find(".title .text").removeClass("finished-line"))},_insertBlank:function(a){var d=$("#taskClone").clone(),g=a.attr("group").split("/");"beginDate"==g[0]?d.attr("begin-date-group",g[1]):d.attr("due-date-group",g[1]);g=(new Date).getTime();d.attr({sn:g,id:g});d.find(".sn").html("");d.find(".title .text").replaceWith('\x3cinput type\x3d"text" class\x3d"input" value\x3d"" tabindex\x3d"-1" maxlength\x3d"100"/\x3e');
a.prepend(d).find(".notask").addClass("hide");this.rebuildSN(a);this.highLight(g);d.find("input.input").focus()},updateFastKey:function(a,d){for(var g=d.split(","),b=0;b<g.length-1;b++){var l=$("#mytask-container #"+g[b]);"watch"==a?(l.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\x26nbsp;\u53d6\u6d88\u5173\u6ce8'),l.find(".watch").attr("watched","true")):"finished"==a&&this._renderStatus("finished",l)}},findSelectedUsefulLi:function(){var a="";$(".j_center .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&
void 0!=$(this).parent("li").find(".finish").attr("targetId")&&(a+=$(this).parent("li").attr("id")+",")});return a},findSelectedLi:function(){var a="";$(".j_center .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},highLight:function(a){$("#mytask-container li.active").removeClass("active");$("#mytask-container #"+a).addClass("active")},rebuildSN:function(a){a=a.find("li.task");for(var d=0;d<a.length;d++)$(a[d]).find(".sn").html(d+
1)},beforeOpenTask:function(a){this.highLight(a)},insertTask:function(a){this.model.add(a);this._renderOneTask(a,!0);this._refreshViewBaseCount();this.highLight(a.id)},removeTask:function(a){this.model.remove(a);a=$("#mytask-container #"+a);var d=a.parent();a.remove();this.rebuildSN(d);this._refreshViewBaseCount()},changeStatus:function(a,d){var g=this.$el.find("#mytask-container #"+a);this._renderStatus(d,g)},changeWatch:function(a,d){var g=$("#mytask-container #"+a);d?(g.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\x26nbsp;\u53d6\u6d88\u5173\u6ce8'),
g.find(".watch").attr("watched","true")):(g.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\x26nbsp;\u5173\u6ce8'),g.find(".watch").attr("watched","false"))},changeTitle:function(a,d){$("#mytask-container #"+a).find(".title .text").text(d).attr("title",d)},changeManager:function(a,d){a&&(a.username!=TEAMS.currentUser.username?$("#mytask-container #"+d+" .user").html(a.username):$("#mytask-container #"+d+" .user").html(""))},changeDuedate:function(a){var d=$("#mytask-container #"+
a.id);0<d.length&&(d=$(d[0]));var g=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";d.find(".date").html(g);if("dueDate"==this.viewState){if(g=d.attr("due-date-group"),g!=a.dueDateGroup){var g=this._$MAP[this.viewState].ulMap[g],b=this._$MAP[this.viewState].ulMap[a.dueDateGroup];d.prependTo(b);d.attr("due-date-group",a.dueDateGroup);this.changeTaskGroup(a);this.rebuildSN(g);this.rebuildSN(b);this._refreshViewBaseCount();this.highLight(a.id)}}else d.attr("due-date-group",a.dueDateGroup)},
changeTaskGroup:function(a){if(a){var d=this.model,g=d.taskList,b=[];if(g)for(var l=0,k=g.length;l<k;l++)g[l].id==a.id&&(g[l].dueDateGroup=a.dueDateGroup,g[l].dateGroup=a.dueDateGroup),b.push(g[l]);d.taskList=b}},changeBeginDate:function(a){var d=$("#mytask-container #"+a.id);0<d.length&&(d=$(d[0]));if("beginDate"==this.viewState){var g=d.attr("begin-date-group");if(g!=a.beginDateGroup){var g=this._$MAP[this.viewState].ulMap[g],b=this._$MAP[this.viewState].ulMap[a.beginDateGroup];d.attr("begin-date-group",
a.beginDateGroup);d.prependTo(b);0<g.find("#"+a.id).length&&g.find("#"+a.id).remove();this.changeBeginDateGroup(a);this.rebuildSN(g);this.rebuildSN(b);this._refreshViewBaseCount();this.highLight(a.id)}}else d.attr("begin-date-group",a.beginDateGroup)},changeBeginDateGroup:function(a){if(a){var d=this.model,g=d.taskList,b=[];if(g)for(var l=0,k=g.length;l<k;l++)g[l].id==a.id&&(g[l].dateGroup=a.beginDateGroup,g[l].beginDateGroup=a.beginDateGroup),b.push(g[l]);d.taskList=b}},_buildQueryParam:function(){var a=
this.model,d={},g=$("#task-filter").data("data-filter"),b=$("#task-order").attr("data-entity"),l=$("#task-order").attr("data-direction"),k=$("#task-taskType").attr("data-entity"),n=this.type?this.type:"mine";if("mine"==n||null==n)"mineManager"==k?n="mineManager":"mineParticipants"==k?n="mineParticipants":"mine"==k&&(n="mine");var k=$.trim($("#tasksearch-keywords").val()),c=$("#tasksearch-keywords").attr("placeholder");k==c&&(k="");g=g?JSON.parse("{"+g+"}"):{};k&&(n="all",g.keywords=k);g.type=n;"all"!=
n&&(g.taskStatus="todo");d.filter=g;b&&l&&(d.order={property:b,direction:l});a.userId=this.userId?this.userId:a.userId;a.id=this.id?this.id:a.id;d.userId=a.userId;d.pageNo=a.pageNo;d.noPageCount=!0;return JSON.stringify(d)},_request:function(a,d){switch(a){case "mine":switch(d){case "list":this._$MAP.list.div.removeClass("hide");this._$MAP.list.ul.removeClass("hide");this._$MAP.beginDate.divs.addClass("hide");this._$MAP.dueDate.divs.addClass("hide");break;case "dueDate":this._$MAP.list.div.addClass("hide");
this._$MAP.list.ul.addClass("hide");this._$MAP.beginDate.divs.addClass("hide");this._$MAP.dueDate.divs.removeClass("hide");break;case "beginDate":this._$MAP.list.div.addClass("hide"),this._$MAP.list.ul.addClass("hide"),this._$MAP.beginDate.divs.removeClass("hide"),this._$MAP.dueDate.divs.addClass("hide")}break;default:this._$MAP.list.div.removeClass("hide"),this._$MAP.beginDate.divs.addClass("hide"),this._$MAP.dueDate.divs.addClass("hide")}$("#mytask-loading").removeClass("hide")},mine:function(){var a=
this,d=this.model,g=this._buildQueryParam();d.load(g,function(){a._renderAfterLoadMine()})},search:function(a){var d=this,g=d.model,b=d._buildQueryParam();g.search(b,function(g){d._renderAfterSearch(a)})},_renderAfterSearch:function(a){var d=this.model;this.$el.find("#mytask-loading").addClass("hide");this._renderByViewState(d.lastPage.result,a);this._renderMeta(!0)},_renderAsList:function(a){for(var d=0;d<a.length;d++)this._renderOneTask(a[d],!1);a=this.$el.find("#mytask-container .all-type .task-list");
0==a.children().length&&this.$el.find("#mytask-container .all-type .j_fast-create").removeClass("hide");this.rebuildSN(a);$(".j_center #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")},_renderType:function(){var a="";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?a="\u5979":TEAMS.blogUser&&(a="\u4ed6");$("#view-taskType li").each(function(){var d=$(this),g=d.attr("title");g&&d.children("a").html(a+g)})},undelegateEvents:function(){null!=this._$MAP&&(this._$MAP.body.off(".TaskList"),
this._$MAP.dragableUL.sortable("destroy"));this.$el.off(".TaskList")},remove:function(){this.undelegateEvents();this._$MAP=null;this.header&&(this.header.remove(),this.header=null);this.dropdownFilter&&(this.dropdownFilter.remove(),this.dropdownFilter=null)}});m.exports=h});
define("teams/task/taskmodel",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.Model.extend({id:null,pageNo:1,task:{},initialize:function(e){this.id=e.id},loadTask:function(e,c){var b=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:"/task/"+b.id+".json",dataType:"json",data:e,success:function(a){b.task=a.task;b.subtaskPage=a.page;b.pageNo=a.pageNo;b.msg=a.actionMsg;b.tip=a.tip;b.subtasksNumber=a.subTasksNumber;b.entityRemind=a.entityRemind;c&&c(a)}})},
create:function(e,c,b){var a=this;e='{"task":'+JSON.stringify(e)+',"group":"'+c+'"}';$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/task.json",dataType:"json",data:e,success:function(d){a.task=d.task;a.id=d.task.id;a.tip=d.tip;b&&b(d)}})},createWithRelevance:function(e,c,b,a,d,g){var l=this;e='{"task":'+JSON.stringify(e)+',"group":"'+c+'","fromTargetId":"'+b+'","fromModule":"'+a+'","fromTargetName":"'+d+'"}';$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",
url:"/task.json",dataType:"json",data:e,success:function(a){l.task=a.task;l.id=a.task.id;l.tip=a.tip;g&&g(a)}})},stageTask:function(e,c,b,a){var d=this,g="",g=e.group?'{"task":'+JSON.stringify(e)+',"group":"'+e.group+'","mainlineId":"'+c+'"}':'{"task":'+JSON.stringify(e)+', "mainlineId":"'+c+'","stageId":"'+b+'"}';$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/task.json",dataType:"json",data:g,success:function(g){g.actionMsg?f.notify(g.actionMsg.message):(d.task=g.task,
d.id=g.task.id,d.tip=g.tip,a&&a(g))}})},changeProperty:function(e,c,b,a){var d=this,g=d.task.lockable;if(e&&c){var l={_method:"put",propertyName:c};l["task."+c]=b;$.ajax({type:"post",dataType:"json",url:"/task/"+e+".json",data:l,success:function(b){b.actionMsg?f.notify(b.actionMsg.message):(d.task=b.task,d.task.lockable=g,a&&a(b))}})}},changeProperties:function(e,c){var b=this;if(b.id&&e&&0<e.length){for(var a={_method:"put"},d=[],g=0;g<e.length;g++){var l=e[g];d.push(l.name);a["task."+l.name]=l.value}a.propertyName=
d.join(",");$.ajax({type:"post",dataType:"json",url:"/task/"+b.id+".json",data:a,success:function(a){a.actionMsg?f.notify(a.actionMsg.message):(b.task=a.task,c(!0))}})}},delt:function(e){this.id&&$.ajax({type:"post",dataType:"json",url:"/task/"+this.id+".json",data:{_method:"delete"},success:function(c){c.actionMsg?f.notify(c.actionMsg.message):e&&e(c)}})},updateManager:function(e,c,b){$.ajax({type:"post",url:"/task/updateManager.json",dataType:"json",data:{id:e,"employee.id":c.id,"employee.username":c.username},
success:function(a){a.actionMsg?f.notify(a.actionMsg.message):b&&b(a)}})},watch:function(e){var c=this.task,b={module:"task"};b._method=c.watched?"DELETE":"PUT";$.ajax({type:"post",dataType:"json",url:"/watch/"+c.id+".json",data:b,success:function(a){c.watched=!c.watched;a=a.stream;e&&e(c.watched,a)}})},removeParent:function(e,c,b){$.ajax({type:"post",dataType:"json",url:"/task/removeParent.json",data:{id:e,parentId:c},success:function(a){a.actionMsg?f.notify(a.actionMsg.message):b&&b(a)}})},copyTasks:function(e,
c){$.ajax({type:"post",dataType:"json",url:"/task/copyTasks.json",data:e,success:function(b){b.actionMsg?f.notify(b.actionMsg.message):c&&c(b)}})},loadTaskForm:function(e,c){$.ajax({type:"post",dataType:"json",url:"/form/loadTaskForm.json",async:!1,data:e,success:function(b){b.actionMsg?f.notify(b.actionMsg.message):c&&c(b)}})}});m.exports=h});
define("teams/task/taskformview",["teams/utils","teams/task/taskmodel","teams/formstat/formstattableview","teams/formstat/formfieldstatview","teams/formstat/formreportview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel"),c=h("teams/formstat/formstattableview"),b=h("teams/formstat/formfieldstatview"),a=h("teams/formstat/formreportview");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId||TEAMS.currentUser.id;this.container=a.container;this.model=new e({id:this.userId});
this.tab=a.userId||"form_set";this.el="#taskform";TEAMS.currentUser.admin?$(this.container).html(f.template("task.taskform")):$(this.container).html(f.template("base.nopermission",{msg:null}))},delegateEvents:function(){var a=this,g=$(a.el);g.on("click",".j_set_form",function(){a.model.loadTaskForm({"form.module":"task"},function(a){window.open("/form/edit/"+a.form.id)})});g.on("click",".js_formtab li",function(g){a.renderTab($(this))})},renderTab:function(d){d.addClass("active").siblings().removeClass("active");
var g=d.attr("data-target"),l=$("#"+g);l.show().siblings(".js_forms").hide();if("true"!=d.attr("data-load"))switch($("li[data-target\x3d'"+g+"']").attr("data-load",!0),g){case "form_manager":this.renderTab($("li[data-target\x3d'form_data']"));break;case "form_data":this.tabView=new c({formId:this.formId,container:"#"+g,module:"task"});this.tabView.render();break;case "form_stat":this.statView=new b({formId:this.formId,el:"#"+g});$("li[data-target\x3d'form_stat']").attr("data-load",!1);break;case "form_report":this.reportView=
new a({formId:this.formId,el:"#"+g})}else switch(g){case "form_manager":this.renderTab($("li[data-target\x3d'form_data']"));break;case "form_data":l.find("#formStatContent").trigger("resize"),l.find(".j_formstarScr").mCustomScrollbar("scrollTo","left")}},render:function(){var a=this;TEAMS.currentUser.admin&&(a.model.loadTaskForm({"form.module":"task",isCreate:!1},function(g){(g=g.form)&&g.id?(a.formId=g.id,$("li[data-target\x3d'form_manager']").show()):$("li[data-target\x3d'form_manager']").hide()}),
a.renderTab($("li[data-target\x3d'"+a.tab+"']")))},remove:function(){$(this.el).off(".TaskForm");$(this.continer).html("")}});m.exports=h});
define("teams/task/mytaskmodel",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.Model.extend({initialize:function(e){this.userId=e.userId||null;this.taskList=this.isPaged=this.id=null;this.pageNo=1;this.pageSize=25;this.lastPage=null;this.pages=[];this.feedCount=this.unreadCount=0},load:function(e,c){var b=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/tasks/"+b.userId+".json",dataType:"json",data:e,success:function(a){b.taskList=a.taskList;b.isPaged=
!1;b.unreadCount=a.unreadCount||0;b.feedCount=a.feedCount||0;c&&c(a)}})},create:function(e,c,b){var a=this;e={task:e};c&&(c=c.split("/"),"beginDate"==c[0]?e.beginDateGroup=c[1]:e.group=e.dueDateGroup=c[1]);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/task.json",dataType:"json",data:JSON.stringify(e),success:function(d){a.task=d.task;a.id=d.task.id;a.add(d.task);b&&b(d)}})},changeProperty:function(e,c,b,a){var d={_method:"put",propertyName:c};d["task."+c]=b;$.ajax({type:"post",
dataType:"json",url:"/task/"+e+".json",data:d,success:function(d){a&&a(d)}})},updateSN:function(e,c,b){c&&this.changeProperty(e,"sn",c,b)},search:function(e,c){var b=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/tasks/search.json",dataType:"json",data:e,success:function(a){b.lastPage=a.page;b.pages.push(a.page);b.isPaged=!0;b.unreadCount=a.unreadCount||0;b.feedCount=a.feedCount||0;c&&c(a)}})},updateStatus:function(e,c,b){var a={};a.status=e;a.ids=c;$.ajax({type:"get",
url:"/task/updateStatus.json",dataType:"json",data:a,success:function(a){b&&b(a)}})},saveConfig:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/base/configuration/saveConfig.json",dataType:"json",data:JSON.stringify({config:e}),success:function(b){b.actionMsg?f.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):c&&c()}})},clear:function(){this.pageNo=1;this.lastPage=null;this.pages=[]},add:function(e){var c;
(c=this.isPaged?this.lastPage.result:this.taskList)&&c.length?0>c.findIndex(function(b){return b.id==e.id})&&c.push(e):c.push(e)},remove:function(e){var c;(c=this.isPaged?this.lastPage.result:this.taskList)&&c.length&&c.remove(function(b){return b.id==e})}});m.exports=h});
define("teams/task/subtaskview",["teams/utils","teams/task/taskmodel","teams/component/typeahead","teams/component/relevancemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel"),c=h("teams/component/typeahead"),b=h("teams/component/relevancemodel");h=Backbone.View.extend({initialize:function(a){this.newTaskIds="0";this.countInit=0;this.container=a.container;this.parentEl=a.parentEl;this.relevanceModel=new b;this.el=this.parentEl?this.parentEl+" "+this.container:this.container;
this.parentId=a.parentId;this.taskView=a.taskView;this.taskModel=new e({id:null});$(this.el).append(f.template("task.subtask"))},delegateEvents:function(){var a=this,d=this.taskView,g=this.taskModel,b=this.relevanceModel,n=$(this.el);n.off("subTaskSelected",".entity-toggle").on("subTaskSelected",".entity-toggle",function(d){for(var g="",c=n.find("#js_customer-import-btn").attr("taskId"),e=n.find("#js_customer-import-btn").attr("module"),u=1;u<arguments.length;u++)var w=arguments[u],g=g+('{"objectId":"'+
c+'", "objectModule":"'+e+'", "targetId":"'+w.id+'", "targetModule":"'+e+'", "targetName":"'+w.name+'"},');g&&(g=g.substring(0,g.length-1),b.newSubTaskRelevanceByList('{"relevances":['+g+"]}",function(d){var g=d.streams;"-2"==d.relationFlag?f.notify("\u65e0\u6cd5\u5173\u8054\u81ea\u5df1"):"-1"==d.relationFlag?f.notify("\u65e0\u6cd5\u5173\u8054\u7956\u5148\u7ea7\u4efb\u52a1"):f.notify("\u5b50\u4efb\u52a1\u5173\u8054\u6210\u529f");if(g&&!(0>=g.length)){for(var b=0;b<g.length;b++)$("#stream").trigger("insertStream",
g[b]);g=d.taskList;for(b=0;b<g.length;b++)a.insertSubTask(g[b]);for(var g=d.subTasksNumber,l=d=0,b=0;b<g.length;b++){var k=g[b];"todo"==k.status?d=parseInt(d)+parseInt(k.count):l=parseInt(l)+parseInt(k.count)}b=d+l;$(a.el).find("#numberDiv").empty().append("\x3cspan\x3e"+d+"\x3c/span\x3e/"+b)}}))});n.off("focusout.subtask","li.task .j_nameInput").on("focusout.subtask","li.task .j_nameInput",function(d,g){var b=$(this).parent();if(3>b.attr("permission")&&7>b.attr("parentPermission"))return!1;a.save(b,
g)});n.off("click.subtask","li.task").on("click.subtask","li.task",function(a){$(this).parent().children(".active").removeClass("active");$(this).addClass("active");$(this).hasClass("unread")?(a=$(".j_unread").text().trim(),a=$.isNumeric(a)?a:0,0>=a-1?$(".j_unread").addClass("hide"):$(".j_unread").text(a-1)):$(this).hasClass("newComment")&&(a=$(".j_feed").text().trim(),a=$.isNumeric(a)?a:0,$.isNumeric(a)&&0>=a-1?$(".j_feed").addClass("hide"):$(".j_feed").text(a-1));$(this).removeClass("unread");$(this).removeClass("newComment")});
n.off("click.subtask",".center-more").on("click.subtask",".center-more",function(){g.pageNo++;taskType=$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?"finished":"";g.id=a.parentId;g.loadTask({pageNo:g.pageNo,id:g.id,taskType:taskType},function(d){a.renderTable(g.task,g.subtaskPage,null)})});n.off("click.subtask",".j_if-finished").on("click.subtask",".j_if-finished",function(d){n.find("#subtask-content .center-more").addClass("hide");var b;d=$(this).attr("id");$(this).find("i").toggleClass("icon-checkbox-unchecked").toggleClass("icon-checkbox-checked");
b=$(this).find("i").hasClass("icon-checkbox-checked")?"finished":"";b={id:d,taskType:b,pageNo:1};g.id=d;g.loadTask(b,function(d){n.find("#subtask-content").find(".task-list").empty();a.renderTable(d.task,d.page)})});n.off("mouseover.subtask","#numberDiv").on("mouseover.subtask","#numberDiv",function(a){n.find("#descriptionDiv").removeClass("hide")});n.off("mouseout.subtask","#numberDiv").on("mouseout.subtask","#numberDiv",function(a){n.find("#descriptionDiv").addClass("hide")});n.off("mouseover.subtask",
"#taskChoose").on("mouseover.subtask","#taskChoose",function(a){$(this).find(".icon-angle-right").addClass("on");n.find("#numberDiv").addClass("hide");n.find("#descriptionDiv").addClass("hide");n.find(".j_if-finished").removeClass("hide")});n.off("mouseout.subtask","#taskChoose").on("mouseout.subtask","#taskChoose",function(a){$(this).find(".icon-angle-right").removeClass("on");n.find("#numberDiv").removeClass("hide");n.find(".j_if-finished").addClass("hide")});n.on("keydown.subtask","li.task .j_nameInput",
function(a){13==a.which&&n.find(".j_addSubtask").trigger("click")});n.on("click.subtask",".j_addSubtask",function(){var d=n.find(".task-list").find("input.title");d.addClass("new");var g=$.trim(d.val());d.val(g);0<d.length&&""==g?d.focus():a.insert(d)});n.on("click.subtask","li.task .j_finished",function(b){b=$(this);var l=b.parents(".task");if($(this).attr("status")){var n="finished"==b.attr("status")?"todo":"finished";b=l.attr("id");g.changeProperty(b,"status",n,function(g){a.renderStatus(l,n);
f.notify("\u4efb\u52a1\u72b6\u6001\u4fee\u6539\u6210\u529f!");d.page&&d.page.trigger("changeStatus",{id:g.id,status:n});for(var b=g.subTasksNumber,k=g=0,c=0;c<b.length;c++){var e=b[c];"todo"==e.status?g=parseInt(g)+parseInt(e.count):k=parseInt(k)+parseInt(e.count)}b=g+k;$(a.el).find("#numberDiv").empty().append("\x3cspan\x3e"+g+"\x3c/span\x3e/"+b)})}});n.on("click.subtask","li.task .j_duedate",function(){var a=$(this).parents(".task"),b=a.attr("id");if(b){a.find(".shortcut");var l=a.find(".j_dueDateInput");
a.addClass("no-hover");l.focus();l.datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,initialDate:new Date,startView:"month",minView:"month",maxView:"decade",pickerPosition:"bottom-left",showMeridian:!1}).on("changeDate",function(a){var k=a.date;k||(k="");k instanceof Date&&(k=k.format("{yyyy}-{MM}-{dd}"));g.changeProperty(b,"dueDate",k,function(){f.notify("\u4efb\u52a1\u5230\u671f\u65e5\u5df2\u4fee\u6539");d.page&&d.page.trigger("changeDuedate",g.task);
l.val(k)})}).on("hide",function(){a.removeClass("no-hover")});l.datetimepicker("show")}else f.notify("\u8bf7\u5148\u8f93\u5165\u4efb\u52a1\u6807\u9898\uff0c\u56de\u8f66\u4fdd\u5b58\u4efb\u52a1\uff0c\u518d\u6307\u5b9a\u5230\u671f\u65e5")});n.on("click.subtask","li.task .j_manager",function(){var a=$(this).parents(".task");a.attr("id")?(a.addClass("no-hover"),a.find(".typeahead-wrapper").removeClass("hide"),a.find(".j_subtaskManager").focus()):f.notify("\u8bf7\u5148\u8f93\u5165\u4efb\u52a1\u6807\u9898\uff0c\u56de\u8f66\u4fdd\u5b58\u4efb\u52a1\uff0c\u518d\u6307\u5b9a\u8d1f\u8d23\u4eba")});
n.on("hide.subtask","li.task .typeahead-wrapper",function(){$(this).parents(".task").removeClass("no-hover")})},render:function(a,d,g){if(a){var b=$(this.el);1==d.pageNo&&(this.countInit=d.totalCount);b.find(".j_if-finished").attr("id",a.id);b.find("#js_customer-import-btn").attr("taskId",a.id);b.find("#js_customer-import-btn").attr("module","task");var n=d.result,k=0;if(null!=g&&0<g.length)if(n&&0<n.length){b.find("#subtask-loading").removeClass("hide");b.removeClass("hide");if(null!=g&&0<g.length){var c=
k=0,e;for(e=0;e<g.length;e++){var f=g[e];"todo"==f.status?k=parseInt(k)+parseInt(f.count):c=parseInt(c)+parseInt(f.count)}e=k+c;b.find("#numberDiv").empty().append("\x3cspan\x3e"+k+"\x3c/span\x3e/"+e)}for(e=0;e<n.length;e++)f=n[e],k=this.newTaskIds.indexOf(f.id.toString()),-1==k&&(g=b.find("#subtaskClone").clone(),f.unread&&g.addClass("unread"),f.newConment&&g.addClass("newComment"),"urgency"==f.priority?g.find(".importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):
"high"==f.priority&&g.find(".importance").removeClass("hide").text("\u7d27\u6025").addClass("high"),this.renderSubtask(a,f,g,!0)),this.renderSN();b.find("#subtask-loading").addClass("hide");this.countInit>5*d.pageNo&&d.hasNext?b.find("#subtask-content .center-more").removeClass("hide"):1!=d.pageNo&&(b.find("#subtask-content .center-more").addClass("hide"),b.find("#subtask-content .no-more").removeClass("hide"));b.parent().find("#i-subtask").parent().addClass("hide")}else{if(null!=g&&0<g.length){for(e=
c=k=0;e<g.length;e++)f=g[e],"todo"==f.status?k=parseInt(k)+parseInt(f.count):c=parseInt(c)+parseInt(f.count);e=k+c;b.find("#numberDiv").empty().append("\x3cspan\x3e"+k+"\x3c/span\x3e/"+e)}b.find(".j_if-finished").trigger("click")}}},renderTable:function(a,d){if(a){var g=$(this.el);1==d.pageNo&&(this.countInit=d.totalCount);var b=d.result;if(b&&0<b.length){g.find("#subtask-loading").removeClass("hide");g.removeClass("hide");for(var n=0;n<b.length;n++){var k=b[n],c=g.find("#subtaskClone").clone();k.unread&&
c.addClass("unread");k.newConment&&c.addClass("newComment");"urgency"==k.priority?c.find(".importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):"high"==k.priority&&c.find(".importance").removeClass("hide").text("\u7d27\u6025").addClass("high");this.renderSubtask(a,k,c,!0);this.renderSN()}g.find("#subtask-loading").addClass("hide");this.countInit>5*d.pageNo&&d.hasNext?g.find("#subtask-content .center-more").removeClass("hide"):1!=d.pageNo?g.find("#subtask-content .center-more").addClass("hide"):
1==d.pageNo&&g.find("#subtask-content .center-more").addClass("hide");g.parent().find("#i-subtask").parent().addClass("hide")}}},insert:function(a){a=$(this.el).find("#subtaskClone").clone();a.find(".title .text").replaceWith("\x3cinput type\x3d'text' style\x3d'border:none;background-color:transparent;width:450px;' class\x3d'title j_nameInput ellipsis new' value\x3d'' tabindex\x3d'-1' maxlength\x3d'100' /\x3e");a.removeAttr("id");$(this.el).find(".task-list").prepend(a);a.find(".j_nameInput").focus();
this.renderSN()},insertSubTask:function(a){var d=$(this.el).find("#subtaskClone").clone();d.find(".title .text").html(a.name);d.find(".title .text").attr("style","border:none;background-color:transparent;");d.attr("id",a.id);d.find(".shortcut").removeClass("hide");d.find(".j_dueDateInput").val(Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"));d.find(".user").text(a.manager.name);this.renderStatus(d,a.status);"normal"==a.priority?d.find(".sne").attr("class","mark mark-normal sne"):"high"==subtask.priority?
d.find(".sne").attr("class","mark mark-warning sne"):d.find(".sne").attr("class","mark mark-danger sne");d.attr("permission",a.permission);var g=d.find(".j_edit");g.removeClass("j_entityslider-toggle");g.attr({"data-value":a.id,"data-module":"task","data-id":a.id});a.unread&&d.addClass("unread");a.newConment&&d.addClass("newComment");"urgency"==a.priority?d.find(".importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):"high"==a.priority&&d.find(".importance").removeClass("hide").text("\u7d27\u6025").addClass("high");
$(this.el).find(".task-list").prepend(d);this.renderSN()},echoAddButton:function(){var a=$(this.el);"#entitybox-container #task-subtask"==this.el?0==a.find("#entitybox-container #subtask-content").find("li").length&&(a.find("#entitybox-container #task-subtask").addClass("hide"),a.find("#entitybox-container #i-subtask").removeClass("hide")):0==a.find("#subtask-content").find("li").length&&(a.find("#task-subtask").addClass("hide"),a.find("#i-subtask").removeClass("hide"))},renderSubtask:function(a,
d,g,b,n){var k=this.taskView,r=this;$(this.el);var e=g.find(".text");e.text(d.name);e.attr("title",d.name);e.attr("style","border:none;background-color:transparent;");n&&e.focus();g.attr("id",d.id);g.find(".shortcut").removeClass("hide");r.renderStatus(g,d.status);"normal"==d.priority?g.find(".sne").attr("class","mark mark-normal sne"):"high"==d.priority?g.find(".sne").attr("class","mark mark-warning sne"):g.find(".sne").attr("class","mark mark-danger sne");g.addClass("editable");g.find(".user").text(d.manager.name);
g.attr("permission",d.permission);g.attr("parentPermission",a.permission);n=d.id;"#entitybox-container"==r.parentEl?(e=g.find(".j_edit"),e.addClass("entitybox-toggle"),e.removeClass("j_entityslider-toggle"),e.attr({"data-value":n,"data-module":"task","data-id":n})):g.find(".j_edit").attr({"data-module":"task","data-id":n});g.find(".j_dueDateInput").val(s);var s=d.dueDate?Date.create(d.dueDate).format("{yyyy}-{MM}-{dd}"):"";g.find(".j_dueDateInput").val(s);b&&$(r.el).find(".task-list").append(g);c({el:r.el+
" #"+n+" .j_subtaskManager",callback:function(a,d){if(a&&!$.isEmptyObject(a)){var g=d.parents(".task").attr("id");r.taskModel.updateManager(g,a,function(){f.notify("\u8d1f\u8d23\u4eba\u6307\u5b9a\u6210\u529f");$(r.el).find("#"+g).find(".user").text(a.name);$(".center-pane").find("#"+g).find(".user").text(a.name);k.page&&k.page.trigger("changeManager",{manager:a,id:g})})}}});7>a.permission&&3>=d.permission&&(g.addClass("no-hover"),3!=a.permission||a.locked?$(r.el+"  .pull-right").addClass("hide"):
$(r.el+"  .pull-right").removeClass("hide"));7>a.permission&&7>d.permission&&$(r.el+"  #"+d.id+" .j_manager").addClass("hide")},renderStatus:function(a,d){a.find(".j_finished").attr("status",d);"finished"==d?a.find(".j_edit .text").addClass("finished-line"):a.find(".j_edit .text").removeClass("finished-line");a.find(".j_finished i").attr("class","icon-"+d)},save:function(a,d){var g=this,b=this.taskView,n=this.taskModel,k=a.find(".title"),c=k.parent().attr("id");k.val()&&k.val().trim()?a.attr("id")?
k.val()!=k.attr("title")&&n.changeProperty(c,"name",k.val(),function(){f.notify("\u5b50\u4efb\u52a1\u540d\u66f4\u65b0\u6210\u529f");k.attr("title",k.val());k.trigger("focusin")}):k.hasClass("new")&&(k.removeClass("new"),n.create({name:k.val(),parent:{id:g.parentId}},"memo",function(k){f.notify("\u5b50\u4efb\u52a1\u521b\u5efa\u6210\u529f");$(g.el).find(".j_if-finished").attr("id",g.parentId);for(var n=k.subTasksNumber,c=0,r=0,e=0;e<n.length;e++){var h=n[e];"todo"==h.status?c=parseInt(c)+parseInt(h.count):
r=parseInt(r)+parseInt(h.count)}n=c+r;$(g.el).find("#numberDiv").empty().append("\x3cspan\x3e"+c+"\x3c/span\x3e/"+n);k=k.task;g.newTaskIds+=","+k.id.toString();c=a.parents(".task");c.attr("id",k.id);c.find(".shortcut").removeClass("hide");c.find(".j_edit .j_nameInput").replaceWith("\x3cdiv class\x3d'text'\x3e"+k.name+"\x3c/div\x3e");c.find(".user").html(k.manager.username);c.find(".j_finished").attr("status","todo");c.find(".j_edit").attr("data-module","task");c.find(".j_edit").attr("data-id",k.id);
g.renderSubtask(k.parent,k,a,!1,d);b.page&&b.page.trigger("create",k)})):g.echoAddButton()},cancel:function(a){var d=a.find(".title");d.parent().attr("id");a.attr("id")?d.val(d.attr("title")):d.val("")},changeTitle:function(a,d){("#mytask-container #"+a).find(".title .text").text(d).attr("title",d)},changeStatus:function(a){var d=this,g=$(this.el);$(a.allIds).each(function(b,n){var k=g.find("#"+n);d.renderStatus(k,a.status)})},renderSN:function(){$(this.el).find(".task-list li").each(function(a,d){$(d).find(".sn-link").html(a+
1)})},remove:function(){$("#task-subtask").off(".subtask")}});m.exports=h});
define("teams/feed/feedmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.pageNo=1;this.pageSize=25;this.searchBy.model=this;this.ajax=null},getFeedMessagePage:function(f){var e={};e.pageNo=this.pageNo;e.isread=1==this.isread?1:0;e.messageType=this.messageType;e.module=this.module;e.searchWords=this.searchWords;e.currentEmployeeId=this.currentEmployeeId;e.eteamsId=ETEAMSID;this.ajax&&this.ajax.abort();this.ajax=$.ajax({type:"post",url:TEAMS.service.mcManager+"/feed/getFeedMessagePagePC.json",
dataType:"json",data:e,success:function(c){f&&f(c)}})},searchBy:{newitem:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;f.readed=c.isread;f.websocketMessageType=c.messageType;f.moduleType=c.module;f.targetName=c.targetName;$.ajax({type:"post",url:"/feed/getNewMessages.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},watched:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;$.ajax({type:"post",url:"/feed/watched.json",dataType:"json",data:f,
success:function(b){e&&e(b)}})},newcomment:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;f.readed=c.isread;f.websocketMessageType=c.messageType;f.moduleType=c.module;f.targetName=c.targetName;$.ajax({type:"post",url:"/feed/getNewMessages.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},unfinish:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;$.ajax({type:"post",url:"/feed/unfinish.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},
newfinish:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;f.readed=c.isread;f.websocketMessageType=c.messageType;f.moduleType=c.module;f.targetName=c.targetName;$.ajax({type:"post",url:"/feed/getNewMessages.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},atme:function(f,e){var c=this.model;f.pageSize=c.pageSize;f.pageNo=c.pageNo;f.readed=c.isread;f.websocketMessageType=c.messageType;f.moduleType=c.module;f.targetName=c.targetName;$.ajax({type:"post",url:"/feed/getNewMessages.json",
dataType:"json",data:f,success:function(b){e&&e(b)}})}},updateStatus:function(f,e,c){var b={};b.status=f;b.ids=e;$.ajax({type:"post",url:"/task/updateStatus.json",dataType:"json",data:b,success:function(a){c&&c(a)}})},checkUnreadNum:function(f,e,c){var b={};b.receiverId=f;b.mcType=e;$.ajax({type:"post",url:TEAMS.service.mcManager+"/feed/checkUnreadNum.json",dataType:"json",data:b,success:function(a){c&&c(a)}})}});m.exports=h});
define("teams/feed/feedpage","teams/core/page teams/utils teams/feed/feedview teams/views/feedbackview teams/feed/eteamscounter teams/messages/messagesview teams/wechat/chatrightview teams/messages/messagesmodel teams/crm/CrmService".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/utils"),e=h("teams/feed/feedview"),c=h("teams/views/feedbackview"),b=h("teams/feed/eteamscounter"),a=h("teams/messages/messagesview"),d=h("teams/wechat/chatrightview"),g=h("teams/messages/messagesmodel"),
l=h("teams/crm/CrmService");h=q.extend({initialize:function(a){this.type=a.type;this.param=a.param;this.module=a.module;this.objId=a.objId;this.newMessage=a.newMessage;this.pageKey=this.type?"wechat"==this.type?this.param?"feed#"+this.type+(this.param.userId?this.param.userId:this.param.channelId):"feed#"+this.type:"feed#"+this.type+TEAMS.currentUser.id:"feed#"+TEAMS.currentUser.id;this.template="feed.page";this.el="#mainContainer";this.crmService=new l},delegateEvents:function(){},render:function(){var g=
this,b=g.module,l={w_matters:"col-7",w_feeds:"col-5"};"messages"==b&&(l={w_matters:"col-8",w_feeds:"col-4"});l.isAdmin=TEAMS.currentUser.admin;l.hasOpenSeaAdmin=TEAMS.currentUser.hasOpenSeaAdmin;this.initLayout(l);void 0==window.isShowMessage?this.crmService.isShowMessage(function(a){0!=a.actionMsg.code?f.notify(a.actionMsg.message):(window.isShowMessage=a.data,window.isShowMessage?$(".j_menu-group-sub .j_applyReceive").removeClass("hide"):$(".j_menu-group-sub .j_applyReceive").addClass("hide"))}):
window.isShowMessage?$(".j_menu-group-sub .j_applyReceive").removeClass("hide"):$(".j_menu-group-sub .j_applyReceive").addClass("hide");$(g.el).find(".sub-nav li.j_"+g.type).addClass("active");$(g.el).find(".main-hd .j_"+g.type+"_title").removeClass("hide");$(g.el).find("."+g.type).removeClass("hide");"newitem"==g.type&&$(g.el).find(".main-hd .j_shareJoin_option").addClass("hide");l=!0;if("messages"==b)if(this.mainView=new a({type:g.type,param:g.param,el:g.el+" #feedsContainer .j_main",newMessage:this.newMessage}),
this.mainView.render(),b=g.el+" #feedsContainer .message-sidebar","wechat"==g.type)this.subView=new d({el:b}),this.mainView.rightview=this.subView,g.param?"channel"==g.param.chatType?(this.subView.chatType="channel",this.subView.channelId=g.param.channelId):(l=!1,this.subView.chatType="chat",this.subView.userId=g.param.userId,this.subView.feedPageCallback=function(){g.renderFeedCounter(function(){var a=$("#feedsContainer .aside li.active span").html(),a=parseInt(a,10)||0;a--;$("#feedsContainer .aside li.active span").html(0>=
a?"":a)})}):this.subView.chatType="unread",this.subView.render();else{var c=$(f.template("feed.messageshelp"));$(b).html(c.find("#"+g.type+"_help"))}else this.mainView=new e({type:g.type,param:g.param,module:g.module,objId:g.objId,el:g.el+" #feedsContainer .j_main"}),this._render();l&&this.renderFeedCounter()},renderFeedCounter:function(a){var d=this;a={};a.receiverId=TEAMS.currentUser.id;a.eteamsId=ETEAMSID;(new g).newUnreadMessageCount(a,function(a){a=a.data.bellCount;if(null!=a)for(var g=0;g<a.length;g++){var l=
a[g],c=$("#feedsContainer .j_"+l.type+" span");null!=c&&c.html(0==l.count?"":l.count)}d.loadMessage(b.bellCounter)})},loadMessage:function(a){var d={};d.receiverId=TEAMS.currentUser.id;d.eteamsId=ETEAMSID;$.ajax({type:"get",global:!1,url:a.url,dataType:"json",data:d,success:function(d){d.actionMsg&&-1==d.actionMsg.code||a.callback&&a.callback(d)}})},renderSubview:function(){var a=this.module;if("messages"!=a){var d=this.objId,g=this.type;a&&!d&&this.mainView.renderModule(a);d=this.el+" #feedsContainer .j_main .j_feeds";
switch(g){case "watched":this.subView=new c({container:d,showtitle:"1",navs:[".document",".customer"],module:a,moduleName:"\u5173\u6ce8\u4e8b\u9879\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetModule:"watchother",groupShow:"1"});break;case "newitem":this.subView=new c({container:d,showtitle:"1",navs:[".document",".customer"],module:a,moduleName:"\u672a\u8bfb\u4e8b\u9879\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetModule:"unreadEntity",showReaded:"1",groupShow:"1"});break;case "newcomment":this.subView=
new c({container:d,showtitle:"1",navs:[".document",".customer"],module:a,moduleName:"\u672a\u8bfb\u53cd\u9988\u8bc4\u8bba",type:"other",targetModule:"unreadall",showReaded:"1",groupShow:"1"});break;case "atme":this.subView=new c({container:d,showtitle:"1",navs:[".document",".customer"],module:a,moduleName:"@\u6211\u7684\u53cd\u9988",type:"other",targetModule:"atme",showReaded:"1",groupShow:"1"});break;case "newfinish":this.subView=new c({container:d,showtitle:"1",navs:[],module:a,moduleName:"\u65b0\u5b8c\u6210\u4e8b\u9879\u7684\u53cd\u9988\u8bc4\u8bba",
type:"other",targetModule:"newfinish",groupShow:"1"})}this._renderSubview()}}});m.exports=h});
define("teams/feed/feedview","teams/face/emojiarea teams/utils teams/messages/messagesmodel teams/feed/feedmodel teams/mainline/mainlineview teams/component/sharemodel teams/component/watchmodel teams/component/remind teams/component/userselector teams/component/streammodel teams/feed/eteamscounter teams/crm/CrmService".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/messages/messagesmodel"),b=h("teams/feed/feedmodel");h("teams/mainline/mainlineview");var a=
h("teams/component/sharemodel"),d=h("teams/component/watchmodel");h("teams/component/remind");var g=h("teams/component/userselector"),l=h("teams/component/streammodel"),n=h("teams/feed/eteamscounter"),k=h("teams/crm/CrmService");h=Backbone.View.extend({el:"#mainContainer",initialize:function(g){f($);this.type=g.type;this._module=g.module;this.objId=g.objId;this.el=g.el||"#mainContainer";this.isread=g.isread||!1;this.targetName=null;this.model=new b;this.watchModel=new d;this.shareModel=new a({entityId:"",
module:""});this.isFirst=this.isChange=!0;this.streamModel=new l({});g.url="/feed/"+this.type;this.crmService=new k;0< !$(this.el).parents("#concernsContainer").length&&$(this.el).html(e.template("feed.result",g));$("#center-pane .center-title").prepend(e.template("home.backbtn"));$(this.el).find("."+this.type).removeClass("hide");$(this.el).find(".j_newitem_option").removeClass("hide");"watched"==this.type?$(".search-watchs").remove():$(".search-watchs-cancle").remove();"watched"!=this.type&&"unfinish"!=
this.type||$("#search-group .filterSlip_js").parent().remove();"newitem"==this.type&&($(".search-read").html("\u6279\u91cf\u5df2\u8bfb"),$(this.el).find(".j_"+this.type+"_option").addClass("hide"));"unfinish"!=this.type&&"watched"!=this.type||$(".search-read").remove();"all"==this._module?($("#batch-option").removeClass("hide"),$(".search-share").addClass("hide")):"production"==this._module?$(".search-share").addClass("hide"):($("#batch-option").removeClass("hide"),$(".search-share").removeClass("hide"));
g=$(this.el).parent().find("#search-group");"unfinish"==this.type?(g.find(".j_document").addClass("hide"),g.find(".j_customer").addClass("hide"),g.find(".j_workreport").addClass("hide")):"watched"==this.type&&g.find(".j_formdatareport").addClass("hide")},delegateEvents:function(){var a=this,d=this.model,b=$(a.el),l=new c;b.on("click.btn-group",".j_page_read",function(d){var g="";$("#search-result-list div.j_message_read").each(function(){var a=$(this);a.find(".status i").hasClass("icon-envelope-alt")&&
(a=a.attr("id"),g+=","+a)});g=g.substring(1);l.newReaded(g,function(d){d=g.split(",");for(var b=0;b<d.length;b++)a.changeReadStyleById(d[b]);e.notify("\u5f53\u524d\u9875\u9762\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")})});b.on("click.btn-group",".j_all_read",function(d){var g="";$("#search-result-list div.j_message_read").each(function(){var a=$(this);a.find(".status i").hasClass("icon-envelope-alt")&&(a=a.attr("id"),g+=","+a)});g=g.substring(1);d=a.changeTypeKey(a.type);a.isChange=!0;l.allReaded(d,function(d){if(null!=
g&&""!=g){d=g.split(",");for(var b=0;b<d.length;b++)a.changeReadStyleById(d[b])}$(".aside-nav a.j_"+a.type+" span").html("").data("count","");$("#j_dropMessage .j_"+a.type+" span").html("");e.notify("\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")})});b.on("click.dropdown-menu","#left-toolkit .dropdown-menu li",function(d){d=$(this).find("a").text();var g=$(this).attr("module");a.isChange=!0;b.find(".selectui-result").html(d+"\x3ci class\x3d'icon-angle-down'\x3e\x3c/i\x3e");b.find(".selectui-result").attr("id",
g);a._module=g;a.dropDownMenuLeft();a.renderSearch(!0)});b.on("click.message-center-switch",".j_read",function(d){$(".j_read").hasClass("active")||($(".j_unread").removeClass("active"),$(".j_read").addClass("active"),$("#right-toolkit").addClass("hide"));a.isread=!0;a.isChange=!0;a.model.pageNo=1;a.renderSearch(!0)});b.on("click.message-center-switch",".j_unread",function(d){$(".j_read").hasClass("active")&&($(".j_read").removeClass("active"),$(".j_unread").addClass("active"),$("#right-toolkit").removeClass("hide"));
a.isread=!1;a.isChange=!0;a.model.pageNo=1;a.renderSearch(!0)});b.on("click.status",".j_message_read",function(d){var g=$(d.target).parents(".j_message_read");d=g.attr("id");n.markMessageRead(a.type);l.newReaded(d,function(d){a.changeReadStyle(g)})});$("body").on("click.SearchList",".goto-top",function(a){e.gotoTop(".j_messlistScr")});b.on("click.SearchList","#search-group .group",function(a){a=$(this).attr("data-module");$("#search-group .active").removeClass("active");$(this).addClass("active");
$("#search-group").data("active",a);$("#batch-option").removeClass("hide")});b.on("click.SearchList","#check-all",function(){$(this).hasClass("icon-checkbox-checked")?$(a.el).find("span.checkbox").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).parent("li").removeClass("selected")}):$(a.el).find("span.checkbox").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).parent("li").addClass("selected")});
$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});b.on("click.SearchList",".common-more",function(g){d.pageNo++;a.renderSearch(!1);$("#check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")});b.on("keyup.search",".form-control",function(d){13==(d?d:window.event?window.event:null).keyCode&&(a.targetName=$("#j_search").val(),d=$(".j_module_feed").text(),"\u5168\u90e8"==d?a._module="all":"\u9879\u76ee"==d?a._module="mainline":"\u4efb\u52a1"==
d?a._module="task":"\u6587\u6863"==d?a._module="document":"\u5ba2\u6237"==d?a._module="customer":"\u5ba1\u6279"==d?a._module="workflow":"\u65e5\u7a0b"==d?a._module="calendar":"\u5546\u673a"==d?a._module="saleChance":"\u4ea7\u54c1"==d&&(a._module="production"),a.isChange=!0,a.renderSearch(!0))});b.on("keyup.SearchList","#search-keywords",function(d){13==(d?d:window.event?window.event:null).keyCode&&(a.isChange=!0,a.renderSearch(!0))});b.on("click.SearchList","span.search .icon-search",function(d){a.renderSearch(!0)});
b.on("click.SearchList","#search-result-list li",function(a){$(this).removeClass("newConment")});b.on("click.SearchList",".search-watchs",function(d){d=a.findSelectedLi();0<d.length?a.watchModel.watch("{"+d+"}",function(d){e.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");a.updateFastKey(d.domains,!0)}):e.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});b.on("click.SearchList",".search-watchs-cancle",function(d){d=a.findSelectedLi();0<d.length?a.watchModel.watchDelete("{"+d+"}",function(d){e.notify("\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6210\u529f");
a.updateFastKey(d.domains,!1);"watched"==a.type&&a.renderAside(a.type)}):e.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});b.on("click.SearchList",".search-read",function(d){d=a.findSelectedLi();if(0<d.length){var g=$(this);a.streamModel.readAll("{"+d+"}",function(d){e.notify("\u6279\u91cf"+g.html()+"\u6210\u529f");$(a.el+" .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&$(this).parents("li").hasClass("j_clickRead")&&($(this).parents("li").removeClass("j_clickRead"),
a.clickRead())})})}else e.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});b.on("confirmHandler.SearchList",".search-share",function(d,g){var b=g.objs;if(b&&!$.isEmptyObject(b)){b=$.isArray(b)?b:[b];a.sids="";for(var l=0;l<b.length;l++)a.sids+=b[l].id+",";a.shareModel.sids=a.sids;b=a.findSelectedLiId();a.shareModel.entityIds=b;a.shareModel._module=$("#search-group .active").attr("data-module");a.shareModel.saveAll(function(a){a.addUserMessage?e.notify(a.addUserMessage):e.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});
b.on("click.SearchList",".search-share",function(d,b){d.stopPropagation();0<a.findSelectedLi().length?(new g({$target:$(this)})).open():e.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});b.on("click.SearchList",".shortcut .watch",function(d,g){d.stopPropagation();var b={},l=$(this);b.module=l.attr("module");b.id=l.attr("targetId");"true"==l.attr("watched")?(b._method="DELETE",a.watchModel.watchOne(b,function(d){e.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");l.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');
l.attr("watched","false");"watched"==a.type&&a.renderAside(a.type)})):(b._method="PUT",a.watchModel.watchOne(b,function(d){e.notify("\u5173\u6ce8\u6210\u529f");l.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');l.attr("watched","true");"watched"==a.type&&a.renderAside(a.type)}))});b.on("click.SearchList",".shortcut .finish",function(g,b){g.stopPropagation();var l=$(this);if($(this).attr("targetId")&&$(this).attr("status")&&!l.data("post")){var k="finished"==l.attr("status")?
"todo":"finished",c=l.attr("targetId");l.data("post",!0);d.updateStatus(k,c,function(d){l.data("post",!1);d.actionMsg&&d.actionMsg.message?e.notify(d.actionMsg.message):(e.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(l.parents("li"),k,!0));"unfinish"==a.type&&a.renderAside(a.type)})}else e.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});b.off("confirmHandler",".shortcut .share").on("confirmHandler",".shortcut .share",function(d,g){var b=g.objs;if(b&&!$.isEmptyObject(b)){b=$.isArray(b)?
b:[b];a.sids="";for(var l=0;l<b.length;l++)a.sids+=b[l].id+",";var k=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=k;a.shareModel._module=$(this).attr("module");a.shareModel.saveAll(function(d){d.addUserMessage?e.notify(d.addUserMessage):e.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");var g=a.subView;g.id&&g.id==k&&g.addShare(d.shareEntrys)})}});b.on("click.SearchList",".shortcut .share",function(a,d){a.stopPropagation();$(this).hasClass("selector-toggle")?(new g({$target:$(this)})).open():
e.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});b.on("click.SearchList",".shortcut .link",function(a,d){a.stopPropagation()})},render:function(){this.model.pageNo=1;$(this.el).find(".main-hd .j_"+this.type+"_title").removeClass("hide");$(this.el).find(".main-hd .j_feed_option").removeClass("hide");this.leftToolsFilter();this.renderSearch(!0);if("unfinish"==this.type||"newfinish"==this.type)$("#search-group .document").parent().remove(),$("#search-group .customer").parent().remove();e.layout(".j_messlistScr");
var a=this.el+" .message-sidebar",d=$(e.template("feed.messageshelp"));$(a).html(d.find("#"+this.type+"_help"))},renderSearch:function(a){var d=this,g=d.model,b=d.type,l=d._module,k=d.targetName,c=d.isread,e=d.isChange,f=null;$(d.el).find("#resultlist-loading").show();1==e&&($("#search-result-list").empty(),d.isChange=!1);d.router="/feed/"+b;d[b]&&(d.router+="/"+d[b]);var e={},h=$("#search-keywords").attr("placeholder");k==h&&(k="");e["filter.keywords"]=k;e.module=l;e.loadCount=a;switch(b){case "newitem":f=
"UnReadItem";break;case "newcomment":f="UnreadNewComment";break;case "newfinish":f="NewFinishedItem";break;case "atme":f="UnreadAtMe"}g.isread=c;g.messageType=f;g.module=l;g.targetName=k;0<$("#no-finished").size()&&$("#no-finished").hasClass("icon-checkbox-checked")&&("all"==l?(e["filter.type"]="finished",e["filter.flowFilter"]="finished"):"task"==l?e["filter.type"]="finished":"workflow"==l&&(e["filter.type"]="finished"));$("#search-result .j_no-result, .common-more").addClass("hide");$(d.el).find("#resultlist-loading").hide();
if(0<$(d.el).parents("#concernsContainer").length)g.searchBy[b](e,function(a){d.setHeader(a[b]);a.count&&d.renderCount(a.count);var g;g=0<$(d.el).parents("#concernsContainer").length?a.page:a.newPage;var l=g.result;1==d.isFirst&&0==d.isread&&0>=l.length&&(d.isFirst=!1,$(d.el).find(".j_read").trigger("click"));0==l.length?($("#search-result-list").addClass("hide"),$(".j_no-result").removeClass("hide")):($("#search-result-list").removeClass("hide"),$(".j_no-result").addClass("hide"));for(var k=0,c=
l.length;k<c;k++)0<$(d.el).parents("#concernsContainer").length&&d.renderOneBox(l[k]);$(d.el).find("#resultlist-loading").hide();g.hasNext?$(".common-more").removeClass("hide"):$(".common-more").addClass("hide");a.mainline&&$(".center-title .mainline").find("a").attr("href","mainline/"+a.mainline.id).html(a.mainline.name).addClass("router");a.tag&&($(".center-title .tag").find("a").html(a.tag.name),$(".center-title .tag").find("a").attr("title",a.tag.name));d.highLight(d.objId);d.keywords&&$(d.el).find(".title").highlight(d.keywords)},
d[b]);else d.getFeedMessagePage();n.totaling()},getFeedMessagePage:function(){var a=this,d=a.model,g=a._module,b=a.targetName,l=a.isread,k=a.changeTypeKey(a.type),c=TEAMS.currentUser.id;$(a.el).find("#resultlist-loading").show();d.isread=l;d.messageType=k;d.module=g;d.searchWords=b;d.currentEmployeeId=c;d.getFeedMessagePage(function(d){d=d.data;var g=d.result;if(1==a.isFirst&&0==a.isread&&0>=g.length)a.isFirst=!1,$(a.el).find(".j_read").trigger("click");else{0==g.length?($("#search-result-list").addClass("hide"),
$(".j_no-result").removeClass("hide")):($("#search-result-list").removeClass("hide"),$(".j_no-result").addClass("hide"));for(var b=0;b<g.length;b++){var k=g[b];if($("#feedsContainer .sub-nav .active").attr("mcType")!=k.type)return;var c=$("#feedsContainer .j_feed_option .active").attr("id");if(!("j_read"==c&&1==k.read||"j_unread"==c&&0==k.read))return;a.renderMessage(k,l)}$(a.el).find("#resultlist-loading").hide();d.hasNext?$(".common-more").removeClass("hide"):$(".common-more").addClass("hide")}})},
renderMessage:function(a,d){var g=a.target.module,b=this.getModuleName(g),l=$("#result-clone").clone().removeClass("hide");l.data("messageData",a);var k=a.sender,c=a.userData;1==d&&(l.find(".status i").toggleClass("icon-envelope"),l.find(".status i").toggleClass("icon-envelope-alt"));if(!k||k.id!=TEAMS.currentUser.id){l.attr("id",a.id);l.attr("data-id",a.target.id);l.attr("data-module",a.target.module);k&&k.avatar&&k.avatar.p3?(l.find(".avatar").attr("src","/base/download/"+k.avatar.p3),l.find(".avatar").attr("userid",
k.id)):k&&(l.find(".avatar").attr("src","images/avatar.png"),l.find(".avatar").attr("userid",k.id));l.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"");switch(this.type){case "newitem":l.find(".user").text(k.username);l.find(".user").attr("userid",k.id);c=this.getOperateWords(g);l.find(".event span.text").text(c+"\u4e00\u4e2a"+b+"\u4e8b\u9879");b=l.find(".content a").removeClass("hide").text(a.target.name);b.attr({"data-id":a.target.id,
"data-module":"calendar"==g?"agenda":g});break;case "newcomment":l.find(".user").text(k.username);l.find(".user").attr("userid",k.id);l.find(".event span.text").prepend("\u63d0\u4ea4\u4e86\u4e00\u6761"+b+"\u7684\u65b0\u53cd\u9988 ");a.target.name&&a.target&&"share"!=a.target.module&&(k=l.find(".event a").removeClass("hide").text(a.target.name),k.attr({"data-id":a.target.id,"data-module":"calendar"==g?"agenda":g}));if(b=a.message)b=this.buildAtContent(b,c,a),l.find(".content").removeClass("hide").prepend(b);
break;case "newfinish":k&&k.id!=TEAMS.currentUser.id&&(l.find(".user").html(k.username),l.find(".user").attr("userid",k.id));l.find(".event span.text").text("\u5b8c\u6210\u4e86\u4e00\u4e2a"+b+"\u4e8b\u9879");b=l.find(".content a").removeClass("hide").text(a.target.name);b.attr({"data-id":a.target.id,"data-module":g});break;case "atme":"share"==g?(k&&k.id!=TEAMS.currentUser.id&&l.find(".user").html(k.username),l.find(".user").attr("userid",k.id),l.find(".event span.text").removeClass("hide").text("\u63d0\u4ea4\u4e86\u4e00\u6761"+
b+"\u7684@\u6211\u7684\u53cd\u9988")):(k&&k.id!=TEAMS.currentUser.id&&(l.find(".user").html(k.username),l.find(".user").attr("userid",k.id)),a.target.name?(k=l.find(".event a").removeClass("hide").text(a.target.name),k.attr({"data-id":a.target.id,"data-module":"calendar"==g?"agenda":g}),l.find(".event span.text").prepend("\u63d0\u4ea4\u4e86\u4e00\u6761"+b+"\u7684@\u6211\u7684\u53cd\u9988 ")):l.find(".event span.text").text("\u63d0\u4ea4\u4e86\u4e00\u6761"+b+"\u7684@\u6211\u7684\u53cd\u9988")),b=a.message,
b=this.buildAtContent(b,c,a),l.find(".content").removeClass("hide").prepend(b)}$("#search-result-list").append(l)}},getOperateWords:function(a){var d="\u521b\u5efa\u4e86";switch(a){case "mainline":d="\u5206\u914d\u4e86";break;case "task":d="\u5206\u914d\u4e86";break;case "document":d="\u5206\u914d\u4e86";break;case "formdatareport":d="\u5206\u914d\u4e86"}return d},clickRead:function(){var a=$("#feedsContainer .aside li.active span").html(),a=parseInt(a,10)||0;a--;$("#feedsContainer .aside li.active span").html(0>=
a?"":a);$("#header #top #j_dropMessage .j_"+this.type+" span").html(0>=a?"":a);n.totaling()},findSelectedLiId:function(){var a="";$(this.el+" .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},findSelectedLi:function(){var a="";$(this.el+" .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+='{"id":"'+$(this).parent("li").attr("id")+'","name":"'+$(this).parent("li").attr("title")+
'","module":"'+$(this).attr("module")+'"},')});0<a.length&&(a='"domains":['+a+"]",a=a.replace(",]","]"));return a},updateFastKey:function(a,d){if(d)for(var g=0;g<a.length;g++){var b=$(this.el).find(".e-list").find("#"+a[g].id);b.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');b.find(".watch").attr("watched","true")}else for(g=0;g<a.length;g++)b=$(this.el).find(".e-list").find("#"+a[g].id),b.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),
b.find(".watch").attr("watched","false")},changeTypeKey:function(a){var d;switch(a){case "newitem":d="3";break;case "newcomment":d="5";break;case "newfinish":d="4";break;case "atme":d="12"}return d},getModuleName:function(a){var d="";switch(a){case "task":d=" \u3010\u4efb\u52a1\u3011 ";break;case "document":d=" \u3010\u6587\u6863\u3011 ";break;case "customer":d=" \u3010\u5ba2\u6237\u3011 ";break;case "workflow":d=" \u3010\u5ba1\u6279\u3011 ";break;case "mainline":d=" \u3010\u9879\u76ee\u3011 ";break;
case "user":d=" \u3010\u7528\u6237\u3011 ";break;case "tag":d=" \u3010\u6807\u7b7e\u3011 ";break;case "share":d=" \u3010\u5206\u4eab\u3011 ";break;case "workreport":d=" \u3010\u62a5\u544a\u3011 ";break;case "formdatareport":d=" \u3010\u6570\u636e\u4e0a\u62a5\u3011";break;case "calendar":d=" \u3010\u65e5\u7a0b\u3011 ";break;case "saleChance":d=" \u3010\u5546\u673a\u3011 ";break;case "production":d=" \u3010\u4ea7\u54c1\u3011 "}return d},renderOneBox:function(a){var d=a.module,g=this.router+"/"+d+"/"+
a.id,b=$("#concernsContainer #result-clone li").clone(),l=a.creator,k=$(this.el).find(".e-list"),c=this._module;"formdatareport"==d&&b.find(".shortcut").addClass("hide");b.attr({id:a.id,href:g,"data-id":a.id,"data-module":a.module});"task"==a.module&&b.addClass("task-list-item");a.newConment&&b.addClass("newComment");a.unread&&b.addClass("unread").removeClass("newComment");a.watched?(b.find(".watch").append('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),b.find(".watch").attr("watched",
"true")):(b.find(".watch").append('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),b.find(".watch").attr("watched","false"));b.find(".shortcut span").attr("targetId",a.id);b.find(".shortcut span").attr("module",d);if(a.name){b.find(".title").attr("title",a.name);if("all"==c){switch(a.module){case "task":b.find(".title .text").text("\u3010\u4efb\u52a1\u3011"+a.name);break;case "mainline":b.find(".title .text").text("\u3010\u9879\u76ee\u3011"+a.name);break;case "workflow":b.find(".title .text").text("\u3010\u5ba1\u6279\u3011"+
a.name);break;case "document":b.find(".title .text").text("\u3010\u6587\u6863\u3011"+a.name);break;case "customer":b.find(".title .text").text("\u3010\u5ba2\u6237\u3011"+a.name);break;case "workreport":b.find(".title .text").text("\u3010\u62a5\u544a\u3011"+a.name);break;case "formdatareport":b.find(".title .text").text("\u3010\u6570\u636e\u4e0a\u62a5\u3011"+a.name);break;case "saleChance":b.find(".title .text").text("\u3010\u5546\u673a\u3011"+a.name);break;case "production":b.find(".title .text").text("\u3010\u4ea7\u54c1\u3011"+
a.name)}if(a.priority)switch(a.priority){case "urgency":b.find(".title").append('\x3cspan class\x3d"importance urgency"\x3e\u975e\u5e38\u7d27\u6025\x3c/span\x3e');break;case "high":b.find(".title").append('\x3cspan class\x3d"importance high"\x3e\u7d27\u6025\x3c/span\x3e');break;default:b.find(".title").append('\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e')}}else switch(b.find(".title .text").text(a.name),a.priority){case "urgency":b.find(".title").append('\x3cspan class\x3d"importance urgency"\x3e\u975e\u5e38\u7d27\u6025\x3c/span\x3e');
break;case "high":b.find(".title").append('\x3cspan class\x3d"importance high"\x3e\u7d27\u6025\x3c/span\x3e');break;default:b.find(".title").append('\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e')}b.find(".title").attr({"data-module":a.module,"data-id":a.id})}"task"==a.module?(b.find(".finish").removeClass("hide"),g=a.finished?"finished":"todo","newfinish"==this.type?this.renderStatus(b,g):this.renderStatus(b,g,!0)):"mainline"!=a.module&&"production"==a.module&&b.find(".share").addClass("hide");
a.permission&&1!=a.permission&&b.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",d).attr("targetId",a.id);b.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"");l&&l.id!=TEAMS.currentUser.id&&b.find(".user").html(l.name);0!=a.commentCount&&(b.find(".comment-count").html('\x3ci class\x3d"icon-chat-3 mr-3"\x3e\x3c/i\x3e\x3cem\x3e(0)\x3c/em\x3e'),b.find(".comment-count em").html("("+a.commentCount+
")"));b.find(".checkbox").attr("module",d);a=k.find("li").length;a++;b.find(".sn").html(a);k.append(b)},renderOne:function(a){var d=a.module,g="";switch(target.module){case "task":g=" \u3010\u4efb\u52a1\u3011 ";break;case "document":g=" \u3010\u6587\u6863\u3011 ";break;case "customer":g=" \u3010\u5ba2\u6237\u3011 ";break;case "workflow":g=" \u3010\u5ba1\u6279\u3011 ";break;case "mainline":g=" \u3010\u9879\u76ee\u3011 ";break;case "user":g=" \u3010\u7528\u6237\u3011 ";break;case "tag":g=" \u3010\u6807\u7b7e\u3011 ";
break;case "share":g=" \u3010\u5206\u4eab\u3011 ";break;case "workreport":g=" \u3010\u62a5\u544a\u3011 ";break;case "saleChance":g=" \u3010\u5546\u673a\u3011 ";break;case "production":g=" \u3010\u4ea7\u54c1\u3011 "}var b=$("#result-clone").clone(),l=a.creator;b.attr({id:a.id});b.attr("data-id",a.id);b.attr("data-module",a.module);a.watched?(b.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),b.find(".watch").attr("watched","true")):b.find(".watch").attr("watched",
"false");b.find(".watch").attr("targetId",a.id);b.find(".watch").attr("module",d);a.name&&b.find(".title").attr("title",a.name).text(a.name);this._module&&"all"!=this._module||b.find(".module").html("["+g+"]");!this.type||"watched"!=this.type&&"unfinish"!=this.type||a.newConment&&b.addClass("newConment");"task"==a.module?(b.find(".finish").removeClass("hide"),g=a.finished?"finished":"todo","newfinish"==this.type?this.renderStatus(b,g):this.renderStatus(b,g,!0)):"mainline"==a.module&&(b.find(".link").removeClass("hide"),
b.find(".link").attr("href","/mainline/link/"+TEAMS.currentUser.id+"/"+a.id));a.permission&&1!=a.permission&&(b.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",d).attr("targetId",a.id),b.find(".finish").attr("targetId",a.id));b.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"");l&&l.id!=TEAMS.currentUser.id&&b.find(".user").html(l.name);0!=a.commentCount&&b.find(".comment-count").html("("+
a.commentCount+")");a=$("#search-result-list");l=a.find("li").length;l++;b.find(".sn").html(l);b.find(".checkbox").attr("module",d);a.append(b)},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/\r\n|\n/g," ")},renderCount:function(a){var d=this._module;$("#search-group").data("active")||($("#search-group").data("active",d),$("#search-group ."+d).parent().addClass("active"));$("#search-group .all i").html(a.allCount);if("watched"==this.type||"unfinish"==this.type)$("#concernsContainer .menu-group-sub .j_all span").html(0==
a.allCount?"":a.allCount),$("#concernsContainer .menu-group-sub .j_task span").html(0==a.task?"":a.task),$("#concernsContainer .menu-group-sub .j_document span").html(0==a.document?"":a.document),$("#concernsContainer .menu-group-sub .j_customer span").html(0==a.customer?"":a.customer),$("#concernsContainer .menu-group-sub .j_saleChance span").html(0==a.saleChance?"":a.saleChance),$("#concernsContainer .menu-group-sub .j_production span").html(0==a.production?"":a.production),$("#concernsContainer .menu-group-sub .j_workflow span").html(0==
a.workflow?"":a.workflow),$("#concernsContainer .menu-group-sub .j_mainline span").html(0==a.mainline?"":a.mainline),$("#concernsContainer .menu-group-sub .j_formdatareport span").html(0==a.formdatareport?"":a.formdatareport),$("#concernsContainer .menu-group-sub .j_tag span").html(0==a.tag?"":a.tag);0<a.task?($("#search-group .task i").html(a.task),$("#search-group .task").parent().removeClass("hide")):$("#search-group .task").parent().addClass("hide");0<a.document?($("#search-group .document i").html(a.document),
$("#search-group .document").parent().removeClass("hide")):$("#search-group .document").parent().addClass("hide");0<a.customer?($("#search-group .customer i").html(a.customer),$("#search-group .customer").parent().removeClass("hide")):$("#search-group .customer").parent().addClass("hide");0<a.workflow?($("#search-group .workflow i").html(a.workflow),$("#search-group .workflow").parent().removeClass("hide")):$("#search-group .workflow").parent().addClass("hide");0<a.mainline?($("#search-group .mainline i").html(a.mainline),
$("#search-group .mainline").css("display","block")):$("#search-group .mainline").css("display","none");0<a.tag?($("#search-group .tag i").html(a.tag),$("#search-group .tag").css("display","block")):$("#search-group .tag").css("display","none")},renderAside:function(a){var d=this;d.model.searchBy[a]({module:"all",loadCount:!0},function(g){d.setHeader(g[a]);g.count&&d.renderCount(g.count)})},buildAtContent:function(a,d,g){g={};if(null!=d&&""!=d){var b=[];if(b=eval(d))for(var l=0;l<b.length;l++)b[l]&&
b[l].userIdIndex&&0!=b[l].userIdIndex&&(a=a.substring(0,b[l].userIdIndex-1)+"@"+b[l].userName+a.substring(b[l].userIdIndex-1),g["@"+b[l].userName]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+b[l].userId+"'\x3e@"+b[l].userName+"\x3c/a\x3e")}a=e.initMessage(a);a=$.faceConvert(a);for(l in g)a=a.replace(l,g[l]);return a},renderModule:function(a){this.model.pageNo=1;a&&a!=this._module&&(this._module=a,$("#search-group").data("active",a),$("#search-group .active").removeClass("active"),$("#search-group ."+
a).parent().addClass("active"),this.renderSearch(!1))},beforeOpenTarget:function(a){this.highLight(a)},removeTarget:function(a){var d=this.getNext();$("#"+a.targetId).remove();var g=d?d.attr("id"):"new";d?ROUTER.navigate(this.router+"/"+a.module+"/"+d.attr("id"),{trigger:!0}):ROUTER.navigate(this.router,{trigger:!0});this.rebuildSN();this.highLight(g)},changeTitle:function(a,d){$("#"+a).find(".title").text(d).attr("title",d)},changeReadStyle:function(a){a.find(".status i").hasClass("icon-envelope-alt")&&
a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope")},changeReadStyleById:function(a){a=$(this.el).find("#search-result-list div#"+a);a.find(".status i").hasClass("icon-envelope-alt")&&(a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope"),n.markMessageRead(this.type))},changeStatus:function(a,d){var g=$("#search-result #"+a);this.renderStatus(g,d,!0)},renderStatus:function(a,d,g){"finished"==d?(a.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),
a.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),g&&a.find(".title .text").addClass("finished-line")):(a.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),a.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),g&&a.find(".title .text").removeClass("finished-line"))},
changeWatch:function(a,d){var g=$("#search-result #"+a);d?(g.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),g.find(".watch").attr("watched","true")):(g.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),g.find(".watch").attr("watched","false"))},changeManager:function(a,d){a&&(a.id!=TEAMS.currentUser.id?$("#search-result-list #"+d+" .user").html(a.username):$("#search-result-list #"+d+" .user").html(""))},changeDuedate:function(a){var d=
$("#search-result-list #"+a.id);a=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"";d.find(".date").html(a)},highLight:function(a){if(a){$("#search-result-list li.active").removeClass("active");$("#search-result-list #"+a).addClass("active");var d=$("#search-result-list #"+a).find(".title").html();$("#search-result-list #"+a).find(".title").html("").focus().html(d)}},rebuildSN:function(){for(var a=$("#search-result-list").children(),d=0;d<a.length;d++)$(a[d]).find(".sn").html(d+
1)},getNext:function(){var a=0,d=$("#search-result-list li.result-li");d.each(function(d){$(this).hasClass("active")&&(a=d)});if(1!=d.length)return d.length==a+1?$(d[a-1]):$(d[a+1])},dropDownMenuLeft:function(){var a=$(this.el).find("#left-toolkit"),d=a.find("a.selectui-result"),a=a.find(".dropdown-menu");a.find(".hide").removeClass("hide");a.find("li").each(function(){$(this).find("a").text()==d.text()&&$(this).addClass("hide")});this.leftToolsFilter()},leftToolsFilter:function(){var a=$(this.el).find("#left-toolkit");
"newfinish"==this.type&&(a.find(".j_document").addClass("hide"),a.find(".j_customer").addClass("hide"),a.find(".j_workreport").addClass("hide"),a.find(".j_share").addClass("hide"),a.find(".j_agenda").addClass("hide"),a.find(".j_saleChance").addClass("hide"),a.find(".j_production").addClass("hide"));"newcomment"==this.type&&a.find(".j_share").addClass("hide");"unfinish"==this.type&&($("#search-group .j_saleChance").remove(),$("#search-group .j_production").remove());"newitem"==this.type&&a.find(".j_share").addClass("hide")},
getPrev:function(){var a=0,d=$("#search-result-list li.result-li");d.each(function(d){$(this).hasClass("active")&&(a=d)});return $(d[a]).prev()},setHeader:function(a){a&&(a=a.name||a,$(this.el).find("."+this.type+" h5 input").attr("value",a))},remove:function(){this.undelegateEvents();$(this.el).off(".SearchList");$("form.form-search").find("#keywords").val("");$("#search-result-list").remove()}});m.exports=h});
define("teams/feed/eteamscounter",function(h,q,m){var f={bellCounter:{id:"BEEL_COUNTER",param:{receiverId:TEAMS.currentUser.id,eteamsId:ETEAMSID},data:{receiverId:TEAMS.currentUser.id,eteamsId:ETEAMSID},url:TEAMS.service.mcManager+"/feed/mcCountPcBell.json",callback:function(e){e=e.data.bellCount;if(null!=e)for(var c=0;c<e.length;c++){var b=e[c],a=$("#j_dropMessage li a.j_"+b.type+" span");null!=a&&a.html(0==b.count?"":b.count)}$(".statistic-panel .panel-border").show();$(".statistic-panel .statistic-line").show();
f.totaling()}},countPcBell:function(){this.loadMessage(this.bellCounter)},markBlogRead:function(e){var c=parseInt($("#commentMine-unread").data("count"))||0,b=parseInt($("#replayMine-unread").data("count"))||0,a=parseInt($("#unreadBlog").data("count"))||0,d=c+b+a;"commentme"==e?(c--,d--,c=0>c?0:c,0>=c?($("#commentMine-unread").addClass("hide"),$("#commentMine-unread").html("").data("count","")):$("#commentMine-unread").html(c).data("count",c)):"replayme"==e?(b--,d--,b=0>b?0:b,0>=b?($("#replayMine-unread").addClass("hide"),
$("#replayMine-unread").html("").data("count","")):$("#replayMine-unread").html(b).data("count",b)):"unread"==e&&(a--,d--,0>=a?($("#unreadBlog").addClass("hide"),$("#unreadBlog").html("").data("count","")):$("#unreadBlog").html(a).data("count",a));$("#j_dropMessage .j_unreadblog span").html(0>=d?"":d);this.totaling()},markMessageRead:function(e){var c=0,b="j_"+e,c=parseInt(parseInt($(".aside-nav a."+b+" span").html()))||0;c--;"wechat"!=e&&(0>=c?$(".aside-nav a."+b+" span").html("").data("count",""):
$(".aside-nav a."+b+" span").html(c).data("count",c),$("#j_dropMessage ."+b+" span").html(0>=c?"":c));this.totaling()},countFeedPageLeft:function(e){if(null!=$("#feedsContainer")&&null!=e)for(var c=0;c<e.length;c++){var b=e[c],a=$("#feedsContainer .j_"+b.type+" span");null!=a&&a.html(0==b.count?"":b.count)}},countUnreadNewItem:function(e){$("#navigation .j_messageCount a.j_newitem span").html(e);this.totaling()},countUnreadNewComment:function(e){$("#navigation .j_messageCount a.j_newcomment span").html(e);
this.totaling()},countUnreadNewFinish:function(e){$("#navigation .j_messageCount a.j_newfinish span").html(e);this.totaling()},countUnreadNewAtme:function(e){$("#navigation .j_messageCount a.j_atme span").html(e);this.totaling()},countUnreadRemind:function(e){$("#navigation .j_messageCount a.j_remind span").html(e);this.totaling()},countApplyFollow:function(e){$("#navigation .j_messageCount a.j_follow span").html(e);this.totaling()},countApplyJoin:function(e){$("#navigation .j_messageCount a.j_applyJoin span").html(e);
this.totaling()},countApplyShare:function(e){$("#navigation .j_messageCount a.j_shareJoin span").html(e);this.totaling()},loadMessage:function(e){$.ajax({type:"get",global:!1,url:e.url,dataType:"json",data:e.param?e.param:{},success:function(c){c.actionMsg&&-1==c.actionMsg.code||e.callback&&e.callback(c)}})},totaling:function(){var e=0,c=!1;$("#navigation .j_messageCount a span").each(function(){var b=$(this).html();0==b?$(this).html(""):(e+=parseInt(b)||0,c=!0)});c?(99<e&&(e="n+"),$("#navigation").find(".j_point").removeClass("hide").html(e)):
$("#navigation").find(".j_point").addClass("hide")}};m.exports=f});
define("teams/pages/messagespage",["teams/core/page","teams/messages/messagesview","teams/wechat/chatrightview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/messages/messagesview"),e=h("teams/wechat/chatrightview");h=q.extend({initialize:function(c){this.type=c.type;this.id=c.id;this.chatType=c.chatType;this.pageKey=this.type?"wechat"==this.type?"messages"+this.type+this.id:"messages"+this.type+TEAMS.currentUser.id:"messages"+TEAMS.currentUser.id;this.template="feed.page"},delegateEvents:function(){},
render:function(){this.initLayout();this.mainView=new f({type:this.type,id:this.id});this._render()},renderSubview:function(){this.subView=new e({userId:this.id});this.subView.chatType="unread";this._renderSubview()}});m.exports=h});
define("teams/pages/wechatpage",["teams/utils","teams/core/page","teams/wechat/chatrightview","teams/wechat/chatview"],function(h,q,m){var f=h("teams/utils");q=h("teams/core/page");var e=h("teams/wechat/chatrightview"),c=h("teams/wechat/chatview"),b=q.extend({initialize:function(a){this.id=a.id;this.chatType=a.chatType;this.pageKey=a.pageKey+(this.id?this.id:TEAMS.currentUser.id);this.template="feed.page"},delegateEvents:function(){},render:function(){this.initLayout();if("channel"==this.chatType)this.mainView=
new c({userId:TEAMS.currentUser.id}),this.mainView.channelId=this.id,this.mainView.chatType=this.chatType;else{if(this.id==TEAMS.currentUser.id)return;this.mainView=new c({userId:this.id})}this._render()},renderSubview:function(){var a=this.chatType;if("unread"==a)this.subView=new e({userId:TEAMS.currentUser.id}),this.subView.chatType=a;else if("channel"==a)this.subView=new e({userId:TEAMS.currentUser.id}),this.subView.channelId=this.id,this.subView.chatType=a;else{if(this.id==TEAMS.currentUser.id){f.notify("\u7528\u6237\u65e0\u6cd5\u7ed9\u81ea\u5df1\u53d1\u9001\u5fae\u4fe1");
return}this.subView=new e({userId:this.id})}this._renderSubview()},remove:function(){b=null}});m.exports=b});
define("teams/pages/unreadfeedbackpage",["teams/core/page","teams/views/feedbackview","teams/base/dynamicinfoview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/views/feedbackview"),e=h("teams/base/dynamicinfoview");h=q.extend({initialize:function(c){this.id=c.id;this.module=c.module;this.userId=c.userId;this.pageKey="unreadfeedback#"+this.userId;this.layout="home.two"},delegateEvents:function(){},render:function(){this.initLayout();this.mainView=new f({container:"#center-pane",showtitle:"1",
navs:[".document",".customer"],module:null,moduleName:"\u672a\u8bfb\u53cd\u9988",type:"other",targetModule:"unreadall",targetContainer:"#right-pane",showReaded:"2",pageUrl:"/comment/unreadall",groupShow:"1",inCenter:"1"});this._render()},renderSubview:function(){this.subView=new e({container:"#right-pane"});this._renderSubview()}});m.exports=h});
define("teams/pages/printpage",["teams/core/page","teams/utils","teams/workflow/flowview","teams/task/taskview","teams/workreport/workreportcontentview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/utils"),e=h("teams/workflow/flowview"),c=h("teams/task/taskview"),b=h("teams/workreport/workreportcontentview");h=q.extend({initialize:function(a){this.el="body";this.pageKey=a.pageKey;this.id=a.id;this.isPrintPage=!0},delegateEvents:function(){var a=this,d=$(a.el);d.off("click.PrintPage",".js_printcomment").on("click.PrintPage",
".js_printcomment",function(a){$(this).is(":checked")?(d.find(".extend-panel").show(),d.find(".j_extend").show()):(d.find(".extend-panel").hide(),d.find(".j_extend").hide())});d.off("click.PrintPage",".js_printblog").on("click.PrintPage",".js_printblog",function(a){$(this).is(":checked")?d.find("#blog-panel").show():d.find("#blog-panel").hide()});d.off("click.PrintPage",".js_print").on("click.PrintPage",".js_print",function(a){window.print()});d.off("click.PrintPage","#printFont a").on("click.PrintPage",
"#printFont a",function(){var a=$(this),d=a.attr("font-item");a.addClass("active").siblings("a").removeClass("active");"big"==d&&$("#print").addClass("fs-b").removeClass("fs-s fs-m");"medium"==d&&$("#print").addClass("fs-m").removeClass("fs-s fs-b");"small"==d&&$("#print").addClass("fs-s").removeClass("fs-b fs-m")});$("body").off("printLoaded.PrintPage").on("printLoaded.PrintPage",function(d,b){"flow"==a.pageKey&&$(this).find("[placeholder]").removeAttr("placeholder");$(this).find(".js_toolbar").removeClass("hide")})},
render:function(){var a=$(this.el);this.initLayout();"Microsoft Internet Explorer"==navigator.appName&&"MSIE9.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")&&(a.parent().attr("class","src-allow"),a.attr("class","filterSlip_js"),a.html(f.template("base.print")));switch(this.pageKey){case "flow":this.mainView=new e({container:"#print",requestId:this.id});this.mainView.renderFlow();$("body").find("[placeholder]").removeAttr("placeholder");break;case "task":this.mainView=new c({container:"#print",
id:this.id,pageSize:999});this.mainView.render();break;case "workreport":this.mainView=new b({id:this.id,container:"#print",hideBlog:!0}),this.mainView.render()}}});m.exports=h});
define("teams/pages/logpage",["teams/core/page","teams/report/logview","teams/report/logdetailview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/report/logview"),e=h("teams/report/logdetailview");h=q.extend({initialize:function(c){this.userId=c.userId;this.type=c.type;this.pageKey="log#"+this.type;this.layout="home.two"},delegateEvents:function(){},render:function(){this.initLayout();this.mainView=new f({type:this.type,userId:this.userId});this._render()},renderSubview:function(){this.subView=
new e({userId:this.userId});this._renderSubview()},remove:function(){}});m.exports=h});
define("teams/pages/searchpage",["teams/core/page","teams/search/searchview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/search/searchview");h=q.extend({initialize:function(e){this.type=e.type;this.param=e.param;this.module=e.module;this.objId=e.objId;this.pageKey="search#"+this.type+this.param;this.template="search.searchpage";this.el="#mainContainer"},delegateEvents:function(){this.on("beforeOpen",function(e){this.mainView.beforeOpenTarget(e)});this.on("remove",function(e){this.mainView.removeTarget({targetId:e,
module:this.module})});this.on("changeTitle",function(e){this.mainView.changeTitle(e.id,e.title)});this.on("changeStatus",function(e){this.mainView.changeStatus(e.id,e.status)});this.on("changeWatch",function(e){this.mainView.changeWatch(e.id,e.watched)});this.on("changeManager",function(e){this.mainView.changeManager(e.manager,e.id)});this.on("changeDuedate",function(e){this.mainView.changeDuedate(e)})},render:function(){this.initLayout();this.mainView=new f({type:this.type,param:this.param,module:this.module,
objId:this.objId,el:"#mainContainer #j_searchcenter"});this._render()},renderSubview:function(){var e=this.module,c=this.param;this.subView=e&&"tag"==e?new FeedbackView({container:"#mainContainer #j_searchright",showtitle:"1",navs:[".document",".customer"],module:e,moduleName:"\u6b64\u6807\u7b7e\u4e0b\u76f8\u5173\u4e8b\u9879\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetId:this.param,keywords:c,targetModule:"tag",groupShow:"1"}):new FeedbackView({container:"#mainContainer #j_searchright",showtitle:"1",
navs:[".document",".customer"],module:e,moduleName:"\u641c\u7d22\u5230\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetModule:"search",keywords:c,groupShow:"1"})}});m.exports=h});
define("teams/pages/simplepage","teams/core/page teams/system/infoview teams/profile/profileview teams/report/taskreportview teams/report/blogreportview teams/report/timecard teams/report/flowreportview teams/views/taskcalendarview teams/base/versioninfoview teams/mainline/mainlinelistview teams/portal/portalview teams/org/followview teams/workflow/formlistview teams/report/workhourreportview".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/system/infoview"),e=h("teams/profile/profileview"),
c=h("teams/report/taskreportview"),b=h("teams/report/blogreportview"),a=h("teams/report/timecard"),d=h("teams/report/flowreportview"),g=h("teams/views/taskcalendarview"),l=h("teams/base/versioninfoview"),n=h("teams/mainline/mainlinelistview"),k=h("teams/portal/portalview"),r=h("teams/org/followview"),p=h("teams/workflow/formlistview"),s=h("teams/report/workhourreportview");h=q.extend({initialize:function(a){this.pageKey=a.pageKey;this.reloadPage=a.reloadPage;this.options=a;this.layout="home.one"},
render:function(){this.initLayout();switch(this.pageKey){case "info":this.mainView=new f;this.mainView.render();break;case "profile":this.mainView=new e(this.options);this.mainView.render();break;case "tasksreport":this.mainView=new c;this.mainView.render();break;case "tasksreports":this.mainView=new c({viewMode:"1"});this.mainView.render();break;case "timecard":this.mainView=new a;this.mainView.render();break;case "workhour":this.mainView=new s;this.mainView.render();break;case "flowreports":this.mainView=
new d;this.mainView.render();break;case "taskscalendar":this.mainView=new g(this.options);this.mainView.render();break;case "versioninfo":this.mainView=new l(this.options);this.mainView.render();break;case "blogsreport":this.mainView=new b({viewMode:"1"});this.mainView.render();break;case "mainline":this.mainView=new n(this.options);this.mainView.render();break;case "portal":this.mainView=new k(this.options);this.mainView.render();break;case "myfollow":this.mainView=new r(this.options);this.mainView.render();
break;case "forms":this.mainView=new p(this.options),this.mainView.render()}}});m.exports=h});
define("teams/baidushare/baidushare",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.render(e)},delegateEvents:function(){},render:function(e){$(e.container).html(f.template("baidu.share"));this.config(e)},config:function(e){window._bd_share_config={common:{bdText:e.shareTitle,bdDesc:e.shareDesc,bdUrl:e.shareUrl,onAfterClick:e.callback},share:[{bdSize:32}],image:[{viewType:"list",viewPos:"top",viewColor:"black",viewSize:"32",viewList:["qzone",
"tsina","huaban","tqq","renren"]}]};with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion\x3d"+~(-new Date/36E5)];window._bd_share_main&&window._bd_share_main.init()}});m.exports=h});
define("teams/profile/profileview","teams/utils teams/component/typeahead teams/models/profilemodel teams/component/visitview teams/component/validation teams/base/avatarview teams/base/accountbinding teams/org/followview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/models/profilemodel"),b=h("teams/component/visitview"),a=h("teams/component/validation"),d=h("teams/base/accountbinding"),g=h("teams/org/followview");h=Backbone.View.extend({initialize:function(a){this.el=
a.container||"#mainContainer";this.userId=a.userId||TEAMS.currentUser.id;this.closable=a.closable;this.model=new c(a)},delegateHasAclEvents:function(){var a=this,g=this.model,b=$(a.el);$("body").on("click.profile",".goto-top",function(d){f.gotoTop(a.el+" #user-container")});b.on("blur.profile","#user-info input:not(#employee-activeDate,#typeahead-department,#typeahead-position,#other-typeahead-position,#typeahead-superior,#ROLE_ADMIN,#typeahead-business-superior,#typeahead-assistant,#typeahead-open-access)",
function(d){d=$(d.currentTarget);a.saveEmployee(d)});b.on("change.profile","#user-info select",function(d){d=$(d.currentTarget);a.saveEmployee(d)});b.on("change.profile","#user-info input[type\x3dradio]",function(d){d=$(d.currentTarget);a.saveEmployee(d)});b.on("removeEntity.profile","#employee-superior",function(d){g.saveEmployeeProperty({propertyName:"superior","employee.id":a.userId},function(d){if(d.message)return f.notify(d.message);$("#user-info").data("user",d.employee);f.notify("\u5220\u9664\u6210\u529f");
a.hasSenior()||$("#seniorRow").addClass("hide")})});b.on("click.profile","#btn-delete-user",function(){f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8be5\u7528\u6237\u5417\uff1f\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d",function(d){d&&a.model.deleteUser(a.userId,function(a){f.notify(a.message);window.location="/organization"})})});b.on("change.profile","input[id\x3dROLE_ADMIN][type\x3dcheckbox]",function(){var d="",g="",b="",k=$(this);1==$("#ROLE_ADMIN:checked").length?(d="add",g="\u786e\u5b9a\u8981\u8d4b\u4e88\u8be5\u7528\u6237\u7ba1\u7406\u5458\u6743\u9650\u5417\uff1f",
b=!1):(d="remove",g="\u786e\u5b9a\u8981\u6536\u56de\u8be5\u7528\u6237\u7ba1\u7406\u5458\u6743\u9650\u5417\uff1f",b=!0);f.confirm(g,function(g){g?a.model.updateUserRole(a.userId,"ROLE_ADMIN",d,function(a){if(a.actionMsg)return k.prop("checked",b),f.notify(a.actionMsg.message);f.notify("\u66f4\u65b0\u6210\u529f,\u91cd\u65b0\u767b\u5f55\u540e\u751f\u6548")}):k.prop("checked",b)})});e([{el:a.el+" #user-container #typeahead-department",callback:function(d){d&&($("#employee-department").html(f.template("base.department",
d)),a.saveEmployee($(a.el+" #user-container #typeahead-department")))}},{el:a.el+" #user-container #other-typeahead-department",resultHandler:this.dpid,callback:function(d){d&&a.saveEDLink(d)}},{el:a.el+" #user-container #typeahead-position",callback:function(d){d&&("new"==d.id?$("#user-container #typeahead-position").val(""):($("#employee-position").html(f.template("base.position",d)),a.saveEmployee($(a.el+" #user-container #typeahead-position")),$("#otherPositionRow").is(":hidden")&&$("#otherPositionRow").removeClass("hide")))}},
{el:a.el+" #user-container #other-typeahead-position",resultHandler:this.dpid,callback:function(d){d&&("new"==d.id?$("#user-container #other-typeahead-position").val(""):a.saveEPLink(d))}},{el:a.el+" #user-container #typeahead-superior",resultHandler:a.userId,callback:function(d){d&&(a.hasUser(d.id,$("body").find("#business-employee-superior"))?f.notify("\u4e0d\u80fd\u5c06\u5176\u4ed6\u4e0a\u7ea7\u4eba\u5458\u8bbe\u7f6e\u6210\u4e0a\u7ea7"):($("#employee-superior").html(f.template("base.user",d)),
$("#employee-superior").find("a").attr("data-value",a.userId),a.saveEmployee($(a.el+" #user-container #typeahead-superior"))))}},{el:a.el+" #user-container #typeahead-business-superior",resultHandler:a.userId,callback:function(d){d&&a.saveOtherSenior(d)}},{el:a.el+" #user-container #typeahead-assistant",callback:function(d){d&&a.saveAssistant(d)}},{el:a.el+" #user-container #typeahead-open-access",callback:function(d){d&&a.saveOpenAccess(d)}}]);b.on("click.profile",".binding_js",function(){var g=
$(this).attr("propertyName");(new d({userId:a.userId,parentEl:a.el+" #user-container",propertyName:g})).render()});b.on("click.profile","#employee-unavailable",function(){var d=$(this),g=d.attr("propertyName");"resignation"==g?a.resignation(d):"quit"==g&&a.quitCompany()});b.on("click.profile","#employee-available",function(){var d=$(this);"normal"==d.attr("propertyName")&&a.rehire(d)});b.on("removeEntity.profile","#employee-position",function(d){g.saveEmployeeProperty({propertyName:"position","employee.id":a.userId},
function(d){if(d.message)return f.notify(d.message);$("#user-info").data("user",d.employee);f.notify("\u5220\u9664\u6210\u529f!");a.hasPosition()||$("#otherPositionRow").addClass("hide")})});b.off("click.profile","#other-employee-position .entity-item .close").on("click.profile","#other-employee-position .entity-item .close",function(d){d.stopPropagation();var b=$(this).parent();if(d=$(this).prevAll("a").attr("data-value"))g.sids=d;g.parentId=a.userId;f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(d){d&&
g.deleteEPLink(function(d){b.remove();f.notify("\u5220\u9664\u6210\u529f!");a.hasPosition()||$("#otherPositionRow").addClass("hide")})})});b.off("click.profile","#other-employee-department .entity-item .close").on("click.profile","#other-employee-department .entity-item .close",function(d){d.stopPropagation();var b=$(this).parent(),k=$(this).prevAll("a").attr("data-value");k&&(g.sids=k);g.parentId=a.userId;f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(d){d&&g.deleteEDLink(function(d){b.remove();
$("body").find("#org-tree-list").find(".selected").attr("id")==k&&($("body").find("#userlistCon").find("#"+a.userId).remove(),$("body").trigger("slideClose"));f.notify("\u5220\u9664\u6210\u529f\uff01")})})});b.off("click.profile","#business-employee-superior .entity-item .close").on("click.profile","#business-employee-superior .entity-item .close",function(d){d.stopPropagation();d=$(this).prevAll("a").attr("userid");$(this).prevAll("a").attr("data-value");var b=$(this).parent();d&&(g.sids=d);g.subordinateUserId=
a.userId;f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(d){d&&g.deleteOtherSenior(function(d){b.remove();f.notify("\u5220\u9664\u6210\u529f\uff01");a.hasSenior()||$("#seniorRow").addClass("hide")})})});b.off("click.profile","#assistant .entity-item .close").on("click.profile","#assistant .entity-item .close",function(d){d.stopPropagation();d=$(this).prevAll("a").attr("userid");var b=$(this).parent();d&&(g.assistantId=d);g.sids=a.userId;f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(a){a&&
g.deleteAssistant(function(a){b.remove();f.notify("\u5220\u9664\u6210\u529f\uff01")})})});b.off("click.profile","#open-access .entity-item .close").on("click.profile","#open-access .entity-item .close",function(d){d.stopPropagation();d=$(this).prevAll("a").attr("userid");$(this).prevAll("a").attr("data-value");var b=$(this).parent();d&&(g.sids=d);g.openAccessId=a.userId;f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(a){a&&g.deleteOpenAccess(function(a){b.remove();f.notify("\u6743\u9650\u5f00\u653e\u5df2\u5220\u9664\uff01")})})});
b.on("click.profile","#employee-activeDate",function(){var d=$(this);d.focus();d.datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,initialDate:new Date,startView:"month",minView:"month",maxView:"decade",pickerPosition:"bottom-left",showMeridian:!1}).on("changeDate",function(d){d=$(d.currentTarget);a.saveEmployee(d)});d.datetimepicker("show")})},renderSummary:function(){var a=this;this.model.loadSummary(this.userId,function(d){var g=d.user;if(g){var c=
f.template("home.userinfo",d);$("#right-pane").empty().append(c);a.visitView=new b({userId:g.id,container:$("#right-pane").find(".div_visit")});a.visitView.render(d.myVisitors,d.beVisited)}})},initComponent:function(){},render:function(){var a=this;$(a.el).html(f.template("base.profile"));var d=TEAMS.currentUser.id;TEAMS.currentUser.admin?a.renderHasAcl(!0):d==a.userId?a.renderHasAcl(!1):a.renderNoAcl();this.followview=new g({userId:this.userId,el:".j_profilefollowView",forProfile:!0,type:"subordinate"});
this.followview.render();$(a.el).on("click.profile","#title-lowers",function(){e({el:"#subordinate-container-inner input.typeahead",callback:function(d){if(d&&!$.isEmptyObject(d)){var g="",b=a.userId;if(d instanceof Array)for(var c=0;c<d.length;c++){var n=d[c];n.id!=b&&(g+=n.id+",")}else{if(d.id==b)return;g+=d.id+","}g&&(d={},d.sids=g,d.parentId=b,a.followview.model.saveLower(d,function(d){d.message&&f.notify(d.message);0<d.lowers.length&&($("#subordinate-container-inner").find("#showmoredirectsubordinates").is(":visible")?
(a.followview.renderList(d.lowers,"#subordinate-container-inner","subordinate"),$("#subordinate-container-inner").find("#showmoredirectsubordinates").remove(),$("#subordinate-container-inner").append('\x3ca  id\x3d"showmoredirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e')):a.followview.renderList(d.lowers,"#subordinate-container-inner","subordinate"),f.notify("\u6dfb\u52a0\u4e0b\u5c5e\u6210\u529f\uff01"))}))}}});$(this).hasClass("active")||
$(this).addClass("active").siblings().removeClass("active");$(".main-hd").siblings("#user-container").addClass("hide");$(".main-hd").siblings("#user-lowers").removeClass("hide")});$(a.el).on("click.profile","#title-profile",function(){$(this).hasClass("active")||$(this).addClass("active").siblings().removeClass("active");$(".main-hd").siblings("#user-lowers").addClass("hide");$(".main-hd").siblings("#user-container").removeClass("hide")})},renderNoAcl:function(){var a=this,d=$(a.el+" #user-container");
d.find("#user-info-normal");var g=d.find("#user-info-normal");g.removeClass("hide");this.model.loadProfile(this.userId,function(b){var c=b.employee;g.find("#employee-username-div .controls p").html(c.username);g.find("#employee-email-div .controls p").html(c.email);c.sex&&g.find("#employee-sex-div .controls").find("."+c.sex).removeClass("hide");g.find("#employee-mobile-div .controls p").html(c.mobile);g.find("#employee-telephone-div .controls p").html(c.telephone);g.find("#rank-div .controls").find("."+
c.rank).removeClass("hide");g.find("#status-div .controls").find("."+c.status).removeClass("hide");g.find("#js_quit_transfer").attr("data-id",a.userId).attr("data-value",c.username);c.activeDate&&d.find("#activeDate-div .controls p").html(Date.create(c.activeDate).format("{yyyy}-{MM}-{dd}"));c.department&&g.find("#department-div .controls p").html(c.department.name);if(b.otherDepartments&&0<b.otherDepartments.length){g.find("#other-department-div").removeClass("hide");for(var e=0;e<b.otherDepartments.length;e++){var u=
b.otherDepartments[e];g.find("#other-department-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+u.name+"\x3cspan\x3e\x26nbsp;\x26nbsp;")}}c.position&&g.find("#position-div .controls p").html(c.position.name);if(b.otherPositions&&0<b.otherPositions.length)for(g.find("#other-position-div").removeClass("hide"),e=0;e<b.otherPositions.length;e++)u=b.otherPositions[e],g.find("#other-position-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+u.name+"\x3cspan\x3e\x26nbsp;\x26nbsp;");
c.superior&&g.find("#superior-div .controls p").html(c.superior.name);if(b.shareEntrys&&0<b.shareEntrys.length)for(g.find("#other-superior-div").removeClass("hide"),e=0;e<b.shareEntrys.length;e++)u=b.shareEntrys[e],g.find("#other-superior-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+u.name+"\x3cspan\x3e\x26nbsp;\x26nbsp;");c.assistant&&g.find("#assistant-div .controls p").html(c.assistant.name);c.avatar&&c.avatar.p1&&(avatarImgSrc="/base/download/"+c.avatar.p1,d.find("#upload-avatar").append('\x3cdiv class\x3d"user-photo"\x3e\x3cimg id\x3d"avatar-img" class\x3d"avatar-img" alt\x3d"\u5934\u50cf" src\x3d"'+
avatarImgSrc+'"\x3e\x3c/div\x3e'));if(b.openAccess&&0<b.openAccess.length)for(e=0;e<b.openAccess.length;e++)u=b.openAccess[e],g.find("#open-access-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+u.name+"\x3cspan\x3e\x26nbsp;");f.layout(a.el+" #user-container")})},renderHasAcl:function(a){var d=this,g=$(d.el+" #user-container");g.find("#user-info").removeClass("hide");var b=TEAMS.currentUser.id;this.model.loadProfile(this.userId,function(c){var e=c.employee,u=null==c.userImpl?{}:c.userImpl;
g.find("#user-info").data("user",e);g.find("#employee-id").val(e.id);g.find("#passwd-btn a").attr("userId",e.id);g.find("#employee-username").val(null==u.username?e.username:u.username);g.find("#employee-telephone").val(e.telephone);g.find("#employee-email").val(null==u.email?e.email:u.email);g.find("#employee-email-span").html(null==u.email?e.email:u.email);g.find("#employee-mobile").val(null==u.mobile?e.mobile:u.mobile);g.find("#employee-mobile-span").html(null==u.mobile?e.mobile:u.mobile);e.sex&&
g.find("input[value\x3d"+e.sex+"]").attr("checked","checked");g.find("#employee-status").html({normal:"\u5728\u804c",unavailable:"\u79bb\u804c",locked:"\u9501\u5b9a",unactive:"\u672a\u6fc0\u6d3b",temp:"\u4e34\u65f6\u8d26\u53f7",detached:"\u9000\u51fa\u56e2\u961f"}[e.status]);g.find("#js_quit_transfer").attr("data-id",d.userId).attr("data-value",null==u.username?e.username:u.username);"normal"==e.status&&g.find("#employee-unavailable").parent().show();"unavailable"==e.status&&(g.find("#passwd-btn").remove(),
g.find("#ROLE_ADMIN").parent().parent().parent().remove(),g.find("#employee-available").parent().show());if(a)g.find("#user-info-hasAcl").removeClass("hide"),g.find("#employee-rank").val(e.rank),e.department&&(g.find("#employee-department").html(f.template("base.department",e.department)),g.find("#otherDepartmentRow").removeClass("hide")),c.otherDepartments&&0<c.otherDepartments.length&&(g.find("#otherDepartmentRow").removeClass("hide"),d.createDepartmentsLink(c.otherDepartments)),e.position&&(g.find("#employee-position").html(f.template("base.position",
e.position)),g.find("#otherPositionRow").removeClass("hide")),c.otherPositions&&0<c.otherPositions.length&&(g.find("#otherPositionRow").removeClass("hide"),d.createPositionsLink(c.otherPositions)),e.superior&&(g.find("#employee-superior").html(f.template("base.user",e.superior)),g.find("#employee-superior a").attr("data-value",d.userId),g.find("#seniorRow").removeClass("hide")),c.shareEntrys&&0<c.shareEntrys.length&&(g.find("#seniorRow").removeClass("hide"),d.createShareEntryLink(c.shareEntrys)),
e.assistant&&(g.find("#assistant").html(f.template("base.user",e.assistant)),g.find("#assistant a").attr("data-value",d.userId)),c.openAccess&&0<c.openAccess.length&&d.createOpenAccessLink(c.openAccess),c=null==u.activeDate?e.activeDate:u.activeDate,g.find("#employee-activeDate").val(Date.create(c).format("{yyyy}-{MM}-{dd}"));else{g.find("#user-info-hasAcl").remove();var h=g.find("#user-info-noAcl");h.removeClass("hide");h.find("#rank-div .controls").find("."+e.rank).removeClass("hide");h.find("#status-div .controls").find("."+
e.status).removeClass("hide");e.department&&h.find("#department-div .controls p").html(e.department.name);if(c.otherDepartments&&0<c.otherDepartments.length){h.find("#other-department-div").removeClass("hide");for(var v=0;v<c.otherDepartments.length;v++){var x=c.otherDepartments[v];h.find("#other-department-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+x.name+"\x3cspan\x3e\x26nbsp;\x26nbsp;")}}e.position&&h.find("#position-div .controls p").html(e.position.name);if(c.otherPositions&&
0<c.otherPositions.length)for(h.find("#other-position-div").removeClass("hide"),v=0;v<c.otherPositions.length;v++)x=c.otherPositions[v],h.find("#other-position-div .controls").append("\x3cspan class\x3d'controls-text'\x3e"+x.name+"\x3cspan\x3e\x26nbsp;\x26nbsp;");e.superior&&h.find("#superior-div .controls p").html(e.superior.name);if(c.shareEntrys&&0<c.shareEntrys.length)for(h.find("#other-superior-div").removeClass("hide"),v=0;v<c.shareEntrys.length;v++)x=c.shareEntrys[v],h.find("#other-superior-div .controls").append("\x3cspan\x3e"+
x.name+"\x3cspan\x3e\x26nbsp;");e.assistant&&h.find("#assistant-div .controls p").html(e.assistant.name);e.activeDate&&h.find("#activeDate-div .controls p").html(Date.create(e.activeDate).format("{yyyy}-{MM}-{dd}"));if(c.openAccess&&0<c.openAccess.length)for(h.find("#openAccessRow").removeClass("hide"),v=0;v<c.openAccess.length;v++)x=c.openAccess[v],h="",h="#user-info-noAcl #openAccessRow #open-access",x='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"usercard-toggle" data-value\x3d"'+x.id+'" userId\x3d"'+
x.id+'"\x3e'+x.name+"\x3c/a\x3e\x3c/span\x3e",$("body").find(h).append(x)}null!=u&&g.find(".accounts_js").find("span").each(function(a){var d="";0==a?d=null==u.account?u.email:u.account:(d=u.mobile,null==d&&null!=u.account&&u.account!=u.email&&(d=u.email));$(this).html(d)});u&&u.email&&null!=u.email&&""!=u.email?(g.find("#employee-email").attr("readonly",!0),g.find("#employee-email").addClass("hide"),g.find("#employee-email-span").removeClass("hide")):(g.find("#employee-email-span").addClass("hide"),
g.find("#employee-email").removeClass("hide"));u&&u.mobile&&null!=u.mobile&&""!=u.mobile?(g.find("#employee-mobile").attr("readonly",!0),g.find("#employee-mobile").addClass("hide"),g.find("#employee-mobile-span").removeClass("hide")):(g.find("#employee-mobile-span").addClass("hide"),g.find("#employee-mobile").removeClass("hide"));b==d.userId?(g.find("#employee-unavailable").attr("propertyName","quit").html("\u9000\u51fa\u56e2\u961f"),g.find(".binding_js").show(),g.find(".remove_js ").hide(),g.find(".emp-safe-msg").removeClass("hide"),
null!=u.email&&""!=u.email&&(g.find("#changeEmail").html("[\u66f4\u6362\u7ed1\u5b9a]"),g.find("#changeEmail").attr("propertyName","againBindingEmail"),g.find(".emp-safe-msg").addClass("hide")),null!=u.mobile&&""!=u.mobile&&(g.find("#changeMobile").html("[\u66f4\u6362\u7ed1\u5b9a]"),g.find("#changeMobile").attr("propertyName","againBindingMobile"),g.find(".emp-safe-msg").addClass("hide")),null!=u.email&&""!=u.email&&null!=u.mobile&&""!=u.mobile&&g.find(".remove_js").show(),1==u.isThirdAccount?g.find("#btn-resetPwd").removeClass("hide"):
g.find("#btn-changePwd").removeClass("hide")):(g.find(".binding_js").remove(),a&&g.find("#btn-resetPwd").removeClass("hide"),e.avatar&&e.avatar.p1&&(avatarImgSrc="/base/download/"+e.avatar.p1,g.find("#upload-avatar").append('\x3cdiv class\x3d"user-photo"\x3e\x3cimg id\x3d"avatar-img" class\x3d"avatar-img" alt\x3d"\u5934\u50cf" src\x3d"'+avatarImgSrc+'"\x3e\x3c/div\x3e')));g.find("#ROLE_ADMIN").prop("checked",e.admin);f.layout(d.el+" #user-container")});d.delegateHasAclEvents()},saveEmployee:function(d){if(!a.validate(d))return!1;
var g=$("#user-info").data("user"),b=$.trim(d.val()),c=d.attr("id"),e=d.attr("name"),s="";e&&(s=e.replace("employee.",""));d={};d["employee.id"]=$("#employee-id").val();d.propertyName=s;d[e]=b;if("typeahead-department"==c)d["employee.department"]=$("#employee-department a").attr("data-value"),s=d.propertyName="department";else if("typeahead-superior"==c)d["employee.superior.id"]=$("#employee-superior a").attr("userid"),s=d.propertyName="superior";else if("employee-activeDate"==c)g=Date.create(b).format("{yyyy}-{MM}-{dd}"),
d["employee.activeDate"]=g,s=d.propertyName="activeDate";else if("typeahead-position"==c)d["employee.position"]=$("#employee-position a").attr("data-value"),s=d.propertyName="position";else if($.trim(g[s])==$.trim(d[e]))return;"employee-username"==c&&""==b?f.notify("\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01"):this.model.saveEmployeeProperty(d,function(a){if(a.message)return"\u56e2\u961f\u5df2\u6709\u4eba\u4f7f\u7528\u8be5\u624b\u673a\uff01"==a.message?($("#employee-mobile-repeat").fadeIn(300),$("#employee-mobile-repeat").fadeOut(3E3)):
"\u56e2\u961f\u5df2\u6709\u4eba\u4f7f\u7528\u8be5\u90ae\u7bb1\uff01"==a.message?($("#employee-email-repeat").fadeIn(300),$("#employee-email-repeat").fadeOut(3E3)):"superior"==s?a.employee.superior?($("#employee-superior").html(f.template("base.user",a.employee.superior)),$("#employee-superior").find("a").attr("data-value",this.userId)):$("#employee-superior a").remove():"department"==s?a.employee.department?($("#employee-department").html(f.template("base.department",a.employee.department)),$("#employee-department").find("a").attr("data-value",
this.userId)):$("#employee-department a").remove():"position"==s&&(a.employee.position?($("#employee-position").html(f.template("base.position",a.employee.position)),$("#employee-position").find("a").attr("data-value",this.userId)):$("#employee-position a").remove()),f.notify(a.message);"position"==s&&(a.employee.position?($("#employee-position").html(f.template("base.position",a.employee.position)),$("#employee-position").find("a").attr("data-value",this.userId)):$("#employee-position a").remove());
$("#user-info").data("user",a.employee);a.employee.superior&&$("#seniorRow").is(":hidden")&&$("#seniorRow").removeClass("hide");TEAMS.currentUser.department.name=a.employee.department.name;TEAMS.currentUser.department.id=a.employee.department.id;f.notify("\u4fdd\u5b58\u6210\u529f")})},resignation:function(a){var d=this;container=$(d.el+" #user-container");var g=container.find("#employee-username").val();f.confirm("\u786e\u5b9a\u8981\u5c06\u3010"+g+"\u3011\u79bb\u804c\u5417\uff1f",function(g){g&&d.model.resignation(d.userId,
function(d){d.message?f.notify(d.message):"unavailable"==d.employee.status&&(f.notify("\u64cd\u4f5c\u6210\u529f"),container.find("#employee-status").html("\u79bb\u804c"),container.find("#ROLE_ADMIN").parent().parent().parent().hide(),container.find("#passwd-btn").hide(),a.parent().hide(),container.find("#employee-available").parent().show())})})},quitCompany:function(){var a=this;f.confirm("\u9000\u51fa\u60a8\u5c06\u4e3a\u65e0\u56e2\u961f\u72b6\u6001\uff0c\u786e\u5b9a\u8981\u9000\u51fa\u56e2\u961f\u5417\uff1f",
function(d){d&&a.model.quitCompany(null,function(a){a.message?f.notify(a.message):"unavailable"==a.employee.status&&(window.location.href=TEAMS.passportUrl+"/logout")})})},rehire:function(a){var d=this;container=$(d.el+" #user-container");var g=container.find("#employee-username").val();f.confirm("\u786e\u5b9a\u8981\u5c06\u3010"+g+"\u3011\u8fd4\u8058\u5417\uff1f",function(g){g&&d.model.rehire(d.userId,function(d){f.notify(d.employee.status);d.message?f.notify(d.message):"normal"==d.employee.status&&
(f.notify("\u64cd\u4f5c\u6210\u529f"),container.find("#employee-status").html("\u5728\u804c"),container.find("#ROLE_ADMIN").removeAttr("checked"),container.find("#ROLE_ADMIN").parent().parent().parent().show(),container.find("#passwd-btn").show(),a.parent().hide(),container.find("#employee-unavailable").parent().show())})})},saveOtherSenior:function(a){var d=this,g=this.model,b=!1,c="";if(a&&!$.isEmptyObject(a)){var e="";a=$.isArray(a)?a:[a];for(var u=[],h=0;h<a.length;h++){var v=a[h];d.hasUser(v.id,
$("body").find("#business-employee-superior"))||(d.hasUser(v.id,$("body").find("#employee-superior"))?(b=!0,c+=v.name+","):(e+=v.id+",",u.push({sid:v.id,name:v.name})))}b&&f.notify(c.substring(0,c.length-1)+"\u5df2\u7ecf\u5b58\u5728\u4e8e\u4e0a\u7ea7");e=e.substring(0,e.length-1);g.sids=e;g.subordinateUserId=d.userId;u&&0<u.length&&g.saveOtherSenior(function(a){a.message?f.notify(a.message):(d.createShareEntryLink(a.shareEntrys),f.notify("\u6dfb\u52a0\u5176\u4ed6\u4e0a\u7ea7\u6210\u529f"))})}},saveEDLink:function(a){var d=
this,g=this.model,b=!1,c="",e="",u=!1;if(a&&!$.isEmptyObject(a)){var h="";a=$.isArray(a)?a:[a];for(var v=0;v<a.length;v++){var x=a[v];$("#departmentRow .entity-item a").attr("data-value")==x.id?(b=!0,c+=x.name+","):d.hasOtherDep(x)?(u=!0,e+=x.name+","):h+=x.id+","}b&&f.notify(c.substring(0,c.length-1)+" \u5df2\u7ecf\u5b58\u5728\u4e8e\u90e8\u95e8");u&&f.notify(e.substring(0,e.length-1)+" \u5df2\u7ecf\u5b58\u5728\u4e8e\u517c\u804c\u90e8\u95e8!");g.parentId=d.userId;g.sids=h;""!=h&&g.saveEDLink(function(g){if(g.message)f.notify(g.message);
else{d.createDepartmentsLink(g.otherDepartments);for(g=0;g<a.length;g++);f.notify("\u6dfb\u52a0\u517c\u804c\u90e8\u95e8\u6210\u529f\uff01")}})}},saveEPLink:function(a){var d=this,g=this.model,b=!1,c="",e="",u=!1;if(a&&!$.isEmptyObject(a)){var h="";a=$.isArray(a)?a:[a];for(var v=0;v<a.length;v++){var x=a[v];$("#positionRow .entity-item a").attr("data-value")==x.id?(b=!0,c+=x.name+","):d.hasOtherPosn(x)?(u=!0,e+=x.name+","):h+=x.id+","}b&&f.notify(c.substring(0,c.length-1)+" \u5df2\u7ecf\u5b58\u5728\u4e8e\u5c97\u4f4d");
u&&f.notify(e.substring(0,e.length-1)+" \u5df2\u7ecf\u5b58\u5728\u4e8e\u517c\u804c\u5c97\u4f4d!");g.parentId=d.userId;g.sids=h;""!=h&&g.saveEPLink(function(a){a.message?f.notify(a.message):(d.createPositionsLink(a.otherPositions),f.notify("\u6dfb\u52a0\u517c\u804c\u5c97\u4f4d\u6210\u529f\uff01"))})}},updateOtherDep:function(a){var d=this,g=this.model;g.parentId=d.userId;g.sids=a.id;g.updateOtherDep(function(a){d.saveEmployee($(d.el+" #user-container #typeahead-department"))})},updatePosition:function(a){var d=
this,g=this.model;g.parentId=d.userId;g.sids=a.id;g.updateOtherPson(function(a){d.saveEmployee($(d.el+" #user-container #typeahead-position"));$("#user-container otherPositionRow").removeClass("hide")})},createDepartmentsLink:function(a){if(a)for(var d=0;d<a.length;d++){var g=a[d],g='\x3cspan class\x3d"entity-item"\x3e \x3ca data-value\x3d"'+g.id+'"\x3e'+g.name+"\x3c/a\x3e\x3c/span\x3e";$("body").find("#other-employee-department").append(g)}},createPositionsLink:function(a){if(a)for(var d=0;d<a.length;d++){var g=
a[d],g='\x3cspan class\x3d"entity-item"\x3e \x3ca data-value\x3d"'+g.id+'"\x3e'+g.name+"\x3c/a\x3e\x3c/span\x3e";$("body").find("#other-employee-position").append(g)}},createShareEntryLink:function(a){if(a)for(var d=0;d<a.length;d++){var g=a[d],b="",b="#business-employee-superior",g='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"usercard-toggle" data-value\x3d"'+g.id+'" userId\x3d"'+g.id+'"\x3e'+g.name+"\x3c/a\x3e\x3c/span\x3e";$("body").find(b).append(g)}},hasUser:function(a,d){var g=!1;d.find("a").each(function(){$(this).attr("userid")==
a&&(g=!0)});return g},hasOtherPosition:function(){var a=!1;0<$("#other-employee-position a").length&&(a=!0);return a},hasSenior:function(){var a=!1,d=0,g=0;$("#employee-superior").find("a").each(function(){d++});$("#business-employee-superior").find("a").each(function(){g++});0<d+g&&(a=!0);return a},hasPosition:function(a){a=!1;var d=0,g=0;$("#employee-position").find("a").each(function(){d++});$("#other-employee-position").find("a").each(function(){g++});0<d+g&&(a=!0);return a},hasOtherDep:function(a){var d=
!1;$("#other-employee-department").find("a").each(function(){$(this).attr("data-value")==a.id&&(d=!0)});return d},hasOtherPosn:function(a){var d=!1;$("#other-employee-position").find("a").each(function(){$(this).attr("data-value")==a.id&&(d=!0)});return d},saveAssistant:function(a){var d=this.model;d.sids=this.userId;d.assistantId=a.id;d.saveAssistant(function(a){a.message?f.notify(a.message):($("#assistant").html(f.template("base.user",a.employee.assistant)),$("#assistant a").attr("data-value",a.employee.assistant.id),
f.notify("\u6dfb\u52a0\u52a9\u7406\u6210\u529f"))})},saveOpenAccess:function(a){var d=this,g=this.model;if(a&&!$.isEmptyObject(a)){var b="";a=$.isArray(a)?a:[a];for(var c=[],e=0;e<a.length;e++){var u=a[e];d.hasUser(u.id,$("body").find("#open-access"))||(b+=u.id+",",c.push({sid:u.id,name:u.name}))}b=b.substring(0,b.length-1);g.sids=b;g.openAccessId=d.userId;c&&0<c.length&&g.saveOpenAccess(function(a){a.message?f.notify(a.message):(f.notify("\u6743\u9650\u5f00\u653e\u6210\u529f"),d.createOpenAccessLink(a.openAccess))})}},
createOpenAccessLink:function(a){if(a)for(var d=0;d<a.length;d++){var g=a[d],b="",b="#open-access",g='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"usercard-toggle" data-value\x3d"'+g.id+'" userId\x3d"'+g.id+'"\x3e'+g.name+"\x3c/a\x3e\x3c/span\x3e";$("body").find(b).append(g)}},remove:function(){var a=$(this.el);a.off(".profile");a.empty()}});m.exports=h});
define("teams/profile/profilepage","teams/core/page teams/profile/profileview teams/base/avatarview teams/base/servicenumberview teams/base/custmenuview teams/base/portalsettingview teams/base/applytenantsview".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/profile/profileview"),e=h("teams/base/avatarview"),c=h("teams/base/servicenumberview"),b=h("teams/base/custmenuview"),a=h("teams/base/portalsettingview"),d=h("teams/base/applytenantsview");h=q.extend({initialize:function(a){this.userId=
a.userId||TEAMS.currentUser.id;this.options=a;this.el="#mainContainer";this.pageKey=this.type=a.type||"profile";this.template="profile.page";this.isSelf=this.userId==TEAMS.currentUser.id?!0:!1},render:function(){this.initLayout({userId:this.userId,type:this.type,isSelf:this.isSelf});$(this.el).find(".aside-nav li.j_"+this.type).addClass("active");switch(this.type){case "profile":this.mainView=new f({container:this.el+" #profileContainer .j_main .j_con",userId:this.options.userId});this.mainView.render();
$(this.el+" #profileContainer .j_main .j_help").removeClass("hide-im");break;case "avatar":this.mainView=new e({container:this.el+" #profileContainer .j_main .j_con",userId:this.userId});this.mainView.render();$(this.el+" #profileContainer .j_main .j_help").addClass("hide-im");break;case "serviceNumber":this.mainView=new c({container:this.el+" #profileContainer .j_main .j_con",userId:this.userId});this.mainView.render();$(this.el+" #profileContainer .j_main .j_help").addClass("hide-im");break;case "custmenu":this.mainView=
new b({container:this.el+" #profileContainer .j_main .j_con",userId:this.userId});this.mainView.render();$(this.el+" #profileContainer .j_main .j_help").hide();break;case "protalsetting":this.mainView=new a({container:this.el+" #profileContainer .j_main .j_con",userId:this.userId});this.mainView.render();$(this.el+" #profileContainer .j_main .j_help").addClass("hide-im");break;case "applytenants":this.mainView=new d({container:this.el+" #profileContainer .j_main .j_con",userId:this.userId}),this.mainView.render(),
$(this.el+" #profileContainer .j_main .j_help").addClass("hide-im")}}});m.exports=h});
define("teams/profile/quittransferview","teams/utils teams/component/typeahead teams/models/profilemodel teams/workflow/requestmodel teams/task/mytaskmodel teams/mainline/mainlinemodel teams/workflow/flowsequencemodel teams/workflow/flowview teams/task/taskview teams/mainline/mainlineview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/models/profilemodel"),b=h("teams/workflow/requestmodel"),a=h("teams/task/mytaskmodel"),d=h("teams/mainline/mainlinemodel");
h("teams/workflow/flowsequencemodel");var g=h("teams/workflow/flowview"),l=h("teams/task/taskview"),n=h("teams/mainline/mainlineview");h=Backbone.View.extend({initialize:function(g){this.el=g.container||"#mainContainer";this.userId=g.userId;this.userName=g.userName;this.callback=g.callback;this.requestModel=new b(g);this.mytaskModel=new a(g);this.mainlineModel=new d(g);this.profileModel=new c(g);$(this.el).html(f.template("base.quittransfer"));this.param={};this.module="";this.entityDetailView},delegateEvents:function(){var a=
this,d=$(a.el);d.on("removeEntity.QuitTransfer",".entity-container",function(a){$(this).parents(".js_employee").hasClass("js_all_employee")?(d.find(".entity-container").each(function(){$(this).html("")}),d.find(".control-btn").each(function(){$(this).show()})):$(this).parents(".js_employee").find(".control-btn").show()});d.on("click.QuitTransfer",".js_todo_flow",function(d){d={state:"quitTransfer",filter:{flowFilter:"todo",type:"mine"},order:{property:"default"}};d.userId=a.userId;d.pageSize=10;a.module=
"workflow";a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer",".js_done_flow",function(d){d={state:"quitTransfer",filter:{flowFilter:"finished",type:"mine"},order:{property:"default"}};d.userId=a.userId;d.pageSize=10;a.module="workflow";a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer",".js_todo_task",function(d){d={filter:{taskStatus:"todo",type:"mine"}};d.userId=a.userId;d.pageSize=10;a.module="task";a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer",
".js_done_task",function(d){d={filter:{taskStatus:"todo",type:"mineFinished"}};d.userId=a.userId;d.pageSize=10;a.module="task";a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer",".js_todo_mainline",function(d){d={filter:{status:"open",type:"mine"}};d.userId=a.userId;d.pageSize=10;a.module="mainline";a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer",".js_done_mainline",function(d){d={filter:{type:"mineFinished"}};d.userId=a.userId;d.pageSize=10;a.module="mainline";
a.param=d;a.queryEntityData(a.module,1)});d.on("click.QuitTransfer","#more_data",function(d){d=$(this).data("page");a.queryEntityData(a.module,d.nextPage)});d.on("click.QuitTransfer",".j_entity_reply",function(a){d.find(".quittransferContainer").removeClass("hide");d.find(".entityContainer").addClass("hide");d.find(".js_entityBobyScr .js_entity_list").html("")});d.on("click.QuitTransfer",".js_entiyDetail_reply",function(a){d.find(".entityContainer").removeClass("hide");d.find(".entityDetailContainer").addClass("hide");
d.find(".entityDetailContainer").html("")});d.on("click.QuitTransfer",".js_confirm",function(g){g={};var b=[],l=!1;d.find(".js_quit_transfer").removeClass("hide");$(this).removeClass(".js_confirm");d.find(".js_quitTransfer_content .js_line").each(function(){if($(this).find(".js_check").is(":checked")){var a={};a.module=$(this).find(".js_module").attr("module");var d={};"workflow"==a.module?d.flowFilter=$(this).find(".js_type").attr("flowFilter"):"task"==a.module?d.type=$(this).find(".js_type").attr("type"):
"mainline"==a.module&&(d.status=$(this).find(".js_type").attr("status"),d.type=$(this).find(".js_type").attr("type"));a.filter=d;d={};d.id=$(this).find(".entity-container span a").attr("id");if(!d.id)return l=!0;a.employee=d;b.push(a)}});0< !b.length?(f.notify("\u8bf7\u9009\u62e9\u4ea4\u63a5\u9879"),d.find(".js_quit_transfer").addClass("hide"),$(this).addClass(".js_confirm")):l?(f.notify("\u8bf7\u9009\u62e9\u4ea4\u63a5\u4eba"),d.find(".js_quit_transfer").addClass("hide"),$(this).addClass(".js_confirm")):
(g={},g.quitTransfers=b,g.employeeId=a.userId,a.profileModel.quitTransfer(JSON.stringify(g),function(g){g.flowSteps&&0<g.flowSteps.length?(f.notify(g.flowSteps.length+"\u6761\u5ba1\u6279\u7531\u4e8e\u5f53\u524d\u8282\u70b9\u6709\u88ab\u4ea4\u63a5\u4eba\uff0c\u4ea4\u63a5\u5931\u8d25\u3002"),d.find(".js_quit_transfer").addClass("hide"),$(this).addClass(".js_confirm")):(f.notify("\u4ea4\u63a5\u6210\u529f"),d.find(".js_quit_transfer").addClass("hide"),$(this).addClass(".js_confirm"),a.callback())}))});
d.on("click.QuitTransfer",".js_entity",function(b){b=a.module;var c=$(this).attr("data-id");"workflow"==b?a.entityDetailView=new g({requestId:c,container:".entityDetailContainer",backLastPage:!0}):"task"==b?a.entityDetailView=new l({id:c,container:".entityDetailContainer",backLastPage:!0}):"mainline"==b&&(a.entityDetailView=new n({id:c,container:".entityDetailContainer",backLastPage:!0}));a.entityDetailView.render();d.find(".entityContainer").addClass("hide");d.find(".entityDetailContainer").removeClass("hide")})},
render:function(){var a=this,d=$(a.el);d.find(".js_quitUser").text(a.userName);d.find(".js_employee").each(function(){var d="j_employee_"+(new Backbone.View).cid;$(this).addClass(d);a.userSelect(d)});f.layout(".js_quitTransfer_content")},queryEntityData:function(a,d){var g=this,b=$(g.el);g.param.pageNo=d;b.find(".quittransferContainer").addClass("hide");b.find(".entityContainer").removeClass("hide");"workflow"==a?g.requestModel.search(JSON.stringify(g.param),function(a){g.renderEntityLine(a)}):"task"==
a?g.mytaskModel.search(JSON.stringify(g.param),function(a){g.renderEntityLine(a)}):"mainline"==a&&g.mainlineModel.search(JSON.stringify(g.param),function(a){g.renderEntityLine(a)})},renderEntityLine:function(a){var d=$(this.el);a=a.page;var g=a.result,b=d.find(".js_entity_list"),l=d.find(".entity_list_tit_name"),c=d.find(".entity_list_tit_person");"task"==this.module?(l.text("\u4efb\u52a1\u540d\u5b57"),c.text("\u8d1f\u8d23\u4eba")):"mainline"==this.module?(l.text("\u9879\u76ee\u540d\u5b57"),c.text("\u8d1f\u8d23\u4eba")):
(l.text("\u5ba1\u6279\u540d\u5b57"),c.text("\u7533\u8bf7\u4eba"));1==a.pageNo&&(b.empty(),null==g||0==g.length?d.find(".entityContainer .j_empty").show():d.find(".entityContainer .j_empty").hide());a&&a.hasNext?($(this.el+" #more_data").show(),$(this.el+" #more_data").data("page",a)):$(this.el+" #more_data").hide();if(null!=g)for(l=0;l<g.length;l++){var c=d.find(".entityListClone li").clone(),n=g[l];c.find(".js_sort").text(l+10*(a.pageNo-1)+1);c.find(".js_entity").text(n.name).addClass("name");c.find(".js_entity").text(n.name).attr("data-module",
this.module).attr("data-id",n.id);"task"==this.module?c.find(".js_entity_creator").text(n.manager.name):"mainline"==this.module?c.find(".js_entity_creator").text(n.manager.name):c.find(".js_entity_creator").text(n.creator.name);b.append(c)}f.layout(this.el+" .js_entityBobyScr")},userSelect:function(a){var d=this,g=$(d.el);e({el:d.el+" ."+a+" .control-input",callback:function(b){if(b&&!$.isEmptyObject(b)){$.isArray(b)||(b=[b]);for(var l=0,c=b.length;l<c;l++)if(b[l].id!=d.userId){var n='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+
b[l].id+'" class\x3d"usercard-toggle" userid\x3d"'+b[l].id+'"\x3e'+b[l].name+"\x3c/a\x3e\x3c/span\x3e";if(g.find("."+a).hasClass("js_all_employee"))g.find(".entity-container").each(function(){$(this).html("");$(this).append(n)}),g.find(".control-btn").each(function(){$(this).hide()});else{var e=g.find("."+a+" .entity-container");g.find("."+a+" .control-btn").hide();e.append(n)}}}}})},remove:function(){var a=$(this.el);a.off(".QuitTransfer");a.empty();this.entityDetailView&&(this.entityDetailView.remove(),
this.entityDetailView=null)}});m.exports=h});
define("teams/wechat/chatrightview",["teams/utils","teams/wechat/chatmodel","teams/org/usermodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/wechat/chatmodel"),c=h("teams/org/usermodel");h=Backbone.View.extend({channelName:"",initialize:function(b){this.model=new e;this.UserModel=new c;this.el=b.el||"#main .j_feeds";this.userId=TEAMS.currentUser.id;this.channelId=b.channelId||null;this.chatType=b.chatType||null},delegateEvents:function(){var b=this;$("body").off("createChannel.websocket").on("createChannel.websocket",
function(a,d){void 0!=d.channel&&"createChannel"==d.operateType&&b.websocket_createChannel(d)});$("body").off("quitChannel.websocket").on("quitChannel.websocket",function(a,d){void 0!=d.channel&&"quitChannel"==d.operateType&&b.websocket_quitChannel(d)})},websocket_createChannel:function(b){this.addChannel(b)},websocket_quitChannel:function(b){var a=b.channel;-1<$.inArray(TEAMS.currentUser.id.toString(),b.handleIds)?($("#message-recently-container").find("#"+a.id).remove(),$("#channel-list-wrap").find("#"+
a.id).remove(),a.id==this.channelId&&$("#channel-member-wrap #channel-members").remove()):($("#channel-list-wrap").find("#"+a.id).remove(),this.addChannel(b),a.id==this.channelId&&$.each(b.handleIds,function(){$("#channel-member-wrap").find("#"+this).remove()}))},addChannel:function(b){b=b.channel;var a=$(this.el).find(".channel-link-clone #channel-link-clone").clone();a.attr("id",b.id);b.name?a.find(".avatar").append("\x3ca  class\x3d'router' href\x3d'/messages/wechat/channel/"+b.id+"'\x3e"+b.name+
"\x3c/a\x3e  "):a.find(".avatar").append("\x3ca  class\x3d'router' href\x3d'/messages/wechat/channel/"+b.id+"'\x3e\u672a\u547d\u540d\x3c/a\x3e  ");var d=this.viewMember(b.member);30<d.length?(a.attr("title",d),a.find(".avatar").append("\x26nbsp;\x26nbsp;\x26nbsp;\x3cspan class\x3d'channel-members hide'\x3e"+d.substring(0,30)+"...\x3c/span\x3e")):a.find(".avatar").append("\x26nbsp;\x26nbsp;\x26nbsp;\x3cspan class\x3d'channel-members hide'\x3e"+d+"\x3c/span\x3e");a.find(".close").attr("data-entity",
b.id);a.find("#btn-quit").attr("data-entity",b.id);a.attr("id",b.id);a.removeClass("hide");$("#channel-links").prepend(a);this.addEvents()},render:function(){$(this.el).html(f.template("chat.history"));f.layout("#chat-right-wrap");"channel"==this.chatType?(this.historyLoad=!0,$(".right-panel-toggle #channel-member").parent().addClass("active"),this.loadChannelMembers()):"unread"==this.chatType?($("#channel-member").remove(),$("#history").remove(),$("#recent-contact").parent().addClass("active"),$(".pagination").addClass("hide"),
$(".btn-back").addClass("hide"),$(".right-panel-toggle #recent-contact").parent().addClass("active"),this.loadRecentMembers()):($("#channel-member").remove(),$(".right-panel-toggle #history").parent().addClass("active"),$("#chat-right-wrap").attr("marginbottom",100),this.loadData(1));this.htmlEvents()},loadChannelMembers:function(){var b=this,a=this.model;"channel"==b.chatType&&(a.findMemberByChannel(b.channelId,function(a){$("#channel-members").html("");a=a.channel.member;for(var g=0;g<a.length;g++)b.addMember(a[g])}),
$("#channel-member").removeClass("hide"),$("#channel-member").addClass("active"),$("#history").removeClass("active"),$("#chat-history-wrap").addClass("hide"),$("#channel-member-wrap").removeClass("hide"),$("#message-recently-container").addClass("hide"),$("#member-list-wrap").addClass("hide"),$("#channel-list-wrap").addClass("hide"),$(".pagination").addClass("hide"))},loadRecentMembers:function(){var b=this;this.model.loadRecentMembers(TEAMS.currentUser.id,function(a){$("#user-links").html("");if(a=
a.recentChats)for(var d=a.length-1;0<=d;d--){var g=a[d],l=$(b.el).find("#user-link-clone").clone().removeAttr("id");if(g.channel)l.find("img").attr("src","images/group.png"),g.channel.name?l.find(".receiver-name").html("\x3ca class\x3d'router' href\x3d'/messages/wechat/channel/"+g.channel.id+"'\x3e"+g.channel.name+"\x3c/a\x3e  "):l.find(".receiver-name").html("\x3ca class\x3d'router' href\x3d'/messages/wechat/channel/"+g.channel.id+"'\x3e\u672a\u547d\u540d \x3c/a\x3e "),l.attr("id",g.channel.id);
else{if(!g.receiver||!g.sender)continue;var c=g.receiver;g.receiver.id==TEAMS.currentUser.id&&(c=g.sender);null!=c.avatar&&null!=c.avatar.p3&&l.find("img").attr("src","/base/download/"+c.avatar.p3);1E4==c.id&&l.find("img").attr("src","images/service.png");l.find(".receiver-name").html("\x3ca  class\x3d'router' href\x3d'/messages/wechat/"+c.id+"'\x3e"+c.username);l.attr("id",g.id)}g.message?(c=g.message.replace(/<br\/>/g," "),30<c.length?l.find(".last-message").html(c.substring(0,30)+"..."):
l.find(".last-message").html(c)):g.chatImage?l.find(".last-message").html("[\u56fe\u7247]"):g.voice?l.find(".last-message").html("[\u8bed\u97f3]"):g.attachment&&l.find(".last-message").html("[\u9644\u4ef6]");Date.create(g.postTime).is("today")?l.find(".create-time").html(Date.create(g.postTime).format("{HH}:{mm}:{ss}")):l.find(".create-time").html(Date.create(g.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));l.removeClass("hide");$("#user-links").append(l)}});$("#chat-history-wrap").addClass("hide");
$("#channel-member-wrap").addClass("hide");$("#message-recently-container").removeClass("hide");$("#member-list-wrap").addClass("hide");$("#channel-list-wrap").addClass("hide");$(".pagination").addClass("hide")},loadAllChatMembers:function(){var b=this;this.model.loadAllChatMembers(1,function(a){b.renderAllEmployee(a);b.UserModel.getServiceAccount(function(a){a=a.employee;var g=$("#member-list-wrap .employee-container"),l=$(b.el).find("#members-pinyin div").clone();l.attr("id","list-history-service");
l.find("span").html("");var c=$(b.el).find("#employee-clone").clone();c.attr("id",a.id);c.find("a.name").attr("href","/messages/wechat/"+a.id).attr("title",a.username).html(a.username).addClass("router");c.find("span.email").attr("title",a.email).html(a.email);c.find("a.avatar img").attr("src","images/service.png");l.find(".users-list").append(c);g.prepend(l)})})},loadAllChannel:function(){var b=this;this.model.loadAllChannel(TEAMS.currentUser.id,function(a){$("#channel-links").html("");
a=a.allChannel;for(var d=0;d<a.length;d++){var g=a[d],l=$(b.el).find(".channel-link-clone #channel-link-clone").clone();l.attr("id",g.id);g.name?l.find(".avatar").append("\x3ca  class\x3d'router' href\x3d'/messages/wechat/channel/"+g.id+"'\x3e"+g.name+"\x3c/a\x3e  "):l.find(".avatar").append("\x3ca  class\x3d'router' href\x3d'/messages/wechat/channel/"+g.id+"'\x3e\u672a\u547d\u540d\x3c/a\x3e  ");var c=b.viewMember(g.member);30<c.length?(l.attr("title",c),l.find(".avatar").append("\x26nbsp;\x26nbsp;\x26nbsp;\x3cspan class\x3d'channel-members hide'\x3e"+
c.substring(0,30)+"...\x3c/span\x3e")):l.find(".avatar").append("\x26nbsp;\x26nbsp;\x26nbsp;\x3cspan class\x3d'channel-members hide'\x3e"+c+"\x3c/span\x3e");l.find(".close").attr("data-entity",g.id);l.find("#btn-quit").attr("data-entity",g.id);l.attr("id",g.id);l.removeClass("hide");$("#channel-links").append(l)}0==a.length&&$("#channel-links").append("\x3cspan style\x3d'padding:10px'\x3e\u6682\u65e0\u7fa4\u7ec4\x3c/span\x3e");b.addEvents()})},loadData:function(b){var a=this,d=this.model;b&&(d.pageNo=
b);d.loadhistory(a.userId,TEAMS.currentUser.id,a.channelId,a.chatType,function(d){var b=d.page;d=b.result;$("#feedsContainer .j_main .j_feeds #chat-history").empty();for(var c=0;c<d.length;c++)a.createChatHistoryBox(d[c],$("#feedsContainer .j_main .j_feeds #chat-history"));0>=b.totalCount?($(a.el).find(".page-last").unbind("click"),$(a.el).find(".page-buttons").addClass("disabled"),$(a.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55"),"channel"==a.chatType&&$(a.el).find("#chat-history").html("\x3cp id\x3d'no-message' style\x3d'text-align: center;padding-top:100px;'\x3e\u8fd8\u6ca1\u6709\u804a\u5929\u8bb0\u5f55\x3c/p\x3e")):
($(a.el).find(".pagination").find(".active a").html("\u7b2c"+b.pageNo+"/"+b.totalPages+"\u9875"),1==b.totalPages?$(a.el).find(".page-buttons").addClass("disabled"):($(a.el).find(".page-last").click(function(){$(this).hasClass("disabled")||a.loadData(b.totalPages)}),1==b.pageNo&&($(a.el).find(".page-next").removeClass("disabled"),$(a.el).find(".page-last").removeClass("disabled"),$(a.el).find(".page-first").addClass("disabled"),$(a.el).find(".page-pre").addClass("disabled")),b.pageNo==b.totalPages&&
($(a.el).find(".page-first").removeClass("disabled"),$(a.el).find(".page-pre").removeClass("disabled"),$(a.el).find(".page-next").addClass("disabled"),$(a.el).find(".page-last").addClass("disabled")),1!=b.pageNo&&b.pageNo!=b.totalPages&&($(a.el).find(".page-first").removeClass("disabled"),$(a.el).find(".page-pre").removeClass("disabled"),$(a.el).find(".page-next").removeClass("disabled"),$(a.el).find(".page-last").removeClass("disabled"))))});1==b&&a.feedPageCallback&&a.feedPageCallback()},createChatHistoryBox:function(b,
a){var d=$("#chat-history-clone").clone(!0);d.attr("id",b.id);d.find("a").html(b.sender.username);d.find("span").html(Date.create(b.postTime).format("{HH}:{mm}:{ss}"));if(b.link){var g=b.message;switch(b.module){case "task":g="[\u4efb\u52a1]"+g;break;case "document":g="[\u6587\u6863]"+g;break;case "customer":g="[\u5ba2\u6237]"+g;break;case "workflow":g="[\u5ba1\u6279]"+g;break;case "mainline":g="[\u9879\u76ee]"+g}d.find("div").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+b.link+"' data-module\x3d'"+
b.module+"' data-id\x3d'"+b.link+"'\x3e"+g+"\x3c/a\x3e")}else b.message?d.find("div").html(f.initMessage(b.message)):b.chatImage?(d.find("div").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+b.chatImage.imageUrl+"' data-artZoom-source\x3d'/base/download/"+b.chatImage.imageUrl+"' src\x3d'/base/download/"+b.chatImage.smallUrl+"' \x3e"),d.find("div .artZoom").artZoom()):b.voice?d.find("div").html("\x3cspan\x3e\x3ca data-value\x3d"+b.voice.id+"\x3e"+b.voice.name+"\x3c/a\x3e"):
b.attachment&&d.find("div").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+b.attachment.id+"?download\x3dtrue' data-value\x3d"+b.attachment.id+"\x3e"+b.attachment.name+"\x3c/a\x3e");d.removeClass("hide");g=Date.create(b.postTime).format("{yyyy}-{MM}-{dd}");0>=a.find("#"+g).size()&&this.createChatHistoryDayBox(g,a);a.find("#"+g).find(".history-list-div").append(d)},createChatHistoryDayBox:function(b,a){var d=$("#chat-history-daybox").clone(!0);d.attr("id",b);d.find(".day").html(b);d.removeClass("hide");
a.append(d)},createChatHistoryDayBoxRight:function(b,a){var d=$("#chat-history-daybox").clone(!0);d.attr("id",b);d.find(".day").html(b);d.removeClass("hide");a.prepend(d)},createChatHistoryBoxRight:function(b,a){0<$("#chat-history #no-message").size()&&$("#chat-history #no-message").remove();var d=$("#chat-history-clone").clone(!0);d.attr("id",b.id);d.find("a").html(b.sender.username);d.find("span").html(Date.create(b.postTime).format("{HH}:{mm}:{ss}"));if(b.link){var g=b.message;switch(b.module){case "task":g=
"[\u4efb\u52a1]"+g;break;case "document":g="[\u6587\u6863]"+g;break;case "customer":g="[\u5ba2\u6237]"+g;break;case "workflow":g="[\u5ba1\u6279]"+g;break;case "mainline":g="[\u9879\u76ee]"+g}d.find("div").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+b.link+"' data-module\x3d'"+b.module+"' data-id\x3d'"+b.link+"'\x3e"+g+"\x3c/a\x3e")}else b.message?d.find("div").html(f.initMessage(b.message)):b.chatImage?(d.find("div").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+
b.chatImage.imageUrl+"' data-artZoom-source\x3d'/base/download/"+b.chatImage.imageUrl+"' src\x3d'/base/download/"+b.chatImage.smallUrl+"' \x3e"),d.find("div .artZoom").artZoom()):b.voice?d.find("div").html("\x3cspan\x3e\x3ca data-value\x3d"+b.voice.id+"\x3e"+b.voice.name+"\x3c/a\x3e"):b.attachment&&d.find("div").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+b.attachment.id+"?download\x3dtrue' data-value\x3d"+b.attachment.id+"\x3e"+b.attachment.name+"\x3c/a\x3e");d.removeClass("hide");g=Date.create(b.postTime).format("{yyyy}-{MM}-{dd}");
0>=a.find("#"+g).size()&&this.createChatHistoryDayBoxRight(g,a);a.find("#"+g).find(".history-list-div").prepend(d)},addMember:function(b){var a=$("#feedsContainer .j_main .j_feeds #channel-member-clone").clone();null!=b.avatar&&null!=b.avatar.p3&&a.find("img").attr("src","/base/download/"+b.avatar.p3);b.id==TEAMS.currentUser.id?a.find(".avatar").append(" \x3ca\x3e"+b.username+"\x3c/a\x3e"):a.find(".avatar").append(" \x3ca  class\x3d'router' href\x3d'/messages/wechat/"+b.id+"'\x3e"+b.username+"\x3c/a\x3e");
a.attr("id",b.id);a.removeClass("hide");$("#channel-members").append(a)},nextPageMessage:function(){var b=this;this.model.loadhistory(b.userId,TEAMS.currentUser.id,b.channelId,b.chatType,function(a){a=a.page.result;for(var d=0;d<a.length;d++)b.createChatHistoryBox(a[d],$("#feedsContainer .j_main .j_feeds #chat-history"))})},htmlEvents:function(){var b=this,a=this.model;$(".right-panel-toggle").off("click","a").on("click","a",function(){var a=$(this);$(".right-panel-toggle").removeClass("active");
a.parent().addClass("active");a=a.attr("data-entity");"history"==a?($("#chat-history-wrap").removeClass("hide"),$("#channel-member-wrap").addClass("hide"),$("#message-recently-container").addClass("hide"),$("#member-list-wrap").addClass("hide"),$("#channel-list-wrap").addClass("hide"),$(".pagination").removeClass("hide"),b.loadData(b.pageNo),$("#chat-right-wrap").attr("marginbottom",100)):"channel-member"==a?($("#chat-history-wrap").addClass("hide"),$("#channel-member-wrap").removeClass("hide"),$("#message-recently-container").addClass("hide"),
$("#member-list-wrap").addClass("hide"),$("#channel-list-wrap").addClass("hide"),$(".pagination").addClass("hide"),b.loadChannelMembers(),$("#chat-right-wrap").removeAttr("marginbottom")):"recent-contact"==a?($("#chat-history-wrap").addClass("hide"),$("#channel-member-wrap").addClass("hide"),$("#message-recently-container").removeClass("hide"),$("#member-list-wrap").addClass("hide"),$("#channel-list-wrap").addClass("hide"),$(".pagination").addClass("hide"),b.loadRecentMembers(),$("#chat-right-wrap").removeAttr("marginbottom")):
"all-contact"==a?($("#chat-history-wrap").addClass("hide"),$("#channel-member-wrap").addClass("hide"),$("#message-recently-container").addClass("hide"),$("#member-list-wrap").removeClass("hide"),$("#channel-list-wrap").addClass("hide"),$(".pagination").addClass("hide"),b.loadAllChatMembers(),$("#chat-right-wrap").removeAttr("marginbottom")):"all-channel"==a&&($("#chat-history-wrap").addClass("hide"),$("#channel-member-wrap").addClass("hide"),$("#message-recently-container").addClass("hide"),$("#member-list-wrap").addClass("hide"),
$("#channel-list-wrap").removeClass("hide"),$(".pagination").addClass("hide"),b.loadAllChannel(),$("#chat-right-wrap").removeAttr("marginbottom"));$("#chat-right-wrap").trigger("resizeSroll")});$("#channel_name").off("change").on("change",function(){var d={};d.channelId=b.channelId;d.name=$(this).val();""!=d.name&&a.updateChannelName(d,function(a){f.notify("\u4fee\u6539\u6210\u529f")})});$("#more-message").off("click").on("click",function(){a.pageNo+=1;b.nextPageMessage()});$(b.el).find(".page-first").click(function(){$(this).hasClass("disabled")||
b.loadData(1)});$(b.el).find(".page-pre").click(function(){$(this).hasClass("disabled")||b.loadData(--a.pageNo)});$(b.el).find(".page-next").click(function(){$(this).hasClass("disabled")||b.loadData(++a.pageNo)});$(b.el).off("click",".members-more").on("click",".members-more",function(a){a=b.model;var g=$(this);a.loadAllChatMembers(parseInt(g.attr("pageNo")),function(a){b.renderAllEmployee(a)})});$(b.el).on("keyup",".suggestion",function(a){13==a.keyCode&&(0<$.trim($(this).val()).length?(a={"employee.status":"normal"},
a["employee.username"]=$(this).val(),a["employee.account"]=$(this).val(),a["employee.email"]=$(this).val(),a.pageNo=1,a.pageSize=30,$.ajax({type:"get",url:"/base/employee/pageQuery.json",dataType:"json",data:a,success:function(a){b.renderAllEmployee(a)}})):b.loadAllChatMembers())})},renderAllEmployee:function(b){var a=$("#member-list-wrap .employee-container");1==b.page.pageNo&&a.empty();for(var d=b.page.result,g=0;g<d.length;g++){var l=d[g],c=$.trim(l.pinyin),k="",e="";c&&(k=c.substring(0,1).toLocaleUpperCase(),
/[a-zA-Z]$/.test(k)||(k="degit"),k&&0==a.find("#list-history"+k).length?(e=$(this.el).find("#members-pinyin div").clone(),e.attr("id","list-history"+k),e.find("span").html(k),"degit"==k&&e.find("span").html("#")):e=$(this.el).find("#list-history"+k));c=$(this.el).find("#employee-clone").clone();c.attr("id",l.id);l.id!=TEAMS.currentUser.id?c.find("a.name").attr("href","/messages/wechat/"+l.id).attr("title",l.username).html(l.username).addClass("router"):c.find("a.name").attr("title",l.username).html(l.username);
c.find("span.email").attr("title",l.email).html(l.email);l.avatar&&l.avatar.p4&&c.find("a.avatar img").attr("src","/base/download/"+l.avatar.p4);e.find(".users-list").append(c);0==a.find("#list-history"+k).length&&a.append(e)}b.page.hasNext?$(this.el).find(".members-more").removeClass("hide"):$(this.el).find(".members-more").addClass("hide");$(this.el).find(".members-more").attr("pageNo",b.page.pageNo+1)},viewMember:function(b){if(b){for(var a="",d=0;d<b.length-1;d++)a=a+b[d].username+",";return a+=
b[b.length-1].username}},addEvents:function(){var b=this,a=this.model;$("#feedsContainer .j_main .j_feeds .channel-gray").off("mouseenter").on("mouseenter",function(){$(this).find(".channel-members").removeClass("hide");$(this).find(".close").removeClass("hide");$(this).find("#btn-quit").removeClass("hide");$(this).addClass("channel-css")});$("#feedsContainer .j_main .j_feeds .channel-gray").off("mouseleave").on("mouseleave",function(){$(this).find(".channel-members").addClass("hide");$(this).find(".close").addClass("hide");
$(this).find("#btn-quit").addClass("hide");$(this).removeClass("channel-css")});$("#feedsContainer .j_main .j_feeds .close").off("click").on("click",function(){var d=$(this).attr("data-entity");d==b.channelId?f.notify("\u5f53\u524d\u7fa4\u7ec4\u6b63\u5728\u804a\u5929\uff0c\u4e0d\u80fd\u5220\u9664"):f.confirm("\u786e\u8ba4\u5220\u9664\u8be5\u7fa4\u7ec4\uff1f",function(g){g&&(g={},g.id=d,g.userId=TEAMS.currentUser.id,a.deleteChannel(g,function(a){$("#"+d).remove()}))})});$("#feedsContainer .j_main .j_feeds #btn-quit").off("click").on("click",
function(){var d=$(this).attr("data-entity");f.confirm("\u786e\u8ba4\u9000\u51fa\u8be5\u7fa4\u7ec4\uff1f",function(g){g&&(g={},g.id=d,g.userId=TEAMS.currentUser.id,a.removeFromCHannel(g,function(a){$("#"+d).remove()}))})})},remove:function(){this.undelegateEvents()}});m.exports=h});
define("teams/wechat/wechatauthmodel",function(h,q,m){h=Backbone.Model.extend({pageSize:10,pageNo:1,initialize:function(f){},loadAuthAgent:function(f){$.ajax({type:"get",url:"/info/authAgent.json?t\x3d"+Math.random(),dataType:"json",success:function(e){f&&f(e)}})},loadUnsyncEmp:function(f){$.ajax({type:"get",url:"/info/unsyncEmp.json?t\x3d"+Math.random(),dataType:"json",success:function(e){f&&f(e)}})},syncEmp:function(f){$.ajax({type:"get",url:"/info/syncEmp.json?t\x3d"+Math.random(),dataType:"json",
success:function(e){f&&f(e)}})}});m.exports=h});
define("teams/wechat/chatmodel",function(h,q,m){h=Backbone.Model.extend({pageSize:10,pageNo:1,initialize:function(f){},save:function(f,e){$.ajax({type:"post",url:"/chatmessage.json",dataType:"json",data:{"chatMessage.receiver.id":f.receiver,"chatMessage.message":f.message,"chatMessage.channel.id":f.channelId},success:function(c){e&&e(c)}})},update:function(f,e){f._method="PUT";$.ajax({type:"post",url:"/chatmessage/"+f.id+".json",dataType:"json",data:{"chatMessage.receiver.id":f.receiver,"chatMessage.message":f.message,
"chatMessage.channel.id":f.channelId},success:function(c){e&&e(c)}})},readed:function(f,e,c,b,a){$.ajax({type:"get",url:"/chatmessage/readed.json",dataType:"json",data:{sender:f,receiver:e,chatType:b,channelId:c},success:function(d){a&&a(d)}})},load:function(f,e,c,b){$.ajax({type:"get",url:"/chatmessage/"+f+".json?t\x3d"+Math.random(),dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize,channelId:e,chatType:c},success:function(a){b&&b(a)}})},loadhistory:function(f,e,c,b,a){e||(e=TEAMS.currentUser.id);
$.ajax({type:"get",url:"/chatmessage/history.json?t\x3d"+Math.random(),dataType:"json",data:{sender:f,receiver:e,pageNo:this.pageNo,pageSize:this.pageSize,channelId:c,chatType:b},success:function(d){a&&a(d)}})},newmessage:function(f,e,c,b,a){$.ajax({type:"get",url:"/chatmessage/newMessage.json?t\x3d"+Math.random(),dataType:"json",data:{id:c,pageNo:1,pageSize:1E4,chatType:f,channelId:e,userId:c,lastDate:b,searchType:"up"},success:function(d){a&&a(d)}})},unreadMessage:function(f){$.ajax({type:"get",
dataType:"json",url:"/blog-message/unreadMessage.json",data:{hasWechat:!0,hasNewUser:!0,pageSize:1E3},success:function(e){f&&f(e)}})},unreadChatMessage:function(f){$.ajax({type:"get",dataType:"json",url:"/blog-message/unreadChatMessage.json",data:{pageSize:1E3},success:function(e){f&&f(e)}})},findMemberByChannel:function(f,e){$.ajax({type:"get",url:"/channel/"+f+".json",dataType:"json",data:{},success:function(c){e&&e(c)}})},loadAllChatMembers:function(f,e){var c={};c.userId=TEAMS.currentUser.id;
c.pageNo=f;c.pageSize=30;$.ajax({type:"get",url:"/users.json?",dataType:"json",data:c,success:function(b){e&&e(b)}})},loadRecentChatMembers:function(f,e){var c={};c.currentEmployeeId=TEAMS.currentUser.id;c.searchTime=f;c.jsessionid=ETEAMSID;$.ajax({type:"post",url:TEAMS.service.mcManager+"/chat/queryRecentContacts.json",dataType:"json",data:c,success:function(b){e&&e(b)}})},loadAllChannel:function(f,e){$.ajax({type:"get",url:"/chatmessage/loadAllChannel.json",dataType:"json",data:{userId:f},success:function(c){e&&
e(c)}})},loadRecentMembers:function(f){$.ajax({type:"post",url:TEAMS.service.mcManager+"/chat/queryRecentContacts.json",dataType:"json",data:{currentEmployeeId:TEAMS.currentUser.id,jsessionid:ETEAMSID},success:function(e){f&&f(e)}})},updateChannelName:function(f,e){f._method="PUT";$.ajax({type:"POST",url:"/channel/"+f.channelId+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteChannel:function(f,e){f._method="delete";$.ajax({type:"POST",url:"/channel/"+f.id+".json",dataType:"json",
data:f,success:function(c){e&&e(c)}})},removeFromCHannel:function(f,e){$.ajax({type:"GET",url:"/channel/remove/"+f.id+"/"+f.userId+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},createChannel:function(f,e){$.ajax({type:"post",url:"/channel.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},addMember:function(f,e){$.ajax({type:"get",url:"/channel/addMembers/"+f.channelId+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryChannelMember:function(f,e){$.ajax({type:"get",
url:"/channel/addMembers/"+f.channelId+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryChatsByName:function(f,e){$.ajax({type:"get",url:"/chatmessage/queryChatsByName.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/wechat/chatview",["teams/utils","teams/wechat/chatmodel","teams/component/userselector"],function(h,q,m){var f=h("teams/utils"),e=h("teams/wechat/chatmodel"),c=h("teams/component/userselector");h=Backbone.View.extend({initialize:function(b){this.random="";this.channel={};this.timer=0;this.firstCreate=!1;this.el="#main .j_matters";this.model=new e;this.userId=b.userId||TEAMS.currentUser.id;this.channelId=b.channelId||null;this.chatType=b.chatType||null;this.random=Math.random()},delegateEvents:function(){var b=
this;$("body").off("history.websocket").on("history.websocket",function(a,d){if(void 0!=d.chatMessage)switch(b.chatType){case "channel":d.chatMessage.channel&&d.chatMessage.channel.id==b.channelId&&b.websocket_chatMessage(d);break;case "chat":d.chatMessage.sender.id!=b.userId&&d.chatMessage.receiver.id!=b.userId||b.websocket_chatMessage(d)}});$("body").off("updateChannelName.websocket").on("updateChannelName.websocket",function(a,d){void 0!=d.channel&&"updateChannelName"==d.operateType&&b.websocket_updateChannelName(d)})},
render:function(){var b=this,a=this.model;b.chatRightView.channelId=b.channelId;b.chatRightView.chatType=b.chatType;$(b.el).empty().append(f.template("chat.chat"));b.userId||b.channelId?a.load(b.userId,b.channelId,b.chatType,function(d){var g=d.page;0>=g.totalCount&&(b.firstCreate||"channel"!=b.chatType||$(b.el+" .chat-messages").append("\x3cp id\x3d'no-message' style\x3d'text-align: center;padding-top:100px;'\x3e\u8fd8\u6ca1\u6709\u804a\u5929\u8bb0\u5f55\x3c/p\x3e"));var l=g.result;if(5==g.pageSize)for(var c=
l.length-1;0<=c;c--){var k=l[c],g=k.sender.id==TEAMS.currentUser.id?"right":"left";b.createChatBox(k,g,$("#main .j_matters .chat-messages"))}else for(c=0;c<l.length;c++)k=l[c],g=k.sender.id==TEAMS.currentUser.id?"right":"left",b.createChatBox(k,g,$("#main .j_matters .chat-messages"));"channel"==b.chatType?($("#chat-channel").removeClass("hide"),$("#chat-user").addClass("hide"),$("#chat-channel").find("#channel-name").val(d.channel.name),b.channel=d.channel,$(b.el).find(".chat-icons").show()):(null!=
d.employee.avatar&&null!=d.employee.avatar.p3&&$("#chat-user").find("img").attr("src","/base/download/"+d.employee.avatar.p3),1E4==d.employee.id?($(b.el).find("#newchannel").addClass("hide"),$("#chat-user").find("img").attr("src","images/service.png")):($(b.el).find("#newchannel").removeClass("hide"),$(b.el).find(".chat-icons").show()),$("#chat-user").find("span").html(d.employee.username));b.htmlEvents();a.readed(b.userId,TEAMS.currentUser.id,b.channelId,b.chatType);f.layout("#chat-container");
setTimeout(function(){$(window).trigger("resize");$("#chat-container").mCustomScrollbar("update");$("#chat-container").mCustomScrollbar("scrollTo","bottom")},300);b.timer=setInterval(function(){b.newmessage()},5E3)}):b.renderUnreadMessage()},websocket_chatMessage:function(b){var a="left";b.chatMessage.sender.id==TEAMS.currentUser.id&&(a="right");this.createChatBox(b.chatMessage,a,$("#main .j_matters #chat-messages"));this.chatRightView.createChatHistoryBoxRight(b.chatMessage,$("#main .j_feeds #chat-history"));
setTimeout(function(){$("#chat-container").mCustomScrollbar("update");$("#chat-container").mCustomScrollbar("scrollTo","bottom");$("#input-area").html("")},300)},websocket_updateChannelName:function(b){var a=b.channel.id;b=b.channel.name;$("#channel-list-wrap #"+a+" a").text(b);$("#message-recently-container #"+a+" a").text(b);"channel"==this.chatType&&a==this.channelId&&$("#chat-channel #channel-name").val(b)},renderUnreadMessage:function(){this.model.queryUnReadChat(function(b){})},createNewChat:function(){"channel"!=
this.chatType&&(ROUTER.navigate("/messages/wechat/"+this.userId,{trigger:!0}),model.save({receiver:this.userId,message:"",objId:this.objId},function(b){}))},newmessage:function(){if(!websocket_supported){var b=this;if(!(0>=$("#main .j_matters .chat-messages").size()||$("#main .j_matters .chat-messages").data("chat-user")!=b.random+"-"+b.userId)){var a=this.model,d=$("#main .j_matters #chat-messages").find("\x3ediv.left:last").find(".send-date").data("lastDate");d||(d=Date.create(new Date).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
a.newmessage(b.chatType,b.channelId,b.userId,d,function(a){if(a.actionMsg&&-1==a.actionMsg.code)clearInterval(b.timer);else if(a.page){a=a.page.result;for(var d=a.length-1;0<=d;d--){var c=a[d];if(c.sender.id==TEAMS.currentUser.id){if(type="right",1==$("#main .j_matters #chat-messages").find("#"+c.id).size())continue}else type="left";b.createChatBox(c,type,$("#main .j_matters .chat-messages"));b.chatRightView.createChatHistoryBoxRight(c,$("#main .j_feeds #chat-history"));setTimeout(function(){$("#chat-container").mCustomScrollbar("update");
$("#chat-container").mCustomScrollbar("scrollTo","bottom")},300)}}})}}},createChatBox:function(b,a,d){0<$("#chat-messages #no-message").size()&&$("#chat-messages #no-message").remove();var g=d.find("#chat-message-clone").clone(!0);g.attr("id",b.id);null!=b.sender.avatar&&null!=b.sender.avatar.p5&&g.find("img").attr("src","/base/download/"+b.sender.avatar.p5);1E4==b.sender.id&&g.find("img").attr("src","images/service.png");g.find(".avatar").append(b.sender.username);if(b.link){var l=b.message;
switch(b.module){case "task":l="[\u4efb\u52a1]"+l;break;case "document":l="[\u6587\u6863]"+l;break;case "customer":l="[\u5ba2\u6237]"+l;break;case "workflow":l="[\u5ba1\u6279]"+l;break;case "mainline":l="[\u9879\u76ee]"+l}g.find(".bubble p").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+b.link+"' data-module\x3d'"+b.module+"' data-id\x3d'"+b.link+"'\x3e"+l+"\x3c/a\x3e")}else b.chatImage?(g.find(".bubble p").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+b.chatImage.bigUrl+
"' data-artZoom-source\x3d'/base/download/"+b.chatImage.imageUrl+"' src\x3d'/base/download/"+b.chatImage.smallUrl+"' \x3e"),g.find(".bubble .artZoom").artZoom()):b.voice?g.find(".bubble p").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+b.voice.id+"?download\x3dtrue' data-value\x3d"+b.voice.id+"\x3e"+b.voice.name+"\x3c/a\x3e"):b.attachment?g.find(".bubble p").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+b.attachment.id+"?download\x3dtrue' data-value\x3d"+b.attachment.id+"\x3e"+b.attachment.name+
"\x3c/a\x3e"):b.message&&g.find(".bubble p").html(f.initMessage(b.message));l=Date.create(b.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(b.postTime).is("today")?g.find(".bubble .send-date").html(Date.create(b.postTime).format("{HH}:{mm}:{ss}")).data("lastDate",l):g.find(".bubble .send-date").html(l).data("lastDate",l);g.find(".bubble .send-date").attr("data-entity",l);g.addClass(a);g.removeClass("hide");d.append(g)},createChatAttachMentBox:function(b,a,d){0<$("#chat-messages #no-message").size()&&
$("#chat-messages #no-message").remove();var g=d.find("#chat-message-clone").clone(!0);g.attr("id",b.id);null!=b.sender.avatar&&null!=b.sender.avatar.p5&&g.find("img").attr("src","/base/download/"+b.sender.avatar.p5);g.find(".avatar").append(b.sender.username);if(b.link){var l=b.message;switch(b.module){case "task":l="[\u4efb\u52a1]"+l;break;case "document":l="[\u6587\u6863]"+l;break;case "customer":l="[\u5ba2\u6237]"+l;break;case "workflow":l="[\u5ba1\u6279]"+l;break;case "mainline":l="[\u9879\u76ee]"+
l}g.find(".bubble p").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+b.link+"' data-module\x3d'"+b.module+"' data-id\x3d'"+b.link+"'\x3e"+l+"\x3c/a\x3e")}else b.chatImage?(g.find(".bubble p").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+b.chatImage.bigUrl+"' data-artZoom-source\x3d'/base/download/"+b.chatImage.imageUrl+"' src\x3d'/base/download/"+b.chatImage.smallUrl+"' \x3e"),g.find(".bubble .artZoom").artZoom()):b.voice?g.find(".bubble p").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+
b.voice.id+"?download\x3dtrue' data-value\x3d"+b.voice.id+"\x3e"+b.voice.name+"\x3c/a\x3e"):b.attachment?g.find(".bubble p").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+b.attachment.id+"?download\x3dtrue' data-value\x3d"+b.attachment.id+"\x3e"+b.attachment.name+"\x3c/a\x3e"):b.message&&g.find(".bubble p").html(f.initMessage(b.message));l=Date.create(b.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(b.postTime).is("today")?g.find(".bubble .send-date").html(Date.create(b.postTime).format("{HH}:{mm}:{ss}")).data("lastDate",
l):g.find(".bubble .send-date").html(l).data("lastDate",l);g.addClass(a);g.removeClass("hide");d.append(g)},sendMessage:function(b){var a=this.model;b=b.text();b.isBlank()?f.alert("\u8bf7\u8f93\u5165\u5fae\u4fe1\u6d88\u606f"):1E3<b.length?$(".word-count").removeClass("hide"):a.save({receiver:this.userId,message:b,channelId:this.channelId},function(a){})},htmlEvents:function(){var b=this,a=this.chatRightView,d=this.model;$(".chat-input .btn-send").off("click").on("click",function(){b.sendMessage($("#input-area"))});
$("#input-area").on("keydown",function(a){var d=$(this),g=d.css("line-height");g.substr(0,g.indexOf("px"));if(a.altKey&&83==a.keyCode||a.ctrlKey&&13==a.keyCode){if(1E3<d.text().length)return $(".word-count").addClass("hide"),!1;b.sendMessage($(this))}else if(13==a.keyCode){if(1E3<d.text().length)return $(".word-count").removeClass("hide"),!1}else if(8==a.keyCode)1E3>=d.text().length&&$(".word-count").addClass("hide");else if(1E3<d.text().length)return $(".word-count").removeClass("hide"),!1});$("#newchannel").off("confirmHandler").on("confirmHandler",
function(g,c){var k=c.objs;if(!(1>k.length)){for(var e={ids:""},f=0;f<k.length;f++)e.ids+=k[f].id+";";"channel"==b.chatType?(e.channelId=b.channelId,d.addMember(e,function(d){if(d=d.ids)for(var g=0;g<k.length;g++){var b=k[g];0<=d.indexOf(b.id)&&a.addMember(b)}})):(0>e.ids.indexOf(b.userId)&&(e.ids+=b.userId+";"),d.createChannel(e,function(d){b.channelId=d.channel.id;b.chatType="channel";b.userId=TEAMS.currentUser.id;b.firstCreate=!0;b.render();a.channelId=d.channel.id;a.chatType="channel";a.render();
ROUTER.navigate("/messages/wechat/channel/"+b.channelId,{trigger:!1})}))}});$("#newchannel").off("click").on("click",function(a,d){a.stopPropagation();(new c({$target:$(this)})).open()});$("#channel-name").off("focus").on("focus",function(){b.channel.name||$("#channel-name").val("")}).off("blur").on("blur",function(){if(!b.channel.name&&$(this).val())f.notify("\u8bf7\u8f93\u5165\u7fa4\u7ec4\u540d\u5b57");else if($(this).val()&&15<$(this).val().length)f.notify("\u7fa4\u7ec4\u540d\u5b57\u6700\u957f15\u4e2a\u5b57");
else if($(this).val()!=b.channel.name){var a={};a.name=$(this).val();a.channelId=b.channelId;d.updateChannelName(a,function(a){f.notify("\u7fa4\u7ec4\u540d\u5b57\u4fee\u6539\u6210\u529f")})}});var g=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:b.el,browse_button:b.el+" #chatImage",max_file_size:"10mb",filters:[{title:"\u56fe\u7247",extensions:"JPG,PNG,JPEG,GIF,BMP"}],url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID+"\x26receiver\x3d"+b.userId+"\x26type\x3dimage\x26channelId\x3d"+
b.channelId,flash_swf_url:"js/plupload.swf"});g.init();g.bind("FilesAdded",function(a,d){a.refresh();a.start()});g.bind("UploadProgress",function(a,d){});g.bind("Error",function(a,d){-601==d.code?f.notify("\u53ea\u80fd\u4e0a\u4f20\u56fe\u7247","\u6587\u4ef6\u7c7b\u578b\u9519\u8bef","error"):-600==d.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});g.bind("FileUploaded",function(a,
d,g){});g=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:b.el,browse_button:b.el+" #chatAttachment",max_file_size:"10mb",url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID+"\x26receiver\x3d"+b.userId+"\x26type\x3dattachment\x26channelId\x3d"+b.channelId,flash_swf_url:"js/plupload.swf"});g.init();g.bind("FilesAdded",function(a,d){a.refresh();a.start()});g.bind("UploadProgress",function(a,d){});g.bind("Error",function(a,d){-600==d.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6",
"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});g.bind("FileUploaded",function(a,d,g){});(new $.paste($("#input-area"))).on("pasteImage",function(a,d){var g=b.userId,c=b.channelId,e={};e.dataContentType=d.dataContentType;e.channelId=c;e.receiver=g;e.base64Data=d.dataURL;$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",data:e,success:function(a){a=a.chatMessage;b.createChatAttachMentBox(a,"right",$("#main .j_matters #chat-messages"));b.chatRightView.createChatHistoryBoxRight(a,
$("#main .j_feeds #chat-history"));setTimeout(function(){$("#chat-container").mCustomScrollbar("update");$("#chat-container").mCustomScrollbar("scrollTo","bottom")},300)}})}).on("pasteFile",function(a,d){var g=b.userId,c=b.channelId,e={};e.dataFileName=d.pataFileName;e.dataContentType=d.dataContentType;e.channelId=c;e.receiver=g;e.base64Data=d.dataURL;$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",data:e,success:function(a){a=a.chatMessage;b.createChatAttachMentBox(a,"right",
$("#main .j_matters #chat-messages"));b.chatRightView.createChatHistoryBoxRight(a,$("#main .j_feeds #chat-history"));setTimeout(function(){$("#chat-container").mCustomScrollbar("update");$("#chat-container").mCustomScrollbar("scrollTo","bottom")},300)}})})},remove:function(){this.undelegateEvents();this.ChatRightView&&(this.ChatRightView.remove(),this.ChatRightView=null);this.timer&&clearInterval(view.timer)}});m.exports=h});
define("teams/wechat/wechatauthview",["teams/utils","teams/wechat/wechatauthmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/wechat/wechatauthmodel");h=Backbone.View.extend({initialize:function(c){this.isAdmin=TEAMS.currentUser.admin;this.el=c.el||c.container;this.model=new e;$(this.el).html(f.template("wechat.auth",{isAdmin:this.isAdmin}));f.layout(".j_wechatAppScroll");this.isAdmin||$(".wechatAPP-mod").find(".j_auth.add").addClass("hide")},delegateEvents:function(){var c=this.model;$(this.el);
$("body").on("click.WechatAuth",".goto-top",function(b){f.gotoTop(".j_wechatAppScroll")});$("body").on("click.WechatAuth",".j_add",function(b){$(this).parent("li").hasClass("active")&&(b.preventDefault(),f.notify("\u5df2\u6388\u6743\u5e94\u7528\u4e0d\u53ef\u91cd\u590d\u6388\u6743"))});$("body").on("click.WechatAuth",".sync-btn",function(b){b.preventDefault();c.syncEmp();f.notify("\u540c\u6b65\u6210\u529f")});$("body").on("click.WechatAuth",".j_guideTab a",function(){var b=$(this).index();$(this).addClass("btn-success").siblings().removeClass("btn-success");
$(".j_wechatTabCon").find(".wechatAPP-guide-pic-con:eq("+b+")").show().siblings().hide()})},render:function(){$(this.el);f.gallery("#guidePicSlide_1,#guidePicSlide_2",{pager:{prev:".prev",next:".next"},count:!0,autoslide:{speed:4E3},facybox:{nextEffect:"fade",prevEffect:"fade",closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}}});this.model.loadAuthAgent(function(c){(c=c.authAgents)&&null!=c&&0<c.length?$.each(c,function(b,
a){switch(a.module){case "TASK":$(".wechatAPP-mod-list .j_task").addClass("active");break;case "BLOG":$(".wechatAPP-mod-list .j_blog").addClass("active");break;case "MAINLINE":$(".wechatAPP-mod-list .j_goal").addClass("active");break;case "DOCUMENT":$(".wechatAPP-mod-list .j_docl").addClass("active");break;case "WORKFLOW":$(".wechatAPP-mod-list .j_flow").addClass("active");break;case "PLACARD":$(".wechatAPP-mod-list .j_placard").addClass("active");break;case "WORKREPORT":$(".wechatAPP-mod-list .j_report").addClass("active");
break;case "CALENDAR":$(".wechatAPP-mod-list .j_schedule").addClass("active");break;case "CUSTOMER":$(".wechatAPP-mod-list .j_crm").addClass("active");break;case "GLOBALSEARCH":$(".wechatAPP-mod-list .j_globalsearch").addClass("active");break;case "ORGNIZITION":$(".wechatAPP-mod-list .j_org").addClass("active");break;case "TIMECARD":$(".wechatAPP-mod-list .j_timecard").addClass("active")}}):$("body").find(".e-title .hint.hint-danger").removeClass("hide")});this.renderUnsyncEmp();f.layout(".j_wechatAppConList")},
renderUnsyncEmp:function(){var c=$(this.el);this.model.loadUnsyncEmp(function(b){if(b){var a=b.emps;if(b=b.message)$(".wechatApp-contact").find(".wechat-noresult").html(b),$(".wechatApp-contact").find(".sync-btn").addClass("hide");a&&null!=a&&0<a.length?$.each(a,function(a,g){var b="",b=g.avatar?"/base/download/"+g.avatar.p3:"images/avatar.png";c.find(".wechatApp-cont-list ul").append('\x3cli id\x3d"'+g.id+'"\x3e\x3ca class\x3d"avatar"\x3e\x3cimg src\x3d"'+b+'"/\x3e\x3c/a\x3e\x3cp class\x3d"name ellipsis"\x3e'+
g.username+"\x3c/p\x3e\x3c/li\x3e")}):c.find(".wechat-noresult").removeClass("hide")}})},remove:function(){$(this.el).off(".WechatAuth")}});m.exports=h});
define("teams/wechat/wechatserviceview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.isAdmin=TEAMS.currentUser.admin;this.el=e.el||e.container;$(this.el).html(f.template("wechat.service",{isAdmin:this.isAdmin}))},delegateEvents:function(){$(this.el);$("body").on("click.WechatServie",".goto-top",function(e){f.gotoTop(".j_serviceAppScroll")})},render:function(){var e=$(this.el);f.layout(".j_serviceAppScroll");f.gallery("#servicePicSlide",
{pager:{prev:".prev",next:".next"},count:!0,autoslide:{speed:4E3},facybox:{nextEffect:"fade",prevEffect:"fade",closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}}});e.find(".slide-con").find(".fancybox").fancybox({nextEffect:"fade",prevEffect:"fade",closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})},remove:function(){$(this.el).off(".wechatservice")}});
m.exports=h});
define("teams/wechat/ChatService",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},getRecentChatMessages:function(f,e,c,b,a,d,g,l,n){$.ajax({type:"POST",url:TEAMS.service.mcManager+"/chat/queryRecentChatMessages",dataType:"json",data:{tenantKey:f,currentEmployeeId:e,chatType:c,targetEmployeeId:b,targetChannelId:a,pageNo:d,pageSize:g},success:function(a){l&&l(a)},error:function(a){n&&n(a)}})},getHistoricalChatMessages:function(f,e,c,b,a,d,g,l,n){$.ajax({type:"POST",url:TEAMS.service.mcManager+"/chat/getHistoricalChatMessages",
dataType:"json",data:{tenantKey:f,currentEmployeeId:e,chatType:c,targetEmployeeId:b,targetChannelId:a,pageNo:d,pageSize:g},success:function(a){l&&l(a)},error:function(a){n&&n(a)}})},markRead:function(f,e,c,b,a,d,g){$.ajax({type:"POST",url:TEAMS.service.mcManager+"/chat/markChatRead",dataType:"json",data:{tenantKey:f,currentEmployeeId:e,chatType:c,targetEmployeeId:b,targetChannelId:a},success:function(a){d&&d(a)},error:function(a){g&&g(a)}})},sendMessage:function(f,e,c,b,a,d,g,l){$.ajax({type:"POST",
url:TEAMS.service.mcManager+"/chat/sendMessage",dataType:"json",data:{tenantKey:f,currentEmployeeId:e,chatType:c,targetEmployeeId:b,targetChannelId:a,message:d},success:function(a){g&&g(a)},error:function(a){l&&l(a)}})}});m.exports=h});
define("teams/workflow/requestmodel",function(h,q,m){h=Backbone.Model.extend({pageNo:1,pageSize:25,initialize:function(f){this.id=f.id;this.userId=f.userId},getList:function(f,e){$.ajax({type:"get",url:"/workflows/"+this.userId+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},search:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/workflows/search.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/workflow/flowstatview",["teams/utils","teams/workflow/flowstatmodel","teams/component/typeahead","teams/component/entityslider"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/flowstatmodel"),c=h("teams/component/typeahead"),b=h("teams/component/entityslider");q=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.el=a.el;this.flowStatModel=new e;this.moudle="flowstat";$(this.el).html(f.template("flow.flowstat"))},rankChart:null,empChart:null,rankChartOption:{tooltip:{show:!0,
trigger:"item",formatter:function(a,d,g){return a.name.split("_,_")[0]+" : "+a.value}},color:["#3AEC94"],xAxis:[{type:"category",data:["\u5218\u5fd7","\u5c0f\u5fd7"],axisLabel:{interval:"auto",formatter:function(a){if(0<$.trim(a).length)return a.split("_,_")[0]}}}],yAxis:[{type:"value"}],series:[{type:"bar",clickable:!0,barWidth:30,data:[5,20]}]},empChartOption:{tooltip:{show:!0,trigger:"item",formatter:function(a,d,g){return a.seriesName+"\x3cbr/\x3e"+a.name.split("_,_")[0]+" : "+a.value}},legend:{data:["\u7533\u8bf7",
"\u5df2\u529e","\u5f85\u529e"],padding:[5,5,5,5],itemGap:30,itemWidth:40,itemHeight:16,textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"}},color:["#3AEC94","#48AAF0","#FF9966"],calculable:!1,toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:0,end:100,showDetail:!1},xAxis:[{type:"category",data:["\u5218\u5fd7","\u5c0f\u5fd7"],axisLabel:{interval:"auto",formatter:function(a){if(0<$.trim(a).length)return a.split("_,_")[0]}}}],
yAxis:[{type:"value"}],series:[{name:"\u7533\u8bf7",type:"bar",barWidth:30,data:[5,20]},{name:"\u5df2\u529e",type:"bar",barWidth:30,data:[10,40]},{name:"\u5f85\u529e",type:"bar",barWidth:30,data:[15,60]}]},delegateEvents:function(){var a=$(this.el),d=this,g=this.flowStatModel;a.on("click.flowstat",".j_time a",function(a){switch($(a.target).attr("data")){case "thisWeek":g.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");g.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");
break;case "last2weeks":g.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");g.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":g.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");g.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":g.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),g.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}$("#begin-date").val(g.beginDate);
$("#end-date").val(g.endDate)});a.find("#flowStatSelect").change(function(){type=$(this).val();switch(type){case "all":d.setStatUserByType(type,null);a.find(".sharetype-dept").addClass("hide");a.find("#editShare").removeClass("hide");a.find(".typeahead-wrapper").addClass("hide");$(this).val("user");a.find(".sharetype-user").removeClass("hide");break;case "dept":a.find(".sharetype-dept").removeClass("hide");a.find(".sharetype-user").addClass("hide");break;case "user":a.find(".sharetype-dept").addClass("hide"),
a.find(".sharetype-user").removeClass("hide")}});c([{el:d.el+" .sharetype-dept input",callback:function(a){d.setStatUserByType("dept",a)}},{el:d.el+" .sharetype-user input",callback:function(a){d.setStatUserByType("user",a)}}]);a.on("click.flowstat",".entity-item .close",function(a){a.stopPropagation();$(this).parent(".entity-item").remove()});a.on("click.flowstat","#flowStatBtn",function(){var a=d.getParamByTargetType("top");h.async("https://static.eteams.cn/js/echarts.min.js",function(){d.disposeRankChart();
d.disposeEmpChart();d.initRankChart(a.linkageType,a.rankType);d.initEmpChart();g.getFlowStat(a,function(g){d.setFlowStatCount(g);d.loadRankChart(g,a.linkageType,a.rankType);d.loadEmpChart(g)})})});a.on("click.flowstat",".js_lefttarget",function(){a.find("#barWarningTitle").attr("value",$(this).attr("value"));$(this).parents().addClass("active").siblings().removeClass("active");d.loadChartAndList(!1)});a.on("click.flowstat",".js_lefttarget_all",function(){a.find("#barWarningTitle").attr("value",$(this).parents().prev("div").attr("value"));
$(this).parents().prev("div").parents().addClass("active").siblings().removeClass("active");d.loadChartAndList(!0)});a.on("click.flowstat","#rankType a",function(){$(this).addClass("active btn-primary").siblings().removeClass("active btn-primary");var a=d.getParamByTargetType("right");h.async("https://static.eteams.cn/js/echarts.min.js",function(){d.disposeRankChart();d.initRankChart(a.linkageType,a.rankType);g.getFlowStat(a,function(g){d.loadRankChart(g,a.linkageType,a.rankType)})})});$("body").on("click.flowstat",
".goto-top",function(a){f.gotoTop(".j_flowstatScr")})},loadChartAndList:function(a){var d=this,g=this.flowStatModel,b=d.getParamByTargetType("left");h.async("https://static.eteams.cn/js/echarts.min.js",function(){d.disposeRankChart();d.initRankChart(b.linkageType,b.rankType);g.getFlowStat(b,function(a){d.loadRankChart(a,b.linkageType,b.rankType)})});a&&d.slideRightEntity(b)},setFlowStatCount:function(a){var d=$(this.el);d.find("#requestCountDiv").text(a.requestCount);d.find("#finishedCountDiv").text(a.finishedCount);
d.find("#unfinishCountDiv").text(a.unfinishCount)},setStatUserByType:function(a,d){var g=this,b={};b.type=a;"all"==a?0<$(g.el).find('#shareentrys span[type\x3d"all"]').length||(b.id="",b.name="\u6240\u6709\u4eba",$(g.el).find("#shareentrys").append(_.template($("#js_template_item").html(),b))):d&&!$.isEmptyObject(d)&&("dept"==a?0<$(g.el).find('#shareentrys span[type\x3d"dept"]').find('a[data-id\x3d"'+d.id+'"]').length||(b.id=d.id,b.name=d.name,$(g.el).find("#shareentrys").append(_.template($("#js_template_item").html(),
b))):"user"==a&&(d=$.isArray(d)?d:[d],$.each(d,function(a,d){if(0<$(g.el).find('#shareentrys span[type\x3d"user"]').find('a[data-id\x3d"'+d.id+'"]').length)return!0;b.id=d.id;b.name=d.name;$(g.el).find("#shareentrys").append(_.template($("#js_template_item").html(),b))})))},getStatUserIds:function(){var a=[];$(this.el).find("#shareentrys").find(".j_entity_item").each(function(){var d={};d.type=$(this).attr("type");d.id=$(this).find("a").attr("data-id");a.push(d)});return a},getParamByTargetType:function(a){var d=
{};d.targetType=a;d.linkageType=$(this.el).find("#barWarningTitle").attr("value");d.rankType=$(this.el).find("#rankType").children(".active").attr("value");d.userFilter=this.getStatUserIds();return d},render:function(a){this.initComponents();this.renderFlowStat();f.layout(".j_flowstatScr")},initComponents:function(){var a=this,d=this.flowStatModel;f.datepicker([{el:"#begin-date",callback:function(g){var b=g.date;null==b?d.beginDate=null:(b=b.format("{yyyy}-{MM}-{dd}"),a.isBefore(b,d.endDate)?d.beginDate=
b:(g.target.value=null,d.beginDate=null))},endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(g){var b=g.date;null==b?d.endDate=null:(b=b.format("{yyyy}-{MM}-{dd}"),a.isBefore(d.beginDate,b)?d.endDate=b||d.endDate:(g.target.value=null,d.endDate=null))},endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);$("#begin-date").val(d.beginDate);$("#end-date").val(d.endDate)},isBefore:function(a,d){return a&&d&&!Date.create(a).isBefore(d,864E5)?(f.notify("\u8bf7\u786e\u8ba4\u9009\u62e9\u7684\u5f00\u59cb\u65e5\u671f\u5728\u7ed3\u675f\u65e5\u671f\u4e4b\u524d"),
!1):!0},setRankBarColor:function(a){if(null==a||"request"==a)return"#3AEC94";if("finished"==a)return"#48AAF0";if("unfinish"==a)return"#FF9966"},parseRankStatData:function(a,d,g,b){var c=[];if(null==d&&null==g){if($.isEmptyObject(a.empTopRequestCount)||0==a.empTopRequestCount.length)return c;c=Array(a.empTopRequestCount.length);$.each(a.empTopRequestCount,function(a,d){"xAxis"==b?c[a]=d.empName+"_,_"+d.empId:"series"==b&&(c[a]=d.topRequestCount)});return c}if("request"==d&&"empRank"==g){if($.isEmptyObject(a.empTopRequestCount)||
0==a.empTopRequestCount.length)return c;c=Array(a.empTopRequestCount.length);$.each(a.empTopRequestCount,function(a,d){"xAxis"==b?c[a]=d.empName+"_,_"+d.empId:"series"==b&&(c[a]=d.topRequestCount)})}else if("request"==d&&"formRank"==g){if($.isEmptyObject(a.formTopRequstCount)||0==a.formTopRequstCount.length)return c;c=Array(a.formTopRequstCount.length);$.each(a.formTopRequstCount,function(a,d){"xAxis"==b?c[a]=d.formName+"_,_"+d.formId:"series"==b&&(c[a]=d.topRequestCount)})}else if("finished"==d&&
"empRank"==g){if($.isEmptyObject(a.empTopFinishedCount)||0==a.empTopFinishedCount.length)return c;c=Array(a.empTopFinishedCount.length);$.each(a.empTopFinishedCount,function(a,d){"xAxis"==b?c[a]=d.empName+"_,_"+d.empId:"series"==b&&(c[a]=d.topFinishedCount)})}else if("finished"==d&&"formRank"==g){if($.isEmptyObject(a.formTopFinishedCount)||0==a.formTopFinishedCount.length)return c;c=Array(a.formTopFinishedCount.length);$.each(a.formTopFinishedCount,function(a,d){"xAxis"==b?c[a]=d.formName+"_,_"+d.formId:
"series"==b&&(c[a]=d.topFinishedCount)})}else if("unfinish"==d&&"empRank"==g){if($.isEmptyObject(a.empTopUnfinishCount)||0==a.empTopUnfinishCount.length)return c;c=Array(a.empTopUnfinishCount.length);$.each(a.empTopUnfinishCount,function(a,d){"xAxis"==b?c[a]=d.empName+"_,_"+d.empId:"series"==b&&(c[a]=d.topUnfinishCount)})}else if("unfinish"==d&&"formRank"==g){if($.isEmptyObject(a.formTopUnfinishCount)||0==a.formTopUnfinishCount.length)return c;c=Array(a.formTopUnfinishCount.length);$.each(a.formTopUnfinishCount,
function(a,d){"xAxis"==b?c[a]=d.formName+"_,_"+d.formId:"series"==b&&(c[a]=d.topUnfinishCount)})}return c},parseEmpStatData:function(a,d,g){var b=[];if($.isEmptyObject(a.empFlowStat))return b;b=Array(a.empFlowStat.length);if("xAxis"==d)return $.each(a.empFlowStat,function(a,d){b[a]=d.empName+"_,_"+d.empId}),b;if("series"==d)return $.each(a.empFlowStat,function(a,d){0==g?b[a]=d.requestCount:1==g?b[a]=d.finishedCount:2==g&&(b[a]=d.unfinishCount)}),b},renderFlowStat:function(){var a=this,d=this.flowStatModel,
g={isGlobal:!0};g.linkageType=$(this.el).find("#barWarningTitle").attr("value");g.rankType=$(this.el).find("#rankType").children(".active").attr("value");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.initRankChart(g.linkageType,g.rankType);a.initEmpChart();d.getFlowStat(g,function(d){a.setFlowStatCount(d);a.loadRankChart(d,null,null);a.loadEmpChart(d)})})},initRankChart:function(a,d){var g=this;(this.rankChart=echarts.init(document.getElementById("rank-chart"),"macarons"))?(this.rankChart.showLoading({effect:"spin"}),
$(window).on("resize",this.rankChart.resize),$("#rank-chart").on("resize",this.rankChart.resize),"formRank"==d?this.rankChartOption.series[0].clickable=!1:(this.rankChartOption.series[0].clickable=!0,this.rankChart.on(echarts.config.EVENT.CLICK,function(b){var c={};c.beginDate=g.flowStatModel.beginDate;c.endDate=g.flowStatModel.endDate;c.targetType="right";c.linkageType=a;c.rankType=d;c.userFilter=[];var k={type:"user"};k.id=b.name.split("_,_")[1];c.userFilter.push(k);g.slideRightEntity(c)}))):f.alert("\u7edf\u8ba1\u6392\u884c\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},
loadRankChart:function(a,d,g){this.rankChart.hideLoading();this.rankChartOption.color[0]=this.setRankBarColor(d);this.rankChartOption.xAxis[0].data=this.parseRankStatData(a,d,g,"xAxis");this.rankChartOption.series[0].data=this.parseRankStatData(a,d,g,"series");this.rankChart.setOption(this.rankChartOption,!0)},initEmpChart:function(){var a=this;this.empChart=echarts.init(document.getElementById("emp-chart"),"macarons");this.empChart.showLoading({effect:"spin"});this.empChart?($(window).on("resize",
this.empChart.resize),$("#emp-chart").on("resize",this.empChart.resize),this.empChart.on(echarts.config.EVENT.CLICK,function(d){var g={};g.beginDate=a.flowStatModel.beginDate;g.endDate=a.flowStatModel.endDate;g.targetType="bottom";g.linkageType=a.getTypeBySeriesName(d.seriesName);g.rankType="";g.userFilter=[];var b={type:"user"};b.id=d.name.split("_,_")[1];g.userFilter.push(b);a.slideRightEntity(g)})):f.alert("\u7528\u6237\u8be6\u7ec6\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},loadEmpChart:function(a){this.empChart.hideLoading();
this.empChartOption.xAxis[0].data=this.parseEmpStatData(a,"xAxis");this.empChartOption.series[0].data=this.parseEmpStatData(a,"series",0);this.empChartOption.series[1].data=this.parseEmpStatData(a,"series",1);this.empChartOption.series[2].data=this.parseEmpStatData(a,"series",2);this.empChart.setOption(this.empChartOption,!0)},slideRightEntity:function(a){(new b({module:this.moudle,flowStatParam:a})).render()},disposeRankChart:function(){this.rankChart&&($(window).off("resize",this.rankChart.resize),
this.rankChart.dispose(),this.rankChart=null)},disposeEmpChart:function(){this.empChart&&($(window).off("resize",this.empChart.resize),this.empChart.dispose(),this.empChart=null)},getTypeBySeriesName:function(a){if("\u7533\u8bf7"==a)return"request";if("\u5df2\u529e"==a)return"finished";if("\u5f85\u529e"==a)return"unfinish"},remove:function(){$(this.el).off(".flowstat")}});m.exports=q});
define("teams/workflow/flowstatlistview",["teams/utils","teams/workflow/flowstatmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/flowstatmodel");h=Backbone.View.extend({initialize:function(c){this.el=c.container;this.flowStatParam=c.flowStatParam;this.flowStatModel=new e;$(this.el).html(f.template("flow.flowstatlist"))},delegateEvents:function(){var c=$(this.el),b=this,a=this.flowStatModel;c.off("click.flowstatlist","#btn-close").on("click.flowstatlist","#btn-close",function(){$("body").trigger("slideClose")});
c.off("click.flowstatlist","#loadMore").on("click.flowstatlist","#loadMore",function(){a.pageNo++;b.loadMoreEmpFlowTable()})},render:function(){this.loadEmpFlowTable()},loadEmpFlowTable:function(){var c=this,b=$(this.el),a=this.flowStatModel,d=this.flowStatParam;b.find(".loading_large").removeClass("hide");b.find("#flowStatList").addClass("hide");a.queryEmpFlowListPage(d,function(a){"request"==d.linkageType?b.find("#flowStatList").find(".js_flow_request").removeClass("hide"):"finished"==d.linkageType?
b.find("#flowStatList").find(".js_flow_finished").removeClass("hide"):"unfinish"==d.linkageType&&b.find("#flowStatList").find(".js_flow_unfinish").removeClass("hide");$.isEmptyObject(a)||$.isEmptyObject(a.result)||0==a.result.length?(b.find(".loading_large").addClass("hide"),b.find("#flowStatList").removeClass("hide"),b.find("#flowStatList").find(".j_empty").removeClass("hide"),b.find("li.js_liheader").css("border-bottom",0)):($.each(a.result,function(a,g){c.appendTableTr(d,g)}),a.hasNext&&b.find("#loadMore").removeClass("hide"),
b.find(".loading_large").addClass("hide"),b.find("#flowStatList").removeClass("hide"),f.layout(" .j_trashbinListScr"))})},loadMoreEmpFlowTable:function(){var c=this,b=$(this.el),a=this.flowStatParam;this.flowStatModel.queryEmpFlowListPage(a,function(d){$.each(d.result,function(d,b){c.appendTableTr(a,b)});1==d.hasNext?b.find("#loadMore").removeClass("hide"):b.find("#loadMore").addClass("hide")})},appendTableTr:function(c,b){var a=$(this.el),d;"request"==c.linkageType?(d=a.find("#flowStatItemClone").find(".js_flow_request").clone(),
d.find(".js_flowname a").html(b.flowName).attr("title",b.flowName).attr("data-id",b.flowId),d.find(".js_flowstatus").html(null==b.flowFinishTime?"\u5ba1\u6279\u4e2d":"\u5df2\u529e\u7ed3"),d.find(".js_nodeopt").html(b.empName),d.find(".js_reqtime").html(Date.create(b.operateTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}"))):"finished"==c.linkageType?(d=a.find("#flowStatItemClone").find(".js_flow_finished").clone(),d.find(".js_flowname a").html(b.flowName).attr("title",b.flowName).attr("data-id",b.flowId),
d.find(".js_flowstatus").html(null==b.flowFinishTime?"\u5ba1\u6279\u4e2d":"\u5df2\u529e\u7ed3"),d.find(".js_nodeopt").html(b.empName),d.find(".js_reqtime").html(Date.create(b.operateTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}"))):"unfinish"==c.linkageType&&(d=a.find("#flowStatItemClone").find(".js_flow_unfinish").clone(),d.find(".js_flowname a").html(b.flowName).attr("title",b.flowName).attr("data-id",b.flowId),d.find(".js_flowstatus").html(null==b.flowFinishTime?"\u5ba1\u6279\u4e2d":"\u5df2\u529e\u7ed3"),
d.find(".js_nodename").html(b.nodeName),d.find(".js_nodeopt").html(b.empName),d.find(".js_recetime").html(Date.create(b.receiveTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}")));a.find("#flowStatList").find(".j_trashlist").append(d)},remove:function(){$(this.el).off(".flowstatlist")}});m.exports=h});
define("teams/workflow/formview",function(h,q,m){q=Backbone.View.extend({teams:{},initialize:function(f){this.formpluginUrl="develop"==TEAMS.runMode?"form/form-plugin":"form.js?t_\x3d"+TEAMS.version},delegateEvents:function(){},render:function(f){var e=f.callback,c=f.parentEl,b=f.formId,a=f.readOnly;c.html("");this.el=c;h.async(this.formpluginUrl,function(){h.async("form/form-plugin",function(d){formPlugin.renderForm({parentEl:c,formId:b,readOnly:a,callback:function(a){e&&e(a)}})})})},loadFormByLayoutId:function(f){var e=
f.callback,c=f.parentEl,b=f.dataId,a=f.layoutId,d=f.readOnly;this.el=c;window.systemInfo_print&&(d=!0);h.async(this.formpluginUrl,function(){h.async("form/form-plugin",function(g){formPlugin.renderFormDataByLayoutId({parentEl:c,dataId:b,readOnly:d,layoutId:a,notDefault:!0,callback:function(a){e&&e(a)}})})})},loadForm:function(f){var e=f.callback,c=f.parentEl,b=f.dataId,a=f.layoutId,d=f.readOnly;this.el=c;window.systemInfo_print&&(d=!0);h.async(this.formpluginUrl,function(){h.async("form/form-plugin",
function(g){formPlugin.renderFormData({parentEl:c,dataId:b,readOnly:d,layoutId:a,notDefault:!0,callback:function(a){e&&e(a)}})})})},submit:function(f){var e=f.callback,c=f.parentEl,b=f.dataStatus,a=0==f.isDel?!1:!0;h.async(this.formpluginUrl,function(){h.async("form/form-plugin",function(d){formPlugin.saveFormData({parentEl:c,dataStatus:b,isDel:a,callback:function(a){e&&e(a)}})})})},renderStatSearch:function(f){var e=f.fieldId,c=f.parentEl,b=f.componentKey,a=f.container;h.async(this.formpluginUrl,
function(){h.async("form/form-plugin",function(d){formPlugin.renderStatSearch({parentEl:c,fieldId:e,componentKey:b,container:a})})})},submitCheck:function(f){if(window.formPlugin)return formPlugin.submitCheck(f)},remove:function(){var f=this.el;window.formPlugin&&formPlugin.destroyEvents(f)}});m.exports=q});
define("teams/workflow/flowstepview",["teams/utils","teams/component/typeahead","teams/component/guideview","teams/workflow/flowmodel","teams/workflow/flowsequencemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/guideview"),b=h("teams/workflow/flowmodel"),a=h("teams/workflow/flowsequencemodel");h=Backbone.View.extend({initialize:function(d){this.container=d.container;this.parentEl=d.parentEl;this.formId=d.formId;this.el=this.parentEl?this.parentEl+
" "+(this.container||"#workflow-wrap #addstep-container"):this.container||"#workflow-wrap";this.model=new b;this.flowSequenceModel=new a;$(this.el).append(f.template("flow.flowstep"));this.guideview=new c({module:"workflow",parentEl:this.el})},delegateEvents:function(){var a=this,g=$(a.parentEl);g.find("#addstep-container #flow-textarea").autosize();g.find("#step-container").on("click.flowStep",".js_aftercurrent",function(){if(!a.flowRequest||a.flowRequest.lastPath&&"reject"==a.flowRequest.lastPath.type)a.createApproverTr(1);
else if(0==g.find(".approvers-container .currentStep").length)a.createApproverTr(1);else{var b=g.find(".approvers-container .currentStep").nextAll(".flowStep:first");0==b.length?(b=g.find(".approvers-container .currentStep"),b=0==b.nextAll(".approver-line").length?b.attr("id"):b.nextAll(".approver-line:last").attr("id"),b=b.substr(b.lastIndexOf("-")+1),a.createApproverTr(1,b)):(b=b.attr("id"),b=b.substr(b.lastIndexOf("-")+1),a.createAfterCurrentApproverTr(1,b))}});g.find("#step-container").on("click.flowStep",
".js_flowchartbtn",function(){$container=g.find("#step-container").hide(400);g.find("#js_flowchartContainer").show(400)});g.find("#js_flowchartHeader").on("click.flowStep","a",function(){g.find("#js_flowchartContainer").hide(400);g.find("#step-container").show(400)});g.find("#step-container").on("click.flowStep",".js_afterend",function(){var b=g.find(".approvers-container .approver-line").length-1;a.createApproverTr(1,b)});g.find("#step-container").on("click.flowStep",".btn-delete-approver",function(g){$(this).parent().parent().remove();
a.resetApproverSn()});g.find("#workflow-wrap").on("click.flowStep","#step-cancel",function(){g.find("#step-container").slideToggle(400)});g.find("#addstep-container .j_range ").on("click.flowStep",function(a){$(this).toggleClass("open")});g.find("#addstep-container .j_orcheck ").on("click.flowStep",function(a){"icon-checkbox-unchecked"==$(this).find("i").attr("class")?($(this).find("i").addClass("icon-checkbox-checked"),$(this).find("i").removeClass("icon-checkbox-unchecked")):($(this).find("i").addClass("icon-checkbox-unchecked"),
$(this).find("i").removeClass("icon-checkbox-checked"))});g.find("#addstep-container").on("click.flowStep",".approver-line .entity-item a.close",function(a){a=$(this).parent().parent().parent().parent();2==a.find(".entity-item").size()&&(a.parent().find(".j_orcheck").addClass("hide"),a.parent().find(".j_orcheck").find("i").hasClass("icon-checkbox-checked")&&(a.parent().find(".j_orcheck").find("i").removeClass("icon-checkbox-checked"),a.parent().find(".j_orcheck").find("i").addClass("icon-checkbox-unchecked")))});
g.find("#addstep-container .j_not_verify").on("click.flowStep",function(a){$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).next().find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});g.find("#addstep-container .j_is_verify").on("click.flowStep",function(a){$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).prev().find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")})},
render:function(a){var g=this,b=$(g.parentEl);g.$target=a.$target;g.type=a.type;g.flowRequest=a.flowRequest;g.formId=a.formId;a=g.type;b.find("#approvers-container").empty();var c=b.find("#step-container");"addStep"==a?(g.loadStep(),b.find("#flow-textarea").removeClass("hide"),b.find("#add-step-confirm").removeClass("hide"),g.controlStep()):(b.find(".js_afterend").parent().remove(),b.find(".js_aftercurrenttips").addClass("hide"),g.flowSequenceModel.load(g.formId,function(a){a.actionMsg&&f.notify(a.actionMsg.message);
(a=a.flowSequence)?g.flowRequest&&g.flowRequest.lastPath&&"reject"==g.flowRequest.lastPath.type?(g.loadStep(a.type),b.find("#flow-textarea").removeClass("hide").attr("placeholder","\u8bf7\u8f93\u5165\u6d41\u8f6c\u610f\u89c1"),b.find("#add-step-confirm").removeClass("hide").text(" \u786e\u8ba4\u5e76\u63d0\u4ea4\u5ba1\u6279")):g.loadStepSubmit(a.flowSteps,a.type):g.model.queryStepsByLastFlowRequest(g.formId,function(a){g.flowRequest&&g.flowRequest.lastPath&&"reject"==g.flowRequest.lastPath.type?(g.loadStep(),
b.find("#flow-textarea").removeClass("hide").attr("placeholder","\u8bf7\u8f93\u5165\u6d41\u8f6c\u610f\u89c1"),b.find("#add-step-confirm").removeClass("hide").text(" \u786e\u8ba4\u5e76\u63d0\u4ea4\u5ba1\u6279")):(a=a.flowSteps)&&0<a.length?g.loadStepSubmit(a):(g.createApproverTr(3),(a=TEAMS.currentUser.superior)&&b.find("#approver-line-0 .entity-container").append('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+a.id+'" class\x3d"usercard-toggle" userid\x3d"'+a.id+'"\x3e'+a.username+"\x3c/a\x3e\x3c/span\x3e"),
b.find("#step-confirm").removeClass("hide"),setTimeout(function(){c.is(":hidden")||(g.guideview.targetEls.remove(g.el+" #editOperator"),g.guideview.guideTip("operation","#editOperator",!0))},400))})}))},loadStepSubmit:function(a,g){var b=$(this.parentEl);b.find("#step-confirm").removeClass("hide");this.createApproverTr(a?a.length:3);for(var c=0,k=a.length;c<k;c++){var e=a[c],f=e.flowOperators;0==c&&"start"==e.type&&b.find("#approver-line-"+c).addClass("hide");var s=b.find("#approver-line-"+c+" .entity-container");
s.attr("readOnly",e.readOnly);for(var u=0,h=f.length;u<h;u++){var v=f[u].operator;if(v){var x='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+v.id+'" class\x3d"usercard-toggle" userid\x3d"'+v.id+'"\x3e'+v.username+"\x3c/a\x3e\x3c/span\x3e";0==s.find("#"+v.id).length&&s.append(x)}}s=s.parents(".approver-line");this.renderStep(e,s,g)}},controlStep:function(){for(var a=$(this.parentEl),g=this.flowRequest,b=g.flowSteps,c=g.currentStep.type,g=g.finished,k=0,e=b.length;k<e;k++){var f=a.find("#approver-line-"+
k),s=b[k];f.find(".j_not_verify").unbind();f.find(".j_is_verify").unbind();f.find(".j_range").unbind();f.find(".j_orcheck").unbind();if("start"!=c||this.isSelfStep(s)||1==s.readOnly)f.find(".entity-item").attr("undeletable",!0),f.find(".btn-delete-approver").remove(),f.find(".control-btn").remove()}g&&a.find(".add-approvers,#add-step-confirm").remove()},loadStep:function(a){var g=$(this.parentEl),b=this.flowRequest,c=b.flowSteps,b=b.currentStep;if(1==b.readOnly&&b.nextStep)for(var k=0;k<c.length;k++){var e=
c[k];if(e.id==b.nextStep.id&&1==e.readOnly&&"start"!=b.type){g.find(".js_aftercurrent").parent().remove();break}}this.createApproverTr(c?c.length:3);k=0;for(e=c.length;k<e;k++){var f=g.find("#approver-line-"+k+" .entity-container"),s=c[k];s.id==b.id?f.parents(".approver-line").addClass("currentStep"):f.parents(".approver-line").addClass("flowStep");f.attr("readOnly",s.readOnly);for(var u=s.flowOperators,h=0,v=u.length;h<v;h++){var x=u[h].operator;f.append('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+
x.id+'" class\x3d"usercard-toggle" userid\x3d"'+x.id+'"\x3e'+x.username+"\x3c/a\x3e\x3c/span\x3e")}f=g.find("#approver-line-"+k);1==s.readOnly?this.renderStep(s,f,a):this.renderStep(s,f)}},getStep:function(){var a=this,g={},b=[];$(a.parentEl).find("#step-container .entity-container").each(function(){a.getStepContent($(this),b)});g.steps=b;return g},getAddedStep:function(){var a=this,g=$(a.parentEl),b="",c=g.find("#step-container .currentStep"),b=b.substring(0,b.length-1),b='"employees":['+b+"]",c=
c.attr("id"),k=c.substr(c.lastIndexOf("-")+1),e=[];g.find("#step-container .entity-container").each(function(){var g=$(this).parents(".approver-line").attr("id"),g=g.substr(g.lastIndexOf("-")+1);parseInt(g,10)>parseInt(k,10)&&0<$(this).find(".entity-item").length&&a.getStepContent($(this),e)});return b+',"flowSteps":'+JSON.stringify(e)},getStepContent:function(a,g){var b={},c=a.parents(".approver-line").find(".j_writeable");c.find(".open").size()&&(b.formWritable=!0);c=a.parents(".approver-line").find(".j_orcheck");
c.find(".icon-checkbox-checked").size()&&(b.orCheck=!0);c=a.parents(".approver-line").find(".j_steptitle");""==c.val()?b.title=c.attr("placeholder").replace(":",""):b.title=c.val();c=a.parents(".approver-line").find(".j_is_verify");c.find(".icon-checkbox-checked").size()&&(b.verify=!0);"readonly"==a.attr("readOnly")&&(b.readOnly=!0);var k=[];a.find(".entity-item").each(function(){var a={},d={},g=$(this).find("a").attr("userid"),b=$(this).find("a").text();d.id=g;d.username=b;a.operator=d;k.push(a)});
b.flowOperators=k;g.push(b)},createApproverTr:function(a,g){var b=$(this.parentEl),c=b.find("#approvers-container"),k=c.find(".approver-line").length;if(g){var e=b.find("#approvers-clone\x3e.approver-line").clone(!0);e.attr("id","approver-line-"+k);var f="approver-selector"+k;e.find(".approver-i").html(g);e.find("input.typeahead").addClass(f);e.insertAfter(b.find("#approver-line-"+g));this.resetApproverSn();f=e.find(".control-label");e.find(".j_steptitle").attr("placeholder",f.text().replace(":",
""))}else for(var s=k;s<k+a;s++)e=b.find("#approvers-clone\x3e.approver-line").clone(!0),0==s&&e.find(".plus-btn").addClass("editOperator").attr("id","editOperator"),e.attr("id","approver-line-"+s),f="approver-selector"+s,e.find(".approver-i").html(s+1),e.find("input.typeahead").addClass(f),c.append(e),this.resetApproverSn(),f=e.find(".control-label"),e.find(".j_steptitle").attr("placeholder",f.text().replace(":",""))},createAfterCurrentApproverTr:function(a,g){var b=$(this.parentEl),c=b.find("#approvers-container").find(".approver-line").length,
k=b.find("#approvers-clone\x3e.approver-line").clone(!0);k.attr("id","approver-line-"+c);c="approver-selector"+c;k.find(".approver-i").html(g);k.find("input").addClass(c);b.find("#approver-line-"+g).before(k);this.resetApproverSn();b=k.find(".control-label");b.find("span").hide();b.append("\x3cinput type\x3d'text' style\x3d'width:70px'  class\x3d'form-control j_steptitle'  placeholder\x3d'"+b.text().replace(":","")+"'\x3e:")},isSelfStep:function(a){for(var g=a.flowOperators,b=!1,c=0;c<g.length;c++)if(g[c].operator.id==
TEAMS.currentUser.id){b=!0;break}return"start"==a.type&&b},userSelect:function(a){var g=$(this.parentEl);e({el:this.el+" ."+a,callback:function(b){if(b&&!$.isEmptyObject(b)){$.isArray(b)||(b=[b]);for(var c=0,k=b.length;c<k;c++){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+b[c].id+'" class\x3d"usercard-toggle" userid\x3d"'+b[c].id+'"\x3e'+b[c].name+"\x3c/a\x3e\x3c/span\x3e",f=g.find("."+a).parent().prev();0<f.find("#"+b[c].id).length||(f.append(e),e=f.parents(".approver-line"),1<e.find(".entity-item").size()&&
e.find(".j_orcheck").removeClass("hide"))}}}})},resetApproverSn:function(){var a=this;$(a.parentEl).find("#approvers-container").find(".approver-line").each(function(g){$(this).attr("id","approver-line-"+g);if($(this).parent().find("#approver-line-0").not(".hide").find(".j_steptitle").hasClass("start"))a.flowRequest&&a.flowRequest.lastPath&&"reject"==a.flowRequest.lastPath.type?$(this).find(".approver-i").html(g):($(this).find(".approver-i").next().text(""),$(this).find(".approver-i").text("\u52a0\u7b7e\u5ba1\u6279"));
else{var b=$(this).parent().find("#approver-line-0");b.hasClass("hide")&&b.find(".j_steptitle").hasClass("start")?$(this).find(".approver-i").html(g):$(this).find(".approver-i").html(g+1)}for(var b=$(this).find(".typeahead").attr("class").split(" "),c=0;c<b.length;c++)if(-1!=b[c].indexOf("approver-selector")){$(this).find(".typeahead").removeClass(b[c]);$(this).find(".typeahead").addClass("approver-selector"+g);var k="j_step_"+(new Backbone.View).cid;$(this).find(".typeahead").addClass(k);a.userSelect(k)}g=
$(this).find(".j_steptitle");b=$(this).find(".control-label");g.attr("placeholder",b.text().replace(":",""))})},remove:function(){$(this.el).off(".flowStep");$(this.el).find("#addstep-container #flow-textarea").trigger("autosize.destroy");this.guideview&&(this.guideview.remove(),this.guideview=null)},renderStep:function(a,g,b){var c=g.find(".j_writeable");a.formWritable&&c.find(".j_range").toggleClass("open");c=g.find(".j_orcheck");a.orCheck?(c.find("i").removeClass("icon-checkbox-unchecked"),c.find("i").addClass("icon-checkbox-checked")):
(c.find("i").removeClass("icon-checkbox-checked"),c.find("i").addClass("icon-checkbox-unchecked"));c=g;1<c.find(".entity-item .usercard-toggle").size()&&c.find(".j_orcheck").show();""!=a.title&&c.find(".j_steptitle").val(a.title);"start"==a.type&&c.find(".j_steptitle").addClass("start");c.find(".j_steptitle").attr("readonly","readonly");"\u63d0\u4ea4\u8282\u70b9"==a.title&&(g.find(".line-item").last().hide(),g.find(".entity-item").attr("undeletable",!0),g.find(".btn-delete-approver").remove(),g.find(".control-btn").remove());
var c=g.find(".j_is_verify"),k=g.find(".j_not_verify");a.verify?(c.find("i").removeClass("icon-checkbox-unchecked"),c.find("i").addClass("icon-checkbox-checked"),k.find("i").removeClass("icon-checkbox-checked"),k.find("i").addClass("icon-checkbox-unchecked")):(c.find("i").removeClass("icon-checkbox-checked"),c.find("i").addClass("icon-checkbox-unchecked"),k.find("i").removeClass("icon-checkbox-unchecked"),k.find("i").addClass("icon-checkbox-checked"));b&&"company"==b&&(g.find(".entity-item").attr("undeletable",
!0),g.find(".btn-delete-approver").remove(),g.find(".j_orcheck").find("i").hasClass("icon-checkbox-checked")&&g.find(".icon_orCheck").removeClass("hide"),g.find(".j_orcheck").hide(),g.find(".j_not_verify").find("i").hasClass("icon-checkbox-checked")?(g.find(".j_not_verify").find("i").addClass("hide"),g.find(".j_is_verify").addClass("hide")):(g.find(".j_is_verify").find("i").addClass("hide"),g.find(".j_not_verify").addClass("hide")),g.find(".j_range").unbind(),c=g.find("input.j_steptitle"),c.attr("readonly",
"readonly"))}});m.exports=h});
define("teams/workflow/formlistview","teams/utils teams/component/validation teams/form/formmanagemodel teams/form/formoperationview teams/component/typeahead teams/form/formcolor".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");var e=h("teams/form/formmanagemodel"),c=h("teams/form/formoperationview");h("teams/component/typeahead");var b=h("teams/form/formcolor");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.el=a.container?a.container:"#j_workflowcenter";
this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.module=a.module?a.module:"forms";this.tpl=f.template("flow.formlist",{isWeaver:this.isWeaver,isAdmin:this.isAdmin,module:this.module});this.model=new e(a);this.ownership=a.ownership?a.ownership:"company"},delegateEvents:function(){var a=this,d=a.model,g=$(a.tpl),b=$(a.el);$("body").on("click.FormListView",".goto-top",function(a){f.gotoTop(".js_forms")});
b.on("click.FormListView",".js_loadMore",function(){var d=$(this).attr("id"),g=1,c="",e={};"loadMore-company"==d?(g=b.find("#pageNo-company").val(),c=b.find("#companyformsearch-keywords").val()):"loadMore-member"==d&&(g=b.find("#pageNo-member").val(),c=b.find("#memberformsearch-keywords").val());g++;e.pageNo=g;(g=$(this).attr("isKeyword"))&&"isKeyword"==g?(e["formParam.keyword"]=$.trim(c),"loadMore-company"==d?e.ownership="company":"loadMore-member"==d&&(e.ownership="member"),a.renderKeywords(e)):
"loadMore-company"==d?a.renderCompanyForms(e):"loadMore-member"==d&&a.renderMemberForms(e)});b.on("click.FormListView",".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+a)});b.on("click.FormListView","#form-title",function(){var a=$(this).attr("skiptype");void 0!=a&&("edit"===a?$(this).parents(".js_formListBox").find(".js_editForm").trigger("click.FormListView"):$(this).parents(".js_formListBox").find(".js_formPreview").trigger("click.FormListView"))});b.on("click.FormListView",
".js_deleteForm",function(){var g=this;if("enable"==$(this).parent().parent().parent().parent().find("a").eq(1).attr("status"))f.alert("\u6b64\u8868\u5355\u4e3a\u542f\u7528\u72b6\u6001,\u505c\u7528\u8868\u5355\u540e\u624d\u80fd\u88ab\u5220\u9664");else{var b=$(this).attr("formId"),l=$(this).attr("type"),c={formId:b};"cloud"===l?a.deleteForm(g,c,l):d.findCount({formId:b},function(d){a.deleteForm(g,c,l,d.count)})}});b.on("click.FormListView",".js_copyForm",function(){var d=$(this).attr("formId"),k=
$(this).parents(".js_formListBox").find("#form-title").text(),e=$(this).attr("operationtype"),p={};p.formId=d;p.ownership="company";0<$(this).parents(".js_personalforms").length&&(p.ownership="personal");d=!1;p.ownership="company";0<$(this).parents(".js_personalforms").length&&(p.ownership="personal");"copy"==e?e="\u590d\u5236":"enable"==e&&(e="\u542f\u7528",TEAMS.currentUser.admin&&(d=!0));p.el="#copy-form";p.formTitle=k;p.tpl=f.template("flow.formcopy",{userId:a.userId,operationtype:e,admin:d});
p.module="workflow";p.copyCallback=function(d){var c=d.form.ownership,k=[];k.push(d.form);"personal"==c?(a.loadMemberForm(k,"prepend"),c=b.find("#formmanagelist .js_personalforms .js_other .j_formlist"),k=g.siblings("#formitems-personal").find(".js_formitemsli").clone(),a.renderForm(d.form,c,k,"prepend"),a.sort(k),a.buildSerialNumber(c)):"company"==c&&(c=b.find("#formmanagelist .js_companyforms .js_other .j_formlist"),k=g.siblings("#formitems-company").find(".js_formitemsli").clone(),a.renderForm(d.form,
c,k,"prepend"),a.sort(k),a.buildSerialNumber(c))};a.formoperationView=new c(p);a.formoperationView.render()});b.on("click.FormListView",".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});b.on("click.FormListView",".js_renameForm",function(){var a=$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=$('\x3cinput type\x3d"text" name\x3d"formTitle" style\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+
a+"\x3e"),d=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();$(this).parents(".js_formListBox").find("#form-number").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(d)}});b.on("blur.FormListView",'input[name\x3d"formTitle"]',function(){var a=$(this).attr("formId"),g=$.trim($(this).val()),b=this;if(""==g||g==$(b).next().text())$(b).next().show(),$(b).remove();else{var l={};l.formId=
a;l.formName=$.trim(g);l.ownership="company";d.renameForm(l,function(a){(a=a.message)?f.notify(a):($(b).next().text(g).attr("title",g).show(),$(b).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});b.on("keydown.FormListView",'input[name\x3d"formTitle"]',function(a){a=a.keyCode;var d=$.trim($(this).val());27==a?($(this).next().show(),$(this).remove()):13==a&&(""==d||d==$(this).next().text()?($(this).next().show(),$(this).remove()):$(this).trigger("blur.FormListView"))});b.on("click.FormListView",
".js_changeFormStatus",function(){var a=this,g=$(this).attr("formId"),b=$(this).attr("status"),l=$(this).text(),c={"form.id":g,"form.status":b},e=$(a).parents(".js_formitemsli").attr("formtype");updateStatus=function(b){b&&d.updateStatus(c,function(b){b=b.form.status;var c="";if("enable"==b)c="company"==e?"\u505c\u7528":"\u4e0b\u67b6",$(a).parents(".js_formitemsli").find(".icon-lock").hide(),$(a).parents(".js_formitemsli").find(".j_formRecommend").show();else if("disable"==b){c="company"==e?"\u542f\u7528":
"\u53d1\u5e03";$(a).parents(".js_formitemsli").find(".icon-lock").show();$(a).parents(".js_formitemsli").find(".j_formRecommend").hide();var r=$(a).parents(".js_formitemsli").find(".j_star"),s=r.data("recommend");0==s&&d.recommend({formId:g,recommend:s},function(a){r.data("recommend",1);r.removeClass("icon-star").addClass("icon-star-empty").attr("title","\u63a8\u8350")})}$(a).attr("status",b);$(a).text(c);f.notify("\u8868\u5355\u5df2"+l)})};f.confirm("\u786e\u5b9a\u8981"+l+"\u6b64\u8868\u5355\u5417\uff1f",
updateStatus)});b.on("click.FormListView",".js_buildNewForm",function(){var d={module:"workflow",el:"#build-newform"};d.tpl=f.template("flow.formnew",{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin});d.ownership="company";d.saveCallback=function(d){var c=d.form.ownership,n=[];n.push(d.form);"personal"==c?(a.loadMemberForm(n,"prepend"),n=b.find("#formmanagelist .js_personalforms .js_other .j_formlist"),c=g.siblings("#formitems-personal").find(".js_formitemsli").clone(),a.renderForm(d.form,
n,c,"prepend"),a.sort(c),a.buildSerialNumber(n)):"company"==c&&(n=b.find(".js_companyforms .js_other .j_formlist"),c=g.siblings("#formitems-company").find(".js_formitemsli").clone(),a.renderForm(d.form,n,c,"prepend"),a.sort(c),a.buildSerialNumber(n))};a.formoperationView=new c(d);a.formoperationView.render()});b.on("click.FormListView",".icon-search",function(d){var g=b.find(".js_searchkeyword");d=$.trim(g.attr("searchtype"));g=$.trim(g.val());a.searchFormResult(d,g)});b.on("keyup.FormListView",".js_searchkeyword",
function(d){var g=$.trim($(this).attr("searchtype")),b=$.trim($(this).val());13==(d?d:window.event?window.event:null).keyCode&&a.searchFormResult(g,b)});b.on("click.FormListView",".j_managelist_scroll .js_form-whoes",function(a){a=$(a.target);a.hasClass("js_buildNewForm")||a.hasClass("js_searchkeyword")||($(this).find("b").attr("class","caret"==$(this).find("b").attr("class")?"caret caret-right":"caret"),$(this).next().toggle())});b.on("click.FormListView",".j_managelist_scroll .js_formtab li",function(d){d=
$(this).parents("#formmanagelist").find(".js_forms");var g=$(this).find("a"),c=g.attr("listEl");$(this).addClass("active");"mem-forms"==g.attr("id")?(g=$('\x3cinput type\x3d"text" id\x3d"memberformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"member"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e'),b.find(".js_searchform").html(g),g.focus(),b.find(".js_newcategory").parent().hide()):"personal-forms"==g.attr("id")?(g=$('\x3cinput type\x3d"text" id\x3d"personalformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"personal"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e'),
b.find(".js_searchform").html(g),g.focus(),a.isAdmin&&(b.find(".j_toolList .js_newcategory").parents("li").remove(),b.find(".j_toolList li").eq(0).after('\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e'),b.find(".js_newcategory").data("dynamicClass","js_personalforms"),b.find(".js_newcategory").data("categoryType","personal"))):(g=$('\x3cinput type\x3d"text" id\x3d"companyformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"company"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e'),
b.find(".js_searchform").html(g),g.focus(),b.find(".j_toolList .js_newcategory").parents("li").remove(),b.find(".j_toolList li").eq(0).after('\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e'),b.find(".js_newcategory").data("dynamicClass","js_companyforms"),b.find(".js_newcategory").data("categoryType","company"));"formstat"==a.module&&b.find(".j_toolList li:not('.js_searchform')").remove();
$(this).siblings().removeClass("active");d.find("."+c).removeClass("hide").siblings().addClass("hide")});b.on("click.FormListView",".js_newcategory",function(a){a=g.siblings(".js_formcategory").clone().attr("id","newCateId");var d=$(this).data("dynamicClass"),c=$(this).data("categoryType");d||(d="js_companyforms");c||(c="company");a.find(".j_formcateInfo").remove();var e=$('\x3cinput type\x3d"text" class\x3d"form-control js_createcategory" placeholder\x3d"\u5206\u7c7b\u540d\u79f0(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)"\x3e');
a.find(".js_categoryname").append(e);var f=b.find("."+d+" #custom-category #newCateId");1==f.size()?f.find(".js_createcategory").focus():(b.find("."+d+" #custom-category").prepend(a),e.data("categoryType",c),e.data("dynamicClass",d),e.focus())});b.on("blur.FormListView",".js_createcategory",function(g){$(this);g=$(this).data("dynamicClass");var b=$(this).data("categoryType"),c=$.trim($(this).val()),l=$(this).attr("placeholder"),e=$(this).parent(),u=$(this).parents(".js_formcategory");c==l||""==c?
$("."+g+" #newCateId").remove():d.createCategory({"formCategory.name":c,"formCategory.type":b,module:"workflow"},function(d){d.message?f.notify(d.message):(e.empty().text(c).next().text("(0)"),e.attr("id",d.formCategory.id),u.removeAttr("id"),f.notify("\u65b0\u5efa\u8868\u5355\u5206\u7c7b\u6210\u529f"),a.drag())})});b.on("keydown.FormListView",".js_createcategory",function(a){a=a.keyCode;var d=$.trim($(this).val());27==a?$(this).parents(".js_formcategory").remove():13==a&&(""==d?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):
$(this).trigger("blur.FormListView"))});b.on("mouseenter.FormListView","#custom-category #cate-name",function(d){(null==$(this).parents(".js_cloudforms").get(0)||a.isWeaver)&&"formstat"!=a.module&&0==$(this).find(".js_createcategory").length&&(0!=$(this).find(".js_formcount .js_deletecategory").length?$(this).find(".js_formcount .js_deletecategory").show():$(this).find(".js_formcount").append('\x3ca class\x3d"js_deletecategory btn-delecategory" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e'))});
b.on("mouseleave.FormListView","#custom-category #cate-name",function(a){$(this).find(".js_formcount .js_deletecategory").hide()});b.on("click.FormListView",".js_deletecategory",function(a){var g=$(this);f.confirm("\u5220\u9664\u5206\u7c7b\u540e\uff0c\u8be5\u5206\u7c7b\u7684\u8868\u5355\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u5176\u4ed6\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5206\u7c7b\uff1f",function(a){if(a){a={"formCategory.id":g.parents("#cate-name").find(".js_categoryname").attr("id")};
var c=g.parents(".js_formcategory").find(".j_formlist"),n=c.html(),c=c.find(".js_formitemsli");if(0!=c.length){var e="";c.each(function(a){a=$(this).attr("formid");e+=a+","});a.formIds=e}d.deleteCategory(a,function(a){g.parents(".js_formcategory").remove();b.find(".js_other .j_formlist").prepend(n);f.notify("\u8868\u5355\u7c7b\u522b\u5220\u9664\u6210\u529f")})}})});b.on("click.FormListView","#formmanagelist #custom-category .js_formcategory .js_categoryname",function(d){if(null==$(this).parents(".js_cloudforms").get(0)||
a.isWeaver){d=$(this).text();var g=$('\x3cinput type\x3d"text" class\x3d"form-control js_updatecatename"\x3e');0==$(this).find(".js_createcategory").length&&($(this).before(g).hide(),g.focus().val(d))}});b.on("keydown.FormListView",".js_updatecatename",function(a,g){var b=$(this),c=$.trim($(this).val()),l=$(this).next().text(),e=$(this).next().attr("id"),h=$(this).next().attr("type"),v={},x=a.keyCode||g;27==x?($(this).next().show(),$(this).remove()):13==x&&(""==c?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):
c!=l?(v["formCategory.id"]=e,v["formCategory.name"]=c,v["formCategory.type"]=h,v.module="workflow",d.updateCategoryName(v,function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5206\u7c7b\u540d\u79f0\u4fee\u6539\u6210\u529f"),b.next().text(c).show(),b.remove())})):($(this).next().show(),$(this).remove()))});b.on("blur.FormListView",".js_updatecatename",function(a){a=$.trim($(this).val());var d=$(this).next().text();a===d?($(this).next().show(),$(this).remove()):$(this).trigger("keydown.FormListView",
13)});b.on("mouseenter.FormListView",".j_form-category",function(d){(null==$(this).parents(".js_cloudforms").get(0)||a.isWeaver)&&$(this).find(".j_formcateInfo").removeClass("hide")});b.on("mouseleave.FormListView",".form-category-hd",function(d){(null==$(this).parents(".js_cloudforms").get(0)||a.isWeaver)&&$(this).find(".j_formcateInfo").addClass("hide")})},render:function(){var a=$(this.el),d=this.tpl,g=this.isAdmin,d=$(d).siblings("#formmanage-container");a.html(d.html());a.find(".return_js").attr("href",
"/workflows/"+this.userId+"/new");f.layout(this.el+" .js_forms");d={pageNo:1,queryType:"flowStat"};"formstat"==this.module?(a.find(".j_toolList li:not('.js_searchform')").remove(),a.find(".js_companyforms").removeClass("hide"),g&&this.renderMemberForms(d),this.renderCompanyForms(d)):g?(this.renderCompanyForms(d),this.renderMemberForms(d),a.find(".js_companyforms").removeClass("hide"),a.find(".js_newcategory").data("dynamicClass","js_companyforms"),a.find(".js_newcategory").data("categoryType","company")):
(a.find(".js_personalforms").removeClass("hide"),a.find(".j_personal-forms").addClass("active"),$(".js_forms").find(".hide").remove(),a.find(".js_searchkeyword").attr("searchtype","personal"),a.find(".js_newcategory").data("dynamicClass","js_personalforms"),a.find(".js_newcategory").data("categoryType","personal"));this.renderPersonalForms(d);"personal"==this.ownership&&$("#personal-forms").parent().click()},renderCompanyForms:function(a){var d=this,g=d.model,b=$(d.el);b.find("#formlist-loading").show();
g.findAll(a,function(a){var g=b.find("#formmanagelist .js_forms .js_companyforms");d.loadCateAndForms(a,g,"company");b.find("#formlist-loading").hide();d.drag();d.dragCategory(".js_companyforms #custom-category");0==$(".js_companyforms").find(".js_formitemsli").length?$(".js_companyforms .js_noresult-org").removeClass("hide"):$(".js_companyforms .js_noresult-org").addClass("hide")})},loadCateAndForms:function(a,d,g){$(this.el);g=this.tpl;var b=d.find("#custom-category");d=d.find("#other-category");
a=a.formCategories;for(var c in a){var k=a[c],e=k.name,f=k.id,s=k.sort,u=k.forms,h=u.length,v=k.type,k=$(g).siblings(".js_formcategory");"\u5176\u4ed6"==e?k.addClass("js_other").find(".j_form-category").removeClass("j_form-category"):k.find(".js_categoryname").attr("id",f).attr("sort",s).attr("type",v);k.find(".js_categoryname").text(e);k.find(".form-acount").text("("+h+")");"formstat"==this.module&&(k.find(".j_formcateInfo").remove(),k.find("#cate-name span").removeClass("js_categoryname "));for(var x in u)e=
u[x],f=k.find(".j_formlist"),s=$(g).siblings("#formitems-company").find(".js_formitemsli").clone(),this.renderForm(e,f,s);"js_formcategory js_other"==k.attr("class")?d.append(k):b.append(k);this.buildSerialNumber(k.find(".j_formlist"))}},renderMemberForms:function(a){var d=this,g=d.model,b=$(d.el);a.pageSize=20;a.module="workflow";b.find("#formlist-loading").show();g.findMember(a,function(a){d.renderMember(a);b.find("#formlist-loading").hide()})},renderMember:function(a){var d=$(this.el),g=a.formPage,
b=g.result;a=a.pageNo;d.find("#pageNo-member").val(a);1==g.pageNo&&0==g.result.length?d.find(".js_noresult-member").show():d.find(".js_noresult-member").hide();g.hasNext?d.find("#loadMore-member").show():d.find("#loadMore-member").hide();this.loadMemberForm(b)},loadMemberForm:function(a,d){for(var g=$(this.el),c=this.tpl,g=g.find("#formmanagelist .js_memberformlist"),n=0;n<a.length;n++){var k=a[n],e=k.name,f=k.operator.username,s=k.operator.id,u=k.id,k=Date.create(k.createTime).format("{yyyy}\u5e74{MM}\u6708{dd}\u65e5"),
h=$(c).siblings("#formitems-member").find(".js_formitemsli");h.find("#form-title").text(e);h.find("#form-title").attr("title",e);h.find("#form-operator").text(f).attr("userid",s);h.find("#form-createtime").text(k);h.find(".js_copyForm").attr("formId",u);h.find(".js_formPreview").attr("formId",u);h.find(".js_formstat").attr("href","/workflows/"+TEAMS.currentUser.id+"/formstat/"+u);h.find("#form-number").css("background-color",b.getRandomColor());"formstat"==this.module?(h.find(".js_formstat").removeClass("hide"),
h.find(".isGn").remove(),h.find(".js_formmanag").remove(),h.find("#form-title").attr("skiptype","preview")):(h.find(".js_formmanag").removeClass("hide"),h.find(".js_formstat").remove());"prepend"==d?g.prepend(h):g.append(h)}this.buildSerialNumber(g)},renderForm:function(a,d,g,c){var n=a.name,k=a.describe,e=a.status,f=a.id,s=a.sort;a=a.statPro;"enable"==e?(g.find(".js_changeFormStatus").text("\u505c\u7528"),g.find(".icon-lock").hide()):"disable"==e?(g.find(".js_changeFormStatus").text("\u542f\u7528"),
g.find(".icon-lock").show()):"submit"==e&&(g.find(".js_changeFormStatus").text("\u542f\u7528"),g.find(".icon-lock").show());"1"==a&&g.find(".isGn").show();g.attr("formid",f).attr("sort",s);g.find("#form-title").text(n);g.find("#form-title").attr("title",n);if(void 0==k||""===k)k="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",g.find("#form-describe").removeClass("description").addClass("nodescription");g.find("#form-describe").text(k);g.find("#form-describe").attr("title",k);g.find(".js_changeFormStatus").attr("formId",
f);g.find(".js_changeFormStatus").attr("status",e);g.find(".js_editForm").attr("formId",f);g.find(".js_copyForm").attr("formId",f);g.find(".js_renameForm").attr("formId",f);g.find(".js_deleteForm").attr("formId",f);g.find(".js_formPreview").attr("formId",f);g.find(".js_formstat").attr("href","/workflows/"+TEAMS.currentUser.id+"/formstat/"+f);g.find("#form-number").css("background-color",b.getRandomColor());g.find("#flowSequence").attr("data-id",f);g.find("#flowSequence").attr("data-value",f);"formstat"==
this.module?(g.find(".js_formstat").removeClass("hide"),g.find(".isGn").remove(),g.find(".js_formmanag").remove(),g.find("#form-title").attr("skiptype","preview")):(g.find(".js_formmanag").removeClass("hide"),g.find(".js_formstat").remove());"prepend"===c?d.prepend(g):d.append(g)},renderCompanyKeyword:function(a){var d=$(this.el),g=$(this.tpl),b=d.find(".js_companyforms"),d=g.siblings("#company-search-clone").find(".j_companySearch").clone();null==b.find(".j_companySearch").get(0)&&b.html(d);var d=
b.find(".js_companysearchlist"),c=a.formPage,k=c.result;a=a.pageNo;b.find("#pageNo-company").val(a);a=b.find(".j_companySearch .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?k.length+parseInt(a):k.length;b.find(".j_companySearch .j_formcount").text("("+a+")");1==c.pageNo&&0==c.result.length?b.find(".js_noresult-company").show():b.find(".js_noresult-company").hide();c.hasNext?b.find("#loadMore-company").show():b.find("#loadMore-company").hide();for(b=0;b<k.length;b++)c=k[b],a=g.siblings("#formitems-company").find(".js_formitemsli").clone(),
this.renderForm(c,d,a,"append");this.buildSerialNumber(d)},renderKeywords:function(a){var d=this,g=d.model,b=$(d.el),c=a.ownership;a.queryType="flowStat";a.pageSize=20;"member"==c&&(a.ownership="personal");b.find("#formlist-loading").show();"company"==c?g.findCompany(a,function(a){d.renderCompanyKeyword(a);b.find("#loadMore-company").attr("isKeyword","isKeyword")}):"member"==c?g.findMember(a,function(a){d.renderMember(a);b.find("#loadMore-member").attr("isKeyword","isKeyword");b.find("#memberformul").show()}):
"personal"==c&&g.findPersonal(a,function(a){d.renderPersonalKeyword(a);b.find("#loadMore-personal").attr("isKeyword","isKeyword")});b.find("#formlist-loading").hide()},deleteForm:function(a,d,g,b){var c=this,k=c.model,e=$(a).parents(".j_formlist");"cloud"===g&&(e=$(a).parents("#cloudformul"));var p=function(g){g&&k.deleteForm(d,function(d){$(a).parents("li").remove();f.notify("\u8868\u5355\u5220\u9664\u6210\u529f");c.buildCount(e);c.buildSerialNumber(e)})};"cloud"===g?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",
p):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+b+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",p)},drag:function(){var a=this;if("formstat"!=a.module){var d=a.model,g=$(a.el),b;b=".js_companyforms #custom-category ul.form-list,.js_companyforms #other-category ul.form-list,.js_personalforms #custom-category ul.form-list,.js_personalforms #other-category ul.form-list";a.isWeaver&&(b+=",.js_cloudforms #custom-category ul.form-list,.js_cloudforms #other-category ul.form-list");g.find(b).sortable({handle:".js_formListBox",
placeholder:"form-placeholder",connectWith:".js_companyforms ul.form-list,.js_cloudforms ul.form-list,.js_personalforms ul.form-list",update:function(d,g){a.buildCount($(this));a.buildSerialNumber($(this));g.item.data("update",!0)},receive:function(a,d){d.item.data("receive",!0)},stop:function(g,b){if(b.item.data("update"))if(b.item.data("update",!1),b.item.data("receive")){b.item.data("receive",!1);var c=b.item.attr("formid"),l=b.item.parents(".js_formcategory").find(".form-category-hd .js_categoryname").attr("id");
d.updateCategory({"form.id":c,"formCategory.id":l},function(d){d.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(b.item))})}else a.sort(b.item)}})}},dragCategory:function(a){var d=this;if("formstat"!=d.module){var g=d.model;$(d.el).find(a).sortable({handle:".form-category-hd",update:function(a,d){d.item.data("update",!0)},stop:function(a,b){if(b.item.data("update")){d.sortCategory($(this));var c={};$(this).find(".js_formcategory #cate-name .js_categoryname").each(function(a){c["formCategories["+
a+"].id"]=$(this).attr("id");c["formCategories["+a+"].sort"]=$(this).attr("sort")});g.formCategorSort(c,function(a){a.message||($(".js_updatecatename").trigger("keydown.FormListView",13),f.notify("\u8868\u5355\u5206\u7c7b\u6392\u5e8f\u6210\u529f"))})}}})}},buildSerialNumber:function(a){a.find('li[class\x3d"js_formitemsli"]').each(function(a){$(this).find("#form-number").text(a+1)})},buildCount:function(a){var d=a.parents(".js_formcategory").find(".js_formitemsli").length;a.parents(".js_formcategory").find(".js_formcount").text("("+
d+")")},sortCategory:function(a){a.find(".js_formcategory").each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var d=this.model,g={},b=a.prevAll(),c=a.next(),k=a.prev(),e=a.parents(".j_formlist").find(".js_formitemsli").eq(0);b.each(function(a){g["forms["+a+"].id"]=$(this).attr("formid")});(b=parseInt(c.attr("sort"))+1)||(b=parseInt(k.attr("sort")));var k=e.attr("formid"),e=parseInt(e.attr("sort")),c=a.attr("formid"),p=a.parents(".js_formcategory").find(".form-category-hd .js_categoryname").attr("id");
g.formId=c;g.sort=b;g.categoryId=p;49990<=e&&(g.firstFormId=k);d.sort(g,function(d){d.sort&&a.attr("sort",d.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});d.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},remove:function(){$(this.el).off(".FormListView");this.formoperationView&&(this.formoperationView.remove(),this.formoperationView=null);this.header&&(this.header.remove(),this.header=null)},renderPersonalForms:function(a){var d=this,g=d.model,
b=$(d.el),c=b.find(".js_forms .js_personalforms");b.find("#formlist-loading").show();a.queryType="flowStart";g.findCateAndPersonal(a,function(a){d.loadCateAndForms(a,c,"personal");d.drag();d.dragCategory(".js_personalforms #custom-category");0<$(".js_personalforms").find(".js_formitemsli").length?$(".js_personalforms .js_noresult-personal").addClass("hide"):$(".js_personalforms .js_noresult-personal").removeClass("hide");b.find("#formlist-loading").hide()})},renderPersonalKeyword:function(a){var d=
$(this.el),g=$(this.tpl),b=d.find(".js_personalforms"),d=g.siblings("#personal-search-clone").find(".j_personalSearch").clone();null==b.find(".j_personalSearch").get(0)&&b.html(d);var d=b.find(".js_personalsearchlist"),c=a.formPage,k=c.result;a=a.pageNo;b.find("#pageNo-personal").val(a);a=b.find(".j_personalSearch .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?k.length+parseInt(a):k.length;b.find(".j_personalSearch .j_formcount").text("("+a+")");1==c.pageNo&&0==c.result.length?b.find(".js_noresult-personal").show():
b.find(".js_noresult-personal").hide();c.hasNext?b.find("#loadMore-personal").show():b.find("#loadMore-personal").hide();for(b=0;b<k.length;b++)c=k[b],a=g.siblings("#formitems-personal").find(".js_formitemsli").clone(),this.renderForm(c,d,a,"append");this.buildSerialNumber(d)},searchFormResult:function(a,d){var g=$(this.el),b={pageNo:1};b.ownership=a;b["formParam.keyword"]=d;if("company"==a){if(g.find(".js_companyforms").empty(),!d){g.find(".js_companyforms").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');
this.renderCompanyForms({queryType:"manange"});return}}else if("member"==a)g.find("#memberformul .js_memberformlist").empty(),g.find("#memberformul").hide();else if("personal"==a&&(g.find(".js_personalforms").empty(),b["formParam.operator.id"]=this.userId,b.formtype="personalform",!d)){g.find(".js_personalforms").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');this.renderPersonalForms({queryType:"manange"});return}this.renderKeywords(b)}});m.exports=
h});
define("teams/workflow/flowstatmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=(new Date).format("{yyyy}-{MM}-{dd}");this.pageNo=1;this.pageSize=10},getDepartmentSelects:function(f){$.ajax({type:"get",url:"/workflows/getDepartmentSelects.json",dataType:"json",success:function(e){f&&f(e)}})},getFlowStat:function(f,e){f.beginDate=this.beginDate;f.endDate=this.endDate;$.ajax({type:"post",data:{flowStatStr:JSON.stringify(f)},
url:"/workflows/getFlowStat.json",dataType:"json",success:function(c){e&&e(c.flowStatData)}})},queryEmpFlowListPage:function(f,e){$.ajax({type:"post",data:{flowStatStr:JSON.stringify(f),pageNo:this.pageNo,pageSize:this.pageSize},url:"/workflows/queryEmpFlowListPage.json",dataType:"json",success:function(c){e&&e(c.empFlowListPage)}})}});m.exports=h});
define("teams/workflow/flowconditionview",["teams/utils","teams/formstat/formstatmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formstatmodel");h=Backbone.View.extend({initialize:function(c){this.el="#flowcondition-dialog";this.formId=c.formId;this.model=new e;this.configCondition=c.configCondition;$("body").append(f.template("flow.flowcondition",{userId:this.userId}))},delegateEvents:function(){var c=this,b=$(this.el);b.on("hidden.bs.modal",function(a){c.remove()});b.on("click.FlowConditionView",
".js_addCondition",function(){c.createConditionTr(1)});b.on("click.FlowConditionView",".js_save",function(){var a=c.getField();c.configCondition.data("conditionJson",a);c.remove()})},render:function(){this.loadField();$("#flowcondition-dialog").modal("show")},getField:function(){var c=[];$(this.el).find(".js_condition_line").each(function(){var b={},a,d,g,l;d=$(this).find("#js_form_field").val();g=$(this).find("#js_arith_symbol").val();l=$(this).find("#js_arith_value").val();a=$(this).find("#js_logic_operator").val();
b.fieldId=d;b.arithSymbol=g;b.arithValue=l;c.push(a);c.push(b)});return JSON.stringify(c)},loadField:function(){$(this.el);this.createConditionTr(1)},createConditionTr:function(c){var b=$(this.el),a=this.model,d={formId:this.formId},g=b.find(".js_conditionList"),l=g.find(".js_condition_line").length;a.getFormField(d,function(a){a=a.formFields;for(var d=l;d<l+c;d++){var e=b.find(".js_conditon_clone\x3e.js_condition_line").clone(!0);e.attr("id","condition_line-"+d);for(d=0;d<a.length;d++)a[d].subForm?
a[d].subForm.title?e.find("#js_form_field").append("\x3coption value\x3d'"+a[d].id+"'\x3e"+a[d].subForm.title+":"+a[d].title+"\x3c/option\x3e"):e.find("#js_form_field").append("\x3coption value\x3d'"+a[d].id+"'\x3e\u5b50\u8868:"+a[d].title+"\x3c/option\x3e"):e.find("#js_form_field").append("\x3coption value\x3d'"+a[d].id+"'\x3e"+a[d].title+"\x3c/option\x3e");g.append(e)}})},remove:function(){var c=$(this.el);c.off(".FlowConditionView");c.remove()}});m.exports=h});
define("teams/workflow/flowsequenceview","teams/utils teams/component/typeahead teams/workflow/flowconditionview teams/workflow/flowsequencemodel teams/formstat/formstatmodel teams/workflow/svgflowchartview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h("teams/workflow/flowconditionview");var c=h("teams/workflow/flowsequencemodel"),b=h("teams/formstat/formstatmodel"),a=h("teams/workflow/svgflowchartview");h=Backbone.View.extend({initialize:function(a){this.formId=
a.entityId;this.sequenceType=a.dataType;this.sequenceType||(this.sequenceType="personal");this.el=a.container;this.callback=a.callback;this.conditionContainer;this.conditionModel=new b;this.model=new c(a);$(this.el).html(f.template("flow.flowsequence"))},delegateEvents:function(){var d=this,g=$(d.el);g.on("click.FlowSequence","#save-sequence",function(){var a=d.buildSequenceParam();null!=a&&(d.isEmptyOperator()?f.notify("\u5b58\u5728\u6ca1\u8bbe\u7f6e\u5ba1\u6279\u4eba\u8282\u70b9, \u8bf7\u4fee\u6539"):
d.flowSequence?d.model.update(a,function(a){f.notify("\u66f4\u65b0\u6210\u529f");d.callback();$("body").trigger("relatedFlow",[d.formId,"show"])}):d.model.create(a,function(a){f.notify("\u8bbe\u5b9a\u6210\u529f");d.flowSequence=a.flowSequence;d.callback();$("body").trigger("relatedFlow",[d.formId,"show"])}))});g.on("click.FlowSequence","#delete-sequence",function(){f.confirm("\u662f\u5426\u786e\u8ba4\u5220\u9664",function(a){a&&d.model.delt({id:d.flowSequence.id,formId:d.formId},function(a){d.callback();
$("body").trigger("relatedFlow",[d.formId,"hide"])})})});g.find("#step-container").off("click",".add-approvers").on("click",".add-approvers",function(){d.createApproverTr(1)});g.find("#step-container").off("click",".btn-delete-approver").on("click",".btn-delete-approver",function(a){$(this).parents(".approver-line").remove();a=$(this).parents(".approver-line").attr("id");a=a[a.length-1];"undefined"!=typeof d.flowSequence&&"undefined"!=typeof d.flowSequence.flowSteps&&a<d.flowSequence.flowSteps.length&&
d.flowSequence.flowSteps.splice(a,1);d.resetApproverSn();d.resetExport()});g.on("click.FlowSequence","#addRole",function(){var a=$(this).parents(".controls").find(".entity-container");0==a.find("#superior").length&&a.append('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"superior"\x3e\u4e0a\u7ea7\x3c/a\x3e\x3c/span\x3e');var d=$(this).parents(".approver-line").find(".approvers-if-check");1<a.find(".entity-item").size()&&d.removeClass("hide")});g.on("click.FlowSequence","#applicant",function(){var a=
$(this).parents(".controls").find(".entity-container");0==a.find("#applicant").length&&a.append('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"applicant"\x3e\u7533\u8bf7\u4eba\x3c/a\x3e\x3c/span\x3e');var d=$(this).parents(".approver-line").find(".approvers-if-check");1<a.find(".entity-item").size()&&d.removeClass("hide")});g.on("click.FlowSequence","#free",function(){$(this).parents(".controls").find(".entity-container").html('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"free"\x3e\u81ea\u7531\u9009\u62e9\x3c/a\x3e\x3c/span\x3e');
$(this).parents(".controls").find("#userSelector, #addRole, #applicant").addClass("disabled");var a=$(this).parents(".controls").find(".approvers-if-check");a.hasClass("hide")&&a.removeClass("hide");a.find("i").hasClass("icon-checkbox-checked")&&(a.find("i").removeClass("icon-checkbox-checked"),a.find("i").addClass("icon-checkbox-unchecked"))});g.on("click.FlowSequence",".close",function(){var a=$(this).prev().text(),d=$(this).parents(".approver-line");"\u81ea\u7531\u9009\u62e9"==a&&($(this).parents(".controls").find("#userSelector, #addRole, #applicant").removeClass("disabled"),
$(this).parents(".controls").find(".approvers-if-check").addClass("hide"));2==d.find(".entity-item").size()&&(d.find(".approvers-if-check").addClass("hide"),d.find(".approvers-if-check").find("i").hasClass("icon-checkbox-checked")&&(d.find(".approvers-if-check").find("i").removeClass("icon-checkbox-checked"),d.find(".approvers-if-check").find("i").addClass("icon-checkbox-unchecked")))});g.on("click.FlowSequence",".approvers-not-verify",function(){$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");
$(this).next().find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});g.on("click.FlowSequence",".approvers-is-verify",function(){$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).prev().find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});g.on("click.FlowSequence",".approvers-if-check",function(){$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});
g.on("click.FlowSequence",".j_range",function(){$(this).toggleClass("open")});g.on("click.FlowSequence",".j_configCondition",function(){d.conditionContainer=$(this);g.find("#fasten-container,#js_sequenceHeader").addClass("hide");g.find("#js_flowconditonContainer,#js_conditionHeader").removeClass("hide");g.find(".js_conditionList").html("");g.next(".modal-footer").hide();d.renderFlowCondition();d.conditionContainer.data("flowConditionAttrs")&&d.loadConditionTr(d.conditionContainer.data("flowConditionAttrs"))});
g.on("click.FlowSequence","#js_addExport",function(){for(var a=g.find("#js_export_clone .export-line").clone(!0),d=g.find("#approvers-container .approver-line"),b=$(this).parents(".approver-line").attr("id"),c="",b=parseInt(b.charAt(b.length-1))+2;b<d.length;b++)var e=$(d[b]).find(".flow-node-name"),f=$(e).attr("id"),e=$(e).val()?$(e).val():$(e).attr("placeholder"),c=c+'\x3coption id\x3d"'+f+'"\x3e'+e+"\x3c/option\x3e";c+='\x3coption id\x3d""\x3e\u7ed3\u675f\x3c/option\x3e';a.find("#js_conditional_export").html(c);
$(this).parents("#js_exportSet").append(a)});g.on("click.FlowSequence","#js_delExport",function(){$(this).parents(".export-line").remove()});g.on("keyup.FlowSequence",".flow-node-name",function(a){a=$(this).attr("id");g.find("#"+a+" span").text($(this).val()?$(this).val():$(this).attr("placeholder"))});g.on("click.FlowSequence","#js_backSequence",function(){g.find("#fasten-container,#js_sequenceHeader").removeClass("hide");g.find("#js_flowconditonContainer,#js_conditionHeader,#js_flowchartHeader,#j_flowchartWrap").addClass("hide");
g.next(".modal-footer").show()});g.on("click.FlowSequence",".js_clear",function(){g.find(".js_conditionList").html("");d.renderFlowCondition()});g.on("click.FlowSequence",".js_condition_line",function(){$(this).addClass("active").siblings(".js_condition_line").removeClass("active");var a=$(this).find("#js_form_field").attr("value");g.find("#js_form_field_set option[id\x3d'"+a+"']").attr("selected",!0);d.loadConditionSet();g.find("#js_conditionSet").attr("value",$(this).attr("id"));a=$(this).find("#js_form_field").attr("key");
if("System_Department"==a||"System_Rank"==a)g.find("#js_variables option[key\x3d'"+a+"']").attr("selected",!0),g.find("#js_variables").trigger("change.FlowSequence");var b=$(this).find("#js_arith_symbol_left").attr("value"),c=$(this).find("#js_arith_value_left").text(),e=$(this).find("#js_arith_value_right").text();if("NumberComponent"==a||"Money"==a)g.find(".js_formField_condition .j_numberCheck").eq(0).val(c),g.find(".js_formField_condition .j_numberCheck").eq(1).val(e);else if("DateComponent"==
a)g.find(".js_formField_condition #startTime").val(c),g.find(".js_formField_condition #endTime").val(e);else if("RadioBox"==a||"CheckBox"==a||"Select"==a||"System_Department"==a||"System_Rank"==a){g.find(".js_formField_condition #js_arith_symbol_set option[value\x3d'"+b+"']").attr("selected",!0);var f=g.find(".js_formField_condition .entity-container");$(this).find(".js_arith_value_select").each(function(){var a=$(this).attr("value"),d=$(this).text();f.append('\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+
a+'"\x3e'+d+"\x3c/a\x3e\x3c/span\x3e")})}});g.on("click.FlowSequence",".js_condition_line .js_delCondition",function(){$(this).parents(".js_condition_line").remove();d.resetConditionSn();return!1});g.on("click.FlowSequence",".js_addCondition",function(){var a=g.find("#js_form_field_set").find("option:selected").attr("key"),b,c;"NumberComponent"==a||"Money"==a?(b=g.find(".js_formField_condition .j_numberCheck").eq(0).val(),c=g.find(".js_formField_condition .j_numberCheck").eq(1).val(),(b||c)&&d.createConditionTr(a,
b,c)):"DateComponent"==a?(b=g.find(".js_formField_condition #startTime").val(),c=g.find(".js_formField_condition #endTime").val(),(b||c)&&d.createConditionTr(a,b,c)):"RadioBox"==a||"CheckBox"==a||"Select"==a?(b=[],g.find(".js_formField_condition .js_arith_value_set .entity-item").each(function(){var a={},d=$(this).find("a").attr("id"),g=$(this).find("a").text();a.id=d;a.name=g;b.push(a)}),0<b.length&&d.createConditionTr(a,b)):"SystemVariables"==a&&(a=g.find(".js_formField_condition #js_variables").find("option:selected").attr("key"),
b=[],g.find(".js_formField_condition .js_arith_value_set .entity-item").each(function(){var a={},d=$(this).find("a").attr("id"),g=$(this).find("a").text();a.id=d;a.name=g;b.push(a)}),0<b.length&&d.createConditionTr(a,b));d.loadConditionSet()});g.on("click.FlowSequence",".js_save",function(){var a=d.getField();d.conditionContainer.data("flowConditionAttrs",a);g.find("#js_backSequence").trigger("click.FlowSequence")});g.on("change.FlowSequence","#js_form_field_set",function(){d.loadConditionSet()});
g.on("change.FlowSequence","#js_variables",function(){var a=g.find("#js_variables").find("option:selected");a.attr("id");var b=a.attr("key");if("System_Department"==b||"System_Rank"==b)clone="System_Department"==b?g.find("#js_System_Department_clone").clone():g.find("#js_System_Rank_clone").clone(),g.find(".js_formField_condition .js_System_condition").html(clone.html()),e({el:".js_formField_condition .typeahead-wrapper input",callback:function(a){if(a&&!$.isEmptyObject(a)){$.isArray(a)||(a=[a]);
for(var c=0,l=a.length;c<l;c++){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+a[c].id+'"\x3e'+a[c].name+"\x3c/a\x3e\x3c/span\x3e",f=g.find(".js_formField_condition .entity-container");0<f.find("#"+a[c].id).length||f.append(e)}var h=[];g.find(".js_formField_condition .js_arith_value_set .entity-item").each(function(){var a={},d=$(this).find("a:first").attr("id"),b=$(this).find("a:first").text();a.id=d;a.name=b;h.push(a)});0<h.length&&d.updateConditionTr(b,h)}}})});g.on("keyup.FlowSequence",
".j_numberCheck",function(a){a=$(this).val();$(this).val(a.replace(/[^\d.-]/g,""))});g.on("blur.FlowSequence",".j_numberCheck",function(a){$(this).trigger("keyup.FlowSequence")});g.on("keydown.FlowSequence",".j_numberCheck",function(a){a=parseInt(a.keyCode);var d=$(this).val();if((110==a||190==a)&&0<=d.indexOf(".")||(109==a||173==a)&&0<=d.indexOf("-"))return!1});g.on("blur.FlowSequence",".j_numberCheck",function(a){a=g.find("#js_form_field_set").find("option:selected").attr("key");var b,c;b=g.find(".js_formField_condition .j_numberCheck").eq(0).val();
c=g.find(".js_formField_condition .j_numberCheck").eq(1).val();d.updateConditionTr(a,b,c)});g.on("removeEntity.FlowSequence",".js_arith_value_set",function(a){a=g.find("#js_form_field_set").find("option:selected").attr("key");var b=[];g.find(".js_formField_condition .js_arith_value_set .entity-item").each(function(){var a={},d=$(this).find("a:first").attr("id"),g=$(this).find("a:first").text();a.id=d;a.name=g;b.push(a)});"SystemVariables"==a&&(a=g.find("#js_variables").find("option:selected").attr("key"));
0<b.length&&d.updateConditionTr(a,b)});g.on("change.FlowSequence","#js_arith_symbol_set",function(a){g.find(".js_arith_value_set").trigger("removeEntity.FlowSequence")});g.on("click.FlowSequence",".js_preview_flow",function(b){b=d.buildSequenceParam();null==b?f.notify("\u60a8\u9700\u8981\u5148\u914d\u7f6e\u5ba1\u6279\u8282\u70b9\uff0c\u7136\u540e\u91cd\u8bd5"):(d.isEmptyOperator()&&f.notify("\u5b58\u5728\u6ca1\u8bbe\u7f6e\u5ba1\u6279\u4eba\u8282\u70b9"),g.find("#j_flowchartWrap, #js_flowchartHeader").removeClass("hide"),
g.find("#js_sequenceHeader, #fasten-container").addClass("hide"),d.flowChartView&&(d.flowChartView.remove(),null==d.flowChartView),d.flowChartView=new a({flowData:JSON.parse(b),parentEl:g,el:"#js_flowchartContainer",isDynamic:!1,isModal:!0}),d.flowChartView.render())})},render:function(){var a=this,b=$(a.el);this.model.query(a.formId,function(c){"personal"==a.sequenceType&&(b.find("#addRole").remove(),b.find("#free").remove(),b.find(".js_preview_flow").remove());c.flowSequence?(c=c.flowSequence,a.flowSequence=
c,a.loadStep(c.flowSteps,c.type),a.loadExportSet(c.flowPaths)):(b.find("#delete-sequence").addClass("hide"),a.createApproverTr(3))});b.find(".j_conditionScr").attr("auto-scroll","yes").css({"max-height":"334px","background-color":"#ffffff"});f.layout(".j_conditionScr",[{gotoTopButton:!1}])},renderFlowCondition:function(){$(this.el).find("#js_form_field_set").html("");this.loadField()},loadConditionSet:function(){var a=this,b=$(a.el),c=(new Date).getTime(),n=b.find("#js_form_field_set").find("option:selected");
n.attr("id");var k=n.attr("key"),n="";b.find("#js_conditionSet").attr("value","");"NumberComponent"==k||"Money"==k?(n=b.find("#js_NumberComponent_clone").clone(),b.find(".js_formField_condition").html(n.html())):"DateComponent"==k?(n=b.find("#js_DateComponent_clone").clone(),n.find(".j_datetime").attr("id","j_datetime"+c),b.find(".js_formField_condition").html(n.html()),f.datepicker({el:a.el+" #j_datetime"+c+" #startTime",callback:function(k){var e=Date.create(k.date).format("{yyyy}-{MM}-{dd}");k=
$(a.el+" #j_datetime"+c).find("#startTime");var n=$(a.el+" #j_datetime"+c).find("#endTime");n.val()&&e>n.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),k.val("")):(k.val(e),e=b.find("#js_form_field_set").find("option:selected").attr("key"),a.updateConditionTr(e,k.val(),n.val()))}}),f.datepicker({el:a.el+" #j_datetime"+c+" #endTime",callback:function(k){var e=Date.create(k.date).format("{yyyy}-{MM}-{dd}");k=$(a.el+" #j_datetime"+c).find("#startTime");var n=
$(a.el+" #j_datetime"+c).find("#endTime");k.val()&&e<k.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),n.val("")):(n.val(e),e=b.find("#js_form_field_set").find("option:selected").attr("key"),a.updateConditionTr(e,k.val(),n.val()))}})):"RadioBox"==k||"CheckBox"==k||"Select"==k?(clone=b.find("#js_RadioBox_clone").clone(),b.find(".js_formField_condition").html(clone.html()),e({el:".js_formField_condition .typeahead-wrapper input",callback:function(c){if(c&&
!$.isEmptyObject(c)){$.isArray(c)||(c=[c]);for(var l=0,e=c.length;l<e;l++){var n='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+c[l].id+'"\x3e'+c[l].name+"\x3c/a\x3e\x3c/span\x3e",f=b.find(".js_formField_condition .entity-container");0<f.find("#"+c[l].id).length||f.append(n)}var h=[];b.find(".js_formField_condition .js_arith_value_set .entity-item").each(function(){var a={},d=$(this).find("a:first").attr("id"),b=$(this).find("a:first").text();a.id=d;a.name=b;h.push(a)});0<h.length&&a.updateConditionTr(k,
h)}}})):"SystemVariables"==k&&(k=b.find("#js_variables").find("option:selected").attr("key"),clone=b.find("#js_System_Variables_clone").clone(),b.find(".js_formField_condition").html(clone.html()),b.find(".js_formField_condition").find("#js_variables").find("option[key\x3d'"+k+"']").attr("selected",!0),b.find("#js_variables").trigger("change.FlowSequence"))},loadField:function(){var a=$(this.el),b=this.conditionModel,c={formId:this.formId};a.find("#js_form_field_set").html('\x3coption id\x3d"system_variables" key\x3d"SystemVariables"\x3e\u7cfb\u7edf\u53d8\u91cf\x3c/option\x3e');
b.getFormField(c,function(b){b=b.formFields;for(var g=0;g<b.length;g++){var c=b[g],l=c.componentKey,c=$("\x3coption id\x3d"+c.id+" key\x3d"+l+"\x3e"+c.title+"\x3c/option\x3e");"DateComponent"!=l&&"NumberComponent"!=l&&"Money"!=l&&"RadioBox"!=l&&"CheckBox"!=l&&"Select"!=l||a.find("#js_form_field_set").append(c)}1>a.find("#js_form_field_set option").length&&f.notify("\u65e0\u53ef\u8bbe\u7f6e\u6761\u4ef6\u7684\u8868\u5355\u5b57\u6bb5\uff01");a.find("#js_form_field_set").trigger("change.FlowSequence")})},
getField:function(){var a=[];$(this.el).find(".js_conditionList .js_condition_line").each(function(){var b={},c,e,k,f,p,s;c=$(this).find("#js_form_field").attr("value");s=$(this).find("#js_form_field").attr("key");e=$(this).find("#js_arith_symbol_left").attr("value");arithSymbolLeftName=$(this).find("#js_arith_symbol_left").text();k=$(this).find("#js_arith_symbol_right").attr("value");arithSymbolRightName=$(this).find("#js_arith_symbol_right").text();if("RadioBox"==s||"CheckBox"==s||"Select"==s||
"System_Department"==s||"System_Rank"==s){b.fieldId=c;b.fieldName=$(this).find("#js_form_field").text();var u=[];$(this).find(".js_arith_value_select").each(function(){var a={};a.id=$(this).attr("value");a.name=$(this).text();u.push(a)});b.value=u;b.arithSymbolLeft=e;b.arithSymbolLeftName=arithSymbolLeftName}else f=$(this).find("#js_arith_value_left").text(),p=$(this).find("#js_arith_value_right").text(),f&&(b.fieldId=c,b.fieldName=$(this).find("#js_form_field").text(),b.arithSymbolLeft=e,b.arithSymbolLeftName=
arithSymbolLeftName,b.arithValueLeft=f),p&&(b.fieldId=c,b.fieldName=$(this).find("#js_form_field").text(),b.arithSymbolRight=k,b.arithSymbolRightName=arithSymbolRightName,b.arithValueRight=p);b.componentKey=s;a.push(b)});return a},updateConditionTr:function(a,b,c){var e=$(this.el),k=e.find("#js_conditionSet").attr("value");""!=k&&(b||c?(this.createConditionTr(a,b,c),e.find(".js_conditionList #"+k).html(""),e.find(".js_conditionList #"+k).html(e.find(".js_conditionList .js_condition_line:last").html()),
e.find(".js_conditionList .js_condition_line:last").remove()):e.find(".js_conditionList").find("#"+k).remove(),this.resetConditionSn())},createConditionTr:function(a,b,c){var e=$(this.el),k=e.find(".js_conditionList"),f=k.find(".js_condition_line").length,p=e.find("#js_form_field_set").find("option:selected").attr("id"),s=e.find(".js_conditon_clone\x3e.js_condition_line").clone(!0);s.attr("id","condition-line-"+f);var u;u="System_Department"==a||"System_Rank"==a?e.find("#js_form_field_set").find("option:selected").text()+
":"+e.find("#js_variables").find("option:selected").text():e.find("#js_form_field_set").find("option:selected").text();s.find("#js_form_field").text(u).attr("value",p).attr("key",a);if("NumberComponent"==a||"Money"==a||"DateComponent"==a)b&&(s.find("#js_arith_value_left").text(b),s.find(".js_left").removeClass("hide"),0==f&&s.find("#js_logic_operlabletor_left").addClass("hide")),c&&(s.find("#js_arith_value_right").text(c),s.find(".js_right").removeClass("hide"),b||(0==f?s.find("#js_logic_operlabletor_left").addClass("hide"):
s.find("#js_logic_operlabletor_left").removeClass("hide"),s.find("#js_logic_operlabletor_right").addClass("hide")));else if("RadioBox"==a||"CheckBox"==a||"Select"==a||"System_Department"==a||"System_Rank"==a){a=e.find("#js_arith_symbol_set").find("option:selected").text();e=e.find("#js_arith_symbol_set").find("option:selected").attr("value");s.find("#js_arith_symbol_left").text(a).attr("value",e);for(e=0;e<b.length;e++)a='\x3clable class\x3d"js_arith_value_select" value\x3d"'+b[e].id+'"\x3e'+b[e].name+
"\x3c/lable\x3e",0==e?s.find("li").append(a):s.find("li").append("\x3clable\x3e\u6216\x3c/lable\x3e"+a);0!=f&&s.find("#js_logic_operlabletor_left").removeClass("hide");s.find("#js_arith_symbol_left").removeClass("hide")}k.append(s)},loadConditionTr:function(a){for(var b=$(this.el),c=b.find(".js_conditionList"),e=0;e<a.length;e++){var k=a[e],f=b.find(".js_conditon_clone\x3e.js_condition_line").clone(!0);f.attr("id","condition-line-"+e);var p=k.componentKey;f.find("#js_form_field").text(k.fieldName).attr("value",
k.fieldId).attr("key",p);if("RadioBox"==p||"CheckBox"==p||"Select"==p||"System_Department"==p||"System_Rank"==p)for(f.find("#js_arith_symbol_left").text(k.arithSymbolLeftName).attr("value",k.arithSymbolLeft).removeClass("hide"),k=k.value,p=0;p<k.length;p++){var s='\x3clable class\x3d"js_arith_value_select" value\x3d"'+k[p].id+'"\x3e'+k[p].name+"\x3c/lable\x3e";0==p?f.find("li").append(s):f.find("li").append("\x3clable\x3e\u6216\x3c/lable\x3e"+s)}else k.arithValueLeft&&k.arithValueRight?(f.find("#js_arith_value_left").text(k.arithValueLeft),
f.find("#js_arith_value_right").text(k.arithValueRight),f.find(".js_left,.js_right").removeClass("hide")):!k.arithValueLeft&&k.arithValueRight?(f.find("#js_arith_value_right").text(k.arithValueRight),f.find("#js_logic_operlabletor_left").removeClass("hide"),f.find("#js_arith_symbol_right,#js_arith_value_right").removeClass("hide")):k.arithValueLeft&&!k.arithValueRight&&(f.find("#js_arith_value_left").text(k.arithValueLeft),f.find(".js_left").removeClass("hide"));0==e?f.find("#js_logic_operlabletor_left").addClass("hide"):
f.find("#js_logic_operlabletor_left").removeClass("hide");c.append(f)}},resetConditionSn:function(){$(this.el).find(".js_conditionList").find(".js_condition_line").each(function(a){$(this).attr("id","condition-line-"+a);$(this).find(".flow-node-name").attr("placeholder",a+"\u7ea7\u5ba1\u6279");0==a&&$(this).find("#js_logic_operlabletor_left").addClass("hide")})},resetExport:function(){for(var a=$(this.el),b=a.find("#approvers-container .flow-node-name"),c=a.find("#approvers-container .js_export_default_line"),
e=0;e<c.length-1;e++){var a=c[e],k=$(b[e+1]).val()?$(b[e+1]).val():$(b[e+1]).attr("placeholder");$(a).attr("id",$(b[e+1]).attr("id"));$(a).find("span").text(k);$(a).parents("#js_exportSet").find(".js_export").each(function(){for(var a=$(this).find("#js_conditional_export").find("option:selected").attr("id"),d="",k=e+2;k<c.length;k++)var f=$(b[k]).attr("id"),h=$(b[k]).val()?$(b[k]).val():$(b[k]).attr("placeholder"),d=d+'\x3coption id\x3d"'+f+'"\x3e'+h+"\x3c/option\x3e";d+='\x3coption id\x3d""\x3e\u7ed3\u675f\x3c/option\x3e';
$(this).find("#js_conditional_export").html(d);$(this).find("#js_conditional_export").find("option[id\x3d'"+a+"']").attr("selected",!0)})}$(c[e-1]).find("#js_addExport").show();a=c[e];$(a).parent().find(".js_export").remove();$(a).find("#js_addExport").hide();$(a).attr("id","");$(a).find("span").text("\u7ed3\u675f")},buildSequenceParam:function(){$(this.el);var a=this.getStep(),b=this.getFlowPath();if(this.isEmptyStep(a))return null;var c={};this.flowSequence&&(c.id=this.flowSequence.id);c.type=this.sequenceType;
c.formId=this.formId;return'{"flowSequence":'+JSON.stringify(c)+',"flowSteps":'+a+',"flowPaths":'+b+"}"},getStep:function(){var a=[];$(this.el).find("#approvers-container .approver-line").each(function(){if(0==$(this).find(".entity-item").length){var b=$(this).attr("id");if(0!=parseInt(b.charAt(b.length-1)))return}var b={},g=[],c,l,e,f,h;$(this).find(".entity-item").each(function(){var a={},d={},b=$(this).find("a").attr("id");"superior"==b?a.operatorRule="superior":"applicant"==b?a.operatorRule="applicant":
"free"==b?a.operatorRule="free":(d.id=$(this).find("a").attr("userid"),d.username=$(this).find("a").text(),a.operator=d);g.push(a)});h=$(this).find(".flow-node-name");h.val()?c=h.val():h.attr("placeholder")&&(c=h.attr("placeholder"));h=h.attr("id");$(this).find(".approvers-is-verify").each(function(){l=$(this).find(".icon-checkbox-checked").size()?!0:!1});$(this).find(".approvers-if-check").each(function(){e=$(this).find(".icon-checkbox-checked").size()?!0:!1});$(this).find(".approvers-if-edit").each(function(){f=
$(this).find(".open").size()?!0:!1});b.flowOperators=g;b.id=h;b.title=c;b.verify=l;b.orCheck=e;b.formWritable=f;a.push(b)});var b=[];"\u63d0\u4ea4\u8282\u70b9"==a[0].title&&(a[0].type="start");for(var c=1;c<a.length-1;c++)a[c].type="middle";a[a.length-1].type="end";b.add(a);return JSON.stringify(b)},getFlowPath:function(){var a=[];$(this.el).find("#approvers-container").find(".export-line").each(function(){var b={},c,e={},k={},f={};b.exportName=$(this).find(".js_export_text").val();k.id=$(this).parents(".approver-line").find(".flow-node-name").attr("id");
b.start=k;if($(this).hasClass("js_export_default_line")){if(c=$(this).attr("id"))e.id=c,b.end=e;a.push(b);return!0}k=$(this).find(".j_configCondition").data("flowConditionAttrs");if(c=$(this).find("#js_conditional_export").find("option:selected").attr("id"))e.id=c,b.end=e;if(k&&0<k.length){e="";for(c=0;c<k.length;c++){var p="",s=k[c].fieldId;"system_department"!=s&&"system_rank"!=s&&(s="fieldId"+s);var u=k[c].componentKey,h=k[c].arithSymbolLeft,v=k[c].arithSymbolRight,x=k[c].arithValueLeft,y=k[c].arithValueRight,
z=k[c].value;if("RadioBox"==u||"CheckBox"==u||"Select"==u||"System_Department"==u||"System_Rank"==u)if("IN"==h){p="System_Department"==u||"System_Rank"==u?"$STRIN("+u+',"':"$STRIN("+s+',"';for(s=0;s<z.length;s++)p=0==s?p+z[s].id:p+",#,"+z[s].id;p+='")'}else{if("NOTIN"==h){p="System_Department"==u||"System_Rank"==u?"$STRNOTIN("+u+',"':"$STRNOTIN("+s+',"';for(s=0;s<z.length;s++)p=0==s?p+z[s].id:p+",#,"+z[s].id;p+='")'}}else"DateComponent"==u?x&&y?p=s+h+"["+x+"]\x26\x26"+s+v+"["+y+"]":!x&&y?p=s+v+"["+
y+"]":x&&!v&&(p=s+h+"["+x+"]"):x&&y?p=s+h+x+"\x26\x26"+s+v+y:!x&&y?p=s+v+y:x&&!v&&(p=s+h+x);e=0==c?e+p:e+"\x26\x26"+p}k=JSON.stringify(k);f.expression=e;f.expressionJson=k;b.flowCondition=f;a.push(b)}else return!0});return JSON.stringify(a)},loadStep:function(a,b){for(var c=$(this.el),e=c.find("#approvers-container"),k=0;k<a.length;k++){var f=c.find("#approvers-clone\x3e.approver-line").clone(!0),p=a[k],s=p.flowOperators,u=f.find(".entity-container");f.attr("id","approver-line-"+k);f.find(".flow-node-name").attr("placeholder",
k+"\u7ea7\u5ba1\u6279").attr("id",p.id).attr("value",a[k].title);for(var h=0,v=s.length;h<v;h++){var x,y=s[h];y.operatorRule?"superior"==y.operatorRule?x='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"superior"\x3e\u4e0a\u7ea7\x3c/a\x3e\x3c/span\x3e':"applicant"==y.operatorRule?x='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"applicant"\x3e\u7533\u8bf7\u4eba\x3c/a\x3e\x3c/span\x3e':"free"==y.operatorRule&&(x='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"free"\x3e\u81ea\u7531\u9009\u62e9\x3c/a\x3e\x3c/span\x3e',
u.parent().find("#userSelector, #addRole, #applicant").addClass("disabled")):(x=y.operator,x='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+x.id+'" class\x3d"usercard-toggle" userid\x3d"'+x.id+'"\x3e'+x.username+"\x3c/a\x3e\x3c/span\x3e");u.append(x)}0==k&&"start"==p.type?(f.find(".flow-node-name").val("\u63d0\u4ea4\u8282\u70b9").attr("readOnly",!0),f.find(".btn-delete-approver").remove(),f.find("#js_approve_type,#js_approver").addClass("hide")):0==k&&"start"!=p.type&&"company"==b&&this.createApproverTr(1);
e.append(f);s="j_step_"+(new Backbone.View).cid;f.find(".control-input").addClass(s);this.userSelect(s);s=f.find(".approvers-is-verify");h=f.find(".approvers-not-verify");p.verify?(s.find("i").attr("class","icon-checkbox-checked"),h.find("i").attr("class","icon-checkbox-unchecked")):(h.find("i").attr("class","icon-checkbox-checked"),s.find("i").attr("class","icon-checkbox-unchecked"));s=f.find(".approvers-if-check");1<u.find(".entity-item").size()||"\u81ea\u7531\u9009\u62e9"==u.find(".entity-item").text()?
s.removeClass("hide"):s.addClass("hide");p.orCheck&&s.find("i").attr("class","icon-checkbox-checked");s=f.find(".approvers-if-edit");p.formWritable&&s.find(".j_range").toggleClass("open")}this.resetExport();"personal"==this.sequenceType&&c.find(".approver-line").each(function(){$(this).find("#js_flowset").addClass("hide")})},loadExportSet:function(a){for(var b=$(this.el),c=0;c<a.length;c++){var e=a[c],k=b.find(".flow-node-name[id\x3d'"+e.start.id+"']").parents(".approver-line");if(e.flowCondition){var f=
b.find("#js_export_clone .export-line").clone(!0);f.find(".js_export_text").val(e.exportName);for(var p=b.find("#approvers-container .approver-line"),s=k.attr("id"),u="",s=parseInt(s.charAt(s.length-1))+2;s<p.length;s++)var h=$(p[s]).find(".flow-node-name"),v=$(h).attr("id"),h=$(h).val()?$(h).val():$(h).attr("placeholder"),u=u+'\x3coption id\x3d"'+v+'"\x3e'+h+"\x3c/option\x3e";u+='\x3coption id\x3d""\x3e\u7ed3\u675f\x3c/option\x3e';f.find("#js_conditional_export").html(u);e.end?f.find("#js_conditional_export").find("option[id\x3d'"+
e.end.id+"']").attr("selected",!0):f.find("#js_conditional_export").val("\u7ed3\u675f");e=e.flowCondition;f.find(".j_configCondition").data("flowConditionAttrs",JSON.parse(e.expressionJson));k.find("#js_exportSet").append(f)}else k.find(".js_export_default_line input").val(e.exportName),e.end&&k.find(".js_export_default_line").attr("id",e.end.id)}},createApproverTr:function(a){for(var b=this,c=$(b.el),e=c.find("#approvers-container"),k=e.find(".approver-line").length,f=b.model,p=k;p<k+a;p++){var s=
c.find("#approvers-clone\x3e.approver-line").clone(!0);s.attr("id","approver-line-"+p);var u="approver-selector"+p;s.find(".approvers-if-check").addClass("hide");var h;f.createFlowStepId(void 0,function(a){h=a.flowStepId;"personal"==b.sequenceType?s.find(".flow-node-name").attr("placeholder",p+1+"\u7ea7\u5ba1\u6279").attr("id",h):s.find(".flow-node-name").attr("placeholder",p+"\u7ea7\u5ba1\u6279").attr("id",h)});s.find(".control-input").addClass(u);e.append(s);0==p&&"personal"!=b.sequenceType?(s.find(".flow-node-name").val("\u63d0\u4ea4\u8282\u70b9").attr("readOnly",
!0),s.find(".btn-delete-approver").remove(),s.find("#js_approve_type,#js_approver").addClass("hide"),entity='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"applicant"\x3e\u7533\u8bf7\u4eba\x3c/a\x3e\x3c/span\x3e',s.find(".entity-container").append(entity)):("personal"==b.sequenceType&&s.find("#js_flowset").addClass("hide"),u="j_step_"+(new Backbone.View).cid,s.find(".control-input").addClass(u),b.userSelect(u))}b.resetExport()},userSelect:function(a){var b=$(this.el);e({el:this.el+" ."+a,callback:function(c){if(c&&
!$.isEmptyObject(c)){$.isArray(c)||(c=[c]);for(var e=0,k=c.length;e<k;e++){var f='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+c[e].id+'" class\x3d"usercard-toggle" userid\x3d"'+c[e].id+'"\x3e'+c[e].name+"\x3c/a\x3e\x3c/span\x3e",p=b.find("."+a).parent().prev();0<p.find("#"+c[e].id).length||p.append(f)}c=p.parents(".approver-line").find(".approvers-if-check");1<p.find(".entity-item").size()&&c.removeClass("hide");b.find("#addRole").removeClass("hide");b.find("#roleSelect").parent().addClass("hide")}}})},
isEmptyStep:function(a){if("[]"==a)return f.notify("\u8bf7\u6dfb\u52a0\u8282\u70b9\u5ba1\u6279\u4eba\u540e\u518d\u63d0\u4ea4"),!0;a=JSON.parse(a);return 1==a.length&&"\u63d0\u4ea4\u8282\u70b9"==a[0].title?(f.notify("\u8bf7\u6dfb\u52a0\u8282\u70b9\u5ba1\u6279\u4eba\u540e\u518d\u63d0\u4ea4"),!0):!1},isEmptyOperator:function(){var a=!1;$(this.el).find("#approvers-container .approver-line").each(function(){if(0==$(this).find(".entity-item").length){var b=$(this).attr("id");if(0!=parseInt(b.charAt(b.length-
1)))return a=!0,!1}});return a},resetApproverSn:function(){var a=this;$(a.el).find("#approvers-container").find(".approver-line").each(function(b){$(this).attr("id","approver-line-"+b);"personal"==a.sequenceType?$(this).find(".flow-node-name").attr("placeholder",b+1+"\u7ea7\u5ba1\u6279"):$(this).find(".flow-node-name").attr("placeholder",b+"\u7ea7\u5ba1\u6279")});a.resetExport()},remove:function(){$(this.el).off(".FlowSequence")}});m.exports=h});
define("teams/workflow/workflowpage","teams/utils teams/core/page teams/workflow/workflowrightview teams/views/feedbackview teams/workflow/requestlistview teams/workflow/formlistview teams/formstat/formstatview teams/form/formcloudview teams/component/trashbinview teams/report/flowreportview teams/workflow/flowstatview teams/form/formpersonalview teams/form/formcompanyview teams/form/formemployeeview".split(" "),function(h,q,m){h("teams/utils");q=h("teams/core/page");h("teams/workflow/workflowrightview");
var f=h("teams/views/feedbackview"),e=h("teams/workflow/requestlistview"),c=h("teams/workflow/formlistview"),b=h("teams/formstat/formstatview"),a=h("teams/form/formcloudview"),d=h("teams/component/trashbinview"),g=h("teams/report/flowreportview"),l=h("teams/workflow/flowstatview"),n=h("teams/form/formpersonalview"),k=h("teams/form/formcompanyview"),r=h("teams/form/formemployeeview");h=q.extend({initialize:function(a){this.isAdmin=TEAMS.currentUser.admin;this.userId=a.userId?a.userId:TEAMS.currentUser.id;
this.id=a.id;this.formId=a.formId;this.searchType=a.searchType?a.searchType:"todo";this.ownership=a.ownership||"personal";"formsPersonal"==this.searchType&&(this.ownership="personal",this.searchType="forms");this.pageKey="flow#"+this.searchType+this.formId;this.template="workflow.workflowpage";this.pageActive="workflow";this.el="#mainContainer"},delegateEvents:function(){var a=this;$(a.el);this.on("create",function(a){this.mainView.insertWorkflow(a.flow,a.userId)});this.on("remove",function(a){this.mainView.removeWorkflow(a)});
this.on("changeWatch",function(a){this.mainView.changeWatch(a.id,a.watched)});this.on("changeTitle",function(a){this.mainView.changeTitle(a.id,a.name)});$("body").off("click",".j_all_flowMenu .j_more_menu").on("click",".j_all_flowMenu .j_more_menu",function(){0==$(this).attr("menu-state")?a.showMore():a.hideMore()})},render:function(){var p=this,s=$(p.el),u=p.searchType;p.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,isAdmin:this.isAdmin},function(){p.renderType()});
switch(u){case "report":s.find("#j_flowscroll").removeClass("scrollwrapper");p.mainView=new g({userId:p.userId,el:"#j_flowscroll"});break;case "flowstat":p.mainView=new l({userId:p.userId,el:"#j_flowscroll"});break;case "employee":p.mainView=new r({userId:p.userId,container:p.el+" #j_flowscroll",type:p.type,pageModule:"workflow"});break;case "company":p.mainView=new k({userId:p.userId,container:p.el+" #j_flowscroll",type:p.type,pageModule:"workflow"});break;case "personal":p.mainView=new n({userId:p.userId,
container:p.el+" #j_flowscroll",type:p.type,pageModule:"workflow"});break;case "formstat":p.mainView=p.formId?new b({formId:p.formId,container:p.el+" #j_flowscroll"}):new c({userId:p.userId,container:p.el+" #j_flowscroll",module:u});break;case "feedbackflow":p.mainView=new f({container:"#j_flowscroll",showtitle:"0",navs:[".workflow-dynamic"],module:"workflow",moduleName:"\u5ba1\u6279",showReaded:"1",userId:p.userId,groupShow:"1",noscroll:!0});break;case "formcloud":p.mainView=new a({id:p.userId,el:p.el+
" #j_flowscroll",module:"workflow"});break;case "trashbin":p.mainView=new d({userId:p.userId,container:p.el+" #j_flowscroll",module:"workflow"});break;default:p.mainView=new e({userId:p.userId,id:p.id,searchType:u});-1<u.indexOf("todo")&&($(".j_todo").addClass("active"),$("#todo-flow-menu").show());if(-1<u.indexOf("finshed")||"done"===u)$(".j_finshed").addClass("active"),$("#finshed-flow-menu").show();-1<u.indexOf("minecreate")&&($(".j_minecreate").addClass("active"),$("#create-flow-menu").show());
-1<u.indexOf("watched")&&($(".j_watched").addClass("active"),$("#watched-flow-menu").show(),$(".workflow-watchs").addClass("hide"));-1<u.indexOf("sharetome")&&($(".j_sharetome").addClass("active"),$("#sharetome-flow-menu").show(),$(".workflow-share").addClass("hide"));-1<u.indexOf("all")&&($(".j_all").addClass("active"),$("#all-flow-menu").show())}p._render(".j_"+u)},renderType:function(){if(TEAMS.blogUser){var a="",a="female"==TEAMS.blogUser.sex?"\u5979\u7684":"\u4ed6\u7684";$(".j_all_flowMenu li").each(function(){var d=
$(this),b=a;if(!d.hasClass("sub-indent")){var g=d.data("title");("\u5173\u6ce8\u7684\u5ba1\u6279"==g||"\u63d0\u4ea4\u7684\u5ba1\u6279"==g||"\u4e0b\u5c5e\u7684\u5f85\u529e\u5ba1\u6279"==g)&&b&&(b=b.substring(0,1));d.hasClass("shareToMe")?d.find(".link-item").html("\u5171\u4eab\u7ed9"+b+"\u5ba1\u6279"):d.find(".link-item").html(b+g)}})}}});m.exports=h});
define("teams/workflow/flowmodel",function(h,q,m){h=Backbone.Model.extend({formId:0,initialize:function(f){},findAll:function(f){$.ajax({type:"get",url:"/form.json",dataType:"json",success:function(e){f&&f(e)}})},request:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/request.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},submit:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/submit.json",dataType:"json",
data:f,success:function(c){e&&e(c)}})},save:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/save.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},addStep:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/addStep.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},joinStep:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/joinStep.json",dataType:"json",
data:f,success:function(c){e&&e(c)}})},loadForm:function(f){$.ajax({type:"get",url:"/form/"+this.formId+".json",dataType:"json",success:function(e){f&&f(e)}})},approve:function(f,e){$.ajax({type:"post",url:"/flow/approve.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},reject:function(f,e){$.ajax({type:"post",url:"/flow/reject.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},finish:function(f){$.ajax({type:"post",url:"/flow/finish.json",dataType:"json",data:{id:this.id},success:function(e){f&&
f(e)}})},delt:function(f){$.ajax({type:"delete",url:"/flow/"+this.id+".json",dataType:"json",success:function(e){f&&f(e)}})},show:function(f,e){var c=this;$.ajax({type:"get",url:"/flow/"+this.id+".json",dataType:"json",data:f,success:function(b){c.workflow=b.flowRequest;e&&e(b)}})},findByid:function(f){var e=this,c={};c.id=this.id;$.ajax({type:"post",async:!1,data:c,url:"/flow/findByid.json",dataType:"json",success:function(b){e.workflow=b.flowRequest;f&&f(b)}})},update:function(f,e){$.ajax({type:"post",
url:"/flow/"+f.id+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},changeProperty:function(f,e){$.ajax({type:"post",url:"/flow/changeProperty.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},addList:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/addList.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteList:function(f,e){$.ajax({type:"post",url:"/flow/deleteList.json",dataType:"json",data:f,success:function(c){e&&
e(c)}})},watch:function(f){var e=this.workflow,c={module:"workflow"};c._method=e.watched?"DELETE":"PUT";$.ajax({type:"post",dataType:"json",url:"/watch/"+this.id+".json",data:c,success:function(b){e.watched=!e.watched;b=b.stream;f&&f(e.watched,b)}})},findStepsPassed:function(f,e){$.ajax({type:"post",url:"/flow/findStepsPassed.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryStepsByLastFlowRequest:function(f,e){$.ajax({type:"post",async:!1,data:{formId:f},url:"/flow/queryStepsByLastFlowRequest.json",
dataType:"json",success:function(c){e&&e(c)}})},isRecoverable:function(f,e){$.ajax({type:"post",async:!1,data:{id:f},url:"/flow/isRecoverable.json",dataType:"json",success:function(c){e&&e(c)}})},takeBack:function(f,e){$.ajax({type:"post",data:f,url:"/flow/takeBack.json",dataType:"json",success:function(c){e&&e(c)}})},freeReject:function(f,e){$.ajax({type:"post",url:"/flow/freeReject.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/workflow/sernumruleview",["teams/utils","teams/workflow/sernumrulemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/sernumrulemodel");h=Backbone.View.extend({initialize:function(c){this.el=c.container;this.formId=c.formId;this.callback=c.callback;this.model=new e},render:function(){$(this.el).html(f.template("flow.sernumrule"));this.renderSerNumRule()},delegateEvents:function(){var c=$(this.el),b=this;c.off("click.sernumrule",'span[name\x3d"isEnable"]').on("click.sernumrule",
'span[name\x3d"isEnable"]',function(){$(this).hasClass("open")?$(this).removeClass("open").attr("value",!1):$(this).addClass("open").attr("value",!0)});c.off("change.sernumrule",'select[name\x3d"dateFmt"]').on("change.sernumrule",'select[name\x3d"dateFmt"]',function(){b.setResetCycleSelect($(this).val());b.dateFmtPreview($(this).val())});c.off("click.sernumrule","#cancelBtn").on("click.sernumrule","#cancelBtn",function(){$(".j_btn_close").click()});c.off("click.sernumrule","#saveBtn").on("click.sernumrule",
"#saveBtn",function(){var a=$.trim(c.find('input[name\x3d"tailnumLen"]').val());if(b.validateNumInput(a)){var d={};d["serNumRule.id"]=c.find('input[name\x3d"id"]').val();d["serNumRule.formId"]=b.formId;d["serNumRule.isEnable"]=c.find('span[name\x3d"isEnable"]').attr("value");d["serNumRule.dateFmt"]=c.find('select[name\x3d"dateFmt"]').val();d["serNumRule.tailnumLen"]=a;d["serNumRule.resetCycle"]=c.find('select[name\x3d"resetCycle"]').val();$(this).data("submit")||($(this).data("submit",!0),b.model.saveSerNumRule(d,
function(a){$(".j_btn_close").click();$(this).data("submit",!1);f.notify(a.msg)}))}});c.off("keyup.sernumrule",".js_numberCheck").on("keyup.sernumrule",".js_numberCheck",function(a){a=$(this).val();$(this).val(a.replace(/[^\d]/g,""))});c.off("blur.sernumrule",".js_numberCheck").on("blur.sernumrule",".js_numberCheck",function(a){$(this).trigger("keyup.sernumrule");a=$(this).val();b.validateNumInput(a)&&b.tailnumPreview(a)})},renderSerNumRule:function(){var c=$(this.el),b=this.model,a=this,d={};d.formId=
this.formId;b.findSerNumRule(d,function(d){$.isEmptyObject(d)?a.resultsPreview("0","3"):(c.find('input[name\x3d"id"]').val(d.id),1==d.isEnable?c.find('span[name\x3d"isEnable"]').addClass("open").attr("value",!0):c.find('span[name\x3d"isEnable"]').removeClass("open").attr("value",!1),c.find('select[name\x3d"dateFmt"]').val(d.dateFmt),c.find('input[name\x3d"tailnumLen"]').val(d.tailnumLen),a.setResetCycleSelect(d.dateFmt),c.find('select[name\x3d"resetCycle"]').val(d.resetCycle),a.resultsPreview(d.dateFmt,
d.tailnumLen))})},setResetCycleSelect:function(c){var b=$(this.el);b.find('select[name\x3d"resetCycle"]').empty();c=parseInt(c);0==c?b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"0"\x3e\u5e74\x3c/option\x3e')):1==c?(b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"1"\x3e\u6708\x3c/option\x3e')),b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"0"\x3e\u5e74\x3c/option\x3e'))):2==c&&(b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"2"\x3e\u65e5\x3c/option\x3e')),
b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"1"\x3e\u6708\x3c/option\x3e')),b.find('select[name\x3d"resetCycle"]').append($('\x3coption value\x3d"0"\x3e\u5e74\x3c/option\x3e')))},resultsPreview:function(c,b){this.dateFmtPreview(c);this.tailnumPreview(b)},dateFmtPreview:function(c){var b=$(this.el),a="";c=parseInt(c);0==c?a=Date.create(new Date).format("{yyyy}"):1==c?a=Date.create(new Date).format("{yyyy}{MM}"):2==c&&(a=Date.create(new Date).format("{yyyy}{MM}{dd}"));b.find("#dateFmtResult").html(a)},
tailnumPreview:function(c){for(var b=$(this.el),a="",d=1;d<parseInt(c);d++)a+="0";b.find("#tailnumResult").html(a+"1")},isShowSettingBlock:function(c){var b=$(this.el);c||""!=b.find('input[name\x3d"id"]').val()?(b.find(".js_sernumdetailblock").removeClass("hide"),b.find("#serNumRuleBottom").removeClass("hide")):(b.find(".js_sernumdetailblock").addClass("hide"),b.find("#serNumRuleBottom").addClass("hide"))},validateNumInput:function(c){try{if(""==c)return f.notify("\u7f16\u53f7\u4f4d\u6570\u4e0d\u80fd\u4e3a\u7a7a"),
!1;if(3>parseInt(c))return f.notify("\u7f16\u53f7\u4f4d\u6570\u4e0d\u5f97\u4f4e\u4e8e3\u4f4d"),!1;if(10<parseInt(c))return f.notify("\u7f16\u53f7\u4f4d\u6570\u4e0d\u5f97\u9ad8\u4e8e10\u4f4d"),!1}catch(b){return f.notify("\u7f16\u53f7\u4f4d\u6570\u53ea\u80fd\u4e3a\u6570\u5b57"),!1}return!0},remove:function(){$(this.el).off(".sernumrule")}});m.exports=h});
define("teams/workflow/flowlogmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},loadStepLog:function(f,e){$.ajax({type:"post",data:f,url:"/flow/findStepLog.json",dataType:"json",success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/workflow/flowstartview","teams/utils teams/component/validation teams/form/formmanagemodel teams/form/formoperationview teams/component/guideview teams/workflow/flowview teams/form/formcolor".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");var e=h("teams/form/formmanagemodel"),c=h("teams/form/formoperationview"),b=h("teams/component/guideview"),a=h("teams/workflow/flowview"),d=h("teams/form/formcolor");h=Backbone.View.extend({initialize:function(a){this.mainlineId=
a.mainlineId;this.el=a.container;this.userId=a.userId?a.userId:TEAMS.currentUser.id;this.formId=a.formId;this.id=a.requestId;this.page=a.page;this.closable=a.closable;this.model=new e(a);this.tpl=f.template("flow.flowstart");this.callback=a.callback;this.mainlineCallback=a.mainlineCallback;this.isWeaverAdmin="t7akvdnf84"!=TEAMS.currentTenant.tenantKey&&"T7AKVDNF84"!=TEAMS.currentTenant.tenantKey||!TEAMS.currentUser.admin?!1:!0;"#entitybox-container"==this.el?this.boxflag=!0:this.boxflag=!1;this.id&&
"new"==this.id&&(this.id="");this.guideview=new b({module:"workflow",parentEl:this.el})},delegateEvents:function(){var d=this,b=$(d.tpl),e=d.model,k=$(d.el);k.on("click.FormListView",".j_Workflows_scroll .js_formtab li",function(a){a=$(this).parents(".j_Workflows_scroll").find(".js_forms");var d=$(this).index(),b=$(this).find("a");$(this).addClass("active");b="my-forms"==b.attr("id")?$('\x3cinput type\x3d"text" id\x3d"personalformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"personal"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e'):
$('\x3cinput type\x3d"text" id\x3d"companyformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"company"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e');k.find(".js_searchform").html(b);b.focus();$(this).siblings().removeClass("active");a.find(".js_form_list").eq(d).removeClass("hide").siblings().addClass("hide")});k.on("click.FlowStartView",".js_loadMore",function(){var a=$(this).attr("id"),b=1,c="",l={};"loadMore-company"==a?(b=k.find("#pageNo-company").val(),
c=k.find("#companyformsearch-keywords").val()):"loadMore-personal"==a&&(b=k.find("#pageNo-personal").val(),c=k.find("#personalformsearch-keywords").val());b++;l.pageNo=b;(b=$(this).attr("isKeyword"))&&"isKeyword"==b?(l["formParam.keyword"]=$.trim(c),"loadMore-company"==a?l.ownership="company":"loadMore-personal"==a&&(l.ownership="personal"),d.renderKeywords(l)):"loadMore-company"==a?d.renderCompanyForms(l):"loadMore-personal"==a&&d.renderPersonalForms(l)});k.on("click.FlowStartView",".js_formitemsli",
function(a){a=$(a.target);a.hasClass("js_previewbtn")||null!=a.parents(".js_previewbtn").get(0)||"form-title"!=a.attr("id")&&$(this).find("#form-title").click()});k.on("click.FlowStartView",".js_formPreview",function(){window.open("/form/preview/"+$(this).attr("formId"))});k.on("click.FlowStartView",".js_deleteForm",function(){var a=this,b=null,b="delete-personalform"==$(a).attr("id")?$(a).parents(".js_personalformlist"):$(a).parents(".js_cloudformlist"),c={formId:$(this).attr("formId")};"enable"==
$(this).parent().parent().parent().parent().find("a").eq(1).attr("status")?f.alert("\u6b64\u8868\u5355\u4e3a\u542f\u7528\u72b6\u6001,\u505c\u7528\u8868\u5355\u540e\u624d\u80fd\u88ab\u5220\u9664"):(doDelete=function(l){l&&e.deleteForm(c,function(c){$(a).parents("li").remove();f.notify("\u8868\u5355\u5220\u9664\u6210\u529f");d.buildSerialNumber(b)})},f.confirm("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u6b64\u8868\u5355\u5417\uff1f",doDelete))});k.on("click.FlowStartView",
".js_copyForm",function(){var a=$(this).attr("formId"),e=$(this).parents(".js_formListBox").find("#form-title").text(),n=$(this).attr("operationtype"),u={},h=!1;u.formId=a;u.module="workflow";u.ownership="company";"copy"==n?(u.ownership="personal",n="\u590d\u5236"):"enable"==n&&(n="\u542f\u7528",TEAMS.currentUser.admin&&(h=!0));u.el="#copy-form";u.formTitle=e;u.formId=a;u.tpl=f.template("flow.formcopy",{userId:d.userId,operationtype:n,admin:h});u.formId=a;u.copyCallback=function(a){var c=a.form.ownership,
e=[];e.push(a.form);"personal"==c?d.loadPeronalForm(e,!1,"prepend"):"company"==c&&(c=k.find(".js_companyforms #other-category .j_formlist"),e=b.siblings("#formitems-company").find(".js_formitemsli").clone(),d.renderForm(a.form,c,e,"prepend"),d.sort(e),d.buildSerialNumber(c))};d.formoperationView=new c(u);d.formoperationView.render()});k.on("click.FlowStartView",".js_renameForm",function(){var a=$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=
$('\x3cinput type\x3d"text" name\x3d"formTitle" sytle\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+a+"\x3e"),d=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();$(this).parents(".js_formListBox").find("#form-number").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(d)}});k.on("blur.FlowStartView",'input[name\x3d"formTitle"]',function(){var a=
$(this).attr("formId"),d=$(this).val(),b=this;if(""==$.trim(d))$(b).next().show(),$(b).remove();else if($.trim(d)==$(b).next().text())$(b).next().show(),$(b).remove();else{var g={};g.formId=a;g.formName=$.trim(d);g.ownership="personal";e.renameForm(g,function(a){(a=a.message)?f.notify(a):($(b).next().text(d).attr("title",d).show(),$(b).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});k.on("click.FlowStartView",".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+
a)});k.on("click.FlowStartView",".js_buildNewForm",function(){var a={module:"workflow",el:"#build-newform"};a.parentEl=d.el;a.tpl=f.template("flow.formnew",{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin});a.ownership="personal";a.saveCallback=function(a){var c=a.form.ownership,e=[];e.push(a.form);"personal"==c?(d.loadPeronalForm(e,!1,"prepend"),k.find(".workflows-container .js_noresult-personal").hide()):"company"==c&&(c=k.find(".js_companyforms #other-category .j_formlist"),e=b.siblings("#formitems-company").find(".js_formitemsli").clone(),
d.renderForm(a.form,c,e,"prepend"),d.sort(e),d.buildSerialNumber(c))};d.formoperationView=new c(a);d.formoperationView.render()});k.on("click.FlowStartView",".js_changeFormStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("status"),l="",k="/workflows/"+d.userId+"/"+b;"enable"==c?l="\u505c\u7528":"disable"==c?l="\u542f\u7528":"submit"==c&&(l="\u542f\u7528");var h={"form.id":b,"form.status":c};updateStatus=function(d){d&&e.updateStatus(h,function(d){d=d.form.status;var b="";"enable"==
d?(b="\u505c\u7528",$(a).parents(".js_formListBox").find("#form-title").attr("href",k).addClass("js_formtitle"),$(a).removeClass("disable"),$(a).addClass("enable"),$(a).parents(".js_formitemsli").find(".icon-lock").hide()):"disable"==d&&(b="\u542f\u7528",$(a).parents(".js_formListBox").find("#form-title").removeAttr("href").removeClass("js_formtitle"),$(a).removeClass("enable"),$(a).addClass("disable"),$(a).parents(".js_formitemsli").find(".icon-lock").show());$(a).attr("status",d);$(a).text(b);f.notify("\u8868\u5355\u5df2"+
l)})};f.confirm("\u786e\u5b9a\u8981"+l+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});k.on("click.FlowStartView",".js_searchform .icon-search",function(a){a.stopPropagation();var b=k.find(".js_searchkeyword");a=$.trim(b.attr("searchtype"));b=$.trim(b.val());d.searchFormResult(a,b)});k.on("keyup.FlowStartView",".js_searchform .js_searchkeyword",function(a){var b=$.trim($(this).attr("searchtype")),c=$.trim($(this).val());13==(a?a:window.event?window.event:null).keyCode&&d.searchFormResult(b,c)});
k.on("click.FlowStartView","#form-manage",function(a){d.boxflag&&d.callback&&d.callback()});k.on("click.FlowStartView",".js_formtitle",function(b){b=$(this).parents(".js_formListBox").attr("formid");d.flowView=new a({userId:this.userId,mainlineId:d.mainlineId,formId:b,container:d.el,mainlineCallback:d.mainlineCallback,page:d.page});d.flowView.render()});k.on("click.FlowStartView","#backToFormList",function(a){d.render()})},render:function(){var a=this,d=$(a.el),b="#entitybox-container"==a.el,c=$(f.template("flow.flowstart",
{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin})).siblings("#workflow-container");d.html(c.html());a.boxflag?f.layout(a.el+" .js_forms"):f.layout(a.el+" .js_forms",{whileScrolling:function(){a.guideview&&a.guideview.initFlag&&(a.guideview.hide("#form-create"),a.guideview.hide("#form-manage"))}});c={pageNo:1,queryType:"flowStart","form.revelence":"flow"};a.renderCompanyForms(c);a.renderPersonalForms(c);b&&(d.find(".js_formtab #cl-forms").parent().remove(),d.find(".js_forms #cloudformul").parent().remove());
setTimeout(function(){a.guideview.guideTip("createform","#form-create",!a.boxflag);a.guideview.guideTip("manageform","#form-manage",!a.boxflag)},1E3)},renderCompanyForms:function(a){var d=this,b=d.model,c="#entitybox-container"==d.el,e=$(d.el),f=e.find(".js_forms .js_companyforms");e.find("#formlist-loading").show();b.findAll(a,function(a){d.loadCateAndForms(a,f,"company",c);e.find("#formlist-loading").hide()})},loadCateAndForms:function(a,d,b,c){$(this.el);var e=this.tpl,f=d.find("#custom-category");
d=d.find("#other-category");a=a.formCategories;if(1>a.length)f.append('\x3cdiv id\x3d"noformitem" class\x3d"j_no_my_workflow no-result"\x3e\u6682\u65e0\u6570\u636e\x3c/div\x3e');else{f.find("#noformitem").remove();for(var s in a){var u=a[s],h=u.name,v=u.id,u=u.forms,x=u.length,y=$(e).siblings(".js_formcategory");"\u5176\u4ed6"==h&&y.addClass("js_other");y.find(".js_categoryname").text(h).attr("id",v);y.find(".form-acount").text("("+x+")");for(var z in u){var h=u[z],v=y.find(".j_formlist"),A=$(e).siblings("#formitems-company").find(".js_formitemsli").clone();
"personal"==b?(A=$(e).siblings("#formitems-personal").find(".js_formitemsli").clone(),this.renderPersonalForm(h,v,A,"append",c)):this.renderForm(h,v,A,"append",c)}"js_formcategory js_other"==y.attr("class")?d.append(y):0!=x&&f.append(y);this.buildSerialNumber(y.find(".j_formlist"))}}},renderForm:function(a,b,c,k,e){var f=a.name,s=a.describe,u=a.id;a=a.sort;var h="/workflows/"+this.userId+"/"+u;e?c.find("#form-title").removeClass("router").addClass("fast-create").attr("data-id",u):c.find("#form-title").attr("href",
h);c.attr("formid",u).attr("sort",a);c.find("#form-number").css("background-color",d.getRandomColor());c.find(".js_formPreview").attr("formId",u);c.find("#form-title").text(f);c.find("#form-title").attr("title",f);if(void 0==s||""===s)s="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-number").css("background-color",d.getRandomColor());c.find("#form-describe").text(s);c.find("#form-describe").attr("title",s);c.find(".js_formListBox").attr("formId",
u);"prepend"===k?b.prepend(c):b.append(c)},renderPersonalForms:function(a){var d=this,b=d.model,c=$(d.el),e="#entitybox-container"==d.el,f=c.find(".js_forms .js_personalforms");c.find("#formlist-loading").show();b.findCateAndPersonal(a,function(a){d.loadCateAndForms(a,f,"personal",e);c.find("#formlist-loading").hide()})},renderPersonalForm:function(a,b,c,k,e){c=this.tpl;$(this.el);var f=a.name,s=a.describe,u=a.id;a=a.status;var h="";c=$(c).siblings("#formitems-personal").find(".js_formitemsli");var v=
"/workflows/"+this.userId+"/"+u;if("enable"==a)h="\u505c\u7528",e?c.find("#form-title").removeClass("router").addClass("fast-create").attr("data-id",u):c.find("#form-title").attr("href",v),c.find(".js_changeFormStatus").addClass("enable").removeClass("disable"),c.find(".icon-lock").hide();else if("disable"==a||"submit"==a)h="\u542f\u7528",c.find("#form-title").removeClass("js_formtitle"),c.find(".js_changeFormStatus").addClass("disable").removeClass("enable"),c.find(".icon-lock").show();c.find("#form-number").css("background-color",
d.getRandomColor());c.find(".js_formPreview").attr("formId",u);c.find("#form-title").text(f);c.find("#form-title").attr("title",f);void 0==s&&(s="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription"));c.find("#form-describe").text(s);c.find("#form-describe").attr("title",s);c.find(".js_renameForm").attr("formId",u);c.find(".js_editForm").attr("formId",u);c.find(".js_copyForm").attr("formId",u);c.find(".js_deleteForm").attr("formId",u);
c.find(".js_changeFormStatus").text(h);c.find(".js_changeFormStatus").attr("formId",u);c.find(".js_changeFormStatus").attr("status",a);c.find("#flowSequence").attr("data-id",u);c.find("#flowSequence").attr("data-value",u);c.find(".js_formListBox").attr("formId",u);"prepend"==k?b.prepend(c):b.append(c);this.buildSerialNumber(b)},loadPeronalForm:function(a,b,c){for(var k=$(this.el),e=this.tpl,k=k.find(".js_personalforms #other-category .j_formlist"),f=0;f<a.length;f++){var s=a[f],u=s.name,h=s.describe,
v=s.id,s=s.status,x="",y=$(e).siblings("#formitems-personal").find(".js_formitemsli"),z="/workflows/"+this.userId+"/"+v;if("enable"==s)x="\u505c\u7528",b?y.find("#form-title").removeClass("router").addClass("fast-create").attr("data-id",v):y.find("#form-title").attr("href",z),y.find(".js_changeFormStatus").addClass("enable").removeClass("disable"),y.find(".icon-lock").hide();else if("disable"==s||"submit"==s)x="\u542f\u7528",y.find("#form-title").removeClass("js_formtitle"),y.find(".js_changeFormStatus").addClass("disable").removeClass("enable"),
y.find(".icon-lock").show();y.find("#form-number").css("background-color",d.getRandomColor());y.find(".js_formPreview").attr("formId",v);y.find("#form-title").text(u);y.find("#form-title").attr("title",u);void 0==h&&(h="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",y.find("#form-describe").removeClass("description").addClass("nodescription"));y.find("#form-describe").text(h);y.find("#form-describe").attr("title",h);y.find(".js_renameForm").attr("formId",v);y.find(".js_editForm").attr("formId",v);y.find(".js_copyForm").attr("formId",
v);y.find(".js_deleteForm").attr("formId",v);y.find(".js_changeFormStatus").text(x);y.find(".js_changeFormStatus").attr("formId",v);y.find(".js_changeFormStatus").attr("status",s);y.find("#flowSequence").attr("data-id",v);y.find("#flowSequence").attr("data-value",v);y.find(".js_formListBox").attr("formId",v);"prepend"==c?k.prepend(y):k.append(y)}this.buildSerialNumber(k)},renderCompanyKeyword:function(a){var d=$(this.el),b=$(this.tpl),c=d.find(".js_companyforms"),d=b.siblings("#company-search-clone").find(".j_companySearch").clone();
null==c.find(".j_companySearch").get(0)&&c.html(d);var d=c.find(".js_companysearchlist"),e=a.formPage,f=e.result;a=a.pageNo;c.find("#pageNo-company").val(a);a=c.find(".j_companySearch .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;c.find(".j_companySearch .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?c.find(".js_noresult-company").show():c.find(".js_noresult-company").hide();e.hasNext?c.find("#loadMore-company").show():c.find("#loadMore-company").hide();
for(c=0;c<f.length;c++)e=f[c],a=b.siblings("#formitems-company").find(".js_formitemsli").clone(),this.renderForm(e,d,a,"append");this.buildSerialNumber(d)},renderPersonalKeyword:function(a){var d=$(this.el),b=$(this.tpl),c=d.find(".js_personalforms"),d=b.siblings("#personal-search-clone").find(".j_personalSearch").clone();null==c.find(".j_personalSearch").get(0)&&c.html(d);var d=c.find(".js_personalsearchlist"),e=a.formPage,f=e.result;a=a.pageNo;c.find("#pageNo-personal").val(a);a=c.find(".j_personalSearch .j_formcount").text();
a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;c.find(".j_personalSearch .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?c.find(".js_noresult-personal").show():c.find(".js_noresult-personal").hide();e.hasNext?c.find("#loadMore-personal").show():c.find("#loadMore-personal").hide();for(c=0;c<f.length;c++)e=f[c],a=b.siblings("#formitems-personal").find(".js_formitemsli").clone(),this.renderPersonalForm(e,d,a,"append");this.buildSerialNumber(d)},renderKeywords:function(a){var d=
this,b=d.model,c=$(d.el),e=a.ownership;a.pageSize=20;a.queryType="flowStart";c.find("#formlist-loading").show();"company"==e?b.findCompany(a,function(a){d.renderCompanyKeyword(a);c.find("#loadMore-company").attr("isKeyword","isKeyword")}):"personal"==e&&b.findPersonal(a,function(a){d.renderPersonalKeyword(a);c.find("#loadMore-personal").attr("isKeyword","isKeyword")});c.find("#formlist-loading").hide()},buildSerialNumber:function(a){a.find('li[class\x3d"js_formitemsli"]').each(function(a){$(this).find("#form-number").text(a+
1)})},sort:function(a){$(this.el);var d=this.model,b={},c=a.next(),e=parseInt(c.attr("sort"))+1,p=a.attr("formid"),s=parseInt(c.attr("sort")),c=c.attr("formid"),u=a.parents(".js_formcategory").find(".form-category-hd .js_categoryname").attr("id");b.sort=e;b.formId=p;b.categoryId=u;49990<=s&&(b.firstFormId=c);d.sort(b,function(d){a.attr("sort",e);d.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},searchFormResult:function(a,d){var b=$(this.el),c={pageNo:1};c.ownership=a;c["formParam.keyword"]=
d;if("company"==a){if(b.find(".js_companyforms").empty(),!d){b.find(".js_companyforms").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');this.renderCompanyForms({queryType:"flowStart"});return}}else if("personal"==a&&(b.find(".js_personalforms").empty(),!d)){b.find(".js_personalforms").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');this.renderPersonalForms({queryType:"flowStart"});return}this.renderKeywords(c)},
remove:function(){$(this.el).off(".FlowStartView");this.formoperationView&&(this.formoperationView.remove(),this.formoperationView=null);this.guideview&&(this.guideview.remove(),this.guideview=null);this.flowView&&(this.flowView.remove(),this.flowView=null)}});m.exports=h});
define("teams/workflow/config/flowchartconfig",function(h,q,m){m.exports={Base:{move:{x:320,y:30},strokeWidth:{node:1,path:1},rect:{w:166,h:66,x:0,y:0,rx:2,ry:2},translate:{x:0,y:88},gradient:{fx:"100%",fy:"49%",tx:"100%",ty:"100%"},opacity:{min:.5,max:1},hapOffset:{x:5,y:5},vapOffset:{x:5,y:5},fx:{initdx:60,increment:50},tagPosition:{oneThird:1/3,twoThirds:2/3,oneHalf:.5,widthHalf:.5},gradientColor:{dftBegin:"#FFFFFF",dftEnd:"#24B7E5"},textColor:{node:"#666666",op:"#FFFFFF"},pathColor:{dft:"#CCCCCC",
onmouse:"#6CCDFD"},font:{size:14,family:"Arial,'Hiragino Sans GB',Microsoft YaHei,sans-serif"},orcheck:{dx:142,dy:9},len:{node:18,op:14}},Static:{drawSize:{w:"798",h:"485"},txOffset:{tx:83,ty:11,bx:9,by:44,vy:11},rectColor:{dft:"#24B7E5"}},Dynamic:{drawSize:{w:"799",h:"280"},txOffset:{tx:83,ty:3,bx:9,by:36,vy:3},rectColor:{request:"#24B7E5",approve:"#5CB95C",processing:"#5CB95C",waiting:"#C3C3C3",reject:"#ED5664",end:"#24B7E5"},pathColor:{waiting:"#CCCCCC",passed:"#24B7E5"}}}});
define("teams/workflow/workflowrightview",["teams/utils"],function(h,q,m){var f=h("teams/utils");q=Backbone.View.extend({initialize:function(e){this.container=e.container;this.showtitle=e.showtitle;this.module=e.module;this.moduleName=e.moduleName;this.userId=e.userId;this.el="#workflow-right";this.pageNo=1;this.pageSize=5;this.userId||(this.userId=TEAMS.currentUser.id);e.showReaded&&(this.showReaded=e.showReaded);$(this.container).html(f.template("workflow.workflowright"))},delegateEvents:function(){var e=
this;$(this.el).on("click.workflowright",".j_more",function(){e.pageNo++;e.renderSub()});$(window).resize(function(){})},render:function(){var e=this;$(e.el);e.option={tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c}"},legend:{orient:"horizontal",x:"center",y:"bottom",borderColor:"#CCC",borderWidth:1,textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"},data:[{name:"\u8349\u7a3f\u5ba1\u6279"},{name:"\u5df2\u7ed3\u675f\u7533\u8bf7"},{name:"\u672a\u7ed3\u675f\u7533\u8bf7"},{name:"\u5f85\u529e\u5ba1\u6279"},
{name:"\u5df2\u529e\u5ba1\u6279"}]},toolbox:{show:!0,feature:{restore:{show:!0},saveAsImage:{show:!0,name:""}}},series:[{name:"\u5ba1\u6279\u7edf\u8ba1",type:"pie",center:["50%","40%"],minAngle:20,startAngle:45,radius:["40%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{c}"},labelLine:{show:!0,length:5}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"15",fontWeight:"bold"}}}},data:[{value:0,name:"\u8349\u7a3f\u5ba1\u6279"},{value:0,name:"\u5df2\u7ed3\u675f\u7533\u8bf7"},{value:0,
name:"\u672a\u7ed3\u675f\u7533\u8bf7"},{value:0,name:"\u5f85\u529e\u5ba1\u6279"},{value:0,name:"\u5df2\u529e\u5ba1\u6279"}]}]};e.load(function(c){h.async("https://static.eteams.cn/js/echarts.min.js",function(){e.tc=echarts.init($("#myworkflow")[0]);var b=e.option.series[0].data,a=c.chartData,d=$(e.el).find("#flowTitle");a?(b[0].value=a.draft,b[1].value=a.completed,b[2].value=a.nonCompleted,b[3].value=a.todo,b[4].value=a.done,e.option.toolbox.feature.saveAsImage.name=TEAMS.currentUser.name+"\u5ba1\u6279\u7edf\u8ba1["+
Date.create().format("{yyyy}-{MM}-{dd}")+"]",e.tc.setOption(e.option)):(b[0].value=1,b[1].value=1,b[2].value=1,b[3].value=1,b[4].value=1,e.option.toolbox.feature.saveAsImage.name=TEAMS.currentUser.name+"\u5ba1\u6279\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]\u793a\u4f8b",e.tc.setOption(e.option),d.text("\u5ba1\u6279\u7edf\u8ba1\u793a\u4f8b"));$("#myworkflow").show()})});e.option.toolbox.feature.saveAsImage.name="\u5ba1\u6279\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]";
TEAMS.noSubordinates?$("#mainContainer").find(".j_subordinatestat").remove():e.renderSub()},resize:function(){this.tc&&this.tc.resize();this.tc1&&this.tc1.resize()},renderSub:function(){var e=$(this.el);$.ajax({type:"get",url:"/workflows/subChartData.json",dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize,userId:this.userId},success:function(c){c=c.pageSubChatData;c.hasNext?e.find(".j_more ").removeClass("hide"):e.find(".j_more").addClass("hide");(c=c.result)&&0!=c.length?($("#empList").html(""),
$(c).each(function(b,a){var d=$("#empList"),g=$(".j_eitem li").clone();g.find(".j_name").text(a.subName);g.find(".j_avatar").attr("src",a.avatar?"/base/download/"+a.avatar:"images/avatar.png");g.find(".j_todo").text(a.todo);g.find(".j_avatar").attr("userId",a.subId);g.find(".j_name").attr("userId",a.subId);d.append(g)})):e.find(".j_noresult").show()}})},load:function(e){$.ajax({type:"get",url:"/workflows/chartData.json",dataType:"json",data:{userId:this.userId},success:function(c){e&&e(c)}})},
remove:function(){var e=$(this.el);this.tc&&(this.tc.clear(),this.tc.dispose());this.tc1&&(this.tc1.clear(),this.tc1.dispose());e.off(".workflowright")}});m.exports=q});
define("teams/workflow/flowview","teams/utils teams/workflow/flowmodel teams/workflow/flowsequencemodel teams/component/shareview teams/component/mainline teams/component/tag teams/component/attachment teams/component/relevanceview teams/workflow/flowstepview teams/workflow/svgflowchartview teams/component/extendview teams/workflow/formview teams/component/validation teams/component/permissionview teams/component/guideview teams/form/formmanagemodel teams/component/typeahead".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/workflow/flowmodel"),c=h("teams/workflow/flowsequencemodel"),b=h("teams/component/shareview"),a=h("teams/component/mainline"),d=h("teams/component/tag"),g=h("teams/component/attachment"),l=h("teams/component/relevanceview"),n=h("teams/workflow/flowstepview"),k=h("teams/workflow/svgflowchartview"),r=h("teams/component/extendview"),p=h("teams/workflow/formview"),s=h("teams/component/validation"),u=h("teams/component/permissionview"),w=h("teams/component/guideview"),
v=h("teams/form/formmanagemodel"),x=h("teams/component/typeahead");h=Backbone.View.extend({teams:{},initialize:function(a){this.userId=a.userId||TEAMS.currentUser.id;this.formId=a.formId;this.mainlineId=a.mainlineId;this.id=a.requestId;this.el=a.container||"#entitySlider";this.mainlineCallback=a.mainlineCallback;this.backLastPage=a.backLastPage||!1;this.closable=a.closable;this.back=a.back||1;this.page=a.page;this.model=new e;this.flowSequenceModel=new c;this.model.formId=this.formId;this.model.id=
this.id;this.lastPage=a.page;this.renderType=a.renderType;this.formModel=new v(a);this.initFlowComponent()},initFlowComponent:function(){this.formView=new p},initComponent:function(){var c=this;this.mainline=new a({targetId:c.id,module:"workflow",container:"#workflow-goal",parentEl:c.el});this.tag=new d({targetId:c.id,module:"workflow",container:"#workflow-mylabel",ccontainer:"#workflow-label",parentEl:c.el});this.attachment=new g({targetId:c.id,module:"workflow",container:"#workflow-attach",parentEl:c.el});
this.shareView=new b({entityId:c.id,module:"workflow",shareContainer:"#workflow-share",parentEl:c.el});this.relevanceViews=[];_.each([{targetModule:"task",module:"workflow",container:"#workflow-task",moduleLabel:"\u5173\u8054\u4efb\u52a1:"},{targetModule:"document",module:"workflow",container:"#workflow-doc",moduleLabel:"\u5173\u8054\u6587\u6863:"},{targetModule:"customer",module:"workflow",container:"#workflow-crm",moduleLabel:"\u5173\u8054\u5ba2\u6237:"},{targetModule:"workflow",module:"workflow",
container:"#workflow-flow",moduleLabel:"\u5173\u8054\u5ba1\u6279:"},{targetModule:"calendar",module:"workflow",container:"#workflow-agenda",moduleLabel:"\u5173\u8054\u65e5\u7a0b:"}],function(a){this.relevanceView=new l({objectId:c.id,module:a.module,targetModule:a.targetModule,container:a.container,moduleLabel:a.moduleLabel,parentEl:c.el});c.relevanceViews.push(this.relevanceView)});this.extendview=new r({targetId:c.id,module:"workflow",container:"#workflow-info",parentEl:c.el});this.permissionView=
new u({module:"workflow",container:c.el})},delegateEvents:function(){var a=this,d=this.model,b=$(a.el),g=a.el;b.off(".flowcomment");null==$("#entitybox").get(0)&&$("body").off(".flowcomment");b.on("click.flowcomment",".fast-create",function(d){a.formId=$(this).attr("data-id");a.formView.formId=a.formId;a.model.formId=a.formId;a.renderNew()});b.on("click.flowcomment",".btn-submit",function(d){if(!s.formValidateImm(b.find(".workflow-title,#workflow-wrap .flowRequest,#flowList"))||!a.formView.submitCheck(b.find("#new-workflow-request")))return!1;
a.flowStepView||(a.flowStepView=new n({parentEl:a.el,formId:a.formId}));a.flowStepView.render({flowRequest:a.flowRequest,$target:$(this),type:"step",formId:a.formId});a.slideToggle("addStep")});b.on("click.flowcomment",".btn-save",function(){if(!s.formValidateImm(b.find(".workflow-title,.flowRequest,#flowList")))return!1;var d=$(this);d.removeClass("btn-save");a.formView.submit({parentEl:b.find("#new-workflow-request"),dataStatus:1,callback:function(b){d.addClass("btn-save");b&&!a.id?a.singleTableSave(g+
" .flowRequest",b.formData.id,b.formData.form.id):b&&b.formData&&b.formData.id&&f.notify("\u5ba1\u6279\u5df2\u4fdd\u5b58");window.formJsonStr=null}})});b.on("click.flowcomment","#step-confirm",function(){var c=a.flowStepView.getStep();if(a.submitCheck()||a.checkStep(c))return!1;var l=JSON.stringify(c.steps);if(!s.formValidateImm(b.find(".workflow-title,#workflow-wrap .flowRequest,#flowList")))return!1;if(!$(this).data("submit")){$(this).data("submit",!0);if("personal"==a.formType){var k=a.flowSequenceModel;
k.load(a.formId,function(d){var b={};d.flowSequence&&(b.id=d.flowSequence.id);b.type="personal";b.formId=a.formId;b='{"flowSequence":'+JSON.stringify(b)+',"flowSteps":'+l+"}";d.flowSequence?k.update(b):k.create(b)})}a.id?a.formView.submit({parentEl:b.find("#new-workflow-request"),dataStatus:1,callback:function(b){b='{"id":'+a.id+',"flowSteps":'+l+"}";$(this).addClass("hide");d.submit(b,function(d){d=d.actionMsg;null!=d&&null!=d.message?(f.notify(d.message),$(a.el).find("#step-confirm").data("submit",
!1)):(f.notify("\u5ba1\u6279\u63d0\u4ea4\u6210\u529f"),a.lastPage&&(a.lastPage.removeWorkflow?a.lastPage.trigger("remove",a.id):$("body").trigger("slideClose")))})}}):a.formView.submit({parentEl:b.find("#new-workflow-request"),dataStatus:1,callback:function(d){a.singleTableRequest(g+" .flowRequest",d.formData.id,d.formData.form.id);window.formJsonStr=null}})}});a.id&&a.delegateFlowProcess();b.on("click.flowcomment",".relevance-module-workflow",function(d){d.stopPropagation();a.relevanceView||(a.relevanceView=
new l({objectId:a.id,module:$(this).attr("data-entity"),container:"#workflow-relevance",parentEl:a.el}));a.relevanceView.changeModule($(this).attr("data-entity"));a.relevanceView.changePlaceholder($(this).attr("data-entity"));$(this).parents(".j_links-dropdown").find("#i-relevance").trigger("click");$(this).parents("ul").hide()});b.on("click.flowcomment","#workflow-print",function(d){window.open("/print/"+a.id+"/flow")});b.off("click.flowProcess",".handle-item\x3ea").on("click.flowProcess",".handle-item\x3ea",
function(a){a=$(this);var d=!0,b=$(".j_detailhandle .handle-item");a.parent().addClass("hide");b.each(function(){$(this).is(":visible")&&(d=!1)});$("#workflow-control-detail").show();d&&$(".j_detailhandle").addClass("hide")});b.off("click","#chart-fold\x3ea").on("click","#chart-fold\x3ea",function(){a.slideToggle("chart")});b.off("mouseover",".js_notice, .js_notice_color").on("mouseover",".js_notice, .js_notice_color",function(a){$(".js_notice").css("display","none");$(".js_notice_color").removeClass("hide")});
b.off("mouseout","#js_workflow_notice .js_notice, .js_notice_color").on("mouseout","#js_workflow_notice .js_notice, .js_notice_color",function(a){$(".js_notice").css("display","inline-block");$(".js_notice_color").addClass("hide")})},checkStep:function(a){if(a.errorMsg)return f.notify(a.errorMsg),!0;a=a.steps;for(var d=!1,b=0;b<a.length;b++)if(1>a[b].flowOperators.length){d=!0;break}return d||0==a.length?(f.notify("\u8bf7\u6dfb\u52a0\u8282\u70b9\u5ba1\u6279\u4eba\u6216\u5220\u9664\u5ba1\u6279\u8282\u70b9\u540e\u518d\u63d0\u4ea4"),
!0):!1},delegateFlowProcess:function(){var a=this,d=this.model,b=$(a.el);b.off(".flowProcess");b.on("click.flowProcess","#workflow-watch",function(b){d.watch(function(d,b){d?f.notify("\u5df2\u6dfb\u52a0\u5173\u6ce8"):f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8");a.renderWatch(d);a.lastPage&&a.lastPage.trigger("changeWatch",{id:a.id,watched:d});a.createStream({stream:b})})});b.on("click.flowProcess",".btn-step",function(){a.flowTopActive($(this));a.flowStepView||(a.flowStepView=new n({parentEl:a.el}));
a.flowStepView.render({flowRequest:a.flowRequest,$target:$(this),type:"addStep"});a.slideToggle("addStep")});b.on("click.flowProcess","#add-step-confirm",function(g){$(this).text();if(a.id&&a.flowComment($(this).parent().prev(),"addStep")){var c=a.flowStepView.getAddedStep();if('"flowSteps":[]'==c.split(",")[1])f.notify("\u8bf7\u6dfb\u52a0\u8282\u70b9\u5ba1\u6279\u4eba\u540e\u518d\u63d0\u4ea4");else if(!$(this).data("submit")){$(this).data("submit",!0);var l=b.find("#comment-textarea").val();b.find("#comment-textarea").val("");
var k='{"id":'+a.id+","+c+',"comment":{"content":"'+l+'"}}';a.formView.submit({parentEl:b.find("#new-workflow-request"),dataStatus:1,callback:function(b){d.addStep(k,function(d){$(this).data("submit",!1);a.submitCallback("addStep");f.notify("\u63d0\u4ea4\u6210\u529f");a.extendview.insertOneComment(d.comment);a.lastPage&&(a.lastPage.removeWorkflow?a.lastPage.trigger("remove",a.id):$("body").trigger("slideClose"));$(g.target).trigger("remove")})}})}}});b.on("keydown.flowProcess","#step-container textarea",
function(a){a.ctrlKey&&13==a.keyCode&&b.find("#add-step-confirm").click()});b.on("click.flowProcess",".btn-pass",function(d){a.flowTopActive($(this));a.slideToggle("pass")});b.on("click.flowProcess","#pass-submit",function(g){if(!a.readOnly&&!a.formView.submitCheck(b.find("#new-workflow-request")))return!1;var c="approve";"isVerify"==b.find("#btn-pass").data("isVerify")&&(c="verify");if(a.flowComment($(this).parent().prev(),c)){var l=$(this);l.attr("disabled","disabled");c=b.find("#comment-textarea").val();
b.find("#comment-textarea").val("");var k={id:a.id,"comment.content":c};a.formView.submit({parentEl:b.find("#new-workflow-request"),dataStatus:1,callback:function(b){d.approve(k,function(d){l.removeAttr("disabled");a.submitCallback("pass");d.actionMsg?f.notify(d.actionMsg.message):f.notify("\u5ba1\u6279\u63d0\u4ea4\u6210\u529f");a.loadFlow(d);a.lastPage.removeWorkflow&&a.lastPage.trigger("remove",a.id);$("body").trigger("slideClose");$(g.target).trigger("remove")})}})}});b.on("keydown.flowProcess",
"#pass-container textarea",function(a){a.ctrlKey&&13==a.keyCode&&b.find("#pass-submit").click()});b.on("click.flowProcess",".btn-back",function(d){a.flowTopActive($(this));d.stopPropagation();a.slideToggle("back")});b.on("click.flowProcess","#back-submit",function(g){if(a.flowComment($(this).parent().prev(),"reject")){var c=$(this);c.attr("disabled","disabled");var l=b.find("#comment-textarea").val();b.find("#comment-textarea").val("");d.reject({id:a.id,"comment.content":l},function(d){c.removeAttr("disabled");
a.submitCallback("back");d.actionMsg?f.notify(d.actionMsg.message):f.notify("\u5df2\u9000\u56de\u81f3\u5f00\u59cb\u8282\u70b9");a.loadFlow(d);a.lastPage.removeWorkflow?a.lastPage.trigger("remove",a.id):$("body").trigger("slideClose");$(g.target).trigger("remove")})}});b.on("keydown.flowProcess","#back-container textarea",function(a){a.ctrlKey&&13==a.keyCode&&b.find("#back-submit").click()});b.on("click.flowProcess",".btn-free-back",function(g){a.flowTopActive($(this));g.stopPropagation();a.slideToggle("free-back");
d.findStepsPassed({id:a.id},function(a){a=a.flowSteps;b.find("#js_steps").html("");for(var d=0;d<a.length;d++){var g=a[d],g=$("\x3coption id\x3d"+g.id+"\x3e"+g.title+"\x3c/option\x3e");b.find("#js_steps").append(g)}})});b.on("click.flowProcess","#free-back-submit",function(g){if(a.flowComment($(this).parents("#free-back-container").find("#js_rejectText"),"reject")){var c=$(this),l=b.find("#js_steps").find("option:selected").attr("id");c.attr("disabled","disabled");var k=b.find("#comment-textarea").val();
b.find("#comment-textarea").val("");d.freeReject({id:a.id,stepId:l,"comment.content":k},function(d){c.removeAttr("disabled");a.submitCallback("free-back");d.actionMsg?f.notify(d.actionMsg.message):f.notify("\u5df2\u9000\u56de\u81f3\u6307\u5b9a\u8282\u70b9");a.loadFlow(d);a.lastPage.removeWorkflow?a.lastPage.trigger("remove",a.id):$("body").trigger("slideClose");$(g.target).trigger("remove")})}});b.on("keydown.flowProcess","#free-back-container textarea",function(a){a.ctrlKey&&13==a.keyCode&&b.find("#free-back-submit").click()});
b.on("click.flowProcess",".btn-joinStep",function(d){a.flowTopActive($(this));a.slideToggle("joinStep")});b.on("click.flowProcess","#joinStep-submit",function(g){if(a.flowComment($(this).parent().prev(),"joinStep"))if(g=b.find("#comment-textarea").val(),b.find("#comment-textarea").val(""),0==b.find("#joinStep-container .entity-container .entity-item").length)f.notify("\u8bf7\u6dfb\u52a0\u4f1a\u7b7e\u5ba1\u6279\u4eba\u5458\u540e\u518d\u63d0\u4ea4");else{var c=$(this);c.attr("disabled","disabled");
var l=[];b.find("#joinStep-container .entity-container .entity-item").each(function(){var a=$(this).find(".usercard-toggle").attr("id"),d={};d.id=a;l.push(d)});g='{"id":'+a.id+',"joinOperators":'+JSON.stringify(l)+',"comment":{"content":"'+g+'"}}';d.joinStep(g,function(d){c.removeAttr("disabled");a.submitCallback("joinStep");f.notify("\u4f1a\u7b7e\u6210\u529f");a.extendview.insertOneComment(d.comment);$("body").trigger("slideClose")})}});b.on("keydown.flowProcess","#joinStep-container textarea",function(a){a.ctrlKey&&
13==a.keyCode&&b.find("#joinStep-submit").click()});b.on("click.flowProcess","#btn-delete",function(b){f.confirm("\u5220\u9664\u540e\u53ef\u4ee5\u5230\u56de\u6536\u7ad9\u4e2d\u627e\u56de\u6216\u5f7b\u5e95\u5220\u9664,\u786e\u8ba4\u8981\u5220\u9664\u6570\u636e\u5417\uff1f",function(g){g&&d.delt(function(d){a.lastPage?a.lastPage.trigger("remove",a.id):$("body").trigger("slideClose");f.notify("\u5ba1\u6279\u5df2\u5220\u9664");$(b.target).trigger("remove")})})});b.on("click.flowProcess","#btn-restore",
function(a){a=$(this).attr("flowid");$("body #js_table .j_trashlist #"+a+"#"+a).trigger("click.TrashBinView",[{slideClose:!0}])});b.on("click.flowProcess","#workflow-chart-btn",function(){a.flowTopActive($(this));if("block"!=$("#js_flowchartContainer").css("display")){if(null==a.svgFlowChartView){var d=a.fCopy(a.flowRequest);a.svgFlowChartView=new k({flowData:d,flowVersion:d.flowVersion,parentEl:b,el:"#js_flowchartContainer",isDynamic:!0})}a.svgFlowChartView.render()}a.slideToggle("chart")});b.on("focusout.flowProcess",
"#workflow-name",function(b){if(!s.validate($(this)))return!1;var g=$(this).val();a.flowRequest&&g!=a.flowRequest.name&&d.changeProperty({id:a.id,propertyName:"name",propertyValue:g},function(d){a.flowRequest.name=g;f.notify("\u5ba1\u6279\u540d\u79f0\u5df2\u4fee\u6539")})});b.on("keyup.flowProcess","#workflow-name",function(d){d=d.which;13==d&&$(this).trigger("focusout");27==d&&(d=a.flowRequest,$(this).val(d.name));d=$(this).val();a.lastPage&&a.lastPage.trigger("changeTitle",{id:a.id,name:d})});b.on("keydown.flowProcess",
"#workflow-name",function(d){var b=d.which;13==b&&(d.preventDefault(),$(this).trigger("blur"));27==b&&($(this).val(a.flowRequest.name||""),$(this).blur())});b.on("click.flowProcess","a.j_btn-back",function(a){$("#closebox").click()});b.on("click.flowProcess","#workflow-takeBack",function(d){a.flowTopActive($(this));a.slideToggle("takeBack")});b.on("click.flowProcess","#takeBack-submit",function(g){if(a.flowComment($(this).parent().prev(),"takeBack")){var c=$(this);c.attr("disabled","disabled");var l=
b.find("#comment-textarea").val();b.find("#comment-textarea").val("");d.takeBack({id:a.id,"comment.content":l},function(d){c.removeAttr("disabled");a.submitCallback("takeBack");d.actionMsg?f.notify(d.actionMsg.message):f.notify("\u5ba1\u6279\u6536\u56de\u6210\u529f");a.lastPage.removeWorkflow&&a.lastPage.trigger("remove",a.id);$("body").trigger("slideClose");$(g.target).trigger("remove")})}});b.on("click.flowProcess","#btn-submit-again",function(d){a.renderNew(!0)})},flowTopActive:function(a){$(this.el).find("#permissions a").not(a).removeClass("active");
a.toggleClass("active")},render:function(){$(this.el);this.id?this.renderFlow():this.renderNew();$(this.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})},fCopy:function(a){var d;if(a instanceof Array)d=[];else if(a instanceof Object)d={};else return a;for(var b in a)d[b]="object"!=typeof a[b]?a[b]:arguments.callee(a[b]);return d},renderFlow:function(){var a=this,d=$(a.el),b=a.model;b.id=
a.id;var g={};"02"==a.renderType&&(g.type="allFlow");b.show(g,function(b){d.html(f.template("flow.flowprocess"));d.find("#pass-container textarea").autosize();d.find("#back-container textarea").autosize();d.find("#joinStep-container textarea").autosize();d.find("#newFlowPermissions").remove();d.find(".loading_large").show();a.renderShowAfter(b)})},renderShowAfter:function(a){var d=$(this.el),b=a.actionMsg;if(b&&b.message)return $(this.el).html(f.template("base.nopermission",{msg:b,module:"workflow",
id:this.id})),$(this.el).find(".scrollwrapper").trigger("resizeSroll"),$("#entitybox").get(0),!1;this.initComponent();a&&a.flowRequest&&(this.formDataId=this.extendview.formDataId=a.flowRequest.formData);$(this.el).find(".loading_large").hide();$(this.el).find("#info-div").show();$(this.el).find("#workflow-name").autosize();f.layout(this.el+" #flowContent");this.highLight(this.id);d.find("#"+this.id+" span.new").addClass("hide");this.loadFlow(a)},renderNew:function(a){var d=this,b=$(d.el);b.html(f.template("flow.flowprocess"));
b.find("#pass-container textarea").autosize();b.find("#back-container textarea").autosize();b.find("#joinStep-container textarea").autosize();b.find("#addstep-container #flow-textarea").autosize();"biaogeform"!=d.renderType&&b.find("#backToFormList").removeClass("hide");b.find("#permissions").remove();d.initComponent();f.layout(d.el+" #flowContent");d.guideView=new w({module:"workflow"});b.find("#workflow-info").addClass("hide");b.find("#applicants .applyUser_js").attr("userId",TEAMS.currentUser.id).text(TEAMS.currentUser.name).attr("title",
TEAMS.currentUser.name);b.find("#applicants .applyDepa_js").text(TEAMS.currentUser.department.name);var g=Date.create(TEAMS.nowTime).format("{yyyy}-{MM}-{dd}");b.find("#applicants .applyDate_js").text(g);b.find("#workflow-name").autosize();b.find("#new-workflow-request").html("");var c=$('\x3cdiv class\x3d"loading_small form-loading"\x3e\x3cspan\x3e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e');b.find("#new-workflow-request").parent().append(c);a?d.formModel.findNewestLayout(d.formId,function(a){d.formView.loadFormByLayoutId({parentEl:b.find("#new-workflow-request"),
dataId:d.formDataId,formId:d.formId,layoutId:a.formLayout.id,readOnly:!1,callback:function(a){d.flowRequest=null;d.id=null;b.find("#applicants").show();b.find("#workflow-name").val(a.form.name).focus();if(null==a.formLayout)return $(d.el).find(".form-preview").html(f.template("base.nopermission",{msg:{message:"\u4f60\u8bbf\u95ee\u7684\u6570\u636e\u670d\u52a1\u5668\u4e0d\u5b58\u5728",code:102},module:"workflow",id:d.id})),$(d.el).find(".form-preview .j_btn-back").remove(),$(d.el).find(".scrollwrapper").trigger("resizeSroll"),
!1;d.formId=a.form.id;d.formType=a.form.ownership;var g="(\u56e2\u961f)";"personal"==a.form.ownership&&(g="(\u4e2a\u4eba)");b.find("#formName").text(a.form.name);b.find("#ownership").text(g);c.remove();null!=b.find("#new-workflow-request").find("div").get(0)&&b.find("#new-workflow-request").show();if(a=formPlugin.submitAssembleForm({parentEl:b.find(".form-view_js")}))a=JSON.stringify(a.formData.dataDetails),window.formJsonStr=a}})}):d.formView.render({parentEl:b.find("#new-workflow-request"),formId:d.formId,
callback:function(a){if(null==a.formLayout)return $(d.el).html(f.template("base.nopermission",{msg:{message:"\u4f60\u8bbf\u95ee\u7684\u6570\u636e\u670d\u52a1\u5668\u4e0d\u5b58\u5728",code:102},module:"workflow",id:d.id})),$(d.el).find(".scrollwrapper").trigger("resizeSroll"),$("#entitybox").get(0),!1;b.find("#applicants").show();b.find("#workflow-name").val(a.form.name).focus();var g="(\u56e2\u961f)";"personal"==a.form.ownership&&(g="(\u4e2a\u4eba)");d.formType=a.form.ownership;b.find("#formName").text(a.form.name);
b.find("#ownership").text(g);c.remove();null!=b.find("#new-workflow-request").find("div").get(0)&&b.find("#new-workflow-request").show();a=formPlugin.submitAssembleForm({parentEl:b.find(".form-view_js")});a=JSON.stringify(a.formData.dataDetails);window.formJsonStr=a}});b.find("#workflow-container").on("keydown","#workflow-name",function(a){var d=a.which;13==d&&(a.preventDefault(),$(this).trigger("blur"));27==d&&(a.preventDefault(),$(this).trigger("blur"))})},slideToggle:function(a){var d=this,b=$(d.el);
switch(a){case "pass":b.find("#step-container").slideUp(400);b.find("#pass-container").slideToggle(400).find("textarea").focus();b.find("#takeBack-container").slideUp(400);b.find("#free-back-container").slideUp(400);b.find("#js_flowchartContainer").slideUp(400);b.find("#joinStep-container").slideUp(400);b.find("#chart-fold").slideUp(400);b.find("#js_workflow_notice").slideUp(400);break;case "takeBack":b.find("#step-container").slideUp(400);b.find("#pass-container").slideUp(400);b.find("#takeBack-container").slideToggle(400).find("textarea").focus();
b.find("#free-back-container").slideUp(400);b.find("#js_flowchartContainer").slideUp(400);b.find("#joinStep-container").slideUp(400);b.find("#chart-fold").slideUp(400);b.find("#js_workflow_notice").slideUp(400);break;case "free-back":b.find("#step-container").slideUp(400);b.find("#pass-container").slideUp(400);b.find("#takeBack-container").slideUp(400);b.find("#free-back-container").slideToggle(400).find("textarea").focus();b.find("#js_flowchartContainer").slideUp(400);b.find("#joinStep-container").slideUp(400);
b.find("#chart-fold").slideUp(400);b.find("#js_workflow_notice").slideUp(400);break;case "addStep":b.find("#step-container").slideToggle(400).find("textarea").focus();b.find("#pass-container").slideUp(400);b.find("#takeBack-container").slideUp(400);b.find("#free-back-container").slideUp(400);b.find("#js_flowchartContainer").slideUp(400);b.find("#joinStep-container").slideUp(400);b.find("#chart-fold").slideUp(400);b.find("#js_workflow_notice").slideUp(400);break;case "joinStep":b.find("#step-container").slideUp(400);
b.find("#pass-container").slideUp(400);b.find("#takeBack-container").slideUp(400);b.find("#free-back-container").slideUp(400);b.find("#js_flowchartContainer").slideUp(400);b.find("#chart-fold").slideUp(400);b.find("#js_workflow_notice").slideUp(400);b.find("#joinStep-container").slideToggle(400,function(){var a=$("#joinStep-container .entity-container");a.empty();for(var b=d.flowRequest.currentStep.flowOperators,g=0;g<b.length;g++){var c=b[g].operator;a.append('\x3cspan class\x3d"origin"\x3e\x3ca id\x3d"'+
c.id+'" class\x3d"usercard-toggle" userid\x3d"'+c.id+'"\x3e'+c.name+"\x3c/a\x3e\x3c/span\x3e")}x({el:d.el+" .join-selector",callback:function(b){if(b&&!$.isEmptyObject(b)){$.isArray(b)||(b=[b]);for(var g=0,c=b.length;g<c;g++)if(!d.isJoinOperatorExist(b[g].id)){var l='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d"'+b[g].id+'" class\x3d"usercard-toggle" userid\x3d"'+b[g].id+'"\x3e'+b[g].name+"\x3c/a\x3e\x3c/span\x3e";0<a.find("#"+b[g].id).length||a.append(l)}}}})}).find("textarea").focus();break;
case "chart":b.find("#js_flowchartContainer").slideToggle(400),b.find("#step-container").slideUp(400),b.find("#takeBack-container").slideUp(400),b.find("#pass-container").slideUp(400),b.find("#free-back-container").slideUp(400),b.find("#joinStep-container").slideUp(400),b.find("#chart-fold").slideToggle(400),b.find("#js_workflow_notice").slideToggle(400)}},submitCallback:function(a){var d=$(this.el);switch(a){case "pass":d.find("#pass-container").slideToggle(400);d.find("#btn-pass,#btn-back,#btn-step").addClass("hide");
d.find("#workflow-submit,#btn-back,#btn-end,#btn-delete,#btn-joinStep").addClass("hide");d.find("#comment-submit").removeClass("hide");break;case "takeBack":d.find("#takeBack-container").slideToggle(400);d.find("#btn-pass,#btn-back,#btn-step").addClass("hide");d.find("#workflow-submit,#btn-back,#btn-end,#btn-delete,#btn-joinStep").addClass("hide");d.find("#comment-submit").removeClass("hide");break;case "free-back":d.find("#free-back-container").slideToggle(400);d.find("#btn-pass,#btn-step,#btn-joinStep,#btn-free-back").addClass("hide");
d.find("#comment-submit").removeClass("hide");break;case "addStep":d.find("#step-container").slideToggle(400);d.find("#btn-pass,#btn-back,#btn-step,#btn-joinStep").addClass("hide");break;case "joinStep":d.find("#joinStep-container").slideToggle(400);break;case "submit":d.find("#step-container").slideToggle(400),d.find("#btn-remind ,#workflow-watch").removeClass("hide"),d.find("#btn-pass,#btn-back,#btn-step,#workflow-submit,#btn-delete,#btn-joinStep").addClass("hide")}},getRelevances:function(){var a=
this,d=[];$(a.el).find(".workflow-relevance .entity-item").each(function(b){var g=$(this).find("a"),g={objectModule:"workflow",targetId:g.attr("data-value"),targetModule:"agenda"==g.attr("data-module")?"calendar":g.attr("data-module"),targetName:g.html()};a.id&&(g.objectId=a.id);d[b]=g});return d},getIds:function(a){var d=[];$(a).find("a").each(function(){var a=$(this).attr("data-value");a&&d.push(a)});return d},tableCreateCallback:function(a){f.notify("\u5ba1\u6279\u64cd\u4f5c\u6210\u529f");this.lastPage?
this.closable?($("body").trigger("slideClose"),this.lastPage.remove()):"#entitybox-container"==this.el?(this.delegateFlowProcess(),this.id=a.flowRequest.id,this.renderFlow()):this.lastPage.trigger("create",{flow:a.flowRequest,userId:this.userId}):(this.id=a.flowRequest.id,this.renderFlow())},singleTableSave:function(a,d,b){var g=this,c=this.model;a=JSON.stringify(g.getFlowData(a,d,b));c.save(a,function(a){var d=a.actionMsg;null!=d&&null!=d.message?f.notify(d.message):(g.mainlineCallback&&g.mainlineCallback(a.flowRequest),
g.tableCreateCallback(a),g.createStream(a))})},singleTableRequest:function(a,d,b){var g=this,c=this.model,l=g.flowStepView.getStep().steps;a=g.getFlowData(a,d,b);a.flowSteps=l;a=JSON.stringify(a);c.request(a,function(a){var d=a.actionMsg;null!=d&&null!=d.message?(f.notify(d.message),$(g.el).find("#step-confirm").data("submit",!1)):(g.mainlineCallback&&g.mainlineCallback(a.flowRequest),g.tableCreateCallback(a),g.createStream(a))})},getFlowData:function(a,d,b){var g=this.el;f.getMap(a);a=this.getIds(g+
" #workflow-goal");this.mainlineId&&a.push(this.mainlineId);var c=this.getIds(g+" #workflow-mylabel").concat(this.getIds(g+" #workflow-label")),l=this.getIds(g+" #workflow-attach"),k=this.getIds(g+" #workflow-share"),e=this.getRelevances(),g=$.trim($(g).find("#workflow-name").val());return{flowRequest:{formId:b,name:g,formData:d},relevances:e,mainlineIds:a,tagIds:c,attachmentIds:l,shareIds:k}},renderComponent:function(a){this.renderWatch(a.watched);$(this.mainline.el).find(".entity-container").html("");
for(var d=0;d<this.relevanceViews.length;d++)$(this.relevanceViews[d].el).find(".entity-container").html("");$(this.attachment.el).find(".entity-container").html("");this.mainline.render(a.mainlines);this.tag.render(a.tags);this.renderRelevanceInfos(a.relevances);0<a.attachments.length&&(this.attachment.render(a.attachments),$(this.el).find("#workflow-control-detail #workflow-attach").removeClass("hide"));this.shareView.render(a.shareEntrys);this.extendview.render(a)},renderRelevanceInfos:function(a){var d=
$(this.el),b=this.relevanceViews,g=[],c=[],l=[],k=[],e=[];_.each(a,function(a){var d=a.targetModule;"task"==d?g.push(a):"document"==d?c.push(a):"customer"==d?k.push(a):"workflow"==d?l.push(a):"calendar"==d&&e.push(a)});_.each(b,function(a){"task"==a._targetModule?(a.render(g),0<g.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"document"==a._targetModule?(a.render(c),0<c.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"customer"==a._targetModule?(a.render(k),0<k.length&&
d.find($(a.el).attr("icon")).parent().addClass("hide")):"workflow"==a._targetModule?(a.render(l),0<l.length&&d.find($(a.el).attr("icon")).parent().addClass("hide")):"calendar"==a._targetModule&&(a.render(e),0<e.length&&d.find($(a.el).attr("icon")).parent().addClass("hide"))})},loadFlow:function(a){var d=$(this.el);this.flowRequest=a.flowRequest;this.controlPage(a);this.loadRequest(a);this.formReadOnly&&d.find("#workflow-name").prop("disabled",!0)},loadRequest:function(a){var d=this,b=$(d.el);b.find("#workflow-request").data(a);
var g=a.flowRequest;d.renderComponent(g);0<b.find("#workflow-control-detail").children().not(".hide").size()&&b.find("#workflow-control-detail").removeClass("hide");b.find("#btn-remind").attr("targetId",g.id);b.find("#btn-wechat").attr("targetId",g.id);var c=g.creator;b.find("#workflow-creator").html(c.username);b.find("#workflow-creator").attr("userId",c.id);b.find("#workflow-createtime").html(Date.create(g.createTime).format("{yyyy}-{MM}-{dd}"));var l="",k="";g.creator&&g.creator.id&&(l=g.creator.id,
k=g.creator.name);var e="";g.department&&g.department.name&&(e=g.department.name);b.find("#applicants .applyUser_js").attr("userId",l).attr("title",k);b.find("#applicants .applyUser_js span").text(k);b.find("#applicants .applyDepa_js").text(e);l=Date.create(g.createTime).format("{yyyy}-{MM}-{dd}");b.find("#applicants .applyDate_js").text(l);c.avatar&&(url=c.avatar.p5&&"/base/download/"+c.avatar.p5,b.find("#applicants .applyUser_js .avatar").attr("src",url));c=d.formReadOnly;l=g.formData;k=g.formId;
a=a.flowRequest.currentStep;var n=g.lastPath,r=g.permission,p=g.finishTime,e=TEAMS.currentUser.id;n||31==r&&(c=!1);if(!p)if(a&&"start"==a.type)31==r&&(readonly=!1);else for(n=n.flowOperations,r=0,p=n.length;r<p;r++){var s=n[r];if(s.operator.id==e&&null==s.operateTime){c=!a.formWritable;break}}"01"==d.renderType?b.find(".current-operator").remove():"02"==d.renderType&&(c=!0,b.find("#permissions ul").prepend('\x3cli title\x3d"\u8fd8\u539f" id\x3d"btn-restore" flowId\x3d"'+g.id+'" class\x3d"iconlabel"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/li\x3e'),
b.find(".js_more_tools").remove(),b.find("#workflow-name").attr("disabled","disabled"),b.find("#workflow-submit").remove(),b.find("#btn-delete").remove(),b.find("#workflow-print").remove(),b.find(".current-operator").remove(),b.find("#workflow-watch").remove(),b.find("#btn-remind").remove(),b.find("#workflow-control-group").remove(),b.find(".j_extend").remove(),b.find(".extend-panel").remove());b.find("#new-workflow-request").html("");var u=$('\x3cdiv class\x3d"loading_small form-loading"\x3e\x3cspan\x3e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e');
b.find("#new-workflow-request").parent().append(u);d.readOnly=c;d.formView&&d.formView.loadForm({parentEl:b.find("#new-workflow-request"),dataId:l,formId:k,readOnly:c,callback:function(a){b.find("#workflow-name").val(g.name).trigger("autosize.resize");b.find("#applicants").show();if(null==a.formLayout)return $(d.el).find(".form-preview").html(f.template("base.nopermission",{msg:{message:"\u4f60\u8bbf\u95ee\u7684\u6570\u636e\u670d\u52a1\u5668\u4e0d\u5b58\u5728",code:102},module:"workflow",id:d.id})),
$(d.el).find(".form-preview .j_btn-back").remove(),$(d.el).find(".scrollwrapper").trigger("resizeSroll"),!1;d.formId=a.form.id;d.formType=a.form.ownership;var c="(\u56e2\u961f)";"personal"==a.form.ownership&&(c="(\u4e2a\u4eba)");b.find("#formName").text(a.form.name);b.find("#ownership").text(c);u.remove();null!=b.find("#new-workflow-request").find("div").get(0)&&b.find("#new-workflow-request").show();$("body").trigger("printLoaded",{data:a,flowRequest:g});if(a=formPlugin.submitAssembleForm({parentEl:b.find(".form-view_js")}))a=
JSON.stringify(a.formData.dataDetails),window.formJsonStr=a}})},controlPage:function(a){this.formReadOnly=!0;var d=$(this.el),b=a.flowRequest,g=b.currentStep,c=b.creator.id,l=b.lastPath,k=b.finishTime,e=b.permission,b=TEAMS.currentUser.id;this.permissionView.render(e);if(l){if(k)d.find(".js_flowstatus").removeClass("hide").text("\u5df2\u7ed3\u675f"),this.userId==c&&d.find("#btn-submit-again").removeClass("hide");else if(d.find(".js_flowstatus").removeClass("hide").text("\u5ba1\u6279\u4e2d"),g&&"start"==
g.type)31==e&&(this.formReadOnly=!1,d.find("#workflow-submit,#btn-delete").removeClass("hide"),d.find(".js_flowstatus").removeClass("hide").text("\u5f85\u63d0\u4ea4"));else for(g=l.flowOperations,c=0,l=g.length;c<l;c++)if(k=g[c],k.operator.id==b&&null==k.operateTime){d.find(".current-operator").removeClass("hide");break}a.flowRequest.currentStep.orCheck&&d.find("#btn-joinStep").hide();b=!1;a.flowRequest.currentStep.verify&&(d.find("#btn-free-back").hide(),d.find("#btn-pass").html(d.find("#btn-pass").html().replace("\u540c\u610f",
"\u786e\u8ba4")),d.find("#btn-pass").data("isVerify","isVerify"),b=!0);a.flowRequest.currentStep.formWritable||d.find(".js_more_tools\x3eul").find(".btn-save").addClass("hide");this.model.isRecoverable(this.id,function(a){a.menuAccess.isRecoverable&&d.find("#workflow-takeBack").removeClass("hide")});6<=d.find(".js_display_tool").length+d.find(".js_tool").length-d.find(".js_display_tool").filter(".hide").length?(d.find(".js_tool").addClass("hide"),b&&(d.find(".js_tool").eq(0).insertBefore(".js_more_tools").removeClass("hide"),
d.find(".js_more_tools\x3eul li").eq(0).addClass("hide"))):(d.find(".js_more_tools").remove(),d.find(".js_tool").removeClass("hide"));this.backLastPage&&(d.find(".js_entiyDetail_reply").removeClass("hide"),d.find(".detail-close-li").addClass("hide"));$("#permissions").find(".hide").remove()}else 31==e&&(this.formReadOnly=!1,d.find(".current-operator,#workflow-watch,#btn-remind").addClass("hide"),d.find("#workflow-submit,#btn-delete,#workflow-chart-btn,#workflow-save").removeClass("hide"),d.find(".js_flowstatus").removeClass("hide").text("\u5f85\u63d0\u4ea4"))},
flowComment:function(a,d){var b=$(this.el),g=a.val(),c=a.attr("placeholder");g==c&&(g="");if(g.isBlank()){if("approve"==d)return b.find("#comment-textarea").val("[\u540c\u610f]"),!0;if("verify"==d)return b.find("#comment-textarea").val("[\u786e\u8ba4]"),!0;f.notify("\u8bf7\u586b\u5199\u6d41\u8f6c\u610f\u89c1\u540e\u518d\u63d0\u4ea4!","","error");a.focus();return!1}c="";switch(d){case "addStep":c="[\u52a0\u7b7e]";break;case "approve":c="[\u540c\u610f]";break;case "verify":c="[\u786e\u8ba4]";break;
case "reject":c="[\u9000\u56de\uff1a"+a.parent().find("#js_steps").val()+"]";break;case "joinStep":c="[\u4f1a\u7b7e]";break;case "takeBack":c="[\u6536\u56de]"}g=c+g;b.find("#comment-textarea").val(g);return!0},renderWatch:function(a){var d=$(this.el);a?d.find("#workflow-watch a").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'):d.find("#workflow-watch a").html('\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e\u5173\u6ce8')},highLight:function(a){var d=$(this.el);d.find("#flow-list li.active").removeClass("active");
d.find("#flow-list #"+a).addClass("active")},rebuildSN:function(a){var d=$(a).children();a.data("count",d.length);for(a=0;a<d.length;a++)$(d[a]).find(".sn").html(a+1)},createStream:function(a){var d=$(this.el);a.flowRequest&&a.flowRequest.stream&&(a=a.flowRequest.stream,d.find("#stream").trigger("insertStream",a))},isJoinOperatorExist:function(a){for(var d=this.flowRequest.currentStep.flowOperators,b=0;b<d.length;b++)if(a==d[b].operator.id)return!0;return!1},changeWatch:function(a){this.renderWatch(a);
$("#left").trigger("refresh","watched")},addShare:function(a){this.shareView.render(a)},api_changeTitle:function(a){$(this.el).find("#workflow-name").val(a).trigger("autosize.resize")},api_blurTitle:function(){$(this.el).find("#workflow-name").trigger("focusout")},submitCheck:function(){if($(this.el).find("#workflow-name").val())return!1;f.notify("\u8bf7\u586b\u5199\u5ba1\u6279\u540d\u79f0\u518d\u63d0\u4ea4");return!0},remove:function(){var a=this.el;$(this.el).find("#workflow-name").trigger("autosize.destroy");
$(this.el).find("#pass-container textarea").trigger("autosize.destroy");$(this.el).find("#back-container textarea").trigger("autosize.destroy");$(this.el).find("#joinStep-container textarea").trigger("autosize.destroy");this.off();$(a).off(".flowProcess");$(a).off(".flowcomment");f.removeDatepicker(a+" #duedate");this.attachment&&(this.attachment.remove(),this.attachment=null);this.mainline&&(this.mainline.remove(),this.mainline=null);this.tag&&(this.tag.remove(),this.tag=null);this.shareView&&(this.shareView.remove(),
this.shareView=null);this.extendview&&(this.extendview.remove(),this.extendview=null);this.permissionView&&(this.permissionView.remove(),this.permissionView=null);this.flowStepView&&(this.flowStepView.remove(),this.flowStepView=null);this.svgFlowChartView&&(this.svgFlowChartView.remove(),this.svgFlowChartView=null);window.formJsonStr&&(window.formJsonStr=null);this.formView&&(this.formView.remove(),this.formView=null);$(a).html("")}});m.exports=h});
define("teams/workflow/requestlistview","teams/utils teams/component/sharemodel teams/component/watchmodel teams/workflow/requestmodel teams/component/filter teams/component/remind teams/component/userselector teams/workflow/workflowrightview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/sharemodel"),c=h("teams/component/watchmodel"),b=h("teams/workflow/requestmodel"),a=h("teams/component/filter"),d=h("teams/component/remind"),g=h("teams/component/userselector"),l=h("teams/workflow/workflowrightview");
h=Backbone.View.extend({el:"#j_flowscroll",pageNo:"",pageSize:"",initialize:function(a){this.userId=a.userId;this.id=a.id;this.searchType=a.searchType;this.model=new b(a);this.watchModel=new c;this.shareModel=new e({entityId:"",module:""});$(this.el).html(f.template("flow.requestlist",{userId:this.userId,currentUserId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin}))},render:function(){var a=this,d=a.model,b="",g=$("#workflow-filter").data("data-filter"),c=$("#workflow-order").attr("data-entity"),
l=$.trim($("#workflow-keywords").val()),e=$("#workflow-keywords").attr("placeholder"),h=a.searchType;a.renderSubview();l==e&&(l="");l&&0<l.length&&(h="all");(e=$(".toolkit-list").find("li[data-type \x3d '"+h+"']"))&&e.addClass("active");h=a.getSearchType(h);$(a.el).find("#guide-div").addClass("hide");d.userId=this.userId;d.id=this.id;1==d.pageNo&&$("#flow-list").empty();b=g&&0<g.length?b+('"filter":{'+g+","+h+"},"):b+('"filter":{'+h+',"keywords":"'+l+'"},');b+='"userId":"'+a.userId+'","pageNo":"'+
d.pageNo+'","order":{"property":"'+(c?c:"default")+'"}';b=("{"+b+"}").replace(/\\/g,"\\\\");$(".j_no_my_workflow, .js_more").hide();$("#flowlist-loading").removeClass("hide");d.search(b,function(d){if(1==d.page.pageNo&&0==d.page.result.length){var b;switch(a.searchType){case "todo":b="\u5f85\u529e\u5ba1\u6279";break;case "unread-todo":b="\u672a\u8bfb\u6700\u65b0\u5f85\u529e";break;case "newcomment-todo":b="\u65b0\u53cd\u9988\u5f85\u529e";break;case "read-todo":b="\u5df2\u67e5\u9605\u5f85\u529e";break;
case "finshed":b="\u5df2\u529e\u5ba1\u6279";break;case "newcomment-finshed":b="\u65b0\u53cd\u9988\u5df2\u529e";break;case "read-finshed":b="\u5df2\u67e5\u9605\u5df2\u529e";break;case "done":b="\u529e\u7ed3\u5ba1\u6279";break;case "create":b="\u6211\u63d0\u4ea4\u7684\u5ba1\u6279";break;case "watched":b="\u6211\u5173\u6ce8\u7684\u5ba1\u6279";break;case "sharetome":b="\u5171\u4eab\u7ed9\u6211\u7684\u5ba1\u6279";break;case "drafts":b="\u8349\u7a3f\u5ba1\u6279";break;case "subordinates":b="\u6211\u4e0b\u5c5e\u7684\u5f85\u529e\u5ba1\u6279";
break;case "all":b="\u5168\u90e8\u5ba1\u6279";break;default:b="\u67e5\u8be2\u7684\u5ba1\u6279"}$(a.el).find("#flow-list").addClass("hide");$(".j_no_my_workflow").show().html("\u65e0"+b+",\u60a8\u53ef\u901a\u8fc7\u201c\u5206\u7c7b\u201d\u6765\u5207\u6362\u5230\u5176\u4ed6\u5ba1\u6279\u5217\u8868\u67e5\u9605");$("#workflow-type").attr("data-entity")&&"mine-todo"!=$("#workflow-type").attr("data-entity")&&"mineCreate"!=$("#workflow-type").attr("data-entity")||g||l||$(a.el).find("#guide-div").removeClass("hide")}else $("#flow-list").removeClass("hide"),
$(".j_no_my_workflow").hide();d.page.hasNext?$(".js_more").show():$(".js_more").hide();a.createBoxs(d.page.result);a.id&&a.highLight(a.id);$(".center-pane #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$("#flowlist-loading").addClass("hide")});f.layout("#j_flowscroll")},getSearchType:function(a){switch(a){case "todo":a='"type":"mine","flowFilter":"todo"';break;case "unread-todo":a='"type":"unRead","flowFilter":"todo"';break;case "newcomment-todo":a='"type":"newComment","flowFilter":"todo"';
break;case "read-todo":a='"type":"read","flowFilter":"todo"';break;case "finshed":a='"type":"mine","flowFilter":"finished"';break;case "newcomment-finshed":a='"type":"newComment","flowFilter":"finished"';break;case "done":a='"type":"mine","flowFilter":"done"';break;case "read-finshed":a='"type":"read","flowFilter":"finished"';break;case "subordinates":a='"type":"subordinates","flowFilter":"todo"';break;case "minecreate":a='"type":"mineCreate"';break;case "newcomment-minecreate":a='"type":"mineCreate","flowFilter":"newComment"';
break;case "proceeding-minecreate":a='"type":"mineCreate","flowFilter":"proceeding"';break;case "unread-minecreate":a='"type":"mineCreate","flowFilter":"unRead"';break;case "done-minecreate":a='"type":"mineCreate","flowFilter":"done"';break;case "sharetome":a='"type":"shareToMe"';title="\u5171\u4eab\u7ed9\u6211\u7684\u5ba1\u6279";break;case "newcomment-sharetome":a='"type":"shareToMe","flowFilter":"newComment"';break;case "proceeding-sharetome":a='"type":"shareToMe","flowFilter":"proceeding"';break;
case "done-sharetome":a='"type":"shareToMe","flowFilter":"done"';break;case "drafts":a='"type":"drafts"';title="\u8349\u7a3f\u5ba1\u6279";break;case "watched":a='"type":"watched"';title="\u6211\u5173\u6ce8\u7684\u5ba1\u6279";break;case "newcomment-watched":a='"type":"watched","flowFilter":"newComment"';break;case "proceeding-watched":a='"type":"watched","flowFilter":"proceeding"';break;case "done-watched":a='"type":"watched","flowFilter":"done"';break;case "all":a='"type":"all"';break;case "newcomment-all":a=
'"type":"all","flowFilter":"newComment"';break;case "proceeding-all":a='"type":"all","flowFilter":"proceeding"';break;case "unread-all":a='"type":"all","flowFilter":"unRead"';break;case "done-all":a='"type":"all","flowFilter":"done"';break;case "proceeding-finshed":a='"type":"finished","flowFilter":"proceeding"';break;default:a='"type":"mine","flowFilter":"todo"'}return a},renderSubview:function(){this.subView=new l({container:"#j_workflowright",showtitle:"0",module:"workflow",moduleName:"\u5ba1\u6279",
userId:this.userId,showReaded:"1"});this.subView.render()},createBoxs:function(a){for(var d=0;d<a.length;d++)this.createBox(a[d],"append");this.rebuildSN()},createBox:function(a,d,b){var g=$("#flow-clone").clone();"new"==a.filter&&g.find(".new").removeClass("hide");a.creator&&a.creator.id!=TEAMS.currentUser.id&&g.find(".user").html(a.creator.username);0!=a.commentCount&&(g.find("i").show(),g.find("em").html(a.commentCount));g.find(".date").html(Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"));
g.attr("id",a.id);g.attr("href","/workflows/"+this.userId+"/"+a.id);g.attr("userId",this.userId);g.attr("data-id",a.id);a.watched?(g.find(".watch").html("\u53d6\u6d88\u5173\u6ce8"),g.find(".watch").attr("watched","true")):g.find(".watch").attr("watched","false");g.find(".watch").attr("targetId",a.id);g.find(".watch").attr("module","workflow");a.newConment&&g.addClass("newComment");a.unread&&g.addClass("unread").removeClass("newComment");var c=a.name?a.name:"",l=a.serNum?a.serNum:"";g.find(".share").attr("targetId",
a.id);a.finishTime&&g.find(".text").addClass("finished-line");g.find(".text .js_flowname").html(c).attr("title",c+l);g.find(".text .js_sernum").html(l).attr("title",c+l);$("#flow-list")[d](g);b&&g.trigger("click")},insertWorkflow:function(a,d){$(".j_no_my_workflow").hide();$(this.el).find("#guide-div").addClass("hide");this.createBox(a,"prepend",!0);this.rebuildSN();this.highLight(a.id)},changeWatch:function(a,d){var b=$("#flowlist-container #"+a);d?(b.find(".watch").html("\u53d6\u6d88\u5173\u6ce8"),
b.find(".watch").attr("watched","true")):(b.find(".watch").html("\u5173\u6ce8"),b.find(".watch").attr("watched","false"))},delegateEvents:function(){var b=this,c=this.model,l=$(b.el);$("body").on("click.WorkflowList",".goto-top",function(a){f.gotoTop("#j_flowscroll")});l.on("click.WorkflowList",".js_more",function(){c.pageNo=1*c.pageNo+1;b.render();$(this).hide()});l.on("mouseenter.WorkflowList","#workflow-filter",function(d){var g=$(this).attr("data-toggle");b.filter||(b.filter=new a({el:g,module:"workflow",
targetObj:$(this),userId:b.userId,scroll:!0}),b.filter.render(d));d=setTimeout(function(){$(g).parents(".dropdown-filter").slideDown("fast")},300);$(this).data("showTimer",d);$(this).addClass("open")}).on("mouseleave.WorkflowList","#workflow-filter",function(a){a=$(this).attr("data-toggle");var d=$(this).data("showTimer");d&&clearTimeout(d);$(this).removeData("showTimer");$(a).parents(".dropdown-filter").slideUp(100);$(this).removeClass("open")}).on("filter.WorkflowList","#workflow-filter",function(a){c.pageNo=
1;b.render()});l.on("click.WorkflowList",".filterType",function(){$(".filterType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#workflow-type").attr("data-entity",$(this).attr("data-entity")).attr("data-type",$(this).text());b.filter&&b.filter.resetArray();$("#workflow-keywords").val("");$("#workflow-filter").data("data-filter","");$("#workflow-order").attr("data-entity","").html('\u6392\u5e8f\x3cb class\x3d"caret"\x3e\x3c/b\x3e');c.pageNo=1;b.render();ROUTER.navigate("/workflows/"+
b.userId,{trigger:!1})});l.on("click.WorkflowList",".orderType",function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#workflow-order").attr("data-entity",$(this).attr("data-entity"));c.pageNo=1;b.render()});l.on("search.WorkflowList","#workflow-keywords",function(){c.pageNo=1;b.render()});l.on("keyup.WorkflowList","#workflow-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});l.on("click.WorkflowList",
"li.search .icon-search",function(){l.find("#workflow-keywords").trigger("search")});l.on("click.WorkflowList",".workflow-watchs",function(a){var d=b.findSelectedLi();0==d.length?f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55"):b.watchModel.watch('{"module":"workflow","ids":"'+d+'"}',function(a){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");b.updateFastKey(d)})});l.on("click.WorkflowList",".shortcut .watch",function(a){a.stopPropagation();a={};var d=$(this);a.module=d.attr("module");a.id=d.attr("targetId");
"true"==d.attr("watched")?(a._method="DELETE",b.watchModel.watchOne(a,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");d.html("\u5173\u6ce8");d.attr("watched","false");"watched"==b.searchType&&d.parent().parent().remove()})):(a._method="PUT",b.watchModel.watchOne(a,function(a){f.notify("\u5173\u6ce8\u6210\u529f");d.html("\u53d6\u6d88\u5173\u6ce8");d.attr("watched","true")}))});$("body").off("click",".workflow-reminds").on("click",".workflow-reminds",function(a){var g=b.findSelectedLi();
0==g.length?f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55"):($(this).attr("module","workflow"),$(this).attr("targetIds",g),(new d({obj:$(this)})).render(a))});l.off("confirmHandler",".workflow-share").on("confirmHandler",".workflow-share",function(a,d){var g=d.objs;if(g&&!$.isEmptyObject(g)){g=$.isArray(g)?g:[g];b.sids="";for(var c=0;c<g.length;c++)b.sids+=g[c].id+",";b.shareModel.sids=b.sids;g=b.findSelectedLi();b.shareModel.entityIds=g;b.shareModel._module="workflow";b.shareModel.saveAll(function(a){a.addUserMessage?
f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});l.on("click.WorkflowList",".workflow-share",function(a){a.stopPropagation();0<b.findSelectedLi().length?(new g({$target:$(this)})).open():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});l.off("confirmHandler",".shortcut .share").on("confirmHandler",".shortcut .share",function(a,d){var g=d.objs;if(g&&!$.isEmptyObject(g)){g=$.isArray(g)?g:[g];b.sids="";for(var c=0;c<g.length;c++)b.sids+=g[c].id+",";g=$(this).attr("targetId");
b.shareModel.sids=b.sids;b.shareModel.entityIds=g;b.shareModel._module="workflow";b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});l.on("click.WorkflowList",".shortcut .share",function(a){a.stopPropagation();$(this).hasClass("selector-toggle")?(new g({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});l.on("click.WorkflowList","#create-workflow",function(){ROUTER.navigate("/workflows/"+b.userId+
"/new",{trigger:!0})});l.on("keyup.WorkflowList","#flow-list",function(a){a=a.which;if(38==a){var d=b.getPrev();d&&d.trigger("click")}40==a&&(a=b.getNext())&&a.trigger("click")});l.on("click.WorkflowList","li.workflow",function(a){!$(this).hasClass("unread")||"unread-todo"!=b.searchType&&"todo"!=b.searchType?!$(this).hasClass("newComment")||"newcomment-todo"!=b.searchType&&"todo"!=b.searchType||(a=$("li .j_newComment.badge").text().trim(),!$.isNumeric(a)||a-1?$("li .j_newComment.badge").text(a-1):
$("li .j_newComment.badge").addClass("hide")):(a=$("li .j_unread.badge").text().trim(),!$.isNumeric(a)||a-1?$("li .j_unread.badge").text(a-1):$("li .j_unread.badge").addClass("hide"));$(this).removeClass("unread");$(this).removeClass("newComment");b.highLight($(this).attr("id"))})},findSelectedLi:function(){var a="";$(".j_center .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},changeTitle:function(a,d){$("#flowlist-container #"+
a).find("div.title .text").html(d).attr("title",d)},removeWorkflow:function(a){var d=$("#flowlist-container");this.highLight(a);this.getNext();d.find("#"+a).parent();d.find("#"+a).remove();this.rebuildSN();$("body").trigger("slideClose")},getPrev:function(){return f.getPrev("#flow-list li")},getNext:function(){return f.getNext("#flow-list li")},highLight:function(a){a?f.highLight("#flowlist-container",a):f.highLight("#flowlist-container",$("#flowlist-container").find("li:first").attr("id"))},rebuildSN:function(){f.rebuildSN($("#flow-list"))},
updateFastKey:function(a){a=a.split(",");for(var d=0;d<a.length-1;d++){var b=$("#flowlist-container #"+a[d]);b.find(".watch").html("\u53d6\u6d88\u5173\u6ce8");b.find(".watch").attr("watched","true")}},remove:function(){this.undelegateEvents();$(this.el).off(".WorkflowList");this.filter&&(this.filter.remove(),this.filter=null)}});m.exports=h});
define("teams/workflow/svgflowchartview",["teams/utils","teams/workflow/config/flowchartconfig","teams/workflow/flowlogmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/config/flowchartconfig"),c=h("teams/workflow/flowlogmodel");h=Backbone.View.extend({initialize:function(b){this.flowData=b.flowData;this.flowVersion=b.flowVersion;this.parentEl=b.parentEl;this.el=b.el;this.isDynamic=b.isDynamic;this.isModal=b.isModal;this.flowDataCombination();this.logModel=new c;$(this.parentEl).find(this.el).html(f.template("flow.flowchartsvg",
{isSvg:typeof SVG}))},delegateEvents:function(){var b=$(this.el),a=this;b.find(".j_closeModel").on("click.flowchartsvg",function(){a.hideSvgLog()});$("body").on("click.flowchartsvg",function(d){d=$(d.target);null==d.parents(".js_flow_group").get(0)&&null==d.closest("#logModel").get(0)&&a.hideSvgLog()});b.find(".j_chartLogScr").attr("auto-scroll","yes").css({"max-height":"220px","min-height":"10px"});f.layout(this.el+" .j_chartLogScr",[{mouseWheel:{enable:!0,axis:"y",preventDefault:!0},gotoTopButton:!1}])},
flowDataCombination:function(){"version2"==this.flowVersion&&!$.isEmptyObject(this.flowData.allSteps)&&0<this.flowData.allSteps.length&&(this.flowData.flowSteps=this.flowData.allSteps)},render:function(b){this.isDynamic?"version2"==this.flowVersion?this.buildNewFlow():this.buildOldFlow():(this.buildNewFlow(),this.isModal&&!$(this.el).hasClass("mCustomScrollbar")&&(f.layout(this.el,[{mouseWheel:{enable:!0,axis:"y",preventDefault:!0},gotoTopButton:!1,bottomBlank:!1}]),$(this.el).height(465).mCustomScrollbar("update")))},
buildNewFlow:function(){this.checkFlowData()&&this.build()},checkFlowData:function(){return"start"!=this.flowData.flowSteps[0].type?(f.notify("\u5f53\u524d\u6570\u636e\u65e0\u6cd5\u9884\u89c8\u56fe\u5f62"),!1):!0},build:function(){var b,a;this.isDynamic?(b=SVG("drawing").size(e.Dynamic.drawSize.w,e.Dynamic.drawSize.h),a=(e.Dynamic.drawSize.w-e.Base.rect.w)/2):(b=SVG("drawing").size(e.Static.drawSize.w,e.Static.drawSize.h),a=(e.Static.drawSize.w-e.Base.rect.w)/2);b.clear();a=b.group().move(a,e.Base.move.y).addClass("js_flow_group");
a.add(this.drawNodesGroup(b));this.isDynamic?this.drawNodesColor(b):this.createNodesOpacity(b);a.add(this.drawTextGroup(b));a.add(this.drawOrCheckGroup(b));this.updateSvgView(b);a.add(this.drawNodesGroupPath(b));this.isDynamic&&this.rebuildConPath();this.optimizationSvgPath();this.activeSVGEvent()},createGradient:function(b,a,d){return b.gradient("linear",function(b){b.at(0,a);b.at(.01,d)}).from(e.Base.gradient.fx,e.Base.gradient.fy).to(e.Base.gradient.tx,e.Base.gradient.ty)},drawNodesGroup:function(b){var a=
b.group().stroke({width:e.Base.strokeWidth.node}).addClass("js_nodes_group"),d,g,c,n,k=this.flowData.flowSteps.length;this.isDynamic?(c=this.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.waiting),n=e.Dynamic.rectColor.waiting):(c=this.createGradient(b,e.Base.gradientColor.dftBegin,e.Base.gradientColor.dftEnd),n=e.Static.rectColor.dft);$.each(this.flowData.flowSteps,function(f,p){g="start"==p.type&&0==f?b.rect(e.Base.rect.w,e.Base.rect.h).move(e.Base.rect.x,e.Base.rect.y).rx(e.Base.rect.rx).ry(e.Base.rect.ry).fill(c).stroke(n).attr({id:"svg"+
p.id}).data({type:"start",index:f}):g.clone().translate(e.Base.translate.x,f*e.Base.translate.y).attr({id:"svg"+p.id}).data({type:f<k-1?"middle":"end",index:f});d=b.group().addClass("js_node_group");d.add(g);a.add(d)});g=b.rect(e.Base.rect.w,e.Base.rect.h/2).move(e.Base.rect.x,e.Base.rect.y).rx(e.Base.rect.rx).ry(e.Base.rect.ry).translate(e.Base.translate.x,this.flowData.flowSteps.length*e.Base.translate.y).fill(n).stroke(n).addClass("js_virtual_node").data({type:"virtual",index:this.flowData.flowSteps.length});
d=b.group().addClass("js_node_group");d.add(g);a.add(d);return a},hideLog:function(){},drawNodesColor:function(b){var a,d,g,c=this;$.each(this.flowData.flowSteps,function(n,k){a=SVG.get("svg"+k.id);switch(k.currentType){case "request":d=c.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.request);g=e.Dynamic.rectColor.request;break;case "approve":d=c.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.approve);g=e.Dynamic.rectColor.approve;break;case "reject":d=c.createGradient(b,
e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.reject);g=e.Dynamic.rectColor.reject;break;case "process":d=c.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.processing);g=e.Dynamic.rectColor.processing;break;case "wait":d=c.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.waiting),g=e.Dynamic.rectColor.waiting}a.fill(d).stroke(g)});c.flowData.finishTime&&SVG.select("g.js_node_group rect.js_virtual_node").first().fill(e.Dynamic.rectColor.end).stroke(e.Dynamic.rectColor.end)},
createNodesOpacity:function(b){var a=SVG.select("g.js_nodes_group .js_node_group").length(),d=e.Base.opacity.max-e.Base.opacity.min,g;SVG.select("g.js_nodes_group .js_node_group rect").each(function(b){g=e.Base.opacity.max-d/a;g<=e.Base.opacity.min?this.fill({opacity:e.Base.opacity.min}).stroke({opacity:e.Base.opacity.min}):this.fill({opacity:g}).stroke({opacity:g});a--})},drawTextGroup:function(b){var a=b.group().addClass("js_text_group"),d,g,c,n,k=this,f,p,s,u,h;k.isDynamic?(f=e.Dynamic.txOffset.tx,
p=e.Dynamic.txOffset.ty,s=e.Dynamic.txOffset.bx,u=e.Dynamic.txOffset.by,h=e.Dynamic.txOffset.vy):(f=e.Static.txOffset.tx,p=e.Static.txOffset.ty,s=e.Static.txOffset.bx,u=e.Static.txOffset.by,h=e.Static.txOffset.vy);$.each(this.flowData.flowSteps,function(h,w){var y="",z="";$.each(w.flowOperators||[],function(a,d){if(!k.isDynamic&&d.operatorRule)switch(d.operatorRule){case "superior":y+="\u4e0a\u7ea7 ";break;case "free":y+="\u81ea\u7531\u9009\u62e9 ";break;case "applicant":y+="\u7533\u8bf7\u4eba "}$.isEmptyObject(d.operator)||
(y+=d.operator.username+" ")});if(k.isDynamic)switch(w.currentType){case "request":z="\u63d0\u4ea4\uff1a";break;case "approve":z="\u540c\u610f\uff1a";break;case "reject":z="\u9000\u56de\uff1a";break;case "process":z="\u5904\u7406\u4e2d\uff1a";break;case "wait":z="\u5f85\u5ba1\u6279\uff1a"}else"start"==w.type&&0==h?(z="\u63d0\u4ea4\u4eba",y=""):z="\u5ba1\u6279\u4eba\uff1a";"start"==w.type&&0==h?(g=b.text(k.cutString(w.title,e.Base.len.node)).x(f).y(p).font({size:e.Base.font.size,family:e.Base.font.family}),
n=b.text(z+k.cutString(y,e.Base.len.op)).x(s).y(u).font({size:e.Base.font.size,family:e.Base.font.family})):(g=b.text(k.cutString(w.title,e.Base.len.node)).x(f).y(h*e.Base.translate.y+p).font({size:e.Base.font.size,family:e.Base.font.family}),n=b.text(z+k.cutString(y,e.Base.len.op)).x(s).y(h*e.Base.translate.y+u).font({size:e.Base.font.size,family:e.Base.font.family}));$(g["native"]()).append(b.element("title").words(w.title)["native"]());$(n["native"]()).append(b.element("title").words(z+y)["native"]());
d=b.group().font({anchor:"middle"}).fill(e.Base.textColor.node);d.add(g);a.add(d);c=b.group().font({anchor:"start"}).fill(e.Base.textColor.op);c.add(n);a.add(c)});n=b.text("\u5ba1\u6279\u7ed3\u675f").x(s).y(this.flowData.flowSteps.length*e.Base.translate.y+h).addClass("js_virtual_optext").font({size:e.Base.font.size,family:e.Base.font.family});c=b.group().font({anchor:"start"}).fill(e.Base.textColor.op);c.add(n);a.add(c);return a},drawOrCheckGroup:function(b){var a=b.group().addClass("js_orcheck_group"),
d;$.each(this.flowData.flowSteps,function(g,c){1==c.orCheck&&(d=b.image("images/logo_orcheck.png").move(e.Base.orcheck.dx,g*e.Base.translate.y+e.Base.orcheck.dy),$(d["native"]()).append(b.element("title").words("\u6216\u7b7e")["native"]()),a.add(d))});return a},updateSvgView:function(b){var a=SVG.select("g.js_nodes_group .js_node_group").length(),a=2*e.Base.move.y+e.Base.rect.h/2+(a-1)*e.Base.translate.y;this.isDynamic?a>=e.Dynamic.drawSize.h&&b.attr("height",a):a>=e.Static.drawSize.h&&
b.attr("height",a)},drawNodesGroupPath:function(b){var a=b.group().fill("none").stroke(e.Base.pathColor.dft).stroke({width:e.Base.strokeWidth.path}).addClass("js_paths_group"),d,g=this;$.each(this.flowData.flowPaths,function(c,n){var k=SVG.get("svg"+n.start.id),f,p={};f=$.isEmptyObject(n.end)?SVG.select("g.js_node_group rect.js_virtual_node").first():SVG.get("svg"+n.end.id);if($.isEmptyObject(k)||$.isEmptyObject(f))return!0;p.flowPath=n;p.startRect=k;p.endRect=f;$.isEmptyObject(n.flowCondition)?(d=
g.createDftPathGroup(b,p),a.add(d)):(f=k.data("fx")||{},f.hasOwnProperty("n")?(f.n+=1,f.dx=e.Base.fx.initdx+(f.n-1)*e.Base.fx.increment):(f.n=1,f.dx=e.Base.fx.initdx),k.data("fx",f),p.fx=f,d=g.createConPathGroup(b,p),null!=d&&a.add(d));g.isDynamic&&n.eligible&&(d.stroke(e.Dynamic.pathColor.passed),d.addClass("js_path_passed"))});return a},createDftPathGroup:function(b,a){var d=a.startRect.width(),g=a.startRect.height(),c=a.startRect.transform().y,n=a.endRect.transform().y,d=b.path().M(d*e.Base.tagPosition.widthHalf,
g+c).V(n).M(d*e.Base.tagPosition.widthHalf,n).L(d*e.Base.tagPosition.widthHalf-e.Base.hapOffset.x,n-e.Base.hapOffset.y).M(d*e.Base.tagPosition.widthHalf,n).L(d*e.Base.tagPosition.widthHalf+e.Base.hapOffset.x,n-e.Base.hapOffset.y);d.addClass("js_dft_path");$(d["native"]()).append(b.element("title").words(a.flowPath.exportName)["native"]());return b.group().addClass("js_path_group").add(d)},createConPathGroup:function(b,a){var d=a.startRect.width(),g=a.startRect.height(),c=a.startRect.transform().y,
n=a.endRect.height(),k=a.endRect.transform().y,f,p;0==a.startRect.data("index")%2?"start"==a.startRect.data("type")?p=$.isEmptyObject(a.flowPath.end)?b.path().M(d,g*e.Base.tagPosition.oneHalf+c).H(d+a.fx.dx).V(n*e.Base.tagPosition.oneHalf+k).H(d).M(d,n*e.Base.tagPosition.oneHalf+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneHalf+k-e.Base.vapOffset.y).M(d,n*e.Base.tagPosition.oneHalf+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneHalf+k+e.Base.vapOffset.y):b.path().M(d,g*e.Base.tagPosition.oneHalf+
c).H(d+a.fx.dx).V(n*e.Base.tagPosition.oneThird+k).H(d).M(d,n*e.Base.tagPosition.oneThird+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneThird+k-e.Base.vapOffset.y).M(d,n*e.Base.tagPosition.oneThird+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneThird+k+e.Base.vapOffset.y):"middle"==a.startRect.data("type")&&(p=$.isEmptyObject(a.flowPath.end)?b.path().M(d,g*e.Base.tagPosition.twoThirds+c).H(d+a.fx.dx).V(n*e.Base.tagPosition.oneHalf+k).H(d).M(d,n*e.Base.tagPosition.oneHalf+k).L(d+e.Base.vapOffset.x,
n*e.Base.tagPosition.oneHalf+k-e.Base.vapOffset.y).M(d,n*e.Base.tagPosition.oneHalf+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneHalf+k+e.Base.vapOffset.y):b.path().M(d,g*e.Base.tagPosition.twoThirds+c).H(d+a.fx.dx).V(n*e.Base.tagPosition.oneThird+k).H(d).M(d,n*e.Base.tagPosition.oneThird+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneThird+k-e.Base.vapOffset.y).M(d,n*e.Base.tagPosition.oneThird+k).L(d+e.Base.vapOffset.x,n*e.Base.tagPosition.oneThird+k+e.Base.vapOffset.y)):"middle"==a.startRect.data("type")&&
(p=$.isEmptyObject(a.flowPath.end)?b.path().M(0,g*e.Base.tagPosition.twoThirds+c).H(-a.fx.dx).V(n*e.Base.tagPosition.oneHalf+k).H(0).M(0,n*e.Base.tagPosition.oneHalf+k).L(-e.Base.vapOffset.x,n*e.Base.tagPosition.oneHalf+k-e.Base.vapOffset.y).M(0,n*e.Base.tagPosition.oneHalf+k).L(-e.Base.vapOffset.x,n*e.Base.tagPosition.oneHalf+k+e.Base.vapOffset.y):b.path().M(0,g*e.Base.tagPosition.twoThirds+c).H(-a.fx.dx).V(n*e.Base.tagPosition.oneThird+k).H(0).M(0,n*e.Base.tagPosition.oneThird+k).L(-e.Base.vapOffset.x,
n*e.Base.tagPosition.oneThird+k-e.Base.vapOffset.y).M(0,n*e.Base.tagPosition.oneThird+k).L(-e.Base.vapOffset.x,n*e.Base.tagPosition.oneThird+k+e.Base.vapOffset.y));null!=p&&(p.addClass("js_con_path"),$(p["native"]()).append(b.element("title").words(a.flowPath.exportName)["native"]()),f=b.group().addClass("js_path_group").add(p));return f},rebuildConPath:function(){var b=SVG.select("g.js_paths_group").first();SVG.select("g.js_path_passed path").each(function(){this.hasClass("js_con_path")&&b.add(this.clone().fill("none").stroke(e.Dynamic.pathColor.passed).addClass("js_rebuild_path"))})},
optimizationSvgPath:function(){SVG.select("g.js_flow_group").first().scale(1.01,1.01)},activeSVGEvent:function(){this.activePathEvent();this.isDynamic&&this.activeNodeEvent()},activePathEvent:function(){SVG.select("g.js_path_group path, path.js_rebuild_path").mouseover(function(){SVG.select("g.js_paths_group").first().add(this.clone().fill("none").stroke(e.Base.pathColor.onmouse).addClass("js_temp_path")).style("cursor","pointer")}).mouseout(function(){SVG.select("g.js_paths_group path.js_temp_path").first().remove()})},
activeNodeEvent:function(){var b=this;SVG.select(".js_node_group rect").on("mouseenter.flowchartsvg",function(a){b.hideSvgLog();if(!this.hasClass("js_virtual_node")){var d=this.width()+e.Base.move.x+20,g=this.height()+this.transform().y-e.Base.move.y+62;a={};a.id=b.flowData.id;a.stepId=this.id().substr(3);if(this.data("josn"))a=this.data("josn"),b.renderNodeLog(a),$("#logModel").css({left:d,top:g}).show();else{var c=this;b.logModel.loadStepLog(a,function(a){var k=a.chartStep.operations||[];$.isEmptyObject(a.chartStep.flowChartStat)||
0==k.length?b.hideSvgLog():(c.data({josn:a}),b.renderNodeLog(a),$("#logModel").css({left:d,top:g}).show())})}}})},renderNodeLog:function(b){var a=b.chartStep.flowChartStat;b=b.chartStep.operations||[];$.isEmptyObject(a)||0==b.length||(0<a.approveCount&&$("#logTitle").append($("#cloneTitle").find(".js_approve").clone().html("\u5df2\u540c\u610f\uff1a"+a.approveCount)),0<a.rejectCount&&$("#logTitle").append($("#cloneTitle").find(".js_reject").clone().html("\u5df2\u9000\u56de\uff1a"+a.rejectCount)),0<
a.readCount&&$("#logTitle").append($("#cloneTitle").find(".js_read").clone().html("\u5df2\u67e5\u9605\uff1a"+a.readCount)),0<a.unreadCount&&$("#logTitle").append($("#cloneTitle").find(".js_unread").clone().html("\u672a\u67e5\u9605\uff1a"+a.unreadCount)),0<a.requestCount&&$("#logTitle").append($("#cloneTitle").find(".js_request").clone().html("\u5df2\u63d0\u4ea4\uff1a"+a.requestCount)),0<a.processCount&&$("#logTitle").append($("#cloneTitle").find(".js_process").clone().html("\u5df2\u5904\u7406\uff1a"+
a.processCount)),$.each(b,function(a,b){var c=b.operator.username,e=b.operator.id,k=b.createTime,f=b.readTime,p=b.operateTime,s="";switch(b.type){case "request":s="\u63d0\u4ea4\uff1a";break;case "approve":s="\u540c\u610f\uff1a";break;case "reject":s="\u9000\u56de\uff1a";break;default:s="\u5904\u7406\uff1a"}var u=$("#cloneContent").find(".js_listitem").clone();u.find(".js_name .js_link").html(c).attr("userid",e);u.find(".js_receivetime").html("\u63a5\u6536\uff1a"+Date.create(k).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
f?u.find(".js_readtime").html("\u67e5\u9605\uff1a"+Date.create(f).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")):u.find(".js_readtime").remove();p?u.find(".js_operatetime").html(s+Date.create(p).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")):u.find(".js_operatetime").remove();$("#logContent").append(u)}))},buildOldFlow:function(){var b=SVG("drawing").size(e.Dynamic.drawSize.w,e.Dynamic.drawSize.h);b.clear();var a=(e.Dynamic.drawSize.w-e.Base.rect.w)/2,a=b.group().move(a,e.Base.move.y).addClass("js_flow_group");
a.add(this.drawOldNodesGroup(b));this.updateSvgView(b);a.add(this.drawOldNodesGroupPath(b));this.optimizationSvgPath();this.activeOldSVGEvent()},drawOldNodesGroup:function(b){var a=b.group().addClass("js_flownode_group"),d=b.group().stroke({width:e.Base.strokeWidth.node}).addClass("js_nodes_group"),g,c,n=this.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.waiting),k=e.Dynamic.rectColor.waiting,f=b.group().addClass("js_text_group"),p,s,u,h,v=b.group().addClass("js_orcheck_group"),
x,y=this;$.each(this.flowData.steps,function(a,A){var B=A.type||"wait",E=A.operations||[],D="",C="",F="",m=!1,H={};H.stepStat=A.flowChartStat;H.flowOperations=E;$.each(E,function(d,g){m||(F=g.stepName?g.stepName:"\u63d0\u4ea4\u8282\u70b9",1==g.orCheck&&(x=b.image("images/logo_orcheck.png").move(e.Base.orcheck.dx,a*e.Base.translate.y+e.Base.orcheck.dy),$(x["native"]()).append(b.element("title").words("\u6216\u7b7e")["native"]()),v.add(x)),m=!0);$.isEmptyObject(g.operator)||(D+=g.operator.username+
" ")});switch(B){case "request":n=y.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.request);k=e.Dynamic.rectColor.request;C="\u63d0\u4ea4\uff1a";break;case "approve":n=y.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.approve);k=e.Dynamic.rectColor.approve;C="\u540c\u610f\uff1a";break;case "reject":n=y.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.reject);k=e.Dynamic.rectColor.reject;C="\u9000\u56de\uff1a";break;case "process":n=y.createGradient(b,
e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.processing);k=e.Dynamic.rectColor.processing;C="\u5904\u7406\u4e2d\uff1a";break;case "wait":n=y.createGradient(b,e.Base.gradientColor.dftBegin,e.Dynamic.rectColor.waiting);k=e.Dynamic.rectColor.waiting;C="\u5f85\u5ba1\u6279\uff1a";break;case "end":C="\u5ba1\u6279\u7ed3\u675f",k=y.flowData.finishTime?e.Dynamic.rectColor.end:e.Dynamic.rectColor.waiting}0==a?(c=b.rect(e.Base.rect.w,e.Base.rect.h).move(e.Base.rect.x,e.Base.rect.y).rx(e.Base.rect.rx).ry(e.Base.rect.ry).fill(n).stroke(k).attr({id:"svg"+
a}).data({type:B,logData:H}),s=b.text(y.cutString(F,e.Base.len.node)).x(e.Dynamic.txOffset.tx).y(e.Dynamic.txOffset.ty).font({size:e.Base.font.size,family:e.Base.font.family}),h=b.text(C+y.cutString(D,e.Base.len.op)).x(e.Dynamic.txOffset.bx).y(e.Dynamic.txOffset.by).font({size:e.Base.font.size,family:e.Base.font.family}),$(s["native"]()).append(b.element("title").words(F)["native"]()),$(h["native"]()).append(b.element("title").words(C+D)["native"]())):"end"!=B?(c=c.clone().fill(n).stroke(k).translate(e.Base.translate.x,
a*e.Base.translate.y).attr({id:"svg"+a}).data({type:B,logData:H}),s=b.text(y.cutString(F,e.Base.len.node)).x(e.Dynamic.txOffset.tx).y(a*e.Base.translate.y+e.Dynamic.txOffset.ty).font({size:e.Base.font.size,family:e.Base.font.family}),h=b.text(C+y.cutString(D,e.Base.len.op)).x(e.Dynamic.txOffset.bx).y(a*e.Base.translate.y+e.Dynamic.txOffset.by).font({size:e.Base.font.size,family:e.Base.font.family}),$(s["native"]()).append(b.element("title").words(F)["native"]()),$(h["native"]()).append(b.element("title").words(C+
D)["native"]())):(c=b.rect(e.Base.rect.w,e.Base.rect.h/2).move(e.Base.rect.x,e.Base.rect.y).rx(e.Base.rect.rx).ry(e.Base.rect.ry).translate(e.Base.translate.x,a*e.Base.translate.y).fill(k).stroke(k).addClass("js_virtual_node").attr({id:"svg"+a}).data({type:B}),h=b.text(C).x(e.Dynamic.txOffset.bx).y(a*e.Base.translate.y+e.Dynamic.txOffset.vy).addClass("js_virtual_optext").font({size:e.Base.font.size,family:e.Base.font.family}),u=b.group().font({anchor:"start"}).fill(e.Base.textColor.op),u.add(h),f.add(u));
g=b.group().addClass("js_node_group");g.add(c);d.add(g);"end"!=B&&(p=b.group().font({anchor:"middle"}).fill(e.Base.textColor.node),p.add(s),f.add(p),u=b.group().font({anchor:"start"}).fill(e.Base.textColor.op),u.add(h),f.add(u))});a.add(d).add(f).add(v);return a},drawOldNodesGroupPath:function(b){var a=b.group().fill("none").stroke(e.Base.pathColor.dft).stroke({width:e.Base.strokeWidth.path}).addClass("js_paths_group"),d=0,g=this;g.flowData.finishTime||$.each(this.flowData.steps,function(a,b){if("process"==
SVG.get("svg"+a).data("type"))return d=a,!0});$.each(this.flowData.steps,function(c,n){var k=SVG.get("svg"+c),f=SVG.get("svg"+(c+1));if($.isEmptyObject(f))return!0;var p=k.width(),s=k.height(),k=k.transform().y,f=f.transform().y,p=b.path().M(p*e.Base.tagPosition.widthHalf,s+k).V(f).M(p*e.Base.tagPosition.widthHalf,f).L(p*e.Base.tagPosition.widthHalf-e.Base.hapOffset.x,f-e.Base.hapOffset.y).M(p*e.Base.tagPosition.widthHalf,f).L(p*e.Base.tagPosition.widthHalf+e.Base.hapOffset.x,f-e.Base.hapOffset.y);
p.addClass("js_dft_path");$(p["native"]()).append(b.element("title").words("\u9ed8\u8ba4\u51fa\u53e3")["native"]());p=b.group().addClass("js_path_group").add(p);a.add(p);if(g.flowData.finishTime||c<d)p.stroke(e.Dynamic.pathColor.passed),p.addClass("js_path_passed")});return a},activeOldSVGEvent:function(){this.activePathEvent();this.activeOldNodeEvent()},activeOldNodeEvent:function(){var b=this;SVG.select(".js_node_group rect").on("mouseenter.flowchartsvg",function(a){b.hideSvgLog();if(!this.hasClass("js_virtual_node")){var d=
this.data("logData");if(!$.isEmptyObject(d)&&!$.isEmptyObject(d.stepStat)&&0!=d.flowOperations.length){a=this.width()+e.Base.move.x+20;var g=this.height()+this.transform().y-e.Base.move.y+60,c=d.stepStat,d=d.flowOperations||[];$("#logTitle").empty();$("#logContent").empty();0<c.approveCount&&$("#logTitle").append($("#cloneTitle").find(".js_approve").clone().html("\u5df2\u540c\u610f\uff1a"+c.approveCount));0<c.rejectCount&&$("#logTitle").append($("#cloneTitle").find(".js_reject").clone().html("\u5df2\u9000\u56de\uff1a"+
c.rejectCount));0<c.readCount&&$("#logTitle").append($("#cloneTitle").find(".js_read").clone().html("\u5df2\u67e5\u9605\uff1a"+c.readCount));0<c.unreadCount&&$("#logTitle").append($("#cloneTitle").find(".js_unread").clone().html("\u672a\u67e5\u9605\uff1a"+c.unreadCount));0<c.requestCount&&$("#logTitle").append($("#cloneTitle").find(".js_request").clone().html("\u5df2\u63d0\u4ea4\uff1a"+c.requestCount));0<c.processCount&&$("#logTitle").append($("#cloneTitle").find(".js_process").clone().html("\u5df2\u5904\u7406\uff1a"+
c.processCount));$.each(d,function(a,d){var b=d.operator.username,g=d.operator.id,c=d.createTime,l=d.readTime,e=d.operateTime,f="";switch(d.type){case "request":f="\u63d0\u4ea4\uff1a";break;case "approve":f="\u540c\u610f\uff1a";break;case "reject":f="\u9000\u56de\uff1a";break;default:f="\u5904\u7406\uff1a"}var h=$("#cloneContent").find(".js_listitem").clone();h.find(".js_name .js_link").html(b).attr("userid",g);h.find(".js_receivetime").html("\u63a5\u6536\uff1a"+Date.create(c).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
l?h.find(".js_readtime").html("\u67e5\u9605\uff1a"+Date.create(l).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")):h.find(".js_readtime").remove();e?h.find(".js_operatetime").html(f+Date.create(e).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")):h.find(".js_operatetime").remove();$("#logContent").append(h)});$("#logModel").css({left:a,top:g}).show()}}})},hideSvgLog:function(){$(this.el).find("#logModel").hide().end().find("#logTitle").empty().end().find("#logContent").empty()},cutString:function(b,a){if(2*b.length<=
a)return b;for(var d=0,g="",c=0;c<b.length;c++)if(g+=b.charAt(c),128<b.charCodeAt(c)){if(d+=2,d>=a)return g.substring(0,g.length-1)+"..."}else if(d+=1,d>=a)return g.substring(0,g.length-2)+"...";return g},remove:function(){$(this.el).off(".flowchartsvg");$(this.el).hasClass("mCustomScrollbar")&&f.destroyLayout(this.el)}});m.exports=h});
define("teams/workflow/flowsequencemodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},load:function(f,e){$.ajax({type:"get",url:"/flowsequence.json",dataType:"json",data:{formId:f},async:!1,success:function(c){e&&e(c)}})},query:function(f,e){$.ajax({type:"post",url:"/flowsequence/query.json",dataType:"json",data:{formId:f},success:function(c){e&&e(c)}})},create:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flowsequence.json",dataType:"json",
data:f,async:!1,success:function(c){e&&e(c)}})},update:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flowsequence/save.json",dataType:"json",data:f,async:!1,success:function(c){e&&e(c)}})},delt:function(f,e){$.ajax({type:"post",url:"/flowsequence/destroy.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},createFlowStepId:function(f,e){$.ajax({type:"get",url:"/flowsequence/createFlowStepId.json",dataType:"json",async:!1,data:f,success:function(c){e&&
e(c)}})}});m.exports=h});define("teams/workflow/sernumrulemodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},findSerNumRule:function(f,e){$.ajax({type:"post",url:"/flow/findSerNumRule.json",dataType:"json",data:f,success:function(c){e&&e(c.serNumRule)}})},saveSerNumRule:function(f,e){$.ajax({type:"post",url:"/flow/saveSerNumRule.json",dataType:"json",data:f,success:function(c){e&&e(c.resultData)}})}});m.exports=h});
define("teams/org/positionmodel",function(h,q,m){h=Backbone.Model.extend({savePosition:function(f,e){$.ajax({url:"/base/position.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},savePositionProperty:function(f,e){$.ajax({url:"/base/position/saveProperty.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},getById:function(f,e){$.ajax({type:"get",url:"/base/position/"+f+".json",dataType:"json",data:"",success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/org/followview",["teams/utils","teams/component/typeahead","teams/org/followmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/org/followmodel");h=Backbone.View.extend({initialize:function(b){this.userId=b.userId;this.active=b.active;this.type=b.type||"myfollow";this.el=b.el;this.forProfile=b.forProfile;$(this.el).html(f.template("follow.user",{forProfile:this.forProfile}));this.model=new c;this.pageSize=10;this.indirectPageNo=this.directPageNo=
this.subPageNo=this.fansPageNo=this.followPageNo=1},delegateEvents:function(){var b=this,a=this.model,d=TEAMS.currentUser.id;$("body").on("click.Messages",".goto-top",function(a){f.gotoTop("#follow-container");f.gotoTop("#fans-container");f.gotoTop("#subordinate-container")});$("#fans-container").on("click.follow","#showmorefans",function(){$(this).hide();$("#fans-container-inner").append("\x3cdiv id\x3d'fans-loading' class\x3d'follower-box loading_small'\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e");
b.fansPageNo++;var d={pageSize:b.pageSize};d.pageNo=b.fansPageNo;a.loadMyFans(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#fans-container-inner","myfans"),b.showmorefans(a,"#fans-container-inner"),$("#fans-container-inner").find("#fans-loading").remove())})});$("#subordinate-container").on("click.follow","#showmoresubordinate",function(){$(this).hide();$("#subordinate-container-inner").append("\x3cdiv id\x3d'subordinate-loading' class\x3d'follower-box loading_small'\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e");
b.subPageNo++;var d={pageSize:b.pageSize};d.pageNo=b.subPageNo;a.loadMySubordinate(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#subordinate-container-inner","subordinate"),b.showmoresubordinate(a,"#subordinate-container-inner"),$("#subordinate-container-inner").find("#subordinate-loading").remove())})});$("#subordinate-container #subordinate-container-inner").on("click.follow","#showmoredirectsubordinates",function(){$(this).hide();$("#subordinate-container-inner").append("\x3cdiv id\x3d'direct-subordinate-loading' class\x3d'follower-box loading_small'\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e");
b.directPageNo++;var d={pageSize:b.pageSize};d.pageNo=b.directPageNo;a.loadMyDirectSubordinates(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#subordinate-container-inner","subordinate"),b.moredirectorindirectsubordinate(a,"#subordinate-container-inner"),$("#subordinate-container-inner").find("#direct-subordinate-loading").remove())})});$("#subordinate-container #indirect-subordinate-container-inner").on("click.follow","#showmoreindirectsubordinates",function(){$(this).hide();$("#indirect-subordinate-container-inner").append("\x3cdiv id\x3d'indirect-subordinate-loading' class\x3d'follower-box loading_small'\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e");
b.indirectPageNo++;var d={pageSize:b.pageSize};d.pageNo=b.indirectPageNo;a.loadMyIndirectSubordinates(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#indirect-subordinate-container-inner","subordinate"),b.moredirectorindirectsubordinate(a,"#indirect-subordinate-container-inner"),$("#indirect-subordinate-container-inner").find("#indirect-subordinate-loading").remove())})});$("#subordinate-container").on("click.follow",".addSubOrdinate",function(){var b=$(this),c=b.attr("userId");a.follow(c,
d,function(a){var d=$("#subordinate-container-inner ."+c);d&&1<=d.length||(d=$(".indirect-subordinate-container-inner ."+c));"approved"!=a?f.notify("\u4e0a\u4e0b\u7ea7\u5173\u7cfb\u51fa\u73b0\u810f\u6570\u636e\u5566"+b.attr("username")):(d.html('\x3cspan\x3e\x3ci class\x3d"icon-ok"\x3e\x3c/i\x3e\u5df2\u5173\u6ce8\x3c/span\x3e'),f.notify("\u4f60\u5df2\u7ecf\u5173\u6ce8"+b.attr("username")+"\u4e86"))})});$("#follow-container").off("click.follow","#showmore").on("click.follow","#showmore",function(){$(this).hide();
$("#follow-container-inner").append("\x3cdiv id\x3d'follow-loading' class\x3d'follower-box loading_small'\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e");b.followPageNo++;var d={pageSize:b.pageSize};d.pageNo=b.followPageNo;a.loadMyFollow(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#follow-container-inner","myfollow"),b.showmore(a,"#follow-container-inner"),$("#follow-container-inner").find("#follow-loading").remove())});
return!1});$("#follow-container").on("click.follow","#follower-add",function(){$("#follower-add").addClass("hide");$("#follower-input").removeClass("hide");$("#follow-container input").focus()});$("#subordinate-container-inner").on("click.follow","#follower-add",function(){$("#subordinate-container-inner #follower-add").addClass("hide");$("#subordinate-container-inner #follower-input").removeClass("hide");$("#subordinate-container-inner #follower-input input").focus()});$("#follow-container").on("click.follow",
".follower-remove",function(b){f.confirm("\u786e\u5b9a\u8981\u53d6\u6d88\u5173\u6ce8\u5417?",function(c){if(c){var e=$(b.target).attr("data-user");a.unfollow(e,d,function(a){$("#follow-container-inner #"+e).remove();f.notify("\u64cd\u4f5c\u6210\u529f")})}})});$("#fans-container").on("click.follow",".follower-remove",function(b){f.confirm("\u786e\u5b9a\u8981\u53d6\u6d88\u5173\u6ce8\u5417?",function(c){if(c){var e=$(b.target).attr("data-user");a.cancelMyFans(d,e,function(a){a.superior||($("#fans-container-inner #"+
e).remove(),f.notify("\u64cd\u4f5c\u6210\u529f"))})}})});$("#subordinate-container-inner").on("click.follow",".follower-box .close",function(d){d.stopPropagation();var c=$(this).parent(),e=b.userId,k=c.attr("id");null!=e&&""!=e&&null!=k&&""!=k||f.notify("\u5bf9\u8c61\u4e0d\u5b58\u5728!");f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(d){d&&(d={},d.sids=k,d.parentId=e,a.deleteLower(d,function(a){c.remove();f.notify("\u5220\u9664\u6210\u529f!")}))})})},render:function(){var b=this,a=this.model,
d={pageSize:b.pageSize};switch(b.type){case "myfollow":TEAMS.blogUser&&("female"==TEAMS.blogUser.sex?$(b.el).find(".myfollow_title").html("\u5979\u5173\u6ce8\u7684\u4eba"):$(b.el).find(".myfollow_title").html("\u4ed6\u5173\u6ce8\u7684\u4eba"));d.pageNo=b.followPageNo;$(b.el).find("#follow-container").parent().show();a.loadMyFollow(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#follow-container-inner","myfollow"),b.showmore(a,"#follow-container-inner"));f.layout("#follow-container");
(a=$("#navigation .j_addFollow").data("addFollowCallback"))&&a()});break;case "myfans":TEAMS.blogUser&&("female"==TEAMS.blogUser.sex?$(b.el).find(".myfans_title").html("\u5173\u6ce8\u5979\u7684\u4eba"):$(b.el).find(".myfans_title").html("\u5173\u6ce8\u4ed6\u7684\u4eba"));d.pageNo=b.fansPageNo;$(b.el).find("#fans-container").parent().show();a.loadMyFans(b.userId,d,function(a){var d=a.page.result;d&&(b.pids=a.pids,b.renderList(d,"#fans-container-inner","myfans"),b.showmorefans(a,"#fans-container-inner"));
0>=d.length&&$("#fans-container-inner").html('\x3cdiv class\x3d"guide-div"\x3e\x3cbr/\x3e\x3cspan\x3e\u76ee\u524d\u6ca1\u6709\u5173\u6ce8\u6211\u7684\u4eba \x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3c/div\x3e');f.layout("#fans-container")});break;case "subordinate":var g=TEAMS.currentUser.admin;g&&$("#subordinate-container-inner .addbox").removeClass("hide");TEAMS.blogUser&&("female"==TEAMS.blogUser.sex?$(b.el).find(".mysubordinate_title").html("\u5979\u7684\u4e0b\u5c5e"):$(b.el).find(".mysubordinate_title").html("\u4ed6\u7684\u4e0b\u5c5e"));
d.pageNo=b.subPageNo;$(b.el).find("#subordinate-container").parent().show();a.loadMyDirectSubordinates(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#subordinate-container-inner","subordinate"),b.getmoresubordinates(a,"#subordinate-container-inner"));if(!d||0>=d.length)g||$("#subordinate-container-inner").html('\x3cdiv class\x3d"guide-div"\x3e\x3cbr/\x3e\x3cspan\x3e\u76ee\u524d\u6ca1\u6709\u76f4\u63a5\u4e0b\u5c5e \x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3c/div\x3e');f.layout("#subordinate-container")});
a.loadMyIndirectSubordinates(b.userId,d,function(a){var d=a.page.result;d&&(b.renderList(d,"#indirect-subordinate-container-inner","subordinate"),b.getmoresubordinates(a,"#indirect-subordinate-container-inner"));if(!d||0>=d.length)$("#indirect-subordinate-container-inner").html('\x3cdiv class\x3d"guide-div"\x3e\x3cbr/\x3e\x3cspan\x3e\u76ee\u524d\u6ca1\u6709\u95f4\u63a5\u4e0b\u5c5e \x3c/span\x3e\x3cbr/\x3e\x3cbr/\x3e\x3c/div\x3e'),$(".indirect-subordinate-container-inner").addClass("hide");f.layout("#subordinate-container")})}},
showmore:function(b,a){b.page.pageSize*b.page.pageNo>=b.page.totalCount?$(a).find("#showmore").hide():($(a).find("#showmore").remove(),$(a).append('\x3ca  id\x3d"showmore" class\x3d"follower-box text-center showmore"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e'))},showmorefans:function(b,a){b.page.pageSize*b.page.pageNo>=b.page.totalCount?$("#showmorefans").hide():($(a).find("#showmorefans").remove(),$(a).append('\x3ca  id\x3d"showmorefans" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e'))},
showmoresubordinate:function(b,a){b.page.pageSize*b.page.pageNo>=b.page.totalCount?$("#showmoresubordinate").hide():($(a).find("#showmoresubordinate").remove(),$(a).append('\x3ca  id\x3d"showmoresubordinate" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e'))},moredirectorindirectsubordinate:function(b,a){b.page.pageSize*b.page.pageNo>=b.page.totalCount?"#subordinate-container-inner"==a?$("#showmoredirectsubordinates").hide():".indirect-subordinate-container-inner"==
a&&$("#showmoreindirectsubordinates").hide():"#subordinate-container-inner"==a?($(a).find("#showmoredirectsubordinates").remove(),$(a).append('\x3ca  id\x3d"showmoredirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e')):"#indirect-subordinate-container-inner"==a&&($(a).find("#showmoreindirectsubordinates").remove(),$(a).append('\x3ca  id\x3d"showmoreindirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e'))},
getmoresubordinates:function(b,a){"#subordinate-container-inner"==a?b.page.pageSize*b.page.pageNo>=b.page.totalCount?$("#showmoredirectsubordinates").hide():($(a).find("#showmoredirectsubordinates").remove(),$(a).append('\x3ca  id\x3d"showmoredirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e')):"#indirect-subordinate-container-inner"==a&&(b.page.pageSize*b.page.pageNo>=b.page.totalCount?$("#showmoreindirectsubordinates").hide():($(a).find("#showmoreindirectsubordinates").remove(),
$(a).append('\x3ca  id\x3d"showmoreindirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e')))},renderList:function(b,a,d){var g=this.userId==TEAMS.currentUser.id,c=[],e=!1;"#subordinate-container-inner"==a&&(e=!0);for(var k=0,f=b.length;k<f;k++)c.push(this.renderUserBox(b[k],d,e));$(a).append(c.join(""));this.typeAhead(g)},typeAhead:function(b){if(b){var a=this,d=this.model,g=TEAMS.currentUser.id;e([{el:"#follow-container input.typeahead",callback:function(b){b&&
!$.isEmptyObject(b)&&b.id!=TEAMS.currentUser.id&&"myfollow"==a.active&&d.follow(b.id,g,function(d,g){b.relation=d;g&&(b.department=g.department);var c=a.renderUserBox(b,"myfollow");0<$("#follow-container-inner #"+b.id).size()?"approved"==d?f.notify("\u4f60\u5df2\u7ecf\u5173\u6ce8"+b.username+"\u4e86"):f.notify("\u5173\u6ce8"+b.username+"\u7684\u7533\u8bf7\u5df2\u53d1\u8fc7\u4e86\uff0c\u7b49\u5f85\u5bf9\u65b9\u540c\u610f"):"approved"==d?(f.notify("\u6dfb\u52a0\u5173\u6ce8\u6210\u529f"),0<$("#follow-container-inner .unapproved:last").size()?
$("#follow-container-inner .unapproved:last").parent().parent().after(c):$("#follow-container-inner .follower-box-add").after(c)):(f.notify("\u5173\u6ce8\u7533\u8bf7\u5df2\u53d1\u9001"),$("#follow-container-inner .follower-box-add").after(c))})}},{el:"#subordinate-container-inner input.typeahead",callback:function(b){if(b&&!$.isEmptyObject(b)){var g="",c=TEAMS.currentUser.id;if(b instanceof Array)for(var e=0;e<b.length;e++){var p=b[e];p.id!=c&&(g+=p.id+",")}else{if(b.id==c)return;g+=b.id+","}g&&(b=
{},b.sids=g,b.parentId=c,d.saveLower(b,function(d){d.message&&f.notify(d.message);0<d.lowers.length&&($("#subordinate-container-inner").find("#showmoredirectsubordinates").is(":visible")?(a.renderList(d.lowers,"#subordinate-container-inner","subordinate"),$("#subordinate-container-inner").find("#showmoredirectsubordinates").remove(),$("#subordinate-container-inner").append('\x3ca  id\x3d"showmoredirectsubordinates" class\x3d"showmore text-center follower-box"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e')):
a.renderList(d.lowers,"#subordinate-container-inner","subordinate"),f.notify("\u6dfb\u52a0\u4e0b\u5c5e\u6210\u529f\uff01"))}))}}}])}},contains:function(b){var a=this.pids;if(!a)return!0;for(var d=0;d<a.length;d++)if(a[d].id==b)return!0;return!1},renderUserBox:function(b,a,d){var g=$("#follower-clone").clone(),c=TEAMS.currentUser.admin;g.attr("id",b.id);b.avatar&&b.avatar.p3&&g.find(".face img").attr("src","/base/download/"+b.avatar.p3);g.find(".department").html(b.department?b.department.name:TEAMS.currentTenant.tenantName);
c&&d&&g.prepend('\x3ca class\x3d"close" title\x3d"\u5220\u9664"\x3e\u00d7\x3c/a\x3e');"approved"==b.relation?(g.find(".name a").html(b.username).attr("href","/blog/"+b.id),g.find(".unapproved").remove(),"myfans"!=a||b.followAndSub||(g.find(".name a").remove(),g.find(".name").append('\x3ca class\x3d"usercard-toggle" userId\x3d"'+b.id+'" user-name\x3d"'+b.username+'"\x3e'+b.username+"\x3c/a\x3e")),"subordinate"==a?g.find(".follower-remove").remove():"myfans"==a?this.contains(b.id)?g.find(".follower-remove").remove():
g.find(".follower-remove").attr("data-user",b.id):"myfollow"==a&&g.find(".follower-remove").attr("data-user",b.id)):"subordinate"==a?(g.find(".name a").html(b.username).attr("href","/blog/"+b.id),g.find(".unapproved").remove(),g.find(".approved").remove(),g.find(".follower-remove").remove(),g.find(".department").append('\x3cli class\x3d"'+b.id+' approved"\x3e\x3ca class\x3d"addSubOrdinate" username \x3d"'+b.username+'" userId\x3d"'+b.id+'"\x3e+\u6dfb\u52a0\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e')):(g.find(".name a").remove(),
g.find(".name").append('\x3ca class\x3d"usercard-toggle" userId\x3d"'+b.id+'" user-name\x3d"'+b.username+'"\x3e'+b.username+"\x3c/a\x3e"),g.find(".approved").remove(),g.find(".follower-remove").remove());return g.outerHTML()},remove:function(){$("#fans-container").off(".follow");$("#subordinate-container").off(".follow");$("#follow-container").off(".follow")}});m.exports=h});
define("teams/org/invitationview",["teams/utils","teams/component/invitemodel","teams/component/inviteview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/invitemodel"),c=h("teams/component/inviteview");h=Backbone.View.extend({initialize:function(b){this.container=b.container||"body";this.model=new e;this.el=this.container;$(this.el).append(f.template("org.invitation"));ZeroClipboard.config({swfPath:"js/clipboard.swf"})},delegateEvents:function(){var b=this;$("body").on("click.userView",
".goto-top",function(a){f.gotoTop("#invitelistCon")});$(b.el).on("click.invitationView",".invitation-more",function(a){b.loadInvitations()});$(b.el).on("click.invitationView",".j_invite_send",function(a){a=$(this).parents("li");var d=a.attr("id");b.model.sendInvite(d,function(a){f.notify(a.message)});b.initClipboard(a.find(".dept a.j_invite_send"))});$(b.el).on("click.invitationView",".j_invite_copy",function(a){a=$(this);b.initClipboard(a)});$(b.el).on("click.invitationView",".j_invite_delete",function(a){var d=
$(this).parents("li"),g=d.attr("id");f.confirm("\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9080\u8bf7\u4fe1\u606f\u5417\uff1f",function(a){a&&b.model.delInvite(g,function(a){a.id||d.remove();f.notify(a.message)})})});$(b.el).on("mouseenter.invitationView",".users-list li",function(a){$(this).find(".follow-btns")}).on("mouseleave.invitationView",".users-list li",function(a){$(this).find(".follow-btns")})},render:function(){var b=this;this.loadInvitations();b.inviteView=new c({container:"#dept-user-invite",
type:"inline",callback:function(a){b.loadInviteInfo(a,"prepend");f.layout("#invitelistCon")}});$(b.inviteView.container).find("#invite-cancel").addClass("hide");$(b.inviteView.container).find(".user-invite").css({position:"inherit"})},loadInvitations:function(){var b=this,a=b.model;a.pageNo++;1>=a.pageNo&&$(b.el).find("#invitelistCon .j_invite_list").empty();a.queryInvitations(function(a){b.loadList(a)})},loadList:function(b){b=b.page;var a=$(this.el).find(".invitation-more");b.hasNext?a.removeClass("hide"):
a.addClass("hide");if(b&&0>=b.result.length)$(this.el).find(".no-result").removeClass("hide");else{for(a=0;a<b.result.length;a++)this.loadInviteInfo(b.result[a],"append");f.layout("#invitelistCon")}},loadInviteInfo:function(b,a){var d=$(this.el).find("#invitationListClone li").clone(),g=d.find("div.dept");d.data("inviteInfo",b);d.attr("id",b.id);var c="\u5df2\u63a5\u53d7";"refused"==b.status&&(c="\u5df2\u62d2\u7edd");"unreceived"==b.status?(TEAMS.currentUser.admin||g.find(".btn-danger").remove(),
b.url&&g.find(".btn-warning").attr("data-entity",b.url)):g.html(c);d.find("div.username a").eq(1).html(b.invitee);d.find("div.call").html(b.contact);b.inviteTime&&(g=Date.create(b.inviteTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}"),d.find("div.date").html(g));$(this.el).find("#invitelistCon .j_invite_list")[a](d)},initClipboard:function(b){var a=new ZeroClipboard(b);a.on("ready",function(){a.on("copy",function(a){a.clipboardData.setData("text/plain",b.attr("data-entity"))});a.on("aftercopy",function(a){f.notify("\u9080\u8bf7\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")})})},
remove:function(){$("body").off(".invitationView");$(this.el).off(".invitationView");$(this.el).remove()}});m.exports=h});
define("teams/org/treeview",["teams/org/treemodel"],function(h,q,m){var f=h("teams/org/treemodel");h=Backbone.View.extend({lightClass:"selected",fold:"icon-caret-right",unfold:"icon-caret-down",initialize:function(e){this.el=e.el;this.noUrl=e.noUrl;this.readonly=e.readonly;this.model=new f;this.type=e.type},delegateEvents:function(){var e=this,c=$(e.el);c.off(".tree");c.on("click.tree","."+e.unfold,function(b){b.stopPropagation();$(this).parent().parent().find("ul").slideToggle(400);$(this).removeClass(e.unfold).addClass(e.fold)});
c.on("click.tree","."+e.fold,function(b){b.stopPropagation();$(this).parent().parent().find("ul").slideToggle(400);$(this).removeClass(e.fold).addClass(e.unfold)})},render:function(e,c){var b=this;b.id=e;"position"==b.type?b.model.loadPositionData(function(a){0<a.nodes.length?(a=a.nodes,null!=a&&0<a.length&&(b.initTree(a),b.bindData(a),c())):($("#org-tree-list #list-loading").hide(),$("#org-tree-list #add-posn").removeClass("hide"))}):b.model.loadData(function(a){a=a.nodes;b.initTree(a);b.bindData(a);
c()})},initTree:function(e){var c=this.getRoot(e);e=this.createRootTree(c,e);$(this.el).html(e)},createRootTree:function(e,c){var b="\x3cul\x3e",a=this.createChild(e,c);return b=b+a+"\x3c/ul\x3e"},createTree:function(e,c){for(var b="\x3cul class\x3d'ftl-child-ul'\x3e",a=0,d=0,g=c.length;d<g;d++){var l=c[d];if(!l)break;var n=l.nodeObj.parent;n&&n.id==e.id&&l.id!=e.id&&(l=this.createChild(l,c),b+=l,a++)}return 0==a?"":b+"\x3c/ul\x3e"},createChild:function(e,c){var b=this.type;if(e){var a="root"==e.parentId?
"root":"",d="padding-left:"+20*e.rank+"px",g=this.createTree(e,c),l=g?this.unfold:"",a="\x3cli\x3e"+('\x3cdiv class\x3d"treenode router '+a+'" style\x3d"'+d+'" id\x3d"'+e.id+'"\x3e'),n=this.noUrl?"":e.url?e.url:"#",d='\x3cspan class\x3d"num fr"\x3e'+e.attachment+'\x3c/span\x3e\x3ca class\x3d"router" title\x3d"'+e.name+'" href\x3d"'+n+'"\x3e\x3cspan class\x3d"tree-name"\x3e'+e.name+"\x3c/span\x3e\x3c/a\x3e";""===n&&(d='\x3ca class\x3d"router" title\x3d"'+e.name+'"\x3e\x3cspan class\x3d"tree-name"\x3e'+
e.name+"\x3c/span\x3e\x3c/a\x3e");this.readonly||(n="\x3cspan class\x3d'actions'\x3e",TEAMS.currentUser.admin&&("position"==b?(n+="\x3ca id\x3d'add-position' nodeid\x3d'"+e.id+"' class\x3d'router' href\x3d'/organization/"+e.id+"/position/add' title\x3d'\u6dfb\u52a0\u4e0b\u7ea7\u5c97\u4f4d'\x3e\x3ci class\x3d'icon-plus-thin'\x3e\x3c/i\x3e\x3c/a\x3e","root"!=e.parentId&&(n+="\x3ca id\x3d'delete-position' nodeid\x3d'"+e.id+"' title\x3d'\u5220\u9664\u5c97\u4f4d'\x3e\x3ci class\x3d'icon-trash'\x3e\x3c/i\x3e\x3c/a\x3e")):
(n+="\x3ca id\x3d'edit-department' nodeid\x3d'"+e.id+"' class\x3d'router' href\x3d'/organization/"+e.id+"/department/edit' title\x3d'\u7f16\u8f91'\x3e\x3ci class\x3d'icon-edit'\x3e\x3c/i\x3e\x3c/a\x3e",n+="\x3ca id\x3d'add-department' nodeid\x3d'"+e.id+"' class\x3d'router' href\x3d'/organization/"+e.id+"/department/add' title\x3d'\u6dfb\u52a0\u4e0b\u7ea7\u90e8\u95e8'\x3e\x3ci class\x3d'icon-plus-thin'\x3e\x3c/i\x3e\x3c/a\x3e","root"!=e.parentId&&(n+="\x3ca id\x3d'delete-department' nodeid\x3d'"+e.id+
"' title\x3d'\u5220\u9664\u90e8\u95e8'\x3e\x3ci class\x3d'icon-trash'\x3e\x3c/i\x3e\x3c/a\x3e"))),a+=n+"\x3c/span\x3e");a+="\x3ci class\x3d'nodeicon "+l+"'\x3e\x3c/i\x3e";a=a+d+"\x3c/div\x3e";a+=g;return a+="\x3c/li\x3e"}},getRoot:function(e){for(var c=0,b=e.length;c<b;c++){var a=e[c];if(!a.nodeObj.parent)return a}},bindData:function(e){for(var c=0,b=e.length;c<b;c++){var a=e[c];$(this.el).find("#"+a.id).data("node",a)}},getSelectedNode:function(){return $(this.el).find(".selected")},getSelectedNodeObj:function(){return this.getSelectedNode().data("node")},
reloadNode:function(e,c){var b=this,a=this.type,d=e.data("node");"position"==a?b.model.loadPositionData(function(a){b.restoreNode(e,a.nodes);c&&c()},d.id):b.model.loadData(function(a){b.restoreNode(e,a.nodes);c&&c()},d.id)},restoreNode:function(e,c){view=this;var b=e.data("node"),a=e.parent().prev(),d=e.parent().next(),g=e.parent().parent();e.parent().remove();var l=view.createChild(b,c);0<a.length?a.after(l):0<d.length?d.before(l):g.append(l);view.highLight(b.id);c.push(b);view.bindData(c)},updateNode:function(e,
c){var b=e.data("node").name;e.find("a").attr("title",b).find(".tree-name").html(b)},highLight:function(e){var c=$(this.el),b=this.lightClass;c.find(".treenode").removeClass(b);c.find("#"+e).addClass(b);e||c.find(".root").addClass(b)},remove:function(){var e=$(this.el);e.off(".tree");e.remove()}});m.exports=h});
define("teams/org/groupview",["teams/utils","teams/org/groupmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/org/groupmodel");h=Backbone.View.extend({lightClass:"selected",initialize:function(c){this.el=c.el;this.noUrl=c.noUrl;this.readonly=c.readonly;this.model=new e},delegateEvents:function(){var c=this,b=$(c.el),a=$(".j_user");b.off(".group");a.on("addUser.group",function(a,b,l){c.addGroupUser(l,b.id)});a.on("deleteUser.group",function(a,b,l){c.deleteGroupUser(l,b.id)});a.on("addAllUser.group",
function(a,b,l){a=[];for(var e=0;e<b.length;e++)a+=b[e].id+",";0<a.length&&c.addGroupUsers(l,a)});a.on("deleteAllUser.group",function(a,b,l){a=[];for(var e=0;e<b.length;e++)a+=b[e].id+",";l&&0<a.length&&c.deleteGroupUsers(l,a)});a.on("updateGroupName.group",function(a,b,l,e,k){k&&0<$.trim(k).length?l!=$.trim(k)&&(20<$.trim(k).length?f.notify("\u7fa4\u7ec4\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26"):(c.saveGroupProperty(e),$(this).find(b).data("nameData",$.trim(k)))):(f.notify("\u8bf7\u586b\u5199\u7fa4\u7ec4\u7528\u6237\u540d"),
$(this).find(b).val($.trim(l)))});$("body").off("updateChannelName2.websocket").on("updateChannelName2.websocket",function(a,b){if(void 0!=b.channel&&"updateChannelName"==b.operateType){var c=b.channel.id,e=b.channel.name,k=b.channel.member.length;$("#group-message").find("#"+c).text(e+"\u3010"+k+"\u4eba\u3011")}})},render:function(c){var b=this;b.model.loadData(c,function(a){b.loadPage(a)})},loadPage:function(c){c=c.groups;for(var b="\x3cul class\x3d'clearfix'\x3e",a=0,d=c.length;a<d;a++){var g=
"",l=this.noUrl?"#":"/organization/"+c[a].id+"/user/search/searchgroup/"+c[a].creator.id,e=c[a].createTime?Date.create(c[a].createTime).format("{yyyy}-{MM}-{dd}"):"",g=g+("\x3cli\x3e\x3ca id\x3d'"+c[a].id+"' class\x3d'router' title\x3d'"+c[a].creator.username+"\u521b\u5efa\u4e8e"+e+"' href\x3d'"+l+"'\x3e"+c[a].name+"\u3010"+(null==c[a].member?0:c[a].member.length)+"\u4eba\u3011\x3c/a\x3e"),l=this.noUrl?"":"/organization/"+c[a].id+"/user/edit/editgroup";this.readonly||(TEAMS.currentUser.id==c[a].creator.id?
(g+="\x3cspan class\x3d'actions'\x3e\x3ca class\x3d'router'  href\x3d'"+l+"' title\x3d'\u8bbe\u7f6e\u7fa4\u7ec4\u6210\u5458'\x3e\u8bbe\u7f6e\u7fa4\u7ec4\u6210\u5458\x3c/a\x3e",g+="\x3ca id\x3d'delete-group' groupid\x3d'"+c[a].id+"' class\x3d'router' title\x3d'\u9000\u51fa\u7fa4\u7ec4'\x3e\x3ci class\x3d'icon-logout'\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e"):g+="\x3cspan class\x3d'actions'\x3e\x3ca id\x3d'btn-quit' groupid\x3d'"+c[a].id+"'class\x3d'router' title\x3d'\u9000\u51fa\u7fa4\u7ec4'\x3e\x3ci class\x3d'icon-logout'\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e");
g+="\x3c/li\x3e";b+=g}b+="\x3c/ul\x3e";$(this.el).html(b)},addGroupUser:function(c,b){this.model.addGroupUser(c,b,function(a){$(".j_depa").find("#group-users").trigger("click");f.notify("\u6210\u529f\u6dfb\u52a0\u8fdb\u7fa4\u7ec4")})},deleteGroupUser:function(c,b){this.model.deleteGroupUser(c,b,function(a){$(".j_depa").find("#group-users").trigger("click");f.notify("\u6210\u529f\u79fb\u51fa\u7fa4\u7ec4")})},addGroupUsers:function(c,b){this.model.addGroupUsers(c,b,function(a){$(".j_depa").find("#group-users").trigger("click");
f.notify("\u6210\u529f\u52a0\u5165\u7fa4\u7ec4")})},deleteGroupUsers:function(c,b){this.model.deleteGroupUsers(c,b,function(a){$(".j_depa").find("#group-users").trigger("click");f.notify("\u6210\u529f\u9000\u51fa\u7fa4\u7ec4")})},saveGroupProperty:function(c){var b=c.val(),a=c.attr("name"),d="";a&&(d=a.replace("group.",""));var g={};g["group.id"]=$("#group-id").val();g.propertyName=d;g[a]=b;c&&"checkbox"==c[0].type&&(b=c[0].checked?0:1,g[a]=b);this.model.saveGroupProperty(g,function(a){$(".j_depa").find("#group-users").trigger("click");
f.notify("\u4fdd\u5b58\u6210\u529f")})},remove:function(){var c=$(this.el);c.off(".group");c.remove()}});m.exports=h});
define("teams/org/positionview",["teams/utils","teams/org/positionmodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/org/positionmodel"),c=h("teams/component/typeahead"),b=!0;h=Backbone.View.extend({position:{},initialize:function(a){this.id=a.id;this.operation=a.operation;this.model=new e;this.el==a.el;$(this.el).html(f.template("org.position"));f.layout("#position-info")},delegateEvents:function(){var a=this;$(this.el).on("blur.position","#position-info :input",
function(d){d=$(d.currentTarget);var b=$("#position-id").val();d.val();b?a.savePositionProperty(d):a.savePosition()});$(this.el).on("keydown.position","#position-info :input:not(#position-description)",function(a){"13"==a.keyCode&&$(this).trigger("blur")});$(this.el).on("keyup.position","#position-code",function(a){a=$(this).val().replace(/[^\w\.\/]/ig,"");$(this).val(a)});$(this.el).on("keyup.position","#position-disporder",function(a){a=$(this).val();a=1==a.length?a.replace(/[^1-9]/g,""):a.replace(/\D/g,
"");$(this).val(a)});c([{el:"#position-info #typeahead-position",callback:function(d){if(d){if(a.id==d.id)return;$("#positionSelector a").text(d.name);$("#position-parent").val(d.id)}a.savePositionProperty($("#position-info #position-parent"))},resultHandler:function(d){var b=[];$.each(d,function(d,c){a.id!=c.id&&b.push(c)});return b}},{el:"#position-info #typeahead-department",callback:function(d){if(d){if(d){if(a.id==d.id)return;$("#departmentSelector a").text(d.name);$("#position-department").val(d.id)}a.savePositionProperty($("#position-info #position-department"))}}}])},
render:function(){TEAMS.currentUser.admin?"add"==this.operation?this.renderAdd():"edit"==this.operation?this.renderEdit():this.renderTree():"edit"==this.operation&&this.renderShow()},renderOne:function(a){b=a.flag;a=a.name;if(TEAMS.currentUser.admin){var d=$("#position-info").removeClass("hide");d.find("#position-name").val(a);d.find("#position-name").trigger("blur")}},renderAdd:function(){var a=this,d=this.model,b=a.id,c=$("#position-info").removeClass("hide");c.find("input:not(#positionSelector)").val("");
c.find("textarea").val("");d.getById(b,function(d){var b=d.position;a.position=d.position;c.find("#position-parent").val(b.id);c.find("#positionSelector a").html(b.name)})},renderEdit:function(){var a=this;this.model.getById(a.id,function(d){a.position=d.position;$("#position-info").data("positionName",a.position.name);a.loadPosition(d.position)})},renderTree:function(){"tree"==this.id&&$("#org-tree-list .selected").click()},renderShow:function(){var a=this;this.model.getById(a.id,function(d){a.position=
d.position;a.loadPositionRead(d.position)})},savePosition:function(){var a=this,d=$("#position-info"),g={},c=$("#position-name").val(),e=$("#org-tree-list .root").attr("id");20<$.trim(c).length?f.notify("\u5c97\u4f4d\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26\uff01"):0==$.trim(c).length?f.notify("\u5c97\u4f4d\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a"):(d.find("input").each(function(){name=$(this).attr("name");val=$(this).val();name&&val&&(g[name]=val)}),d.find("textarea").each(function(){name=
$(this).attr("name");val=$(this).val();name&&val&&(g[name]=val)}),!b||g["position.parent.id"]&&0!=$.trim(g["position.parent.id"]).length?this.model.savePosition(g,function(g){g.message?f.notify(g.message):g.position.id?(d.find("#position-id").val(g.position.id),$("#position-info").data("position",g.position),b?(g.position.name&&a.trigger("addNode",g.position.id),"2875559025900734681"==e&&a.trigger("rerenderTree"),f.notify("\u4fdd\u5b58\u6210\u529f")):($("#add-posn").addClass("hide"),a.trigger("addPosn",
g.position.id))):f.notify("\u6570\u636e\u9519\u8bef\uff0c\u6dfb\u52a0\u5931\u8d25")}):f.notify("\u4e0a\u7ea7\u5c97\u4f4d\u4e0d\u80fd\u4e3a\u7a7a"))},savePositionProperty:function(a){var d=$("#position-info").data("positionName"),b=this,c=$("#position-info").data("position"),e=a.val();a=a.attr("name");var k=$("#position-name").val(),r=$("#org-tree-list .root").attr("id");if(20<$.trim(k).length)$("#position-info").data("positionName",k),f.notify("\u5c97\u4f4d\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26");
else if(0==$.trim(k).length)f.notify("\u5c97\u4f4d\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a"),$("#position-name").val(d);else{var p="";a&&(p=a.replace("position.",""));d={};d["position.id"]=$("#position-id").val();d.propertyName=p;d[a]=e;$.trim(c[p])!=$.trim(d[a])&&b.model.savePositionProperty(d,function(a){"parent.id"===p?($("#position-info #positionSelector").text(a.position.parent.name),b.trigger("rerenderTree")):"department"===p?$("#position-info #departmentSelector").text(a.position.department.name):
b.trigger("updateNode",{propertyName:p,value:e});"2875559025900734681"==r&&b.trigger("rerenderTree");$("#position-info").data("positionName",a.position.name);f.notify("\u4fdd\u5b58\u6210\u529f")})}},loadPosition:function(a){$("#position-info").removeClass("hide").data("position",a);$("#positionSelector").removeAttr("disabled");$("#position-id").val(a.id);$("#position-name").val(a.name);$("#position-code").val(a.code);$("#position-disporder").val(a.disporder);a.parent?($("#position-parent").val(a.parent.id),
$("#positionSelector a").html(a.parent.name),$("#btn-delete-position").removeClass("hide")):($("#position-parent").val(""),$("#positionSelector a").html(""),$("#btn-delete-position").addClass("hide"),$("#position-info #position-root").hide());a.department&&($("#position-department").val(a.department.id),$("#departmentSelector").html(a.department.name));$("#position-description").val(a.description)},loadPositionRead:function(a){$("#position-info-read").removeClass("hide");$(".position-info .controls").addClass("controls-textonly");
$("#position-name-div .controls span").html(a.name);$("#position-code-div .controls span").html(a.code);$("#position-disporder-div .controls span").html(a.disporder);a.parent&&$("#position-parent-div .controls span").html(a.parent.name);a.department&&$("#position-department-div .controls span").html(a.department.name);$("#position-description-div .controls span").html(a.description)},remove:function(){$(this.el).off(".position")}});m.exports=h});
define("teams/org/orgpage","teams/core/page teams/org/departmenttreeview teams/org/departmentview teams/org/userview teams/org/invitationview teams/component/inviteview teams/component/inviteview teams/org/positionview teams/org/positiontreeview".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/org/departmenttreeview"),e=h("teams/org/departmentview"),c=h("teams/org/userview"),b=h("teams/org/invitationview"),a=h("teams/component/inviteview"),a=h("teams/component/inviteview"),d=h("teams/org/positionview"),
g=h("teams/org/positiontreeview");h=q.extend({initialize:function(a){this.id=a.id;this.type=a.type||"user";this.operation=a.operation;this.userOrg=a.userOrg;this.pageKey=this.type;this.creator=a.creator;"department"==this.type&&(this.pageKey="user");this.template="org.page";this.el="#mainContainer"},delegateEvents:function(){$("#mainContainer").on("click.Messages",".sub-nav li",function(a){$(".sub-nav li").removeClass("active");$(this).addClass("active")});this.on("addNode",function(a){this.mainView.addNode(a)});
this.on("updateNode",function(a){this.mainView.updateNode(a.propertyName,a.value)});this.on("updateGroup",function(){this.mainView.updateGroup()});this.on("deleteSelectedNode",function(a){this.mainView.deleteSelectedNode(a)});this.on("rerenderTree",function(){this.mainView.render()});this.on("addPosn",function(a){this.mainView=new g({id:a,type:this.type,el:this.el+" #org_container .j_main .org-left-col",operation:this.operation});this._render();this.renderSubview()})},render:function(){var d=this,
c=this.el;this.initLayout({userId:TEAMS.currentUser.id});$(d.el).find(".sub-nav li.j_"+d.type).addClass("active");d.inviteView=new a({container:c+" #org_container .j_main #invite-main-bd",type:"inline",callback:function(a){d.mainView.loadInviteInfo&&d.mainView.loadInviteInfo(a,"prepend")}});$(d.inviteView.container).find("#invite-cancel").addClass("hide");switch(d.type){case "user":$(d.el).find("#org-main-bd").hasClass("hide")&&$(d.el).find("#org-main-bd").removeClass("hide");$(d.el).find("#invite-main-bd").addClass("hide");
this.mainView=new f({id:this.id,type:d.type,el:c+" #org_container .j_main .org-left-col",operation:this.operation});this._render();this.renderSubview();break;case "invitation":$(d.el).find("#invite-main-bd").hasClass("hide")&&$(d.el).find("#invite-main-bd").removeClass("hide");$(d.el).find("#org-main-bd").addClass("hide");this.mainView=new b({container:c+" #org_container .j_main #invite-members .invite-view-wrapper"});this._render();break;case "position":$(d.el).find("#org-main-bd").hasClass("hide")&&
$(d.el).find("#org-main-bd").removeClass("hide"),$(d.el).find("#invite-main-bd").addClass("hide"),this.mainView=new g({id:this.id,type:d.type,el:c+" #org_container .j_main .org-left-col",operation:this.operation}),this._render(),this.renderSubview()}},renderSubview:function(){var a=this.el,b=this.id,g=this.type,f=this.userOrg,p=this.creator;"user"==g?this.subView=new c({id:b,operation:this.operation,el:a+" #org_container .j_main .org-right-col",editable:!0,userOrg:f,isDepartment:!0,creator:p}):"department"==
g?this.subView=new e({id:this.id,el:a+" #org_container .j_main .org-right-col",operation:this.operation}):"position"==g&&(this.subView=new d({id:this.id,el:a+" #org_container .j_main .org-right-col",operation:this.operation}));this._renderSubview()},undelegateEvents:function(){$(window).off("resize.OrgPage")}});m.exports=h});
define("teams/org/departmenttreeview","teams/utils teams/org/treeview teams/org/groupview teams/org/treemodel teams/org/groupmodel teams/component/inviteview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/org/treeview"),c=h("teams/org/groupview"),b=h("teams/org/treemodel"),a=h("teams/org/groupmodel");h=Backbone.View.extend({initialize:function(d){this.id=d.id;this.type=d.type;this.el=d.el;this.readonly=d.readonly;this.noUrl=d.noUrl;this.height=d.height;this.operation=d.operation;this.model=
new b;this.groupModel=new a;this.treeView=new e({el:this.el+" #org-tree-list",readonly:this.readonly,noUrl:this.noUrl});this.groupView=new c({el:this.el+" #group-message",readonly:this.readonly,noUrl:this.noUrl});$(this.el).html(f.template("org.departmenttree"));this.height&&$(this.el).find("#org-tree").attr("height",this.height);f.layout(this.el+" #org-tree")},delegateEvents:function(){var a=this;$("body").on("click.departmenttree",".goto-top",function(a){f.gotoTop("#org-tree")});$(a.el).on("click.departmenttree",
"#organization-users",function(b){$(this).addClass("active");$(this).siblings().removeClass("active");$(a.el).find("#organization-users").parent().addClass("active");$(a.el).find("#group-users").parent().removeClass("active");$(a.el).find("#org-tree-list").removeClass("hide");$(a.el).find("#org-group-list").addClass("hide");$(a.el).find(".root").trigger("click")});$(a.el).on("click.departmenttree","#group-users",function(b){$(this).addClass("active");$(this).siblings().removeClass("active");$(a.el).find("#organization-users").parent().removeClass("active");
$(a.el).find("#group-users").parent().addClass("active");$(a.el).find("#org-tree-list").addClass("hide");$(a.el).find("#org-group-list").removeClass("hide");a.reloadGroup(TEAMS.currentUser.id)});$(a.el).on("click.departmenttree",".nodeicon",function(a){$(this).toggleClass("icon-caret-right");$(this).toggleClass("icon-caret-down");$(this).parent(".treenode").next().slideToggle("fast")});$(a.el).on("click.departmenttree",".treenode",function(b){a.treeView.highLight($(this).data("node").id)});$(a.el).on("click.departmenttree",
"#delete-department",function(b){var c=$(this);f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u90e8\u95e8\u5417\uff1f\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d",function(b){b&&(b=$(a.el).find("#"+c.attr("nodeid")).data("node").nodeObj,a.model.deleteDepart(b.id,b.parent.id,function(b){a.deleteSelectedNode(a.operation);f.notify("\u5220\u9664\u6210\u529f")}))})});$(a.el).on("click.departmenttree","#delete-group",function(b){var c=$(this),e=-1;b=$(a.el).find(c).parents("li").next();b[0]?e=b[0].firstChild.id:
b=$(a.el).find(c).parents("li").prev();b[0]&&(e=b[0].firstChild.id);f.confirm("\u786e\u8ba4\u9000\u51fa\u7fa4\u7ec4?",function(b){b&&(b=$(a.el).find(c).attr("groupid"),a.groupModel.deleteGroup(b,function(b){f.notify("\u9000\u51fa\u7fa4\u7ec4\u6210\u529f");-1!=e?(b="/organization/"+e+"/user/edit/editgroup",$("#center-pane").find("#show-first-group").attr("href",b),$("#center-pane").find("#show-first-group").click()):($("#right-pane").find("#employee-container").addClass("hide"),$("#right-pane").find("#group-user-info").addClass("hide"));
a.reloadGroup(TEAMS.currentUser.id)}))})});$(a.el).on("click.departmenttree","#btn-quit",function(b){var c=$(this);f.confirm("\u786e\u8ba4\u9000\u51fa\u7fa4\u7ec4?",function(b){var g=$(a.el).find(c).attr("groupid"),e=TEAMS.currentUser.id;b&&$.ajax({type:"GET",url:"/channel/remove/"+g+"/"+e+".json",dataType:"json",data:{},success:function(b){f.notify("\u9000\u51fa\u7fa4\u7ec4\u6210\u529f");a.reloadGroup(e)}})})});$(a.el).on("click.departmenttree","#add-dept-group",function(a){$(this).hide();$("#group-message").prepend("\x3cdiv class\x3d'ph-20'\x3e\x3cinput id\x3d'group-input-text' class\x3d'form-control form-control-block mb-10' type\x3d'text' /\x3e\x3c/div\x3e");
$("#group-input-text").focus()});$(a.el).on("blur.departmenttree","#group-input-text",function(b){b=$(this);b.hide();b=b.val();$("#add-dept-group").show();if(""!=$.trim(b)){var c={};20<$.trim(b).length?f.notify("\u7fa4\u7ec4\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26"):(c["group.name"]=$.trim(b),c.employeeId=TEAMS.currentUser.id,a.groupModel.saveGroup(c,function(b){f.notify("\u6dfb\u52a0\u6210\u529f");a.reloadGroup(TEAMS.currentUser.id);b="/organization/"+b.group.id+"/user/edit/editgroup";
$("#center-pane").find("#show-first-group").attr("href",b);$("#center-pane").find("#show-first-group").click()}))}});$(a.el).on("keyup.departmenttree","#group-input-text",function(a){var d=$(this);13==a.keyCode&&d.trigger("blur")});$(a.el).on("click.departmenttree","#org-tree-list .treenode",function(a){$(a.target).hasClass("icon-edit")||$(a.target).hasClass("icon-trash")||$(a.target).hasClass("icon-plus-thin")||$(a.target).hasClass("tree-name")||$(this).find("\x3ea")[0].click()});$(a.el).on("click.departmenttree",
"#org-group-list li",function(a){$(a.target).attr("href")||$(a.target).hasClass("icon-trash")||$(this).find("\x3ea")[0].click()})},navigate:function(a){var b=a.attr("href");ROUTER.navigate(b,{trigger:!0});b=a.attr("id");a=a.attr("nodeid");this.treeView.highLight(a?a:b)},render:function(){var a=this,b=a.id,c=$(a.el),e=a.type;this.treeView.render(b,function(){"department"==e?a.treeView.highLight(b):b&&0<c.find("#"+a.id).length?c.find("#"+a.id).trigger("click"):c.find(".root").addClass("selected")});
$(a).find("#organization-users").trigger("click")},reloadSelectedNode:function(a){var b=this.treeView,c=b.getSelectedNode();b.reloadNode(c,a)},addNode:function(a){var b=this,c=$(b.el);b.reloadSelectedNode(function(){b.treeView.highLight(a);c.find("#"+a).find("#edit-department").trigger("click")})},updateNode:function(a,b){var c=this.treeView,e=c.getSelectedNodeObj();e.nodeObj[a]=b;"name"==a?e.name=b:"parentId"==a&&(e.parentId=b);c.updateNode($(this.el).find("#"+e.id),b)},updateGroup:function(){$(this.el).find("#group-users").trigger("click")},
deleteSelectedNode:function(a){var b=this.treeView,c=b.getSelectedNodeObj().parentId,c=$(this.el).find("#"+c);b.reloadNode(c);"edit"==a||"add"==a?c.find("#edit-department").trigger("click"):c.trigger("click")},reloadGroup:function(a){this.groupView.render(a)},remove:function(){$(this.el).off(".departmenttree")}});m.exports=h});
define("teams/org/treemodel",function(h,q,m){h=Backbone.Model.extend({loadData:function(f,e){$.ajax({url:"/base/tree/department.json",type:"post",dataType:"json",data:{id:e,hasUrl:this.hasUrl},success:function(c){f&&f(c)}})},deleteDepart:function(f,e,c){$.ajax({url:"/base/department/delete.json",type:"post",dataType:"json",data:{"department.id":f,"department.parent":e},success:function(b){c&&c(b)}})},loadPositionData:function(f,e){$.ajax({url:"/base/tree/position.json",type:"post",dataType:"json",
data:{id:e,hasUrl:this.hasUrl},success:function(c){f&&f(c)}})},deletePosition:function(f,e,c){$.ajax({url:"/base/position/delete.json",type:"post",dataType:"json",data:{"position.id":f,"position.parent":e},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/org/positiontreeview","teams/utils teams/org/treeview teams/org/groupview teams/org/treemodel teams/org/groupmodel teams/org/positionmodel teams/org/positionview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/org/treeview");h("teams/org/groupview");var c=h("teams/org/treemodel");h("teams/org/groupmodel");var b=h("teams/org/positionmodel"),a=h("teams/org/positionview");h=Backbone.View.extend({initialize:function(a){this.id=a.id;this.type=a.type;this.el=a.el;this.readonly=
a.readonly;this.noUrl=a.noUrl;this.height=a.height;this.operation=a.operation;this.model=new c;this.positionModel=new b;this.treeView=new e({el:this.el+" #org-tree-list",readonly:this.readonly,noUrl:this.noUrl,type:this.type});$(this.el).html(f.template("org.positiontree"));this.height&&$(this.el).find("#org-tree").attr("height",this.height);f.layout(this.el+" #org-tree")},delegateEvents:function(){var d=this;$("body").on("click.positiontree",".goto-top",function(a){f.gotoTop("#org-tree")});$(d.el).on("click.positiontree",
"#organization-positions",function(a){$(this).addClass("active");$(this).siblings().removeClass("active");$(d.el).find("#organization-positions").parent().addClass("active");$(d.el).find("#org-tree-list").removeClass("hide");$(d.el).find(".root .tree-name").trigger("click")});$(d.el).on("click.positiontree",".nodeicon",function(a){$(this).toggleClass("icon-caret-right");$(this).toggleClass("icon-caret-down");$(this).parent(".treenode").next().slideToggle("fast")});$(d.el).on("click.positiontree",
".treenode",function(a){d.treeView.highLight($(this).data("node").id)});$(d.el).on("click.positiontree","#org-tree-list .treenode",function(a){$(a.target).hasClass("icon-edit")||$(a.target).hasClass("icon-trash")||$(a.target).hasClass("icon-plus-thin")||$(a.target).hasClass("tree-name")||$(this).find("\x3ea")[0].click()});$(d.el).on("click.positiontree","#delete-position",function(a){var b=$(this),c=$("#org-tree-list .root").attr("id");f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5c97\u4f4d\u5417\uff1f\u5220\u9664\u540e\u5c06\u6e05\u9664\u4eba\u5458\u4fe1\u606f\u4e2d\u7684\u8be5\u5c97\u4f4d\u4fe1\u606f",
function(a){a&&(a=$(d.el).find("#"+b.attr("nodeid")).data("node").nodeObj,d.model.deletePosition(a.id,a.parent.id,function(a){"2875559025900734681"==c&&d.render();d.deleteSelectedNode(d.operation);f.notify("\u5220\u9664\u6210\u529f")}))})});$(d.el).on("click.positiontree",".position-first-add",function(a){$(this).hide();$("#posn-message").prepend("\x3cdiv class\x3d'ph-20'\x3e\x3cinput id\x3d'posn-input-text' class\x3d'form-control form-control-block mb-10' type\x3d'text' /\x3e\x3c/div\x3e");$("#posn-input-text").focus()});
$(d.el).on("keyup.positiontree","#posn-input-text",function(a){var d=$(this);13==a.keyCode&&d.trigger("blur")});$(d.el).on("blur.positiontree","#posn-input-text",function(d){d=$(this);d.hide();var b=d.val();if(""==$.trim(b))$(".position-first-add").show();else if(d={},20<$.trim(b).length)f.notify("\u5c97\u4f4d\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26");else{var b=$.trim(b),c=new a({});d.name=b;d.flag=!1;c.renderOne(d)}})},navigate:function(a){var b=a.attr("href");ROUTER.navigate(b,
{trigger:!0});b=a.attr("id");a=a.attr("nodeid");this.treeView.highLight(a?a:b)},render:function(){var a=this,b=a.id,c=$(a.el);this.treeView.render(b,function(){b&&0<c.find("#"+a.id).length?c.find("#"+a.id).trigger("click"):(c.find(".root").addClass("selected"),c.find(".root").trigger("click"))})},reloadSelectedNode:function(a){var b=this.treeView,c=b.getSelectedNode();b.reloadNode(c,a)},addNode:function(a){var b=this,c=$(b.el);b.reloadSelectedNode(function(){b.treeView.highLight(a);c.find("#"+a).find("#edit-position").trigger("click")})},
updateNode:function(a,b){var c=this.treeView,e=c.getSelectedNodeObj();e.nodeObj[a]=b;"name"==a?e.name=b:"parentId"==a&&(e.parentId=b);c.updateNode($(this.el).find("#"+e.id),b)},deleteSelectedNode:function(a){var b=this.treeView,c=b.getSelectedNodeObj().parentId,c=$(this.el).find("#"+c);b.reloadNode(c);"edit"==a||"add"==a?c.find("#edit-position").trigger("click"):c.trigger("click")},remove:function(){$(this.el).off(".positiontree")}});m.exports=h});
define("teams/org/userview",["teams/utils","teams/org/usermodel","teams/component/validation","teams/org/followmodel","teams/org/invitationview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/org/usermodel"),c=h("teams/component/validation"),b=h("teams/org/followmodel");h("teams/org/invitationview");h=Backbone.View.extend({initialize:function(a){this.id=a.id;this.el=a.el;this.userOrg=a.userOrg;this.operation=a.operation;this.editable=a.editable;this.height=a.height;this.isMulti=a.isMulti;this.isDepartment=
a.isDepartment;this.removeSlider=a.removeSlider;this.creator=a.creator;this.model=new e;this.followModel=new b;this.checkCount=0;$(this.el).html(f.template("org.user"));this.height&&$(this.el).find(".j_userlistScr").attr("height",this.height);this.target=a.target},delegateEvents:function(){var a=this,b=this.model;$("body").on("click.userView",".goto-top",function(a){f.gotoTop(".j_userlistScr")});$(a.el).on("click.userView","#org-users",function(b){$(a.el).find("#employee-container").removeClass("hide");
$(a.el).find("#invitations-container").addClass("hide");$(a.el).find("#org-users").addClass("tab-active");$(a.el).find(".org-right-col").removeClass("hide")});$(a.el).off("click","#btn-invite").on("click","#btn-invite",function(g){if(!c.formValidate($(a.el+" .form-invite")))return!1;g={};var l=$(a.el+" #user-name"),e=$(a.el+" #user-email");e.val()&&(g["employee.username"]=$.trim(l.val()),g["employee.email"]=$.trim(e.val()),e.val(""),g["employee.department"]=a.id,b.saveEmployee(g,function(b){"exist"==
b.propertyName?(f.notify(b.message),e.val("").focus()):"probation"==b.propertyName?(f.notify(b.message),e.val("").focus()):b.message&&"normal"==b.propertyName?(f.notify(b.message),e.val("").focus()):(f.notify("\x3ca\x3e\u5df2\u53d1\u9001\u90ae\u4ef6\u9080\u8bf7"+b.employee.username+"\u52a0\u5165eteams\x3c/a\x3e"),a.loadUser(b.employee,!0),l.val("").focus(),e.val(""))}))});$(a.el).on("click.userView","#chk1,#chk2",function(b){a.model.pageNo=0;a.model.employee.index="";0!=$(a.el+" #chk3:checked").length&&
$("#chk3").prop("checked",!1);a.loadUsersAndIndexs()});$(a.el).on("click.userView","#chk3",function(b){a.model.pageNo=0;a.model.employee.index="";0!=$(a.el+" #chk2:checked").length&&$("#chk2").prop("checked",!1);a.queryAdminGroup()});$(a.el).on("click.userView","#employee-container .center-more",function(b){$(a.el+" #checkAll").prop("checked",!1);a.loadUsers()});$("body").on("click.userView",function(){$(a.el+" #userlistCon .user-invitation-tip").remove()});$(a.el).on("click.userView",".btn-follow-add",
function(b){var d=$(this).parents("li");b=d.attr("id");a.followModel.follow(b,TEAMS.currentUser.id,function(b){a.rendFollow(d,b);"approved"==b?f.notify("\u6dfb\u52a0\u5173\u6ce8\u6210\u529f"):f.notify("\u5173\u6ce8\u7533\u8bf7\u5df2\u53d1\u9001")})});$(a.el).on("click.userView",".btn-unfollow-cancle",function(){var b=$(this).parents("li"),d=b.attr("id");a.followModel.unfollow(d,TEAMS.currentUser.id,function(d){a.rendFollow(b,d.relation);f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8")})});$(this.el).on("blur.userView",
"#group-name",function(b){var d=$(this).data("nameData");b=$(b.currentTarget);var c=$(a.el+" #group-name").val();$(this).trigger("updateGroupName",[this,d,b,c])});$(this.el).on("keyup.userView","#group-name",function(a){13==a.keyCode&&$(this).trigger("blur")});$(this.el).on("click.userView","#edit-group-user",function(b){b="/organization/"+a.id+"/user/edit/editgroup";$(this).attr("href",b)});$(this.el).on("click.userView","#employee-container li",function(b){$(b.target).hasClass("router")||$(b.target).parent().hasClass("usercard-toggle")||
$(b.target).parents().hasClass("follow-btns")?a.isMulti&&$(this).find("div.username input").trigger("click"):(a.editable&&"edit"==a.operation&&$(this).find("div.username input").trigger("click"),!a.editable&&a.isMulti&&$(this).find("div.username input").trigger("click"))});$(this.el).on("click.userView","#employee-container .clearfix div.username input",function(b){var d=$(this).parents(".clearfix").data("user");len=$(this).filter(":checked").length;0<len?$(this).trigger("addUser",[d,a.id]):$(this).trigger("deleteUser",
[d,a.id]);len1=$(a.el+" #employee-container .clearfix div.username input:checked").length;len2=$(a.el+" #employee-container .clearfix").length;0==len1&&$(a.el+" #checkAll").prop("checked",!1);len1==len2?$(a.el+" #checkAll").prop("checked",!0):$(a.el+" #checkAll").prop("checked",!1);b.stopPropagation()});$(this.el).on("click.userView","#employee-container .clearfix div.username .name",function(b){a.userOrg&&"editgroup"==a.userOrg&&($(this).click(),b.stopPropagation())});$(this.el).off("change.userView",
"#checkAll").on("click.userView","#checkAll",function(){var b=[];if($(this).prop("checked")){$(a.el+" #employee-container .clearfix div.username input").each(function(){if(0==$(this).filter(":checked").length){var d=$(this).parents(".clearfix").data("user");b.push(d);$(a.el+" #checkAll").removeAttr("checked");$(this).prop("checked",!0)}});var d=$(a.el+" #employee-container .clearfix div.username input:checked").length,c=$(a.el+" #employee-container .clearfix").length-1;d==c&&$(this).prop("checked",
!0);$(this).trigger("addAllUser",[b,a.id])}else $(a.el+" #employee-container .clearfix div.username input").each(function(){var d=$(this).parents(".clearfix").data("user");if(d.id!=TEAMS.currentUser.id||"editgroup"!=a.userOrg)b.push(d),$(this).prop("checked",!1)}),$(this).prop("checked",!1),$(this).trigger("deleteAllUser",[b,a.id])});$(this.el).on("resizeSroll.userView","div.scrollwrapper",function(b){var d=$(this);b.stopPropagation();b.preventDefault();b=1200<$(window).width()?300:220;a.isDepartment&&
($(a.el+" .center-wrap").width(b),$(a.el+" .right-wrap").width($(a.el+" #two").width()-b-1));b=d.attr("height");if(!b){b=d.attr("marginbottom")||0;var c=d.offset().top;b=$(window).height()-c-b}d.css("height",b);d.mCustomScrollbar("update")})},render:function(a){this.editable?$(this.el).find(".follow-btns").removeClass("hide"):$(this.el).find(".follow-btns").addClass("hide");this.userOrg&&("searchgroup"==this.userOrg?($(this.el+" #group-name").attr("disabled",!0),$(this.el).find("#edit-group-user").removeClass("hide"),
$(this.el).find("#add-users").addClass("hide")):"editgroup"==this.userOrg&&($(this.el).find("#edit-group-user").addClass("hide"),$(this.el).find("#add-users").removeClass("hide")),$(this.el+" #group-user-info").removeClass("hide"),$(this.el+" #org-user-info").addClass("hide"));this.model.employee.department=this.id;this.model.pageNo=0;this.model.groupId=this.id;this.model.employee.index="";$(this.el+" #checkAll").prop("checked",!1);"search"!=this.operation&&"edit"!=this.operation||this.renderEdit();
this.loadUsersAndIndexs(a);this.creator&&TEAMS.currentUser.id!=this.creator&&$("#edit-group-user").addClass("hide");$(this.el).hasClass("user-selector-body-r")?f.layout("#userSelector-multi .j_userlistScr"):f.layout("#employee-container .j_userlistScr")},queryAdminGroup:function(a){var b=this,g=b.model;b.userOrg||(1>=g.pageNo&&$(b.el+" #userlistCon").empty(),0!=$(b.el+" #chk3:checked").length?g.queryAdminGroup(function(g){b.loadUserlist(g,a)}):b.loadUsers(a))},loadUsersAndIndexs:function(a){var b=
this,g=b.model;0==$(b.el+" #chk2:checked").length?g.employee.status="normal":g.employee.status="";g.isContainsSub=!0;b.userOrg?"editgroup"==b.userOrg?(b.model.employee.department="",g.findPinyinIndexs(function(a){b.loadPinyin(a)})):(g.groupId=b.id,g.findGroupPinyinIndexs(function(a){b.loadPinyin(a)})):g.findPinyinIndexs(function(a){b.loadPinyin(a)});b.loadUsers(a)},loadPinyin:function(a){var b=this,g=b.model;a=a.indexs;var c=/[0-9]$/,e=/^[A-Za-z]+$/,k=$(b.el).find(".users-list-pinyin");k.find("a.highlight:not(#ALL)").removeClass("highlight");
for(var f=0;f<a.length;f++){var p=a[f].toLocaleUpperCase();c.test(p)?p="degit":e.test(p)||(p="special");p&&0<p.trim().length&&k.find("#"+p).addClass("highlight")}k.off("click","a.highlight").on("click","a.highlight",function(a){g.pageNo=0;a=$(this).attr("id").toLocaleLowerCase();"all"==a&&(a="");g.employee.index=a;b.loadUsers()})},loadUsers:function(a){var b=this,g=b.model;g.pageNo++;1>=g.pageNo&&$(b.el+" #userlistCon").empty();0==$(b.el+" #chk2:checked").length?g.employee.status="normal":g.employee.status=
"";g.isContainsSub=!0;b.userOrg?"editgroup"==$.trim(b.userOrg)?(b.model.isGroupEdit=1,g.queryGroupEmp(function(g){b.loadUserlist(g,a)})):g.queryGroupEmp(function(g){b.loadUserlist(g,a)}):g.queryEmp(function(g){b.loadUserlist(g,a)})},loadUserlist:function(a,b){for(var g=a.page,c=0;c<g.result.length;c++){var e=g.result[c];this.loadUser(e,!1,b)}0<g.result.length&&g.result.length==this.checkCount?$(this.el+" #checkAll").prop("checked",!0):$(this.el+" #checkAll").prop("checked",!1);c=$(this.el).find(".center-more");
g.hasNext?c.removeClass("hide"):c.addClass("hide");this.checkCount=0;if(null!=$(this.target).attr("id")&&""!=$(this.target).attr("id")&&"openauth_user"==$(this.target).attr("id"))for(g=$(this.target).find("span"),c=0;c<g.length;c++){var k=$(g[c]).attr("uid"),f=$(g[c]).attr("uname"),e=$(this.el+" #employee-container #userlistCon #"+k+".clearfix div.username input").parents(".clearfix").data("user"),f=$("\x3ca\x3e "+f+" \x3c/a\x3e");f.attr("id",k);f.data("user",e);0==$("#userSelector-multi .selected-users #"+
k).size()&&$("#userSelector-multi .selected-users").prepend(f);$("#addUserToGroupButton").removeClass("hide");$(this.el+" #employee-container #userlistCon #"+k+".clearfix div.username input").attr("checked","checked")}},loadUser:function(a,b,g){var c=$(this.el).find("#usersListClone li").clone();this.userOrg?"searchgroup"==$.trim(this.userOrg)?this.isMulti?(c.find("div.username input").removeClass("hide"),$(this.el).find("#group-user-checkall").removeClass("hide"),a.checked&&1==a.checked&&c.find("div.username input").prop("checked",
!0)):(c.find("div.username input").addClass("hide"),$(this.el).find("#group-user-checkall").addClass("hide")):this.editable&&(c.find("div.username input").removeClass("hide"),$(this.el).find("#group-user-checkall").removeClass("hide"),a.checked&&1==a.checked&&(c.find("div.username input").prop("checked",!0),this.checkCount+=1)):this.isMulti?(c.find("div.username input").removeClass("hide"),$(this.el).find("#group-user-checkall").removeClass("hide"),a.checked&&1==a.checked&&c.find("div.username input").prop("checked",
!0)):(c.find("div.username input").addClass("hide"),$(this.el).find("#group-user-checkall").addClass("hide"));if(g)for(var e=0;e<g.length;e++)g[e].id==a.id&&(this.checkCount+=1,c.find("div.username input").prop("checked",!0));c.data("user",a);c.attr("id",a.id);a.mobile?c.find(".call").html(a.mobile):c.find(".call").html(a.email);c.find(".dept").html(a.department.name);this.editable&&c.find("a.avatar").attr("userId",a.id);a.avatar&&a.avatar.p4&&(c.find("a.avatar img").attr("src","/base/download/"+
a.avatar.p4),this.editable&&(c.find("a.avatar img").attr("id",a.id),c.find("a.avatar img").data("user",a)));g="";g="normal"==a.status?"":"(\u79bb\u804c)";g="\x3cfont color\x3d'red'\x3e"+g+"\x3c/font\x3e";c.find("a.name").html(a.username+g);this.removeSlider&&c.find("a.name").removeClass("j_entityslider-toggle");this.editable?c.find("a.name").attr("data-id",a.id):this.isMulti||(c.find("a.name").attr("id",a.id),c.find("a.name").data("user",a));g=a.email?a.email:a.mobile;c.find("span.email").attr("title",
g).html(g);$(this.el).find("#userlistCon");a.department&&1==a.department.rank?c.find("span.department").text(""):c.find("span.department").attr("title",a.department.name).html(a.department.name);this.editable&&(a.lastLoginTime?(g=Date.create(a.lastLoginTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),c.find("span.lastlogin").attr("title","\u6700\u8fd1\u767b\u5165"+g+"/\u767b\u5f55\u603b\u6b21\u6570"+a.loginCount+"\u6b21").html("\u6700\u8fd1\u767b\u5165"+g+"/"+a.loginCount+"\u6b21")):c.find("span.lastlogin").attr("title",
"\u672a\u767b\u5f55").append("\u672a\u767b\u5f55"));TEAMS.currentUser.id!=a.id?c.find("span."+a.relation).removeClass("hide"):"editgroup"==this.userOrg&&c.find("div.username input").attr("disabled","disabled");a.exist&&c.find("div.username input").prop("checked",!0);b?$(this.el).find("#userlistCon").prepend(c):$(this.el).find("#userlistCon").append(c)},rendFollow:function(a,b){a.find(".follow-btns span").addClass("hide");a.find(".follow-btns .btn").addClass("hide");a.find(".follow-btns ."+b).removeClass("hide")},
renderEdit:function(){var a=this;this.model.getById(a.id,function(b){a.group=b.group;$(a.el+" #group-name").data("nameData",b.group.name);$(a.el+" #group-name").focus();a.loadGroup(b.group)})},loadGroup:function(a){$(this.el+" #group-info").removeClass("hide").data("group",a);$(this.el+" #group-id").val(a.id);$(this.el+" #group-name").val(a.name)},remove:function(){$(this.el).off(".userView")}});m.exports=h});
define("teams/org/usermodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageSize:500,pageNo:0,groupId:"",isGroupEdit:0,employee:{department:1,status:"normal"},queryEmp:function(f){var e={};e["employee.department"]=this.employee.department;e["employee.status"]=this.employee.status;e["employee.username"]=this.employee.username;e["employee.email"]=this.employee.email;e["employee.index"]=this.employee.index;e.isContainsSub=this.isContainsSub;e.pageNo=this.pageNo;e.pageSize=this.pageSize;e.groupId=
this.groupId;$.ajax({url:"/base/employee/pageQuery.json",type:"post",dataType:"json",data:e,success:function(c){f&&f(c)}})},queryGroupEmp:function(f){var e={};e["employee.status"]=this.employee.status;e["employee.index"]=this.employee.index;e.isContainsSub=this.isContainsSub;e.pageNo=this.pageNo;e.pageSize=this.pageSize;e.groupId=this.groupId;e.isGroupEdit=this.isGroupEdit;$.ajax({url:"/base/employee/queryGroupEmp.json",type:"post",dataType:"json",data:e,success:function(c){f&&f(c)}})},saveEmployee:function(f,
e){$.ajax({url:"/base/employee/save.json",type:"post",dataType:"json",data:f,beforeSend:function(){},success:function(c){e&&e(c)}})},saveEmployees:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/base/employee/saves.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},findPinyinIndexs:function(f){var e={};e["employee.department"]=this.employee.department;e["employee.status"]=this.employee.status;e.isContainsSub=this.isContainsSub;$.ajax({type:"get",url:"/base/employee/findPinyinIndexs.json",
dataType:"json",data:e,success:function(c){f&&f(c)}})},findGroupPinyinIndexs:function(f){var e={};e["employee.status"]=this.employee.status;e.groupId=this.groupId;$.ajax({type:"get",url:"/base/employee/findGroupPinyinIndexs.json",dataType:"json",data:e,success:function(c){f&&f(c)}})},getServiceAccount:function(f){$.ajax({type:"get",url:"/users/getServiceAccount.json",dataType:"json",success:function(e){f&&f(e)}})},getById:function(f,e){$.ajax({type:"get",url:"/group/"+f+".json",dataType:"json",data:"",
success:function(c){e&&e(c)}})},queryAdminGroup:function(f){$.ajax({type:"get",url:"/base/employee/queryAdminGroup.json",dataType:"json",data:"",success:function(e){f&&f(e)}})},getEmployeeById:function(f,e){$.ajax({type:"get",url:"/base/employee/"+f+".json",dataType:"json",data:"",success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/org/followmodel",function(h,q,m){h=Backbone.Model.extend({loadMyFollow:function(f,e,c){$.ajax({type:"get",url:"/users/myfollow/"+f+".json",dataType:"json",data:e,success:function(b){c&&c(b)}})},loadMyFans:function(f,e,c){$.ajax({type:"post",url:"/users/myfans/"+f+".json",dataType:"json",data:e,success:function(b){c&&c(b)}})},loadMySubordinate:function(f,e,c){$.ajax({type:"get",url:"/users/subordinate/"+f+".json",dataType:"json",data:e,success:function(b){c&&c(b)}})},loadMyDirectSubordinates:function(f,
e,c){$.ajax({type:"get",url:"/users/myDirectSubordinates/"+f+".json",dataType:"json",data:e,success:function(b){c&&c(b)}})},loadMyIndirectSubordinates:function(f,e,c){$.ajax({type:"get",url:"/users/myIndirectSubordinates/"+f+".json",dataType:"json",data:e,success:function(b){c&&c(b)}})},unfollow:function(f,e,c){$.ajax({type:"post",url:"/users/unfollow/"+f+"/"+e+".json",dataType:"json",success:function(b){c&&c(b)}})},cancelMyFans:function(f,e,c){$.ajax({type:"post",url:"/users/cancelMyFans/"+f+"/"+
e+".json",dataType:"json",success:function(b){c&&c(b)}})},follow:function(f,e,c){$.ajax({type:"post",url:"/users/follow/"+f+"/"+e+".json",dataType:"json",success:function(b){var a=b.relation;c&&c(a,b.user)}})},saveLower:function(f,e){$.ajax({url:"/base/employee/saveLower.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteLower:function(f,e){$.ajax({url:"/base/employee/deleteLower.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/org/departmentview",["teams/utils","teams/org/departmentmodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/org/departmentmodel"),c=h("teams/component/typeahead");h=Backbone.View.extend({department:{},initialize:function(b){this.id=b.id;this.operation=b.operation;this.model=new e;this.el==b.el;$(this.el).html(f.template("org.department"));f.layout("#department-info")},delegateEvents:function(){var b=this;$(this.el).on("blur.department","#department-info :input",
function(a){a=$(a.currentTarget);var d=$("#department-id").val();a.val();d?b.saveDepartmentProperty(a):b.saveDepart(a)});$(this.el).on("keydown.department","#department-info :input",function(a){"13"==a.keyCode&&$(this).trigger("blur")});c([{el:"#department-info #typeahead-department",callback:function(a){if(a){if(b.id==a.id)return;$("#departmentSelector a").text(a.name);$("#department-parent").val(a.id)}b.saveDepartmentProperty($("#department-info #department-parent"))},resultHandler:function(a){var d=
[];$.each(a,function(a,c){b.id!=c.id&&d.push(c)});return d}}])},render:function(){TEAMS.currentUser.admin?"add"==this.operation?this.renderAdd():"edit"==this.operation&&this.renderEdit():"edit"==this.operation&&this.renderShow()},renderAdd:function(){var b=this,a=this.model,d=b.id,g=$("#department-info").removeClass("hide");g.find("input:not(#departmentSelector)").val("");g.find("textarea").val("");a.getById(d,function(a){var d=a.department;b.department=a.department;g.find("#department-parent").val(d.id);
g.find("#departmentSelector a").html(d.name)})},renderEdit:function(){var b=this;this.model.getById(b.id,function(a){b.department=a.department;$("#department-info").data("departmentName",b.department.name);b.loadDepartment(a.department)})},renderShow:function(){var b=this;this.model.getById(b.id,function(a){b.department=a.department;b.loadDepartmentRead(a.department)})},saveDepart:function(){var b=this,a=$("#department-info"),d={},g=$("#department-name").val();20<$.trim(g).length?f.notify("\u90e8\u95e8\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26"):
0==$.trim(g).length?f.notify("\u90e8\u95e8\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a"):(a.find("input").each(function(){name=$(this).attr("name");val=$(this).val();name&&val&&(d[name]=val)}),a.find("textarea").each(function(){name=$(this).attr("name");val=$(this).val();name&&val&&(d[name]=val)}),d["department.parent.id"]&&0!=$.trim(d["department.parent.id"]).length?this.model.saveDepartment(d,function(d){d.message?f.notify(d.message):d.department.id?(a.find("#department-id").val(d.department.id),$("#department-info").data("department",
d.department),d.department.name&&b.trigger("addNode",d.department.id),f.notify("\u4fdd\u5b58\u6210\u529f")):f.notify("\u6570\u636e\u9519\u8bef\uff0c\u6dfb\u52a0\u5931\u8d25")}):f.notify("\u4e0a\u7ea7\u90e8\u95e8\u4e0d\u80fd\u4e3a\u7a7a"))},saveDepartmentProperty:function(b){var a=$("#department-info").data("departmentName"),d=this,g=$("#department-info").data("department"),c=b.val();b=b.attr("name");var e=$("#department-name").val();if(20<$.trim(e).length)$("#department-info").data("departmentName",
e),f.notify("\u90e8\u95e8\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26");else if(0==$.trim(e).length)f.notify("\u90e8\u95e8\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a"),$("#department-name").val(a);else{var k="";b&&(k=b.replace("department.",""));a={};a["department.id"]=$("#department-id").val();a.propertyName=k;a[b]=c;$.trim(g[k])!=$.trim(a[b])&&d.model.saveDepartmentProperty(a,function(a){"parent.id"===k||"disporder"===k?d.trigger("rerenderTree"):d.trigger("updateNode",{propertyName:k,value:c});
$("#department-info").data("departmentName",a.department.name);f.notify("\u4fdd\u5b58\u6210\u529f")})}},loadDepartment:function(b){$("#department-info").removeClass("hide").data("department",b);$("#departmentSelector").removeAttr("disabled");$("#department-id").val(b.id);$("#department-name").val(b.name);$("#department-code").val(b.code);$("#department-disporder").val(b.disporder);b.parent?($("#department-parent").val(b.parent.id),$("#departmentSelector a").html(b.parent.name),$("#btn-delete-department").removeClass("hide")):
($("#department-parent").val(""),$("#departmentSelector a").html(""),$("#btn-delete-department").addClass("hide"),$("#department-info #department-root").hide());b.manager&&($("#department-manager").val(b.manager.id),$("#userSelector").val(b.manager.username));$("#department-description").val(b.description)},loadDepartmentRead:function(b){$("#department-info-read").removeClass("hide");$("#department-name-div .controls span").html(b.name);$("#department-code-div .controls span").html(b.code);$("#department-disporder-div .controls span").html(b.disporder);
b.parent&&$("#department-parent-div .controls span").html(b.parent.name);$("#department-description-div .controls span").html(b.description)},remove:function(){$(this.el).off(".department")}});m.exports=h});
define("teams/org/groupmodel",function(h,q,m){h=Backbone.Model.extend({loadData:function(f,e){$.ajax({url:"/group/group.json",type:"post",dataType:"json",data:{employeeId:f},success:function(c){e&&e(c)}})},deleteGroup:function(f,e){$.ajax({url:"/group/delete.json",type:"post",dataType:"json",data:{id:f},success:function(c){e&&e(c)}})},saveGroup:function(f,e){$.ajax({url:"/group.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveGroupAddEmployee:function(f,e){$.ajax({url:"/group/addGroupAddEmployee.json",
type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},addGroupUser:function(f,e,c){var b={};b.id=f;b.employeeId=e;$.ajax({url:"/group/addUser.json",type:"post",dataType:"json",data:b,success:function(a){c&&c(a)}})},addGroupUsers:function(f,e,c){var b={};b.id=f;b.ids=e;$.ajax({url:"/group/addUsers.json",type:"post",dataType:"json",data:b,success:function(a){c&&c(a)}})},deleteGroupUsers:function(f,e,c){var b={};b.id=f;b.ids=e;$.ajax({url:"/group/deleteUsers.json",type:"post",dataType:"json",
data:b,success:function(a){c&&c(a)}})},deleteGroupUser:function(f,e,c){var b={};b.id=f;b.employeeId=e;$.ajax({url:"/group/deleteUser.json",type:"post",dataType:"json",data:b,success:function(a){c&&c(a)}})},saveGroupProperty:function(f,e){$.ajax({url:"/group/saveProperty.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/org/departmentmodel",function(h,q,m){h=Backbone.Model.extend({saveDepartment:function(f,e){$.ajax({url:"/base/department.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveDepartmentProperty:function(f,e){$.ajax({url:"/base/department/saveProperty.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},getById:function(f,e){$.ajax({type:"get",url:"/base/department/"+f+".json",dataType:"json",data:"",success:function(c){e&&e(c)}})}});m.exports=
h});
define("teams/blog/blogpostviewnew",["teams/face/emojiarea","teams/utils","teams/blog/blogmodel","teams/component/invitemodalview"],function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/blog/blogmodel");h("teams/component/invitemodalview");h=Backbone.View.extend({el:"",initialize:function(b){this.el=b.container;this.callback=b.callback;$(this.el).html(e.template("blog.blogpostnew"));this.model=new c;b.isEntityBox&&$(this.el+" #blog-post-fast-new").addClass("scrollwrapper");f($);
$(".blog-emoji-new")&&$(".blog-emoji-new").remove();b=""+this.el+" #post-area-new";$(""+this.el+" #blog-textarea-new").emojiarea({buttonClass:"blog-emoji-new",emojiHeight:-210,emojiLeft:-70,buttonParent:b})},delegateEvents:function(){var b=this,a=$(b.el),d=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:"#post-area-new #blog-attach-new",container:"#post-area-new",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?module\x3dblog\x26ETEAMSID\x3d"+
ETEAMSID,flash_swf_url:"js/plupload.swf"});d.init();d.bind("FilesAdded",function(b,d){$.each(d,function(b,d){a.find("#blog-attachments-new").append(e.template("base.newattachment",d))});b.refresh();var c=a.find("#blog-textarea-new");if(!c.val()){for(var k="",f=0;f<d.length;f++)k+=d[f].name+"\uff0c";k=k.substring(0,k.length-1);c.val("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a"+k)}else if(0<=c.val().indexOf("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a")){k="";for(f=0;f<d.length;f++)k+=d[f].name+"\uff0c";
k=k.substring(0,k.length-1);c.val(c.val()+"\uff0c"+k)}});d.bind("UploadProgress",function(b,d){a.find("#"+d.id+" i").html(d.percent+"%")});d.bind("Error",function(a,b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});d.bind("FileUploaded",function(b,d,c){b=jQuery.parseJSON(c.response).fileObj;a.find("#"+d.id+" i").html("100%");a.find("#"+
d.id).data("fileObj",b).attr({"data-value":b.id,href:"/base/download/"+b.id})});d.bind("UploadComplete",function(d,c){var e=[];a.find("#blog-attachments-new .entity-item a").each(function(a){a=$(this).data("fileObj");e.push(a)});b.postBlog(e)});$(b.el+" #blog-textarea-new").autosize({append:"\n"});$(this.el).off("focusout.BlogViewNew",".j_postsize-new").on("focusout.BlogViewNew",".j_postsize-new",function(a){a=$(this).val();TEAMS.ownCache.blog=a});$(this.el).on("click.BlogViewNew","#btn-post-new",
function(d){TEAMS.ownCache.blog="";if(0<a.find("#blog-attachments-new .entity-item a").length){d=$(b.el+" #blog-textarea-new").val();if(""==$.trim(d)){e.notify("\u65e5\u62a5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");return}b.uploader.start()}else b.postBlog();return!1});$(this.el).off("keyup.BlogViewNew","#blog-textarea-new").on("keyup.BlogViewNew","#blog-textarea-new",function(a){13===a.keyCode&&a.ctrlKey&&($(b.el+" #btn-post-new").trigger("click.BlogViewNew"),a.preventDefault());a=$(this).val();var d=
"",d=0==a.length?"":0<a.length&&1E3>=a.length?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+(1E3-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+(a.length-1E3)+"\u5b57";$(b.el+" .j_post-tip-new").html(d);1E3<a.length&&e.notify("\u65e5\u62a5\u5185\u5bb9\u8d85\u8fc71000\u5b57")})},render:function(){},postBlog:function(b){var a=this,d=this.model,g=$(a.el+" #blog-textarea-new").val(),c=$(a.el+" #blog-textarea-new").attr("placeholder");g==c&&(g="");if(1E3<g.length)e.notify("\u65e5\u62a5\u5185\u5bb9\u8fc7\u957f\uff0c\u5355\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc71000\u5b57"),
$(a.el+" #blog-textarea-new").focus();else if(""==$.trim(g))e.notify("\u65e5\u62a5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),$(a.el+" #blog-textarea-new").focus();else if(!g.isBlank()||b)$(a.el+" #blog-textarea-new").val("").trigger("autosize.resize"),d.post({content:g,attachments:b},function(b){b.errorMessage?e.notify(b.errorMessage):"entitybox-container"==this.el?(e.notify("\u53d1\u5e03\u6210\u529f!"),a.callback&&a.callback()):($(a.el).find("#blog-textarea-new").val("").trigger("autosize.resize"),a.callback&&
a.callback(b.blog),e.notify("\u53d1\u5e03\u6210\u529f!"),$(a.el).find("#blog-attachments-new").empty(),$("#guide-div").addClass("hide"))})},remove:function(){$(this.el).off(".BlogViewNew");this.uploader&&(this.uploader.destroy(),this.uploader=null);this.inviteModalView&&(this.inviteModalView.remove(),this.inviteModalView=null)}});m.exports=h});
define("teams/blog/blogpostview",["teams/face/emojiarea","teams/utils","teams/blog/blogmodel","teams/component/invitemodalview"],function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/blog/blogmodel");h("teams/component/invitemodalview");h=Backbone.View.extend({el:"",initialize:function(b){this.el=b.container;this.callback=b.callback;$(this.el).html(e.template("blog.blogpost"));this.model=new c;b.isEntityBox&&$(this.el+" #blog-post-fast").addClass("scrollwrapper");f($);$(".blog-emoji")&&
$(".blog-emoji").remove();b=""+this.el+" #post-area";$(""+this.el+" #blog-textarea").emojiarea({buttonClass:"blog-emoji",emojiHeight:-210,emojiLeft:-70,buttonParent:b})},delegateEvents:function(){var b=this,a=$(b.el),d=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:"#post-area #blog-attach",container:"#post-area",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?module\x3dblog\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});
d.init();d.bind("FilesAdded",function(b,d){$.each(d,function(b,d){a.find("#blog-attachments").append(e.template("base.newattachment",d))});b.refresh();var c=a.find("#blog-textarea");if(!c.val()){for(var k="",f=0;f<d.length;f++)k+=d[f].name+"\uff0c";k=k.substring(0,k.length-1);c.val("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a"+k)}else if(0<=c.val().indexOf("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a")){k="";for(f=0;f<d.length;f++)k+=d[f].name+"\uff0c";k=k.substring(0,k.length-1);c.val(c.val()+"\uff0c"+k)}});d.bind("UploadProgress",
function(b,d){a.find("#"+d.id+" i").html(d.percent+"%")});d.bind("Error",function(a,b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});d.bind("FileUploaded",function(b,d,c){b=jQuery.parseJSON(c.response).fileObj;a.find("#"+d.id+" i").html("100%");a.find("#"+d.id).data("fileObj",b).attr({"data-value":b.id,href:"/base/download/"+b.id})});
d.bind("UploadComplete",function(d,c){var e=[];a.find("#blog-attachments .entity-item a").each(function(a){a=$(this).data("fileObj");e.push(a)});b.postBlog(e)});$(b.el+" #blog-textarea").autosize({append:"\n"});$(this.el).off("focusout.BlogView",".j_postsize").on("focusout.BlogView",".j_postsize",function(a){a=$(this).val();TEAMS.ownCache.blog=a});$(this.el).on("click.BlogView","#btn-post",function(d){TEAMS.ownCache.blog="";if(0<a.find("#blog-attachments .entity-item a").length){d=$(b.el+" #blog-textarea").val();
if(""==$.trim(d)){e.notify("\u65e5\u62a5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");return}b.uploader.start()}else b.postBlog();return!1});$(this.el).off("keyup.BlogView","#blog-textarea").on("keyup.BlogView","#blog-textarea",function(a){13===a.keyCode&&a.ctrlKey&&($(b.el+" #btn-post").trigger("click.BlogView"),a.preventDefault());a=$(this).val();var d="",d=0==a.length?"":0<a.length&&1E3>=a.length?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+(1E3-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+(a.length-1E3)+"\u5b57";$(b.el+
" .j_post-tip").html(d);1E3<a.length&&e.notify("\u65e5\u62a5\u5185\u5bb9\u8d85\u8fc71000\u5b57")})},render:function(){},postBlog:function(b){var a=this,d=this.model,g=$(a.el+" #blog-textarea").val(),c=$(a.el+" #blog-textarea").attr("placeholder");g==c&&(g="");if(1E3<g.length)e.notify("\u65e5\u62a5\u5185\u5bb9\u8fc7\u957f\uff0c\u5355\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc71000\u5b57"),$(a.el+" #blog-textarea").focus();else if(""==$.trim(g))e.notify("\u65e5\u62a5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),$(a.el+
" #blog-textarea").focus();else if(!g.isBlank()||b)$(a.el+" #blog-textarea").val("").trigger("autosize.resize"),d.post({content:g,attachments:b},function(b){b.errorMessage?e.notify(b.errorMessage):"entitybox-container"==this.el?(e.notify("\u53d1\u5e03\u6210\u529f!"),a.callback&&a.callback()):($(a.el).find("#blog-textarea").val("").trigger("autosize.resize"),a.callback&&a.callback(b.blog),e.notify("\u53d1\u5e03\u6210\u529f!"),$(a.el).find("#blog-attachments").empty(),$("#guide-div").addClass("hide"))})},
remove:function(){$(this.el).off(".BlogView");this.uploader&&(this.uploader.destroy(),this.uploader=null);this.inviteModalView&&(this.inviteModalView.remove(),this.inviteModalView=null)}});m.exports=h});
define("teams/blog/blogview","teams/face/emojiarea teams/utils teams/component/filter teams/blog/blogmodel teams/component/commentview teams/component/validation teams/blog/blogpostviewnew teams/component/usersummaryview teams/feed/eteamscounter teams/base/preview".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/component/filter"),b=h("teams/blog/blogmodel"),a=h("teams/component/commentview");h("teams/component/validation");var d=h("teams/blog/blogpostviewnew");
h("teams/component/usersummaryview");var g=h("teams/feed/eteamscounter"),l=h("teams/base/preview"),n={};h=Backbone.View.extend({el:"#blog-center",viewArray:[],unreadFlag:!1,initialize:function(a){f($);this.userId=a.userId?a.userId:TEAMS.currentUser.id;this.layout=a.type?a.type:"myblog";this.el=a.el?a.el:this.el;this.model=new b(a);this.arr=[]},delegateEvents:function(){var b=this,d=b.model,l=$(b.el);$(this.el).on("click.BlogView",".js_blogimgs .js_blog_atta_image a",function(a){var b=$(this).parent().parent(),
d=$(this).attr("data-url"),g={_method:"delete"};e.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(a){a&&$.ajax({type:"POST",dataType:"json",data:g,url:d,success:function(a){b.remove();e.notify("\u6570\u636e\u5df2\u5220\u9664")}})})});$(this.el).on("click.BlogView","#myblog",function(a){b.userId&&b.userId!=TEAMS.currentUser.id||(b.dropdownFilter&&b.dropdownFilter.resetArray(),$(".blog-nav li").removeClass("active"),$(this).addClass("active"),b.userId=TEAMS.currentUser.id,b.endDate=void 0,
b.model.page.pageNo=1,b.renderMyblog(),b.reScrollBar("top"))});$(this.el).on("click.BlogView","#people",function(a){l.find("#blog-filter").removeClass("hide");b.userId&&b.userId!=TEAMS.currentUser.id||(b.users=[],b.dropdownFilter&&b.dropdownFilter.resetArray(),$(".blog-nav li").removeClass("active"),$(this).parent().addClass("active"),b.endDate=void 0,b.model.page.pageNo=1,b.renderPeople(),b.reScrollBar("top"))});$(this.el).on("click.BlogView",".j_search",function(a){$(".blog-nav li").removeClass("active");
b.model.page.pageNo=1;b.renderKeywords();b.reScrollBar("top")});$(this.el).on("keyup.BlogView","#blogsearch-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&(b.replay&&(b.replay.remove(),b.replay=null),$(".blog-nav li").removeClass("active"),b.model.page.pageNo=1,b.renderKeywords(),b.reScrollBar("top"))});$("#blog-filter").off("mouseenter.BlogView").on("mouseenter.BlogView",function(a){$(this).addClass("open");var d=$(this).attr("data-toggle");b.dropdownFilter||(b.dropdownFilter=
new c({el:d,module:"blog",targetObj:$(this),userId:TEAMS.currentUser.id}),b.dropdownFilter.render(a));a=setTimeout(function(){$(d).slideDown("fast")},500);$(this).data("showTimer",a)}).off("mouseleave.BlogView").on("mouseleave.BlogView",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100)}).off("filter.BlogView").on("filter.BlogView",function(a){b.replay&&(b.replay.remove(),b.replay=
null);$(".blog-nav li").removeClass("active");$("#blog-filter").addClass("active");a=$("#blog-filter").data("data-filter");b.users=a?JSON.parse("{"+a+"}").primarys:[];b.endDate=void 0;b.model.page.pageNo=1;b.renderPeople();b.reScrollBar("top")});$("#blog-datepicker").off();e.datepicker({el:"#blog-datepicker",callback:function(a){var d=b.layout;"unread"!=d&&"commentme"!=d&&"replayme"!=d&&(a=a.date,Date.create(a).is("today")||Date.create(a).isBefore("today")?$("#blog-datepicker").trigger("datepicker",
a):e.notify("\u67e5\u8be2\u5f53\u65e5\u548c\u5f53\u65e5\u4e4b\u524d\u7684\u65e5\u671f"))}});$("#blog-datepicker").trigger("focusin.datePicker");$("#blog-datepicker").off("datepicker").on("datepicker.BlogView",function(a,g){b.endDate=g.format("{yyyy}-{MM}-{dd}");$(this).parents(".j_dropDownMenu").slideUp(100);$(this).parents(".j_dropdownMenuToggle").removeData("showTimer");d.page.pageNo=1;b.renderFilter();b.reScrollBar("top")});$(this.el).on("click.BlogView",".j_blogsMore",function(a){d.page.pageNo++;
b.renderFilter(!0)});$(this.el).on("click.BlogView","#other-group li.group",function(a){a=$(this).parents(".j_blogDataContainer");var g=$(this).parents(".j_blogUserContainer"),c=$(this).parents(".j_otherBlogPanel");a=a.data("date");g=g.attr("id");c.find(".j_otherBlogsContainer .j_blogRecordsList").empty();c.find(".j_otherMore").data("pageNo",1);$(this).parent().find(".group.active").removeClass("active");$(this).addClass("active");var e=$(this).attr("group");d.other(g,a,e,1,function(a){b.renderPage(a,
c)})});$(this.el).on("click.BlogView",".j_otherMore",function(a){a=$(this).parents(".j_blogDataContainer").data("date");var g=$(this).parents(".j_blogUserContainer").attr("id"),c=$(this).parents(".j_otherBlogPanel"),e=$(this).parents(".j_otherBlogPanel").find(".group.active").attr("group"),l=c.find(".j_otherMore").data("pageNo");l++;c.find(".j_otherMore").data("pageNo",l);d.other(g,a,e,l,function(a){b.renderPage(a,c)})});$(this.el).on("click.BlogView","#commentMine",function(){b.removeCommentView();
$(".blog-nav li").removeClass("active");$(this).parent().addClass("active");l.find("#blog-filter").addClass("hide");b.model.page.pageNo=1;b.unreadFlag=!1;b.renderCommentMe();b.reScrollBar("top")});$(this.el).on("click.BlogView","#commentMine-unread",function(){0!=$(this).find("i").data("count")&&(b.removeCommentView(),$(".blog-nav li").removeClass("active"),$(this).parent().addClass("active"),b.model.page.pageNo=1,b.unreadFlag=!0,b.renderCommentMe(),b.reScrollBar("top"))});$(this.el).on("click.BlogView",
"#replayMine",function(){b.removeCommentView();$(".blog-nav li").removeClass("active");$(this).parent().addClass("active");l.find("#blog-filter").addClass("hide");b.model.page.pageNo=1;b.unreadFlag=!1;b.renderReplayMe();b.reScrollBar("top")});$(this.el).on("click.BlogView","#replayMine-unread",function(){0!=$(this).find("i").data("count")&&(b.removeCommentView(),$(".blog-nav li").removeClass("active"),$(this).parent().addClass("active"),b.model.page.pageNo=1,b.unreadFlag=!0,b.renderReplayMe(),b.reScrollBar("top"))});
$(this.el).on("click.BlogView","#unreadBlog",function(){b.removeCommentView();$(".blog-nav li").removeClass("active");$(this).parent().addClass("active");l.find("#blog-filter").addClass("hide");b.model.page.pageNo=1;b.renderUnread();b.reScrollBar("top")});$(this.el).on("click.BlogView",".j_blogAdd,.j_blogEdit",function(a){var d=$(this);if(!b.isBlogHidden(this)){var g=b.findBlogbody(this);g.addClass("hide").next().removeClass("hide");var c=g.next().find(".j_blogTextarea");c.focus();$(a.target).hasClass("j_blogEdit")&&
(g=g.data("content"),c.val(g).trigger("autosize.resize"));$(a.target).hasClass("j_blogAdd")&&(d.parents(".j_blog-action").addClass("hide-im"),d.addClass("hide-im"),d.attr("bj","bujiao"))}});$(this.el).on("click.BlogView",".j_blogBodyEditPostBtn",function(){var a=$(this),d="#"+a.parent().parent().find(".j_attachment").attr("id"),g=a.parent().parent().parent().find(".j_blogTextarea"),c=a.parents(".j_blogDataContainer").attr("id"),c=n[c];if(0<$(d).find(".entity-item a").length){d=g.val();if(""==$.trim(d)){e.notify("\u65e5\u62a5\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");
return}c.start()}else b.postBlog(null,g.attr("id"));a.parents(".j_blog").find(".j_blogAdd").removeAttr("bj");return!1});$(this.el).on("click.BlogView",".j_blogBodyEditCancelBtn",function(){var a=$(this);a.parents(".j_blogBodyEdit").addClass("hide");a.parents(".j_blogBodyEdit").prev().removeClass("hide").html(a.data("previousContent"));var b=a.parents(".j_blog").find(".j_blogAdd").attr("bj");""!=b&&"undefined"!=typeof b&&(a.parents(".j_blog").find(".j_blogAdd").removeClass("hide-im"),a.parents(".j_blog").find(".j_blog-action").removeClass("hide-im"),
a.parents(".j_blog").find(".j_blogAdd").removeAttr("bj"))});$(this.el).on("keydown.BlogView",".j_blogTextarea",function(a){var b=$(this);13==a.keyCode&&a.ctrlKey?(b.parent().next().find(".j_blogBodyEditPostBtn").trigger("click.BlogView"),a.preventDefault()):27==a.which&&b.parent().next().find(".j_blogBodyEditCancelBtn").trigger("click.BlogView")});$(this.el).on("keyup.BlogView",".j_blogTextarea",function(a){2E3<$(this).val().length&&(e.notify("\u65e5\u62a5\u5185\u5bb9\u8d85\u8fc72000\u5b57"),$(this).trigger("autosize.resize"))});
$(this.el).on("click.BlogView",".j_icon-down-sys",function(a){var b=$(this);a=b.attr("day");b=b.attr("user-id");a=$("#blogs-container #"+a+" #"+b+" #j_blogSys");a.toggle("fast");a.parent().find(".j_panel-heading").find("i").toggleClass("on")});$(this.el).on("click.BlogView",".j_commentHead",function(a){a=$(this);var b=a.attr("day"),d=a.attr("user-id");a.attr("blog-id");a=$("#blogs-container #"+b+" #"+d+" .j_blogComments");a.toggle();a.find("#comment-textarea").focus();a.parent().find(".j_commentHead").find("i").toggleClass("on")});
$(this.el).on("click.BlogView",".j_blogComment",function(d){var g=$(this),c=b.layout;d=g.attr("day");var e=g.attr("user-id"),g=g.attr("blog-id");if(d&&e&&g){var l=$("#blogs-container #"+d+" #"+e+" .j_blogComments"),n=$("#blogs-container #"+d+" #"+e+" .j_blogCommentPanel");"commentme"==c||"replayme"==c?(l.find("#comment-textarea").focus(),$(".j_blogConScr").mCustomScrollbar("scrollTo",n)):0<l.find("#comment").length?(l.removeClass("hide"),l.css("display","block"),l.find("#comment-textarea").focus(),
$(".j_blogConScr").mCustomScrollbar("scrollTo",n)):(c=new a({targetId:g,module:"blog",parentEl:"#blogs-container #"+d+" #"+e,container:".j_blogComments"}),c.render(),n.removeClass("hide"),n.find(".j_commentHead").attr("user-id",e).attr("day",d).attr("blog-id",g),n.find("#comment-textarea").focus(),$(".j_blogConScr").mCustomScrollbar("scrollTo",n),b.viewArray.push(c))}});$(this.el).on("addComment.BlogView",".j_blogCommentPanel",function(a){a=$(this);if(a.find(".j_commentCountt").hasClass("hide"))a.find(".j_commentCountt").removeClass("hide"),
a.find(".j_count").html(1);else{var b=a.find(".j_count").html(),b=b||0;b++;a.find(".j_count").html(b)}});$(this.el).on("mouseenter.BlogView",".j_markBlogRead",function(a){var c=$(this);d.readOne(c.find(".j_blog").attr("id"),c.find(".new").data("type"),function(a){c.find(".new").remove();c.removeClass("j_markBlogRead");g.markBlogRead(b.layout)})});$(this.el).on("click.BlogView","#make-all-read",function(a){0<parseInt($("#unreadBlog").html())&&e.confirm("\u786e\u8ba4\u5168\u90e8\u8bbe\u7f6e\u5df2\u8bfb\uff1f",
function(a){a&&d.readAll(function(a){a&&($("#blogs-container").empty(),$(".j_blogsMore").hide(),$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show(),$("#unreadBlog").html(""),e.notify("\u8bbe\u7f6e\u6210\u529f"),$("#j_dropMessage .j_unreadblog span").html(""),g.totaling())})})});$(b.el).on("click.BlogView","#guide-blog-create",function(a){l.find(".j_blog-post-new").addClass("active").find(".j_blog-post-handle-new").slideDown(200);l.find(".j_blog-post-new #blog-textarea-new").focus()});
l.find(".j_blog-post-new").css("display","block");$(b.el).off("click.BlogView",".j_postsize-new").on("click.BlogView",".j_postsize-new",function(a){$(this).parents(".j_blog-post-new").addClass("active").find(".j_blog-post-handle-new").slideDown(200)});$("body").off("click.BlogView").on("click.BlogView",function(a){a=$(a.target);$(a).hasClass("router")||$(a).hasClass("j_postsize-new")||$(a).hasClass("entitybox-toggle")||$(a).hasClass("j_blogComment")||0<$(a).parents(".j_modal-content").length||0<$(a).parents(".j_blog-post-new").length||
0<$(a).parents("#blog-attachments-new").length||0<$(a).parents(".guide-div").length||$(a).hasClass("close")&&$(a).parent().hasClass("entity-item")||l.find(".j_blog-post-new").removeClass("active").find(".j_blog-post-handle-new").slideUp(200)});$(b.el).off("keyup",".j_postsize-new").on("keyup",".j_postsize-new",function(a){$(this).parents(".blog-post").addClass("active")})},render:function(){var a=this;$(a.el).find("#blogsearch-keywords").val("");a.blogpostViewNew=new d({container:"#blog-post",callback:function(b){a.renderBlog(b)}});
$(a.el).find(".j_detail-blog-header-new").addClass("hide");$("#make-all-read").addClass("hide");$("#blog-loading").show();a.userId==TEAMS.currentUser.id&&($(".blog-nav li").removeClass("active"),$("#myblog").addClass("active"));a.renderBlogByType(!0);$(".blog-nav li").removeClass("active");$(".blog-nav li a."+this.layout).parent().addClass("active");var b=TEAMS.ownCache&&TEAMS.ownCache.blog;""!=b&&"undefined"!=typeof b&&$(a.el).find(".j_postsize-new").val(b);$(a.el).find(".j_blog-post-new").addClass("active");
$(a.el).find("#blog-textarea-new").focus()},renderBlogByType:function(a){a=$(this.el);var b=this.layout;this.removeCommentView();$(".blog-nav li").removeClass("active");$(this).parent().addClass("active");this.model.page.pageNo=1;"myblog"===b?(this.renderMyblog(),a.find(".j_dropdownMenuToggle").removeClass("hide")):"people"===b?(a.find("#blog-filter").removeClass("hide"),a.find(".j_dropdownMenuToggle").removeClass("hide"),a.find(".j_no-more").addClass("hide"),this.renderPeople()):"commentme"===b?
(a.find("#blog-filter").addClass("hide"),a.find(".j_dropdownMenuToggle").addClass("hide"),a.find(".j_no-more").addClass("hide"),this.unreadFlag=!1,this.renderCommentMe()):"replayme"===b?(a.find("#blog-filter").addClass("hide"),a.find(".j_dropdownMenuToggle").addClass("hide"),a.find(".j_no-more").addClass("hide"),this.unreadFlag=!1,this.renderReplayMe()):"unread"===b?($(".blog-nav li").removeClass("active"),$(this).parent().addClass("active"),a.find("#blog-filter").addClass("hide"),a.find(".j_dropdownMenuToggle").addClass("hide"),
a.find(".j_no-more").addClass("hide"),this.renderUnread()):"mainline"===b&&this.renderMyblog();this.reScrollBar("top")},reScrollBar:function(a){a&&($("#blogs-wrapper").mCustomScrollbar("update"),$("#blogs-wrapper").mCustomScrollbar("scrollTo",a))},findBlogbody:function(a){return $(a).parents(".j_blogDataContainer").find(".j_blog-body")},isBlogHidden:function(a){a=$(a).parents(".j_blogDataContainer").find(".j_blog-body");return a.is(":visible")?!1:(a.removeClass("hide").next().addClass("hide"),!0)},
findBlogContent:function(a,b){$(a);var d=$(b),g=d.val(),d=d.attr("placeholder");g==d&&(g="");return g},renderFilter:function(a){var b=this.layout;this.removeCommentView();switch(b){case "myblog":this.renderMyblog(a);break;case "people":this.renderPeople(a);break;case "unread":this.renderUnread(a);break;case "commentme":this.renderCommentMe(a);break;case "replayme":this.renderReplayMe(a);break;case "keywords":this.renderKeywords(a)}},renderMyblog:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();
$(".j_noResult").hide();$(this.el).find("#blog-filter").addClass("hide");var b=this,d=this.model;b.layout="myblog";$("#make-all-read").addClass("hide");$("#blogs-wrapper").removeClass("people").addClass("myblog");a||(1==d.page.pageNo,$("#blogs-container").empty());d.blog(b.userId,b.endDate,function(g){b.renderCount(g);var c=g.blogList;b.renderUserDayBlog(c,a);1==d.page.pageNo&&c&&0==c.length?$(this.el).find(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).removeClass("hide"):$(this.el).find(".j_noResult").addClass("hide");
c&&10==c.length&&$("#blogs-wrapper .j_blogsMore").show();g.guide&&$("#guide-div").removeClass("hide")})},renderPeople:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();$(".j_noResult").hide();$("#guide-div").addClass("hide");var b=this,d=this.model;b.layout="people";$("#make-all-read").addClass("hide");$("#blogs-wrapper").removeClass("myblog").addClass("people");a||(1==this.model.page.pageNo,$("#blogs-container").empty());d.people(b.users,b.endDate,function(a){b.renderCount(a);
b.renderUserDayBlog(a.blogList);1!=d.page.pageNo||a.blogList&&0!=a.blogList.length?$(".j_noResult").hide():$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show();a.blogList&&10==a.blogList.length&&$("#blogs-wrapper .j_blogsMore").show()})},renderAttachments:function(a,b){for(var d=a.attachments||[],g=a.imageFiles||[],c=0;c<d.length;c++){var n=d[c];b.children(".js_blogfiles").prepend(e.template("base.attachment",n));b.find("#"+n.id).children().addClass("remoteDownload").data("dlid",
n.id);(new l({container:b,afterJqObj:b.find("#"+n.id).children(),fileObj:n})).render()}for(c=0;c<g.length;c++)if((d=g[c])&&d.big&&d.image&&d.small){var n=d.id,f=d.bigUrl,h=d.imageUrl,y=d.smallUrl,z=[];z.push(f);z.push(h);z.push(y);var A=$("#blog-atta-image-clone").clone(!0);A.find("span").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+f+"' data-artZoom-source\x3d'/base/download/"+h+"' src\x3d'/base/download/"+y+"'\x3e");A.append("\x3cp\x3e"+d.name+" \x3ca data-url\x3d/blog/deleteAttachments/"+
n+".json\x3e\u5220\u9664  \x3c/a\x3e\x3c/p\x3e");A.find("a").data({idArray:z,imageId:h});A.find(".artZoom").artZoom();A.removeClass("hide");A.removeAttr("id");b.children(".js_blogimgs").prepend(A)}a.creator.id!=TEAMS.currentUser.id&&(b.find(".entity-item").attr("undeletable",!0),b.find(".js_blogimgs .js_blog_atta_image a").remove())},renderKeywords:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();$(".j_noResult").hide();$("#make-all-read").addClass("hide");$("#guide-div").addClass("hide");
var b=this,d=this.model;b.layout="keywords";$("#blogs-wrapper").removeClass("myblog").addClass("keyword");a||(1==d.page.pageNo,$("#blogs-container").empty());a={};var g=$("#blogsearch-keywords").val().trim();g&&(a.keywords=g.replace(/\\/g,"\\\\"));d.queryKeywords(a,function(a){b.renderUserDayBlog(a.result);1==a.pageNo&&0==a.result.length?$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show():$(".j_noResult").hide();var d=a.totalCount,c=parseInt(d/a.pageSize);0<d%a.pageSize&&c++;a.totalPages=
c;a.hasNext=a.pageNo+1<=c;a.hasNext?$("#blogs-wrapper .j_blogsMore").show():$("#blogs-wrapper .j_blogsMore").hide();0<a.result.length&&!a.hasNext?$("#blogs-wrapper .j_no-more").removeClass("hide"):$("#blogs-wrapper .j_no-more").addClass("hide");g&&$(b.el).find(".j_blog-body").highlight(g)})},renderUnread:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();$(".j_noResult").hide();$("#guide-div").addClass("hide");$("#date-filter").remove();var b=this,d=this.model;$("#make-all-read").removeClass("hide");
b.layout="unread";$("#blogs-wrapper").removeClass("myblog").addClass("people");a||(1==d.page.pageNo,$("#blogs-container").empty(),$("#blogs-wrapper .j_blogsMore").data("blogDate",""),$("#blogs-wrapper .j_blogsMore").data("createTime",""));a=$("#blogs-wrapper .j_blogsMore").data("blogDate");var g=$("#blogs-wrapper .j_blogsMore").data("createTime"),c={};c.date=a?a:"";c.createTime=g?g:"";d.queryUnread(c,function(a){b.renderCount(a);b.renderUserDayBlog(a.blogPage.result);1==a.blogPage.pageNo&&0==a.blogPage.result.length?
$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show():$(".j_noResult").hide();10==a.blogPage.result.length?$("#blogs-wrapper .j_blogsMore").show():$("#blogs-wrapper .j_blogsMore").hide()})},renderCommentMe:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();$(".j_noResult").hide();$("#guide-div").addClass("hide");$("#date-filter").remove();var b=this,d=this.model;b.layout="commentme";$("#make-all-read").addClass("hide");$("#blogs-wrapper").removeClass("people").addClass("myblog");
a||(1==d.page.pageNo,$("#blogs-container").empty(),$("#blogs-wrapper .j_blogsMore").data("commentTime",""));a=$("#blogs-wrapper .j_blogsMore").data("commentTime");var g={};g.commentTime=a?a:"";g.unreadFlag=b.unreadFlag;d.queryCommentMe(g,function(a){b.renderCount(a);b.renderUserDayBlog(a.blogPage.result);1==a.blogPage.pageNo&&0==a.blogPage.result.length?$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show():$(".j_noResult").hide();b.unreadFlag?10==a.blogPage.result.length?$("#blogs-wrapper .j_blogsMore").show():
$("#blogs-wrapper .j_blogsMore").hide():a.blogPage.hasNext?$("#blogs-wrapper .j_blogsMore").show():$("#blogs-wrapper .j_blogsMore").hide()})},renderReplayMe:function(a){$("#blog-loading").show();$("#blogs-wrapper .j_blogsMore").hide();$(".j_noResult").hide();$("#guide-div").addClass("hide");$("#date-filter").remove();var b=this,d=this.model;b.layout="replayme";$("#make-all-read").addClass("hide");$("#blogs-wrapper").removeClass("people").addClass("myblog");a||(1==d.page.pageNo,$("#blogs-container").empty(),
$("#blogs-wrapper .j_blogsMore").data("commentTime",""));a=$("#blogs-wrapper .j_blogsMore").data("commentTime");var g={};g.commentTime=a?a:"";g.unreadFlag=b.unreadFlag;d.queryReplayMe(g,function(a){b.renderCount(a);b.renderUserDayBlog(a.blogPage.result);1==a.blogPage.pageNo&&0==a.blogPage.result.length?$(".j_noResult").html($(b.el).find(".j_blog_"+b.layout).html()).show():$(".j_noResult").hide();b.unreadFlag?10==a.blogPage.result.length?$("#blogs-wrapper .j_blogsMore").show():$("#blogs-wrapper .j_blogsMore").hide():
a.blogPage.hasNext?$("#blogs-wrapper .j_blogsMore").show():$("#blogs-wrapper .j_blogsMore").hide()})},renderCount:function(a){"unread"==this.layout&&($(".blog-nav li").removeClass("active"),0<a.unReadCount?$(".blog-nav li #unreadBlog").parent().addClass("active"):0<a.commentMeCount?($(".blog-nav li #commentMine").parent().addClass("active"),$("#make-all-read").addClass("hide"),this.layout="commentme"):0<a.replayMeCount?($(".blog-nav li #replayMine").parent().addClass("active"),$("#make-all-read").addClass("hide"),
this.layout="replayme"):$(".blog-nav li #unreadBlog").parent().addClass("active"));0<a.unReadCount&&$("#unreadBlog").html(a.unReadCount).data("count",a.unReadCount);0<a.commentMeCount&&($("#commentMine-unread").html(a.commentMeCount).data("count",a.commentMeCount),$("#commentMine-unread").show());0<a.replayMeCount?($("#replayMine-unread").html(a.replayMeCount).data("count",a.replayMeCount),$("#replayMine-unread").show()):$("#replayMine-unread").hide()},renderBlog:function(a,b){var d=a.creator,g=Date.create(a.blogTime).format("{yyyy}{MM}{dd}"),
c=$("#"+g+" #"+d.id),e=a.content;c.find(".time").html(Date.create(a.createTime).format("{HH}:{mm}:{ss}"));c.find(".j_blog-body").data("content",e);e=this.generateBlog(a);c.find(".j_blog").attr("id",a.id);c.find(".j_blog-body").data("previousContent",e).html(e).removeClass("blog-no-blog");d.id==TEAMS.currentUser.id&&c.find(".j_blogEdit").removeClass("hide-im");c.find(".j_blogComment").removeClass("hide-im").attr("user-id",d.id).attr("day",g).attr("blog-id",a.id);c.find(".j_blogAdd").addClass("hide-im");
c.find(".j_blog-action").removeClass("hide-im");b||this.renderAttachments(a,c.find(".js_blogallfiles"))},renderUserDayBlog:function(b){if(b){for(var d=this,g=this.layout,c=0;c<b.length;c++){var l=b[c],f=l.user,h=l.blog,x=Date.create(l.date),y=x.format("{yyyy}{MM}{dd}"),z=x.format("{yyyy}\u5e74{MM}\u6708"),A=x.format("{yyyy}{MM}"),B=x.format("{yyyy}\u5e74{MM}\u6708{dd}\u65e5"),E=x.format("{yyyy}-{MM}-{dd}"),D="",C=$("#blogUserContainerClone").clone();"people"==g||"replayme"==g||"keywords"==g||"unread"==
g?(D=$("#blogDateContainerClone").clone().data("date",l.date),z="",z=x.is("today")?"\u4eca\u5929":x.is("yesterday")?"\u6628\u5929":x.format("{Weekday}","zh-CN"),D.attr("id",y),1>$("#blogs-container").find("#"+E).length&&D.find(".j_blog-month").html(z+"\x26nbsp;\x26nbsp;\x26nbsp;"+B).attr("id",E).removeClass("hide"),f.avatar&&f.avatar.p3&&D.find(".j_avatar img").attr("src","/base/download/"+f.avatar.p3),D.find(".j_avatar").addClass("usercard-toggle").attr("userid",f.id),D.find(".j_avatar").removeClass("hide"),
D.find(".j_blog-date").addClass("hide"),$("#blogs-container").append(D)):(D=$("#blogs-container").find("#"+y),1>D.length&&(D=$("#blogDateContainerClone").clone().data("date",l.date),D.find("span.date").html(x.format("short","zh-CN")),1>$("#blogs-container").find("#"+A).length&&D.find(".j_blog-month").html(z).attr("id",A).removeClass("hide"),x.is("today")?(D.find(".j_blog-date").addClass("today"),D.attr("id",y).find(".day").html("\u4eca\u5929")):x.is("yesterday")?D.attr("id",y).find(".day").html("\u6628\u5929"):
D.attr("id",y).find(".day").html(x.format("{d}\u53f7","zh-CN")),$("#blogs-container").append(D)),f.avatar&&f.avatar.p3&&C.find(".j_avatar img").attr("src","/base/download/"+f.avatar.p3));C.attr("id",f.id);C.find(".name").html(f.username).attr("userid",f.id);C.find(".j_blogTextarea").autosize({append:"\n"});B=g;"commentme"!=g&&"replayme"!=g&&(C.find(".j_blogComments").empty(),B="unread");h?(x=d.generateBlog(h),E=h.client,C.find(".j_blog").attr("id",h.id),C.find(".time").html(Date.create(h.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")),
h.read?C.removeClass("mark_blog_read"):C.find(".new").removeClass("hide").data("type",B),C.find(".j_blog-body").data("content",h.content).data("previousContent",x).html(x),E&&"pc"!=E&&h.address&&""!=h.address&&(C.find(".blog-client").removeClass("hide").html("\u6765\u81ea "+h.client+"\u5ba2\u6237\u7aef"),C.find(".blog-coord").removeClass("hide"),C.find(".blog-address").html(h.address)),f.id==TEAMS.currentUser.id&&C.find(".j_blogEdit").removeClass("hide-im"),C.find(".j_blogComment").removeClass("hide-im").attr("user-id",
f.id).attr("day",y).attr("blog-id",h.id),C.find(".j_blog-action").removeClass("hide-im"),d.renderAttachments(h,C.find(".js_blogallfiles"))):(C.find(".time").html(x.format("{yyyy}-{MM}-{dd}")),C.find(".j_blog-body").html("\u65e0\u65e5\u62a5\u5185\u5bb9\u3002").addClass("blog-no-blog"),C.removeClass("mark_blog_read"),f.id==TEAMS.currentUser.id&&Date.create().format("{yyyy}{MM}{dd}")!=y&&(C.find(".j_blog-action").removeClass("hide-im"),C.find(".j_blogAdd").removeClass("hide-im")));D.find(".j_blog-item").append(C);
if(h&&h.commentCount){D=C.find(".j_blogCommentPanel");if("commentme"==g||"replayme"==g)var F=!1,m=!0,H=l.pageComment;x=new a({targetId:h.id,module:"blog",parentEl:"#blogs-container #"+y+" #"+f.id,container:".j_blogComments",hideInput:F,showComment:m,pageComment:H});x.render();D.removeClass("hide");D.find(".j_commentHead").attr("user-id",f.id).attr("day",y).attr("blog-id",h.id);D.find(".j_panel-title .j_commentCountt").removeClass("hide");D.find(".j_panel-title .j_count").html(h.commentCount);d.viewArray.push(x)}l.counts&&
0<l.counts.allCount&&(C.find(".j_blog-records-panel").removeClass("hide"),d.renderOtherBlog(l,C.find(".j_blog-records-panel")));l="#"+C.find(".j_blog-post-btns").attr("id","blog-post-"+y).attr("id");f="#"+C.find("#blog-attach-later").attr("id","blog-attach-"+y).attr("id");C.find(".j_blogTextarea").attr("id","blog-textarea-"+y).attr("id");C.find("#blog-attachments-later").attr("id","blog-attachments-"+y).attr("id");$("#blogs-wrapper");n[y]=this.uploader=new plupload.Uploader({runtimes:"html5,flash",
file_data_name:"data",browse_button:l+" "+f,container:l,max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?module\x3dblog\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});n[y].init();n[y].bind("FilesAdded",function(a,b){var d=$(this)[0].settings.container,g="#"+$(d).prevAll().find(".j_blogTextarea").attr("id"),c="#"+$(d).find(".attachment").attr("id");$.each(b,function(a,b){$(d).find(c).append(e.template("base.newattachment",b))});n[y].refresh();
g=$(g);if(!g.val()){for(var l="",k=0;k<b.length;k++)l+=b[k].name+"\uff0c";l=l.substring(0,l.length-1);g.val("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a"+l)}else if(0<=g.val().indexOf("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a")){l="";for(k=0;k<b.length;k++)l+=b[k].name+"\uff0c";l=l.substring(0,l.length-1);g.val(g.val()+"\uff0c"+l)}});n[y].bind("UploadProgress",function(a,b){var d=$(this)[0].settings.container;$(d).find("#"+b.id+" i").html(b.percent+"%")});n[y].bind("Error",function(a,b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+
a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});n[y].bind("FileUploaded",function(a,b,d){a=jQuery.parseJSON(d.response).fileObj;d=$(this)[0].settings.container;$(d).find("#"+b.id+" i").html("100%");$(d).find("#"+b.id).data("fileObj",a).attr({"data-value":a.id,href:"/base/download/"+a.id})});n[y].bind("UploadComplete",function(a,b){var g=[],c=$(this)[0].settings.container;$(c).find(".entity-item a").each(function(a){a=
$(this).data("fileObj");g.push(a)});d.postBlog(g,c)})}b&&0<b.length&&(b=b[b.length-1],l=Date.create(b.date),$("#blogs-wrapper .j_blogsMore").data("blogDate",l.format("{yyyy}-{MM}-{dd}")),b.blog&&(g=Date.create(b.blog.createTime),$("#blogs-wrapper .j_blogsMore").data("createTime",g.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")),b=Date.create(b.blog.lastCommentTime),$("#blogs-wrapper .j_blogsMore").data("commentTime",b.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))));$("#blog-loading").hide();10>=$(this.el).find(".j_blogDataContainer").length-
1&&$(this.el).find(".j_postsize-new").focus()}else $("#blogs-wrapper .j_blogsMore").hide(),$("#blog-loading").hide()},renderOtherBlog:function(a,b){var d=a.counts,g=a.user,c=Date.create(a.date).format("{yyyy}{MM}{dd}");if(0<d.allCount){var e=$("#otherBlogsClone").clone().removeAttr("id");e.find("#all b").text(d.allCount);e.find(".j_icon-down-sys").attr("user-id",g.id).attr("day",c);0<d.task?e.find("#task b").text(d.task):e.find("#task").remove();0<d.document?e.find("#document b").text(d.document):
e.find("#document").remove();0<d.customer?e.find("#customer b").text(d.customer):e.find("#customer").remove();0<d.workflow?e.find("#workflow b").text(d.workflow):e.find("#workflow").remove();0<d.mainline?e.find("#mainline b").text(d.mainline):e.find("#mainline").remove();0<d.workreport?e.find("#workreport b").text(d.workreport):e.find("#workreport").remove();0<d.calendar?e.find("#calendar b").text(d.calendar):e.find("#calendar").remove();0<d.saleChance?e.find("#saleChance b").text(d.saleChance):e.find("#saleChance").remove();
0<d.production?e.find("#production b").text(d.production):e.find("#production").remove();b.append(e);this.renderPage(a.page,b)}},renderPage:function(a,b){for(var d=0;d<a.result.length;d++){var g=a.result[d],c=g.module,e=$("#otherBlogClone").clone(),l=this.generateBlog(g);e.attr("id",g.id);e.find(".other-body").html(l);switch(c){case "task":e.find("dfn.graph").addClass("mark-task");break;case "customer":e.find("dfn.graph").addClass("mark-crm");break;case "document":e.find("dfn.graph").addClass("mark-doc");
break;case "workflow":e.find("dfn.graph").addClass("mark-flow");break;case "mainline":e.find("dfn.graph").addClass("mark-mainline");break;case "workreport":e.find("dfn.graph").addClass("mark-report");break;case "calendar":e.find("dfn.graph").addClass("mark-agenda");break;case "saleChance":e.find("dfn.graph").addClass("mark-saleChance");break;case "production":e.find("dfn.graph").addClass("mark-production")}g=e.find(".other-body .time").text();e.find(".other-body .time").addClass("hide");e.find("p.time").text(g);
b.find(".j_otherBlogsContainer .j_blogRecordsList").append(e)}0==a.result.length&&(e=$("#otherBlogClone").clone(),e.find(".other-body").html('\x3cspan class\x3d"no-data"\x3e\u65e0\u6570\u636e\x3c/span\x3e'),b.find(".j_otherBlogsContainer .j_blogRecordsList").append(e));a.hasNext?b.find(".j_otherMore").removeClass("hide").data("pageNo",a.pageNo):b.find(".j_otherMore").addClass("hide")},generateBlog:function(a){var b=a.module;switch(a.type){case "blog":return a.content?$.faceConvert(e.initMessage(a.content)):
"";case "create":var d=[];switch(b){case "task":d.push("\u4efb\u52a1\uff1a  \u521b\u5efa\u4e86");break;case "document":return d.push("\u6587\u6863\uff1a   \u65b0\u589e\u4e86 "),d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e"),d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),d.join("");case "customer":d.push("\u5ba2\u6237\uff1a    \u521b\u5efa\u4e86 ");
break;case "saleChance":d.push("\u5546\u673a\uff1a    \u521b\u5efa\u4e86 ");break;case "production":d.push("\u4ea7\u54c1\uff1a    \u521b\u5efa\u4e86 ");break;case "workflow":d.push("\u5ba1\u6279\uff1a     \u53d1\u8d77\u4e86 ");break;case "mainline":d.push("\u9879\u76ee\uff1a      \u521b\u5efa\u4e86");break;case "workreport":d.push("\u62a5\u544a\uff1a      \u521b\u5efa\u4e86");break;case "calendar":return d.push("\u65e5\u7a0b\uff1a      \u521b\u5efa\u4e86"),d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+
this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"agenda"\x3e'+a.title+"\x3c/a\x3e"),d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),d.join("")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e");d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return d.join("");
case "comment":d=[];switch(b){case "task":d.push("\u4efb\u52a1\uff1a  ");break;case "document":d.push("\u6587\u6863\uff1a   ");break;case "customer":d.push("\u5ba2\u6237\uff1a    ");break;case "saleChance":d.push("\u5546\u673a\uff1a    ");break;case "production":d.push("\u4ea7\u54c1\uff1a    ");break;case "workflow":d.push("\u5ba1\u6279 \uff1a   ");break;case "mainline":d.push("\u9879\u76ee \uff1a   ");break;case "workreport":d.push("\u62a5\u544a \uff1a   ");break;case "calendar":return d.push("\u65e5\u7a0b \uff1a   "),
d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"agenda"\x3e'+a.title+"\x3c/a\x3e"),d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.content&&d.push('\x3cdiv class\x3d"comment mb-5"\x3e'+$.faceConvert(e.initMessage(a.content))+"\x3c/div\x3e"),d.join("")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+
a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e");d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");a.content&&d.push('\x3cdiv class\x3d"comment mb-5"\x3e'+$.faceConvert(e.initMessage(a.content))+"\x3c/div\x3e");return d.join("");case "finish":d=[];switch(b){case "task":d.push("\u5c06\u4efb\u52a1\uff1a  ")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+
b+'"\x3e'+a.title+"\x3c/a\x3e");d.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5b8c\u6210");d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return d.join("");case "reopen":d=[];switch(b){case "task":d.push("\u5c06\u4efb\u52a1\uff1a  ")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e");d.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210");
d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return d.join("");case "accept":return d=[],d.push("\u5ba1\u6279\uff1a     \u540c\u610f\u4e86"),d.push('\x3ca class\x3d"usercard-toggle j_entityslider-toggle filterSlip_js" userid\x3d"'+a.refCreator.id+'"\x3e'+a.refCreator.name+"\x3c/a\x3e"),d.push("\u521b\u5efa\u7684\u5ba1\u6279"),d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+
a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e"),d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),d.join("");case "reject":return d=[],d.push("\u5ba1\u6279\uff1a     \u9000\u56de\u4e86"),d.push('\x3ca class\x3d"usercard-toggle" userid\x3d"'+a.refCreator.id+'"\x3e'+a.refCreator.name+"\x3c/a\x3e"),d.push("\u521b\u5efa\u7684\u5ba1\u6279"),d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+
'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e"),d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),d.join("");case "closeml":d=[];switch(b){case "mainline":d.push("\u5c06\u9879\u76ee\uff1a  ")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e");d.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5173\u95ed");
d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return d.join("");case "openml":d=[];switch(b){case "mainline":d.push("\u5c06\u9879\u76ee\uff1a  ")}d.push('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+b+'"\x3e'+a.title+"\x3c/a\x3e");d.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u6253\u5f00");d.push('\x3cspan class\x3d"time"\x3e'+Date.create(a.createTime).format("{HH}:{mm}:{ss}")+
"\x3c/span\x3e");return d.join("")}},removeCommentView:function(){this.viewArray&&0<this.viewArray.length&&(this.viewArray.length=0)},postBlog:function(a,b){var d=this,g=this.model,c=b.substr(b.length-8,b.length),l=d.findBlogContent(this,"#blog-textarea-"+c);if(2E3<l.length)e.notify("\u65e5\u62a5\u5185\u5bb9\u8d85\u8fc72000\u5b57");else{var n=$("#blog-attach-"+c).parents(".j_blog").attr("id");if(!l.isBlank()||a)if(n)n={content:l,id:n,attachments:a},g.update(n,function(a){if(a.errorMessage)e.notify(a.errorMessage),
$("#blog-attach-"+c).parents(".j_blogBodyEdit").find(".j_blogTextarea").focus();else{var b=$("#blog-attach-"+c).parents(".j_blogDataContainer");b.find(".js_blog_atta_image").remove();$("#blog-attach-"+c).parents(".j_blogBodyEdit").addClass("hide");$("#blog-attach-"+c).parents(".j_blogBodyEdit").prev().removeClass("hide").html(l);b.find("#blog-attachments-"+c).find(".entity-item").remove();d.renderBlog(a.blog);e.notify("\u53d1\u5e03\u6210\u529f!")}});else{var f=$("#blog-attach-"+c).parents(".j_blogDataContainer"),
n={content:l,blogTime:Date.create(f.data("date")).format("{yyyy}-{MM}-{dd}"),attachments:a};g.post(n,function(a){a.errorMessage?(e.notify(a.errorMessage),$("#blog-attach-"+c).parents(".j_blogBodyEdit").find("textarea").focus()):($("#blog-attach-"+c).parents(".j_blogBodyEdit").addClass("hide"),$("#blog-attach-"+c).parents(".j_blogBodyEdit").prev().removeClass("hide").html(l),f.find("#blog-attachments-"+c).find(".entity-item").remove(),d.renderBlog(a.blog),e.notify("\u53d1\u5e03\u6210\u529f!"),$("#guide-div").addClass("hide"))})}}},
remove:function(){$(this.el).off(".BlogView");$(".j_blogTextarea").trigger("autosize.destroy");this.removeCommentView();this.header&&(this.header.remove(),this.header=null);this.uploader&&(this.uploader.destroy(),this.uploader=null);this.blogpostViewNew&&(this.blogpostViewNew.remove(),this.blogpostViewNew=null)}});m.exports=h});
define("teams/blog/weeklyblog",["teams/utils","teams/blog/blogmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/blog/blogmodel");h=Backbone.View.extend({initialize:function(c){this.el=c.container;this.userId=c.userId;this.date=c.date;this.callback=c.callback;this.print=c.print;$(this.el).html(f.template("blog.weeklyblog"));this.model=new e;this.arr=[]},delegateEvents:function(){var c=this;$(this.el).on("click.weeklyblog",".other-more",function(b){b=$(this).parents(".blog-date-container").data("date");
var a=$(this).parents(".blog-user-container").attr("id"),d=$(this).parents(".other-blog-panel"),g=$(this).parent().find(".group.active").attr("group"),e=d.find(".other-more").data("pageNo");e++;d.find(".other-more").data("pageNo",e);c.model.other(a,b,g,e,function(a){c.renderPage(a,d)})});$(this.el).on("click.BlogView","#other-group li.group",function(b){b=$(this).parents(".blog-date-container");var a=$(this).parents(".blog-user-container"),d=$(this).parents(".other-blog-panel");b=b.data("date");a=
a.attr("id");d.find(".other-blogs-container .blog-records-list").empty();d.find(".other-more").data("pageNo",1);$(this).parent().find(".group.active").removeClass("active");$(this).addClass("active");var g=$(this).attr("group");c.model.other(a,b,g,1,function(a){c.renderPage(a,d)})});$(this.el).on("click.BlogView",".j_icon-down-sys",function(b){var a=$(this);b=a.attr("day");a=a.attr("user-id");b=$("#blogs-container #"+b+" #"+a+" #report-other-blogs-sys");b.toggle();b.parent().find(".j_panel-heading").find("i").toggleClass("on")})},
render:function(){this.renderMyblog()},renderMyblog:function(){var c=this,b=this.model;c.layout="myblog";$("#blogs-wrapper").removeClass("people").addClass("myblog");b.blog(this.userId,this.date,function(a){(a=a.blogList)?(7<a.length&&(a.pop(),a.pop(),a.pop()),a=a.reverse(),c.renderUserDayBlog(a)):$(c.el).find(".no-result").removeClass("hide").html("\u6b64\u4eba\u4e0d\u662f\u60a8\u7684\u4e0b\u5c5e,\u60a8\u65e0\u6743\u67e5\u770b\u5176\u5de5\u4f5c\u65e5\u62a5")});c.print||(f.layout("#blogs-wrapper"),
$("#blogs-wrapper").removeClass("scrollwrapper"))},renderUserDayBlog:function(c){for(var b=this.layout,a=0;a<c.length;a++){var d=c[a],g=d.user,e=d.blog,n=Date.create(d.date),k=n.format("{yyyy}{MM}{dd}"),f=n.format("{yyyy}\u5e74{MM}\u6708"),p=$("#blogs-container").find("#"+k);1>p.length&&(p=$("#blogDateContainerClone").clone().data("date",d.date),p.find("span.date").html(n.format("short","zh-CN")),0>$.inArray(f,this.arr)?(this.arr.push(f),p.find(".blog-month").html(f)):p.find(".blog-month").remove(),
n.is("today")?(p.find(".blog-date").addClass("today"),p.attr("id",k).find(".day").html("\u4eca\u5929")):n.is("yesterday")?p.attr("id",k).find(".day").html("\u6628\u5929"):p.attr("id",k).find(".day").html(n.format("{d}\u53f7","zh-CN")),$("#blogs-container").append(p));f=$("#blogUserContainerClone").clone();f.attr("id",g.id);f.find(".name").html(g.username);f.find(".blog-textarea").autosize({append:"\n"});g.avatar&&g.avatar.p3&&f.find(".avatar img").attr("src","/base/download/"+g.avatar.p3);"commentme"!=
b&&f.find(".blog-comments").empty();if(e){var n=this.generateBlog(e),s=e.client;f.find(".blog").attr("id",e.id);f.find(".time").html(Date.create(e.createTime).format("{HH}:{mm}:{ss}"));e.read?f.removeClass("mark_blog_read"):f.find(".new").removeClass("hide");f.find(".blog-body").data("content",e.content).data("previousContent",n).html(n);s&&"pc"!=s&&e.address&&""!=e.address&&(f.find(".blog-client").removeClass("hide").html("\u6765\u81ea "+e.client+"\u5ba2\u6237\u7aef"),f.find(".blog-coord").removeClass("hide"),
f.find(".blog-address").html(e.address));g.id==TEAMS.currentUser.id&&f.find(".blog-edit").removeClass("hide");f.find(".blog-comment").removeClass("hide").attr("user-id",g.id).attr("day",k).attr("blog-id",e.id);"commentme"==b&&this.renderCommentMeList(e.id,"blog",f.find(".blog-comments"),d.pageComment);this.renderAttachments(e,f.find(".js_blogallfiles"))}else f.find(".time").html(n.format("{yyyy}-{MM}-{dd}")),f.find(".blog-body").html("\u65e0\u65e5\u62a5\u5185\u5bb9\u3002").addClass("blog-no-blog"),
f.removeClass("mark_blog_read"),g.id==TEAMS.currentUser.id&&Date.create().format("{yyyy}{MM}{dd}")!=k&&f.find(".blog-add").removeClass("hide");p.find(".blog-item").append(f);d.counts&&!this.print&&0<d.counts.allCount&&(f.find(".blog-records-panel").removeClass("hide"),this.renderOtherBlog(d,f.find(".blog-records-panel")))}c&&0<c.length&&"unread"==b&&(d=Date.create(c[c.length-1].date),c=Date.create(c[c.length-1].blog.createTime),$("#blogs-wrapper .blogs-more").data("blogDate",d.format("{yyyy}-{MM}-{dd}")).data("createTime",
c.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")));$("#blog-loading").hide()},renderOtherBlog:function(c,b){var a=c.user,d=Date.create(c.date).format("{yyyy}{MM}{dd}"),g=c.counts;if(g&&0<g.allCount){var e=$("#otherBlogsClone").clone().removeAttr("id");e.find("#all b").text(g.allCount);e.find(".j_icon-down-sys").attr("user-id",a.id).attr("day",d);0<g.task?e.find("#task b").text(g.task):e.find("#task").remove();0<g.document?e.find("#document b").text(g.document):e.find("#document").remove();0<g.customer?
e.find("#customer b").text(g.customer):e.find("#customer").remove();0<g.workflow?e.find("#workflow b").text(g.workflow):e.find("#workflow").remove();0<g.mainline?e.find("#mainline b").text(g.mainline):e.find("#mainline").remove();0<g.workreport?e.find("#workreport b").text(g.workreport):e.find("#workreport").remove();0<g.calendar?e.find("#calendar b").text(g.calendar):e.find("#calendar").remove();b.append(e);this.renderPage(c.page,b)}},renderPage:function(c,b){for(var a=0;a<c.result.length;a++){var d=
c.result[a],g=d.module;if("share"!=d.type&&"share"!=g){var e=$("#otherBlogClone").clone(),n=this.generateBlog(d);e.attr("id",d.id);e.find(".other-body").html(n);switch(g){case "task":e.find("dfn.graph").addClass("mark-task");break;case "customer":e.find("dfn.graph").addClass("mark-crm");break;case "document":e.find("dfn.graph").addClass("mark-doc");break;case "workflow":e.find("dfn.graph").addClass("mark-flow");break;case "mainline":e.find("dfn.graph").addClass("mark-mainline");break;case "workreport":e.find("dfn.graph").addClass("mark-report");
break;case "calendar":e.find("dfn.graph").addClass("mark-agenda")}d=e.find(".other-body .time").text();e.find(".other-body .time").addClass("hide");e.find("p.time").text(d);b.find(".other-blogs-container .blog-records-list").append(e)}}0==c.result.length&&(e=$("#otherBlogClone").clone(),e.find(".other-body").html('\x3cspan class\x3d"no-data"\x3e\u65e0\u6570\u636e\x3c/span\x3e'),b.find(".other-blogs-container .blog-records-list").append(e));c.hasNext?b.find(".other-more").removeClass("hide").data("pageNo",
c.pageNo):b.find(".other-more").addClass("hide")},generateBlog:function(c){var b=c.module;switch(c.type){case "blog":return c.content?f.initMessage(c.content):"";case "create":var a=[];switch(b){case "task":a.push("\u4efb\u52a1\uff1a  \u521b\u5efa\u4e86");break;case "document":return a.push("\u6587\u6863\uff1a   \u65b0\u589e\u4e86 "),a.push(c.title),a.push(" "),a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.join("");case "customer":a.push("\u5ba2\u6237\uff1a    \u521b\u5efa\u4e86 ");
break;case "workflow":a.push("\u5ba1\u6279\uff1a     \u53d1\u8d77\u4e86 ");break;case "workreport":a.push("\u62a5\u544a\uff1a     \u521b\u5efa\u4e86 ");break;case "calendar":a.push("\u65e5\u7a0b\uff1a      \u521b\u5efa\u4e86")}a.push(c.title);a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "comment":a=[];switch(b){case "task":a.push("\u4efb\u52a1\uff1a  ");break;case "document":a.push("\u6587\u6863\uff1a   ");break;case "customer":a.push("\u5ba2\u6237\uff1a    ");
break;case "workflow":a.push("\u5ba1\u6279 \uff1a   ");break;case "workreport":a.push("\u62a5\u544a \uff1a   ");break;case "calendar":a.push("\u65e5\u7a0b \uff1a   ")}a.push(c.title);a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");c.content&&a.push('\x3cdiv class\x3d"comment"\x3e'+f.initMessage(c.content)+"\x3c/div\x3e");return a.join("");case "finish":a=[];switch(b){case "task":a.push("\u5c06\u4efb\u52a1\uff1a  ");break;case "document":a.push("\u5c06\u6587\u6863\uff1a   ");
break;case "customer":a.push("\u5c06\u5ba2\u6237\uff1a    ");break;case "workflow":a.push("\u5c06\u5ba1\u6279 \uff1a   ")}a.push(c.title);a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5b8c\u6210");a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "reopen":a=[];switch(b){case "task":a.push("\u5c06\u4efb\u52a1\uff1a  ");break;case "document":a.push("\u5c06\u6587\u6863\uff1a   ");break;case "customer":a.push("\u5c06\u5ba2\u6237\uff1a    ");
break;case "workflow":a.push("\u5c06\u5ba1\u6279 \uff1a   ")}a.push(c.title);a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210");a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "accept":return a=[],a.push("\u5ba1\u6279\uff1a     \u540c\u610f\u4e86"),a.push(c.refCreator.name),a.push("\u521b\u5efa\u7684\u5ba1\u6279"),a.push(c.title),a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+
"\x3c/span\x3e"),a.join("");case "reject":return a=[],a.push("\u5ba1\u6279\uff1a     \u9000\u56de\u4e86"),a.push(c.refCreator.name),a.push("\u521b\u5efa\u7684\u5ba1\u6279"),a.push(c.title),a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.join("")}},renderAttachments:function(c,b){for(var a=c.attachments||[],d=c.imageFiles||[],g=0;g<a.length;g++){var e=a[g];b.children(".js_blogfiles").prepend(f.template("base.attachment",e))}for(g=0;g<d.length;g++)if((a=
d[g])&&a.big&&a.image&&a.small){var e=a.id,n=a.bigUrl,k=a.imageUrl,r=a.smallUrl,p=[];p.push(n);p.push(k);p.push(r);var s=$("#blog-atta-image-clone").clone(!0);s.find("span").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+n+"' data-artZoom-source\x3d'/base/download/"+k+"' src\x3d'/base/download/"+r+"'\x3e");s.append("\x3cp\x3e"+a.name+" \x3ca data-url\x3d/blog/deleteAttachments/"+e+".json\x3e \x3c/a\x3e\x3c/p\x3e");s.find("a").data({idArray:p,imageId:k});s.find(".artZoom").artZoom();
s.removeClass("hide");s.removeAttr("id");b.children(".js_blogimgs").prepend(s)}c.creator.id!=TEAMS.currentUser.id&&(b.find(".entity-item").attr("undeletable",!0),b.find(".js_blogimgs .js_blog_atta_image a").remove())},remove:function(){$(this.el).off(".BlogView");$(this.el+" #blog-textarea").trigger("autosize.destroy");this.uploader&&(this.uploader.destroy(),this.uploader=null)}});m.exports=h});
define("teams/blog/blogpage","teams/core/page teams/blog/blogview teams/task/taskview teams/doc/documentview teams/workflow/flowview teams/mainline/mainlineview teams/component/usersummaryview teams/workreport/workreportcontentview teams/utils".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/blog/blogview");h("teams/task/taskview");h("teams/doc/documentview");h("teams/workflow/flowview");h("teams/mainline/mainlineview");var e=h("teams/component/usersummaryview");h("teams/workreport/workreportcontentview");
var c=h("teams/utils");h=q.extend({initialize:function(b){this.type=b.type?b.type:"myblog";this.userId=b.userId;this.param=b.param;this.id=b.id;this.pageActive="blog";this.el="#mainContainer";this.pageKey=this.userId?"blog#"+this.userId:"blog#"+TEAMS.currentUser.id;this.template="blog.blogpage"},delegateEvents:function(){$(this.el);$("body").on("click.BlogPage",".goto-top",function(b){c.gotoTop()})},render:function(){var b=this,a=$(b.el);this.initLayout({userId:b.userId},function(){b.renderType()});
var d=c.template("blog.blog",{userId:TEAMS.currentUser.id});$("#blog-center").html(d);a.find(".aside-nav li.j_"+this.type).addClass("active");a=b.userId;this.renderSubview();this.mainView=new e({userId:a,rightViewCtrl:!0,container:"#blog-right"});this.mainView.render();c.layout(".j_blogConScr")},renderSubview:function(){var b=$(this.el);b.find(".aside-nav li.j_"+this.type).addClass("active");b.find(".aside-nav li.j_"+this.type).siblings("li").removeClass("active");this.subView=new f({userId:this.userId,
type:this.type});this.subView.render()},renderType:function(){var b="\u6211\u7684";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?(b="\u5979\u7684",$(".aside-nav .j_type").addClass("hide")):TEAMS.blogUser?(b="\u4ed6\u7684",$(".aside-nav .j_type").addClass("hide")):$(".aside-nav .j_type").removeClass("hide");$(".j_myblog a").html(b+"\u65e5\u62a5")}});m.exports=h});
define("teams/blog/blogmodel",function(h,q,m){h=Backbone.Model.extend({page:{},pages:{},initialize:function(f){this.page={pageNo:1,pageSize:10};this.pages={all:{pageNo:1,pageSize:5},self:{pageNo:1,pageSize:5},other:{pageNo:1,pageSize:5},task:{pageNo:1,pageSize:5},customer:{pageNo:1,pageSize:5},document:{pageNo:1,pageSize:5},workflow:{pageNo:1,pageSize:5},people:{pageNo:1,pageSize:5},blog:{pageNo:1,pageSize:5}}},post:function(f,e){var c='{"blog" : '+JSON.stringify(f)+"}";$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/blog.json",dataType:"json",data:c,success:function(b){e&&e(b)}})},update:function(f,e){var c=this,b='{"blog" : '+JSON.stringify(f)+"}";$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/blog/updasteBolg.json",dataType:"json",data:b,success:function(a){c.isUpdate=!0;e&&e(a)}})},blog:function(f,e,c){var b={pageSize:10};b.pageNo=this.page.pageNo;b.loadOtherBlogs=!0;b.userId=f;e&&(b.date=e);$.ajax({type:"post",url:"/blog/blogs.json",dataType:"json",data:b,success:function(a){c&&
c(a)}})},people:function(f,e,c){var b={pageSize:10};b.pageNo=this.page.pageNo;f&&(b.userIds=f);e&&(b.date=e);b.loadOtherBlogs=!0;f=JSON.stringify(b);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/blog/blogs.json",dataType:"json",data:f,success:function(a){c&&c(a)}})},other:function(f,e,c,b,a){var d={pageSize:5};d.pageNo=b;d.userId=f;d.date=e;d.pageOnly=!0;d.module=c;$.ajax({type:"post",url:"/blog/details.json",dataType:"json",data:d,success:function(b){a&&a(b.page)}})},
queryKeywords:function(f,e){var c=this.page;f.pageNo=c.pageNo;f.pageSize=c.pageSize;f.loadOtherBlogs=!0;$.ajax({type:"get",url:"/blog/queryKeywords.json",dataType:"json",data:f,success:function(b){e&&e(b.blogPage)}})},queryUnread:function(f,e){var c=this.page;f.pageNo=c.pageNo;f.pageSize=c.pageSize;f.loadOtherBlogs=!0;$.ajax({type:"get",url:"/blog/queryUnread.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},queryCommentMe:function(f,e){var c=this.page;f.pageNo=c.pageNo;f.pageSize=c.pageSize;
f.loadOtherBlogs=!0;$.ajax({type:"get",url:"/blog/queryCommentMe.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},queryReplayMe:function(f,e){var c=this.page;f.pageNo=c.pageNo;f.pageSize=c.pageSize;f.loadOtherBlogs=!0;$.ajax({type:"get",url:"/blog/queryReplayMe.json",dataType:"json",data:f,success:function(b){e&&e(b)}})},readOne:function(f,e,c){$.ajax({type:"get",url:"/blog/read.json",dataType:"json",data:{id:f,feedType:e},success:function(b){c&&c(b)}})},readAll:function(f){$.ajax({type:"get",
url:"/blog/readAll.json",dataType:"json",data:{},success:function(e){f&&f(e)}})},readBlogs:function(f,e){$.ajax({url:"/blog/readBlogs.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},findFileObj:function(f,e){$.ajax({type:"get",url:"/km/document/findFileObj.json",dataType:"json",data:{id:f},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/integration/integrationview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.isAdmin=TEAMS.currentUser.admin;this.el=e.el||e.container;$(this.el).html(f.template("integration.integration"))},delegateEvents:function(){},render:function(){},remove:function(){this.undelegateEvents()}});m.exports=h});var websocket_supported=!0;
define("teams/websocket/websocket",["teams/feed/eteamscounter"],function(h,q,m){var f=h("teams/feed/eteamscounter");(function(){function e(g,k,r,p,s,h,w,v){if(g){d="http:"==window.location.protocol?"ws://"+TEAMS.service.mcConnector+"?deviceType\x3dPC\x26ETEAMSID\x3d"+ETEAMSID:"wss://"+TEAMS.service.mcConnector+"?deviceType\x3dPC\x26ETEAMSID\x3d"+ETEAMSID;if("WebSocket"in window)a=new WebSocket(d);else if("MozWebSocket"in window)a=new MozWebSocket(d);else{console.log("WebSocket is not supported by this browser.");
v&&v();return}a.onopen=function(a){a&&(websocket_supported=!0,console.log("Info: WebSocket connection opened."),f.countPcBell());window.OnSocOpenCallback&&window.OnSocOpenCallback()};a.onmessage=function(a){if(w){var b=eval("("+a.data+")");w(b)}else if(b=eval("("+a.data+")")){c(".statistic-panel .panel-border").show();c(".statistic-panel .statistic-line").show();c(".message-count").html(b.unreadMessageCount+b.wechatCount);c("#blog-count").html(b.unreadBlogCount);a=b.unreadBlogCount;var d=b.feedCount.newitem,
g=b.feedCount.newcomment,e=b.feedCount.newfinish,b=b.feedCount.atme;c("#top .j_messageCount a.j_unreadblog span").html(a);c("#top .j_messageCount a.j_newitem span").html(d);c("#top .j_messageCount a.j_newcomment span").html(g);c("#top .j_messageCount a.j_newfinish span").html(e);c("#top .j_messageCount a.j_atme span").html(b)}};a.onclose=function(a){console.log("Info: WebSocket connection closed, Code: "+a.code+(""==a.reason?"":", Reason: "+a.reason));9<=l?(websocket_supported=!1,v&&v()):(b=setInterval(function(){l++;
var a=c.uuid();e(g,k,r,p,s,a,w,v);clearInterval(b)},6E4),window.OnSocCloseCallback&&window.OnSocCloseCallback())};a.onerror=function(a){console.log("Info: WebSocket error, Code: "+a.code+(""==a.reason?"":", Reason: "+a.reason))}}}var c=jQuery;WEB_SOCKET_SWF_LOCATION="js/WebSocket.swf";WEB_SOCKET_DEBUG=!0;var b,a=null,d=null,g=null,l=0;c.websocket=function(b,d,c,l,f,h,w){g=TEAMS.service.websocket;e(g,b,d,c,l,f,h,w);return a};c.websocket.close=function(){if(a)return a.close(),a};c.websocket.pushcallback=
function(b){a&&b&&(a.onmessage=function(a){a=eval("("+a.data+")");b(a)})};c.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}})()});
define("teams/websocket/websockettitle",function(h,q,m){var f={_step:0,_title:document.title,_timer:null,_count:0,show:function(){f._count++;f._timer=setTimeout(function(){f.show();f._title=document.title;var e=f._title.replace("\u3010\u3000\u3000\u3000\u3011","").replace("\u3010\u65b0\u6d88\u606f\u3011","");f._step++;3==f._step&&(f._step=1);1==f._step&&(document.title="\u3010\u3000\u3000\u3000\u3011"+e);2==f._step&&(document.title="\u3010\u65b0\u6d88\u606f\u3011"+e)},800);return[f._timer,f._title]},
needRemind:function(){return 0<f._count?!1:!0},clear:function(){f._count=0;clearTimeout(f._timer);0==f._title.indexOf("\u3010")&&(f._title=f._title.slice(5),document.title=f._title)}};m.exports=f});
define("teams/crm/CrmService",function(h,q,m){h=Backbone.Model.extend({isShowMessage:function(f,e,c){$.ajax({type:"post",url:TEAMS.service.crm+"/customer/openSea/isShowMessage",dataType:"json",async:c,data:{},success:function(b){f&&f(b)},error:function(b){e&&e(b)}})},hasOpenSeaAdmin:function(f,e){$.ajax({type:"post",url:TEAMS.service.crm+"/customer/openSea/hasOpenSeaAdmin",dataType:"json",data:{},success:function(c){f&&f(c)},error:function(c){e&&e(c)}})},findCustomersByKeyword:function(f,e,c,b,a,
d,g){$.ajax({type:"post",url:TEAMS.service.crm+"/customer/datatable",dataType:"json",data:{queryStr:JSON.stringify({pageNo:b,pageSize:a,orderBy:"",orderWay:"desc",conditions:[{id:"name",type:"string",value:c}],filter:{type:e}}),employeeId:f},success:function(a){d&&d(a)},error:function(a){g&&g(a)}})},findPropertyByTypeAndKey:function(f,e,c){$.ajax({type:"post",url:TEAMS.service.crm+"/customerSetting/findPropertyByTypeAndKey",dataType:"json",data:{propertyType:f},success:function(b){e&&e(b)},error:function(b){c&&
c(b)}})},findCustomersForTypes:function(f,e,c,b,a,d){$.ajax({type:"post",url:TEAMS.service.crm+"/customer/findCustomersForTypes",dataType:"json",data:{employeeId:f,types:e,pageNo:c,pageSize:b,orderBy:"",orderWay:"desc"},success:function(b){a&&a(b)},error:function(a){d&&d(a)}})}});m.exports=h});
define("teams/base/servicenumberview",["teams/utils","teams/models/servicenumbermodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/servicenumbermodel");h=Backbone.View.extend({initialize:function(c){this.userId=c.userId||TEAMS.currentUser.id;this.el=c.container||"body";this.container=$(c.container);this.model=new e({userId:this.userId});this.container.append(f.template("base.servicenumber"))},delegateEvents:function(){var c=this;$el=$(c.el);$("body").on("click.servicenumberview",".goto-top",
function(b){f.gotoTop(c.el+" #message-set-view")});$el.on("click.servicenumberview",".j_ser_num",function(b){$(this).hasClass("open")?($(this).removeClass("open"),c.model.save("ServiceNumber",0,function(a){f.notify("\u5df2\u53d6\u6d88\u670d\u52a1\u53f7\u6d88\u606f\u63a8\u9001")})):($(this).addClass("open"),c.model.save("ServiceNumber",1,function(a){f.notify("\u5df2\u5f00\u542f\u670d\u52a1\u53f7\u6d88\u606f\u63a8\u9001")}))});$el.on("click.servicenumberview",".comment_message_push_set",function(b){$(this).hasClass("open")?
($(this).removeClass("open"),c.model.save("comment.message.push.set",0,function(a){f.notify("\u5df2\u53d6\u6d88\u8bc4\u8bba\u6d88\u606f\u63a8\u9001")})):($(this).addClass("open"),c.model.save("comment.message.push.set",1,function(a){f.notify("\u5df2\u5f00\u542f\u8bc4\u8bba\u6d88\u606f\u63a8\u9001")}))});$el.on("click.servicenumberview",".agenda_push_set",function(b){$(this).hasClass("open")?($(this).removeClass("open"),c.model.save("agenda.push.set",0,function(a){f.notify("\u5df2\u53d6\u6d88\u65e5\u7a0b\u6d88\u606f\u63a8\u9001")})):
($(this).addClass("open"),c.model.save("agenda.push.set",1,function(a){f.notify("\u5df2\u5f00\u542f\u65e5\u7a0b\u6d88\u606f\u63a8\u9001")}))});$el.on("click.servicenumberview",".workreport_push_set",function(b){$(this).hasClass("open")?($(this).removeClass("open"),c.model.save("workreport.push.set",0,function(a){f.notify("\u5df2\u53d6\u6d88\u62a5\u544a\u6d88\u606f\u63a8\u9001")})):($(this).addClass("open"),c.model.save("workreport.push.set",1,function(a){f.notify("\u5df2\u5f00\u542f\u62a5\u544a\u6d88\u606f\u63a8\u9001")}))});
$el.on("click.servicenumberview",".personal_click",function(b){b=$(this);b.hasClass("is_personal_mainline_expire")?c.personalRemindEvent("is_personal_mainline_expire"):b.hasClass("is_personal_task_expire")?c.personalRemindEvent("is_personal_task_expire"):b.hasClass("is_personal_task_delay")&&c.personalRemindEvent("is_personal_task_delay")});$el.on("blur.servicenumberview",".personal_blur",function(b){b=$(this);b.hasClass("is_personal_mainline_expire")?b.val()!=c.mainlineExpireEarlytime&&c.personalRemindEvent("is_personal_mainline_expire"):
b.hasClass("is_personal_task_expire")&&b.val()!=c.taskExpireEarlytime&&c.personalRemindEvent("is_personal_task_expire")});$el.on("change.servicenumberview",".remindTime",function(b){$(this);c.personalRemindEvent("is_personal_calendar_start")});$el.on("click.servicenumberview",".personal_mainline_expire",function(b){var a=$(this);(b=a.hasClass("open"))?c.savePersonalRemindSetting("is_personal_mainline_expire",!b,function(b){a.removeClass("open")}):c.personalRemindParamCheck("is_personal_mainline_expire")&&
c.savePersonalRemindSetting("is_personal_mainline_expire",!b,function(b){a.addClass("open")})});$el.on("click.servicenumberview",".personal_task_expire",function(b){var a=$(this);(b=a.hasClass("open"))?c.savePersonalRemindSetting("is_personal_task_expire",!b,function(b){a.removeClass("open")}):c.personalRemindParamCheck("is_personal_task_expire")&&c.savePersonalRemindSetting("is_personal_task_expire",!b,function(b){a.addClass("open")})});$el.on("click.servicenumberview",".personal_task_delay",function(b){var a=
$(this);(b=a.hasClass("open"))?c.savePersonalRemindSetting("is_personal_task_delay",!b,function(b){a.removeClass("open")}):c.personalRemindParamCheck("is_personal_task_delay")&&c.savePersonalRemindSetting("is_personal_task_delay",!b,function(b){a.addClass("open")})});$el.on("click.servicenumberview",".personal_calendar_start",function(b){var a=$(this);(b=a.hasClass("open"))?c.savePersonalRemindSetting("is_personal_calendar_start",!b,function(b){a.removeClass("open")}):c.savePersonalRemindSetting("is_personal_calendar_start",
!b,function(b){a.addClass("open")})});$el.on("click.servicenumberview",".subordinate_blog",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_task",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_mainline",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",
".subordinate_workflow",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_document",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_workreport",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_calendar",function(b){$(this).hasClass("open")?
$(this).removeClass("open"):$(this).addClass("open")});$el.on("click.servicenumberview",".subordinate_customer",function(b){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")})},remove:function(){var c=$(this.el);c.off(".servicenumberview");c.remove()},render:function(){this.renderConfig();this.renderPersonalRemindConfig();f.layout("#message-set-view")},renderConfig:function(){$.ajax({type:"get",url:"/customsetting/getConfigByUserId.json",dataType:"json",success:function(c){var b=
c.configList;if(b&&0<b.length&&"ServiceNumber"==b[0].configKey){0==b[0].configValue&&$("#servnum").find(".j_ser_num").removeClass("open");for(var a=1;a<b.length;a++)c=b[a].configKey.replace(/\./g,"_"),1==b[a].configValue&&$("#servnum ."+c+"").addClass("open")}else if(b)for(a=0;a<b.length;a++)c=b[a].configKey.replace(/\./g,"_"),1==b[a].configValue&&$("#servnum ."+c+"").addClass("open")}})},renderPersonalRemindConfig:function(){var c=this;c.model.loadPersonalRemindSetting(function(b){var a=b.personalReminds;
b=b.remindEntrys;if(a)for(var d=0;d<a.length;d++)"mainline_expire"==a[d].type?(personalRemindDefault=!1,a[d].enabled?($(c.el).find(".personal_mainline_expire").addClass("open"),$(c.el).find(".earlytime.is_personal_mainline_expire").val(a[d].time),c.renderPersonalRemindCheckBox(b,a[d].id,"is_personal_mainline_expire")):$(c.el).find(".personal_mainline_expire").removeClass("open")):"task_expire"==a[d].type?a[d].enabled?($(c.el).find(".personal_task_expire").addClass("open"),$(c.el).find(".earlytime.is_personal_task_expire").val(a[d].time),
c.renderPersonalRemindCheckBox(b,a[d].id,"is_personal_task_expire")):$(c.el).find(".personal_task_expire").removeClass("open"):"task_delay"==a[d].type?a[d].enabled?($(c.el).find(".personal_task_delay").addClass("open"),c.renderPersonalRemindCheckBox(b,a[d].id,"is_personal_task_delay")):$(c.el).find(".personal_task_delay").removeClass("open"):"calendar_start"==a[d].type&&(a[d].enabled?($(c.el).find(".personal_calendar_start").addClass("open"),$(c.el).find(".remindTime").val(a[d].time+"_"+a[d].timeType)):
$(c.el).find(".personal_calendar_start").removeClass("open"));c.mainlineExpireEarlytime=$(c.el).find(".is_personal_mainline_expire.earlytime").val();c.taskExpireEarlytime=$(c.el).find(".is_personal_task_expire.earlytime").val()})},renderPersonalRemindCheckBox:function(c,b,a){if(c&&b)for(var d=0;d<c.length;d++)c[d].entityId==b&&$(this.el).find("."+a+"."+c[d].remind+"Remind").attr("checked","checked")},personalRemindEvent:function(c){var b;"is_personal_mainline_expire"==c?b=$(this.el).find(".personal_mainline_expire.e-range").hasClass("open"):
"is_personal_task_expire"==c?b=$(this.el).find(".personal_task_expire.e-range").hasClass("open"):"is_personal_task_delay"==c?b=$(this.el).find(".personal_task_delay.e-range").hasClass("open"):"is_personal_calendar_start"==c&&(b=$(this.el).find(".personal_calendar_start.e-range").hasClass("open"));b&&this.personalRemindParamCheck(c)&&this.savePersonalRemindSetting(c,b)},savePersonalRemindSetting:function(c,b,a){var d=this,g=d.model,e,n,k,r,p,s;"is_personal_mainline_expire"==c||"is_personal_task_expire"==
c?(e=$(d.el).find("."+c+".earlytime").val(),n="day",k=$(d.el).find("."+c+".createRemind").get(0).checked?"create":null,r=$(d.el).find("."+c+".primaryRemind").get(0).checked?"primary":null,p=$(d.el).find("."+c+".participantsRemind").get(0).checked?"participants":null,"is_personal_mainline_expire"==c?s="mainline_expire":"is_personal_task_expire"==c&&(s="task_expire")):"is_personal_task_delay"==c?(k=$(d.el).find("."+c+".createRemind").get(0).checked?"create":null,r=$(d.el).find("."+c+".primaryRemind").get(0).checked?
"primary":null,p=$(d.el).find("."+c+".participantsRemind").get(0).checked?"participants":null,s="task_delay"):"is_personal_calendar_start"==c&&(c=$(d.el).find(".remindTime").val().split("_"),e=c[0],n=c[1],s="calendar_start");g.savePersonalRemindSetting(function(b){f.notify("\u8bbe\u7f6e\u6210\u529f");d.mainlineExpireEarlytime=$(d.el).find(".is_personal_mainline_expire.earlytime").val();d.taskExpireEarlytime=$(d.el).find(".is_personal_task_expire.earlytime").val();a&&a(b)},b,e,n,k,r,p,s)},personalRemindParamCheck:function(c){var b,
a,d,g;"is_personal_mainline_expire"==c||"is_personal_task_expire"==c?(b=$(this.el).find("."+c+".earlytime").val(),a=$(this.el).find("."+c+".createRemind").get(0).checked,d=$(this.el).find("."+c+".primaryRemind").get(0).checked,g=$(this.el).find("."+c+".participantsRemind").get(0).checked):"is_personal_task_delay"==c&&(a=$(this.el).find("."+c+".createRemind").get(0).checked,d=$(this.el).find("."+c+".primaryRemind").get(0).checked,g=$(this.el).find("."+c+".participantsRemind").get(0).checked);if("is_personal_mainline_expire"==
c||"is_personal_task_expire"==c)if(b)if(/^[1-9]+[0-9]*]*$/.test(b)){if(2<b.length)return f.notify("\u63d0\u524d\u65f6\u95f4\u592a\u957f\uff0c\u8bf7\u8bbe\u7f6e\u5728\u4e24\u4f4d\u6570\u4ee5\u5185"),!1;if(!(a||d||g))return f.notify("\u8bf7\u8bbe\u7f6e\u63d0\u9192\u7684\u4e8b\u9879"),!1}else return f.notify("\u63d0\u524d\u65f6\u95f4\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;else return f.notify("\u8bf7\u8f93\u5165\u65f6\u95f4"),!1;else if("is_personal_task_delay"==c&&!(a||d||g))return f.notify("\u8bf7\u8bbe\u7f6e\u63d0\u9192\u7684\u4e8b\u9879"),
!1;return!0}});m.exports=h});
define("teams/base/custmenuview",["teams/utils","teams/models/custmenumodel","jquery.iphoneradio.js"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/custmenumodel");h("jquery.iphoneradio.js");h=Backbone.View.extend({initialize:function(c){this.userId=c.userId||TEAMS.currentUser.id;this.el=c.container||"body";this.container=$(c.container);this.model=new e({userId:this.userId})},delegateEvents:function(){var c=this,b=this.model,a=$(this.el);$("body").on("click.custMenuView",".goto-top",
function(a){f.gotoTop(c.el+" #menuset-wrapper")});a.off("click.custMenuView",".reset-navsetting a").on("click.custMenuView",".reset-navsetting a",function(d){b.resetNavsetting(function(b){f.notify("\u91cd\u7f6e\u6210\u529f,\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u767b\u5f55\u540e\u751f\u6548");if(b.empmenus){b=_.sortBy(b.empmenus,"orderIndex");a.find(".j_sortmenus").empty();for(var d=0,c=b.length;d<c;d++)if(0!=d){var e="";1===b[d].menuStatus&&(e='checked\x3d"checked"');e='\x3cli class\x3d"on_off cs-m"\x3e\x3cspan class\x3d"middle_helper"\x3e\x3c/span\x3e\x3cspan data-id\x3d"'+
b[d].id+'" class\x3d"menu_name"\x3e'+b[d].menuName+'\x3c/span\x3e\x3cinput  type\x3d"checkbox" '+e+' +/\x3e\x3cspan title\x3d"\u62d6\u62c9\u6392\u5e8f" class\x3d"menu_move"\x3e\x3c/span\x3e\x3c/li\x3e';a.find(".j_sortmenus").append(e)}a.find(".j_sortmenus .on_off :checkbox").tzCheckbox({labels:["",""]})}})});a.off("click.custMenuView",".on_off :checkbox").on("click.custMenuView",".on_off :checkbox",function(a){var g=$(this),e=g.next(".tzCheckBox").hasClass("checked")?1:0,n={};if(0===$(".sortmenus").find(".tzCheckBox.checked").length)g.next("span.tzCheckBox").addClass("open checked"),
f.notify("\u8bf7\u81f3\u5c11\u4fdd\u7559\u4e00\u4e2a\u5e94\u7528!");else{var k=g.parents("li").find(".menu_name").attr("data-id");c.model.loadEmpAllMenus(function(a){a=_.filter(a,function(a){return 1===a.menuStatus});1===a.length&&a[0].id===k&&0===e?(g.next("span.tzCheckBox").addClass("open checked"),f.notify("\u8bf7\u81f3\u5c11\u4fdd\u7559\u4e00\u4e2a\u5e94\u7528!")):(n.menuId=k,n.menustatu=e,b.updateMenuStatus(n,function(a){f.notify("\u66f4\u65b0\u6210\u529f,\u5237\u65b0\u9875\u9762\u6216\u91cd\u65b0\u767b\u5f55\u540e\u751f\u6548")}))})}})},
render:function(){var c=this.el,b=this.container,a=this;this.model.loadEmpAllMenus(function(d){d=_.sortBy(d,"orderIndex");b.html(f.template("base.custmenu",{menus:d}));b.find(".on_off :checkbox").tzCheckbox({labels:["",""]});$(".sortmenus").sortable({stop:function(b,d){a.updateMenuOrders()}});$(".sortmenus").disableSelection();"#entitybox-container"==c&&$(c).find(".j_menuset_close").removeClass("hide");f.layout(c+" #menuset-wrapper",[{gotoTopButton:!1,bottomBlank:!1}]);null!=$(c+" #menuset-wrapper").parents("#entitybox").get(0)&&
$(c+" #menuset-wrapper").height(465).mCustomScrollbar("update")})},updateMenuOrders:function(){var c=$(".sortmenus li"),b=[],a=[],d={},g,e,n;$.each(c,function(d,c){g=$(c);e=g.find(".menu_name").attr("data-id");n=d;b.push(e);a.push(n)});d.menuIds=b.join(",");d.menuOrders=a.join(",");this.model.updateMenuOrders(d,function(a){f.notify("\u66f4\u65b0\u6210\u529f,\u91cd\u65b0\u767b\u5f55\u540e\u751f\u6548")})},remove:function(){$(this.el).off(".custMenuView")}});m.exports=h});
define("teams/base/pwdview",["teams/utils","teams/component/validation","teams/models/profilemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/validation"),c=h("teams/models/profilemodel");h=Backbone.View.extend({el:"",initialize:function(b){this.userId=b.userId?b.userId:TEAMS.currentUser.id;this.type=b.type||"changePwd";this.model=new c(b);"changePwd"==this.type?(this.el="#changepwd-groups",$("#changepwd-groups"),$("body").append(f.template("base.changepwd")),this.delegateChangePwdEvents()):
(this.el="#resetpwd-groups",$("#resetpwd-groups"),$("body").append(f.template("base.resetpwd")),this.delegateResetPwdEvents())},delegateEvents:function(){var b=this;$(this.el).on("hidden.bs.modal",function(a){b.remove()})},delegateChangePwdEvents:function(){var b=this,a=$("#changepwd-groups"),d=a.find("#employee-oldPwd"),g=a.find("#employee-newPwd"),c=a.find("#employee-confirmPwd");a.on("click.changepwd","#pwd-btn-update",function(){if(""==$.trim(d.val()))return f.notify("\u8bf7\u8f93\u5165\u539f\u5bc6\u7801"),
d.focus(),!1;if(""==$.trim(g.val()))return f.notify("\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"),g.focus(),!1;if(""==$.trim(c.val()))return f.notify("\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"),c.focus(),!1;if(!e.formValidate(a))return!1;b.model.changePassword({employeeId:b.userId,oldPassword:d.val(),newPassword:g.val()},function(b){(b=b.message)?f.notify(b):(f.notify("\u5bc6\u7801\u5df2\u66f4\u65b0"),a.modal("hide"))})});a.on("click.changepwd","#pwd-btn-cancel",function(){a.modal("hide")})},delegateResetPwdEvents:function(){var b=
this,a=$("#resetpwd-groups"),d=a.find("#employee-newPwd-reset"),g=a.find("#employee-confirmPwd-reset");a.off(".resetpwd");a.on("click.resetpwd","#pwd-btn-update",function(){if(""==$.trim(d.val()))return f.notify("\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"),!1;if(""==$.trim(g.val()))return f.notify("\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"),!1;if(!e.formValidate(a))return!1;b.model.resetPassword({employeeId:b.userId,newPassword:d.val()},function(b){(b=b.message)?f.notify(b):(f.notify("\u5bc6\u7801\u5df2\u91cd\u7f6e"),
a.modal("hide"))})});a.on("click.resetpwd","#pwd-btn-cancel",function(){a.modal("hide")})},render:function(){var b=TEAMS.currentUser.account||TEAMS.currentUser.email;"manager1@eteams.cn"==b||"user1@eteams.cn"==b?f.notify("\u6f14\u793a\u8d26\u53f7\u4e0d\u80fd\u4fee\u6539\u5bc6\u7801\uff01"):$(this.el).modal()},remove:function(){var b=$(this.el);b.off(".changepwd");b.off(".resetpwd");b.remove()}});m.exports=h});
define("teams/base/clientview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(){this.el="#client-modal";0>=$(this.el).length&&$("body").append(f.template("base.client"));ZeroClipboard.config({swfPath:"js/clipboard.swf"})},delegateEvents:function(){var e=this;$(e.el).on("hidden.bs.modal",function(){e.remove()});window.clipboardData&&($(e.el).on("click.client","#link-ios-ee",function(c){window.clipboardData.setData("text",$(this).attr("data-entity"))}),
$(e.el).on("click.client","#link-ios-app",function(c){window.clipboardData.setData("text",$(this).attr("data-entity"))}));$("body").on("keydown.client",function(c){27==c.which&&$(e.el).modal("hide")})},render:function(){$(this.el).modal("toggle");window.clipboardData||this.copyLink($(this.el).find("#link-ios-app"))},copyLink:function(e){var c=new ZeroClipboard(e);c.on("ready",function(){c.on("copy",function(b){b.clipboardData.setData("text/plain",e.attr("data-entity"))});c.on("aftercopy",function(b){f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")})})},
remove:function(){$("body").off(".client");$(this.el).off(".client");$(this.el).remove()}});m.exports=h});
define("teams/base/avatarview",["teams/utils","teams/models/profilemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/profilemodel");h=Backbone.View.extend({initialize:function(c){this.userId=c.userId||TEAMS.currentUser.id;this.el=c.container||"body";this.container=$(c.container);this.model=new e({userId:this.userId});this.imageArea={}},initEvents:function(){var c=this;$("#upload-avatar-box").on("hidden.bs.modal",function(b){c.remove()});$("body").on("keydown.uploadAvatar",function(b){27==
b.which&&c.container.modal("hide")})},renderBox:function(){$("body").append(f.template("base.uploadavatarbox"));$("#upload-avatar-box .modal-body").append(f.template("base.uploadavatar"));this.initEvents();this.el="#upload-avatar-box";this.container=$(this.el);$("#upload-avatar-box").modal("toggle");this.renderAvatar()},render:function(){this.container.append(f.template("base.uploadavatar"));this.renderAvatar();f.layout(".j_userPhotoScr")},renderAvatar:function(){var c=this,b=c.container;this.model.loadProfile(c.userId,
function(a){a=a.employee;b.find(".avatar-img-preview").attr("src","images/avatar.png");if(a.avatar&&a.avatar.p1){var d="/base/download/"+a.avatar.p1;b.find("#avatar").val(a.avatar.p1);b.find(".avatar-preview-wrapper").removeClass("hide");b.find(".avatar-note").addClass("hide");b.find("#avatar-img").removeClass("hide").attr("src",d);c.initImgSelect()}a.avatar&&a.avatar.p2&&b.find(".avatar-img-preview").attr("src","/base/download/"+a.avatar.p2);setTimeout(function(){c.uploader()},1E3)});$("body").on("click.uploadAvatar",
"#avatar-cut",function(a){var b=$(this);b.hasClass("disabled")||(b.addClass("disabled").text("\u88c1\u526a\u4e2d..."),a.stopPropagation(),c.imageArea.id=$("body").find("#avatar").val(),c.model.cut(c.imageArea,function(a){b.removeClass("disabled").text("\u88c1\u526a");a=a.user;$("body").find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection();TEAMS.currentUser.id==c.userId&&($("#user-panel img.j_user-avatar").attr("src",a.avatar?"/base/download/"+a.avatar.p3:"images/avatar.png"),
TEAMS.currentUser.avatar=a.avatar);f.notify("\u526a\u88c1\u6210\u529f!")}))});if("#upload-avatar-box"!=c.el)$("body").on("keydown.uploadAvatar",function(a){27==a.which&&b.find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection()})},uploader:function(c){var b=this;c=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:b.el,max_file_size:"2mb",multi_selection:!1,browse_button:b.el+" .avatar-upload",url:"/profile/upload/"+b.userId+".json?ETEAMSID\x3d"+ETEAMSID,filters:[{title:"Image files",
extensions:"jpg,jpeg,png,gif"}],flash_swf_url:"js/plupload.swf"});c.init();c.bind("FilesAdded",function(a,b){a.refresh();a.start()});c.bind("UploadProgress",function(a,b){});c.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc72M,\u6700\u5c0f5b,\u540e\u7f00\u4e3ajpg,jpeg,png,gif\u7684\u56fe\u7247\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});c.bind("FileUploaded",function(a,d,g){a=b.container;g=
jQuery.parseJSON(g.response).fileObj;a.find("#avatar").val(g.id);a.find(".avatar-note").addClass("hide");a.find("img.avatar-img").attr("src","/base/download/"+g.id).removeClass("hide");a.find(".avatar-preview-wrapper").removeClass("hide");a.find(".avatar-img-preview").attr("src","/base/download/"+g.id).removeClass("hide");TEAMS.currentUser.id==b.userId&&$("#center-pane .usercard-toggle img").attr("src","/base/download/"+g.id);b.initImg&&a.find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection();
f.notify("\u4e0a\u4f20\u6210\u529f\uff0c\u62d6\u52a8\u56fe\u7247\u88c1\u526a");b.initImgSelect();b.uploaderimg?b.uploaderimg.destroy():"";b.uploader()});b.uploaderimg=c},initImgSelect:function(){var c=this,b=$("body");b.find("img.avatar-img").imgAreaSelect({parent:"body",minHeight:100,minWidth:100,aspectRatio:"1:1",handles:!0,fadeSpeed:200,onSelectStart:function(){b.find(".avatar-preview-wrapper").removeClass("hide");b.find("#avatar-cut").removeClass("hide")},onSelectChange:function(a,d){if(d.width&&
d.height){b.find("img.avatar-img-preview").attr("src",b.find("img.avatar-img").attr("src"));var g=100/(d.width||1),c=100/(d.height||1),e=b.find("img.avatar-img").width(),k=b.find("img.avatar-img").height();b.find("img.avatar-img-preview").css({width:Math.round(g*e)+"px",height:Math.round(c*k)+"px",marginLeft:"-"+Math.round(g*d.x1)+"px",marginTop:"-"+Math.round(c*d.y1)+"px"})}},onSelectEnd:function(a,b){c.imageArea.x=b.x1;c.imageArea.y=b.y1;c.imageArea.width=b.width;c.imageArea.height=b.height}});
c.initImg=!0},remove:function(){var c=this.container;this.uploaderimg?this.uploaderimg.destroy():"";var b=c.find("img.avatar-img").imgAreaSelect({instance:!0});b?b.remove():"";$("body").off(".uploadAvatar");c.off(".uploadAvatar");c?c.remove():""}});m.exports=h});
define("teams/base/dynamicinfoview",["teams/utils","teams/models/dynamicinfomodel","teams/component/invitemodalview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/dynamicinfomodel"),c=h("teams/component/invitemodalview");h=Backbone.View.extend({initialize:function(b){this.model=new e;this.container=b.container;$(this.container).html(f.template("base.dynamicinfo"))},createPlacard:function(b,a){if(b&&b.id&&b.createDate&&b.creator&&b.creator.username){var d=$(this.container).find("#placard-history-box-clone").clone(!0);
d.attr("id",b.id);var g=b.createDate;g&&(d.find(".placard-history-date").html(Date.create(g).format("{MM}.{dd}")),d.data("createDate",g));d.find(".placard-history-content").html(b.content).attr("title","\u70b9\u51fb\u663e\u793a\u5386\u53f2\u516c\u544a\u8be6\u7ec6\u5185\u5bb9").data("content",b.content);d.find(".placard-history-content").text(d.find(".placard-history-content").text());g=b.creator.username;5<g.length&&(g=g.substring(0,4));d.find(".placard-history-user").attr("userId",b.creator.id).html(g).attr("title",
b.creator.username);d.removeClass("hide");a.append(d)}},pages:function(b,a){b.find(".placard-page-btn").data("pageNo",a.pageNo);b.find("#placard-pre").removeAttr("class").addClass("placard-pre-disable");b.find("#placard-next").removeAttr("class").addClass("placard-next-disable");0<a.totalCount?(a.hasNext&&b.find("#placard-next").removeClass("placard-next-disable").addClass("placard-next"),a.hasPre&&b.find("#placard-pre").removeClass("placard-pre-disable").addClass("placard-pre")):f.notify("\u65e0\u5386\u53f2\u516c\u544a")},
render:function(b){var a=this,d=this.model;d.loadDynamicInfo(function(){$(a.container).find("#placard-textarea").data("placard","");d.placard&&($(a.container).find("#placard-textarea").val(d.placard.content),$(a.container).find("#placard-textarea").data("placard",d.placard.content),$(a.container).find("#placard-textarea").data("placardId",d.placard.id));TEAMS.currentUser.admin?($(a.container).find(".icon-envelope").removeClass("hide"),$(a.container).find(".placard-unreaders").removeClass("hide"),
$(a.container).find(".placard-add").removeClass("hide")):$(a.container).find("#placard-textarea").attr({readonly:!0,unselectable:"on"}).css({"-moz-user-select":"none"});b&&b()});f.layout(".j_unreaderScr")},delegateEvents:function(){var b=this;$el=$(b.container);$el.find("#placard-textarea").autosize();$el.on("click.dynamicinfo",".placard-pre",function(a){a=$el.find(".placard-page-btn").data("pageNo");a=parseInt(a)-1;var d=$el.find(".placard .placard-history");b.model.placardHistorys(a,function(a){d.find(".placard-history-box").remove();
for(var c=a.placards.result,e=0;e<c.length;e++)b.createPlacard(c[e],d.find(".placard-historys"));b.pages(d,a.placards)})});$el.on("click.dynamicinfo",".placard-next",function(a){a=$el.find(".placard-page-btn").data("pageNo");a=parseInt(a)+1;var d=$el.find(".placard .placard-history");b.model.placardHistorys(a,function(a){d.find(".placard-history-box").remove();for(var c=a.placards.result,e=0;e<c.length;e++)b.createPlacard(c[e],d.find(".placard-historys"));b.pages(d,a.placards)})});$el.on("click.dynamicinfo",
".placard-history-btn",function(a){if($el.find(".placard .placard-edit").hasClass("hide"))$(a.target).removeClass("selected"),$el.find(".placard .placard-edit").removeClass("hide"),$el.find(".placard .placard-history").addClass("hide"),$el.find(".placard .placard-unreaders").removeClass("hide"),TEAMS.currentUser.admin&&($el.find(".placard .placard-add").removeClass("hide"),$el.find("#placard-textarea").val($el.find("#placard-textarea").data("placard"))),$(".placard-history-btn").text("\u5386\u53f2");
else{$(a.target).addClass("selected");$el.find(".placard .placard-edit").addClass("hide");$el.find(".placard .placard-history").removeClass("hide");$el.find(".placard .placard-unreaders").addClass("hide");var d=$el.find(".placard .placard-history");b.model.placardHistorys(1,function(a){d.find(".placard-history-box").remove();for(var c=a.placards.result,e=0;e<c.length;e++)b.createPlacard(c[e],d.find(".placard-historys"));b.pages(d,a.placards);$el.find(".placard .placard-add").addClass("hide");$el.find(".placard .placard-submit").addClass("hide")});
$(".placard-history-btn").text("\u8fd4\u56de")}});$el.on("click.dynamicinfo",".placard-history-content",function(a){a.stopPropagation();a=$(this);var d=a.parents(".placard-history-box");d.parent().find(".j_placard").remove();var g=$el.find(".placard-history-card").clone();d.after(g);if(g.hasClass("hide")){$("body").on("click.placardHistory",function(){$("body").off("click.placardHistory");$("body").off("keyup.placardHistory");g.addClass("hide")});$("body").on("keyup.placardHistory",function(a){27==
a.which&&b.remove()});g.find(".date").html(Date.create(d.data("createDate")).format("{yyyy}-{MM}-{dd}"));var c=d.find(".placard-history-user");g.find(".user").html(c.html()).attr("userid",c.attr("userid"));g.find(".j_content").html(a.data("content").replace(/\n|\r|(\r\n)|(\u0085)|(\u2028)|(\u2029)/g,"\x3cbr\x3e"));g.removeClass("hide");a.height();d=1*d.width();c=0==a.parent().prevAll().length?56:20*a.parent().prevAll().length+56;a.offset();g.css("left","10px").css("top",c+"px").css("width",d+"px").css("height",
"200px");a="j_"+$(this).parent().attr("id");d=g.find(".j_content");d.addClass(a);d.css("max-height","150px").attr("auto-scroll","yes");f.layout(".placard-history-card ."+a)}else g.addClass("hide"),$("body").off("click.placardHistory"),$("body").off("keyup.placardHistory")});$el.on("click.dynamicinfo",".placard-history-card .close",function(a){$(this).parents(".placard-history-card");$("body").off("click.placardHistory");$("body").off("keyup.placardHistory");$el.find(".placard-history-card").addClass("hide")});
$el.on("click.dynamicinfo",".placard-history-card",function(a){a.stopPropagation()});$el.on("click.dynamicinfo",".placard-unreaders",function(a){a.stopPropagation();var d=$(this),g=TEAMS.ownCache&&TEAMS.ownCache["portal.mcsTop"]||0;if($el.find("#unreaders-list").hasClass("hide")){$("body").on("click.placardUnreaders",function(){$("body").off("click.placardUnreaders");$el.find("#unreaders-list").addClass("hide")});a=b.model;var c=$el.find("#placard-textarea").data("placardId");c&&$el.find("#placard-textarea").val()&&
a.placardUnreaders(c,function(a){a=a.employees;$el.find("#unreaders-list").empty();if(a&&0<a.length)for(var b=0;b<a.length;b++){var c=a[b];$el.find("#unreaders-list").append("\x3cspan\x3e"+c.username+"\x3c/span\x3e")}else $el.find("#unreaders-list").append("\u65e0\u672a\u9605\u4eba\u5458");$el.find("#unreaders-list").removeClass("hide");a=Math.abs(g)+d.offset().top-10;$el.find("#unreaders-list").css("top",a+"px")})}else $el.find("#unreaders-list").addClass("hide"),$("body").off("click.placardUnreaders")});
TEAMS.currentUser.admin&&($el.on("click.dynamicinfo",".placard-add",function(a){$el.find(".placard .placard-history-btn").addClass("hide");$el.find(".placard .j_btn-remove").addClass("hide");$el.find(".placard .j_iboxSlide").addClass("hide");a.stopPropagation();$el.find("#placard-textarea").val("");$(this).addClass("hide");$el.find(".placard-submit").removeClass("hide");$el.find("#placard-textarea").focus();$("body").on("click.placardSubmit",function(){$("body").off("click.placardSubmit");$el.find(".placard .placard-edit").removeClass("active");
$el.find(".placard-submit").addClass("hide");$el.find(".placard-add").removeClass("hide");var a=$el.find("#placard-textarea").val();(!a||0>=$.trim(a).length||$.trim(a)==$el.find("#placard-textarea").attr("placeholder"))&&$el.find("#placard-textarea").val($el.find("#placard-textarea").data("placard"))})}),$el.on("click.dynamicinfo",".placard-submit",function(a){var d=$el.find("#placard-textarea").val();a.stopPropagation();!d||0>=$.trim(d).length||$.trim(d)==$el.find("#placard-textarea").attr("placeholder")?
(f.notify("\u8bf7\u8f93\u5165\u5185\u5bb9\u540e\u53d1\u5e03"),$el.find("#placard-textarea").focus()):2E3<$.trim(d).length?(f.notify("\u516c\u544a\u5185\u5bb9\u8bf7\u8f93\u51652000\u5b57\u4ee5\u5185"),$el.find("#placard-textarea").focus()):b.model.createPlacard($.trim(d),function(a){$el.find("#placard-textarea").data("placard",$el.find("#placard-textarea").val());$el.find("#placard-textarea").data("placardId",a.placard.id);$el.find(".placard .placard-submit").addClass("hide");$el.find(".placard .placard-edit").removeClass("active");
$el.find(".placard-add").removeClass("hide");$("body").off("click.placardSubmit");$el.find(".placard .placard-history-btn").removeClass("hide");$el.find(".placard .j_btn-remove").removeClass("hide");$el.find(".placard .j_iboxSlide").removeClass("hide");f.notify("\u56e2\u961f\u516c\u544a\u65b0\u5efa\u6210\u529f");3>=TEAMS.currentTenant.usedLicense&&(b.inviteModalView=new c,$(b.inviteModalView.el).find(".modal-title").html("\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u9a6c\u4e0a\u9080\u8bf7\u81ea\u5df1\u7684\u540c\u4e8b\u6765\u52a0\u5165\uff0c\u4e00\u8d77\u4f53\u9a8c\u4e91\u529e\u516c\u534f\u4f5c"),
b.inviteModalView.render())})}),$el.on("click.dynamicinfo","#placard-textarea",function(a){a.stopPropagation();a=$(this);var b=$el.find(".placard .placard-change"),g=$el.find(".placard .placard-submit");b.hasClass("hide")&&g.hasClass("hide")&&($el.find(".placard .placard-history-btn").addClass("hide"),$el.find(".placard .j_btn-remove").addClass("hide"),$el.find(".placard .j_iboxSlide").addClass("hide"),$el.find(".placard .placard-edit").addClass("active"),$el.find(".placard-add").addClass("hide"),
a.data("placardId")?b.removeClass("hide"):g.removeClass("hide"),$("body").on("click.placardSubmit",function(a){$(a.target).hasClass("placard-change")||($("body").off("click.placardSubmit"),b.addClass("hide"),g.addClass("hide"),$el.find(".placard-add").removeClass("hide"),$el.find(".placard .placard-edit").removeClass("active"),$el.find(".placard #placard-textarea").removeClass("focus"))}))}),$el.on("click.dynamicinfo",".placard-change",function(a){if($el.find("#placard-textarea").val()!=$el.find("#placard-textarea").data("placard")){var d=
$el.find("#placard-textarea").val();2E3<$.trim(d).length?(f.notify("\u516c\u544a\u5185\u5bb9\u8bf7\u8f93\u51652000\u5b57\u4ee5\u5185"),$el.find("#placard-textarea").focus()):(""!=$.trim(d)?b.model.updatePlacard($.trim(d),$el.find("#placard-textarea").data("placardId"),function(a){$el.find("#placard-textarea").data("placard",$el.find("#placard-textarea").val());$el.find("#placard-textarea").data("placardId",a.placard.id);$el.find(".placard .placard-change").addClass("hide");$el.find(".placard .placard-add").removeClass("hide");
$el.find(".placard .placard-edit").removeClass("active");$("body").off("click.placardSubmit");$el.find(".placard .placard-history-btn").removeClass("hide");$el.find(".placard .j_btn-remove").removeClass("hide");$el.find(".placard .j_iboxSlide").removeClass("hide");f.notify("\u56e2\u961f\u516c\u544a\u4fee\u6539\u6210\u529f")}):f.notify("\u8bf7\u8f93\u5165\u5185\u5bb9\u540e\u518d\u4fdd\u5b58"),a.stopPropagation())}}),$el.off("blur.dynamicinfo","#placard-textarea").on("blur.dynamicinfo","#placard-textarea",
function(a,b){$el.find(".placard .placard-history-btn").removeClass("hide");$el.find(".placard .j_btn-remove").removeClass("hide");$el.find(".placard .j_iboxSlide").removeClass("hide")}))},remove:function(){$(this.container).off(".dynamicinfo");this.model=null;this.inviteModalView&&(this.inviteModalView.remove(),this.inviteModalView=null)}});m.exports=h});
define("teams/base/timeline",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.userId=e.userId;this.year=e.year;this.type=e.type;this.serialNumber=e.serialNumber;this.el=e.container;this.parentEl=e.parentEl;$(this.el).html(f.template("component.timeline"))},delegateEvents:function(){var e=this,c=$(this.el);c.on("click.timeline",".j_timetree_spread",function(){var b=$(this).parent(),a=b.next(".timetree-weeklist"),d=b.parent().siblings(".timetree-month").parent().find(".timetree-weeklist");
a.is(":visible")?(a.slideUp("fast"),b.addClass("active")):($(".timetree-head").removeClass("active"),b.addClass("active"),d.slideUp("fast"),a.slideDown("fast"));$(".j_week").removeClass("active");b=$(this).parent().find("strong").text();a=$(".reports-selectyear span").text();ROUTER.navigate("/workreport/"+e.userId+"/"+a+"/month/"+b,{trigger:!0});$(".reports-panel").data("year",a).data("type","month").data("serialNumber",b)});c.on("click.timeline",".dropdown-menu a",function(b){$(this).parents(".dropdown-menu").slideUp(100);
$(this).parents(".dropdown-menu-toggle").removeData("showTimer");b=$(this).text();$(this).parents(".dropdown").find("span").text(b);e.genYearSelect(b,!0);e.genTimeLineByYear(b)});c.on("click.timeline",".halfyear",function(b){b=$(this);e.changeCSS(b);b=$(".reports-selectyear span").text();ROUTER.navigate("/workreport/"+e.userId+"/"+b+"/halfYear",{trigger:!0});$(".reports-panel").data("year",b).data("type","halfYear")});c.on("click.timeline",".endyear",function(b){b=$(this);e.changeCSS(b);b=$(".reports-selectyear span").text();
ROUTER.navigate("/workreport/"+e.userId+"/"+b+"/year",{trigger:!0});$(".reports-panel").data("year",b).data("type","year")});c.on("click.timeline",".season",function(b){b=$(this);e.changeCSS(b);b=b.attr("serialNumber");var a=$(".reports-selectyear span").text();ROUTER.navigate("/workreport/"+e.userId+"/"+a+"/season/"+b,{trigger:!0});$(".reports-panel").data("year",a).data("type","season").data("serialNumber",b)});c.on("click.timeline",".j_week",function(b){var a=$(this);$(".j_week").each(function(a,
b){$(b).hasClass("active")&&$(b).removeClass("active")});a.hasClass("active")||a.addClass("active");a.parent().prev().removeClass("active");$(".reports-body").data("reportId",null);b=$(".reports-selectyear span").text();a=a.find("span").text();ROUTER.navigate("/workreport/"+e.userId+"/"+b+"/week/"+a,{trigger:!0});$(".reports-panel").data("year",b).data("type","week").data("serialNumber",a)})},render:function(){$(this.el);this.renderTimeLine();f.layout("#timeline");$("#myReport").addClass("router").attr("href",
"/workreport/"+this.userId)},changeCSS:function(e){e.hasClass("season")&&(1==e.attr("serialNumber")?($("div[serialnumber\x3d1]").addClass("active"),$("div[serialnumber\x3d3]").removeClass("active")):($("div[serialnumber\x3d3]").addClass("active"),$("div[serialnumber\x3d1]").removeClass("active")),$(".timetree-weeklist").css("display","none"),$(".halfyear").removeClass("active"),$(".endyear").removeClass("active"),$(".month").removeClass("active"),$(".j_week").removeClass("active"));e.hasClass("halfyear")&&
($(".halfyear").addClass("active"),$(".timetree-weeklist").css("display","none"),$("div[serialnumber\x3d1]").removeClass("active"),$("div[serialnumber\x3d3]").removeClass("active"),$(".endyear").removeClass("active"),$(".month").removeClass("active"),$(".j_week").removeClass("active"));e.hasClass("endyear")&&($(".endyear").addClass("active"),$(".timetree-weeklist").css("display","none"),$("div[serialnumber\x3d1]").removeClass("active"),$("div[serialnumber\x3d3]").removeClass("active"),$(".halfyear").removeClass("active"),
$(".month").removeClass("active"),$(".j_week").removeClass("active"))},renderTimeLine:function(){this.type?(this.genYearSelect(this.year),"week"==this.type?this.genTimeLineByYear(this.year,this.serialNumber):"month"==this.type?this.genTimeLineByYear(this.year,null,this.serialNumber):this.genTimeLineByYear(this.year,-1,-1)):(this.genYearSelect(),this.genTimeLineByYear())},genYearSelect:function(e,c){var b=new Date(TEAMS.nowTime),a=e?e:b.getFullYear(),d=b.getISOWeek();if(e){if($("#curYear").html(e),
c&&ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/week/1",{trigger:!0}),this.type)switch(this.type){case "year":ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/year",{trigger:!0});break;case "season":ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/season/"+this.serialNumber,{trigger:!0});break;case "halfYear":ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/halfYear",{trigger:!0});break;case "month":ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/month/"+this.serialNumber,{trigger:!0});
break;case "week":ROUTER.navigate("/workreport/"+this.userId+"/"+e+"/week/"+this.serialNumber,{trigger:!0})}}else 1==b.getISOWeek()&&12==b.getMonth()+1&&(a=parseInt(a)+1,d=1),ROUTER.navigate("/workreport/"+this.userId+"/"+a+"/week/"+d,{trigger:!0})},genTimeLineByYear:function(e,c,b){var a=new Date(TEAMS.nowTime);e=e?e:1==a.getISOWeek()&&12==a.getMonth()+1?a.getFullYear()+1:a.getFullYear();var d=this.getWeekDayDate(e,1,1),d=this.getWeeksOfYear(d,e);c=c?c:a.getISOWeek();var g;(new Date(TEAMS.nowTime)).getMonth();
var a=2,l=1,f=!0,k=!0,r=!0,p,s=$(".reports-timetree"),h=!1;s.html("");for(var w=1;w<=d;w++)g=this.getWeekDayDate(e,w,1),3<l&&f?(f=$("#season").clone(),f.find("span").text("\u7b2c\u4e00\u5b63\u5ea6"),f.find(".season").attr("serialNumber",1),s.append(f.html()),f=!1):6<l&&k?(k=$("#halfyear").clone(),s.append(k.html()),k=!1):9<l&&r&&(r=$("#season").clone(),r.find("span").text("\u7b2c\u4e09\u5b63\u5ea6"),r.find(".season").attr("serialNumber",3),s.append(r.html()),r=!1),1!=w&&(l=g.getMonth()+1),h=e==g.getFullYear()||
e!=g.getFullYear()&&1==w?!0:!1,a!=l?(p&&s.append(p.html()),a=l,p=$("#month").clone(),p.find("strong").text(l),g=$("#week").clone(),h&&l==b&&(p.find(".timetree-head").addClass("active"),p.find(".timetree-weeklist").css("display","block"))):g=$("#week").clone(),h&&w==c&&!b?(g.find("span").text(w),g.find("li").addClass("active"),p.find(".timetree-weeklist").css("display","block")):g.find("span").text(w),p.find(".timetree-weeklist").append(g.html()),w==d&&($(".reports-timetree").append(p.html()),g=$("#endyear").clone(),
g.find("span").text(e+"\u5e74\u5ea6"),s.append(g.html()))},getWeeksOfYear:function(e,c){return Math.ceil(((0==c%4&&0!=c%100||0==c%400?366:365)-e.getDay())/7)},getWeekDayDate:function(e,c,b){e=new Date(e,"0","1");var a=e.getTime();e.setTime(a+6048E5*(c-1));return this.getNextDate(e,b)},getNextDate:function(e,c){c%=7;var b=e.getDay(),a=e.getTime();e.setTime(a+864E5*(c-b));return e},update:function(e,c,b,a,d){this.userId=e;this.year=c;this.type=b;this.serialNumber=a;this.isMyReport=d},remove:function(){$(this.el).off(".timeline")}});
m.exports=h});
define("teams/base/portalsettingview",["teams/utils","teams/models/portalsettingmodel","jquery.iphoneradio.js"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/portalsettingmodel");h("jquery.iphoneradio.js");h=Backbone.View.extend({initialize:function(c){this.el=c.container||"#mainContainer";this.userId=c.userId||TEAMS.currentUser.id;this.model=new e(c);this.page=c.page},delegateEvents:function(){var c=this;$(c.el);$("body").on("click.portalsetting",".goto-top",function(b){f.gotoTop(c.el+
" .e-title")});$(this.el).on("click.portalsetting",".reset-portalsetting a",function(b){c.model.resetPortals({},function(a){c.opt="reset";c.render();f.notify("\u91cd\u7f6e\u6210\u529f!")});return!1})},render:function(){var c=this;c.model.loadPortalSetting(this.userId,function(b){$(c.el).html(f.template("base.portalsetting",b));$(c.el).find(".on_off :checkbox").tzCheckbox({labels:["",""]}).click(function(){var a={},b=$(this).parents("li.on_off");a.id=b.find(".menu_name").attr("data-id");a.isshow=$(this).next(".tzCheckBox").hasClass("checked")?
1:0;c.model.updatePortalSetting(a,function(a){f.notify("\u66f4\u65b0\u6210\u529f");if(c.page){for(var d=b.parents("#sortmenus").children("li"),g=[],e=0,l=d.length;e<l;e++)g.push($(d[e]).find(".menu_name").attr("data-id"));c.page.trigger("showModule",{id:a.id,isShow:a.isshow,arr:g})}})});$("#sortmenus").sortable({stop:function(a,b){c.updatePortalOrders()}});$("#sortmenus").disableSelection();if("reset"==c.opt&&c.page){b=$(c.el).find("#sortmenus").children("li");for(var a=[],d=[],g=0,e=b.length;g<e;g++){var n=
$(b[g]),k={},r=n.find(".menu_name").attr("data-id");a.push(r);k.id=r;k.isShow=n.find(".tzCheckBox").hasClass("checked")?"1":"0";k.arr=a;d.push(k)}c.page.trigger("showModule",{opt:"reset",checkedArr:d})}})},updatePortalOrders:function(){var c=this,b=$("#sortmenus li"),a=[],d=[],g={},e,n,k;$.each(b,function(b,g){e=$(g);n=e.find(".menu_name").attr("data-id");k=b;a.push(n);d.push(k)});g.portalIds=a.join(",");g.portalOrders=d.join(",");this.model.updatePortalOrders(g,function(a){f.notify("\u66f4\u65b0\u6210\u529f");
if(c.page){a=[];for(var d=0,g=b.length;d<g;d++)a.push($(b[d]).find(".menu_name").attr("data-id"));c.page.trigger("sortModule",{arr:a})}})},remove:function(){var c=$(this.el);c.off(".portalsetting");c.empty()}});m.exports=h});
define("teams/base/entityboxbase",["teams/utils","teams/blog/blogpostview","teams/calendar/agenda","teams/calendar/agendainfo","teams/blog/weeklyblog"],function(h,q,m){var f=h("teams/utils"),e=h("teams/blog/blogpostview"),c=h("teams/calendar/agenda"),b=h("teams/calendar/agendainfo"),a=h("teams/blog/weeklyblog");h=Backbone.View.extend({el:"#entitybox",initialize:function(a){this.target=a.target;this.entityId=a.entityId;this.entityModule=a.entityModule;this.entityValue=a.entityValue;this.callbacks=
a.callbacks;1>$("#entitybox").length?$("body").append(f.template("base.entitybox")):$("#entitybox").trigger("destroy")},delegateEvents:function(){var a=this;$("#entitybox").on("hidden.bs.modal.EntityBox",function(){a.remove()});$("#entitybox").on("shown.bs.modal.EntityBox",function(b){a.callbacks&&a.callbacks.afterOpen&&a.callbacks.afterOpen();a.scroller&&($("#entitybox #entitybox-container").find(a.scroller).hasClass("mCustomScrollbar")||$("#entitybox #entitybox-container").find(a.scroller).mCustomScrollbar({theme:"darkblue"}),
$("#entitybox #entitybox-container").find(a.scroller).height(465).mCustomScrollbar("update"))});$("#entitybox").on("remove.EntityBox","#btn-linkdomain",function(a){$("#entitybox").modal("hide")});$("#entitybox").on("remove.EntityBox","#btn-delete",function(b){$("#entitybox").modal("hide");a.target.attr("need-delete")&&"no"==a.target.attr("need-delete")||a.target.trigger("remove")});$("#entitybox").on("click.EntityBox",".btn-back",function(a){$("#entitybox").modal("hide");a.stopPropagation()});$("#entitybox").on("click.EntityBox",
".entitybox-toggle",function(a){});$("#entitybox").on("shown",function(b){a.callbacks&&a.callbacks.afterOpen&&a.callbacks.afterOpen()});$("#entitybox").on("destroy",function(b){a.entityView&&(a.entityView.remove(),a.entityView=null);$("#entitybox").off(".EntityBox")})},render:function(){var d=this,g="";d.scroller="";switch(this.entityModule){case "blog":g="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u62a5\u4fe1\u606f\x3c/h5\x3e";this.entityView=new e({container:"#entitybox-container",callback:function(){d.close()}});
break;case "agenda":var l=d.options;if(l.detail){g="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u7a0b\u8be6\u60c5\x3c/h5\x3e";l.container="#entitybox-container";this.entityView=new b(l);d.scroller="#agendaInfo-wrapper";break}g="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u7a0b\x3c/h5\x3e";void 0==l.allDay&&(l.allDay=!0);if(!l.start){var f=new Date,k=f.getFullYear(),r=f.getMonth(),r=r+1,r=10>r?"0"+r:r,f=f.getDate(),p=f+1,p=k+"-"+r+"-"+(10>p?"0"+p:p);l.start=Date.create(k+"-"+r+"-"+(10>f?"0"+f:f)).getTime();
l.end=Date.create(p).getTime()}"new"==l.entityId&&(l.entityId=null);l.container="#entitybox-container";l.callback=this.callbacks?this.callbacks.afterOperate:null;this.entityView=new c(l);d.scroller="#agenda-wrapper";break;case "weeklyblog":g="\x3ch5 class\x3d'modal-title'\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e",l=d.options,l.container="#entitybox-container",l.callback=this.callbacks?this.callbacks.afterOperate:null,this.entityView=new a({container:"#entitybox-container",userId:this.entityId,
date:this.entityValue,callback:function(){d.close()}}),d.scroller="#blogs-wrapper"}$("#entitybox").find(".modal-header h5").remove();$("#entitybox").find(".modal-header").append(g);$("#entitybox").modal();this.entityView.render()},close:function(){$("#entitybox").modal("hide")},remove:function(){this.entityView&&(this.entityView.remove(),this.entityView=null);$("#entitybox").off(".EntityBox");$("#entitybox").off(".bs.modal");$("#entitybox").remove()}});m.exports=h});
define("teams/base/adviseview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({el:"#advise",initialize:function(e){1>$("#advise").length&&$("body").append(f.template("base.advise"))},delegateEvents:function(){var e=this,c=$("#advise");c.on("hidden.bs.modal",function(){e.remove()});c.on("click.advise",".advise-submit",function(){var b=c.find("#advise-textarea").val();b&&e.advise(b,function(a){a.adviseId&&(c.find("#advise-textarea").val("").trigger("autosize.resize"),
f.notify("\u611f\u8c22\u60a8\u7684\u5b9d\u8d35\u610f\u89c1\uff01"),e.close())})});c.on("click.advise",".advise-cancel",function(){e.close()});c.off("keydown.advise","#advise-textarea").on("keydown.advise","#advise-textarea",function(b){b.ctrlKey&&13==b.keyCode&&c.find(".advise-submit").click()})},advise:function(e,c){$.ajax({type:"post",dataType:"json",url:"/advise.json",data:{content:e},success:function(b){c&&c(b)}})},render:function(){$("#advise").modal();$("#advise").find("#advise-textarea").autosize()},
close:function(){$("#advise").modal("hide")},remove:function(){$("body").off(".advise");$("#advise").off(".advise");$("#advise").remove()}});m.exports=h});
define("teams/base/accountbinding",["teams/utils","teams/component/validation","teams/models/profilemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/validation"),c=h("teams/models/profilemodel");h=Backbone.View.extend({el:"",timingObj:null,initialize:function(b){this.userId=b.userId?b.userId:TEAMS.currentUser.id;this.parentEl=b.parentEl;this.propertyName=b.propertyName;this.toggle=b.toggle;this.el="#accountbinding";this.model=new c(b);$("body").append(f.template("base.accountbinding"))},
delegateEvents:function(){var b=this,a=$(b.el);a.on("hidden.bs.modal",function(a){b.remove()});a.on("click.accountbinding",".sendCaptcha_js",function(){var a=$(this);b.sendCaptcha(a)});a.on("click.accountbinding","#oldVeri",function(){var a=$(this),g=a.attr("propertyName");"removeMobile"==g||"removeEmail"==g?b.updateBinding(a):b.detectCaptcha(a)});a.on("click.accountbinding","#updateBinding",function(){var a=$(this);b.updateBinding(a)})},render:function(){this.showBinDingDiv()},showBinDingDiv:function(){null!=
this.timingObj&&(clearInterval(this.timingObj.data("intervalId")),this.timingObj.html("\u53d1\u9001\u9a8c\u8bc1\u7801"),this.timingObj.data("time",0),this.timingObj=null);var b=this.propertyName,a=this.toggle,d=$(this.el);d.find("#binding").hide();d.find("#change").hide();var g=$(this.parentEl),c=g.find("#employee-email").val(),g=g.find("#employee-mobile").val(),e="",k="",f="",p="",s="";switch(b){case "bindingEmail":e=d.find("#binding");k="\u7ed1\u5b9a\u90ae\u4ef6";f=c;p="\u90ae\u4ef6";s="email";
break;case "againBindingEmail":e=d.find("#change");k="\u91cd\u65b0\u7ed1\u5b9a\u90ae\u4ef6";f=c;p="\u90ae\u4ef6";s="email";break;case "removeEmail":e=d.find("#change");k="\u89e3\u9664\u7ed1\u5b9a\u90ae\u7bb1";f=c;p="\u90ae\u4ef6";s="email";break;case "bindingMobile":e=d.find("#binding");k="\u7ed1\u5b9a\u624b\u673a";f=g;p="\u624b\u673a";s="mobile";break;case "againBindingMobile":e=d.find("#change");k="\u91cd\u65b0\u7ed1\u5b9a\u624b\u673a";f=g;p="\u624b\u673a";s="mobile";break;case "removeMobile":e=
d.find("#change"),k="\u89e3\u9664\u7ed1\u5b9a\u624b\u673a",f=g,p="\u624b\u673a",s="mobile"}0<=b.indexOf("remove")?e.find("#oldVeri").html("\u786e\u5b9a"):e.find("#oldVeri").html("\u4e0b\u4e00\u6b65");"change"==e.attr("id")?(this.bindingView=d.find("#binding"),d.find("#binding").remove()):(this.bindingView=d.find("#change"),d.find("#change").remove());e.find("h5.modal-title").html(k);e.find("#bindingChange").val(f);e.find("#bindingChange").attr("v-name",s);e.find("#bindingChange").attr("placeholder",
p);e.find("#oldProperty").html(f);e.find(".modal-body .changeTitle_js").html(p);e.find("#captcha").val("");e.find("#oldVeri,#updateBinding").attr("propertyName",b);e.find(".sendCaptcha_js").attr("propertyName",b);e.find(".sendCaptcha_js").attr("changeValue",f);e.find(".passwd-modal-tip").html("\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u7684\u5e10\u53f7\u5b89\u5168\uff0c\u66f4\u6362\u5bc6\u4fdd"+p+"\u524d\u8bf7\u5148\u8fdb\u884c\u5b89\u5168\u9a8c\u8bc1");e.show();"noToggle"!=a?d.modal({backdrop:"static"}):(e.find("#bindingChange").val(""),
e.find("#oldProperty").html(""))},sendCaptcha:function(b){var a=this;if(!(0<b.data("time"))){var d=b.attr("propertyName"),g=b.attr("changeValue");if("bindingMobile"==d||"bindingEmail"==d){g=$("#binding #bindingChange").val();if(""==$.trim(g)){d=$("#binding #bindingChange").attr("placeholder");f.notify("\u8bf7\u586b\u5199"+d);return}if(!e.validate($("#binding #bindingChange")))return $("#binding #bindingChange").removeClass("error"),$("#binding #bindingChange").focus(),!1}b.data("time",60);a.model.sendCaptcha({employeeId:a.userId,
propertyName:d,email:g,mobile:g},function(d){d.message?(f.notify(d.message),b.data("time",0)):(b.addClass("disabled"),a.timingObj=b,d=setInterval(function(){a.captchaCountdown()},1E3),a.timingObj.data("intervalId",d),a.timingObj.data("isSendCaptcha","send"))})}},captchaCountdown:function(){var b=this.timingObj.data("time");b--;this.timingObj.html("\u91cd\u65b0\u53d1\u9001("+b+")");this.timingObj.data("time",b);0>=b&&(clearInterval(this.timingObj.data("intervalId")),this.timingObj.removeClass("disabled"),
this.timingObj.html("\u91cd\u65b0\u53d1\u9001"))},detectCaptcha:function(b){var a=this,d=$(a.el),g=b.attr("propertyName");"againBindingMobile"==g?g="bindingMobile":"againBindingEmail"==g&&(g="bindingEmail");var c=d.find("#change #captcha").val(),e=d.find("#change #oldProperty").html();""==$.trim(c)?(d.find("#change #captcha").focus(),f.notify("\u586b\u5199\u9a8c\u8bc1\u7801")):a.model.detectCaptcha({captcha:c,email:e,mobile:e},function(d){d.message?f.notify(d.message):($(a.el).find(".modal-content").append(a.bindingView),
b.attr("propertyName",g),b.attr("toggle","noToggle"),a.propertyName=g,a.toggle="noToggle",a.showBinDingDiv())})},updateBinding:function(b){var a=this,d=$(a.el);b=b.attr("propertyName");var g="#binding";if("removeMobile"==b||"removeEmail"==b)g="#change";var c=d.find(g+" #captcha").val(),n=d.find(g+" #bindingChange").val();if("removeMobile"==b||"removeEmail"==b)n=d.find(g+" #oldProperty").html();if(""==$.trim(c))d.find(g+" #captcha").focus(),f.notify("\u586b\u5199\u9a8c\u8bc1\u7801");else if(""==$.trim(n))d.find(g+
" #bindingChange").focus(),b=d.find(g+" #bindingChange").attr("placeholder"),f.notify("\u586b\u5199"+b);else{if("removeMobile"!=b&&"removeEmail"!=b&&!e.validate(d.find("#binding #bindingChange")))return d.find(g+" #bindingChange").removeClass("error"),d.find(g+"#binding #bindingChange").focus(),!1;a.model.updateBinding({employeeId:a.userId,propertyName:b,email:n,mobile:n,captcha:c},function(b){if(b.message)f.notify(b.message);else{var g="\u7ed1\u5b9a\u6210\u529f",c=$(a.parentEl);switch(b.propertyName){case "bindingEmail":c.find("#employee-email-span").html(n).show();
c.find("#changeEmail").html("[\u66f4\u6362\u7ed1\u5b9a]");c.find("#changeEmail").attr("propertyName","againBindingEmail");c.find("#employee-email").val(n).hide();break;case "againBindingEmail":c.find("#employee-email-span").html(n);c.find("#changeEmail").html("[\u66f4\u6362\u7ed1\u5b9a]");c.find("#changeEmail").attr("propertyName","againBindingEmail");c.find("#employee-email").val(n);break;case "removeEmail":c.find(".remove_js").hide();c.find("#employee-email").val(n).show();c.find("#changeEmail").html("[\u7ed1\u5b9a]");
c.find("#changeEmail").attr("propertyName","bindingEmail");c.find("#employee-email-span").html(n).hide();g="\u89e3\u7ed1\u6210\u529f";break;case "bindingMobile":c.find("#employee-mobile-span").html(n).show();c.find("#changeMobile").html("[\u66f4\u6362\u7ed1\u5b9a]");c.find("#changeMobile").attr("propertyName","againBindingMobile");c.find("#employee-mobile").val(n).hide();break;case "againBindingMobile":c.find("#employee-mobile-span").html(n);c.find("#changeMobile").html("[\u66f4\u6362\u7ed1\u5b9a]");
c.find("#changeMobile").attr("propertyName","againBindingMobile");c.find("#employee-mobile").val(n);break;case "removeMobile":c.find(".remove_js").hide(),c.find("#employee-mobile").val(n).show(),c.find("#changeMobile").html("[\u7ed1\u5b9a]"),c.find("#changeMobile").attr("propertyName","bindingMobile"),c.find("#employee-mobile-span").html(n).hide(),g="\u89e3\u7ed1\u6210\u529f"}f.notify(g);var e=b.userImpl;null!=e&&null!=e.email&&null!=e.mobile&&c.find(".remove_js").show();c.find(".accounts_js").find("span").each(function(a){var b=
"",b=0==a?null==e.account?e.email:e.account:e.mobile;$(this).html(b)});d.modal("hide")}})}},remove:function(){var b=$(this.el);b.off(".accountbinding");b.remove()}});m.exports=h});
define("teams/base/preview",function(h,q,m){h=Backbone.View.extend({initialize:function(f){this.afterJqObj=f.afterJqObj;this.container=f.container;this.previewType=f.previewType||"";this.rel=f.rel||"0";this.maxSize=TEAMS.currentTenant?f.maxSize||("normal"==TEAMS.currentTenant.status?10:5):5;f.fileObj?(f=f.fileObj,this.isImage=f.image,this.docFileType=f.docType,this.docFileId=f.id,this.fileSize=f.size,this.title=f.name||"\u9884\u89c8"):f.document&&(f=f.document,this.isImage=f.docFile.image,this.docFileType=
f.docFile.docType,this.docFileId=f.docFile.id,this.fileSize=f.docFile.size)},initEvents:function(){},render:function(){var f=this.container,e=this.afterJqObj;this.isImage?(e.after("\x3ca id\x3d'document-preview-"+this.docFileId+"' rel\x3d'"+this.rel+"' title\x3d'"+this.title+"' class\x3d'document-preview-btn btn btn-xs btn-info' href\x3d''\x3e\u9884\u89c8\x3c/a\x3e"),"remote"==this.previewType?f.find("#document-preview-"+this.docFileId).addClass("fancybox").attr("type","image").attr("href",crmContext.remoteDownloadUrl+
"/remotedownload/"+this.docFileId+"/ETEAMSID/true?type\x3dremote"):f.find("#document-preview-"+this.docFileId).addClass("fancybox").attr("type","image").attr("href","/base/download/"+this.docFileId+"?type\x3d"+this.previewType+"\x26timestamp\x3d"+Date.parse(new Date)),f.find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})):"office"==this.docFileType||"pdf"==this.docFileType?(e.after("\x3ca id\x3d'document-preview-"+
this.docFileId+"'  data-value\x3d'"+this.docFileId+"'  title\x3d'\u9884\u89c8' class\x3d'document-preview-btn btn btn-xs btn-info' href\x3d''\x3e\u9884\u89c8\x3c/a\x3e"),"version"==this.previewType?f.find("#document-preview-"+this.docFileId).attr({href:"/wopi/files/preview?id\x3d"+this.docFileId+"\x26type\x3d"+this.previewType,target:"_blank"}):"remote"==this.previewType?f.find("#document-preview-"+this.docFileId).attr({href:"/remote/previewremote/allView?id\x3d"+this.docFileId,target:"_blank"}):
f.find("#document-preview-"+this.docFileId).attr({href:"/wopi/files/preview?id\x3d"+this.docFileId,target:"_blank"}),this.fileSize>1048576*this.maxSize&&f.find("#document-preview-"+this.docFileId).attr("disabled","true").css({"background-color":"#ccc","border-color":"#ccc"}).after("\x3ca data-value\x3d'"+this.docFileId+"'  style\x3d'color:#ccc;size:10px;text-decoration : none;cursor:default;margin-left:5px;'\x3e\u8d85\u8fc7\u9884\u89c8\u6700\u5927\u9650\u5236"+this.maxSize+"M\x3c/a\x3e")):"text"==
this.docFileType&&(e.after("\x3ca id\x3d'document-preview-"+this.docFileId+"'  data-value\x3d'"+this.docFileId+"'  title\x3d'\u9884\u89c8' class\x3d'document-preview-btn btn btn-xs btn-info' href\x3d''\x3e\u9884\u89c8\x3c/a\x3e"),"remote"==this.previewType?f.find("#document-preview-"+this.docFileId).attr({href:"/remote/previewremote/allView?id\x3d"+this.docFileId,target:"_blank"}):f.find("#document-preview-"+this.docFileId).attr({href:"/wopi/files/preview/txtView?id\x3d"+this.docFileId+"\x26type\x3d"+
this.previewType,target:"_blank"}))},remove:function(){}});m.exports=h});
define("teams/base/configmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},deleteConfig:function(f,e){$.ajax({type:"POST",url:"/base/configuration/"+f+".json",dataType:"json",data:{_method:"DELETE"},success:function(c){e&&e(c)}})},saveConfig:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"POST",url:"/base/configuration/saveConfig.json",dataType:"json",data:JSON.stringify({config:f}),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/base/versioninfoview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({container:"#mainContainer",type:"pc",initialize:function(e){e.type&&(this.type=e.type);$(this.container).html(f.template("base.versioninfo"));f.layout("#version-container")},delegateEvents:function(){var e=this,c=$(this.container);$("body").on("click.profile",".goto-top",function(b){f.gotoTop("#version-container")});c.on("click.versioninfo",".version-tabs li",function(b){b=$(this);c.find(".version-tabs li.active").removeClass("active");
b.addClass("active");b=b.attr("data-type");e.type=b;c.find(".cbp_tmtimeline").empty();e.showLoading();e.load(b,function(a){e.renderData(a)})})},render:function(){var e=$(this.container);e.find("#noresult .year").html(Date.create().format("{yyyy}"));e.find("#noresult .date").html(Date.create().format("{MM}-{dd}"));e.find("#noresult .cbp_tmicon").html(Date.create().format("{yyyy}"));e.find(".version-tabs li.pc").trigger("click")},renderData:function(e){if((e=e.appVersions)&&0<e.length)for(var c=0;c<
e.length;c++)this.createVersionBox(e[c]);else e=$(this.container).find("#noresult").clone().removeAttr("id"),$(this.container).find(".cbp_tmtimeline").append(e);$("#version-loading").addClass("hide")},createVersionBox:function(e){var c=$(this.container).find("#version-clone").clone().attr("id",e.id);c.data("id",e.id);c.data("type",e.appType);c.find(".version").html(e.currentVersion);var b=Date.create(e.addTime);c.data("year",b.format("{yyyy}"));c.find(".year").html(b.format("{yyyy}"));c.find(".date").html(b.format("{MM}-{dd}"));
c.find(".cbp_tmicon").html(b.format("{yyyy}")).css("top",null);c.find(".content").html(this.convert2Html(e.updateLog));c.find(".content a").attr("target","_blank");e=$(this.container).find(".cbp_tmtimeline li:last");1<=e.size()&&e.data("year")==c.data("year")&&c.find(".cbp_tmicon").addClass("hide");$(this.container).find(".cbp_tmtimeline").append(c)},showLoading:function(){$("#version-loading").removeClass("hide")},convert2Html:function(e){return e?e.replace(/\r\n|\n/g,"\x3cbr/\x3e"):e},load:function(e,
c){$.ajax({type:"get",url:"/remote/version/findbytype.json",dataType:"json",data:{appType:e||"pc"},success:function(b){c&&c(b)}})},remove:function(){this.undelegateEvents();$(this.container).off(".versioninfo")}});m.exports=h});
define("teams/base/introview",["teams/utils","teams/component/invitemodalview"],function(h,q,m){h("teams/utils");var f=h("teams/component/invitemodalview");h=Backbone.View.extend({el:"",initialize:function(e){},render:function(){view=this;view.intro();TEAMS.currentUser.loginCount=1},intro:function(){var e=this;introJs().setOptions({steps:[{element:"#navigation #j_navwrap",intro:"\u5728\u6b64\u60a8\u53ef\u4ee5\u5feb\u901f\u5207\u6362\u5230\u5176\u4ed6\u5e94\u7528\u6a21\u5757\uff1a\x3cbr/\x3e1\u3001\u9996\u9875\uff1a\u5feb\u901f\u4e86\u89e3\u4e0e\u60a8\u76f8\u5173\u7684\u6240\u6709\u6a21\u5757\u5de5\u4f5c\u5185\u5bb9\uff1b \x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3cbr/\x3e 2\u3001\u4efb\u52a1\uff1a\u5b89\u6392\u60a8\u7684\u6bcf\u4e00\u5929\u5de5\u4f5c\u6216\u5206\u914d\u7ed9\u5176\u4ed6\u540c\u4e8b\uff1b\x3cbr/\x3e 3\u3001\u65e5\u62a5\uff1a\u6c47\u62a5\u5f53\u5929\u7684\u8fdb\u5c55\u548c\u4e86\u89e3\u5176\u4ed6\u540c\u4e8b\u6bcf\u4e00\u5929\u7684\u5de5\u4f5c\u6210\u6548\uff1b\x3cbr/\x3e 4\u3001\u5ba2\u6237\uff1a\u96c6\u4e2d\u7ba1\u7406\u60a8\u548c\u56e2\u961f\u7684\u5ba2\u6237\u6863\u6848\u8d44\u6599\u548c\u6bcf\u4e00\u6b65\u7684\u8ddf\u8e2a\u8054\u7edc\uff1b\x3cbr/\x3e5\u3001\u5ba1\u6279\uff1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u5f85\u529e\u5e76\u53ef\u81ea\u5b9a\u4e49\u5ba1\u6279\uff1b\x3cbr/\x3e\x3cbr/\x3e\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u6a21\u5757\uff1a\x3cbr\x3e\u9879\u76ee\u3001\u6587\u6863\u3001\u65e5\u7a0b\u3001\u62a5\u544a\u3001\u62a5\u8868\u3002",
position:"bottom"},{element:"#navigation #j_quickBuild",intro:"\u5728\u6b64\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5feb\u901f\u5efa\u7acb\u5404\u677f\u5757\u7684\u4e8b\u9879\uff0c\u5305\u62ec\u65b0\u5efa\u65e5\u62a5\u3001\u4efb\u52a1\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u5ba1\u6279\u3001\u9879\u76ee\u3001\u65e5\u7a0b\u7b49\x3cbr/\x3e\x3cbr/\x3e  ",position:"quickBuild"},{element:"#navigation #j_message",intro:"\u5728\u6b64\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5b9e\u65f6\u63a8\u9001\u7ed9\u60a8\u7cfb\u7edf\u5185\u5404\u7c7b\u4e8b\u9879\u7684\u901a\u77e5\uff0c\u4ee5\u53ca\u5173\u6ce8\u3001\u52a0\u5165\u7533\u8bf7\u7b49\u6d88\u606f\x3cbr/\x3e\x3cbr/\x3e  ",
position:"message"},{element:"#navigation #user-panel",intro:"\u5728\u6b64\uff0c\u60a8\u56e2\u961f\u6240\u6709\u7684\u540c\u4e8b\u90fd\u5728\u201c\u56e2\u961f\u6210\u5458\u201d\u4e2d\uff0c\u540c\u65f6\uff1a\x3cbr/\x3e1\u3001\u60a8\u53ef\u4ee5\u67e5\u770b\u5173\u6ce8\u7684\u4eba\u4ee5\u53ca\u60a8\u7684\u4e0b\u5c5e\u7684\u5de5\u4f5c\u5185\u5bb9\uff1b\x3cbr/\x3e 2\u3001\u53ef\u4ee5\u5feb\u901f\u7684\u548c\u60a8\u7684\u540c\u4e8b\u8fdb\u884c\u4f01\u4e1a\u5fae\u4fe1\u6c9f\u901a\u534f\u4f5c\uff1b\x3cbr/\x3e 3\u3001\u53ef\u4ee5\u8bbe\u7f6e\u60a8\u7684\u5bc6\u7801\u3001\u5934\u50cf\uff0c\u4ee5\u53ca\u5feb\u901f\u8fd4\u56de\u5230\u60a8\u7684\u5de5\u4f5c\u4e2d\u5fc3\u3002 \x3cbr/\x3e",
position:"userPanel"}]}).onbeforechange(function(c){$("#j_quickBuildGroup #j_quickBuild").trigger("mouseleave");$(".j_topMenu #j_message").trigger("mouseleave");$(".j_topMenu #j_systemSetup").trigger("mouseleave");$("#navigation #user-panel").trigger("mouseleave");switch($(c).attr("id")){case "j_quickBuild":$("#j_quickBuildGroup #j_quickBuild").trigger("mouseenter");$("#j_quickBuild").show();$("#j_quickBuild").addClass("introjs-highindex");break;case "j_message":$(".j_topMenu #j_message").trigger("mouseenter");
$("#j_message").show();$("#j_message").addClass("introjs-highindex");break;case "j_systemSetup":$(".j_topMenu #j_systemSetup").trigger("mouseenter");$("#j_systemSetup").show();$("#j_systemSetup").addClass("introjs-highindex");break;case "user-panel":$("#navigation #user-panel").trigger("mouseenter"),$("#user-panel").addClass("introjs-highindex")}}).oncomplete(function(){$(".dropdown-menu-toggle").trigger("mouseleave");e.inviteModal();TEAMS.currentUser.admin&&!TEAMS.currentTenant.dateUpdated&&$("#module_notice").removeClass("hide").find("span").html('\u60a8\u7684\u56e2\u961f\u4fe1\u606f\u8fd8\u672a\u5b8c\u5584\uff0c\u70b9\u51fb\x3ca class\x3d"router" href\x3d"/info"\x3e\u8fdb\u5165\u5b8c\u5584\u4fe1\u606f\x3c/a\x3e\u9875\u9762');
TEAMS.currentUser.moduleSource&&e.loadModuleSource()}).onexit(function(){$(".dropdown-menu-toggle").trigger("mouseleave");e.inviteModal();TEAMS.currentUser.admin&&!TEAMS.currentTenant.dateUpdated&&$("#module_notice").removeClass("hide").find("span").html('\u60a8\u7684\u56e2\u961f\u4fe1\u606f\u8fd8\u672a\u5b8c\u5584\uff0c\u70b9\u51fb\x3ca class\x3d"router" href\x3d"/info"\x3e\u8fdb\u5165\u5b8c\u5584\u4fe1\u606f\x3c/a\x3e\u9875\u9762');TEAMS.currentUser.moduleSource&&e.loadModuleSource()}).start()},
inviteModal:function(){3>=TEAMS.currentTenant.usedLicense&&setTimeout(function(){var e=new f;$(e.el).find(".modal-title").html("\u9a6c\u4e0a\u9080\u8bf7\u81ea\u5df1\u7684\u540c\u4e8b\u6765\u52a0\u5165\uff0c\u4e00\u8d77\u4f53\u9a8c\u4e91\u529e\u516c\u534f\u4f5c");e.render()},650)},loadModuleSource:function(){ROUTER.navigate("/"+TEAMS.currentUser.moduleSource,{trigger:!0})},remove:function(){}});m.exports=h});
define("teams/base/applytenantsview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.userId=e.userId||TEAMS.currentUser.id;this.el=e.container||"body";this.container=$(e.container);$(this.el).html(f.template("base.applytenants"))},delegateEvents:function(){$(this.el).off("click.ApplyTenantsView",".j_cancel_apply").on("click.ApplyTenantsView",".j_cancel_apply",function(e){var c=$(this);if(!c.attr("disabled")){c.attr("disabled",!0);var b=c.parents(".j_applyinfo_li");
e=b.data("tenantKey");$.ajax({url:"/addteam/cancleApply.json",type:"get",dataType:"json",data:{tenantKey:e},success:function(a){c.attr("disabled",!1);var d=a.modifyStatus;"success"==d?(f.notify("\u53d6\u6d88\u7533\u8bf7\u6210\u529f"),b.find(".j_status_span").text("\u5df2\u53d6\u6d88")):"failure"==d?f.notify("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u8d26\u53f7\u4fe1\u606f\u53ca\u7ba1\u7406\u5458\u662f\u5426\u5df2\u5904\u7406\u4e86\u4f60\u7684\u52a0\u5165\u7533\u8bf7"):a.message&&f.notify(a.message)}})}})},
render:function(){this.renderApplyInfo();f.layout("#j_apply_tenants")},renderApplyInfo:function(){var e=this.el;$(e).find(".loading_small").removeClass("hide");$(e).find(".j_module_list").addClass("hide");$.ajax({url:"/addteam/queryApply.json",type:"get",dataType:"json",success:function(c){$(e).find(".loading_small").addClass("hide");$(e).find(".j_module_list").removeClass("hide");if((c=c.applyTenants)&&1<=c.length)for(var b=0,a=c.length;b<a;b++){var d=c[b],g=$("#j_tenant_li_clone").clone().removeAttr("id").attr("id",
d.tenantId);g.find(".j_name").text(d.tenantName);var l=Date.create(d.dateCreated).format("{yyyy}-{MM}-{dd} {HH}:{mm}");g.find(".j_date").text(l);g.data("tenantKey",d.tenantKey);$("#j_applylist").append(g);$("#j_applylist #"+d.tenantId).find(".j_tip").addClass("hide");"accepted"==d.status?$("#j_applylist #"+d.tenantId).find(".j_accepted").removeClass("hide"):"undisposed"==d.status?$("#j_applylist #"+d.tenantId).find(".j_cancel_apply").removeClass("hide"):"refused"==d.status&&$("#j_applylist #"+d.tenantId).find(".j_refused").removeClass("hide")}else $("#j_applylist").addClass("hide"),
$(e).find(".j_no_result").removeClass("hide")}})},remove:function(){$(this.el).off(".ApplyTenantsView")}});m.exports=h});
define("teams/base/remotedownload",function(h,q,m){h=Backbone.View.extend({initialize:function(f){f&&(this.obj=f.obj,this.fileId=f.fileId,this.download=f.download)},initEvents:function(){},render:function(){var f=this;f.obj.off("click.download").on("click.download",function(){window.open(crmContext.remoteDownloadUrl+"/remoteDownload/"+f.fileId+"/"+ETEAMSID+"/"+f.download);return!1})},openWindow:function(f,e,c){c?(c.location=crmContext.remoteDownloadUrl+"/remoteDownload/"+f+"/"+ETEAMSID+"/"+e,window.tempWindow=
c,setTimeout("if(window.tempWindow){window.tempWindow.close();window.tempWindow \x3d null}",5E3)):window.open(crmContext.remoteDownloadUrl+"/remoteDownload/"+f+"/"+ETEAMSID+"/"+e)},remove:function(){}});m.exports=h});
define("teams/views/calendarview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({el:"#right-pane",parent:null,headVisible:!0,footVisible:!1,containerHeight:"100%",timeOut:null,viewDate:Date.create(),viewMode:0,dates:{days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d \u661f\u671f\u65e5".split(" "),daysShort:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d \u5468\u65e5".split(" "),
daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),today:"\u4eca\u65e5",format:"yyyy\u5e74mm\u6708dd\u65e5",
weekStart:1},daysShort:{mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7},modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],footDes:{today:"\u4eca\u5929",tomorrow:"\u660e\u5929",future:"\u5373\u5c06",memo:"\u5907\u5fd8"},initialize:function(e){if(e){e.el&&(this.el=e.el);e.parent&&(this.parent=e.parent);if(1==e.headVisible||0==e.headVisible)this.headVisible=e.headVisible;if(1==e.footVisible||0==e.footVisible)this.footVisible=
e.footVisible;e.containerHeight&&(this.containerHeight=e.containerHeight);e.seletedClass&&(this.seletedClass=e.seletedClass)}},render:function(e){e&&(this.viewDate=Date.create(e));$(this.el).empty().append(f.template("report.calendar"));this.fillDow();this.fill();$(this.el).find(".datepicker-days").show();this.daysEnvents();this.fillMonths();this.monthsEnvents();this.fillYears();this.yearsEnvents();e='\x3cspan class\x3d"foot-today"\x3e'+this.footDes.today+'\x3c/span\x3e\x3cspan class\x3d"foot-tomorrow"\x3e'+
this.footDes.tomorrow+'\x3c/span\x3e\x3cspan class\x3d"foot-future"\x3e'+this.footDes.future+'\x3c/span\x3e\x3cspan class\x3d"foot-memo"\x3e'+this.footDes.memo+"\x3c/span\x3e";$(this.el).find(".datepicker tfoot .foot-buttons").html(e);this.footButtonsEnvents();this.changeHeadVisible(this.headVisible);this.changeFootVisible(this.footVisible);$(this.el).find(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker").css("height",this.containerHeight)},fillDow:function(){for(var e=1,c="\x3ctr\x3e";8>
e;)c+='\x3ctd class\x3d"dow"\x3e'+this.dates.daysMin[e++%7]+"\x3c/td\x3e";c+="\x3c/tr\x3e";$(this.el).find(".datepicker-days thead").append(c)},fillMonths:function(){$(this.el).find(".datepicker-months thead th.datepicker-switch").text(this.viewDate.getUTCFullYear());for(var e="",c=0;12>c;)e+='\x3cspan class\x3d"month"\x3e'+this.dates.monthsShort[c++]+"\x3c/span\x3e";$(this.el).find(".datepicker-months td").html(e)},fillYears:function(e){e||(e=0);e=1==$(this.el).find(".datepicker-years tbody td span:first").size()?
parseInt($(this.el).find(".datepicker-years tbody td span:first").text())+e:this.viewDate.getUTCFullYear()+e-5;var c=Date.create().getUTCFullYear();$(this.el).find(".datepicker-years thead th.datepicker-switch").text(this.viewDate.getUTCFullYear());for(var b="",a=0;12>a;){var d=e+a,b=b+('\x3cspan class\x3d"year'+(c>d?" old":c<d?" new":"")+(c==d?" active":"")+'"\x3e'+d+"\x3c/span\x3e");a++}$(this.el).find(".datepicker-years tbody td").empty().html(b)},fill:function(){Date.create(this.viewDate);var e=
Date.create(this.viewDate),c=e.getUTCFullYear(),b=e.getUTCMonth();$(this.el).find(".datepicker-days thead th.datepicker-switch .switch-month").text(this.dates.months[b]);$(this.el).find(".datepicker-days thead th.datepicker-switch .switch-year").text(c);for(var c=Date.create(e).reset("date"),b=this.daysShort[c.format("{dow}")],c=c.addDays(-b+1),b=Date.create(e).endOfMonth(),a=this.daysShort[b.format("{dow}")],b=b.addDays(7-a),a=1,d="";c<b;){1==a%7&&(d+="\x3ctr\x3e");var g=[];e.getUTCMonth()+1!=c.format("{M}")?
g.push("disabled"):c.isWeekend()?g.push("holiday"):c.is("today")&&g.push("today");g.push(c.format("{yyyy}")+"Y");g.push(c.format("{M}")+"M");g.push(c.format("{d}")+"D");g=$.unique(g);g=g.join(" ");d=e.getUTCMonth()+1!=c.format("{M}")?d+('\x3ctd id\x3d"'+c.format("{yyyy}{MM}{dd}")+'" class\x3d"'+g+'"\x3e\x3c/td\x3e'):d+('\x3ctd id\x3d"'+c.format("{yyyy}{MM}{dd}")+'" class\x3d"'+g+'"\x3e\x3cdiv\x3e'+c.format("{d}")+"\x3c/div\x3e\x3c/td\x3e");0==a%7&&(d+="\x3c/tr\x3e");c.addDays(1);a++}$(this.el).find(".datepicker-days tbody").empty().html(d);
this.parent&&this.parent.monthChanged&&this.parent.monthChanged(this.viewDate)},daysEnvents:function(){var e=this;$(e.el).find(".datepicker-days .datepicker-switch .switch-month").on("click",function(){e.showMode(1)});$(e.el).find(".datepicker-days .datepicker-switch .switch-year").on("click",function(){e.showMode(2)});$(e.el).find(".datepicker-days thead .prev").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth()-1,2,0,0);e.fill();e.parent&&e.parent.dateOtherMonth&&
e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-days thead .next").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth()+1,2,0,0);e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-days").on("click","tbody td",function(){clearTimeout(e.timeOut);var c=$(this);e.timeOut=setTimeout(function(){if(!c.hasClass("disabled")){e.seletedClass&&
($(e.el+" tbody td").removeClass("selected"),c.addClass("selected"));var b=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth(),c.text(),0,0);e.parent&&e.parent.dateSelected&&e.parent.dateSelected(b)}},300)});$(e.el).on("dblclick",".datepicker-days tbody td",function(){clearTimeout(e.timeOut);var c=$(this);c.hasClass("disabled")||(c=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth(),c.text(),0,0),e.parent&&e.parent.dateDbClick&&e.parent.dateDbClick(c))})},seletedAddClass:function(e){e=
Date.create(e).format("{yyyy}{MM}{dd}");$(this.el+" tbody td").removeClass("selected");$(this.el+" #"+e).addClass("selected")},selectedDate:function(){return 1==$(this.el+" tbody td.selected").size()?Date.create($(this.el+" tbody td.selected").attr("id")).format("{yyyy}-{MM}-{dd}"):Date.create(Date.now()).format("{yyyy}-{MM}-{dd}")},monthsEnvents:function(){var e=this;$(e.el).find(".datepicker-months tbody td span").on("click",function(){var c=$(e.el).find(".datepicker-months tbody td span").index($(this));
e.viewDate=Date.create(e.viewDate.getUTCFullYear(),c,2,0,0);e.showMode(0);e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-months .datepicker-switch").on("click",function(){e.showMode(2)});$(e.el).find(".datepicker-months thead .prev").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear()-1,1,2,0,0);$(e.el).find(".datepicker-months thead th.datepicker-switch").text(e.viewDate.getUTCFullYear())});
$(e.el).find(".datepicker-months thead .next").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear()+1,1,2,0,0);$(e.el).find(".datepicker-months thead th.datepicker-switch").text(e.viewDate.getUTCFullYear())})},yearsEnvents:function(){var e=this;$(e.el).find(".datepicker-years .datepicker-switch").on("click",function(){e.showMode(2)});$(e.el).find(".datepicker-years thead .prev").on("click",function(){e.fillYears(-12)});$(e.el).find(".datepicker-years thead .next").on("click",function(){e.fillYears(12)});
$(e.el).find(".datepicker-years").on("click","tbody td span",function(){var c=$(this);$(e.el).find(".datepicker-years tbody td span").index(c);e.viewDate=Date.create(c.text(),e.viewDate.getUTCMonth(),2,0,0);e.showMode(0);e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))})},footButtonsEnvents:function(){var e=this;$(e.el).find(".datepicker tfoot .foot-buttons span").on("click",function(){var c=$(this);"foot-today"==c.attr("class")?e.parent&&
e.parent.todaySelected&&e.parent.todaySelected(Date.create()):"foot-tomorrow"==c.attr("class")?e.parent&&e.parent.tomorrowSelected&&e.parent.tomorrowSelected(Date.create("tomorrow")):"foot-future"==c.attr("class")?e.parent&&e.parent.futureSelected&&e.parent.futureSelected(Date.create().addDays(2)):"foot-memo"==c.attr("class")&&e.parent&&e.parent.memoSelected&&e.parent.memoSelected()})},showMode:function(e){e||(e=0);this.viewMode=e;$(this.el).find(".datepicker\x3ediv").hide().filter(".datepicker-"+
this.modes[this.viewMode].clsName).css("display","block");1==e&&$(this.el).find(".datepicker-"+this.modes[this.viewMode].clsName+" thead th.datepicker-switch").text(this.viewDate.getUTCFullYear())},changeHolidayStatus:function(e,c){var b=this,a=Date.create(b.viewDate),d=Date.create(e),g=!1;a.format("{yyyy}-{MM}")==d.format("{yyyy}-{MM}")&&$(b.el).find(".datepicker-days tbody td").each(function(){var a=$(this);a.text()!=d.format("{d}")||a.hasClass("disabled")||(null==c?a.hasClass("holiday")?(a.removeClass("holiday"),
g=!1):(a.addClass("holiday"),g=!0):c?(a.addClass("holiday"),g=!0):(a.removeClass("holiday"),g=!1),b.saveOrUpdateWorkDay(g,d.format("{yyyy}-{MM}-{dd}")))})},loadHolidays:function(e){var c=this;e&&0!=e.length?c.renderHolidays(e):c.loadWorkDay(Date.create(c.viewDate).format("{yyyy}-{MM}-{dd}"),function(b){c.renderHolidays(b.workdays)})},renderHolidays:function(e){if(e&&0!=e.length){var c=Date.create(this.viewDate);if(e[0].workdayDate){var b=Date.create(e[0].workdayDate);if(c.format("{yyyy}-{MM}")!=b.format("{yyyy}-{MM}"))return}$(this.el).find(".datepicker-days tbody td").each(function(){for(var a=
$(this),b=0;b<e.length;b++){var g=e[b];a.text()!=Date.create(g.workdayDate).format("{d}")||a.hasClass("disabled")||(g.holiday?a.addClass("holiday"):a.removeClass("holiday"),g.seleted?a.addClass("seleted"):a.removeClass("seleted"),g.highlight?a.addClass("highlight"):a.removeClass("highlight"))}})}},loadHasCalendarDay:function(e){e&&0!=e.length?$(this.el).find(".datepicker-days tbody td").each(function(){for(var c=$(this),b=!1,a=0;a<e.length;a++){var d=e[a];if(c.attr("id")==Date.create(d).format("{yyyy}{MM}{dd}")&&
!c.hasClass("disabled")){b=!0;break}}b?c.addClass("highlight"):c.removeClass("highlight")}):$(this.el).find(".datepicker-days tbody td").removeClass("highlight")},loadHolidaysByComma:function(e){if(e&&0!=e.length){var c=e.split(",");$(this.el).find(".datepicker-days tbody td").each(function(){var b=$(this);if(b.hasClass("disabled"))return!0;b.addClass("holiday");for(var a=0;a<c.length;a++){var d=c[a];"0"!=d&&b.text()==d&&b.removeClass("holiday")}})}},changeHeadVisible:function(e){1==e&&$(this.el).find(".datepicker thead .head-opt").show();
0==e&&$(this.el).find(".datepicker thead .head-opt").hide()},changeFootVisible:function(e){1==e&&$(this.el).find(".datepicker tfoot").show();0==e&&$(this.el).find(".datepicker tfoot").hide()},getDays:function(e){var c="0,";$(this.el).find(".datepicker-days tbody td").each(function(){var b=$(this);if(b.hasClass("disabled"))return!0;1==e&&b.hasClass("holiday")&&(c+=b.text()+",");0==e&&(b.hasClass("holiday")||(c+=b.text()+","))});return c},saveOrUpdateWorkDay:function(e,c){$.ajax({type:"post",url:"/timecard/saveOrUpdateWorkDay.json",
dataType:"json",data:{date:c,holiday:e},success:function(b){}})},loadWorkDay:function(e,c){$.ajax({type:"get",async:!1,url:"/timecard/loadWorkDay.json",dataType:"json",data:{date:e},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/views/feedbackview","teams/face/emojiarea teams/utils teams/component/feedbackmodel teams/component/commentreplay teams/chart/taskchart teams/base/preview teams/component/filter".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/component/feedbackmodel"),b=h("teams/component/commentreplay");h("teams/chart/taskchart");var a=h("teams/base/preview"),d=h("teams/component/filter");h=Backbone.View.extend({showtitle:"0",layout:"feedback",type:"module",
targetContainer:"modal",showReaded:"0",groupShow:"0",initialize:function(a){this.container=a.container;this.userId=a.userId;this.userId||(this.userId=TEAMS.currentUser.id);this.showtitle=a.showtitle;a.showReaded&&(this.showReaded=a.showReaded);a.groupShow&&(this.groupShow=a.groupShow);this.inCenter=a.inCenter;this.navs=a.navs;this.module=a.module;this.moduleName=a.moduleName;a.type&&(this.type=a.type);this.targetId=a.targetId;this.targetModule=a.targetModule;this.keywords=$.trim(a.keywords||"");a.targetContainer&&
(this.targetContainer=a.targetContainer);this.pageUrl=a.pageUrl;this.noscroll=a.noscroll;this.model=new c;$(this.container).html(e.template("feedback.module"));"module"==this.type&&($(this.container).find(".j_nav."+this.type).parent().removeClass("toolkit-bar"),$(this.container+" #feedback-container").addClass("ebox1"));$(this.container).find(".j_right-title a.back").addClass("hide");this.replay=this.module&&"customer"==this.module?new b({container:this.container,boxContainer:".feedback-box",serverPath:TEAMS.service.crm}):
new b({container:this.container,boxContainer:".feedback-box",serverPath:""})},delegateEvents:function(){var a=this,b=$(this.container);$("body").off("click.FeedbackList",".goto-top").on("click.FeedbackList",".goto-top",function(a){e.gotoTop(".j_mainscroll")});$(window).on("resize.FeedbackList",function(b){a.resetWin()});b.on("click.FeedbackList",".j_toolkit-item",function(a){a=$(a.currentTarget);b.find(".j_toolkit-item").removeClass("active");a.addClass("active")});b.on("click.FeedbackList","#feedback .unread",
function(){a.searchRightNav("unread","1")});b.on("click.FeedbackList","#feedback .atme",function(){a.searchRightNav("atmeComment","0")});b.on("click.FeedbackList","#feedback .others",function(){a.searchRightNav("others","0")});b.on("click.FeedbackList","#feedback .reply",function(){a.searchRightNav("reply","0")});b.on("click.FeedbackList","#feedback .charger",function(){a.searchRightNavType("domainComment","mineManager","0")});b.on("click.FeedbackList","#feedback .participants",function(){a.searchRightNavType("domainComment",
"mineParticipants","0")});b.on("click.FeedbackList","#feedback .creator",function(){a.searchRightNavType("domainComment","mineCreate","0")});b.on("click.FeedbackList","#feedback .watch",function(){a.searchRightNavType("domainComment","watched","0")});b.on("click.FeedbackList","#feedback .subordinatemodule",function(){a.searchRightNavType("domainComment","subordinates","0")});b.on("click.FeedbackList","#feedback .share",function(){a.searchRightNavType("domainComment","shareToMe","0")});b.on("click.FeedbackList",
"#feedback .my",function(){a.searchRightNavType("employeeComment","mine","0")});b.on("click.FeedbackList","#feedback .subordinate",function(){a.searchRightNavType("employeeComment","subordinates","0","senior")});b.on("click.FeedbackList","#feedback .task",function(){a.searchNav("task",0,"0")});b.on("click.FeedbackList","#feedback .document",function(){a.searchNav("document",0,"0")});b.on("click.FeedbackList","#feedback .customer",function(){a.searchNav("customer",0,"0")});b.on("click.FeedbackList",
"#feedback .saleChance",function(){a.searchNav("saleChance",0,"0")});b.on("click.FeedbackList","#feedback .production",function(){a.searchNav("production",0,"0")});b.on("click.FeedbackList","#feedback .mainline",function(){a.searchNav("mainline",0,"0")});b.on("click.FeedbackList","#feedback .workflow",function(){a.searchNav("workflow",0,"0")});b.on("click.FeedbackList","#feedback .blog",function(){a.searchNav("blog",0,"0")});b.on("click.FeedbackList","#feedback .calendar",function(){a.searchNav("calendar",
0,"0")});b.on("click.FeedbackList","#feedback .unreadother",function(){a.searchNav(null,1,"1")});b.on("click.FeedbackList","#feedback-container .feedback-more",function(b){b={};a.model.pageNo=parseInt(a.model.pageNo)+1;b=a.targetModule;b="module"==a.type?{id:a.userId,module:a.module,commentKeywords:a.commentKeywords,loadCount:!1,typeFilter:$(this).data("type"),subordinateType:$(this).data("subType")}:a.watchunread?{id:a.userId,module:a.module,method:"watchunread",targetId:a.targetId,targetModule:a.targetModule,
keywords:a.keywords,commentKeywords:a.commentKeywords,typeFilter:$(this).attr("data-type")}:{id:a.userId,module:a.module,method:b,targetId:a.targetId,targetModule:a.targetModule,keywords:a.keywords,commentKeywords:a.commentKeywords,typeFilter:$(this).attr("data-type")};var d=$("#task-subordinate-filter").data("data-filter"),d=d?JSON.parse("{"+d+"}").primarys:[];b.querySubordinates=d;a.loadData(b)});b.on("click.FeedbackList",".j_feedback_subordinate .j_subordinate",function(){$(this).hasClass("active")||
($(this).addClass("active").siblings(".active").removeClass("active"),$("#task-subordinate-filter").data("data-filter",""),a.dropdownFilter&&(a.dropdownFilter.managers=[]),$("#task-subordinate-filter").find(".employee-click").removeClass("checked"),a.searchRightNavType("employeeComment","subordinates","0",$(this).data("type")||""))});b.on("click.FeedbackList",".feedback-group .status",function(){var d=$(this).parents(".feedback-group").find(".feedback-list li").length;$(this).removeClass("unread");
var c=$(this).parents(".feedback-group"),e=c.data("targetModule"),f='{"targetId":"'+c.data("targetId")+'", "module":"'+e+'"}';a.model.readed('{"streams":['+f+"]}",function(f){c.remove();0>=b.find("#feedback-container .feedback-group:not(.hide)").size()?b.find(".j_nocontent").html($(a.container).find("#j_feed_"+a.module).html()).show():b.find(".j_nocontent").hide();$("a.newcomment b").html(f.newcommentCount);f.newcommentCount||$("a.newcomment").parent("div").addClass("hide");if("module"==a.type){var p=
b.find(".j_nav.module .active");f=parseInt(p.find(".count").html());p.find(".count").html(f-d)}else p=b.find(".j_nav.other .active"),f=parseInt(p.find(".count").html()),p.find(".count").html(f-1),f-1||p.addClass("hide").addClass("hide-no-result"),p.hasClass("all")?("workflow"==e&&(e="flow"),f=b.find(".j_nav.other").find("."+e)):f=b.find(".j_nav.other .all"),p=parseInt(f.find(".count").html()),f.find(".count").html(p-1);!b.find("#feedback .feedback-more").hasClass("hide")&&0>=b.find("#feedback-container .feedback-box:not(.hide)").size()&&
(a.model.pageNo=0,b.find("#feedback .feedback-more").click())})});b.on("click.FeedbackList",".feedback-target-box .title .readed",function(){var d=$(this).parents(".feedback-target-box"),c=d.data("targetId"),e=d.data("targetModule");a.model.readed('{"streams":['+('{"targetId":"'+c+'", "module":"'+e+'"}')+"]}",function(c){var k=d.find(".feedback-box").size();d.remove();0>=b.find("#feedback-container .feedback-target-box:not(.hide)").size()?b.find(".j_nocontent").html($(a.container).find("#j_feed_"+
a.module).html()).show():b.find(".j_nocontent").hide();$("a.newcomment b").html(c.newcommentCount);c.newcommentCount||$("a.newcomment").parent("div").addClass("hide");if("module"==a.type){var f=b.find(".j_nav.module .active");c=parseInt(f.find(".count").html());f.find(".count").html(0>=c-k?0:c-k)}else f=b.find(".j_nav.other .active"),c=parseInt(f.find(".count").html()),f.find(".count").html(0>=c-k?0:c-k),f.hasClass("all")?("workflow"==e&&(e="flow"),c=b.find(".j_nav.other").find("."+e)):c=b.find(".j_nav.other .all"),
f=parseInt(c.find(".count").html()),c.find(".count").html(0>=f-k?0:f-k);0>=b.find("#feedback-container .feedback-target-box:not(.hide)").size()&&a.reloadData()})});b.on("click.FeedbackList",".mark-all-readed",function(){0>=b.find("#feedback-container .feedback-target-box:not(.hide)").size()||e.confirm("\u786e\u5b9a\u8981\u5c06\u5217\u8868\u4e2d\u7684\u5168\u90e8\u6807\u8bb0\u4e3a\u5df2\u8bfb\u5417?",function(d){if(d){var c="";b.find("#feedback-container .feedback-target-box:not(.hide)").each(function(){var a=
$(this);if(!a.data("targetModule"))return!0;a='{"targetId":"'+a.data("targetId")+'", "module":"'+a.data("targetModule")+'"}';c+=a+","});c&&(c=c.substring(0,c.length-1),c='{"streams":['+c+"]}");a.model.readed(c,function(d){b.find("#feedback-container .feedback-target-box:not(.hide)").remove();b.find("#feedback-container .feedback-box:not(.hide)").remove();$("a.newcomment b").html(d.newcommentCount);d.newcommentCount||$("a.newcomment").parent("div").addClass("hide");a.reloadData()})}})});b.on("mouseover.FeedbackList",
".feedback-box:not(.hide)",function(){var a=$(this);a.find(".comment-comment").removeClass("hide");a.find(".transmit").removeClass("hide")});b.on("mouseout.FeedbackList",".feedback-box:not(.hide)",function(){var a=$(this);a.find(".comment-comment").addClass("hide");a.find(".transmit").addClass("hide")});b.on("click.FeedbackList",".feedback-box .comment-comment",function(){var b=$(this).parents(".feedback-box"),d=b.data("targetId"),b=b.data("targetModule");a.replay.showReplay($(this),b,d)});b.on("click.FeedbackList",
".feedback-box .transmit",function(){var b=$(this).parents(".feedback-box"),d=b.data("targetId"),b=b.data("targetModule");a.replay.showTransmit($(this),b,d)});b.on("insertComment.FeedbackList",function(d,c){var e=b.find("#"+c.parent.id).find(".name a").html();c.targetName=e;a.createCommentBox(c,!0)});b.on("click.FeedbackList",".feedback-search",function(){b.find(".mark-all-readed").addClass("hide");b.find(".feedback-search-keyword").removeClass("hide");b.find(".feedback-search").addClass("hide");
b.find(".feedback-search-keyword input").focus()});b.on("keyup.FeedbackList",".feedback-search-keyword input",function(d){if(13==d.keyCode){if(d=$.trim(b.find(".feedback-search-keyword input").val()))a.commentKeywords=d;else{b.find(".mark-all-readed").addClass("hide");b.find(".feedback-search-keyword").addClass("hide");b.find(".feedback-search").removeClass("hide");a.showReaded&&"0"!=a.showReaded&&b.find(".mark-all-readed").removeClass("hide");if(!a.commentKeywords)return;a.commentKeywords=null}b.find("#feedback-container .feedback-target-box:not(.hide)").remove();
b.find("#feedback-container .feedback-box:not(.hide)").remove();a.reloadData()}});b.on("blur.FeedbackList",".feedback-search-keyword input",function(d){b.find(".mark-all-readed").addClass("hide");b.find(".feedback-search-keyword").addClass("hide");b.find(".feedback-search").removeClass("hide");a.showReaded&&"0"!=a.showReaded&&b.find(".mark-all-readed").removeClass("hide")});b.off("mouseenter.FeedbackList","#task-subordinate-filter").on("mouseenter.FeedbackList","#task-subordinate-filter",function(b){$(this).addClass("open");
var c=$(this).attr("data-toggle");a.dropdownFilter||(a.dropdownFilter=new d({el:c,module:"subordinate",targetObj:$(this),userId:a.userId,scroll:!0}),a.dropdownFilter.render(b));b=setTimeout(function(){$(c).parents(".dropdown-filter").slideDown("fast")},300);$(this).data("showTimer",b)}).off("mouseleave.FeedbackList","#task-subordinate-filter").on("mouseleave.FeedbackList","#task-subordinate-filter",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");var b=$(this).data("showTimer");
b&&clearTimeout(b);$(this).removeData("showTimer");$(a).parents(".dropdown-filter").slideUp(100)}).off("filter.FeedbackList","#task-subordinate-filter").on("filter.FeedbackList","#task-subordinate-filter",function(b){b=(b=$("#task-subordinate-filter").data("data-filter"))?JSON.parse("{"+b+"}").primarys:[];$(a.container).find(".j_subordinate").removeClass("active");$(a.container).find(".j_subordinate.j_subordinate_all").addClass("active");a.searchRightNavType("employeeComment","subordinates","0","",
b);$(this).removeClass("open")})},loadData:function(a){var b=this;b.showLoading();$(".feedback-more").addClass("hide").before($("#feedbackList-loading"));b.model.load(a,function(a){b.renderFeedback(a)})},reloadData:function(){var a=this,b=$(this.container);b.find(".feedback-more").addClass("hide");a.model.pageNo=1;a.showLoading();if("module"==a.type){var d=b.find("#feedback .active");a.model.load({id:a.userId,module:a.module,commentKeywords:a.commentKeywords,typeFilter:a.typeFilter,loadCount:!1},
function(b){a.renderFeedback(b);d.hasClass("hide-no-result")&&d.removeClass("hide").removeClass("hide-no-result")})}else a.watchunread?a.model.load({id:a.userId,module:a.module,method:"watchunread",targetId:a.targetId,targetModule:a.targetModule,keywords:a.keywords,commentKeywords:a.commentKeywords,loadCount:!1},function(d){a.renderFeedback(d);b.find(".unreadother").hasClass("hide-no-result")&&b.find(".unreadother").removeClass("hide").removeClass("hide-no-result")}):(d=b.find("#feedback .active"),
a.model.load({id:a.userId,module:a.module,method:a.targetModule,targetId:a.targetId,targetModule:a.targetModule,keywords:a.keywords,commentKeywords:a.commentKeywords,loadCount:!1},function(b){a.renderFeedback(b);d.hasClass("hide-no-result")&&d.removeClass("hide").removeClass("hide-no-result")}))},search:function(a,b){var d=this;d.showLoading();"unread"!=a.method&&$(d.container).find("#feedback-container .feedback-group:not(.hide)").remove();d.model.load(a,function(a){d.showReaded&&"2"!=d.showReaded&&
(d.showReaded=b);d.renderFeedback(a)})},searchRightNav:function(a,b){var d=$(this.container);d.find(".feedback-more").addClass("hide");d.find("#feedback-container .feedback-target-box:not(.hide)").remove();d.find("#feedback-container .feedback-box:not(.hide)").remove();d.find(".j_feedback_subordinate").addClass("hide");this.model.pageNo=1;this.search({id:this.userId,module:this.module,method:a,commentKeywords:this.commentKeywords,loadCount:!1},b)},searchRightNavType:function(a,b,d,c,e){this.typeFilter=
b;var f=$(this.container);f.find(".feedback-more").addClass("hide");f.find("#feedback-container .feedback-target-box:not(.hide)").remove();f.find("#feedback-container .feedback-box:not(.hide)").remove();"subordinates"==b?f.find(".j_feedback_subordinate").removeClass("hide"):f.find(".j_feedback_subordinate").addClass("hide");this.model.pageNo=1;this.search({id:this.userId,module:this.module,method:a,typeFilter:b,subordinateType:c,commentKeywords:this.commentKeywords,querySubordinates:e},d)},searchNav:function(a,
b,d){"unreadall"==this.targetModule&&(d="1");var c=$(this.container);c.find(".feedback-more").addClass("hide");c.find("#feedback-container .feedback-target-box:not(.hide)").remove();c.find("#feedback-container .feedback-box:not(.hide)").remove();this.model.pageNo=1;this.module=a;this.watchunread=b;this.search({id:this.userId,module:this.module,method:this.targetModule,targetId:this.targetId,targetModule:this.targetModule,keywords:this.keywords,commentKeywords:this.commentKeywords,loadCount:!1},d)},
render:function(){var a=this;"task"!=a.module&&"document"!=a.module&&"workflow"!=a.module&&"customer"!=a.module&&"saleChane"!=a.module&&$("#feedback-container").addClass("scrollwrapper");TEAMS.noSubordinates&&$(".subordinate").addClass("hide");a.showtitle&&"0"!=a.showtitle&&($(a.container).find(".j_right-title").removeClass("hide"),"module"==a.type?$(a.container).find(".feedback-title").html(a.moduleName+"\u53cd\u9988"):a.moduleName?$(a.container).find(".feedback-title").html(a.moduleName):$(a.container).find(".j_right-title").remove());
a.noscroll||e.layout("#feedback-container");$(a.container).find(".feedback-module").html(a.moduleName);"production"==a.module&&($(a.container).find(".j_toolkit-item.share").remove(),$(a.container).find(".j_toolkit-item.watch").remove());$(a.container).find(".j_nav").each(function(){$(this).hasClass(a.type)||$(this).remove()});if(a.navs)for(var b=0;b<a.navs.length;b++)$(a.container).find(a.navs[b]).removeClass("hide");a.inCenter?$(a.container).find(".j_right-title a.back").removeClass("hide"):$(a.container).find("i.imgcon").removeAttr("class");
$(a.container).find(".feedback-more").addClass("hide");$(a.container).find("#feedback-container .feedback-target-box:not(.hide)").remove();$(a.container).find("#feedback-container .feedback-box:not(.hide)").remove();a.model.pageNo=1;$("#feedbackList-loading").removeClass("hide");"module"==a.type?a.model.load({id:a.userId,module:a.module,method:"unread"},function(b){a.renderFeedback(b)}):a.model.load({id:a.userId,module:a.module,method:a.targetModule,targetId:a.targetId,targetModule:a.targetModule,
keywords:a.keywords},function(b){a.renderFeedback(b)});e.layout(".j_mainscroll")},renderFeedback:function(a){a.commentPage&&(a.page=a.commentPage);if(a.page){$(this.container).find(".feedback-more").data({type:a.typeFilter,subType:a.subordinateType||""});var b=a.page.result;if(b&&0<b.length){$(this.container).find("#feedback .active .count").html(a.page.totalCount);for(var d=0;d<b.length;d++)this.createCommentBox(b[d]);a.page.hasNext?$(this.container).find(".feedback-more").removeClass("hide"):$(this.container).find(".feedback-more").addClass("hide");
$(this.container).find(".j_nocontent").hide()}else $(this.container).find("#feedback .active .count").html(0),$(this.container).find("#feedback-container .feedback-item:not(.hide)").remove(),$(this.container).find("#feedback-container .feedback-group:not(.hide)").remove(),$(this.container).find("#feedback-container .feedback-target-box:not(.hide)").remove(),$(this.container).find("#feedback-container .feedback-box:not(.hide)").remove(),$(this.container).find("#feedback-container .no-feedback").remove(),
$(this.container).find(".feedback-more").addClass("hide"),$(this.container).find(".j_nocontent").html($(this.container).find("#j_feed_"+this.module).html()).show();this.commentKeywords?0<this.commentKeywords.replace(/\s+/,"").length&&$(this.container).find("#feedback-container .feedback-box:not(.hide) .feedback-content").highlight(this.commentKeywords):($(this.container).find(".feedback-search-keyword").addClass("hide"),$(this.container).find(".feedback-search").removeClass("hide"),$(this.container).find(".mark-all-readed").addClass("hide"),
this.showReaded&&"0"!=this.showReaded&&$(this.container).find(".mark-all-readed").removeClass("hide"));this.keywords&&!this.commentKeywords&&0<this.keywords.replace(/\s+/,"").length&&$(this.container).find("#feedback-container .feedback-box:not(.hide) .feedback-content").highlight(this.keywords.replace(/\+/g," "));a=a.feedbackCounts;!this.commentKeywords&&a&&("module"==this.type?(0<a.unread?$(this.container+" .module .unread").addClass("active"):0<a.atme?$(this.container+" .module .atme").addClass("active").trigger("click"):
0<a.others?$(this.container+" .module .others").addClass("active").trigger("click"):0<a.reply&&$(this.container+" .module .reply").addClass("active").trigger("click"),$(this.container).find(".unread .count").html(a.unread),$(this.container).find(".atme .count").html(a.atme?a.atme:0),$(this.container).find(".others .count").html(a.others),$(this.container).find(".reply .count").html(a.reply)):a&&(this.module&&"all"!=this.module?($(this.container+" .other li").removeClass("active"),$(this.container+
" .other ."+this.module).addClass("active")):0<a.task?$(this.container+" .other .task").addClass("active"):0<a.document?$(this.container+" .other .document").addClass("active"):0<a.customer?$(this.container+" .other .customer").addClass("active"):0<a.workflow?$(this.container+" .other .workflow").addClass("active"):0<a.mainline?$(this.container+" .other .mainline").addClass("active"):0<a.saleChance?$(this.container+" .other .saleChance").addClass("active"):0<a.production?$(this.container+" .other .production").addClass("active"):
0<a.calendar&&$(this.container+" .other .calendar").addClass("active"),$(this.container+" .other .task .count").html(a.task?a.task:0),$(this.container+" .other .document .count").html(a.document?a.document:0),$(this.container+" .other .customer .count").html(a.customer?a.customer:0),$(this.container+" .other .workflow .count").html(a.workflow?a.workflow:0),$(this.container+" .other .mainline .count").html(a.mainline?a.mainline:0),$(this.container+" .other .saleChance .count").html(a.saleChance?a.saleChance:
0),$(this.container+" .other .production .count").html(a.production?a.production:0),$(this.container+" .other .calendar .count").html(a.calendar?a.calendar:0)));$("#feedbackList-loading").addClass("hide");$(this.container).find(".j_nav li.others").resize()}else $("#feedbackList-loading").addClass("hide")},createCommentTargetBox:function(a,b){var d;d="\u672a\u8bfb\u53cd\u9988"==b?$(this.container).find("#feedback-target-clone-unread").clone(!0).removeClass("hide"):$(this.container).find("#feedback-target-clone-other").clone(!0).removeClass("hide");
d.attr("id","feedback-target-"+a.targetId);d.data("targetId",a.targetId);d.data("targetModule",a.module);this.showReaded&&"0"!=this.showReaded&&d.find(".readed").removeClass("hide");a.targetName&&d.find(".name a").text(a.targetName).attr("title",a.targetName);"modal"==this.targetContainer?a.targetName&&("calendar"!=a.module?d.find(".name a").addClass("j_entityslider-toggle editable").attr("data-id",a.targetId).attr("data-module",a.module).attr("data-value",a.targetId):d.find(".name a").addClass("j_entityslider-toggle editable").attr("data-id",
a.targetId).attr("data-module","agenda").attr("data-value",a.targetId)):(a.targetName&&d.find(".name a").addClass("router"),this.pageUrl&&d.find(".name a").attr("href",this.pageUrl+"/"+a.module+"/"+a.targetId));var c="";"task"==a.module?c="\u4efb\u52a1":"document"==a.module?c="\u6587\u6863":"workflow"==a.module?c="\u5ba1\u6279":"customer"==a.module?c="\u5ba2\u6237":"saleChance"==a.module?c="\u5546\u673a":"production"==a.module?c="\u4ea7\u54c1":"mainline"==a.module?c="\u9879\u76ee":"blog"==a.module?
c="\u65e5\u5fd7":"calendar"==a.module&&(c="\u65e5\u7a0b");d.find(".module-name").html('\x3cspan class\x3d"mr-3"\x3e['+c+"]\x3c/span\x3e");$(this.container).find(".feedback-more").before(d)},createCommentBox:function(b,d){var c,k=$(".j_nav .active").find("a").text().substr(0,4);c="\u672a\u8bfb\u53cd\u9988"==k?$(this.container).find("#feedback-unread-clone").clone(!0).removeClass("hide"):$(this.container).find("#feedback-other-clone").clone(!0).removeClass("hide");var r="";"task"==b.module?r="\u4efb\u52a1":
"document"==b.module?r="\u6587\u6863":"workflow"==b.module?r="\u5ba1\u6279":"customer"==b.module?r="\u5ba2\u6237":"saleChance"==b.module?r="\u5546\u673a":"production"==b.module?r="\u4ea7\u54c1":"mainline"==b.module?r="\u9879\u76ee":"blog"==b.module?r="\u65e5\u5fd7":"calendar"==b.module&&(r="\u65e5\u7a0b");c.find(".module-name").html('\x3cspan class\x3d"mr-3"\x3e['+r+"]\x3c/span\x3e");c.attr("id",b.id);c.data("targetId",b.targetId);c.data("targetModule",b.module);b.targetId&&c.find(".name").attr("id",
"feedback"+b.targetId);b.targetName&&c.find(".name a").text(b.targetName).attr("title",b.targetName);"modal"==this.targetContainer?b.targetName&&("calendar"!=b.module?c.find(".name a").addClass("j_entityslider-toggle editable").attr("data-id",b.targetId).attr("data-module",b.module).attr("data-value",b.targetId):c.find(".name a").addClass("j_entityslider-toggle editable").attr("data-id",b.targetId).attr("data-module","agenda").attr("data-value",b.targetId)):(b.targetName&&c.find(".name a").addClass("router"),
this.pageUrl&&c.find(".name a").attr("href",this.pageUrl+"/"+b.module+"/"+b.targetId));r="images/avatar.png";b.commentor&&(c.find(".commentor a").html(b.commentor.username),c.find(".commentor a").attr("userId",b.commentor.id),r="images/avatar.png",b.commentor.avatar&&(r="/base/download/"+b.commentor.avatar.p5),c.find(".j_commentor").children("img").attr("src",r),c.find(".j_commentor").addClass("usercard-toggle cs-p").attr("userid",b.commentor.id));b.content&&(f($),c.find(".feedback-content").html($.faceConvert(e.initMessage(b.content))));
b.client&&"pc"!=b.client&&b.address&&""!=b.address&&(c.find(".comment-client").removeClass("hide").html("\u6765\u81ea "+b.client+"\u5ba2\u6237\u7aef"),c.find(".comment-coord").removeClass("hide"),c.find(".comment-address").html(b.address));b.addTime&&c.find(".comment-date").html(Date.create(b.addTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));this.showReaded&&"0"!=this.showReaded&&c.find(".readed").removeClass("hide");if(b.attachments){for(var p=0,r=b.attachments.length;p<r;p++){var s=b.attachments[p];
c.find(".feedback-attachment").append(e.template("base.attachment",s));c.find("#"+s.id).children().addClass("remoteDownload").attr("data-dlid",s.id);(new a({container:c,afterJqObj:c.find("#"+s.id).children(),fileObj:s,rel:b.id})).render()}c.find(".comment-attachment").attr("undeletable",!0)}if(b.userData&&(r=[],r=eval(b.userData)))for(p=0;p<r.length;p++)r[p]&&c.find(".feedback-content").prepend("\x3ca class\x3d'usercard-toggle' userId\x3d'"+r[p].userId+"'\x3e@"+r[p].userName+"\x3c/a\x3e");if(b.parent&&
b.parent.commentor&&b.parent.commentor.username){c.find(".at-comment-body").removeClass("hide");c.find(".at-username").html("@"+b.parent.commentor.username+": ").attr("title",b.parent.commentor.username).show();c.find(".at-username").attr("userId",b.parent.commentor.id);r=b.parent.content;s={};if(b.parent.userData){var h=[];if(h=eval(b.parent.userData))for(p=0;p<h.length;p++)h[p]&&(h[p].userIdIndex&&0!=h[p].userIdIndex?(r=r.substring(0,h[p].userIdIndex-1)+"@"+h[p].userName+r.substring(h[p].userIdIndex-
1),s["@"+h[p].userName]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+h[p].userId+"'\x3e@"+h[p].userName+"\x3c/a\x3e"):clone.find("#show_at_comment").prepend("\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+h[p].userId+"'\x3e@"+h[p].userName+"\x3c/a\x3e"))}r=e.initMessage(r);for(p in s)r=r.replace(p,s[p]);c.find(".at-content").html(r)}p=$(this.container).find("#feedback-target-"+b.targetId);1>p.size()&&(this.createCommentTargetBox(b,k),p=$(this.container).find("#feedback-target-"+b.targetId));
d?p.find(".target-feedbacks").prepend(c):p.find(".target-feedbacks").append(c);c.find(".readed").addClass("hide");$(this.container).find(".no-feedback").remove();this.replay.appendReplay(b,c);this.replay.appendTransmit(b,c)},showLoading:function(){$("#feedbackList-loading").removeClass("hide")},resetWin:function(){450>$(this.container).width()?$(this.container).find("#feedback-more").prev(".reply").prependTo($(this.container).find("#feedback-more .dropdown-menu")):$(this.container).find("#feedback-more .reply").insertBefore($(this.container).find("#feedback-more"))},
changeTitle:function(a,b){$("#feedback-target-"+a).find("a.j_name").html(b).attr("title",b).data("name",b)},remove:function(){$(this.container).off(".FeedbackList");$(window).off("resize.FeedbackList");$(this.container).empty();this.replay&&(this.replay.remove(),this.replay=null);this.model=null}});m.exports=h});
define("teams/views/calendarweekview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({el:"#right-pane",parent:null,headVisible:!0,footVisible:!1,containerHeight:"100%",timeOut:null,viewDate:Date.create(),viewMode:0,dates:{days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d \u661f\u671f\u65e5".split(" "),daysShort:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d \u5468\u65e5".split(" "),
daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),today:"\u4eca\u65e5",format:"yyyy\u5e74mm\u6708dd\u65e5",
weekStart:1},daysShort:{mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7},modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],footDes:{today:"\u4eca\u5929",tomorrow:"\u660e\u5929",future:"\u5373\u5c06",memo:"\u5907\u5fd8"},initialize:function(e){if(e){e.el&&(this.el=e.el);e.parent&&(this.parent=e.parent);if(1==e.headVisible||0==e.headVisible)this.headVisible=e.headVisible;if(1==e.footVisible||0==e.footVisible)this.footVisible=
e.footVisible;e.containerHeight&&(this.containerHeight=e.containerHeight);e.seletedClass&&(this.seletedClass=e.seletedClass)}},render:function(e){e&&(this.viewDate=Date.create(e));$(this.el).empty().append(f.template("report.calendar"));this.fillDow();this.fill();$(this.el).find(".datepicker-days").show();this.daysEnvents();this.fillMonths();this.monthsEnvents();this.fillYears();this.yearsEnvents();e='\x3cspan class\x3d"foot-today"\x3e'+this.footDes.today+'\x3c/span\x3e\x3cspan class\x3d"foot-tomorrow"\x3e'+
this.footDes.tomorrow+'\x3c/span\x3e\x3cspan class\x3d"foot-future"\x3e'+this.footDes.future+'\x3c/span\x3e\x3cspan class\x3d"foot-memo"\x3e'+this.footDes.memo+"\x3c/span\x3e";$(this.el).find(".datepicker tfoot .foot-buttons").html(e);this.footButtonsEnvents();this.changeHeadVisible(this.headVisible);this.changeFootVisible(this.footVisible);$(this.el).find(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker").css("height",this.containerHeight)},fillDow:function(){for(var e=1,c="\x3ctr\x3e";8>
e;)c+='\x3ctd class\x3d"dow"\x3e'+this.dates.daysMin[e++%7]+"\x3c/td\x3e";c+="\x3c/tr\x3e";$(this.el).find(".datepicker-days thead").append(c)},fillMonths:function(){$(this.el).find(".datepicker-months thead th.datepicker-switch").text(this.viewDate.getUTCFullYear());for(var e="",c=0;12>c;)e+='\x3cspan class\x3d"month"\x3e'+this.dates.monthsShort[c++]+"\x3c/span\x3e";$(this.el).find(".datepicker-months td").html(e)},fillYears:function(e){e||(e=0);e=1==$(this.el).find(".datepicker-years tbody td span:first").size()?
parseInt($(this.el).find(".datepicker-years tbody td span:first").text())+e:this.viewDate.getUTCFullYear()+e-5;var c=Date.create().getUTCFullYear();$(this.el).find(".datepicker-years thead th.datepicker-switch").text(this.viewDate.getUTCFullYear());for(var b="",a=0;12>a;){var d=e+a,b=b+('\x3cspan class\x3d"year'+(c>d?" old":c<d?" new":"")+(c==d?" active":"")+'"\x3e'+d+"\x3c/span\x3e");a++}$(this.el).find(".datepicker-years tbody td").empty().html(b)},fill:function(){Date.create(this.viewDate);var e=
Date.create(this.viewDate),c=e.getUTCFullYear();e.getUTCMonth();$(this.el).find(".datepicker-days thead th.datepicker-switch .switch-year").text(c);var c=Date.create(e),b=this.daysShort[c.format("{dow}")];1!=b&&(c=c.addDays(1-b));var b=Date.create(e).addDays(7-Math.abs(-b)),a=this.dates.months[c.format("{M}")-1]+c.format("{d}")+" - ",a=e.getUTCMonth()+1!=b.format("{M}")?a+(this.dates.months[b.format("{M}")-1]+b.format("{d}")+"\u65e5"):a+(b.format("{d}")+"\u65e5");$(this.el).find(".datepicker-days thead th.datepicker-switch .switch-month").text(a);
e=1;for(a="";c<=b;){1==e%7&&(a+="\x3ctr\x3e");var d=[];c.isWeekend()?d.push("holiday"):c.is("today")&&(d.push("today"),d.push("selected"));d.push(c.format("{yyyy}")+"Y");d.push(c.format("{M}")+"M");d.push(c.format("{d}")+"D");d=$.unique(d);d=d.join(" ");a+='\x3ctd id\x3d"'+c.format("{yyyy}{MM}{dd}")+'" class\x3d"'+d+'"\x3e\x3cdiv\x3e'+c.format("{d}")+"\x3c/div\x3e\x3c/td\x3e";0==e%7&&(a+="\x3c/tr\x3e");c.addDays(1);e++}$(this.el).find(".datepicker-days tbody").empty().html(a);this.parent&&this.parent.monthChanged&&
this.parent.monthChanged(this.viewDate)},daysEnvents:function(){var e=this;$(e.el).find(".datepicker-days .datepicker-switch .switch-month").on("click",function(){e.showMode(1)});$(e.el).find(".datepicker-days .datepicker-switch .switch-year").on("click",function(){e.showMode(2)});$(e.el).find(".datepicker-days thead .prev").on("click",function(){var c=$(e.el).find(".datepicker-days tbody td:first").attr("id"),b,a,d;8<=c.length&&(b=c.substring(0,4),a=c.substring(4,6),d=c.substring(6,8));c=e.viewDate;
c.setYear(b);c.setMonth(Math.abs(a)-1);c.setDate(d);e.viewDate=Date.create(c.addDays(-7));e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-days thead .next").on("click",function(){var c=$(e.el).find(".datepicker-days tbody td:last").attr("id"),b,a,d;8<=c.length&&(b=c.substring(0,4),a=c.substring(4,6),d=c.substring(6,8));c=e.viewDate;c.setYear(b);c.setMonth(Math.abs(a)-1);c.setDate(d);e.viewDate=Date.create(c.addDays(1));
e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-days").on("click","tbody td",function(){clearTimeout(e.timeOut);var c=$(this);e.timeOut=setTimeout(function(){if(!c.hasClass("disabled")){e.seletedClass&&($(e.el+" tbody td").removeClass("selected"),c.addClass("selected"));var b=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth(),c.text(),0,0);e.parent&&e.parent.dateSelected&&e.parent.dateSelected(b)}},
300)});$(e.el).on("dblclick",".datepicker-days tbody td",function(){clearTimeout(e.timeOut);var c=$(this);c.hasClass("disabled")||(c=Date.create(e.viewDate.getUTCFullYear(),e.viewDate.getUTCMonth(),c.text(),0,0),e.parent&&e.parent.dateDbClick&&e.parent.dateDbClick(c))})},seletedAddClass:function(e){e=Date.create(e).format("{yyyy}{MM}{dd}");$(this.el+" tbody td").removeClass("selected");$(this.el+" #"+e).addClass("selected")},selectedDate:function(){return 1==$(this.el+" tbody td.selected").size()?
Date.create($(this.el+" tbody td.selected").attr("id")).format("{yyyy}-{MM}-{dd}"):Date.create(Date.now()).format("{yyyy}-{MM}-{dd}")},monthsEnvents:function(){var e=this;$(e.el).find(".datepicker-months tbody td span").on("click",function(){var c=$(e.el).find(".datepicker-months tbody td span").index($(this));e.viewDate=Date.create(e.viewDate.getUTCFullYear(),c,1,0,0);e.showMode(0);e.fill();e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))});$(e.el).find(".datepicker-months .datepicker-switch").on("click",
function(){e.showMode(2)});$(e.el).find(".datepicker-months thead .prev").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear()-1,1,2,0,0);$(e.el).find(".datepicker-months thead th.datepicker-switch").text(e.viewDate.getUTCFullYear())});$(e.el).find(".datepicker-months thead .next").on("click",function(){e.viewDate=Date.create(e.viewDate.getUTCFullYear()+1,1,2,0,0);$(e.el).find(".datepicker-months thead th.datepicker-switch").text(e.viewDate.getUTCFullYear())})},yearsEnvents:function(){var e=
this;$(e.el).find(".datepicker-years .datepicker-switch").on("click",function(){e.showMode(2)});$(e.el).find(".datepicker-years thead .prev").on("click",function(){e.fillYears(-12)});$(e.el).find(".datepicker-years thead .next").on("click",function(){e.fillYears(12)});$(e.el).find(".datepicker-years").on("click","tbody td span",function(){var c=$(this);$(e.el).find(".datepicker-years tbody td span").index(c);e.viewDate=Date.create(c.text(),Date.create().getUTCMonth(),1,0,0);e.showMode(0);e.fill();
e.parent&&e.parent.dateOtherMonth&&e.parent.dateOtherMonth(e.viewDate.format("{yyyy}-{MM}-{dd}"))})},footButtonsEnvents:function(){var e=this;$(e.el).find(".datepicker tfoot .foot-buttons span").on("click",function(){var c=$(this);"foot-today"==c.attr("class")?e.parent&&e.parent.todaySelected&&e.parent.todaySelected(Date.create()):"foot-tomorrow"==c.attr("class")?e.parent&&e.parent.tomorrowSelected&&e.parent.tomorrowSelected(Date.create("tomorrow")):"foot-future"==c.attr("class")?e.parent&&e.parent.futureSelected&&
e.parent.futureSelected(Date.create().addDays(2)):"foot-memo"==c.attr("class")&&e.parent&&e.parent.memoSelected&&e.parent.memoSelected()})},showMode:function(e){e||(e=0);this.viewMode=e;$(this.el).find(".datepicker\x3ediv").hide().filter(".datepicker-"+this.modes[this.viewMode].clsName).css("display","block");1==e&&$(this.el).find(".datepicker-"+this.modes[this.viewMode].clsName+" thead th.datepicker-switch").text(this.viewDate.getUTCFullYear())},changeHolidayStatus:function(e,c){var b=this,a=Date.create(b.viewDate),
d=Date.create(e),g=!1;a.format("{yyyy}-{MM}")==d.format("{yyyy}-{MM}")&&$(b.el).find(".datepicker-days tbody td").each(function(){var a=$(this);a.text()!=d.format("{d}")||a.hasClass("disabled")||(null==c?a.hasClass("holiday")?(a.removeClass("holiday"),g=!1):(a.addClass("holiday"),g=!0):c?(a.addClass("holiday"),g=!0):(a.removeClass("holiday"),g=!1),b.saveOrUpdateWorkDay(g,d.format("{yyyy}-{MM}-{dd}")))})},loadHolidays:function(e){var c=this;e&&0!=e.length?c.renderHolidays(e):c.loadWorkDay(Date.create(c.viewDate).format("{yyyy}-{MM}-{dd}"),
function(b){c.renderHolidays(b.workdays)})},renderHolidays:function(e){if(e&&0!=e.length){var c=Date.create(this.viewDate);if(e[0].workdayDate){var b=Date.create(e[0].workdayDate);if(c.format("{yyyy}-{MM}")!=b.format("{yyyy}-{MM}"))return}$(this.el).find(".datepicker-days tbody td").each(function(){for(var a=$(this),b=0;b<e.length;b++){var c=e[b];a.text()!=Date.create(c.workdayDate).format("{d}")||a.hasClass("disabled")||(c.holiday?a.addClass("holiday"):a.removeClass("holiday"),c.seleted?a.addClass("seleted"):
a.removeClass("seleted"),c.highlight?a.addClass("highlight"):a.removeClass("highlight"))}})}},loadHasCalendarDay:function(e){e&&0!=e.length?$(this.el).find(".datepicker-days tbody td").each(function(){for(var c=$(this),b=!1,a=0;a<e.length;a++){var d=e[a];if(c.attr("id")==Date.create(d).format("{yyyy}{MM}{dd}")&&!c.hasClass("disabled")){b=!0;break}}b?c.addClass("highlight"):c.removeClass("highlight")}):$(this.el).find(".datepicker-days tbody td").removeClass("highlight")},loadHolidaysByComma:function(e){if(e&&
0!=e.length){var c=e.split(",");$(this.el).find(".datepicker-days tbody td").each(function(){var b=$(this);if(b.hasClass("disabled"))return!0;b.addClass("holiday");for(var a=0;a<c.length;a++){var d=c[a];"0"!=d&&b.text()==d&&b.removeClass("holiday")}})}},changeHeadVisible:function(e){1==e&&$(this.el).find(".datepicker thead .head-opt").show();0==e&&$(this.el).find(".datepicker thead .head-opt").hide()},changeFootVisible:function(e){1==e&&$(this.el).find(".datepicker tfoot").show();0==e&&$(this.el).find(".datepicker tfoot").hide()},
getDays:function(e){var c="0,";$(this.el).find(".datepicker-days tbody td").each(function(){var b=$(this);if(b.hasClass("disabled"))return!0;1==e&&b.hasClass("holiday")&&(c+=b.text()+",");0==e&&(b.hasClass("holiday")||(c+=b.text()+","))});return c},saveOrUpdateWorkDay:function(e,c){$.ajax({type:"post",url:"/timecard/saveOrUpdateWorkDay.json",dataType:"json",data:{date:c,holiday:e},success:function(b){}})},loadWorkDay:function(e,c){$.ajax({type:"get",async:!1,url:"/timecard/loadWorkDay.json",dataType:"json",
data:{date:e},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/views/taskcalendarview",["teams/utils","teams/views/calendarview","teams/models/taskcalendarmodel","teams/task/taskview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/views/calendarview"),c=h("teams/models/taskcalendarmodel"),b=h("teams/task/taskview");h=Backbone.View.extend({el:".main",userId:null,viewDate:null,viewMode:"month",timeViewMode:"dueDate",initialize:function(a){this.model=new c(a);this.userId=a.userId;this.el=a.container?a.container:".main";$(this.el).html(f.template("task.calendar",
{userId:this.userId}));f.layout("#taskcalendar-wrapper")},render:function(a){a||(a=TEAMS.nowTime);a=Date.create(a);this.loadData(a)},loadData:function(a){var b=this,c=this.model;b.viewDate=a;$(b.el).find("#taskcalendar").empty();b.calendarView||(b.calendarView=new e({el:"#taskcalendar",parent:b,headVisible:!1}));b.calendarView.render(a);b.calendarView.loadHolidays();$(b.el).find(".datepicker-days thead .dow").each(function(){var a=$(this);a.html("\u5468"+a.html())});$(b.el).find(".datepicker-days tbody td").each(function(){var a=
$(this);a.html('\x3cdiv class\x3d"tasks"\x3e\x3cdiv class\x3d"task-day-head"\x3e\x3cdiv class\x3d"task-day"\x3e'+a.html()+'\x3c/div\x3e\x3cdiv class\x3d"task-more" style\x3d"display:none;"\x3e\x3ca\x3e\u663e\u793a\u5168\u90e8\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tasks-div"\x3e\x3cdiv class\x3d"tasks-div-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')});var l=[],l=$(b.el).find(".datepicker-days tbody td:first").attr("class").split(" "),f=null,k=null,r=null;for(a=0;a<l.length;a++)l[a].indexOf("Y")==
l[a].length-1&&(f=l[a].substring(0,l[a].length-1)),l[a].indexOf("M")==l[a].length-1&&(k=l[a].substring(0,l[a].length-1)),l[a].indexOf("D")==l[a].length-1&&(r=l[a].substring(0,l[a].length-1));var l=Date.create(parseInt(f),parseInt(k)-1,parseInt(r),0,0),f=[],f=$(b.el).find(".datepicker-days tbody td:last").attr("class").split(" "),p=r=k=null;for(a=0;a<f.length;a++)f[a].indexOf("Y")==f[a].length-1&&(k=f[a].substring(0,f[a].length-1)),f[a].indexOf("M")==f[a].length-1&&(r=f[a].substring(0,f[a].length-
1)),f[a].indexOf("D")==f[a].length-1&&(p=f[a].substring(0,f[a].length-1));a=Date.create(parseInt(k),parseInt(r)-1,parseInt(p),0,0);a.addDays(1);a.addSeconds(-1);$(b.el).find(".date-between").html(l.format("{yyyy}\u5e74{M}\u6708{d}\u65e5")+"-"+a.format("{M}\u6708{d}\u65e5"));c.load(l.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),a.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),function(a){var c=a.user;c&&$(b.el).find("#taskcalendar-head .j_taskusername").html(c.username+"\u7684\u65f6\u95f4\u89c6\u56fe");if((a=
a.taskList)&&a.length){for(var c=$(b.el).find(".datepicker-days tbody td").height(),c=parseInt(c/20),g=0;g<a.length;g++){var e=a[g];if("dueDate"!=b.timeViewMode||e.dueDate)if("finished"!=b.timeViewMode||e.finishTime){var l=e.name,k=e.id,f=null;"dueDate"==b.timeViewMode&&(f=Date.create(e.dueDate).reset());"finished"==b.timeViewMode&&(f=Date.create(e.finishTime).reset());$(b.el).find(".datepicker-days tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+
"D").find(".tasks-div .tasks-div-container").append('\x3cdiv id\x3d"taskcalendar-'+k+'" class\x3d"task entitybox-toggle" data-id\x3d"'+k+'" data-module\x3d"task" data-value\x3d"'+k+'"\x3e\x3ca\x3e'+l+"\x3c/a\x3e\x3c/div\x3e");$(b.el).find(".datepicker-days tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".tasks .task").size()>c&&($(b.el).find(".datepicker-days tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+
"M").filter("."+f.format("{d}")+"D").data("overflow",1),e=$(b.el).find(".datepicker-days tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".task-more").show(),e.find("a").html("\u5269\u4f59"+($(b.el).find(".datepicker-days tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".tasks .task").size()-c)+"\u6761"),e.show())}}$(b.el).find(".datepicker-days tbody td").each(function(){var a=
$(this);a.data("overflow")&&!a.find(".tasks-div").hasClass("mCustomScrollbar")&&a.find(".tasks-div").mCustomScrollbar({theme:"lightblue"});a.find("#mCSB_3").removeClass("mCustomScrollBox")});setTimeout(function(){var a=$(b.el).find(".datepicker-days tbody td.today");1<=a.size()&&a.offset().top>$(window).height()&&$("#taskcalendar-wrapper").mCustomScrollbar("scrollTo",a.offset().top)},300)}})},loadWeekData:function(a){var b=this,c=this.model;a=Date.create(a);if("month"==b.viewMode&&1==$(b.el).find("#taskcalendar-week tbody td:last").size()){for(var e=
[],e=$(b.el).find(".datepicker-days tbody td:last").attr("class").split(" "),n=null,k=null,r=null,p=0;p<e.length;p++)e[p].indexOf("Y")==e[p].length-1&&(n=e[p].substring(0,e[p].length-1)),e[p].indexOf("M")==e[p].length-1&&(k=e[p].substring(0,e[p].length-1)),e[p].indexOf("D")==e[p].length-1&&(r=e[p].substring(0,e[p].length-1));e=Date.create(parseInt(n),parseInt(k)-1,parseInt(r),0,0);e.addDays(1);e.addSeconds(-1);if(e.getUTCFullYear()==a.getUTCFullYear()&&e.getUTCMonth()==a.getUTCMonth())return}a.is("Monday")||
(a=a.beginningOfWeek().addDays(1));b.viewDate=Date.create(a);$(b.el).find("#taskcalendar-week thead").empty();$(b.el).find("#taskcalendar-week tbody").empty();a=Date.create(a.addDays(-1));e=1;n='\x3ctr class\x3d"dow-tr"\x3e';for(k="\x3ctr\x3e";8>e;)n+='\x3cth href\x3d"#taskModal-new-task" role\x3d"button" data-toggle\x3d"modal" class\x3d"dow"\x3e'+a.addDays(1).format("{M}\u6708/{d}\u65e5")+"("+b.calendarView.dates.daysShort[e++%7]+")\x3c/th\x3e",k+='\x3ctd href\x3d"#taskModal-new-task" class\x3d"'+
a.format("{yyyy}")+"Y "+a.format("{M}")+"M "+a.format("{d}")+'D"\x3e\x3cdiv class\x3d"tasks"\x3e\x3cdiv class\x3d"task-more" style\x3d"display:none;"\x3e\x3ca\x3e\u663e\u793a\u5168\u90e8\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e';n+="\x3c/tr\x3e";k+="\x3c/tr\x3e";$(b.el).find("#taskcalendar-week thead").html(n);$(b.el).find("#taskcalendar-week tbody").html(k);$(b.el).find(".date-between").html(b.viewDate.format("{yyyy}\u5e74{M}\u6708{d}\u65e5")+"-"+a.format("{M}\u6708{d}\u65e5"));f.layout("#taskcalendar-wrapper");
c.load(b.viewDate.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),a.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),function(a){if((a=a.taskList)&&a.length)for(var c=$(b.el).find("#taskcalendar-week tbody td").height(),c=parseInt(c/20),g=0;g<a.length;g++){var e=a[g];if("dueDate"!=b.timeViewMode||e.dueDate)if("finished"!=b.timeViewMode||e.finishTime){var k=e.name,l=e.id,f=null;"dueDate"==b.timeViewMode&&(f=Date.create(e.dueDate).reset());"finished"==b.timeViewMode&&(f=Date.create(e.finishTime).reset());$(b.el).find("#taskcalendar-week tbody td").filter("."+
f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".tasks .task-more").before('\x3cdiv id\x3d"taskcalendar-'+l+'" class\x3d"task entitybox-toggle" data-id\x3d"'+l+'" data-module\x3d"task" data-value\x3d"'+l+'"\x3e\x3ca\x3e'+k+"\x3c/a\x3e\x3c/div\x3e");$(b.el).find("#taskcalendar-week tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".tasks .task").size()>=c-1&&(e=$(b.el).find("#taskcalendar-week tbody td").filter("."+
f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".task-more"),e.find("a").html("\u5269\u4f59"+($(b.el).find("#taskcalendar-week tbody td").filter("."+f.format("{yyyy}")+"Y").filter("."+f.format("{M}")+"M").filter("."+f.format("{d}")+"D").find(".tasks .task").size()-c+2)+"\u6761"),e.show())}}})},showMonth:function(a){$(this.el).find("#taskcalendar-wrapper").show();$(this.el).find("#taskcalendar-week").hide();$(this.el).find(".this-month").show();$(this.el).find(".this-week").hide();
$(this.el).find(".views .month").addClass("btn-info");$(this.el).find(".views .week").removeClass("btn-info");this.loadData(a);this.viewMode="month"},showWeek:function(a){$(this.el).find("#taskcalendar-wrapper").hide();$(this.el).find("#taskcalendar-week").show();$(this.el).find(".this-month").hide();$(this.el).find(".this-week").show();$(this.el).find(".views .month").removeClass("btn-info");$(this.el).find(".views .week").addClass("btn-info");this.loadWeekData(a);this.viewMode="week"},newTask:function(a,
d,c){var e=this;$(e.el).find('div[id^\x3d"taskModal-"]').remove();c=$(e.el).find("#taskModal").clone(!0);c.attr("id","taskModal-new-task");c.find(".modal-body").attr("id","task-container");$(e.el).append(c);e.taskView=new b({id:a,parent:e,taskRouter:"/home/"+e.userId+"/",container:"#task-container",dueDate:d});e.taskView.render();e.taskView.on("create",function(a){$(e.el).find("#taskcalendar-head .refresh").click()});$(e.el).find("#taskModal-new-task").modal("show").on("shown",function(){$(e.taskView.el).find("#task-title").focus()})},
delegateEvents:function(){var a=this,d=a.model;$(a.el).find("#taskcalendar,#taskcalendar-week").on("click.taskcalendar",".task-more a",function(b){$(a.el).find(".datepicker-days tbody td").each(function(){var a=$(this);a.find("#mCSB_3").hasClass("mCustomScrollBox")||a.find("#mCSB_3").addClass("mCustomScrollBox")})});$(a.el).find("#taskcalendar,#taskcalendar-week").on("click.taskcalendar",".task[href^\x3d'#taskModal-']",function(d){var c=$(this),e=c.attr("href").substr(11);$(a.el).find('div[id^\x3d"taskModal-"]').remove();
var k=$(a.el).find("#taskModal").clone(!0);k.attr("id",c.attr("href").substr(1));k.find(".modal-body").attr("id","task-container");$(a.el).append(k);a.taskView=new b({id:e,parent:a,taskRouter:"/home/"+a.userId+"/",container:"#task-container"});a.taskView.render();$(a.el).find("#taskModal-"+e).modal("show");d.stopPropagation()});$(a.el).find("#taskcalendar").on("click.taskcalendar",".datepicker-days tbody td, .task-day-head",function(b){if(!$(b.target).parents("div").hasClass("entitybox-toggle")){var d=
$(this);"task-day-head"==d.attr("class")&&(d=d.parents("td"));for(var c=[],c=d.attr("class").split(" "),e=d=null,f=null,p=0;p<c.length;p++)c[p].indexOf("Y")==c[p].length-1&&(d=c[p].substring(0,c[p].length-1)),c[p].indexOf("M")==c[p].length-1&&(e=c[p].substring(0,c[p].length-1)),c[p].indexOf("D")==c[p].length-1&&(f=c[p].substring(0,c[p].length-1));c=Date.create(parseInt(d),parseInt(e)-1,parseInt(f),0,0);c<Date.create().reset()||(d="memo",c.is("today")?d="today":c.isTomorrow()?d="tomorrow":c>=Date.create().reset().addDays(2)&&
(d="future"),a.newTask(d,c),b.stopPropagation())}});$(a.el).find("#taskcalendar-week tbody").on("click.taskcalendar","td",function(b){if(!$(b.target).parents("div").hasClass("entitybox-toggle")){for(var d=[],d=$(this).attr("class").split(" "),c=null,e=null,f=null,p=0;p<d.length;p++)d[p].indexOf("Y")==d[p].length-1&&(c=d[p].substring(0,d[p].length-1)),d[p].indexOf("M")==d[p].length-1&&(e=d[p].substring(0,d[p].length-1)),d[p].indexOf("D")==d[p].length-1&&(f=d[p].substring(0,d[p].length-1));d=Date.create(parseInt(c),
parseInt(e)-1,parseInt(f),0,0);d<Date.create().reset()||(c="memo",d.is("today")?c="today":d.isTomorrow()?c="tomorrow":d>=Date.create().reset().addDays(2)&&(c="future"),a.newTask(c,d),b.stopPropagation())}});$(a.el).find("#taskcalendar-week thead").on("click.taskcalendar",".dow-tr th",function(b){for(var d=$(this),c=[],c=$(a.el).find("#taskcalendar-week tbody td:eq("+parseInt($(a.el).find("#taskcalendar-week thead .dow-tr th").index(d))+")").attr("class").split(" "),e=d=null,f=null,p=0;p<c.length;p++)c[p].indexOf("Y")==
c[p].length-1&&(d=c[p].substring(0,c[p].length-1)),c[p].indexOf("M")==c[p].length-1&&(e=c[p].substring(0,c[p].length-1)),c[p].indexOf("D")==c[p].length-1&&(f=c[p].substring(0,c[p].length-1));c=Date.create(parseInt(d),parseInt(e)-1,parseInt(f),0,0);c<Date.create().reset()||(d="memo",c.is("today")?d="today":c.isTomorrow()?d="tomorrow":c>=Date.create().reset().addDays(2)&&(d="future"),a.newTask(d,c),b.stopPropagation())});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".new",function(){var b=
Date.create();a.newTask("today",b)});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".this-month",function(){a.loadData(Date.create().reset("date").addDays(1))});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".this-week",function(){a.loadWeekData(Date.create())});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".arrow-left",function(){"month"==a.viewMode&&a.loadData(Date.create(a.viewDate.getUTCFullYear(),a.viewDate.getUTCMonth()-1,2,0,0));"week"==a.viewMode&&a.loadWeekData(a.viewDate.addDays(-7))});
$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".arrow-right",function(){"month"==a.viewMode&&a.loadData(Date.create(a.viewDate.getUTCFullYear(),a.viewDate.getUTCMonth()+1,2,0,0));"week"==a.viewMode&&a.loadWeekData(a.viewDate.addDays(7))});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".week",function(){"month"==a.viewMode&&a.showWeek(a.viewDate.reset("date").addDays(1))});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".month",function(){"week"==a.viewMode&&a.showMonth(a.viewDate.addDays(6))});
$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".refresh",function(){"month"==a.viewMode&&a.loadData(Date.create(a.viewDate.getUTCFullYear(),a.viewDate.getUTCMonth(),2,0,0));"week"==a.viewMode&&a.loadWeekData(a.viewDate)});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".duedate-view",function(){$(a.el).find("#taskcalendar-head .duedate-view").addClass("btn-info");$(a.el).find("#taskcalendar-head .finished-view").removeClass("btn-info");a.timeViewMode="dueDate";d.timeViewMode=
"dueDate";"month"==a.viewMode&&a.loadData(Date.create(a.viewDate.getUTCFullYear(),a.viewDate.getUTCMonth(),2,0,0));"week"==a.viewMode&&a.loadWeekData(a.viewDate)});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".finished-view",function(){$(a.el).find("#taskcalendar-head .duedate-view").removeClass("btn-info");$(a.el).find("#taskcalendar-head .finished-view").addClass("btn-info");a.timeViewMode="finished";d.timeViewMode="finished";"month"==a.viewMode&&a.loadData(Date.create(a.viewDate.getUTCFullYear(),
a.viewDate.getUTCMonth(),2,0,0));"week"==a.viewMode&&a.loadWeekData(a.viewDate)});$(a.el).find("#taskcalendar-head").on("click.taskcalendar",".workcenter",function(){})},remove:function(){$(this.el).off(".taskcalendar");this.model=null}});m.exports=h});
define("teams/views/authorityview",["teams/utils","teams/models/authoritymodel","teams/org/followmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/authoritymodel"),c=h("teams/org/followmodel");h=Backbone.View.extend({container:"",initialize:function(b){this.model=new e;this.followModel=new c;this.container=b.container;this.el=this.container+" .no-blog-watch-authority";$(this.container).empty().append(f.template("component.authority"))},render:function(b,a){this.employee=a;$(this.el).find(".no-blog-watch-authority-username a").attr("title",
a.username).html(a.username);$(this.el).removeClass("hide")},delegateEvents:function(){var b=this,a=b.followModel;$(b.el).on("click",".no-blog-watch-authority-followRequest",function(){a.follow(b.employee.id,TEAMS.currentUser.id,function(a){"approved"==a?(f.notify("\u6dfb\u52a0\u5173\u6ce8\u6210\u529f"),window.location.reload()):f.notify("\u5173\u6ce8\u7533\u8bf7\u5df2\u53d1\u9001")})})}});m.exports=h});
define("teams/mainline/mainlineblogview",["teams/utils","teams/mainline/mainlineblogmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlineblogmodel");h=Backbone.View.extend({initialize:function(c){this.initModel(c);this.el=c.el||"#other-blogs-container";c=f.template("mainline.mainlineblog");this.$el.html(c)},initModel:function(c){this.model=new e({mainlineId:c.mainlineId})},delegateEvents:function(){var c=this,b=c.model,a=$(c.el);a.on("click",".j_download",function(a){a=$(this).attr("data-id");
var g=$(this);g.attr("href")||b.findFileObj(a,function(a){a.fileObj?(g.attr("href","/base/download/"+a.fileObj.id+"?download\x3dtrue"),0==$("#download-iframe").size()?$("\x3ciframe\x3e",{src:"/base/download/"+a.fileObj.id+"?download\x3dtrue","class":"hide",id:"download-iframe"}).appendTo(c.el):$("#download-iframe").attr("src","/base/download/"+a.fileObj.id+"?download\x3dtrue")):f.notify("\u670d\u52a1\u5668\u4e0a\u6587\u6863\u6570\u636e\u4e0d\u5b58\u5728")})});a.on("click","#update-more",function(a){c.renderMore()})},
render:function(c){var b=this,a=this.model;c&&(a.mainlineId=c);b.$el.find("#result").empty();b.$el.find("#other-blog-loading").removeClass("hide");this.model.load(!1,function(a){b.renderResult(a)})},renderMore:function(){var c=this;c.$el.find("#other-blog-loading").removeClass("hide");this.model.load(!0,function(b){c.renderResult(b)})},renderResult:function(c){var b=c.page.result;this.$el.find("#other-blog-loading").addClass("hide");b.length?(this.$el.find(".j_no-result").addClass("hide"),this.$el.find("#result").removeClass("hide"),
this.$el.find("#suffix").removeClass("hide")):(this.$el.find(".j_no-result").removeClass("hide"),this.$el.find("#result").addClass("hide"),this.$el.find("#suffix").addClass("hide"));for(var a=0;a<b.length;a++)this.renderOne(b[a]);c.page.hasNext?(this.$el.find("#update-more").removeClass("hide"),this.$el.find("#suffix").addClass("hide")):this.$el.find("#update-more").addClass("hide")},renderOne:function(c){var b=this.$el.find("#yyyyMMdd .j_blog-group").clone().html().trim(),a=Date.create(c.createTime),
b=b.replace(/{avatarPath}/g,c.creator.avatar&&c.creator.avatar.p4?"/base/download/"+c.creator.avatar.p4:"images/avatar.png"),b=b.replace(/{creator}/g,c.creator.id),b=b.replace(/{who}/g,c.creator.name),d=this.translate(c.type,c.module),b=b.replace(/{operation}/g,d),b=b.replace(/{ref-link}/g,this.buildRefLink(c)),b=b.replace(/{HH:mm}/g,a.format("{HH}:{mm}")),b=$(b);b.attr("id",c.id);b.attr("data-key",a.format("{yyyy}{MM}{dd}"));this.addBlog(b)},addBlog:function(c){var b=c.attr("data-key"),a=
this.$el.find("#result");if(0<a.children("#"+b).size())a.children("#"+b).find(".j_blog-group").append(c);else{var d=this.$el.find("#yyyyMMdd").clone().removeClass("hide"),g=Date.create(b),e=g.is(Date.create().format("{yyyy}"));d.find(".j_blog-date .j_year").text(g.format("{yyyy}")).toggleClass("hide",e);d.find(".j_blog-date .j_month-day").text(g.format("{yyyy}/{MM}/{dd}"));d.find(".j_one-blog").replaceWith(c);d.attr("id",b);a.append(d)}},translate:function(c,b){var a="";switch(c){case "blog":a+="\u65e5\u5fd7";
break;case "create":a+="\u521b\u5efa";break;case "comment":a+="\u8bc4\u8bba";break;case "finish":return a+"\u5b8c\u6210\u4efb\u52a1";case "reopen":return a+="\u6253\u5f00\u5df2\u5b8c\u6210\u7684\u4efb\u52a1";case "closeml":return a+="\u5173\u95ed\u9879\u76ee";case "openml":return a+="\u6253\u5f00\u5df2\u5173\u95ed\u7684\u9879\u76ee";case "accept":return a+="\u540c\u610f\u5ba1\u6279";case "reject":return a+="\u9000\u56de\u5ba1\u6279"}return a+="\u4e86"+this.translateModule(b)},translateModule:function(c){var b;
switch(c){case "task":b="\u4efb\u52a1";break;case "document":b="\u6587\u6863";break;case "workflow":b="\u5de5\u4f5c\u5ba1\u6279";break;case "customer":b="\u5ba2\u6237"}return b},buildRefLink:function(c){var b=c.module,a=[];switch(c.type){case "create":switch(b){case "document":return a.push(this.buildRefLinkHtml(c)),a.join(" ");case "task":case "customer":case "workflow":case "mainline":case "workreport":return a.push(this.buildRefLinkHtml(c)),a.join("")}case "comment":return a.push(this.buildRefLinkHtml(c)),
c.content&&a.push('\x3cdiv class\x3d"comment break"\x3e'+f.initMessage(c.content)+"\x3c/div\x3e"),a.join("");case "finish":return a.push(this.buildRefLinkHtml(c)),a.join("");case "reopen":return a.push(this.buildRefLinkHtml(c)),a.join("");case "accept":return a.push(this.buildRefLinkHtml(c)),a.join("");case "reject":return a.push(this.buildRefLinkHtml(c)),a.join("");case "closeml":return a.push(this.buildRefLinkHtml(c)),html.join("");case "openml":return a.push(this.buildRefLinkHtml(c)),a.join("");
default:f.alert('blog\'s type not defined while "buildRefLink"')}},buildRefLinkHtml:function(c){return $('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'"data-id\x3d"'+c.refId+'" data-module\x3d"'+c.module+'"\x3e\x3c/a\x3e').text(c.title).prop("outerHTML")},generateBlog:function(c){var b=c.module;switch(c.type){case "blog":return c.content?f.initMessage(c.content):"";case "create":var a=[];switch(b){case "task":a.push("\u4efb\u52a1\uff1a  \u521b\u5efa\u4e86");
break;case "document":return a.push("\u6587\u6863\uff1a   \u4e0a\u4f20\u4e86 "),a.push(view.buildRefLinkHtml(c)),a.push('\x3ca class\x3d"j_download download btn btn-xs btn-info" data-id\x3d"'+c.refId+'"\x3e\u4e0b\u8f7d\x3c/a\x3e'),a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.join("");case "customer":a.push("\u5ba2\u6237\uff1a    \u521b\u5efa\u4e86 ");break;case "workflow":a.push("\u5ba1\u6279\uff1a     \u53d1\u8d77\u4e86 ");break;case "mainline":a.push("\u9879\u76ee\uff1a      \u521b\u5efa\u4e86");
break;case "workreport":a.push("\u62a5\u544a\uff1a      \u521b\u5efa\u4e86")}a.push(view.buildRefLinkHtml(c));a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "comment":a=[];switch(b){case "task":a.push("\u4efb\u52a1\uff1a  ");break;case "document":a.push("\u6587\u6863\uff1a   ");break;case "customer":a.push("\u5ba2\u6237\uff1a    ");break;case "workflow":a.push("\u5ba1\u6279 \uff1a   ");break;case "mainline":a.push("\u9879\u76ee \uff1a   ");
break;case "workreport":a.push("\u62a5\u544a \uff1a   ")}a.push(view.buildRefLinkHtml(c));a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");c.content&&a.push('\x3cdiv class\x3d"comment"\x3e'+f.initMessage(c.content)+"\x3c/div\x3e");return a.join("");case "finish":a=[];switch(b){case "task":a.push("\u5c06\u4efb\u52a1\uff1a  ")}a.push(view.buildRefLinkHtml(c));a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5b8c\u6210");a.push('\x3cspan class\x3d"time"\x3e'+
Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "reopen":a=[];switch(b){case "task":a.push("\u5c06\u4efb\u52a1\uff1a  ")}a.push(view.buildRefLinkHtml(c));a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210");a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "accept":return a=[],a.push("\u5ba1\u6279\uff1a     \u540c\u610f\u4e86"),a.push('\x3ca class\x3d"usercard-toggle j_entityslider-toggle filterSlip_js" userid\x3d"'+
c.refCreator.id+'"\x3e'+c.refCreator.name+"\x3c/a\x3e"),a.push("\u521b\u5efa\u7684\u5ba1\u6279"),a.push(view.buildRefLinkHtml(c)),a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.join("");case "reject":return a=[],a.push("\u5ba1\u6279\uff1a     \u9000\u56de\u4e86"),a.push('\x3ca class\x3d"usercard-toggle" userid\x3d"'+c.refCreator.id+'"\x3e'+c.refCreator.name+"\x3c/a\x3e"),a.push("\u521b\u5efa\u7684\u5ba1\u6279"),a.push(view.buildRefLinkHtml(c)),
a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e"),a.join("");case "closeml":a=[];switch(b){case "mainline":a.push("\u5c06\u9879\u76ee\uff1a  ")}a.push(view.buildRefLinkHtml(c));a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5173\u95ed");a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("");case "openml":a=[];switch(b){case "mainline":a.push("\u5c06\u9879\u76ee\uff1a  ")}a.push(view.buildRefLinkHtml(c));
a.push("\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u6253\u5f00");a.push('\x3cspan class\x3d"time"\x3e'+Date.create(c.createTime).format("{HH}:{mm}:{ss}")+"\x3c/span\x3e");return a.join("")}}});m.exports=h});
define("teams/mainline/mainlinelinklistview","teams/utils teams/mainline/mainlinelinkmodel teams/mainline/mainlinemodel teams/task/taskmodel teams/task/mytaskmodel teams/mainline/mainlineavatar teams/component/sharemodel teams/component/watchmodel teams/component/entityselector teams/mainline/mainlinenew teams/mainline/mainlineview teams/views/feedbackview teams/doc/documentnewview teams/workflow/flowstartview teams/component/typeahead teams/component/filter teams/component/entityslider teams/mainline/mainlinestatisticview.js teams/mainline/mainlineblogview teams/component/spectacularsview teams/mainline/mainlinecalendarview.js".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlinelinkmodel"),c=h("teams/mainline/mainlinemodel"),b=h("teams/task/taskmodel"),a=h("teams/task/mytaskmodel"),d=h("teams/mainline/mainlineavatar"),g=h("teams/component/sharemodel"),l=h("teams/component/watchmodel"),n=h("teams/component/entityselector"),k=h("teams/mainline/mainlinenew");h("teams/mainline/mainlineview");var r=h("teams/views/feedbackview"),p=h("teams/doc/documentnewview"),s=h("teams/workflow/flowstartview");h("teams/component/typeahead");
var u=h("teams/component/filter"),w=h("teams/component/entityslider"),v=h("teams/mainline/mainlinestatisticview.js"),x=h("teams/mainline/mainlineblogview"),y=h("teams/component/spectacularsview"),z=h("teams/mainline/mainlinecalendarview.js");q=Backbone.View.extend({initialize:function(d){this.el=d.container||"#main";this.id=d.id;this.userId=d.userId||TEAMS.currentUser.id;this.module=d.module;this.filterType=d.filterType?d.filterType:"mine";this.timeview=this.initPermission=!1;this.mainlineType=d.mainlineType;
this.mainlinelinkmodel=new e;this.mainlinemodel=new c;this.taskmodel=new b({id:""});this.mytaskmodel=new a({});this.watchModel=new l;this.shareModel=new g({entityId:"",module:""});this.page=d.page;this.mainlinestatisticview=new v({container:this.el,id:this.id});$(this.el).html(f.template("mainline.mainlinelinklist",{id:this.id,userId:this.userId}));this.$el=$(this.el);f.layout("#mini-mainline-list");this.orders={mainblog:null,task:[{title:"\u9ed8\u8ba4",property:"default",direction:"DESC"},{title:"\u6309\u53cd\u9988\u65f6\u95f4",
property:"last_comment_time",direction:"DESC"},{title:"\u6309\u4efb\u52a1\u66f4\u65b0\u65f6\u95f4",property:"last_update_time",direction:"DESC"},{title:"\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65b0)",property:"create_time",direction:"DESC"},{title:"\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65e9)",property:"create_time",direction:"ASC"},{title:"\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65b0)",property:"due_date",direction:"DESC"},{title:"\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65e9)",
property:"due_date",direction:"ASC"},{title:"\u6309\u8d1f\u8d23\u4eba",property:"manager",direction:"ASC"},{title:"\u6309\u7d27\u6025\u7a0b\u5ea6",property:"priority",direction:"DESC"}],customer:[{title:"\u9ed8\u8ba4",property:"default",direction:"DESC"},{title:"\u6309\u53cd\u9988\u65f6\u95f4",property:"last_comment_time",direction:"DESC"},{title:"\u6309\u5ba2\u6237\u66f4\u65b0\u65f6\u95f4",property:"last_update_time",direction:"DESC"},{title:"\u6309\u5ba2\u6237\u521b\u5efa\u65f6\u95f4",property:"create_time",
direction:"DESC"},{title:"\u6309\u5ba2\u6237\u540d\u79f0",property:"name",direction:"DESC"}],document:[{title:"\u9ed8\u8ba4",property:"default",direction:"DESC"},{title:"\u6309\u53cd\u9988\u65f6\u95f4",property:"last_comment_time",direction:"DESC"},{title:"\u6309\u6587\u6863\u66f4\u65b0\u65f6\u95f4",property:"last_update_time",direction:"DESC"},{title:"\u6309\u6587\u6863\u521b\u5efa\u65f6\u95f4",property:"create_time",direction:"DESC"},{title:"\u6309\u8d1f\u8d23\u4eba",property:"manager",direction:"ASC"}],
workflow:[{title:"\u9ed8\u8ba4",property:"default",direction:"DESC"},{title:"\u6309\u53cd\u9988\u65f6\u95f4",property:"last_comment_time",direction:"DESC"},{title:"\u6309\u7533\u8bf7\u65f6\u95f4",property:"create_time",direction:"DESC"},{title:"\u6309\u7533\u8bf7\u4eba",property:"creator",direction:"ASC"}],calendar:[{title:"\u9ed8\u8ba4",property:"default",direction:"DESC"},{title:"\u6309\u7ed3\u675f\u65f6\u95f4",property:"end_time",direction:"DESC"}]}},delegateEvents:function(){$el=$("#mainContainer");
var a=this;1440<=$(window).width()?($el.find(".j_goalSlideObj").addClass("sidebar-in"),$el.find(".j_goalSlideCtrl").data("open",!0).addClass("on")):($el.find(".j_goalSlideObj").removeClass("sidebar-in"),$el.find(".j_goalSlideCtrl").data("open",!1).removeClass("on"));$("body").off("click.mainlinelink",".goto-top").on("click.mainlinelink",".goto-top",function(a){$("#mainlinelink-list-container").hasClass("hide")||($("#mainlinelink-list-container").mCustomScrollbar("update"),$("#mainlinelink-list-container").mCustomScrollbar("scrollTo",
"top"),setTimeout(function(){$("body .goto-top").addClass("hide")},200));$("#mainlinelink-statistics-container").hasClass("hide")||($("#mainlinelink-statistics-container").mCustomScrollbar("update"),$("#mainlinelink-statistics-container").mCustomScrollbar("scrollTo","top"),setTimeout(function(){$("body .goto-top").addClass("hide")},200));$("#mainline-view").hasClass("hide")||($("#mainline-container").mCustomScrollbar("update"),$("#mainline-container").mCustomScrollbar("scrollTo","top"),setTimeout(function(){$("body .goto-top").addClass("hide")},
200))});$el.on("click.mainlinelink","#load",function(){var b=a.mainlinestatisticview.tasksPrimaryCount(),d=a.id;$("#tableDiv").addClass("hide");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.mainlinestatisticview.finishChart&&($(window).off("resize",a.mainlinestatisticview.finishChart.resize),a.mainlinestatisticview.finishChart.dispose(),a.mainlinestatisticview.finishChart=null);a.mainlinestatisticview.initFinishCharts(d);a.mainlinestatisticview.loadFinishChart(d,b);a.mainlinestatisticview.rankChart&&
($(window).off("resize",a.mainlinestatisticview.rankChart.resize),a.mainlinestatisticview.rankChart.dispose(),a.mainlinestatisticview.rankChart=null);var c=$("#barType").children(".active").attr("value");a.mainlinestatisticview.initRankCharts(d);a.mainlinestatisticview.loadRankCharts(d,b,c);a.mainlinestatisticview.memberChart&&$(window).off("resize",a.mainlinestatisticview.memberChart.resize);a.mainlinestatisticview.dayChart&&($(window).off("resize",a.mainlinestatisticview.dayChart.resize),a.mainlinestatisticview.dayChart.dispose(),
a.mainlinestatisticview.dayChart=null);a.mainlinestatisticview.groupChart&&($(window).off("resize",a.mainlinestatisticview.groupChart.resize),a.mainlinestatisticview.groupChart.dispose(),a.mainlinestatisticview.groupChart=null);c=$("#detailBarType").find(".active").attr("value");"member"==c?(a.mainlinestatisticview.initMemberCharts(d),a.mainlinestatisticview.loadMemberCharts(d,b,c)):"date"==c?(a.mainlinestatisticview.initDayChart(d),a.mainlinestatisticview.loadDayChart(d,b,c)):(a.mainlinestatisticview.initGroupCharts(d),
a.mainlinestatisticview.loadGroupCharts(d,b,c))})});$el.off("mouseenter.mainlinelink","#task-filter").on("mouseenter.mainlinelink","#task-filter",function(b){$(this).addClass("open");var d=$(this).attr("data-toggle");a.dropdownFilter||(a.dropdownFilter=new u({el:d,module:"task",targetObj:$(this),userId:a.userId}),a.dropdownFilter.render(b));b=setTimeout(function(){$(d).slideDown("fast")},300);$(this).data("showTimer",b)}).off("mouseleave.mainlinelink","#task-filter").on("mouseleave.mainlinelink",
"#task-filter",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100)}).off("filter.mainlinelink","#task-filter").on("filter.mainlinelink","#task-filter",function(b){b=$(".j_if-time").find(".j_view_type").attr("data-type");"time"==b?(a.timeview=!0,a.initPermission&&$("#create-stage").addClass("hide"),$("#j_search-time-view").removeClass("hide"),$("#j_search-time-view .task-list").empty(),
$("#j_panel_view").addClass("hide"),$("#j_panel_view").empty(),$("#goal-no-stage").addClass("hide"),$("#mainlinelink-list-container #guide-stage-create").addClass("hide"),$("#mainlinelink-list-container").find(".guide-div").addClass("hide"),a.$el.find("#j_search_result").empty().addClass("hide"),a.renderTaskTimeView()):"panel"==b?(a.timeview=!1,a.initPermission&&$("#create-stage").addClass("hide"),$("#j_search-time-view").addClass("hide"),$("#j_search-time-view .task-list").empty(),$("#goal-no-stage").addClass("hide"),
$("#mainlinelink-list-container #guide-stage-create").addClass("hide"),$("#mainlinelink-list-container").find(".guide-div").addClass("hide"),a.$el.find("#j_search_result").empty().addClass("hide"),a.renderPanelView()):(a.timeview=!1,$("#j_search-time-view").addClass("hide"),$("#j_search-time-view .task-list").empty(),$("#j_panel_view").addClass("hide"),$("#j_panel_view").empty(),$("#goal-no-stage").removeClass("hide"),a.initPermission&&$("#create-stage").removeClass("hide"),$("#mainlinelink-list-container").find(".guide-div").attr("hasDate")?
$("#mainlinelink-list-container").find(".guide-div").addClass("hide"):$("#mainlinelink-list-container").find(".guide-div").removeClass("hide"),$("#mainlinelink-list-container #guide-stage-create").removeClass("hide"),$("#j_search_result").empty().removeClass("hide"),$("#j_search_result_no").find(".j_e_list").empty(),$("#j_search_result_no").removeClass("hide"),a.renderTask());$(this).removeClass("open")});$el.on("mouseenter.mainlinelink","#document-filter",function(b){$(this).addClass("open");var d=
$(this).attr("data-toggle");a.filter||(a.filter=new u({el:d,module:"document",targetObj:$(this),userId:a.userId}),a.filter.render(b));b=setTimeout(function(){$(d).slideDown("fast")},300);$(this).data("showTimer",b)}).on("mouseleave.mainlinelink","#document-filter",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100)}).on("filter.mainlinelink","#document-filter",function(b){a.renderDomain(a.id,
"document",null,!0)});$el.off("click.mainlinelink",".e-list-head").on("click.mainlinelink",".e-list-head",function(a){if(!($(a.target).hasClass("group-add")||0<$(a.target).parents(".group-add").length)){a=$(this).find(".group-switch");var b=a.parents(".group-view").find(".task-list");"on"==a.attr("data-status")?(a.attr("title","\u5c55\u5f00"),a.attr("data-status","off"),a.find("i:last").removeAttr("class").addClass("icon-angle-down"),b.hide()):(a.attr("title","\u6298\u53e0"),a.attr("data-status",
"on"),a.find("i:last").removeAttr("class").addClass("icon-angle-right"),b.show())}});$el.off("click.mainlinelink",".moduleType").on("click.mainlinelink",".moduleType",function(b){b=a.mainlinelinkmodel;var d=$(this).text();b.queryModelList(a.id,d,function(a){var b="";a=a.mainlineModuleList;for(var d=0;d<a.length;d++){var c=a[d],g;""!=c.time?(g=new Date(c.time),g=g.getFullYear()+"-"+(g.getMonth()+1)+"-"+g.getDate()):g="----";b=b+c.NAME+" "+c.username+" "+g+"\n"}f.alert(b,null)})});$el.off("click.mainlinelink",
".participant").on("click.mainlinelink",".participant",function(a){a=$(this).text();f.alert(a,null)});$el.off("click.mainlinelink",".workAmount").on("click.mainlinelink",".workAmount",function(a){f.alert("\u9879\u76ee\u4efb\u52a1\u5b8c\u6210\u60c5\u51b5",null)});$el.off("click.mainlinelink","span.j_mark").on("click.mainlinelink","span.j_mark",function(a){a.stopPropagation()});$el.off("click.mainlinelink",".j_mini-goal-addItem").on("click.mainlinelink",".j_mini-goal-addItem",function(b){a.mainlinenew=
new k({parentEl:a.el,callback:function(b){a.mainlinenew.hide();ROUTER.navigate("/mainline/link/"+b.id,{trigger:!0})}});a.mainlinenew.render()});$el.off("click.mainlinelink",".j_goal-category-head").on("click.mainlinelink",".j_goal-category-head",function(a){if(!(0<$(a.target).closest(".j_stage_name, .stage-change-name, .j_create-task, .j_goal-category-option").length)){a=$(this).find(".stage-switch");var b=a.parents(".j_goal-category").find(".j_e_list");"on"==a.attr("data-status")?(a.attr("title",
"\u5c55\u5f00"),a.attr("data-status","off"),a.find("i:last").removeClass().addClass("icon-angle-down"),b.slideUp()):(a.attr("title","\u6298\u53e0"),a.attr("data-status","on"),a.find("i:last").removeClass().addClass("icon-angle-right"),b.slideDown())}});$el.off("keyup.mainlinelink","#mainlinelink-keywords").on("keyup.mainlinelink","#mainlinelink-keywords",function(b){13==(b?b:window.event?window.event:null).keyCode&&($("#mainlinelink-loading").removeClass("hide"),$.trim($(this).val()),b=$(".j_if-time").find(".j_view_type").attr("data-type"),
"time"==b?a.renderTaskTimeView():"panel"==b?a.renderPanelView():($("#j_search_result_no").removeClass("hide"),a.renderTask()))});$el.off("click.MainlineList",".j_goalSlideCtrl").on("click.MainlineList",".j_goalSlideCtrl",function(){$(this).data("open")?($(".j_goalSlideObj").removeClass("sidebar-in"),$(this).data("open",!1).removeClass("on")):($(".j_goalSlideObj").addClass("sidebar-in"),$(this).data("open",!0).addClass("on"));setTimeout(function(){$(window).trigger("resize")},480)});$el.off("slideOut",
".j_goalSlideCtrl").on("slideOut",".j_goalSlideCtrl",function(){$(".j_goalSlideObj").addClass("sidebar-in");$(this).data("open",!0).addClass("on")});$el.off("slideIn",".j_goalSlideCtrl").on("slideIn",".j_goalSlideCtrl",function(){$(".j_goalSlideObj").removeClass("sidebar-in");$(this).data("open",!1).removeClass("on")});$el.off("click.mainlinelink",".j_mainline_link").on("click.mainlinelink",".j_mainline_link",function(b){$("#mainlinelink-statistics-container").addClass("hide");$(".j_e-nav-tab li").removeClass("current");
$(this).addClass("current");a.$el.find("#j_panel_view").empty().addClass("hide");b=$(this).attr("data-type");a.module=$(this).attr("data-type");"detail"!=b&&a.renderOrderLi(b);var d=a._getConfig("viewOrderType.mainline."+a.module)||"default";$("#mainline-order").attr("data-entity",d);$("a.orderType[data-entity]").parent().removeClass("active");$('a.orderType[data-entity\x3d"'+d+'"]').parent().addClass("active");a.toggleFilter("#task-filter","hide");a.toggleFilter("#document-filter","hide");$("#relevance-customer").addClass("hide");
$("#relevance-workflow").addClass("hide");$(".agenda-tab-li").addClass("hide");$("#calendar-panel").addClass("hide");a.initPermission&&($(".fast-create").addClass("hide"),$(".fast-create-"+b).removeClass("hide"),"customer"==b?$("#relevance-customer").removeClass("hide"):$("#relevance-customer").addClass("hide"),"workflow"==b?$("#relevance-workflow").removeClass("hide"):$("#relevance-workflow").addClass("hide"));"workflow"==b?($(".js_iffinished_workflow").removeClass("hide"),$(".js_iffinished_workflow i").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked")):
$(".js_iffinished_workflow").addClass("hide");a.mainlinecalendarview&&(a.mainlinecalendarview.remove(),a.mainlinecalendarview=null);switch(b){case "mainlineblog":a.$el.find("#mainlinelink-statistics-container").addClass("hide");a.renderMainlineBlog();a.$el.find(".j_stategroupWrapper").resize();break;case "task":a.$el.find("#mainlinelink-statistics-container").addClass("hide");a.$el.find("#j_no_result").addClass("hide");$(".j_if-time").removeClass("hide");$(".j_if-finished").removeClass("hide");$(".j_if-finished i").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked");
$("#goal-no-stage").removeClass("hide");$("#mainlinelink-list-container").find(".guide-div").attr("hasDate")?$("#mainlinelink-list-container").find(".guide-div").addClass("hide"):$("#mainlinelink-list-container").find(".guide-div").removeClass("hide");$("#mainlinelink-list-container #guide-stage-create").removeClass("hide");a.toggleFilter("#task-filter","show");a.toggleFilter("#document-filter","hide");a.renderTaskViewByConfig();break;case "workflow":case "customer":case "document":a.$el.find("#mainlinelink-statistics-container").addClass("hide");
a.$el.find(".j_search-task").addClass("hide");$(".j_if-time").addClass("hide");$(".j_if-finished").addClass("hide");$("#goal-no-stage").addClass("hide");$("#mainlinelink-list-container #guide-stage-create").addClass("hide");$("#mainlinelink-list-container").find(".guide-div").addClass("hide");a.$el.find("#j_search_result").empty().removeClass("hide");$("#j_search-time-view").addClass("hide");$("#j_search-time-view .task-list").empty();"document"==b&&(a.toggleFilter("#task-filter","hide"),a.toggleFilter("#document-filter",
"show"));a.renderDomain(a.id,b,null,!0);break;case "calendar":a.renderCalendarViewByConfig();break;case "detail":a.renderMainlineDetail(),a.$el.find("#mainlinelink-statistics-container").resize()}});$el.off("click.mainlinelink",".agenda-tab-li li").on("click.mainlinelink",".agenda-tab-li li",function(b){b=$(this);if(!b.hasClass("active")){b.addClass("active").siblings().removeClass("active");var d=b.data("type");a.rememberCalendarView(d);b.parents(".agenda-tab-li").find(".j_view_type").text(b.find("a").text()).attr("data-type",
d);"normal"==d?a.renderAgendaNormalView():"calendar"==d&&a.renderAgendaCalendarView()}});$el.off("click.mainlinelink",".j_if-time li").on("click.mainlinelink",".j_if-time li",function(b){b=$(this);if(!b.hasClass("active")){b.addClass("active").siblings().removeClass("active");var d=b.data("type");a.rememberTaskView(d);b.parents(".j_if-time").find(".j_view_type").text(b.find("a").text()).attr("data-type",d);"normal"==d?($("#main .j_goalSlideCtrl").data("open")||$("#main .j_goalSlideCtrl").trigger("slideOut"),
a.timeview=!1,$("#j_search-time-view").addClass("hide"),$("#j_search-time-view .task-list").empty(),$("#j_panel_view").addClass("hide"),$("#j_panel_view").empty(),$("#goal-no-stage").removeClass("hide"),a.initPermission&&$("#create-stage").removeClass("hide"),$("#mainlinelink-list-container").find(".guide-div").attr("hasDate")?$("#mainlinelink-list-container").find(".guide-div").addClass("hide"):$("#mainlinelink-list-container").find(".guide-div").removeClass("hide"),$("#mainlinelink-list-container #guide-stage-create").removeClass("hide"),
$("#j_search_result").empty().removeClass("hide"),$("#j_search_result_no").find(".j_e_list").empty(),$("#j_search_result_no").removeClass("hide"),a.renderTask()):"time"==d?($("#main .j_goalSlideCtrl").data("open")||$("#main .j_goalSlideCtrl").trigger("slideOut"),a.timeview=!0,a.initPermission&&$("#create-stage").addClass("hide"),$("#j_search-time-view").removeClass("hide"),$("#j_search-time-view .task-list").empty(),$("#j_panel_view").addClass("hide"),$("#j_panel_view").empty(),$("#goal-no-stage").addClass("hide"),
$("#mainlinelink-list-container #guide-stage-create").addClass("hide"),$("#mainlinelink-list-container").find(".guide-div").addClass("hide"),a.$el.find("#j_search_result").empty().addClass("hide"),a.renderTaskTimeView()):"panel"==d&&($("#main .j_goalSlideCtrl").data("open")&&$("#main .j_goalSlideCtrl").trigger("slideIn"),a.timeview=!1,$("#j_search-time-view").addClass("hide"),$("#j_search-time-view .task-list").empty(),$("#goal-no-stage").addClass("hide"),$("#mainlinelink-list-container #guide-stage-create").addClass("hide"),
$("#mainlinelink-list-container").find(".guide-div").addClass("hide"),a.$el.find("#j_search_result").empty().addClass("hide"),$("#j_panel_view").removeClass("hide"),a.renderPanelView())}});$el.off("click.mainlinelink",".j_mainline_update").on("click.mainlinelink",".j_mainline_update",function(b){$(".j_e-nav-tab li").removeClass("active");$(this).addClass("active");a.$el.find(".j_search-task").addClass("hide");a.$el.find(".j_subtab-toolkit").addClass("hide");$("#mainline-order").addClass("hide");a.$el.find("#mainline-view").addClass("hide");
a.$el.find("#mainlinelink-list-container").addClass("hide");a.$el.find("#mainlinelink-statistics-container").addClass("hide");a.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").addClass("hide");a.$el.find("#goals-state-group").removeClass("hide");$("#goals-state-group").removeClass("hide");a.feedbackView&&(a.feedbackView.remove(),a.feedbackView=null);a.feedbackView=new r({container:"#goals-state-group",showtitle:"1",navs:[".document",".customer"],type:"other",targetId:a.id,targetModule:"mainline",
groupShow:"1"});a.feedbackView.render()});$el.off("click.mainlinelink",".j_goal-item").on("click.mainlinelink",".j_goal-item",function(b){b=$(this).attr("id");$(a.el).find(".j_mainline_view").attr("data-id",b);$(a.el).find(".j_mainline_head_title").attr("data-id",b);$(".j_goal-item").removeClass("active");$(this).addClass("active");b!=a.id&&(a.load=!0,a.id=b,$("#mainline-view").addClass("hide").empty(),$("#goals-state-group").addClass("hide"),$("#mainlinelink-list-container").removeClass("hide"),
a.initPermission&&$("#create-stage").removeClass("hide"),$(".j_if-finished").removeClass("hide"),$(".task-tab-li").removeClass("hide"),$(".fast-create").addClass("hide"),$(".fast-create-task").removeClass("hide"),$(".j_if-time").removeClass("hide"),$(".j_if-time").find(".j_view_type").text("\u666e\u901a\u89c6\u56fe").end().find(".j_ul_viewmenu li:first").addClass("active").siblings().removeClass("active"),$(".j_if-time i").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked"),$(".j_if-finished").removeClass("hide"),
$(".j_if-finished i").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked"),$(".js_iffinished_workflow").addClass("hide"),a.renderOrderLi("task"),a.renderTaskViewByConfig(),$(".j_e-nav-tab li").removeClass("current"),$(".j_e-nav-tab").children("[data-type\x3dtask]").addClass("current"),ROUTER.navigate("mainline/link/"+a.userId+"/"+b+"/"+a.filterType,{trigger:!1}))});$el.off("click.mainlinelink",".j_if-finished").on("click.mainlinelink",".j_if-finished",function(b){$("#mainlinelink-loading").removeClass("hide");
$(this).find("i").toggleClass("icon-checkbox-unchecked").toggleClass("icon-checkbox-checked");b=$(".j_if-time .j_view_type").attr("data-type");"time"==b?($("#j_search-time-view .task-list").empty(),a.renderTaskTimeView()):"panel"==b?($("#j_panel_view").empty(),a.renderPanelView()):($("#j_search_result").empty(),$("#j_search_result_no").find(".j_e_list").empty(),$("#j_search_result_no").removeClass("hide"),a.renderTask())});$el.off("click.mainlinelink",".js_iffinished_workflow").on("click.mainlinelink",
".js_iffinished_workflow",function(b){a.$el.find("#j_search_result").empty();a.$el.find(".no-result").addClass("hide");a.$el.find("#mainlinelink-loading").removeClass("hide");b=$(this).find("i").toggleClass("icon-checkbox-unchecked").toggleClass("icon-checkbox-checked").hasClass("icon-checkbox-checked")?!0:!1;a.renderDomain(a.id,"workflow",null,!b)});$el.off("click.mainlinelink",".orderType").on("click.mainlinelink",".orderType",function(b){$(".orderType").parent().removeClass("active");$(this).parent().addClass("active");
b=$(this).attr("data-entity");var d=$(this).attr("data-direction"),c=$(this).parents(".j_toolkit-item").attr("data-module");$("#mainline-order").attr({"data-entity":b,"data-direction":d});"task"!=c?"workflow"==c?(d=$(".js_iffinished_workflow").find("i").hasClass("icon-checkbox-checked")?!0:!1,a.renderDomain(a.id,"workflow",null,!d)):a.renderDomain(a.id,c,null,!0):(d=$(this).parents("#mainline-order").siblings(".j_if-time").find(".j_view_type").attr("data-type"),"time"==d?($("#j_search-time-view .task-list").empty(),
a.renderTaskTimeView()):"panel"==d?($("#j_panel_view").empty(),a.renderPanelView()):($("#j_search_result").empty(),$("#j_search_result_no").find(".j_e_list").empty(),$("#j_search_result_no").removeClass("hide"),a.renderTask()));"default"!=b&&a.setConfig("viewOrderType.mainline."+c,b)});$el.off("click.mainlinelink",".shortcut .watch").on("click.mainlinelink",".shortcut .watch",function(b,d){b.stopPropagation();var c={},g=$(this);c.module=g.attr("module");c.id=g.attr("targetId");c.id&&c.module&&("true"==
g.attr("watched")?(c._method="DELETE",a.watchModel.watchOne(c,function(b){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");g.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');g.attr("watched","false");(b=a.subView)&&b.id&&b.id==c.id&&b.changeWatch(!1)})):(c._method="PUT",a.watchModel.watchOne(c,function(b){f.notify("\u5173\u6ce8\u6210\u529f");g.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');g.attr("watched","true");(b=a.subView)&&b.id&&b.id==c.id&&b.changeWatch(!0)})))});
$el.off("click.mainlinelink",".shortcut .finish").on("click.mainlinelink",".shortcut .finish",function(b,d){b.stopPropagation();var c=$(this);if($(this).attr("targetId")&&$(this).attr("status")&&!c.data("post")){var g="finished"==c.attr("status")?"todo":"finished",e=c.attr("targetId");c.data("post",!0);a.taskmodel.changeProperty(e,"status",g,function(b){c.data("post",!1);b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(c.parents("li"),
g,!0),(b=a.subView)&&b.id&&b.id==e&&b.changeStatus(g))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});$el.off("confirmHandler",".shortcut .share").on("confirmHandler",".shortcut .share",function(b,d){var c=d.objs;if(c&&!$.isEmptyObject(c)){c=$.isArray(c)?c:[c];a.sids="";for(var g=0;g<c.length;g++)a.sids+=c[g].id+",";var e=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=e;a.shareModel._module=$(this).attr("module");a.shareModel.saveAll(function(b){b.addUserMessage?
f.notify(b.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");var d=a.subView;d&&d.id&&d.id==e&&d.addShare(b.shareEntrys)})}});$el.off("click.mainlinelink",".shortcut .share").on("click.mainlinelink",".shortcut .share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?(new UserSelector({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});$el.off("click.mainlinelink","li").on("click.mainlinelink","li",function(a){$(this).removeClass("unread");
$(this).removeClass("newConment")});$el.off("click.mainlinelink","#create-document").on("click.mainlinelink","#create-document",function(b){b.stopPropagation();a.documentnewview&&(a.documentnewview.remove(),a.documentnewview=null);a.documentnewview=new p({mainlineId:a.id,callback:function(b){a.insertDomain(b)}});a.documentnewview.render()});$el.off("click.mainlinelink","#create-document-html").on("click.mainlinelink","#create-document-html",function(b){b.stopPropagation();$(this);$("body").trigger("slideOpen",
{module:"document",id:"0",userId:null,renderType:null,tolink:a.id})});$el.off("click.mainlinelink","#create-workflow").on("click.mainlinelink","#create-workflow",function(b){b.stopPropagation();a.flowstartview&&(a.flowstartview.remove(),a.flowstartview=null);a.flowstartview=new s({id:"new",userId:TEAMS.currentUser.id,mainlineId:a.id,closable:!0,container:"#entitySlider",mainlineCallback:function(b){a.insertDomain(b)}});a.flowstartview.render();$("#entitySlider").addClass("animate-toggleR");$("#entitySlider").addClass("in")});
$el.off("click.mainlinelink","#create-calendar").on("click.mainlinelink","#create-calendar",function(b){b.stopPropagation();a.agendaview&&(a.agendaview.remove(),a.agendaview=null);var d=new Date;b=d.getFullYear();var c=d.getMonth(),c=c+1,c=10>c?"0"+c:c,d=d.getDate(),g=d+1,g=b+"-"+c+"-"+(10>g?"0"+g:g);b=new w({module:"agenda",id:"new",allDay:!0,start:Date.create(b+"-"+c+"-"+(10>d?"0"+d:d)).getTime(),end:Date.create(g).getTime(),fromTargetId:a.id,fromModule:"mainline",page:a,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},
afterOperate:function(){$("#entitySlider").removeClass("in");$el.find("#calendar").fullCalendar("refetchEvents")},afterCreate:function(b){var d=$el.find(".agenda-tab-li").find(".j_view_type").attr("data-type");"normal"==d?a.insertDomain(b.agenda):"calendar"==d&&$el.find("#calendar").fullCalendar("refetchEvents")}}});b.render();a.agendaview=b});$el.off("click.mainlinelink","#relevance-calendar").on("click.mainlinelink","#relevance-calendar",function(b){b.stopPropagation();var d=$(this),c=[];a.mainlinelinkmodel.mainlineLinkDomain(a.id,
"calendar",'{"keywords":""}','{"property":"default", "direction":"DESC"}',null,function(b){if(b=b.domains)for(var g=0;g<b.length;g++){var e={};e.id=b[g].id;e.name=b[g].name;c.push(e)}a.entitySelector=new n({targetEl:d,keyword:"",module:d.attr("module"),mainlineModule:d.attr("module"),seletedList:c});a.entitySelector.render()})});$el.off("click.mainlinelink","#create-customer").on("click.mainlinelink","#create-customer",function(b){b.stopPropagation();a.customerview&&(a.customerview.remove(),a.customerview=
null);b=h("crm/customer/CustomerView");a.customerview=new b({customerId:"new",el:"#entitySlider",mainlineId:a.id,userId:TEAMS.currentUser.id,page:this.page,mainlineCallback:function(b){a.insertDomain(b)},callbacks:{afterDel:function(b){a.page&&a.page.trigger("remove",b)},afterCreateByName:function(a){},afterUpdateField:function(b,d,c){"name"==d&&a.page&&a.page.trigger("changeTitle",{id:b,title:c})},afterChangeWatch:function(b,d){a.page&&a.page.trigger("changeWatch",{id:b,watched:d})}}});a.customerview.render();
$("#entitySlider").addClass("animate-toggleR");$("#entitySlider #customer-container").hasClass("mCustomScrollbar")||$("#entitySlider #customer-container").mCustomScrollbar({theme:"darkblue"});$(window).trigger("resize");a.customerview.$("#customer-name").focus();$("#entitySlider").addClass("in")});$el.off("click.mainlinelink",".j_mineType ul li").on("click.mainlinelink",".j_mineType ul li",function(){if(!$(this).hasClass("active")){$(this).addClass("active").siblings("li").removeClass("active");var b=
$(this).parents(".dropdown");if(b.hasClass("gettext")){var d=$(this).find("a").text();b.find(".dropdown-toggle").html(d+' \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e')}b=$(this).data("type");d="open";"finished"==a.filterType&&(d="close");a.renderMainline(a.id,'{"filter":{"type":"'+b+'","status":"'+d+'","keywords":""},"userId":"'+a.userId+'","pageSize":"1000","pageNo":"1","order":{"property":"last_comment_time"},"noPageCount":true}',b,"middelOpt")}});$el.off("click.mainlinelink",".j_notask").on("click.mainlinelink",
".j_notask",function(a,b){$(this).parent().siblings().children(".j_create-task").trigger("click")});$el.off("click.mainlinelink",".j_time_task").on("click.mainlinelink",".j_time_task",function(a,b){$(this).parent().prev().children(".create-task-time").trigger("click")})},permissionEvents:function(){var a=this,b=$("#mainContainer");b.off("click.mainlinelink",".create-stage").on("click.mainlinelink",".create-stage",function(d){$(this);d=b.find(".j_if-time .j_view_type").attr("data-type");if("normal"==
d){d="#j_search_result";$(this).attr("data-append")&&(d="#create-stage-container");$(d+" #newstageId").removeClass("hide");if(1!=$(d+" #newstageId").size()){var c=$("#stage-clone").clone().attr("id","newstageId");c.find(".task-list .j_notask").removeClass("hide");c.find(".j_stage_name").addClass("hide").addClass("j_stage_name_new").removeClass("j_stage_name");$(this).attr("data-prepend")?$(d).prepend(c):$(d).append(c)}$(d+" #newstageId").find(".stage-change-name").show().focus()}else"panel"==d&&a.renderPanelNewStage()});
b.off("click.mainlinelink",".j_stage_name").on("click.mainlinelink",".j_stage_name",function(a){a=$(this).parent();1==a.find(".stage-change-name").size()&&($(this).addClass("hide"),a.find(".stage-change-name").show().val($(this).text()).focus())});b.off("click.mainlinelink",".stage-change-name").on("click.mainlinelink",".stage-change-name",function(a){$(this).show().focus()});b.off("blur.mainlinelink",".stage-change-name").on("blur.mainlinelink",".stage-change-name",function(a){a=$(this);var b=a.parent();
a.data("id")?1==b.find(".j_stage_name").size()&&(a.hide(),b.find(".j_stage_name").removeClass("hide")):$(this).val()&&0!=$.trim($(this).val()).length||$("#newstageId").remove()});b.off("keydown.mainlinelink",".stage-change-name").on("keydown.mainlinelink",".stage-change-name",function(a){var b=a.keyCode;a=$(this);var d=a.data("id"),c=a.parents(".j_goal-category");27==b&&(d?(b=a.data("name"),a.val(b)):c.remove())});b.off("change.mainlinelink",".stage-change-name").on("change.mainlinelink",".stage-change-name",
function(b){a.createStage($(this))});b.off("click.mainlinelink",".relevance-task").on("click.mainlinelink",".relevance-task",function(b){b.stopPropagation();b=$(this);var d=b.parents(".j_goal-category");if(0<d.find("input.j_input").size()&&""!=$.trim(d.find("input.j_input").val()))f.notify("\u5f53\u524d\u6709\u4efb\u52a1\u6b63\u5728\u4fdd\u5b58\uff0c\u8bf7\u4fdd\u5b58\u6210\u529f\u540e\u5728\u5173\u8054\u4efb\u52a1\uff01"),d.find("input.j_input").blur();else{var c=[];1==d.size()&&d.find(".j_e_list li").not(".j_notask").each(function(){$(this).attr("id")&&
c.push($(this).data("object"))});a.entitySelector=new n({targetEl:d,keyword:"",module:b.attr("module"),mainlineModule:b.attr("module"),seletedList:c});a.entitySelector.render()}});b.off("click.mainlinelink","#relevance-document").on("click.mainlinelink","#relevance-document",function(b){b.stopPropagation();b=$(this);var d=[],c=$("#j_search_result");1==c.size()&&c.find(".j_e_list_clone li").each(function(){d.push($(this).data("object"))});a.entitySelector=new n({targetEl:b,keyword:"",module:"document",
seletedList:d});a.entitySelector.render()});b.off("click.mainlinelink","#relevance-customer").on("click.mainlinelink","#relevance-customer",function(b){b.stopPropagation();b=$(this);var d=[],c=$("#j_search_result");1==c.size()&&c.find(".j_e_list_clone li").each(function(){d.push($(this).data("object"))});a.entitySelector=new n({targetEl:b,keyword:"",module:"customer",seletedList:d});a.entitySelector.render()});b.off("click.mainlinelink","#relevance-workflow").on("click.mainlinelink","#relevance-workflow",
function(b){b.stopPropagation();b=$(this);var d=[],c=$("#j_search_result");1==c.size()&&c.find(".j_e_list_clone li").each(function(){d.push($(this).data("object"))});a.entitySelector=new n({targetEl:b,keyword:"",module:b.attr("module"),seletedList:d});a.entitySelector.render()});b.off("entitySelected","#relevance-workflow").on("entitySelected","#relevance-workflow",function(b){var d=$(this),c=a.$el.find("#j_search_result .j_e_list_clone"),g="",e="",k=[],l=[];_.each(c.find("li"),function(a){$(a).attr("id")&&
l.push($(a).attr("id"))});c.empty();for(var n=1;n<arguments.length;n++){var p=arguments[n];k.push(p.id);-1==$.inArray(p.id,l)&&(g+=p.id+",");p=a.renderOneDomain(p);if(0==c.length)c=a.$el.find(".j_e_list_clone").clone(),c.append(p),p.find(".sn-link").html(1),a.$el.find("#j_search_result").removeClass("hide").append(c),a.$el.find(".no-result").addClass("hide");else{var r=c.find("li").length+1;p.find(".sn-link").html(r);c.append(p)}}n=0;for(p=l.length;n<p;n++)-1==$.inArray(l[n],k)&&(e+=l[n]+",",c.find("#"+
l[n]).remove());c={};c.id=a.id;c.ids=g;c.oldIds=e;c.module="workflow";c.stageId=d.attr("id")||"";a.mainlinelinkmodel.saveRelevanceTask(c,function(a){a.actionMsg||f.notify("\u5173\u8054\u6210\u529f!")})});b.off("entitySelected",".j_goal-category").on("entitySelected",".j_goal-category",function(b){var d=$(this),c=d.find(".j_e_list");c.find(".j_notask").clone();var g="",e="",k=[],l=[],n=arguments;_.each(c.find("li").not(".j_notask"),function(a){$(a).attr("id")&&l.push($(a).attr("id"))});for(var p=1;p<
arguments.length;p++){var r=arguments[p];k.push(r.id);-1==$.inArray(r.id,l)&&(g+=r.id+",")}for(p=0;p<l.length;p++)-1==$.inArray(l[p],k)&&c.find("li#"+l[p]).remove();p=0;for(r=l.length;p<r;p++)-1==$.inArray(l[p],k)&&(e+=l[p]+",",c.find("#"+l[p]).remove());k={};k.id=a.id;k.ids=g;k.oldIds=e;k.module="task";k.stageId=d.attr("id")||"";a.mainlinelinkmodel.saveRelevanceTask(k,function(b){var g=b.relevanceTaskList,e=!0;if(!b.actionMsg)if(0==b.relevanceFlag)f.notify("\u8be5\u4efb\u52a1\u5df2\u7ecf\u5173\u8054");
else{for(b=1;b<n.length;b++){for(var k=n[b],l=0;l<g.length;l++)if(k.id!=g[l].id)e=!0;else{e=!1;break}1==e&&0==c.find("li#"+k.id).length&&(c.find(".j_notask").addClass("hide"),e=$("#domain-clone").clone().removeAttr("id").attr("id",k.id),e=a.renderTaskOne(e,k),c.append(e));e=!0}a.rebuildSN(c);a.updateStageCount(0,d.get(0));f.notify("\u5173\u8054\u6210\u529f!")}})});b.off("entitySelected","#relevance-customer").on("entitySelected","#relevance-customer",function(b){var d=$("#j_search_result"),c="",g=
"",e=[],k=[],l=d.find(".j_e_list_clone");_.each(l.find("li").not(".j_notask"),function(a){$(a).attr("id")&&k.push($(a).attr("id"))});l.empty();for(var n=1;n<arguments.length;n++){var p=arguments[n];if("customer"==a.module){e.push(p.id);-1==$.inArray(p.id,k)&&(c+=p.id+",");var r=a.renderOneDomain(p);0==d.find(".j_e_list_clone").size()&&(l=$(".j_e_list_clone").clone(),d.append(l));var l=d.find(".j_e_list_clone"),s=l.find("li").not(".j_notask").length+1;1==s&&$(".j_nocustomer").addClass("hide");r.find(".sn-link").html(s);
l.append(r);c=n!=arguments.length-1?c+(p.id+","):c+p.id}}n=0;for(p=k.length;n<p;n++)-1==$.inArray(k[n],e)&&(g+=k[n]+",",l.find("#"+k[n]).remove());e={};e.id=a.id;e.ids=c;e.oldIds=g;e.module="customer";e.stageId=d.attr("id")||"";"customer"==a.module&&a.mainlinelinkmodel.saveRelevanceTask(e,function(a){a.actionMsg||f.notify("\u5ba2\u6237\u5173\u8054\u6210\u529f")})});b.off("entitySelected","#relevance-document").on("entitySelected","#relevance-document",function(b){var d=$(this),c=a.$el.find("#j_search_result .j_e_list_clone"),
g="",e="",k=[],l=[];_.each(c.find("li"),function(a){$(a).attr("id")&&l.push($(a).attr("id"))});c.empty();for(var n=1;n<arguments.length;n++){var p=arguments[n];k.push(p.id);-1==$.inArray(p.id,l)&&(g+=p.id+",");p=a.renderOneDomain(p);if(0==c.length)c=a.$el.find(".j_e_list_clone").clone(),c.append(p),p.find(".sn-link").html(1),a.$el.find("#j_search_result").removeClass("hide").append(c),a.$el.find(".no-result").addClass("hide");else{var r=c.find("li").length+1;p.find(".sn-link").html(r);c.append(p)}}n=
0;for(p=l.length;n<p;n++)-1==$.inArray(l[n],k)&&(e+=l[n]+",",c.find("#"+l[n]).remove());c={};c.id=a.id;c.ids=g;c.oldIds=e;c.module="document";c.stageId=d.attr("id")||"";a.mainlinelinkmodel.saveRelevanceTask(c,function(a){a.actionMsg||f.notify("\u5173\u8054\u6210\u529f!")})});b.off("entitySelected","#relevance-calendar").on("entitySelected","#relevance-calendar",function(d){$(this);for(var c="",g=1;g<arguments.length;g++)c+=arguments[g].id+",";c&&0<c.length&&a.mainlinemodel.linkAgenda(c,a.id,!0,function(d){var c=
d.streams;if(c&&!(0>=c.length))if(f.notify("\u5173\u8054\u6210\u529f"),d=d.agendas,$(a.el).find(".entity-container").empty(),c=b.find(".agenda-tab-li").find(".j_view_type").attr("data-type"),"normal"==c){var c=a.$el.find("#j_search_result .j_e_list_clone"),g=[],e=[];_.each(c.find("li"),function(a){$(a).attr("id")&&e.push($(a).attr("id"))});c.empty();for(var k=0;k<d.length;k++){var l=d[k];g.push(l.id);$.inArray(l.id,e);l=a.renderOneDomain(l);if(0==c.length)c=a.$el.find(".j_e_list_clone").clone(),c.append(l),
l.find(".sn-link").html(1),a.$el.find("#j_search_result").removeClass("hide").append(c),a.$el.find(".no-result").addClass("hide");else{var n=c.find("li").length+1;l.find(".sn-link").html(n);c.append(l)}}k=0;for(d=e.length;k<d;k++)-1==$.inArray(e[k],g)&&c.find("#"+e[k]).remove()}else"calendar"==c&&b.find("#calendar").fullCalendar("refetchEvents")})});b.off("click.mainlinelink",".edit-stage").on("click.mainlinelink",".edit-stage",function(a){$(this).parents(".j_goal-category").find(".j_stage_name").trigger("click")});
b.off("click.mainlinelink",".delete-stage").on("click.mainlinelink",".delete-stage",function(b){var d=$(this).parents(".j_goal-category"),c=d.attr("id");c?f.confirm("\u5220\u9664\u5206\u7ec4\u540e\uff0c\u8be5\u5206\u7ec4\u7684\u4efb\u52a1\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u65e0\u5206\u7ec4\u4efb\u52a1\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u5206\u7ec4\uff1f",function(b){b&&a.mainlinelinkmodel.deleteStage(a.id,c,function(b){b=$("#goal-no-stage");b.find(".j_e_list").prepend(d.find(".j_e_list").children('li:not(".j_notask")'));
for(var c=b.find(".j_e_list").children(),g=0;g<c.length;g++){var e=$(c[g]).find(".j_title").val(),k=$(c[g]).find(".j_title").attr("title");e||$(c[g]).find(".j_title").val(k)}d.remove();a.rebuildSN(b.find(".j_e_list"));a.updateStageCount(0,b.get(0))})}):d.remove()});b.off("click.mainlinelink",".j_create-task").on("click.mainlinelink",".j_create-task",function(b){b=$(this).parents(".j_goal-category");var d=b.children(".j_e_list").find(".j_notask").addClass("hide"),d=b.children(".j_e_list").children().not("[id]");
0<d.size()-1||(d=b.find(".stage-switch"),"off"==d.data("status")&&d.trigger("click"),d=$("#domain-clone").clone().removeAttr("id"),d.find(".j_titleinput").removeClass("hide"),d.find(".finish").removeClass("hide"),d.find(".share").removeClass("selector-toggle"),b.find(".j_e_list").prepend(d),$("#mainlinelink-list-container").find(".guide-div").addClass("hide"),d.find("input.j_input").focus(),a.rebuildSN(b.find(".j_e_list")))});b.off("click.mainlinelink",".create-task-time").on("click.mainlinelink",
".create-task-time",function(b){b=$(this).parents(".e-list-group");var d=b.find(".group-switch");"off"==d.data("status")&&d.trigger("click");0<b.find("input.j_input").length?b.find("input.j_input").focus():(b.find(".j_notask").addClass("hide"),d=$("#domain-clone").clone().removeAttr("id"),d.find(".j_titleinput").removeClass("hide"),d.find(".finish").removeClass("hide"),d.find(".share").removeClass("selector-toggle"),b.find(".e-list").prepend(d),d.find("input.j_input").focus(),a.rebuildSN(b.find(".e-list")))});
b.off("blur.mainlinelink","input.j_input").on("blur.mainlinelink","input.j_input",function(b){b=$(this);var d=b.parent().parent(),c=b.parents(".j_goal-category"),g=c.attr("id")?c.attr("id"):null,e=b.parents(".e-list-group"),e=e.find(".e-list").attr("group")?e.find(".e-list").attr("group"):null;b.data("id");var k=$.trim($(this).val());a.moduleName(a.module);if(k&&0<k.length)if(100<k.length)f.notify("\u4efb\u52a1\u540d\u5b57\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57");else{var l={content:""};l.name=k;
l.group=e;g="goal-no-stage"==g?"":g;d.find(".j_title").removeClass("hide");b.parent().remove();a.taskmodel.stageTask(l,a.id,g,function(b){f.notify("\u5b89\u6392\u4efb\u52a1\u6210\u529f");d.attr("id",b.task.id);var g=b.task;d.attr({"data-id":b.task.id,"data-module":"task"});g.watched?(d.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),d.find(".watch").attr("watched","true")):d.find(".watch").attr("watched","false");d.find(".watch").attr("targetId",g.id);d.find(".watch").attr("module",
g.module);d.find(".j_title").data("name",g.name).attr({"data-id":b.task.id,"data-module":"task",title:g.name}).children(".text").text(k);d.find(".finish").removeClass("hide");a.renderStatus(d,g.finished?"finished":"todo",!0);d.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",g.module).attr("targetId",g.id);d.find(".finish").attr("targetId",g.id);$("#mainlinelink-list-container").find(".guide-div").attr("hasDate",!0);a.createEntityObject(d,
g);a.updateStageCount(0,c.get(0))})}});b.off("keyup.mainlinelink","input.j_input").on("keyup.mainlinelink","input.j_input",function(b){if(13==b.which){b=$(this);var d=b.parents(".e-list"),c=$.trim(b.val()),g=b.data("name");c&&0<c.length&&(g&&g==c?(c=$("#domain-clone").clone().removeAttr("id"),c.find(".finish").removeClass("hide"),c.find(".share").removeClass("selector-toggle"),b.parents("li").before(c),c.find(".j_input").focus()):(c=$("#domain-clone").clone().removeAttr("id"),c.find(".j_title").addClass("task-title"),
c.find(".finish").removeClass("hide"),c.find(".share").removeClass("selector-toggle"),c.find(".j_titleinput").removeClass("hide"),b.parents("li").before(c),c.find("input.j_input").focus()),a.rebuildSN(d))}else c=$.trim($(this).val()),$(this).parents("li").attr("id"),$(this).parents("li").find(".j_title").attr("title",c).children(".text").text(c)});b.off("click.mainlinelink","#guide-task-create").on("click.mainlinelink","#guide-task-create",function(b){a.$el.find("#j_search_result_no .j_create-task:first").trigger("click")});
b.off("click.mainlinelink",".task-list input").on("click.mainlinelink",".task-list input",function(){$(this).focus()});b.off("click.mainlinelink",".j_entityslider-toggle").on("click.mainlinelink",".j_entityslider-toggle",function(){$(this).find("input").focus()})},rememberSlidePro:function(){var a=$("#main .j_goalSlideCtrl").data("open")?"true":"false",b=$("#main .j_e-nav-tab").find(".j_mainline_link.current").data("type");TEAMS.ownCache["mainline#"+this.id+"#"+b]=a},renderPanelNewStage:function(){this.spectacularsview&&
this.spectacularsview.renderPanelNewStage()},createStage:function(a){var b=this,d=a.data("id"),c=a.parent();if(d){var g=$.trim(a.val());g&&0<g.length?b.mainlinelinkmodel.updateStage(b.id,d,g,function(b){b.message?f.notify(b.message):(f.notify("\u5206\u7ec4\u4fee\u6539\u6210\u529f"),a.hide(),c.find(".j_stage_name").removeClass("hide").text(g))}):(d=a.data("name"),a.val(d),f.notify("\u5206\u7ec4\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"))}else(g=$.trim(a.val()))&&0<g.length?b.mainlinelinkmodel.createStage(b.id,
g,function(d){d.message?f.notify(d.message):(f.notify("\u5206\u7ec4\u521b\u5efa\u6210\u529f"),a.hide(),a.data("id",d.stage.id).data("name",d.stage.name),a.parents(".j_goal-category").attr("id",d.stage.id),c.find(".j_stage_name_new").removeClass("hide").addClass("j_stage_name").removeClass("j_stage_name_new").text(g),b.initSortable())}):f.notify("\u5206\u7ec4\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a")},render:function(){$(this.el).find(".j_mainline_view").attr("data-id",this.id);$(this.el).find(".j_mainline_head_title").attr("data-id",
this.id);var a=this._getConfig("viewOrderType.mainline."+this.module)||"default";$("#mainline-order").attr("data-entity",a);$("a.orderType[data-entity]").parent().removeClass("active");$('a.orderType[data-entity\x3d"'+a+'"]').parent().addClass("active");switch(this.module){case "task":this.renderTaskViewByConfig();break;case "mainlineblog":this.renderMainlineBlog();break;case "document":case "workflow":case "customer":this.renderDomain(this.id,this.module,null,!0)}a="open";"finished"==this.filterType&&
(a="close");this.renderMainline(this.id,'{"filter":{"type":"'+this.mainlineType+'","status":"'+a+'","keywords":""},"userId":"'+this.userId+'","pageSize":"1000","pageNo":"1","order":{"property":"last_comment_time"},"noPageCount":true}',this.mainlineType,null);this.renderCount();f.layout(".j_stategroupWrapper");if("mine"==this.filterType||"mineManager"==this.filterType||"mineParticipants"==this.filterType)$(this.el).find(".j_mineType").removeClass("hide-im"),$(this.el).find("#projectClass").html(""),
$(this.el).find("#projectClass").parent().find(".graph").hide();"subordinates"===this.filterType&&$(this.el).find("#projectClass").html("\u4e0b\u5c5e\u9879\u76ee");"watched"===this.filterType&&$(this.el).find("#projectClass").html("\u5173\u6ce8\u7684\u9879\u76ee");"shareToMe"===this.filterType&&$(this.el).find("#projectClass").html("\u5171\u4eab\u7ed9\u6211\u7684\u9879\u76ee");"mineCreate"===this.filterType&&$(this.el).find("#projectClass").html("\u521b\u5efa\u7684\u9879\u76ee");"finished"===this.filterType&&
$(this.el).find("#projectClass").html("\u5df2\u5173\u95ed\u7684\u9879\u76ee");"all"===this.filterType&&$(this.el).find("#projectClass").html("\u5168\u90e8\u9879\u76ee");$(".j_pageActive li a").removeClass("active");$(".j_pageActive li").find("#menu-mainline").addClass("active")},renderCount:function(){TEAMS.currentUser.id==this.userId&&this.mainlinemodel.searchCount(this.userId,function(a){0<a.countUnread&&($("#mainContainer").find(".unRead").removeClass("hide"),$("#mainContainer").find("#unread").addClass("badge"),
$("#mainContainer").find("#unread").html(a.countUnread).data("count",a.countUnread));0<a.countNewComment&&($("#mainContainer").find(".newComment").removeClass("hide"),$("#mainContainer").find("#newcomment").addClass("badge"),$("#mainContainer").find("#newcomment").html(a.countNewComment).data("count",a.countUnread))})},renderTaskUpdate:function(a){1==a&&$("#goals-state-group .goal-state-container").remove();this.mainlinelinkmodel.queryTaskUpdate(this.id,a,function(a){if(a=a.streamPage)if(0<a.totalCount){for(var b=
0;b<a.result.length;b++){var d=a.result[b],c=Date.create(d.optTime).format("{yyyy}-{MM}-{dd}");if(1==$("#"+c).size())var g=$("#"+c);else g=$("#goal-state-container-clone").clone().attr("id",c),Date.create(d.optTime).format("{yyyy}")==Date.create(new Date).format("{yyyy}")?g.find(".j_update-day").html(Date.create(d.optTime).format("{MM}-{dd}")):g.find(".j_update-day").html(c),$("#goals-state-group #update-more").before(g);c=$("#goal-events-item-clone").clone().attr("id",d.id);c.find(".j_update-time").html(Date.create(d.optTime).format("{24hr}:{mm}:{ss}"));
d.optUser.avatar&&c.find("img").attr(d.optUser.avatar.p4);c.find(".name").html(d.optUser.username);c.find(".update-title").append("\u5c06\u4efb\u52a1\u8bbe\u7f6e\u4e3a\uff1a"+d.content);c.find("#targetName").text(d.targetName).attr({"data-id":d.targetId,"data-module":d.module});g.find(".j_goal-events-group").append(c)}a.hasNext?$("#update-more").removeClass("hide").data("pageNo",a.pageNo+1):$("#update-more").addClass("hide");$("#no-update").addClass("hide")}else $("#no-update").removeClass("hide")})},
renderMainlineBlog:function(){this.$el.find(".j_search-task").addClass("hide");this.$el.find("ul.j_subtab-toolkit").addClass("hide");this.$el.find("#mainlinelink-list-container").addClass("hide");this.$el.find("#goals-state-group").addClass("hide");this.$el.find("#mainline-view").addClass("hide");this.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").removeClass("hide");this.mainlineBlogView||(this.mainlineBlogView=new x({userId:TEAMS.currentUser.id,mainlineId:this.id,el:"#other-blogs-container"}));
this.mainlineBlogView.render(this.id)},renderMainlineDetail:function(){var a=f.template("mainline.statistics"),b=this,d=b.mainlinelinkmodel,c=b.id;b.mainlinestatisticview.id=b.id;b.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").addClass("hide");b.$el.find(".j_search-task").addClass("hide");b.$el.find("ul.j_subtab-toolkit").addClass("hide");b.$el.find("#mainlinelink-list-container").addClass("hide");b.$el.find("#goals-state-group").addClass("hide");b.$el.find("#mainline-view").addClass("hide");
b.$el.find("#mainlinelink-statistics-container").removeClass("hide");b.$el.find("#mainlinelink-statistics-container").find(".js_taskreportScr").empty();b.$el.find("#mainlinelink-statistics-container").find(".js_taskreportScr").append(a);d.loadSubordinates(c,function(a){b.mainlinestatisticview.renderStatisticians(a.tasksPrimaryList)});$("#barType").attr("mainlineId",c);b.mainlinestatisticview.initComponents();h.async("https://static.eteams.cn/js/echarts.min.js",function(){b.mainlinestatisticview.initFinishCharts(c);
b.mainlinestatisticview.loadFinishChart(c,void 0);var a=$("#barType").children(".active").attr("value");b.mainlinestatisticview.initRankCharts(c);b.mainlinestatisticview.loadRankCharts(c,void 0,a);a=$("#detailBarType").find(".active").attr("value");"member"==a?(b.mainlinestatisticview.initMemberCharts(c),b.mainlinestatisticview.loadMemberCharts(c,void 0,a)):"date"==a?(b.mainlinestatisticview.initDayChart(c),b.mainlinestatisticview.loadDayChart(c,void 0,a)):(b.mainlinestatisticview.initGroupCharts(c),
b.mainlinestatisticview.loadGroupCharts(c,void 0,a))});f.layout("#mainlinelink-statistics-container")},renderTask:function(){var a=this,b=a.mainlinelinkmodel;a.$el.find("#mainline-order").removeClass("hide");a.$el.find(".j_search-task").removeClass("hide");a.$el.find("ul.j_subtab-toolkit").removeClass("hide");a.$el.find("#goals-state-group").addClass("hide");a.$el.find("#mainline-view").addClass("hide");a.$el.find("#mainlinelink-statistics-container").addClass("hide");a.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").addClass("hide");
a.$el.find("#mainlinelink-list-container").removeClass("hide");$("#j_search-time-view").addClass("hide");$("#j_search-time-view .task-list").empty();$("#j_panel_view").addClass("hide");$("#j_panel_view").empty();$("#goal-no-stage").removeClass("hide");a.initPermission&&$("#create-stage").removeClass("hide");$("#mainlinelink-list-container").find(".guide-div").attr("hasDate")?$("#mainlinelink-list-container").find(".guide-div").addClass("hide"):$("#mainlinelink-list-container").find(".guide-div").removeClass("hide");
$("#mainlinelink-list-container #guide-stage-create").removeClass("hide");$("#j_search_result").empty().removeClass("hide");$("#j_search_result_no").find(".j_e_list").empty();var c=$.trim($("#mainlinelink-keywords").val()?$("#mainlinelink-keywords").val():""),g=$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?!1:!0,e=$("#mainline-order").attr("data-entity"),k=$("#mainline-order").attr("data-direction")||"DESC",e='{"property":"'+e+'", "direction":"'+k+'"}';taskFilter=a.genFilter("#task-filter",
g,c);b.mainlineLinkTask(a.id,taskFilter,e,!1,function(b){if(!b.actionMsg){b.permission&&a.permissionEvents();a.initPermission=b.permission;var g=!0;0<b.mainline.taskCount&&b.mainline.finishedCount==b.mainline.taskCount&&(g=!1);if(b.mainline){if(b.mainline.percentFinished){var e=parseInt(100*b.mainline.percentFinished||0);$(a.el).find(".j_mainline_head_dt .j_mainline_head_percent").html(e+"%")}$(a.el).find(".j_center .j_mainline_head_dt img").attr("src",b.mainline.icon||"images/demo-v3/5.png");
$(a.el).find(".j_center .j_mainline_head_title").attr("title",b.mainline.name||"").text(b.mainline.name||"")}if(e=b.stages)for(var k=0;k<e.length;k++){var l=e[k],n=a.$el.find("#stage-clone").clone().removeAttr("id").attr("id",l.id);n.find(".j_stage_name").text(l.name);n.find(".stage-change-name").val(l.name).data("name",l.name).data("id",l.id).hide();a.initPermission||(n.find(".j_goal-category-option").remove(),n.find(".j_create-task").find(".icon-plus").addClass("hide").end().remove());a.renderTaskList(n,
l.tasks);l.tasks&&0<l.tasks.length&&($("div#j_search_result").removeClass("hide"),g=!1);a.$el.find("#j_search_result").append(n)}if(e=b.tasks)k=a.$el.find("#goal-no-stage"),a.initPermission||k.find(".j_create-task").find(".icon-plus").addClass("hide").end().remove(),k.find(".j_goal-category-head").addClass("goal-no-stage"),k.find(".j_stage_name").text("\u672a\u5206\u7ec4"),0<e.length&&(k.find(".j_e_list").empty(),g=!1),a.renderTaskList(k,e),$("div#j_search_result_no").removeClass("hide");g?c&&0<c.length?
$("#mainlinelink-list-container .guide-div").addClass("hide"):$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?$("#mainlinelink-list-container .guide-div").addClass("hide"):$("#mainlinelink-list-container .guide-div").removeClass("hide"):$("#mainlinelink-list-container .guide-div").addClass("hide");a.initPermission?($("#create-stage").removeClass("hide"),a.initSortable(),$("#j_search_result").sortable({handle:".j_goal-category-head",cancel:".goal-no-stag, input",revert:!0,opacity:.9,
placeholder:"group-task-placeholder",update:function(a,b){b.item.data("update",!0)},stop:function(b,d){if(d.item.data("update")){d.item.data("update",!1);for(var c=$("#j_search_result").children(),g='{"mainlineId":"'+a.id+'","stages":[',e=0;e<c.length-1;e++)var k=$(c[e]).attr("id"),g=g+('{"id":"'+k+'","sort":"'+(e+1)+'"},');g+='{"id":"'+$(c[c.length-1]).attr("id")+'","sort":"'+c.length+'"}]}';a.mainlinelinkmodel.switchStageSort(g,function(a){f.notify("\u6392\u5e8f\u6210\u529f")})}}})):($("#j_search_result.ui-sortable").sortable("destroy"),
$("ul.j_e_list.ui-sortable").sortable("destroy"),$("#create-stage").addClass("hide"),$("#j_search_result .j_mark, #j_search_result_no .j_mark").addClass("hide"),$("#j_search_result .j_goal-category-head").css("cursor","default"));$("#mainlinelink-loading").addClass("hide");$(".no-result").addClass("hide");f.layout("#mainlinelink-list-container");a.updateStagesCount();a.$el.off("click.mainlinelink",".j_mainline_head_dt").on("click.mainlinelink",".j_mainline_head_dt",function(c){a.mainlinemodel.id=
b.id;b.iconChange&&(a.avatarView=new d({el:"body",url:b.mainline.icon,id:b.mainline.id,callback:function(d,c){a.avatar=c;b.mainline.avatar=c;b.mainline.icon=d;d!=$(a.el+" .j_mainline_head_dt").find("img").attr("src")&&($(a.el+" .j_mainline_head_dt").find("img").attr("src",d),a.mainlinemodel.change("icon",d,function(a){$("#j_mini-goal-list #"+a.id).find("img").attr("src",d);f.notify("\u9879\u76ee\u56fe\u6807\u4fee\u6539\u6210\u529f")}));a.avatarView&&(a.avatarView.hide(),a.avatarView=null)}}),a.avatarView.render())})}})},
updateStagesCount:function(){var a=this.$el.find(".j_goal-category[id]:visible");$.each(a,this.updateStageCount)},updateStageCount:function(a,b){if(b){var d=$(b),c=d.children(".j_goal-category-head").children(".j_stage_count:first"),g=d.children(".j_e_list").children("[id]").size();g?(c.html("("+g+")"),d.find(".j_notask").addClass("hide")):(c.html(null),"goal-no-stage"==d.attr("id")&&0==d.find(".j_notask").length&&(c=d.parent().find(".j_notask_clone").clone().removeClass("hide"),d.find(".j_e_list").append(c)),
d.find(".j_notask").removeClass("hide"))}},renderCalendarViewByConfig:function(){var a=this._getConfig("mainline.relevance.agendaview")||"calendar";$("#j_search_result").empty();switch(a){case "normal":$(".agenda-tab-li").find(".j_view_type").text("\u5217\u8868\u89c6\u56fe").attr("data-type",a).end().find(".j_ul_viewmenu li.j_normal").addClass("active").siblings().removeClass("active");this.renderAgendaNormalView();break;case "calendar":$(".agenda-tab-li").find(".j_view_type").text("\u65e5\u5386\u89c6\u56fe").attr("data-type",
a).end().find(".j_ul_viewmenu li.j_calendar").addClass("active").siblings().removeClass("active");this.renderAgendaCalendarView();break;default:$(".agenda-tab-li").find(".j_view_type").text("\u65e5\u5386\u89c6\u56fe").attr("data-type",a).end().find(".j_ul_viewmenu li.j_calendar").addClass("active").siblings().removeClass("active"),this.renderAgendaCalendarView()}},renderAgendaNormalView:function(){this.showNav();this.$el.find(".j_search-task").addClass("hide");this.$el.find(".j_if-time").addClass("hide");
this.$el.find(".j_if-finished").addClass("hide");this.$el.find("#create-stage").addClass("hide");this.$el.find("#guide-div").addClass("hide");this.$el.find("#goal-no-stage").addClass("hide");this.$el.find("#j_no_result").addClass("hide");this.$el.find("#mainline-order").addClass("hide");this.$el.find("#calendar-panel").addClass("hide");this.$el.find(".agenda-tab-li").removeClass("hide");this.mainlinecalendarview&&(this.mainlinecalendarview.remove(),this.mainlinecalendarview=null);this.renderDomain(this.id,
this.module,null,!0)},renderAgendaCalendarView:function(){$("#mainlinelink-list-container").mCustomScrollbar("destroy").css("overflow-y","hidden");this.showNav();this.$el.find(".j_search-task").addClass("hide");this.$el.find(".j_if-time").addClass("hide");this.$el.find(".j_if-finished").addClass("hide");this.$el.find("#create-stage").addClass("hide");this.$el.find("#guide-div").addClass("hide");this.$el.find("#goal-no-stage").addClass("hide");this.$el.find("#j_no_result").addClass("hide");this.$el.find("#mainline-order").addClass("hide");
this.$el.find("#j_search_result").addClass("hide");this.$el.find("#calendar-panel").removeClass("hide");this.$el.find(".agenda-tab-li").removeClass("hide");this.$el.find("#calendar-view").removeClass("hide");this.mainlinecalendarview&&(this.mainlinecalendarview.remove(),this.mainlinecalendarview=null);this.mainlinecalendarview=new z({id:this.id,container:"#calendar-panel"});this.mainlinecalendarview.render()},renderTaskViewByConfig:function(){var a=this._getConfig("spectacularsview.view")||"normal";
$("#j_search-time-view .task-list").empty();$("#j_panel_view").empty();switch(a){case "normal":$("#j_search_result_no").removeClass("hide");$(".j_if-time").find(".j_view_type").text("\u666e\u901a\u89c6\u56fe").attr("data-type",a).end().find(".j_ul_viewmenu li.j_normal").addClass("active").siblings().removeClass("active");this.timeview=!1;this.renderTask();break;case "time":$(".j_if-time").find(".j_view_type").text("\u65e5\u671f\u5206\u7c7b").attr("data-type",a).end().find(".j_ul_viewmenu li.j_time").addClass("active").siblings().removeClass("active");
this.showNav();this.timeview=!0;this.renderTaskTimeView();break;case "panel":$("#main .j_goalSlideCtrl").data("open")&&$("#main .j_goalSlideCtrl").trigger("slideIn");$(".j_if-time").find(".j_view_type").text("\u770b\u677f\u89c6\u56fe").attr("data-type",a).end().find(".j_ul_viewmenu li.j_panel").addClass("active").siblings().removeClass("active");this.showNav();this.timeview=!1;$("#goal-no-stage").addClass("hide");$("#mainlinelink-list-container #guide-stage-create").addClass("hide");$("#mainlinelink-list-container").find(".guide-div").addClass("hide");
this.$el.find("#mainlinelink-statistics-container").addClass("hide");this.$el.find("#j_search_result").empty().addClass("hide");$("#j_panel_view").removeClass("hide");this.renderPanelView();break;default:$(".j_if-time").find(".j_view_type").text("\u666e\u901a\u89c6\u56fe").attr("data-type",a).end().find(".j_ul_viewmenu li.j_normal").addClass("active").siblings().removeClass("active"),this.renderTask()}},showNav:function(){this.$el.find("#mainline-order").removeClass("hide");this.$el.find(".j_search-task").removeClass("hide");
this.$el.find("ul.j_subtab-toolkit").removeClass("hide");this.$el.find("#goals-state-group").addClass("hide");this.$el.find("#mainline-view").addClass("hide");this.$el.find("#calendar-view").addClass("hide");this.$el.find(".agenda-tab-li").addClass("hide");this.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").addClass("hide");this.$el.find("#mainlinelink-list-container").removeClass("hide");$("#j_search-time-view").addClass("hide");$("#j_search-time-view .task-list").empty();$("#j_panel_view").addClass("hide");
$("#j_panel_view").empty();$("#goal-no-stage").removeClass("hide");this.initPermission&&$("#create-stage").removeClass("hide");$("#mainlinelink-list-container").find(".guide-div").attr("hasDate")?$("#mainlinelink-list-container").find(".guide-div").addClass("hide"):$("#mainlinelink-list-container").find(".guide-div").removeClass("hide");$("#mainlinelink-list-container #guide-stage-create").removeClass("hide");$("#j_search_result").empty().removeClass("hide");$("#j_search_result_no").find(".j_e_list").empty()},
_getConfig:function(a){var b=null;return this.userId!=TEAMS.currentUser.id?null:(b=TEAMS.userConfig.find(function(b){return b.configKey==a}))?b.configValue:null},rememberTaskView:function(a){if(a){for(var b=this.mainlinelinkmodel,d=null,c=!1,g=0;g<TEAMS.userConfig.length;g++)if(d=TEAMS.userConfig[g],"spectacularsview.view"==d.configKey){c=!0;g=d.configValue;d.configValue=a;g!=a&&b.updateConfigValue(d);break}c||(d={configKey:"spectacularsview.view",configValue:a},b.saveConfig(d,function(){TEAMS.userConfig.push(d)}))}},
rememberCalendarView:function(a){if(a){for(var b=this.mainlinelinkmodel,d=null,c=!1,g=0;g<TEAMS.userConfig.length;g++)if(d=TEAMS.userConfig[g],"mainline.relevance.agendaview"==d.configKey){c=!0;g=d.configValue;d.configValue=a;g!=a&&b.updateConfigValue(d);break}c||(d={configKey:"mainline.relevance.agendaview",configValue:a},b.saveConfig(d,function(){TEAMS.userConfig.push(d)}))}},renderPanelView:function(){var a=this,b=a.mainlinelinkmodel;$("#mainlinelink-list-container").mCustomScrollbar("destroy");
$("#mainlinelink-loading").removeClass("hide");if(b){var d=$.trim($("#mainlinelink-keywords").val()?$("#mainlinelink-keywords").val():""),c=$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?!1:!0,g=$("#mainline-order").attr("data-entity"),e=$("#mainline-order").attr("data-direction")||"DESC",g='{"property":"'+g+'", "direction":"'+e+'"}',d=a.genFilter("#task-filter",c,d);b.mainlineLinkTask(a.id,d,g,!1,function(b){if(!b.actionMsg){b.permission&&a.permissionEvents();a.initPermission=b.permission;
if(b.mainline){if(b.mainline.percentFinished){var d=parseInt(100*b.mainline.percentFinished||0);$(a.el).find(".j_mainline_head_dt .j_mainline_head_percent").html(d+"%")}$(a.el).find(".j_center .j_mainline_head_dt img").attr("src",b.mainline.icon||"images/demo-v3/5.png");$(a.el).find(".j_center .j_mainline_head_title").attr("title",b.mainline.name||"").text(b.mainline.name||"")}d=a.buildGroups(b);a.spectacularsview&&(a.spectacularsview.remove(),a.spectacularsview=null);a.spectacularsview=
new y({container:"#j_panel_view",userId:a.userId,objectId:a.id,parentView:a,module:"task",initPermission:b.permission});a.spectacularsview.render(d);$("#mainlinelink-loading").addClass("hide")}})}},renderTaskTimeView:function(){var a=this,b=a.mainlinelinkmodel;f.layout("#mainlinelink-list-container");a.initPermission&&$("#create-stage").addClass("hide");$("#j_search-time-view").removeClass("hide");$("#j_search-time-view .task-list").empty();$("#goal-no-stage").addClass("hide");$("#mainlinelink-list-container #guide-stage-create").addClass("hide");
$("#mainlinelink-list-container").find(".guide-div").addClass("hide");a.$el.find("#mainlinelink-statistics-container").addClass("hide");a.$el.find("#j_search_result").empty().addClass("hide");var d=$.trim($("#mainlinelink-keywords").val()?$("#mainlinelink-keywords").val():""),c=$(".j_if-finished").find("i").hasClass("icon-checkbox-checked")?!1:!0,g=$("#mainline-order").attr("data-entity"),e=$("#mainline-order").attr("data-direction")||"DESC",g='{"property":"'+g+'", "direction":"'+e+'"}',d=a.genFilter("#task-filter",
c,d);b.mainlineLinkTask(a.id,d,g,!0,function(b){if(!b.actionMsg){b.permission&&a.permissionEvents();if(b.mainline){if(b.mainline.percentFinished){var d=parseInt(100*b.mainline.percentFinished||0);$(a.el).find(".j_mainline_head_dt .j_mainline_head_percent").html(d+"%")}$(a.el).find(".j_center .j_mainline_head_dt img").attr("src",b.mainline.icon||"images/demo-v3/5.png");$(a.el).find(".j_center .j_mainline_head_title").attr("title",b.mainline.name||"").text(b.mainline.name||"")}a.initPermission=
b.permission;$("#j_search-time-view   ul.task-list").data("count",0);a.renderTimeViewTip(b);for(d=0;d<b.tasks.length;d++){var c=b.tasks[d],g=$("#domain-clone").clone().removeAttr("id").attr("id",c.id),g=a.renderTaskOne(g,c),e=c.dateGroup;g.data("group",e);g.attr({id:c.id,sn:c.sn,"data-module":"task","data-id":c.id});c=$("#j_search-time-view ."+e+" .task-list");e=c.data("count")?c.data("count")+1:1;c.data("count",e);g.find(".sn-link").html(e);c.append(g);c.find(".j_time_task, .j_notask_unclick").addClass("hide")}b.permission&&
$("#j_search_result ul.e-list, #j_search_result_no ul.e-list").sortable({opacity:.9,handle:"span.j_mark",revert:!0,connectWith:"#j_search-time-view .e-list",placeholder:"task-placeholder",cancel:".readonly",update:function(b,d){var c=$(this).attr("group");a.rebuildSN($("#j_search-time-view ."+c+" ul.task-list"));d.item.data("update",!0)},start:function(a,b){b.item.trigger("click")},receive:function(a,b){b.item.data("receive",!0);var d=$(this).attr("group");b.item.data("group",d)},stop:function(b,
d){var c=d.item.attr("id");if(d.item.data("update")){d.item.data("update",!1);var g=a.generateSN(d.item);if(d.item.data("receive")){d.item.data("receive",!1);var e=d.item.data("group");a.changeGroup(c,e,g);0<$("#mytask-container ."+e+" .task-list").data("count")&&$("#mytask-container ."+e+" .notask").hide()}else a.mytaskmodel.updateSN(c,g)}}}).disableSelection();$("#mainlinelink-loading").addClass("hide")}})},renderTimeViewTip:function(a){if(a){var b=this.$el.find("#j_search-time-view .j_time_task"),
d=this.$el.find("#j_search-time-view .j_notask_unclick");_.each($("#j_search-time-view .j_e_list"),function(a){"delay"!=$(a).attr("group")?$(a).append(b.clone().removeClass("hide")):$(a).append(d.clone())})}},renderStatisticians:function(a){for(var b=this.mainlinelinkmodel,d=this.$el.find("#statistician-tmp").html(),c=_.template(d),g=$(),d=0;d<a.length;d++){var e={id:a[d].newId,username:a[d].userName};b.statisticians.add(a[d].newId);spanStr=c(e).trim();g=g.add(spanStr)}this.$el.find("#statisticians").append(g);
b=$();d=this.$el.find("#statistician-list-tmp").html();c=_.template(d);for(d=0;d<a.length;d++)e={id:a[d].newId,username:a[d].userName},spanStr=c(e).trim(),e=$(spanStr),e.children("a").addClass("checked"),b=b.add(e);this.$el.find("#statisticians-list").append(b);this.$el.find("#statisticians-list").next().addClass("hide").next().addClass("hide")},generateSN:function(a){var b=a.prev("li.task").attr("sn");a=a.next("li.task").attr("sn");if(b&&a)return Math.round((1*b+1*a)/2);if(a)return 1*a+1E3;if(b)return 1*
b-1E3},changeGroup:function(a,b,d){var c="";d=Date.create(TEAMS.nowTime);switch(b){case "delay":c=d.addDays(-1).format("{yyyy}-{MM}-{dd}");break;case "today":c=d.format("{yyyy}-{MM}-{dd}");break;case "tomorrow":c=d.addDays(1).format("{yyyy}-{MM}-{dd}");break;case "future":c=d.addDays(7).format("{yyyy}-{MM}-{dd}")}this.mytaskmodel.changeProperty(a,"dueDate",c,function(){c&&""!=c?$("#j_search-time-view ."+b+" .task-list #"+a+" .date").html(c):$("#j_search-time-view ."+b+" .task-list #"+a+" .date").html("");
1==$("#entitySlider .taskId"+a).size()&&$("#entitySlider #duedate").trigger("updateDate",c)})},initSortable:function(){var a=this;$("#j_search_result ul.j_e_list, #j_search_result_no ul.j_e_list").sortable({handle:"div.j_title",connectWith:"#j_search_result .j_e_list, #j_search_result_no .j_e_list",placeholder:"task-placeholder",cancel:".readOnly",update:function(b,d){a.rebuildSN($(this));d.item.data("update",!0)},start:function(a,b){},receive:function(a,b){b.item.data("receive",!0);var d=$(this).parents(".j_goal-category").attr("id");
b.item.data("stageId",d)},stop:function(b,d){var c=d.item.attr("id");if(c){var g=a.id;if(d.item.data("update")&&(d.item.data("update",!1),d.item.data("receive"))){d.item.data("receive",!1);var e=d.item.data("stageId");a.mainlinelinkmodel.switchTaskToStage(g,c,e,function(b){a.updateStagesCount();f.notify("\u62d6\u52a8\u5206\u7ec4\u6210\u529f")})}}}}).disableSelection()},renderTaskList:function(a,b){if(b){0==b.length&&a.find(".j_notask").removeClass("hide");if(0==b.length&&"goal-no-stage"==a.attr("id")){var d=
this.$el.find("#stage-clone .j_notask").clone().removeClass("hide");a.find(".j_e_list").append(d)}if(b)for(d=0;d<b.length;d++){var c=b[d],g=$("#domain-clone").clone().removeAttr("id").attr("id",c.id),g=this.renderTaskOne(g,c),c=a.find(".j_e_list"),e=d+1;g.find(".sn-link").html(e);c.append(g)}}},renderTaskOne:function(a,b){var d=b.manager;a.attr({id:b.id,href:"/mainline/link/"+this.id+"/"+this.filterType+"/"+b.module+"/"+b.id});b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),
a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched","false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module",b.module);b.name&&a.find(".j_title").removeClass("hide").attr({"data-id":b.id,"data-module":"task"}).data({name:b.name,id:b.id}).children(".text").attr("title",b.name).text(b.name);a.find(".j_titleinput").remove();b.unread&&a.addClass("unread");b.newConment&&a.addClass("newConment");b.finished&&a.find(".j_title").children(".text").addClass("finished-line");
a.find(".finish").removeClass("hide");this.renderStatus(a,b.finished?"finished":"todo",!0);"urgency"==b.priority?a.find(".importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):"high"==b.priority&&a.find(".importance").removeClass("hide").text("\u7d27\u6025").addClass("high");1!=b.permission&&(a.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",b.module).attr("targetId",b.id),a.find(".finish").attr("targetId",
b.id));a.find(".date").html(b.dueDate?Date.create(b.dueDate).format("{yyyy}-{MM}-{dd}"):"");d&&d.username&&d.username!=TEAMS.currentUser.username&&a.find(".user").html(d.username);b.commentCount=0;0!=b.commentCount&&a.find(".comment-count").html("("+b.commentCount+")");this.createEntityObject(a,b);return a},createEntityObject:function(a,b){var d={};d.id=b.id;d.name=b.name;a.data("object",d)},renderDomain:function(a,b,d,c){var g=this,e=g.mainlinelinkmodel;g.$el.find(".j_search-task").addClass("hide");
g.$el.find("ul.j_subtab-toolkit").removeClass("hide");g.$el.find("#goals-state-group").addClass("hide");g.$el.find("#mainline-view").addClass("hide");g.$el.find("#other-blogs-container").parents(".j_stategroupWrapper").addClass("hide");g.$el.find("#mainlinelink-list-container").removeClass("hide");g.$el.find(".no-result").addClass("hide");var k=$("#mainline-order").attr("data-entity"),l=$("#mainline-order").attr("data-direction")||"DESC",k='{"property":"'+k+'", "direction":"'+l+'"}',l=null;d=d?d:
"";l="document"==b?g.genFilter("#document-filter",c,d):c?'{"keywords":"'+d+'"}':'{"keywords":"'+d+'","type":"finished"}';e.mainlineLinkDomain(a,b,l,k,null,function(a){(a=a.domains)?(g.$el.find("#j_search_result").empty(),0<a.length?g.renderDomains(a):g.$el.find(".no-result").removeClass("hide")):g.$el.find(".no-result").removeClass("hide");$("#mainlinelink-loading").addClass("hide");f.layout("#mainlinelink-list-container")})},renderDomains:function(a){if(a){for(var b=$(".j_e_list_clone").clone(),
d=0;d<a.length;d++){var c=this.renderOneDomain(a[d]),g=d+1;c.find(".sn-link").html(g);b.append(c)}this.$el.find("#j_search_result").append(b)}},renderOneDomain:function(a){var b=$("#domain-clone").clone().removeAttr("id").attr("id",a.id);"calendar"==a.module&&(a.module="agenda");var d="/mainline/link/"+this.id+"/"+this.filterType+"/"+a.module+"/"+a.id,c=a.manager?a.manager:a.creator;"document"==a.module&&(c=a.author);b.attr({"data-id":a.id,"data-module":a.module});b.attr({id:a.id,href:d});b.find(".j_mark").remove();
a.watched?(b.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),b.find(".watch").attr("watched","true")):b.find(".watch").attr("watched","false");b.find(".watch").attr("targetId",a.id);b.find(".watch").attr("module",a.module);a.name&&b.find(".j_title").removeClass("hide").data({name:a.name,id:a.id}).attr({"data-id":a.id,"data-module":a.module,title:a.name}).children(".text").text(a.name);(a.finished||a.finishTime)&&b.find(".j_title").children(".text").addClass("finished-line");
b.find(".j_titleinput").remove();a.unread&&b.addClass("unread");a.newConment&&b.addClass("newConment");1<=a.permission&&b.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",a.module).attr("targetId",a.id);b.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"):"");c&&c.name&&c.name!=TEAMS.currentUser.username&&b.find(".user").html(c.name);0!=a.commentCount&&b.find(".comment-count").html("("+a.commentCount+
")");b.data("object",a);"agenda"==a.module&&(b.find(".watch").addClass("hide"),b.find(".share").addClass("hide"));return b},insertDomain:function(a){var b=$("#j_search_result ul");a=this.renderOneDomain(a);0==b.size()?(b=$(".j_e_list_clone").clone(),b.prepend(a),$("#j_search_result").append(b),$(".no-result").addClass("hide")):b.prepend(a);this.rebuildSN(b)},insertMainline:function(a){var b=$("#mini-goal-item-clone").clone().attr("id",a.id),d=this.getByteSubString(a.name);b.find(".j_mainline-name").html(this.filterHtmlTag(d)).attr("title",
this.filterHtmlTag(a.name));b.find("img").attr("src",a.icon);d=Math.floor(100*a.percentFinished);b.find(".j_percent").html(d+"%");a.percentFinished=a.percentFinished?a.percentFinished:0;d=parseInt(100*a.percentFinished);b.find(".goal-chart").attr({"data-percent":d,"data-text":d+"%"});a=a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"):"";b.find(".j_create_time").html(a);b.removeClass("hide");$("#j_mini-goal-list").prepend(b)},renderMainline:function(a,b,d,c){var g=this;g.mainlinemodel.search(b,
function(b){if(b.page){$("#j_mini-goal-list").html("");for(var e=0;e<b.page.result.length;e++){var k=b.page.result[e],l=$("#mini-goal-item-clone").clone().attr("id",k.id),f=g.getByteSubString(k.name);l.find(".j_mainline-name").html(g.filterHtmlTag(f)).attr("title",g.filterHtmlTag(k.name));l.find("img").attr("src",k.icon);f=Math.floor(100*k.percentFinished);l.find(".j_percent").html(f+"%");k.percentFinished=k.percentFinished?k.percentFinished:0;f=parseInt(100*k.percentFinished);l.find(".goal-chart").attr({"data-percent":f,
"data-text":f+"%"});f=k.createTime?Date.create(k.createTime).format("{yyyy}-{MM}-{dd}"):"";l.find(".j_create_time").html(f);l.removeClass("hide");$("#j_mini-goal-list").append(l);k.id==a&&l.addClass("active");k.creator.id==g.userId&&l.attr("data-type",function(a,b){null==b&&(b="");return b+"create"});k.manager.id==g.userId&&l.attr("data-type",function(a,b){null==b&&(b="");return b+" manager"});if(k.shareEntrys&&0<k.shareEntrys.length)for(f=0;f<k.shareEntrys.length;f++)k.shareEntrys[f].sid==g.userId&&
"participants"==k.shareEntrys[f].shareType&&l.attr("data-type",function(a,b){null==b&&(b="");return b+" participants"});"mineParticipants"==d&&l.attr("data-type",function(a,b){null==b&&(b="");return b+" participants"})}$("#mini-mainline-list").length&&($("#mini-mainline-list").mCustomScrollbar("update"),$("#mini-mainline-list").mCustomScrollbar("scrollTo","top"))}$(".j_mineType ul li").removeClass("active");_.each($(".j_mineType ul li"),function(a){if($(a).attr("data-type")==d){$(a).addClass("active");
var b=$(a).find("a").text();$(a).parents(".j_mineType").find(".dropdown-toggle").html(b+' \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e')}});"middelOpt"==c?$el.find("#j_mini-goal-list .j_goal-item:first").trigger("click"):($(g.el+" .j_goal-item").removeClass("active"),$(g.el+" #"+a).addClass("active"));g.filterType?($("#menu-group-sub .filterType").removeClass("active"),$("#menu-group-sub ."+g.filterType).addClass("active")):($("#menu-group-sub .filterType").removeClass("active"),$("#menu-group-sub .mine").addClass("active"))})},
filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/\r\n|\n/g," ")},initPercentChar:function(a){a.attr({"data-dimension":40,"data-width":1,"data-fgcolor":"#ee7600","data-bgcolor":"#ddd","data-fontsize":"12"}).circliful()},changeModule:function(a){var b=this;a=a?a:"task";for(var d=["mainlineblog","task","document","customer","workflow"],c=!1,g=0;g<d.length-1;g++)d[g]==a&&(c=!0),c&&(d[g]=d[g+1]);d.length-=1;$(".j_mainline_link").find("a").removeClass("active");
$(".j_mainline_link").each(function(c){0==c?($(this).attr({"data-type":a}),$(this).find("a").addClass("active").html(b.moduleName(a))):($(this).attr({"data-type":d[c-1]}),$(this).find("a").html(b.moduleName(d[c-1])))});b.renderOrderLi(a);"task"!=a?($(".j_if-finished").addClass("hide"),$("#goal-no-stage").addClass("hide"),b.initPermission&&$("#create-stage").addClass("hide")):($(".j_if-finished").removeClass("hide"),$("#goal-no-stage").removeClass("hide"),b.initPermission&&$("#create-stage").removeClass("hide"));
$("li.search").find("i").attr("title","\u641c\u7d22"+b.moduleName(a))},renderOrderLi:function(a){$("#mainline-order #order-li").empty();if("mainlineblog"!=a){$("#mainline-order").attr({"data-property":"default","data-direction":"DESC","data-module":a}).removeClass("hide");var b=this.orders[a],d=b[0];$("#mainline-order #order-li").append('\x3cli class\x3d"active"\x3e\x3ca  data-module\x3d"'+a+'"  data-entity\x3d"'+d.property+'" class\x3d"orderType" data-direction\x3d"'+d.direction+'"\x3e'+d.title+
"\x3c/a\x3e\x3c/li\x3e");for(d=1;d<b.length;d++){var c=b[d];$("#mainline-order #order-li").append('\x3cli\x3e\x3ca  data-module\x3d"'+a+'"  data-entity\x3d"'+c.property+'" class\x3d"orderType" data-direction\x3d"'+c.direction+'"\x3e'+c.title+"\x3c/a\x3e\x3c/li\x3e")}}},beforeOpenTarget:function(a){this.highLight(a)},removeTarget:function(a){var b=this.$el.find(".j_e_list  #"+a.id).parent();this.$el.find(".j_e_list  #"+a.id).remove();this.rebuildSN(b);this.updateStageCount(0,b.parent().get(0))},sliderRemove:function(){var a=
0,b=$("#j_mini-goal-list .j_goal-item");b.each(function(b){$(this).hasClass("active")&&(a=b)});1==b.length?($(b[a]).remove(),ROUTER.navigate("/mainlines",{trigger:!0})):(b.length==a+1?$(b[a-1]).trigger("click"):$(b[a+1]).trigger("click"),$(b[a]).remove())},sliderChangeTitle:function(a,b){var d=this.getByteSubString(b);$("#j_mini-goal-list #"+a).find(".j_mainline-name").text(d).attr("title",b);this.$el.find(".j_center .j_mainline_head_title").attr("title",d||"").text(d||"")},sliderChangeAvatar:function(a,
b){$("#j_mini-goal-list #"+a).find("img").attr("src",b)},sliderChangeUnreadCount:function(){if("unRead"==this.filterType){var a=$("#menu-group-sub #unread").text();a&&0<a&&(a--,$("#menu-group-sub #unread").html(0<a?a:""))}else"newComment"==this.filterType&&(a=$("#menu-group-sub #newcomment").text())&&0<a&&(a--,$("#menu-group-sub #newcomment").html(0<a?a:""))},removeMainline:function(a){var b=this.getNext($("#j_mini-goal-list .j_goal-item"));b.attr("id");$("#j_mini-goal-list").find("#"+a).remove();
b?b.trigger("click"):ROUTER.navigate("/mainlines",{trigger:!0})},changeTitle:function(a,b){$(".j_e_list #"+a).find(".title").text(b).attr("title",b).data("name",b)},renderStatus:function(a,b,d){"finished"==b?(a.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),a.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),d&&a.find(".j_finish_line").addClass("finished-line")):
(a.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),a.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),d&&a.find(".j_finish_line").removeClass("finished-line"))},changeStatus:function(a,b){var d=$("#j_search_result #"+a);0==d.size()&&(d=$("#j_search_result_no #"+a));0==d.size()&&(d=$("#j_search-time-view #"+a));this.renderStatus(d,b,!0)},changeWatch:function(a,b){var d=
$("#j_search_result #"+a);0==d.size()&&(d=$("#j_search_result_no #"+a));b?(d.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),d.find(".watch").attr("watched","true")):(d.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),d.find(".watch").attr("watched","false"))},changeManager:function(a,b){var d=$("#j_search_result #"+b);0==d.size()&&(d=$("#j_search_result_no #"+b));a&&(a.username!=TEAMS.currentUser.username?d.find(".user").html(a.username):
d.find(".user").html(""))},changeDuedate:function(a){if(this.timeview){var b=$("#j_search-time-view #"+a.id),d=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(d);d=b.data("group");d!=a.dateGroup&&(b.remove(),b=$("#j_search-time-view ."+d+" .task-list"),this.rebuildSN(b),b=$("#domain-clone").clone().removeAttr("id").attr("id",a.id),b=this.renderTaskOne(b,a),b.addClass("active"),$("#j_search-time-view ."+a.dateGroup+" .task-list").prepend(b),this.rebuildSN($("#j_search-time-view ."+
a.dateGroup+" .task-list")))}else b=$("#j_search_result #"+a.id),0==b.size()&&(b=$("#j_search_result_no #"+a.id)),d=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"",b.find(".date").html(d)},changeUrgency:function(a){var b=$("#j_search_result #"+a.id);0==b.size()&&(b=$("#j_search_result_no #"+a.id));b.find("j_mark").removeClass("mark-danger mark-warning mark-normal");"urgency"==a.priority?b.find("j_mark").addClass("mark-danger"):"high"==a.priority?b.find("j_mark").addClass("mark-warning"):
"normal"==a.priority&&b.find("j_mark").addClass("mark-normal")},highLight:function(a){if(a)if(0==$("#j_search_result #"+a).size()){$("#j_search_result_no #"+a);$("#j_search_result_no li.active").removeClass("active");$("#j_search_result_no #"+a).addClass("active");var b=$("#j_search_result_no #"+a).find(".title").text();$("#j_search_result_no #"+a).find(".title").html("").focus().text(b)}else $("#j_search_result li.active").removeClass("active"),$("#j_search_result #"+a).addClass("active"),(b=$("#j_search_result #"+
a).find(".title .text").text())&&""!=b?$("#j_search_result #"+a).find(".title .text").html("").focus().text(b):(b=$("#j_search_result #"+a).find(".title").text(),$("#j_search_result #"+a).find(".title").html("").focus().text(b))},rebuildSN:function(a){for(var b=a.children(":not(.j_notask)"),d=0;d<b.length;d++)$(b[d]).find(".sn-link").html(d+1);0<b.length&&a.find("li.j_notask").addClass("hide")},getNext:function(a){var b=0;a.each(function(a){$(this).hasClass("active")&&(b=a)});if(1!=a.length)return a.length==
b+1?$(a[b-1]):$(a[b+1])},getPrev:function(){var a=0,b=$("#j_search_result li.j_title");b.each(function(b){$(this).hasClass("active")&&(a=b)});return $(b[a]).prev()},moduleName:function(a){var b="";switch(a){case "mainlineblog":b="\u6700\u65b0\u52a8\u6001";break;case "task":b="\u4efb\u52a1";break;case "document":b="\u6587\u6863";break;case "customer":b="\u5ba2\u6237";break;case "workflow":b="\u5ba1\u6279"}return b},getByteSubString:function(a){for(var b=0,d=0,c=0;c<a.length;c++)if(null!=a[c].match(/[^\x00-\xff]/ig)?
b+=1:d+=1,22<d/2+b)return a.substring(0,c)+"...";if(22>=d/2+b)return a},toggleFilter:function(a,b){"show"==b?$(a).parent().removeClass("hide"):$(a).parent().addClass("hide")},genFilter:function(a,b,d){a=$(a).data("data-filter");var c={};a&&(c=JSON.parse("{"+a+"}"));d&&(c.keywords=d);b||(c.type="finished");return c=JSON.stringify(c)},findSeleted:function(a,b){return 1==$(this.el+" "+b+" #"+a).size()?!0:!1},findSeletedDomain:function(a){return 1==$(this.el+" #j_search_result #"+a).size()?!0:!1},buildGroups:function(a){var b=
[],b=this.buildOneGroup(a),d=a.tasks;if(d){var c={name:"\u672a\u5206\u7ec4"};c.permission=a.permission;c.domains=d;b.push(c)}return b},buildOneGroup:function(a){var b=a.stages;if(b){for(var d=[],c=0,g=b.length;c<g;c++){var e=b[c],k={};k.name=e.name;k.id=e.id;k.permission=a.permission;k.domains=e.tasks;d.push(k)}return d}},setConfig:function(a,b){if(this.userId==TEAMS.currentUser.id){var d=this.mainlinelinkmodel,c=null,g=!1;if(TEAMS.userConfig){for(var e=0;e<TEAMS.userConfig.length;e++)if(c=TEAMS.userConfig[e],
c.configKey==a){g=!0;e=c.configValue;c.configValue=b;e!=b&&d.saveConfig(c);break}g||(c={configKey:a,configValue:b},d.saveConfig(c,function(){TEAMS.userConfig.push(c)}))}}},remove:function(){$("#mainContainer").off(".mainlinelink");this.header&&(this.header.remove(),this.header=null);this.customerview&&(this.customerview.remove(),this.customerview=null);this.flowstartview&&(this.flowstartview.remove(),this.flowstartview=null);this.documentnewview&&(this.documentnewview.remove(),this.documentnewview=
null);this.mainlineView&&(this.mainlineView.remove(),this.mainlineView=null);this.avatarView&&(this.avatarView.remove(),this.avatarView=null);this.spectacularsview&&(this.spectacularsview.remove(),this.spectacularsview=null)}});m.exports=q});
define("teams/mainline/mainlinecalendarview",["teams/utils","teams/component/entitybox","teams/component/entityslider","teams/calendar/agendainfo"],function(h,q,m){var f=h("teams/utils");h("teams/component/entitybox");var e=h("teams/component/entityslider");h("teams/calendar/agendainfo");q=Backbone.View.extend({initialize:function(c){this.el=c.container;this.userPageNO=1;this.userId=c.userId?c.userId:TEAMS.currentUser.id;this.id=c.id;$(this.el).html(f.template("mainline.calendar"));$("body").addClass("page-agenda")},
render:function(){var c=this;h.async("https://static.eteams.cn/js/fullcalendar.min.js",function(){c._render()})},_render:function(){var c=this,b=$(c.el);b.find("#calendar").fullCalendar({defaults:{lang:"zh"},header:{left:"prev,next today",center:"title",right:"agendaDay,agendaWeek,month"},selectable:!0,selectHelper:!0,weekNumbers:!0,weekNumberTitle:"\u5468\u6b21",weekNumberCalculation:function(a){a=new Date(a.format());return f.getWeekDate(a).week},events:function(a,b,g,e){$.ajax({url:"/mainline/linkAgendaForCalendar.json?id\x3d"+
c.id,dataType:"json",data:{start:a.toDate().getTime()-288E5,end:b.toDate().getTime()-288E5},success:function(a){c.user=a.user;for(var b=[],d=0;d<a.webAgendas.length;d++){var g=a.webAgendas[d],f="{yyyy}-{MM}-{dd} {HH}:{mm}";g.allDay&&(f="{yyyy}-{MM}-{dd}");g.start=Date.create(g.start).format(f);g.end=Date.create(g.end).format(f);g.className="agenda_event_class";b.push(g)}e(b)}})},select:function(a,b,g,e,f){c.doSelect(a,b,g,e,f)},eventDrop:function(a,b,g,e,f,k,r,p){c.doEventDrop(a,b,g,e,f,k,r,p)},eventResize:function(a,
b,g,e,f,k,r){c.doEventResize(a,b,g,e,f,k,r)},windowResize:function(a){f.layout("#j_content");"month"!=b.find("#calendar").fullCalendar("getView").name&&f.layout("#j_container")},eventClick:function(a,d){if(31==a.permission){c.entitySlider&&c.entitySlider.remove();var g=new e({module:"agenda",id:a.id,userId:c.userId,page:c,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");b.find("#calendar").fullCalendar("refetchEvents")},
changeEvent:function(d,c,g,e){switch(d){case "title":a.title=c;b.find("#calendar").fullCalendar("updateEvent",a);break;case "start":b.find("#calendar").fullCalendar("refetchEvents");break;case "end":b.find("#calendar").fullCalendar("refetchEvents");break;case "allDay":b.find("#calendar").fullCalendar("refetchEvents");break;case "repeatChange":b.find("#calendar").fullCalendar("refetchEvents")}}}});g.render();c.entitySlider=g}else if(3==a.permission||1==a.permission||0==a.permission)c.entitySlider&&
c.entitySlider.remove(),g=new e({module:"agenda",id:a.id,userId:c.userId,detail:!0,page:c,slideCallback:{afterOperate:function(){$("#entitySlider").removeClass("in")},changeEvent:function(d,c,g,e){switch(d){case "title":a.title=c;b.find("#calendar").fullCalendar("updateEvent",a);break;case "start":b.find("#calendar").fullCalendar("refetchEvents");break;case "end":b.find("#calendar").fullCalendar("refetchEvents");break;case "allDay":b.find("#calendar").fullCalendar("refetchEvents");break;case "repeatChange":b.find("#calendar").fullCalendar("refetchEvents")}}}}),
g.render(),c.entitySlider=g},eventRender:function(a,b,c){b.find(".fc-event-inner").addClass("ellipsis");b.find(".fc-event-inner").attr("title",a.title)},eventAfterRender:function(a,b,c){a.allDay&&b.find(".fc-event-inner").prepend("\x3cspan style\x3d'font-weight:bold'\x3e\u5168\u5929\x3c/span\x3e")},viewRender:function(a,d){if("agendaDay"==a.name){var c=a.start.date(),e=new Date,f=e.getDate(),k=e.getHours(),e=e.getMinutes();if(30>e)var k=b.find(".fc-slot"+2*k),r=$(k.children("td:eq(0)")).height(),
e=e*r/30;else k=b.find(".fc-slot"+(2*k+1)),r=$(k.children("td:eq(0)")).height(),e=(e-30)*r/30;e='\x3cdiv class\x3d"fc-timeline-wrapper" style\x3d"margin-top:'+e+'px"\x3e\x3cdiv class\x3d"fc-timeline-dot"\x3e\x3c/div\x3e';c==f&&(e+='\x3cdiv class\x3d"fc-timeline"\x3e\x3c/div\x3e');e+="\x3c/div\x3e";k.find(".fc-widget-content").children().eq(0).empty().append(e)}},loading:function(a,d){a?b.find(".calendar-loading").removeClass("hide"):("month"!=b.find("#calendar").fullCalendar("getView").name&&b.find("#j_container").mCustomScrollbar("scrollTo",
".fc-slot16"),b.find(".calendar-loading").addClass("hide"))}});f.layout("#j_content")},delegateEvents:function(){var c=this,b=$(c.el);b.on("click.CalendarEdit",".fc-button",function(){f.destroyLayout("#j_content");f.layout("#j_content");"month"!=b.find("#calendar").fullCalendar("getView").name&&f.layout("#j_container")});b.on("click.CalendarEdit","#newAgenda",function(){var a=new Date,d=a.getFullYear(),g=a.getMonth(),g=g+1,g=10>g?"0"+g:g,l=a.getDate(),a=l+1,l=d+"-"+g+"-"+(10>l?"0"+l:l),d=d+"-"+g+
"-"+(10>a?"0"+a:a);c.entitySlider&&c.entitySlider.remove();d=new e({module:"agenda",id:"new",allDay:!0,start:Date.create(l).getTime(),end:Date.create(d).getTime(),page:c,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");b.find("#calendar").fullCalendar("refetchEvents")}}});d.render();c.entitySlider=d});b.on("refetch","#calendar",function(){$("#calendar").fullCalendar("refetchEvents")});this.on("afterAgendaCreate",
function(a){c.afterAgendaCreate(a)})},doSelect:function(c,b,a,d,g){var l=$(this.el);a=d.name;"agendaWeek"==a||"agendaDay"==a?"00:00"==b.format("HH:mm")&&"00:00"==c.format("HH:mm")?(c=c.format("YYYY-MM-DD"),b=b.format("YYYY-MM-DD"),a=!0):(c=c.format("YYYY-MM-DD HH:mm"),b=b.format("YYYY-MM-DD HH:mm"),a=!1):(c=c.format("YYYY-MM-DD"),b=b.format("YYYY-MM-DD"),a=!0);this.entitySlider&&this.entitySlider.remove();b=new e({module:"agenda",id:"new",allDay:a,start:Date.create(c).getTime(),end:Date.create(b).getTime(),
page:this,fromTargetId:this.id,fromModule:"mainline",slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");l.find("#calendar").fullCalendar("refetchEvents")}}});b.render();this.entitySlider=b},doEventDrop:function(c,b,a,d,g,e,f,k){var r=$(this.el);a={};a.years=b._data.years;a.months=b._data.months;a.days=b._data.days;a.hours=b._data.hours;a.minutes=b._data.minutes;b=JSON.stringify(a);$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/agenda/dragToChangeTime/"+c.id+".json",dataType:"json",data:'{"dayDelta":'+b+"}",success:function(a){r.parent("#calendar").fullCalendar("refetchEvents")}})},doEventResize:function(c,b,a,d,g,e,f){var k=$(this.el);a={};a.years=b._data.years;a.months=b._data.months;a.days=b._data.days;a.hours=b._data.hours;a.minutes=b._data.minutes;b=JSON.stringify(a);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda/resizeToChangeTime/"+c.id+".json",dataType:"json",data:'{"dayDelta":'+
b+"}",success:function(a){k.parent("#calendar").fullCalendar("refetchEvents")}})},afterAgendaCreate:function(c){var b=$(this.el);b.find("#calendar").fullCalendar("refetchEvents");this.entitySlider&&this.entitySlider.remove();var a=new e({module:"agenda",id:c,userId:this.userId,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");b.find("#calendar").fullCalendar("refetchEvents")},changeEvent:function(a,g,e,f){e=b.find("#calendar").fullCalendar("clientEvents",
c)[0];switch(a){case "title":e.title=g;b.find("#calendar").fullCalendar("updateEvent",e);break;case "start":b.find("#calendar").fullCalendar("refetchEvents");break;case "end":b.find("#calendar").fullCalendar("refetchEvents");break;case "allDay":b.find("#calendar").fullCalendar("refetchEvents");break;case "repeatChange":b.find("#calendar").fullCalendar("refetchEvents")}}}});a.render();this.entitySlider=a},remove:function(){$(this.el).off(".CalendarEdit");$(this.el).find("#calendar").fullCalendar("destroy");
$("body").removeClass("page-agenda")}});m.exports=q});
define("teams/mainline/mainlinelinkrightview",["teams/utils","teams/mainline/mainlineview","teams/views/feedbackview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlineview"),c=h("teams/views/feedbackview");h=Backbone.View.extend({el:"#right-pane",initialize:function(b){this.id=b.id;$("#right-pane").html(f.template("mainline.mainlinelinkright"))},delegateEvents:function(){var b=this;$(b.el).on("click.mainlinelinkright",".sys-tab a",function(a){$(b.el).find(".sys-tab").find("a").removeClass("active");
$(this).addClass("active");"mainlineinfo"==$(this).attr("data-type")?($("#mainlinelink-info").removeClass("hide"),$("#mainlinelink-feedback").addClass("hide"),b.mainlineview||(b.mainlineview=new e({id:b.id,container:"#mainlinelink-info"}),b.mainlineview.render())):($("#mainlinelink-info").addClass("hide"),$("#mainlinelink-feedback").removeClass("hide"),b.feedbackView||(b.feedbackView=new c({container:"#mainlinelink-feedback",showtitle:"1",navs:[".document",".customer"],type:"other",targetId:b.id,
targetModule:"mainline",groupShow:"1"}),b.feedbackView.render()))})},render:function(){this.mainlineview=new e({id:this.id,container:"#mainlinelink-info"});this.mainlineview.render()},remove:function(){$(this.el).off(".mainlinelinkright");this.mainlineview&&(this.mainlineview.remove(),this.mainlineview=null);this.feedbackView&&(this.feedbackView.remove(),this.feedbackView=null)}});m.exports=h});
define("teams/mainline/mainlinenew","teams/utils teams/component/typeahead teams/mainline/mainlinemodel teams/component/validation teams/mainline/mainlineavatar teams/component/tag teams/component/attachment teams/component/shareallview teams/component/mainline teams/component/agenda".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/mainline/mainlinemodel");h("teams/component/validation");var b=h("teams/mainline/mainlineavatar"),a=h("teams/component/tag"),
d=h("teams/component/attachment"),g=h("teams/component/shareallview"),l=h("teams/component/mainline"),n=h("teams/component/agenda");h=Backbone.View.extend({imageArea:{},mainline:{},initialize:function(a){this.el="#create-new-goal";this.callbackCreate=a.callback;this.userId=a.userId;this.model=new c;this.parentEl=a.parentEl?a.parentEl:"body";$(this.parentEl).append(f.template("mainline.mainlinenew"))},initComponent:function(){this.mainline=new l({module:"mainline",container:"#mainline-new-mainlines",
parentEl:this.el});this.tag=new a({module:"mainline",container:"#mainline-new-tags",ccontainer:"#mainline-new-ctags",parentEl:this.el});this.attachment=new d({module:"mainline",container:"#mainline-new-attachment",parentEl:this.el});this.shareView=new g({module:"mainline",shareContainer:"#mainline-new-shares",partContainer:"#mainline-new-participants",parentEl:this.el});this.agendacomponent=new n({objectId:this.id,module:"mainline",container:"#mainline-new-agenda",moduleLabel:"\u5173\u8054\u65e5\u7a0b:",
targetModule:"agenda",parentEl:this.el})},delegateEvents:function(){var a=this;$(a.el).on("shown.bs.modal",function(b){$(a.el).find(".j_input").focus();$(window).trigger("resize")});$(a.el).on("click.mainlinenew",".j_goal-icon",function(d){a.avatarView=new b({el:"body",callback:function(b,d){a.avatar=d;a.mainline.avatar=d;a.mainline.icon=b;b!=$(a.el+" .j_goal-icon").find("img").attr("src")&&$(a.el+" .j_goal-icon").find("img").attr("src",b);a.avatarView&&(a.avatarView.hide(),a.avatarView=null)}});
a.avatarView.render()});e({el:"#mainline-typeahead-manager",callback:function(a){if(a&&!$.isEmptyObject(a)){$("#mainline-new-manager").html(f.template("base.user",a));var b="\x3cimg class\x3d'avatar' src\x3d'"+(a.avatar&&a.avatar.p5&&"/base/download/"+a.avatar.p5||"images/avatar.png")+"' /\x3e";$("#mainline-new-manager").find("#"+a.id+" a").prepend($(b))}}});$(a.el).on("click.mainlinenew","#close-botton",function(b){a.hide()});$(a.el).on("click.mainlinenew","#close-botton-img",function(b){$(a.el).find("#save-choose-img").trigger("click")});
$(a.el).on("click.mainlinenew","#close-botton-local",function(b){$(a.el).find("#back-to-default").trigger("click")});$(a.el).on("hidden.bs.modal.mainlinenew",function(b){$(b.target).hasClass("datepicker")||a.remove()});$("#create-new-goal").on("shown.bs.modal.mainlinenew",function(b){$(a.el).find("#name").focus()});f.datepicker({el:a.el+" #startTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");$(a.el).find("#endTime").val()&&b>$(a.el).find("#endTime").val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),
$(a.el).find("#startTime").val("")):$(a.el).find("#startTime").val(b)}});f.datepicker({el:a.el+" #endTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");$(a.el).find("#startTime").val()&&b<$(a.el).find("#startTime").val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),$(a.el).find("#endTime").val("")):$(a.el).find("#endTime").val(b)}});$(a.el).on("keydown.mainlinenew","#name",function(a){13==a.which&&a.preventDefault();(a=$(this).val())&&
100<a.length&&(f.notify("\u9879\u76ee\u540d\u5b57\u4e0d\u8d85\u8fc7100\u5b57"),$(this).val(a.substring(0,100)))});$(a.el).on("keydown.mainlinenew","#description",function(a){(a=$(this).val())&&2E3<a.length&&(f.notify("\u9879\u76ee\u63cf\u8ff0\u5185\u5bb9\u4e0d\u8d85\u8fc72000\u5b57"),$(this).val(a.substring(0,2E3)))});$(a.el).on("click.mainlinenew","#save-mainline",function(b){if(!$(this).data("submit")){$(this).data("submit",!0);var d=$(a.el).find("#name").val();if(d&&0!=$.trim(d).length)if(100<
d.length)f.notify("\u9879\u76ee\u540d\u5b57\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57"),$(this).data("submit",!1);else if(a.attachment.uploader.state!==plupload.STOPPED)f.notify("\u9644\u4ef6\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u7b49"),$(this).data("submit",!1);else{var d=d.replace(/[\r]/g,"\\r").replace(/[\n]/g,"\\n").replace(/["]/g,'\\"').replace(/[']/g,"\\'"),c=$(a.el).find("#description").val(),c=c.replace(/[\r]/g,"\\r").replace(/[\n]/g,"\\n").replace(/["]/g,'\\"').replace(/[']/g,"\\'"),
g=$(a.el).find("#startTime").val(),e=$(a.el).find("#endTime").val(),l=a.findSeletedTarget(a.el+" #mainline-new-manager"),n=$(a.el+" .j_goal-icon").find("img").attr("src");b=a.findSeletedTarget(a.el+" #mainline-new-participants");var h=a.findSeletedTarget(a.el+" #mainline-new-tags",a.el+" #mainline-new-ctags"),z=a.findSeletedTarget(a.el+" #mainline-new-shares"),A=a.findSeletedTarget(a.el+" #mainline-new-mainlines"),B=a.findSeletedTarget(a.el+" #mainline-new-attachment"),m=a.findSeletedTarget(a.el+
" #mainline-new-agenda"),d='{"mainline":{"name":"'+d+'","description":"'+c+'","startTime":"'+g+'","endTime":"'+e+'","icon":"'+n+'"}'+a.arrayToJson("manager",l),d=d+a.arrayToJson("participants",b),d=d+a.arrayToJson("tags",h),d=d+a.arrayToJson("shares",z),d=d+a.arrayToJson("mainlineIds",A),d=d+a.arrayToJson("attachments",B),d=d+a.arrayToJson("agendaIds",m),d=d+"}";$(this).attr("disabled",!0);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/mainline.json",dataType:"json",data:d,
success:function(b){a.mainline=b.mainline;a.callbackCreate(a.mainline)}})}else f.notify("\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u5b57"),$(this).data("submit",!1)}});$(a.el).on("click.mainlinenew",".handle-item\x3ea",function(a){a=$(this);var b=!0,d=$(".j_detailhandle .handle-item");a.parent().addClass("hide");d.each(function(){$(this).is(":visible")&&(b=!1)});b&&$(".j_detailhandle").addClass("hide")})},getModuleName:function(a){switch(a){case "document":return"\u6587\u6863";case "workflow":return"\u5ba1\u6279";
case "customer":return"\u5ba2\u6237";case "task":return"\u4efb\u52a1"}},findSeletedTarget:function(a,b){var d=this,c=[];$(a).find(".entity-item").each(function(){c=d.fillObj($(this),c)});b&&$(b).find(".entity-item").each(function(){c=d.fillObj($(this),c)});return c},fillObj:function(a,b){var d=a.find("a").attr("data-value"),c=[];c.push(d);c.push(a.find("a").text());c.push(a.find("a").attr("data-module"));b.push(c);return b},arrayToJson:function(a,b){if(!b||1>b.length)return"";for(var d=',"'+a+'":[',
c=0;c<b.length-1;c++)d+='"'+b[c][0]+'",';return d+='"'+b[b.length-1][0]+'"]'},arrayToJsonRelevance:function(a){if(!a||1>a.length)return"";for(var b=',"relevances":[',d=0;d<a.length-1;d++)var c=a[d],b=b+('{"targetId":"'+c[0]+'","targetName":"'+c[1]+'","targetModule":"'+c[2]+'"},');a=a[a.length-1];return b+='{"targetId":"'+a[0]+'","targetName":"'+a[1]+'","targetModule":"'+a[2]+'"}]'},render:function(){$("#create-new-goal").modal("show");$(this.el).find("#name").autosize();$(this.el).find("#description").autosize();
$("#mainline-new-manager").html(f.template("base.user",TEAMS.currentUser));var a=TEAMS.currentUser,b=a.avatar&&a.avatar.p5&&"/base/download/"+a.avatar.p5||"images/avatar.png",d="/static/img/icon/goal/"+Math.ceil(20*Math.random())+".png";$("#picturezone").attr("src",d);b="\x3cimg class\x3d'avatar' src\x3d'"+b+"' /\x3e";$("#mainline-new-manager").find("#"+a.id+" a").prepend($(b));this.initComponent();setTimeout(function(){},200);f.layout("#create-goal-div")},hide:function(){$(this.el).modal("hide")},
remove:function(){var a=$("#mainline-new-avatar").find("img.avatar-img").imgAreaSelect({instance:!0});a?a.remove():"";$(this.el).off(".mainlineavatar");$(this.el).find("#name").trigger("autosize.destroy");$(this.el).find("#description").trigger("autosize.destroy");$(this.el).off(".mainlinenew");$("#create-new-goal").remove()}});m.exports=h});
define("teams/mainline/mainlinelinkpage",["teams/core/page","teams/mainline/mainlinelinklistview","teams/mainline/mainlinelinkrightview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/mainline/mainlinelinklistview");h("teams/mainline/mainlinelinkrightview");h=q.extend({initialize:function(e){this.id=e.id;this.userId=e.userId;this.module=e.module?e.module:"task";this.objId=e.objId;this.filterType=e.filterType;this.pageKey="mainlinelinkpage#"+this.module+this.id;this.pageActive="mainline";this.template=
"mainline.page";this.mainlineType=e.mainlineType},delegateEvents:function(){this.on("beforeOpen",function(e){this.mainView.beforeOpenTarget(e);this.mainView.spectacularsview&&this.mainView.spectacularsview.beforeOpenTarget(e)});this.on("remove",function(e){this.mainView.removeTarget({id:e,module:"task"})});this.on("changePanelName",function(e){this.mainView.spectacularsview&&this.mainView.spectacularsview.changePanelName(e)});this.on("removePanel",function(e){this.mainView.spectacularsview&&this.mainView.spectacularsview.removePanel({id:e})});
this.on("removeMainline",function(e){this.mainView.removeMainline(e)});this.on("changeTitle",function(e){this.mainView.changeTitle(e.id,e.title)});this.on("changeStatus",function(e){this.mainView.changeStatus(e.id,e.status)});this.on("changePanelStatus",function(e){this.mainView.spectacularsview&&this.mainView.spectacularsview.changePanelStatus(e.id,e.status)});this.on("changeWatch",function(e){this.mainView.changeWatch(e.id,e.watched)});this.on("changePanelWatch",function(e){this.mainView.spectacularsview&&
this.mainView.spectacularsview.changePanelWatch(e.id,e.watched)});this.on("changeUrgency",function(e){this.mainView.changeUrgency(e)});this.on("changeDuedate",function(e){this.mainView.changeDuedate(e)});this.on("changePanelDuedate",function(e){this.mainView.spectacularsview&&this.mainView.spectacularsview.changePanelDuedate(e)});this.on("changeManager",function(e){this.mainView.changeManager(e.manager,e.id)});this.on("changePanelManager",function(e){this.mainView.spectacularsview&&this.mainView.spectacularsview.changePanelManager(e)});
this.on("",function(){});this.on("sliderRemove",function(){this.mainView.sliderRemove()});this.on("sliderChangeTitle",function(e){this.mainView.sliderChangeTitle(e.id,e.title)});this.on("sliderChangeAvatar",function(e){this.mainView.sliderChangeAvatar(e.id,e.image)});this.on("sliderChangeUnreadCount",function(){this.mainView.sliderChangeUnreadCount()})},render:function(){var e=this;this.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,self:!this.options.userId||this.options.userId==
TEAMS.currentUser.id},function(){e.renderType()});e=this;this.mainView=new f({id:e.id,userId:e.userId,module:e.module,filterType:e.filterType,mainlineType:e.mainlineType,page:e});this._render()},renderType:function(){var e="";TEAMS.blogUser?(e="female"==TEAMS.blogUser.sex?"\u5979":"\u4ed6",$("#menu-group-sub li").each(function(){var c=$(this);if(!c.hasClass("sub-indent")){var b=c.data("title");c.hasClass("shareToMe")?c.find(".j_type-name").html("\u5171\u4eab\u7ed9"+e+"\u7684\u9879\u76ee"):c.find(".j_type-name").html(e+
b)}})):$("#menu-group-sub li").each(function(){var c=$(this);if(!c.hasClass("sub-indent")){var b=c.data("title");c.hasClass("mine")?c.find(".j_type-name").html("\u6211"+b):c.hasClass("subordinates")||c.hasClass("all")||c.find(".j_type-name").html(b)}})}});m.exports=h});
define("teams/mainline/mainlineblogmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.pageNo=1;this.pageSize=10;this.options=f||{};this.mainlineId=f.mainlineId},load:function(f,e){var c=this;this.pageNo=f?this.pageNo+1:1;$.ajax({type:"get",url:"/blog/mainlineLinkBlogs.json",dataType:"json",data:{mainlineId:this.mainlineId,pageNo:this.pageNo,pageSize:this.pageSize},success:function(b){c.data=b;e&&e(b)}})},findFileObj:function(f,e){$.ajax({type:"get",url:"/km/document/findFileObj.json",
dataType:"json",data:{id:f},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/mainline/mainlinetasksview",["teams/utils","teams/mainline/mainlinelinkmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlinelinkmodel");h=Backbone.View.extend({viewKey:"MainlineTasksView",initialize:function(c){this.idList=c.idList;this.checkDate=c.checkDate;this.group=c.group;this.dataName=c.dataName;this.seriesName=c.seriesName;this.mainlineId=c.mainlineId;this.userName=c.userName;this.barType=c.barType;this.id=c.id;this.dueDate=c.dueDate;this.el=c.container;
this.closable=c.closable;this.userId=c.userId;this.model=new e({id:this.id});this.page=c.page},delegateEvents:function(){var c=this,b=$(this.el);b.off("click.MainlineTasksView","#btn-close").on("click.MainlineTasksView","#btn-close",function(){$("body").trigger("slideClose")});b.off("keyup.MainlineTasksView","#taskName").on("keyup.MainlineTasksView","#taskName",function(a){var b=$(this);a=a?a:window.event?window.event:null;var g=c.model,e=c.userName,f=c.mainlineId,k=c.barType,r=$("#taskName").val().trim(),
p=c.seriesName,s=c.dataName,h=c.checkDate,w=c.group,v=c.idList;13==a.keyCode&&b&&0<$.trim(b).length&&(g.pageNo=1,g.loadSearchTasks(f,e,k,r,p,s,h,w,v,function(a){c.renderTable(a,k,p,w)}))});b.off("click.MainlineTasksView","#search").on("click.MainlineTasksView","#search",function(){var a=c.model,b=c.userName,g=c.mainlineId,e=c.barType,f=$("#taskName").val().trim(),k=c.seriesName,r=c.dataName,p=c.checkDate,s=c.group,h=c.idList;a.pageNo=1;a.loadSearchTasks(g,b,e,f,k,r,p,s,h,function(a){c.renderTable(a,
e,k,s)})});b.off("click","#more_data").on("click","#more_data",function(a){a=c.model;var b=c.userName,g=c.mainlineId,e=c.barType,f=$("#taskName").val().trim(),k=c.seriesName,r=c.dataName,p=c.checkDate,s=c.group,h=c.idList;a.pageNo++;a.loadSearchTasks(g,b,e,f,k,r,p,s,h,function(a){c.renderTable(a,e,k,s)})})},render:function(){this.loadTemplate();this.renderPage()},renderPage:function(){var c=this,b=c.model,a=this.userName,d=this.mainlineId,g=this.barType,e=this.dataName,f=this.seriesName,k=this.group,
r=this.checkDate,p=this.idList;p instanceof Array||(p=p.split(","));b.beginDate=$("#begin-date").val();b.endDate=$("#end-date").val();b.beginDate=$("#begin-date").val();b.endDate=$("#end-date").val();for(var s=0;s<p.length;s++)b.statisticians.add(p[s]);b.loadMainlineTasks(d,a,g,e,f,k,r,function(a){c.renderTable(a,g,f,k)})},renderTable:function(c,b,a,d){var g;void 0!=c.delayFinishedTasks&&(g=c.delayFinishedTasks.amount);var e=c.taskPage.totalCount;if("finish"==b||"finished"==a||"finished"==d)$("#finishAcountDiv").show(),
$("#totalAmount").html(e),$("#delayAmount").html(g);var n=c.taskPage;g=n.result;e=$("#js_customerTable_wrapper .j_trashlist");1==c.taskPage.pageNo&&(e.empty(),null==g||0==g.length?$("#js_customerTable_wrapper .j_empty").show():$("#js_customerTable_wrapper .j_empty").hide());n&&n.hasNext?($("#more_data").show(),$("#more_data").data("page",n)):$("#more_data").hide();"\u5ef6\u671f"!=d&&"delay"!=b&&"\u5ef6\u671f"!=a&&"delayed"!=d&&"\u8fdb\u884c\u4e2d"!=d&&"doing"!=d&&"\u8fdb\u884c\u4e2d"!=a||$("#title_finish_time").addClass("hide");
if(null!=g)for(c=0;c<g.length;c++){var n=$("#trashbinlogClone li").clone(),k=g[c];n.find(".task_name").text(k.NAME);n.find(".task_name").attr("data-id",k.newId);n.find(".task_name").attr("data-module","task");n.find(".task_name").addClass("entitybox-toggle");n.find(".task_manager").text(k.USERNAME);null==k.dueDate||void 0==k.dueDate?n.find(".due_date").text(""):n.find(".due_date").text(Date.create(k.dueDate).format("{yyyy}-{MM}-{dd}"));null==k.finishTime||void 0==k.finishTime?n.find(".finish_date").text(""):
n.find(".finish_date").text(Date.create(k.finishTime).format("{yyyy}-{MM}-{dd}"));"\u5ef6\u671f"!=d&&"delay"!=b&&"\u5ef6\u671f"!=a&&"delayed"!=d&&"\u8fdb\u884c\u4e2d"!=d&&"doing"!=d&&"\u8fdb\u884c\u4e2d"!=a||n.find(".finish_date").addClass("hide");e.append(n)}f.layout(" .j_trashbinListScr")},loadTemplate:function(){$(this.el).html(f.template("mainline.mainlinetaskslist"))}});m.exports=h});
define("teams/mainline/mainlinelistview","teams/utils teams/component/watchmodel teams/mainline/mainlinemodel teams/component/filter teams/component/sharemodel teams/component/userselector teams/component/batchselector teams/mainline/mainlinenew teams/component/trashbinview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/watchmodel"),c=h("teams/mainline/mainlinemodel"),b=h("teams/component/filter"),a=h("teams/component/sharemodel"),d=h("teams/component/userselector"),g=h("teams/component/batchselector"),
l=h("teams/mainline/mainlinenew"),n=h("teams/component/trashbinview");h=Backbone.View.extend({initialize:function(b){this.el="#main";this.userId=b.userId?b.userId:TEAMS.currentUser.id;this.id=b.id;this.filterType=b.filterType;$(this.el).html(f.template("mainline.mainlinelist",{userId:this.userId}));this.model=new c;this.watchModel=new e;this.shareModel=new a({entityId:"",module:""});this.viewType="table";f.layout(".j_mainscroll");this._renderType()},delegateEvents:function(){var a=this,c=this.model,
e=$("#mainContainer");$("body").off("click.MainlineList",".goto-top").on("click.MainlineList",".goto-top",function(a){f.gotoTop(".j_mainscroll")});e.on("click.MainlineList",".j_goal-item-add",function(b){a.mainlinenew=new l({parentEl:a.el,userId:a.userId,callback:function(b){b=a.viewType&&"table"==a.viewType?a.loadMainline(b):a.loadMainline2(b);$("#mainline-list").prepend(b);$("#guide-div").addClass("hide");a.mainlinenew.hide()}});a.mainlinenew.render()});e.on("click.MainlineList","a.link",function(a){$(this).parents(".mainline").removeAttr("href")});
e.on("click.MainlineList",".center-more",function(b){c.pageNo+=1;a.renderMainlineList()});e.on("click.MainlineList",".feedback",function(b){$(".filterType").removeClass("active");$(this).addClass("active");a.feedview&&(a.feedview.remove(),a.feedview=null);a.feedview=new FeedBackView({container:"#main",showtitle:"0",navs:[".charger",".participants","subordinatemodule"],module:"mainline",moduleName:"\u9879\u76ee",userId:a.userId,showReaded:"1"});a.feedview.render()});e.on("mouseenter.MainlineList",
"#mainlines-filter",function(d){var c=$(this).attr("data-toggle");a.filter||(a.filter=new b({el:c,module:"mainline",targetObj:$(this),userId:a.userId,scroll:!0}),a.filter.render(d));d=setTimeout(function(){$(c).parents(".dropdown-filter").slideDown("fast")},300);$(this).data("showTimer",d);$(this).addClass("open")}).on("mouseleave.MainlineList","#mainlines-filter",function(a){a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).parents(".dropdown-filter").slideUp(100);
$(this).removeClass("open")}).on("filter.MainlineList","#mainlines-filter",function(b){c.pageNo=1;a.search(a.filterType)});e.on("click.MainlineList",".mainlines-status",function(b){$(".mainlines-status").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#mainlines-status").attr("data-entity",$(this).attr("data-entity"));c.pageNo=1;a.search(a.filterType)});e.on("click.MainlineList",".orderType",function(b){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");
b=$(this).attr("data-entity")||"default";$("#mainlines-order").attr("data-entity",b);c.pageNo=1;a.search(a.filterType);"default"!=b&&a.setConfig("viewOrderType.mainline",b)});e.off("click.MainlineList",".j_mineType ul li").on("click.MainlineList",".j_mineType ul li",function(){$(this).hasClass("active")||($(this).addClass("active").siblings("li").removeClass("active"),$(this).find("a").text(),$(this).data("type"),$("#mainlines-targetType").attr("data-entity",$(this).attr("data-entity")),c.pageNo=
1,a.search(a.filterType))});e.on("keyup.MainlineList","#mainline-keywords",function(b){13==(b?b:window.event?window.event:null).keyCode&&(c.pageNo=1,a.search(a.filterType))});e.on("click.MainlineList","li.search .icon-search",function(a){e.find("#mainline-keywords").trigger("change")});e.on("click.MainlineList",".mainline-watchs",function(b){var d=a.findSelectedLi();0<d.length?a.watchModel.watch('{"module":"mainline","ids":"'+d+'"}',function(b){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");b=a.subView;
b.id&&0<=d.indexOf(b.id)&&b.changeWatch(!0);a.updateFastKey(d)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.MainlineList","em.arrow,.icon-star,.icon-star-empty",function(b){b.stopPropagation();b={};var d=$(this).parent().find("em.arrow");b.module="mainline";b.id=d.attr("targetId");d.attr("targetId");"true"==d.attr("watched")?(b._method="DELETE",a.watchModel.watchOne(b,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");d.attr({watched:"false",title:"\u70b9\u51fb\u6dfb\u52a0\u5173\u6ce8"});
d.parents(".j_goalitem").removeClass("active")})):(b._method="PUT",a.watchModel.watchOne(b,function(a){f.notify("\u5173\u6ce8\u6210\u529f");d.attr({watched:"true",title:"\u70b9\u51fb\u53d6\u6d88\u5173\u6ce8"});d.parents(".j_goalitem").addClass("active")}))});e.off("confirmHandler",".mainline-share-add").on("confirmHandler",".mainline-share-add",function(b,d){var c=d.objs;if(c&&!$.isEmptyObject(c)){c=$.isArray(c)?c:[c];a.sids="";for(var g=0;g<c.length;g++)a.sids+=c[g].id+",";a.shareModel.sids=a.sids;
c=a.findSelectedLi();a.shareModel.entityIds=c;a.shareModel._module="mainline";a.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});e.on("click.MainlineList",".mainline-share-add",function(b){b.stopPropagation();b=a.findSelectedLi();0<b.length?(new g({module:"mainline",entityIdArr:b})).render():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.MainlineList",".shortcut .finish",function(b){b.stopPropagation();
if($(this).attr("targetId")&&$(this).attr("status")){var d=$(this),g=d.attr("targetId");c.id=g;var e=d.attr("status");c.change("status",e,function(b){b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(e,d.parents("li"),!0),$("#left").trigger("refresh","mainline"),b=a.subView,b.id&&b.id==g&&b.changeStatus(e))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});e.on("change.MainlineList",".title",function(b){0>=$.trim($(this).val()).length||
(c.id=a.id,c.change("name",$(this).val(),function(b){a.id=b.document.id;f.notify("\u6587\u6863\u4fe1\u606f\u4fee\u6539\u6210\u529f")}))});e.on("keyup.MainlineList",".title",function(b){var d=a.subView;d.changeTitle($(this).val());var c=$(this),g=c.val();b=b.which;(13!=b||0!=$.trim(g).length&&$.trim(g)!=c.attr("title"))&&27==b&&(c.val(c.attr("title")),d.changeTitle(c.attr("title")))});e.off("confirmHandler",".shortcut .share").on("confirmHandler",".shortcut .share",function(b,d){var c=d.objs;if(c&&
!$.isEmptyObject(c)){c=$.isArray(c)?c:[c];a.sids="";for(var g=0;g<c.length;g++)a.sids+=c[g].id+",";var e=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=e;a.shareModel._module="mainline";a.shareModel.saveAll(function(b){b.addUserMessage?f.notify(b.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");var d=a.subView;d.id&&d.id==e&&d.addShare(b.shareEntrys)})}});e.on("click.MainlineList",".shortcut .share",function(a){a.stopPropagation();$(this).hasClass("selector-toggle")?
(new d({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});e.on("keyup.MainlineList","#mainline-list",function(a){a=a.which;if(38==a){var b=f.getPrev("#mainline-list li");b&&(b.find("input").focus(),b.trigger("click"))}40==a&&(a=f.getNext("#mainline-list li"))&&(a.find("input").focus(),a.trigger("click"))});e.on("change.MainlineList",".title",function(b){var d=$(this);0>=$.trim(d.val()).length?(f.notify("\u5ba2\u6237\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"),d.val(d.attr("title")),
a.subView.changeTitle(d.attr("title"))):(a.model.id=d.parent().attr("id"),a.model.change("name",d.val(),function(b){a.id=b.mainline.id;d.attr("title",b.mainline.name);f.notify("\u5ba2\u6237\u540d\u5b57\u4fee\u6539\u6210\u529f")}))});e.on("keyup.MainlineList",".title",function(b){var d=a.subView;d.changeTitle($(this).val());var c=$(this),g=c.val();b=b.which;(13!=b||0!=$.trim(g).length&&$.trim(g)!=c.attr("title"))&&27==b&&(c.val(c.attr("title")),d.changeTitle(c.attr("title")))});e.on("click.MainlineList",
".j_goalitem",function(b){$(this).removeClass("unread");$(this).removeClass("newConment");$(this).hasClass("unread")&&(b=$("#unread").data("count"),b--,$(a.el).find("#unread").html(b).data("count",b));$(this).hasClass("newConment")&&(b=$(a.el).find("#newcomment").data("count"),b--,$(a.el).find("#newcomment").html(b).data("count",b))});e.on("click.MainlineList",".j_mainlinelist_more",function(){a.model.pageNo=$(this).data("nextPage")||1;a.renderMainlineList(a.filterType)})},render:function(){if("feedback"==
this.filterType)this.feedview=new FeedBackView({container:"#main",showtitle:"0",navs:[".charger",".participants","subordinatemodule"],module:"mainline",moduleName:"\u9879\u76ee",userId:this.userId,showReaded:"1"}),this.feedview.render(),$(".filterType").removeClass("active"),$(this).addClass("active");else if("recylce"==this.filterType)this.trashBinView=new n({container:"#main",userId:this.userId,module:"mainline"}),this.trashBinView.render(),$(".filterType").removeClass("active"),$(".j_recylce").addClass("active");
else{this.model.pageNo=1;var a=this._getConfig("viewOrderType.mainline")||"default";$("#mainlines-order").attr("data-entity",a);$("a.orderType[data-entity]").parent().removeClass("active");$('a.orderType[data-entity\x3d"'+a+'"]').parent().addClass("active");this.renderMainlineList(this.filterType);this.id&&"new"==this.id&&$(this.el).find(".j_goal-item-add").trigger("click")}$(".j_pageActive li a").removeClass("active");$(".j_pageActive li").find("#menu-mainline").addClass("active")},renderCount:function(){TEAMS.currentUser.id==
this.userId&&this.model.searchCount(this.userId,function(a){0<a.countUnread&&($("#mainContainer").find(".unRead").removeClass("hide"),$("#mainContainer").find("#unread").addClass("badge"),$("#mainContainer").find("#unread").html(a.countUnread).data("count",a.countUnread));0<a.countNewComment&&($("#mainContainer").find(".newComment").removeClass("hide"),$("#mainContainer").find("#newcomment").addClass("badge"),$("#mainContainer").find("#newcomment").html(a.countNewComment).data("count",a.countUnread))})},
renderMainlineList:function(a){this.paramChange();this.search(a)},renderMainlines:function(a){for(var b=0;b<a.result.length;b++){var d=this.viewType&&"table"==this.viewType?this.loadMainline(a.result[b]):this.loadMainline2(a.result[b]);$("#mainline-list").append(d)}0>=$("#mainline-list .j_goalitem").length&&$("#mainline-list").append($("#goal-item-add").clone().removeAttr("id"));TEAMS.currentUser.id!=this.userId&&$(".j_goal-item-add").addClass("hide")},search:function(a){var b=this,d=b.model,c="",
g=a?a:$("#mainlines-type").attr("data-entity"),e=$("#mainlines-filter").data("data-filter");a=$("#mainlines-order").attr("data-entity");var l=$("#mainlines-status").attr("data-entity"),f=$.trim($("#mainline-keywords").val()),n=$("#mainline-keywords").attr("placeholder"),h=$("#mainlines-targetType").attr("data-entity");f==n&&(f="");f&&0<f.length&&(g="all");d.userId=this.userId;d.id=this.id;1==d.pageNo&&$("#mainline-list").html("");if("mine"==g||null==g)"mineManager"==h?g="mineManager":"mineParticipants"==
h?g="mineParticipants":"mine"==h&&(g="mine");g=g?g:"mine";l||(l="all"==g||"finished"==g?"all":"open");c=e&&0<e.length?"all"!=l?c+('"filter":{'+e+',"type":"'+g+'","status":"'+l+'"},'):c+('"filter":{'+e+',"type":"'+g+'"},'):"all"!=l?c+('"filter":{"type":"'+g+'","status":"'+l+'","keywords":"'+f+'"},'):c+('"filter":{"type":"'+g+'","keywords":"'+f+'"},');c+='"userId":"'+b.userId+'","pageSize":"'+d.pageSize+'","pageNo":"'+d.pageNo+'","order":{"property":"'+(a?a:"default")+'"},"noPageCount":true';c=("{"+
c+"}").replace(/\\/g,"\\\\");$("#mainlinelist-loading").removeClass("hide");$(".j_mainlinelist_more").addClass("hide");d.search(c,function(a){$("#mainlinelist-loading").addClass("hide");a&&a.page&&(a=a.page,b.result=a.result,b.renderMainlines(a),a.result&&a.result.length==a.pageSize?$(".j_mainlinelist_more").removeClass("hide").data("nextPage",a.pageNo+1):$(".j_mainlinelist_more").addClass("hide"),b.userId&&b.userId==TEAMS.currentUser.id?g&&1==a.pageNo&&0==a.result.length&&!e?$(b.el).find("#guide-div").removeClass("hide").find(".j_holder_"+
g).removeClass("hide").siblings().addClass("hide"):$(b.el).find("#guide-div").addClass("hide"):1==a.pageNo&&0==a.result.length?$(b.el).find(".no-result").removeClass("hide"):$(b.el).find(".no-result").addClass("hide"),$(".center-pane #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked"),"mine"!=$(".filterType.active").attr("data-entity")?$(".j_mineType").addClass("hide"):$(".j_mineType").removeClass("hide"))})},paramChange:function(){var a=this.model,b=$("#drop-filter").text(),
d=$("#drop-status").text();switch(b){case "\u6211\u521b\u5efa\u7684":b="myCreater";break;case "\u6211\u8d1f\u8d23\u7684":b="myManager";break;case "\u6211\u53c2\u4e0e\u7684":b="myJoin";break;default:b=""}switch(d){case "\u5df2\u5b8c\u6210":d="close";break;case "\u672a\u5b8c\u6210":d="open";break;default:d=""}a.mainline.filter=b;a.mainline.status=d},updateReslut:function(a,b){for(var d=!1,c=0;c<this.newResult.length;c++){var g=this.newResult[c];if(g.id==b){this.newResult[c].watched=a;d=!0;break}}if(!d)for(d=
0;d<this.result.length;d++)if(g=this.result[d],g.id==b){this.result[d].watched=a;break}},findSelectedLi:function(){var a="";$(".center-pane .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},updateFastKey:function(a){a=a.split(",");for(var b=0;b<a.length-1;b++){var d=$("#mainlinelist-container #"+a[b]);d.find(".watch").html("\u53d6\u6d88\u5173\u6ce8");d.find(".watch").attr("watched","true")}},loadMainline:function(a){var b=
a.id,d=$("#mainlineClone .j_goalitem").clone();d.find(".j_goalname").attr({title:this.filterHtmlTag(a.name)});d.find(".j_goalname").html(this.getByteSubString(this.filterHtmlTag(a.name)));var c=a.manager&&a.manager.username||"";d.find(".j_mainlinemanager").html(this.getByteSubString(this.filterHtmlTag(c)));d.attr({"data-id":b,"data-module":"mainline"});c=$("#mainlines-targetType").attr("data-entity");void 0==c&&(c="mine");this.filterType?d.attr("href","/mainline/link/"+this.userId+"/"+a.id+"/"+c+
"/"+this.filterType):d.attr("href","/mainline/link/"+this.userId+"/"+a.id+"/"+c);a.manager&&d.find("span.manager").html(a.manager.username);a.icon&&d.find(".icon-img").attr("src",a.icon);d.attr("id",b);this.filterType&&"newComment"==this.filterType?d.addClass("goal-head-newcomment"):this.filterType&&"unRead"==this.filterType?d.addClass("goal-head-unread"):a.unread?d.addClass("goal-head-unread"):a.newConment&&d.addClass("goal-head-newcomment");a.startTime||a.endTime?(a.startTime?d.find(".start").html(Date.create(a.startTime).format("{yyyy}-{MM}-{dd}")):
d.find(".start").html("\u65e0\u5f00\u59cb\u65e5\u671f").addClass("no-date"),a.endTime?d.find(".end").html(Date.create(a.endTime).format("{yyyy}-{MM}-{dd}")):d.find(".end").html("\u65e0\u7ed3\u675f\u65e5\u671f").addClass("no-date")):(d.find(".start").html("\u65e0\u8d77\u6b62\u65e5\u671f").addClass("no-date"),d.find(".end").remove());a.percentFinished=a.percentFinished?a.percentFinished:0;b=parseInt(100*a.percentFinished);d.find(".j_percent").html(b+"%");a.watched?(d.find("em.arrow").attr({targetId:a.id,
watched:!0,title:"\u70b9\u51fb\u53d6\u6d88\u5173\u6ce8"}),d.addClass("active")):(d.find("em.arrow").attr({targetId:a.id,watched:!1,title:"\u70b9\u51fb\u6dfb\u52a0\u5173\u6ce8"}),d.removeClass("active"));return d},loadMainline2:function(a){var b=a.id,d=$("#mainlineClone2 .j_goalitem").clone();d.find("a.j_goalname").attr({title:a.name}).html(this.filterHtmlTag(a.name));d.attr({"data-module":b,"data-module":"mainline"}).addClass("router");d.addClass("j_entityslider-toggle");a.manager&&d.find("span.manager").html(a.manager.username);
a.icon&&d.find(".icon-img").attr("src",a.icon);d.attr("id",b);d.find("span.participant").html(a.participantCount);d.find("span.share").html(a.shareCount);a.unread?d.addClass("goal-head-unread"):a.newConment&&d.addClass("goal-head-newcomment");a.startTime||a.endTime?(a.startTime?d.find(".start").html(Date.create(a.startTime).format("{yyyy}-{MM}-{dd}")):d.find(".start").html("\u65e0\u5f00\u59cb\u65e5\u671f").addClass("no-date"),a.endTime?d.find(".end").html(Date.create(a.endTime).format("{yyyy}-{MM}-{dd}")):
d.find(".end").html("\u65e0\u7ed3\u675f\u65e5\u671f").addClass("no-date")):(d.find(".start").html("\u65e0\u8d77\u6b62\u65e5\u671f").addClass("no-date"),d.find(".end").remove());a.percentFinished=a.percentFinished?a.percentFinished:0;d.find(".percent").html(parseInt(100*a.percentFinished));a.watched?(d.find("em.arrow").attr({targetId:a.id,watched:!0,title:"\u70b9\u51fb\u53d6\u6d88\u5173\u6ce8"}),d.addClass("active")):(d.find("em.arrow").attr({targetId:a.id,watched:!1,title:"\u70b9\u51fb\u6dfb\u52a0\u5173\u6ce8"}),
d.removeClass("active"));return d},getByteSubString:function(a){for(var b=0,d=0,c=0;c<a.length;c++)if(null!=a[c].match(/[^\x00-\xff]/ig)?b+=1:d+=1,22<d/2+b)return a.substring(0,c)+"...";if(22>=d/2+b)return a},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/[\r\n]/g," ")},removeMainline:function(a){$("#mainline-list #"+a).remove()},insertMainline:function(a){$("#mainline-create").remove();if(this.viewType&&"table"==this.viewType){var b=this.loadMainline(a);
$("#mainline-list").prepend(b);this.initPercentChar(b.find(".goal-chart"))}else b=this.loadMainline2(a),$("#mainline-list").prepend(b);f.rebuildSN($("#mainline-list"));this.highLight(a.id);$("#guide-div").addClass("hide")},beforeOpenMainline:function(a){this.highLight(a)},highLight:function(a){$("#mainline-list li.active").removeClass("active");$("#mainline-list #"+a).addClass("active")},changeName:function(a){$("#mainline-list #"+a.id).find("input.title").val(a.name).attr("title",a.name)},renderStatus:function(a,
b,d){"close"==a?(b.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e\u6807\u8bb0\u672a\u5b8c\u6210'),b.find(".finish").attr({status:"open",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),d&&b.find("input").addClass("finished-line")):(b.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\u6807\u8bb0\u5b8c\u6210'),b.find(".finish").attr({status:"close",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),
d&&b.find("input").removeClass("finished-line"))},changeStatus:function(a,b){var d=$("#mainlinelist-container #"+a);this.renderStatus(b,d,!0)},changeWatch:function(a,b){var d=$("#mainlinelist-container #"+a);b?(d.find(".watch").html("\u53d6\u6d88\u5173\u6ce8"),d.find(".watch").attr("watched","true")):(d.find(".watch").html("\u5173\u6ce8"),d.find(".watch").attr("watched","false"))},_getConfig:function(a){var b=null;return this.userId!=TEAMS.currentUser.id?null:(b=TEAMS.userConfig.find(function(b){return b.configKey==
a}))?b.configValue:null},setConfig:function(a,b){if(this.userId==TEAMS.currentUser.id){var d=this.model,c=null,g=!1;if(TEAMS.userConfig){for(var e=0;e<TEAMS.userConfig.length;e++)if(c=TEAMS.userConfig[e],c.configKey==a){g=!0;e=c.configValue;c.configValue=b;e!=b&&d.saveConfig(c);break}g||(c={configKey:a,configValue:b},d.saveConfig(c,function(){TEAMS.userConfig.push(c)}))}}},remove:function(){$("body").off(".MainlineList");$("#mainContainer").off(".MainlineList");this.header&&(this.header.remove(),
this.header=null);this.mainlinenew&&(this.mainlinenew.hide(),this.mainlinenew=null)},_renderType:function(){var a="";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?a="\u5979":TEAMS.blogUser&&(a="\u4ed6");$(".j_mineType li").each(function(){var b=$(this),d=b.attr("title");d&&b.children("a").html(a+d)})}});m.exports=h});
define("teams/mainline/mainlineview","teams/utils teams/component/typeahead teams/component/shareallview teams/mainline/mainlinemodel teams/component/extendview teams/component/mainline teams/component/tag teams/component/attachment teams/component/permissionview teams/component/validation teams/mainline/mainlineavatar teams/mainline/mainlinecopyview teams/component/agenda teams/component/entityremindview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/shareallview"),
b=h("teams/mainline/mainlinemodel"),a=h("teams/component/extendview"),d=h("teams/component/mainline"),g=h("teams/component/tag"),l=h("teams/component/attachment"),n=h("teams/component/permissionview"),k=h("teams/component/validation"),r=h("teams/mainline/mainlineavatar"),p=h("teams/mainline/mainlinecopyview");h("teams/component/agenda");var s=h("teams/component/entityremindview");h=Backbone.View.extend({el:"",mainline:{},initialize:function(a){this.id=a.id;this.model=new b(a);this.el=a.container||
"#right-pane";this.tolink=a.tolink;this.callbacks=a.callbacks;this.page=a.page;this.backLastPage=a.backLastPage||!1},initComponent:function(){this.mainlineconponent=new d({targetId:this.id,module:"mainline",container:"#mainline-mainlines",parentEl:this.el});this.tagview=new g({module:"mainline",container:"#mainline-tags",ccontainer:"#mainline-ctags",targetId:this.id,parentEl:this.el});this.attachment=new l({targetId:this.id,module:"mainline",container:"#mainline-attachment",parentEl:this.el});this.shareView=
new c({entityId:this.id,module:"mainline",shareContainer:"#mainline-share",partContainer:"#mainline-participants",parentEl:this.el});this.extendview=new a({targetId:this.id,module:"mainline",container:"#info-div",parentEl:this.el});this.permissionView=new n({module:"mainline",container:this.el});this.entityremind=new s({entityId:this.id,module:"mainline",container:"#mainline-remind",parentEl:this.el})},initEvents:function(){var a=this,b=this.model,d=$(a.el);d.on("change.mainline","#mainline-name",
function(){if(!k.validate($(this)))return!1;var d=$(this).val();"new"!=a.id?0<$.trim(d).length?b.change("name",d,function(b){f.notify("\u9879\u76ee\u540d\u79f0\u5df2\u4fee\u6539");$(a.el).find("#stream").trigger("insertStream",b.stream);a.page.trigger("sliderChangeTitle",{id:a.id,title:d})}):f.notify("\u9879\u76ee\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a"):d&&!d.isBlank()&&(b.mainline.name=d,b.save(function(d){f.notify("\u9879\u76ee\u521b\u5efa\u6210\u529f");a.id=b.id;a.mainline=b.mainline;$(a.el).find(".loading_large").hide();
$(a.el).find(".manager-div").removeClass("hide");$(a.el).find(".links-control-group,.control-btn").removeClass("hide");$(a.el).find("#mainline-content").prop("contenteditable",!0).focus();a.initComponent();a.loadAfter();a.renderShowAfter(d);a.trigger("create",b.mainline)}))});d.on("keydown.mainline","#mainline-name",function(a){13==a.which&&a.preventDefault()});d.on("keyup.mainline","#mainline-name",function(b){b=b.which;var d=$(this).val();a.trigger("changeName",{id:a.id,name:d});a.page.trigger("changeTitle",
{id:a.id,title:d});a.page.trigger("changeTitle",{id:a.id,title:d});a.page.trigger("sliderChangeTitle",{id:a.id,title:d});13==b&&d!=a.mainline.name&&$(this).change();27==b&&($(this).val(a.mainline.name),a.page.trigger("sliderChangeTitle",{id:a.id,title:a.mainline.name}))});d.on("click.mainline","#btn-linkdomain",function(b){$(this).trigger("remove");ROUTER.navigate("mainline/link/"+TEAMS.currentUser.id+"/"+a.id+"/mine",{trigger:!0})});d.on("click.mainline",".handle-item\x3ea",function(b){b=$(this);
b.parent().addClass("hide");$("#mainline-container .j_detailCommands").removeClass("hide");"icon-remind-a"==b[0].id&&(d.find("#endTime").val()||f.notify("\u8bf7\u8bbe\u7f6e\u9879\u76ee\u7684\u5230\u671f\u65e5,\u5426\u5219\u8bbe\u7f6e\u7684\u63d0\u9192\u5c06\u65e0\u6cd5\u751f\u6548"));a.renderHandle()})},render:function(){var a=this,b=this.model;a.isNew()?(a.renderNewAfter(),$(this.el).find("#mainline-name").focus()):(a.loadTemplate(),a.initEvents(),$(a.el).find(".loading_large").show(),$(a.el).find(".manager-div").removeClass("hide"),
a.tolink&&$(a.el).find("#btn-linkdomain").parent().addClass("hide"),a.initComponent(),a.loadAfter(),b.load(function(b){a.mainline=b.mainline;a.renderShowAfter(b);a.renderHandle();a.callbacks&&a.callbacks.changeUnreadCount&&a.callbacks.changeUnreadCount(b.mainline.unread,b.mainline.newConment)}))},renderHandle:function(){var a=$(".j_detailhandle .handle-item"),b=!0,d=0;a.each(function(){$(this).hasClass("hide")||(b=!1,d++)});b?$(".j_detailhandle").addClass("hide"):d==a.length&&$(this.el+" .j_detailCommands").addClass("hide")},
renderShowAfter:function(a){if((a=a.actionMsg)&&a.message)return $(this.el).html(f.template("base.nopermission",{msg:a,module:"mainline",id:this.id})),$(this.el).find(".scrollwrapper").trigger("resizeSroll"),!1;this.renderMainline();$(this.el).find(".loading_large").hide();$(this.el).find("#info-div").show();this.renderCreateSuccess()},renderNewAfter:function(){var a=$(this.el);this.loadTemplate();this.initEvents();a.find("#info-div").removeClass("hide");a.find(".links-control-group,.control-btn").addClass("hide");
a.find("#mainline-content").prop("contenteditable",!1);this.loadAfter();this.delegateCreateEvents()},loadAfter:function(){var a=this;$(this.el).find("#mainline-name").autosize();$(this.el).find("#mainline-content").autosize();f.layout("#mainline-container");f.datepicker({el:a.el+" #startTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");$(a.el).find("#endTime").val()&&b>$(a.el).find("#endTime").val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),
$(a.el).find("#startTime").val("")):($(a.el+" #startTime").val(b),a.model.change("startTime",b,function(b){f.notify("\u9879\u76ee\u5f00\u59cb\u65e5\u671f\u4fee\u6539\u6210\u529f");$(a.el).find("#stream").trigger("insertStream",b.stream)}))}});f.datepicker({el:a.el+" #endTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");$(a.el).find("#startTime").data("data")&&b<$(a.el).find("#startTime").data("date")?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),
$(a.el).find("#endTime").html("")):($(a.el+" #endTime").html(b).data("date",b),a.model.change("endTime",b,function(b){f.notify("\u9879\u76ee\u7ed3\u675f\u65e5\u671f\u4fee\u6539\u6210\u529f");$(a.el).find("#stream").trigger("insertStream",b.stream)}))}});a.backLastPage&&($(this.el).find(".js_entiyDetail_reply").removeClass("hide"),$(this.el).find(".detail-close-li").addClass("hide"))},loadTemplate:function(){$(this.el).html(f.template("mainline.mainline"))},renderWatch:function(a){a?($(this.el+" #mainline-watch i").removeClass("icon-star-empty").addClass("icon-star"),
$(this.el+" #mainline-watch .j_watch_tip").text("\u53d6\u6d88\u5173\u6ce8")):($(this.el+" #mainline-watch i").removeClass("icon-star").addClass("icon-star-empty"),$(this.el+" #mainline-watch .j_watch_tip").text("\u5173\u6ce8"))},renderStatus:function(a,b){$(this.el+" #mainline-status span").addClass("hide");"close"==a?($(this.el+" #mainline-status span.close-mainline").removeClass("hide"),$(this.el+" #mainline-status i").removeClass("icon-todo").addClass("icon-finished"),$(this.el+" #mainline-status").attr("data-status",
"close"),$(this.el).find("#mainline-name").addClass("finished-line")):($(this.el+" #mainline-status span.open-mainline").removeClass("hide"),$(this.el+" #mainline-status i").removeClass("icon-finished").addClass("icon-todo"),$(this.el+" #mainline-status").attr("data-status","open"),$(this.el).find("#mainline-name").removeClass("finished-line"));this.page&&this.page.trigger("changeStatus",{id:this.id,status:a})},renderMainline:function(){var a=this,b=this.model;a.mainline=b.mainline;a.agendas=b.agendas;
b=b.entityRemind;a.renderWatch(a.mainline.watched);a.renderStatus(a.mainline.status,!0);$(a.el+" #btn-wechat").attr("targetId",a.mainline.id);$(a.el+" #btn-remind").attr("targetId",a.mainline.id);$(a.el+" #mainline-name").parent().parent().find(".j_goal-icon").addClass("usercard-toggle");$(a.el+" #mainline-name").parent().parent().find(".j_goal-icon").attr("userid",a.mainline.creator.id);$(a.el+" #mainline-name").val(a.mainline.name);if(a.mainline.creator){$(a.el+" #mainline-creator").html(a.mainline.creator?
a.mainline.creator.username:"");var d=a.mainline.creator.avatar&&a.mainline.creator.avatar.p5&&"/base/download/"+a.mainline.creator.avatar.p5||"images/avatar.png";$(a.el+" .j_goal-icon").attr("data-original-title",Date.create(a.mainline.createTime).format("{yyyy}-{MM}-{dd}")+" \u7531"+a.mainline.creator.username+"\u521b\u5efa");$(a.el+" .j_goal-icon").children("a").find("img").attr("src",d)}$(a.el+" #mainline-create-time").html(Date.create(a.mainline.createTime).format("{yyyy}-{MM}-{dd}"));
a.mainline.description&&$(a.el+" #mainline-content").val(a.mainline.description);a.mainline.endTime&&$(a.el+" #endTime").val(Date.create(a.mainline.endTime).format("{yyyy}-{MM}-{dd}"));a.mainline.startTime&&($(a.el+" #startTime").val(Date.create(a.mainline.startTime).format("{yyyy}-{MM}-{dd}")),$(a.el+" #mainline-beginDate").removeClass("hide"),$(a.el+" #i-beginDate").parent().addClass("hide"));a.mainline.percentFinished&&$(a.el+" #finished-percent").html(Math.floor(100*a.mainline.percentFinished)+
"%");a.mainline.manager&&a.mainline.manager.username&&($(a.el+" #mainline-manager").html(f.template("base.user",a.mainline.manager)),d="images/avatar.png",a.mainline.manager.avatar&&(d=a.mainline.manager.avatar.p5&&"/base/download/"+a.mainline.manager.avatar.p5),d="\x3cimg class\x3d'avatar' src\x3d'"+d+"' /\x3e",$(a.el+" #mainline-manager").find("#"+a.mainline.manager.id+" a").prepend($(d)));setTimeout(function(){$(a.el+" #mainline-content").trigger("autosize.resize");$(a.el+" #mainline-name").trigger("autosize.resize")},
10);b&&b.id&&$(a.el).find($(a.entityremind.el).attr("icon")).parent().addClass("hide")},api:{changeDuedate:function(a,b){$(this.el+" #duedate").trigger("changeDuedate",[a,b])},changeTitle:function(a){$(this.el+" #mainline-name").val(a).trigger("autosize.resize")},blurTitle:function(){$(this.el+" #mainline-name").change()},changeStatus:function(a){$(this.el+" #status-"+a).trigger("click")}},changeWatch:function(a){this.renderWatch(a);$("#left").trigger("refresh","watched")},changeTitle:function(a){$(this.el+
" #mainline-name").val(a).trigger("autosize.resize")},addShare:function(a){this.shareView.render(a)},changeStatus:function(a){this.renderStatus(a,!0)},renderCreateSuccess:function(){this.delegateEditEvents();this.shareView.render(this.mainline.shareEntrys);this.extendview.render(this.mainline);this.tagview.render(this.mainline.tags);this.attachment.render(this.mainline.attachments);this.permissionView.render(this.mainline.permission);this.mainlineconponent.render(this.mainline.mainlines);this.entityremind.render(this.mainline.entityRemind,
this.mainline.remindEntryList);this.trigger("beforeOpen",this.id)},delegateCreateEvents:function(){},delegateEditEvents:function(){var a=this,b=this.model,d=$(a.el);d.on("click.mainline","#mainline-status",function(){var d="",d="close"==$(this).attr("data-status")?"open":"close";b.change("status",d,function(b){b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u9879\u76ee\u72b6\u6001\u4fee\u6539\u6210\u529f"),$("#left").trigger("refresh","mainline"),a.renderStatus(d,!0),a.trigger("changeStatus",
{id:a.id,status:d}),a.page.trigger("changeStatus",{id:a.id,status:d}),$(a.el).find("#stream").trigger("insertStream",b.stream))})});d.on("click.mainline","#btn-delete",function(d){f.confirm("\u786e\u5b9a\u5220\u9664\u5417?",function(c){c&&b.delt(function(b){f.notify("\u9879\u76ee\u5df2\u5220\u9664");a.tolink?a.page.trigger("sliderRemove",{}):$(d.target).trigger("remove")})})});d.on("focus.mainline","#mainline-content",function(){}).on("blur.mainline","#mainline-content",function(){var d=$("#mainline-content").val();
d&&2E3<d.length?f.notify("\u6700\u5927\u957f\u5ea6\u4e0d\u8d85\u8fc72000"):d&&d!=b.mainline.description&&b.change("description",d,function(b){$(a.el).find("#stream").trigger("insertStream",b.stream);f.notify("\u9879\u76ee\u63cf\u8ff0\u5df2\u4fee\u6539")})});e({el:a.el+" #typeahead-manager",callback:function(c){c&&!$.isEmptyObject(c)&&b.changeManager(c.id,a.id,function(b){f.notify("\u8d1f\u8d23\u4eba\u5df2\u4fee\u6539");$(a.el).find("#stream").trigger("insertStream",b.stream);$(a.el+" #mainline-manager").html(f.template("base.user",
c));var g="images/avatar.png",e="";b.mainline&&b.mainline.manager&&(b=b.mainline.manager,e=b.id||"",b.avatar&&(g=b.avatar.p5&&"/base/download/"+b.avatar.p5));g="\x3cimg class\x3d'avatar' src\x3d'"+g+"' /\x3e";d.find("#mainline-manager").find("#"+e+" a").prepend($(g))})}});d.on("click.mainline","#mainline-copy",function(b){(new p({userId:TEAMS.currentUser.id,target:$(this),copyTarget:a})).render()});d.on("click.mainline","#mainline-watch",function(d){"new"!=a.id&&b.watch(function(b,d){b?f.notify("\u5df2\u6dfb\u52a0\u5173\u6ce8"):
f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8");a.renderWatch(b);a.trigger("changeWatch",{id:a.id,watched:b});a.page.trigger("changeWatch",{id:a.id,watched:b});$(a.el).find("#stream").trigger("insertStream",d);$("#left").trigger("refresh","watched")})});d.on("click.mainlinetest","#mainline-icon-div",function(b){3<a.mainline.permission&&(a.avatarView=new r({el:"body",url:a.mainline.icon,id:a.mainline.id,callback:function(b,d){a.avatar=d;a.mainline.avatar=d;a.mainline.icon=b;b!=$(a.el+" .j_goal-icon").find("img").attr("src")&&
($(a.el+" .j_goal-icon").find("img").attr("src",b),a.model.change("icon",b,function(d){f.notify("\u9879\u76ee\u56fe\u6807\u4fee\u6539\u6210\u529f");$(a.el).find("#stream").trigger("insertStream",d.stream);a.page.trigger("sliderChangeAvatar",{id:a.id,image:b})}));a.avatarView&&(a.avatarView.hide(),a.avatarView=null)}}),a.avatarView.render())})},isNew:function(){return"new"==this.id},undelegateEvents:function(){$(this.el).off(".mainline");$(this.el).off(".mainlinetest")},remove:function(){this.undelegateEvents();
$(this.el).find("#mainline-name").trigger("autosize.destroy");$(this.el).find("#mainline-content").trigger("autosize.destroy");this.ShareView&&(this.ShareView.remove(),this.ShareView=null);this.avatarView&&(this.avatarView.remove(),this.avatarView=null);this.tagview&&(this.tagview.remove(),this.tagview=null);this.entityremind&&(this.entityremind.remove(),this.entityremind=null)}});m.exports=h});
define("teams/mainline/mainlinepage",["teams/core/page","teams/mainline/mainlinelistview","teams/views/feedbackview","teams/component/trashbinview","teams/utils"],function(h,q,m){q=h("teams/core/page");var f=h("teams/mainline/mainlinelistview"),e=h("teams/views/feedbackview");h("teams/component/trashbinview");h("teams/utils");h=q.extend({initialize:function(c){this.pageKey=c.pageKey;this.reloadPage=c.reloadPage;this.options=c;this.userId=c.userId;this.template="mainline.page";this.pageActive="mainline";
this.mainlineType=c.mainlineType},delegateEvents:function(){$("#mainContainer")},render:function(){var c=this;this.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,self:!this.options.userId||this.options.userId==TEAMS.currentUser.id},function(){c.renderType()});"feedback"==this.options.filterType?($(".feedback").addClass("active"),this.mainView=new e({container:"#main",showtitle:"0",navs:[".charger",".participants","subordinatemodule"],module:"mainline",moduleName:"\u9879\u76ee",
userId:this.options.userId,showReaded:"1"})):this.mainView=new f(this.options);c._render(".filterType."+(c.options.filterType||"mine"))},renderType:function(){var c="";TEAMS.blogUser?(c="female"==TEAMS.blogUser.sex?"\u5979":"\u4ed6",$("#menu-group-sub li").each(function(){var b=$(this);if(!b.hasClass("sub-indent")){var a=b.data("title");b.hasClass("shareToMe")?b.find(".j_type-name").html("\u5171\u4eab\u7ed9"+c+"\u7684\u9879\u76ee"):b.find(".j_type-name").html(c+a)}})):$("#menu-group-sub li").each(function(){var b=
$(this);if(!b.hasClass("sub-indent")){var a=b.data("title");b.hasClass("mine")?b.find(".j_type-name").html("\u6211"+a):b.hasClass("subordinates")||b.hasClass("all")||b.find(".j_type-name").html(a)}})}});m.exports=h});
define("teams/mainline/mainlinelinkmodel",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.Model.extend({initialize:function(e){this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=(new Date).format("{yyyy}-{MM}-{dd}");this.statisticians=[];this.pageNo=1;this.pageSize=10},mainlineLinkDomain:function(e,c,b,a,d,g){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/mainline/linkDomain.json",type:"POST",dataType:"json",data:'{"filter":'+b+
',"order":'+a+',"id":"'+e+'", "module":"'+c+'","stageFlag":'+d+"}",success:function(a){g&&g(a)}})},mainlineLinkTask:function(e,c,b,a,d){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/mainline/linkDomain.json",type:"POST",dataType:"json",data:'{"filter":'+c+',"order":'+b+',"id":"'+e+'", "module":"task","stageFlag":'+a+"}",success:function(a){d&&d(a)}})},updateStage:function(e,c,b,a){var d={};d["stage.name"]=b;d["stage.id"]=c;d.mainlineId=e;d._method="put";$.ajax({url:"/stage/"+c+".json",
type:"post",dataType:"json",data:d,success:function(b){a&&a(b)}})},loadSearchTasks:function(e,c,b,a,d,g,l,f,k,r){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/querySearchTasks.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,beginDate:this.beginDate,endDate:this.endDate,barType:b,userName:c,taskName:a,seriesName:d,dataName:g,checkDate:l,group:f,statisticians:this.statisticians},pageNo:this.pageNo,pageSize:this.pageSize}),success:function(a){r&&
r(a)}})},loadMainlineTasks:function(e,c,b,a,d,g,l,f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/queryMainlineTasks.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,beginDate:this.beginDate,endDate:this.endDate,barType:b,userName:c,dataName:a,seriesName:d,group:g,checkDate:l,statisticians:this.statisticians},pageSize:this.pageSize,pageNo:this.pageNo}),success:function(a){f&&f(a)}})},queryModelList:function(e,c,b){var a={};a.id=e;a.moduleType=
c;$.ajax({url:"/mainline/queryMainlineModule.json",data:a,type:"post",dataType:"json",success:function(a){b&&b(a)}})},createStage:function(e,c,b){var a={};a["stage.mainlineId"]=e;a["stage.name"]=c;$.ajax({url:"/stage.json",type:"POST",dataType:"json",data:a,success:function(a){b&&b(a)}})},stageTask:function(e,c,b,a){var d={};d.mainlineId=c;d.stageId=b;d["task.name"]=e;$.ajax({url:"/task.json",type:"post",dataType:"json",data:d,success:function(b){a&&a(b)}})},deleteStage:function(e,c,b){var a={};a.mainlineId=
e;a._method="delete";$.ajax({url:"/stage/"+c+".json",type:"post",dataType:"json",data:a,success:function(a){b&&b(a)}})},switchTaskToStage:function(e,c,b,a){var d={};d.id=e;d.targetId=c;d.stageId=b;$.ajax({url:"/mainline/switchTaskToStage.json",type:"post",dataType:"json",data:d,success:function(b){a&&a(b)}})},switchStageSort:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/stage/switchStageSort.json",type:"post",dataType:"json",data:e,success:function(b){c&&c(b)}})},queryTaskUpdate:function(e,
c,b){$.ajax({url:"/mainline/domainUpdate.json",type:"get",dataType:"json",data:{id:e,pageSize:10,pageNo:c},success:function(a){b&&b(a)}})},loadSubordinates:function(e,c){$.ajax({type:"get",url:"/mainline/queryTasksPrimary.json",dataType:"json",data:{id:e},success:function(b){c&&c(b)}})},statisticsByMember:function(e,c,b,a){var d=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsByMember.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,
beginDate:d.beginDate,endDate:d.endDate,statisticians:c,barType:b}}),success:function(b){if(a){var c=d.parseMapToArray(b.statisticsByMember,"x");b=d.parseSeries(b.statisticsByMember);a({xAxis:c,series:b})}}})},statisticsByGroup:function(e,c,b,a){var d=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsByGroup.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,beginDate:d.beginDate,endDate:d.endDate,statisticians:c,barType:b}}),success:function(b){if(a){var c=
d.parseMapToArray(b.statisticsByGroup,"z");b=d.parseSeries(b.statisticsByGroup);a({xAxis:c,series:b})}}})},statisticsDrillByDay:function(e,c,b,a,d){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsDrillByDay.json",dataType:"json",data:JSON.stringify({mainlineFilter:{dataName:a,checkDate:a,mianlineId:e,beginDate:this.beginDate,endDate:this.endDate,statisticians:c,barType:b},pageNo:this.pageNo,pageSize:this.pageSize}),success:function(a){d&&d(a)}})},statisticsByDay:function(e,
c,b,a){var d=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsByDay.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,beginDate:d.beginDate,endDate:d.endDate,statisticians:c,barType:b}}),success:function(b){if(a){null!=b.earliestCreateTime&&(d.beginDate=b.earliestCreateTime);var c=d.xAxis=d.calculateX();b=d.parseDaySeries(b.statisticsByDay);a({xAxis:c,series:b})}}})},statisticsByRank:function(e,c,b,a){var d=this;$.ajax({type:"post",
contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsByRank.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,beginDate:d.beginDate,endDate:d.endDate,statisticians:c,barType:b}}),success:function(b){if(a){var c=d.parseMapToArray(b.statisticsByRank,"x");b=d.parseMapToArray(b.statisticsByRank,"y");a({xAxis:c,series:b})}}})},parseDaySeries:function(e){var c=[{name:"\u8fdb\u884c\u4e2d",type:"bar",data:[]},{name:"\u5df2\u5b8c\u6210",type:"bar",data:[]},{name:"\u65b0\u589e",
type:"bar",data:[]},{name:"\u5ef6\u671f",type:"bar",data:[]}];_.isEmpty(e.doingMap)||(c[0].data=this.parseDayMapToArray(e.doingMap));_.isEmpty(e.finishedMap)||(c[1].data=this.parseDayMapToArray(e.finishedMap));_.isEmpty(e.createdMap)||(c[2].data=this.parseDayMapToArray(e.createdMap));_.isEmpty(e.delayedMap)||(c[3].data=this.parseDayMapToArray(e.delayedMap));return c},parseDayMapToArray:function(e){var c=Array(this.xAxis[0].data.length),b,a;for(a in e)b=this.xAxis[0].data.indexOf(a),c[b]=e[a];return c},
parseSeries:function(e){for(var c=[{name:"\u8fdb\u884c\u4e2d",type:"bar",data:[]},{name:"\u5df2\u5b8c\u6210",type:"bar",data:[]},{name:"\u65b0\u521b\u5efa",type:"bar",data:[]},{name:"\u5ef6\u671f",type:"bar",data:[]}],b=0;b<e.length;b++)c[0].data[b]=e[b].doing,c[1].data[b]=e[b].finished,c[2].data[b]=e[b].created,c[3].data[b]=e[b].delayed;return c},calculateX:function(){var e=[{type:"category",data:[]}];Date.range(this.beginDate,this.endDate).every("day",function(c){e[0].data.push(c.format("{yyyy}-{MM}-{dd}"))});
return e},parseMapToArray:function(e,c){for(var b=Array(e.length),a=0;a<e.length;a++)"x"==c?b[a]=void 0!=e[a].userId&&null!=e[a].userId?e[a].userName+"_,_"+e[a].userId:e[a].userName:"z"==c?void 0!=e[a].groupId&&null!=e[a].groupId&&(b[a]=e[a].groupName+"_,_"+e[a].groupId):b[a]=e[a].rank;return b},statisticsByFinished:function(e,c,b){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/mainline/statisticsByFinished.json",dataType:"json",data:JSON.stringify({mainlineFilter:{mianlineId:e,
beginDate:this.beginDate,endDate:this.endDate,statisticians:c}}),success:function(a){if(b){var d={inner:[{name:"\u5df2\u5b8c\u6210"},{name:"\u5ef6\u671f"},{name:"\u8fdb\u884c\u4e2d"}],outter:[{name:"\u5168\u90e8"}],newOutter:[{name:"\u65b0\u589e"}]};if(a&&a.statisticsByFinished){a=a.statisticsByFinished;for(var c in a)switch(c){case "finished":d.inner[0].value=a[c];break;case "doing":d.inner[2].value=a[c];break;case "delayed":d.inner[1].value=a[c];break;case "manageOrIn":d.outter[0].value=a[c];break;
case "created":d.newOutter[0].value=a[c]}}d.inner[0].value||d.inner[1].value||d.inner[2].value||(d.inner=[]);d.outter[0].value||(d.outter=[]);d.newOutter[0].value||(d.newOutter=[]);b(d)}}})},saveRelevanceTask:function(e,c){$.ajax({url:"/mainline/saveRelevanceTask.json",type:"post",dataType:"json",data:e,success:function(b){c&&c(b)}})},saveRelevanceCustomer:function(e,c){$.ajax({url:"/mainline/saveRelevanceCustomer.json",type:"post",dataType:"json",data:e,success:function(b){c&&c(b)}})},saveConfig:function(e,
c){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/base/configuration/saveConfig.json",dataType:"json",data:JSON.stringify({config:e}),success:function(b){b.actionMsg?f.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):c&&c()}})},updateConfigValue:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/base/configuration/updateConfigValue.json",dataType:"json",data:JSON.stringify({config:e}),
success:function(b){b.actionMsg?f.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):c&&c()}})}});m.exports=h});
define("teams/mainline/mainlinemodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:0,pageSize:20,mainline:{filter:1,status:1},initialize:function(f){f=f||{};this.id=f.id;this.targetId=f.targetId;this._module=f.module},load:function(f){var e=this;$.ajax({type:"get",url:"/mainline/"+e.id+".json",dataType:"json",success:function(c){e.mainline=c.mainline;e.agendas=c.agendas;e.entityRemind=c.entityRemind;e.remindEntryList=c.remindEntryList;f&&f(c)}})},search:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/mainline/search.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},searchCount:function(f,e){$.ajax({type:"post",url:"/mainline/filterTypeCount.json",dataType:"json",data:{userId:f},success:function(c){e&&e(c)}})},query:function(f){var e=this;$.ajax({type:"get",url:"/mainline.json",dataType:"json",data:{pageNo:this.page.pageNo,pageSize:this.page.pageSize,"mainline.filter":this.mainline.filter,"mainline.status":this.mainline.status},success:function(c){e.page=c.page;f&&
f()}})},change:function(f,e,c){var b=this;if(b.id&&f){var a={_method:"put",propertyName:f};a["mainline."+f]=e;$.ajax({type:"post",dataType:"json",url:"/mainline/"+b.id+".json",data:a,success:function(a){b.mainline=a.mainline;c(a)}})}},changeManager:function(f,e,c){var b=this;b.id&&$.ajax({type:"get",dataType:"json",url:"/mainline/updateManager.json",data:{userId:f,id:e},success:function(a){b.mainline=a.mainline;c(a)}})},save:function(f){var e=this;$.ajax({type:"post",url:"/mainline.json",dataType:"json",
data:{"mainline.name":e.mainline.name,targetId:e.targetId,module:e._module},success:function(c){e.mainline=c.mainline;e.id=c.mainline.id;f&&f(c)}})},link:function(f,e,c){var b={};b.targetId=this.targetId;b.module=this._module;e?b.ids=f:b.id=f.id;$.ajax({url:"/mainline/link.json",type:"post",dataType:"json",data:b,success:function(a){c&&c(a)}})},linkAgenda:function(f,e,c,b){var a={};a.targetId=e;c?a.ids=f:a.id=f;$.ajax({url:"/mainline/linkAgenda.json",type:"post",dataType:"json",data:a,success:function(a){b&&
b(a)}})},find:function(f,e){$.ajax({url:"/mainline/find.json",type:"get",dataType:"json",data:{targetId:f},success:function(c){e&&e(c.list)}})},delt:function(f){$.ajax({type:"post",data:{_method:"delete"},url:"/mainline/"+this.id+".json",dataType:"json",success:function(e){f&&f(e)}})},watch:function(f){var e=this.mainline,c={module:"mainline"};c._method=e.watched?"DELETE":"PUT";$.ajax({type:"post",dataType:"json",url:"/watch/"+this.id+".json",data:c,success:function(b){e.watched=!e.watched;b=b.stream;
f&&f(e.watched,b)}})},isGranted:function(f,e){$.ajax({type:"post",dataType:"json",url:"/share/read.json",data:f,success:function(c){e&&e(c)}})},cut:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/mainline/cut.json",dataType:"json",data:'{"imageArea":{"id":'+f.id+',"x":'+f.x+',"y":'+f.y+',"width":'+f.width+',"height":'+f.height+"}}",success:function(c){e&&e(c)}})},saveConfig:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/base/configuration/saveConfig.json",
dataType:"json",data:JSON.stringify({config:f}),success:function(c){c.actionMsg?Utils.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):e&&e()}})}});m.exports=h});
define("teams/mainline/mainlineavatar",["teams/utils","teams/mainline/mainlinemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlinemodel");h=Backbone.View.extend({imageArea:{},initialize:function(c){this.userId=c.userId||TEAMS.currentUser.id;this.callback=c.callback;this.el=c.el?c.el:"body";this.model=new e;this.imageArea={};this.url=c.url;this.id=c.id;$(this.el).append(f.template("mainline.mainlineavatar"));this.container=$("#mainline-avatar")},delegateEvents:function(){var c=
this;$(c.el).on("click.mainlineavatar",".j_goal-icon-lib li",function(b){b=$(this).find("img").attr("src");$(c.el).find("#seleted-icon").attr("src",b)});$(c.el).on("click.mainlineavatar","#local-icon-add",function(b){$(c.el).find("#default-imgs").addClass("hide");$(c.el).find("#local-imgs").removeClass("hide");c.avatar&&($(c.el).find("#fileObjId").data("fileObjId",c.avatar.p1),$(c.el).find("#avatarId").data("avatar",c.avatar),c.initImg?$(c.el).find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection():
c.initImgSelect())});$(c.el).on("click.mainlineavatar","#back-to-default",function(b){$(c.el).find("#default-imgs").removeClass("hide");$(c.el).find("#local-imgs").addClass("hide")});$(c.el).on("click.mainlineavatar","#save-choose-img",function(b){c.initImg&&$(c.el).find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection();if(c.callback){b=$(c.el).find("#avatarId").data("avatar");var a=$(c.el).find("#seleted-icon").attr("src");c.callback(a,b)}else $("#mainline-avatar").modal("hide")});
$(c.el).on("click.mainlineavatar","#avatar-cut",function(b){var a=$(c.el);c.imageArea.id=a.find("#avatar").val();c.model.cut(c.imageArea,function(b){a.find("#back-to-default").removeClass("hide").html("\u786e\u5b9a");a.find("#avatar-cut").addClass("hide");a.find("#seleted-icon").attr("src","/base/download/"+b.fileObj.id);a.find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection();f.notify("\u526a\u88c1\u6210\u529f!")})});$(c.el).on("click","#close-botton",function(b){$("#mainline-avatar").modal("hide")});
$("#mainline-avatar").on("hidden.bs.modal",function(b){c.remove()});$("body").on("keydown.mainlineavatar",function(b){27==b.which&&$("#mainline-avatar").modal("hide")})},render:function(){var c=this.container,b=this;$("#mainline-avatar").modal("toggle");b.id&&$(b.el).find("#seleted-icon").attr("src",b.url);b.avatar&&($(b.el).find("#avatar-img").attr("src","/base/download/"+b.avatar.p1),$(b.el).find("#avatar-img-preview").attr("src","/base/download/"+b.avatar.p2),$(b.el).find("#avatar-img").removeClass("hide"),
$(b.el).find("#avatar-note").addClass("hide"));b.uploader(function(a){c.find("#avatar").val(a.id);c.find(".avatar-note").addClass("hide");c.find("img.avatar-img").attr("src","/base/download/"+a.id).removeClass("hide");c.find("#cut-title").removeClass("hide");c.find(".avatar-preview-wrapper").removeClass("hide");c.find(".avatar-img-preview").attr("src","/base/download/"+a.id).removeClass("hide");b.initImg?c.find("img.avatar-img").imgAreaSelect({instance:!0}).cancelSelection():b.initImgSelect();f.notify("\u4e0a\u4f20\u6210\u529f\uff0c\u62d6\u52a8\u56fe\u7247\u88c1\u526a")})},
uploader:function(c){var b=this,a=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:b.el,max_file_size:"2mb",multi_selection:!1,browse_button:b.el+" .avatar-upload",url:"/mainline/upload.json?ETEAMSID\x3d"+ETEAMSID,filters:[{title:"Image files",extensions:"jpg,jpeg,png,gif"}],flash_swf_url:"js/plupload.swf"});a.init();a.bind("FilesAdded",function(a,c){a.refresh();$(b.el).find("#avatar-note").addClass("hide");$(b.el).find("#avatar-img").removeClass("hide");b.id&&
(a.settings.url="/mainline/upload/"+b.id+".json?ETEAMSID\x3d"+ETEAMSID);a.start()});a.bind("UploadProgress",function(a,b){});a.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc72M,\u6700\u5c0f5b,\u540e\u7f00\u4e3ajpg,jpeg,png,gif\u7684\u56fe\u7247\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});a.bind("FileUploaded",function(a,g,e){a=jQuery.parseJSON(e.response).fileObj;b.id=a.id;c&&c(a)});b.uploader=a},
initImgSelect:function(){var c=this,b=$(c.el);b.find("img.avatar-img").imgAreaSelect({parent:c.el,minHeight:120,minWidth:120,aspectRatio:"1:1",handles:!0,fadeSpeed:200,onSelectStart:function(){b.find(".avatar-preview-wrapper").removeClass("hide");b.find("#avatar-cut").removeClass("hide");b.find("#back-to-default").addClass("hide")},onSelectChange:function(a,d){if(d.width&&d.height){b.find("img.avatar-img-preview").attr("src",b.find("img.avatar-img").attr("src"));var c=120/(d.width||1),e=120/(d.height||
1),f=b.find("img.avatar-img").width(),k=b.find("img.avatar-img").height();b.find("img.avatar-img-preview").css({width:Math.round(c*f)+"px",height:Math.round(e*k)+"px",marginLeft:"-"+Math.round(c*d.x1)+"px",marginTop:"-"+Math.round(e*d.y1)+"px"})}},onSelectEnd:function(a,b){c.imageArea.x=b.x1;c.imageArea.y=b.y1;c.imageArea.width=b.width;c.imageArea.height=b.height}});c.initImg=!0},hide:function(){$("#mainline-avatar").modal("hide")},remove:function(){this.uploader?this.uploader.destroy():"";var c=
$("#mainline-avatar").find("img.avatar-img").imgAreaSelect({instance:!0});c?c.remove():"";$(this.el).off(".mainlineavatar");$("#mainline-avatar").remove()}});m.exports=h});
define("teams/mainline/mainlinecopyview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.userId=e.userId||TEAMS.currentUser.id;this.target=e.target||"";this.copyTarget=e.copyTarget;this.el=".j_item_copy";$("body").append(f.template("mainline.mainlinecopy"));$("#mainline-copy-model").modal()},delegateEvents:function(){var e=this,c=$(e.el);$("#mainline-copy-model").on("hidden.bs.modal.MainlineCopy",function(){e.remove()});c.off("click.MainlineCopy",
".j_more_copy").on("click.MainlineCopy",".j_more_copy",function(b){$(this).addClass("hide");c.find(".j_moreitems_copy").show().end().find(".j_hidden_more_div").removeClass("hide")});c.off("click.MainlineCopy",".j_hidden_more_div").on("click.MainlineCopy",".j_hidden_more_div",function(b){$(this).addClass("hide");c.find(".j_moreitems_copy").hide().end().find(".j_more_copy").removeClass("hide")});c.off("click.MainlineCopy",".j_save_copy").on("click.MainlineCopy",".j_save_copy",function(b){if(!$(this).data("submit")){var a=
$(this);a.data("submit",!0);var d=c.find(".j_title").val();if(""!=$.trim(d))if(100<$.trim(d).length)f.notify("\u9879\u76ee\u540d\u5b57\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57"),a.data("submit",!1);else{var g=e.copyTarget;if(g){$(e.el+" #copy-loading").removeClass("hide").siblings(".j_mainlinecopy_body").removeClass("hide");var l=g.mainline,n="",k="";b="";l&&(n=l.description,k=l.icon,b=l.id);var d=d.replace(/[\r]/g,"\\r").replace(/[\n]/g,"\\n").replace(/["]/g,'\\"').replace(/[']/g,"\\'"),n=$(g.el).find("#mainline-content").val(),
n=n.replace(/[\r]/g,"\\r").replace(/[\n]/g,"\\n").replace(/["]/g,'\\"').replace(/[']/g,"\\'"),l=[],r=[];r.push(TEAMS.currentUser.id);l.push(r);var l=e.isChecked(e.el+" .j_mainline_manager")?e.findSeletedTarget(g.el+" #mainline-manager",null,!1):l,r=e.isChecked(e.el+" .j_mainline_participant")?e.findSeletedTarget(g.el+" #participants",null,!0):[],p=e.isChecked(e.el+" .j_mainline_share")?e.findSeletedTarget(g.el+" #shareentrys",null,!0):[],s=e.findSeletedTarget(g.el+" #mainline-ctags",null,!1),h=e.findSeletedTarget(g.el+
" #other-relevance-mainline",null,!1),d='{"mainline":{"name":"'+d+'","description":"'+n+'","icon":"'+k+'"}',n=e.isChecked(e.el+" .j_relevance_document")?"true":"false",k=e.isChecked(e.el+" .j_relevance_workflow")?"true":"false",w=e.isChecked(e.el+" .j_relevance_customer")?"true":"false",v=e.isChecked(e.el+" .j_task_manager")?"true":"false",x=e.isChecked(e.el+" .j_task_participants")?"true":"false",y=e.isChecked(e.el+" .j_task_shares")?"true":"false",g=e.findSeletedTarget(g.el+" #mainline-agendas",
null,!1),d=d+e.arrayToJson("manager",l),d=d+e.arrayToJson("participants",r),d=d+e.arrayToJson("tags",s),d=d+e.arrayToJson("shares",p),d=d+e.arrayToJson("mainlineIds",h),d=d+e.arrayToJson("agendaIds",g),g="copyMainline\x3dtrue,copyDocument\x3d"+n+",copyWorkflow\x3d"+k+",copyCustomer\x3d"+w+",copyTaskManager\x3d"+v+",copyTaskParticipants\x3d"+x+",copyTaskShares\x3d"+y+",copyRelevanceMainline\x3dtrue",g=g+",copyRelevanceTask\x3dtrue",g=g+",copyRelevanceDocument\x3dtrue",g=g+",copyRelevanceCustomer\x3dtrue",
g=g+",copyRelevanceWorkflow\x3dtrue",g=g+",copyRelevanceCalendar\x3dtrue",d=d+(',"copyTargetId":"'+b+'"')+(',"copyDetailStr":"'+g+'"'),d=d+"}";$(this).attr("disabled",!0);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/mainline.json",dataType:"json",data:d,success:function(b){$(e.el+" #copy-loading").addClass("hide").siblings(".j_mainlinecopy_body").addClass("hide");f.notify("\u9879\u76ee\u590d\u5236\u6210\u529f");$(this).attr("disabled",!1);a.data("submit",!1);$("#mainline-copy-model").modal("hide");
ROUTER.app.lastPage&&("mainline"==ROUTER.app.lastPage.pageKey?ROUTER.app.lastPage.mainView.insertMainline(b.mainline):-1<ROUTER.app.lastPage.pageKey.indexOf("mainlinelinkpage#")&&ROUTER.app.lastPage.mainView.insertMainline(b.mainline))}})}else a.data("submit",!1)}else f.notify("\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u5b57"),a.data("submit",!1),c.find(".j_title").focus()}})},render:function(){var e=this;$(e.el).find(".j_moreitems_copy").hide();var c=e.copyTarget;setTimeout(function(){$(e.el).find(".j_title").focus();
$(e.el).find(".j_title").val($(c.el+" #mainline-name").val()||"")},500)},isChecked:function(e){var c=!1;if(!e)return c;$(e).is(":checked")&&(c=!0);return c},findSeletedTarget:function(e,c,b){var a=this,d=[];$(e).find(".entity-item").each(function(){d=a.fillObj($(this),d,b)});c&&$(c).find(".entity-item").each(function(){d=a.fillObj($(this),d,b)});return d},fillObj:function(e,c,b){var a=e.find("a").attr("data-value");b&&(a=e.find("a").attr("userid"));e=[];e.push(a);c.push(e);return c},arrayToJson:function(e,
c){if(!c||1>c.length)return"";for(var b=',"'+e+'":[',a=0;a<c.length-1;a++)b+='"'+c[a][0]+'",';return b+='"'+c[c.length-1][0]+'"]'},undelegateEvents:function(){$(this.el).off(".MainlineCopy")},remove:function(){$(this.el).off(".MainlineCopy");$("#mainline-copy-model").remove();$("#mainline-copy-model").off(".bs.modal");$("#mainline-copy-model").off(".MainlineCopy")}});m.exports=h});
define("teams/mainline/mainlinestatisticview","teams/utils teams/mainline/mainlinelinkmodel teams/mainline/mainlinemodel teams/mainline/mainlineavatar teams/component/userselector teams/component/entityselector teams/mainline/mainlinenew teams/mainline/mainlineview teams/component/typeahead teams/component/filter teams/component/entityslider teams/mainline/mainlineblogview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/mainline/mainlinelinkmodel");h("teams/mainline/mainlinemodel");
h("teams/mainline/mainlineavatar");h("teams/component/userselector");h("teams/component/entityselector");h("teams/mainline/mainlinenew");h("teams/mainline/mainlineview");var c=h("teams/component/typeahead");h("teams/component/filter");var b=h("teams/component/entityslider");h("teams/mainline/mainlineblogview");q=Backbone.View.extend({initialize:function(a){this.el=a.container||"#main";this.mainlinelinkmodel=new e;this.id=a.id},delegateEvents:function(){var a=this;$el=$("#mainContainer");$el.off("click.mainlinelink",
"#statisticians-list span a").on("click.mainlinelink","#statisticians-list span a",function(b){a.refreshStatisticians(b);b.stopPropagation()});$el.off("click.mainlinelink","#statisticians .close").on("click.mainlinelink","#statisticians .close",function(b){var c=a.mainlinelinkmodel;b=$(b.target).siblings().attr("data-id");$('#statisticians-list a[data-id\x3d"'+b+'"]').removeClass("checked");-1<c.statisticians.indexOf(b)&&c.statisticians.remove(b)});$el.on("click.mainlinelink",".j_time a",function(b){b=
$(b.target);var c=a.mainlinelinkmodel;switch(b.attr("data")){case "thisWeek":c.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":c.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":c.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");
break;case "lastMonth":c.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),c.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}$("#begin-date").val(c.beginDate);$("#end-date").val(c.endDate)});$el.off("click.mainlinelink","#barType a").on("click.mainlinelink","#barType a",function(b){var c=a.id;$(this).addClass("active btn-primary").siblings().removeClass("active btn-primary");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.rankChart&&
($(window).off("resize",a.rankChart.resize),a.rankChart.dispose(),a.rankChart=null);var b=a.tasksPrimaryCount(),d=$("#barType").children(".active").attr("value");a.initRankCharts(c);a.loadRankCharts(c,b,d)})});$el.off("click.mainlinelink","#detailBarType a").on("click.mainlinelink","#detailBarType a",function(b){var c=$(this).attr("value"),e=a.id;$(this).addClass("active btn-primary").siblings().removeClass("active btn-primary");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.memberChart&&
($(window).off("resize",a.memberChart.resize),a.memberChart.dispose(),a.memberChart=null);a.groupChart&&($(window).off("resize",a.groupChart.resize),a.groupChart.dispose(),a.groupChart=null);a.dayChart&&($(window).off("resize",a.dayChart.resize),a.dayChart.dispose(),a.dayChart=null);var b=a.tasksPrimaryCount();"member"==c&&($("#tableDiv").addClass("hide"),a.initMemberCharts(e),a.loadMemberCharts(e,b,c));"group"==c&&($("#tableDiv").addClass("hide"),a.initGroupCharts(e),a.loadGroupCharts(e,b,c));"date"==
c&&(a.initDayChart(e),a.loadDayChart(e,b,c))})});$el.off("click.mainlinelink",".drillDate").on("click.mainlinelink",".drillDate",function(d){d=a.id;var c=$("#date").html(),e=$(this).attr("group"),f=$(this).attr("user");a.entitySlider&&a.entitySlider.remove();(new b({module:"mainlineTaskList",userName:f,mainlineId:d,barType:"day",checkDate:c,group:e})).render()})},permissionEvents:function(){var a=this;$("#mainContainer");a.$el.off("click.mainlinelink","#statisticians-list span a").on("click.mainlinelink",
"#statisticians-list span a",function(b){a.refreshStatisticians(b);b.stopPropagation()});a.$el.off("click.mainlinelink","#statisticians .close").on("click.mainlinelink","#statisticians .close",function(b){var c=a.mainlinelinkmodel;b=$(b.target).siblings().attr("data-id");a.$el.find('#statisticians-list a[data-id\x3d"'+b+'"]').removeClass("checked");-1<c.statisticians.indexOf(b)&&c.statisticians.remove(b)});a.$el.on("click.mainlinelink",".j_time a",function(b){b=$(b.target);var c=a.mainlinelinkmodel;
switch(b.attr("data")){case "thisWeek":c.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":c.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":c.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");
break;case "lastMonth":c.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),c.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}a.$el.find("#begin-date").val(c.beginDate);a.$el.find("#end-date").val(c.endDate)})},render:function(){$(this.el).find(".j_mainline_view").attr("data-id",this.id);$(this.el).find(".j_mainline_head_title").attr("data-id",this.id);switch(this.module){case "task":this.renderTask();break;case "mainlineblog":this.renderMainlineBlog();
break;case "document":case "workflow":case "customer":this.renderDomain(this.id,this.module,null,!0)}this.renderMainline(this.id);this.renderCount();if("mine"==this.filterType||"mineManager"==this.filterType||"mineParticipants"==this.filterType)$(this.el).find(".j_mineType").removeClass("hide-im"),$(this.el).find("#projectClass").html(""),$(this.el).find("#projectClass").parent().find(".graph").hide();"subordinates"===this.filterType&&$(this.el).find("#projectClass").html("\u4e0b\u5c5e\u9879\u76ee");
"watched"===this.filterType&&$(this.el).find("#projectClass").html("\u5173\u6ce8\u7684\u9879\u76ee");"shareToMe"===this.filterType&&$(this.el).find("#projectClass").html("\u5171\u4eab\u7ed9\u6211\u7684\u9879\u76ee");"mineCreate"===this.filterType&&$(this.el).find("#projectClass").html("\u521b\u5efa\u7684\u9879\u76ee");"finished"===this.filterType&&$(this.el).find("#projectClass").html("\u5df2\u5173\u95ed\u7684\u9879\u76ee");"all"===this.filterType&&$(this.el).find("#projectClass").html("\u5168\u90e8\u9879\u76ee");
$(".j_pageActive li a").removeClass("active");$(".j_pageActive li").find("#menu-mainline").addClass("active")},tasksPrimaryCount:function(){var a=[];$("#statisticians").find("a").each(function(){var b=$(this).attr("data-id");a.push(b)});return a},renderMainlineDetail:function(){var a=f.template("mainline.statistics"),b=this,c=b.mainlinelinkmodel,e=b.id;b.$el.find(".j_search-task").addClass("hide");b.$el.find("ul.j_subtab-toolkit").addClass("hide");b.$el.find("#mainlinelink-list-container").addClass("hide");
b.$el.find("#goals-state-group").addClass("hide");b.$el.find("#mainline-view").addClass("hide");b.$el.find("#other-blogs-container").removeClass("hide");b.$el.find("#other-blogs-container").empty();b.$el.find("#other-blogs-container").append(a);c.loadSubordinates(e,function(a){b.renderStatisticians(a.tasksPrimaryList)});$("#barType").attr("mainlineId",e);b.initComponents();h.async("https://static.eteams.cn/js/echarts.min.js",function(){b.initFinishCharts(e);b.loadFinishChart(e,void 0);var a=$("#barType  option:selected").attr("value");
b.initRankCharts(e);b.loadRankCharts(e,void 0,a);a=$("#detailBarType  option:selected").attr("value");b.initMemberCharts(e);b.loadMemberCharts(e,void 0,a)});f.layout("#taskreportview")},initComponents:function(){var a=this,b=a.mainlinelinkmodel;f.datepicker([{el:"#begin-date",callback:function(c){var e;e=null!=c.date?c.date.format("{yyyy}-{MM}-{dd}"):"";a.isBefore(e,b.endDate)?b.beginDate=e:c.target.value=null},endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(c){var e;
e=null!=c.date?c.date.format("{yyyy}-{MM}-{dd}"):b.endDate;a.isBefore(b.beginDate,e)?b.endDate=e:c.target.value=null},endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);$("#begin-date").val(b.beginDate);$("#end-date").val(b.endDate);c({el:"#employees-list",callback:function(b){b&&a.updateStatisticians(b)}})},isBefore:function(a,b){if(a&&b){if(Date.create(a).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");return!1}return!0},
initFinishCharts:function(a){var d=this,c;c=d.finishChart=echarts.init(document.getElementById("finish-chart"),"macarons");$(window).on("resize",c.resize);d.finishChart.on(echarts.config.EVENT.CLICK,function(c){var g=c.name,e=d.tasksPrimaryCount(),g="\u5168\u90e8"==c.name?"all":"\u5ef6\u671f"==c.name?"delayed":"\u5df2\u5b8c\u6210"==c.name?"finished":"doing";d.entitySlider&&d.entitySlider.remove();(new b({module:"mainlineTaskList",mainlineId:a,group:g,barType:"mainlineState",idList:e})).render()})},
initDayChart:function(a){var b=this;a=b.dayChart=echarts.init(document.getElementById("detail-chart"),"macarons");b.dayChart.on(echarts.config.EVENT.CLICK,function(a){$("#tableDiv").removeClass("hide");$("#detailBarType").children(".active").attr("value");var c=a.name;b.tasksPrimaryCount();parseInt(c.substr(a.name.length-2,a.name.length));b.renderTable(c);$("#tableDiv").removeClass("hide");$("#mainlinelink-statistics-container").mCustomScrollbar("scrollTo","bottom")});$(window).on("resize",a.resize)},
renderTable:function(a){var b=this.mainlinelinkmodel,c=$("#detailBarType  option:selected").attr("value"),e=this.id,f=this.tasksPrimaryCount();b.statisticsDrillByDay(e,f,c,a,function(b){var d=b.statisticsDrillByDay.created,c=b.statisticsDrillByDay.finished,g=b.statisticsDrillByDay.doing,h=b.statisticsDrillByDay.delayed,w=g[g.length-1].sum,v=c[c.length-1].sum,x=d[d.length-1].sum,y=h[h.length-1].sum;b=b.tasksPrimaryList;void 0==w&&(w=0);void 0==v&&(v=0);void 0==x&&(x=0);void 0==y&&(y=0);$("#date").text(a);
$("#doing").find("a").html(w);$("#doing").attr("group","doing");$("#doing").attr("mainlineId",e);$("#doing").attr("data-id",e);$("#doing").attr("checkDate",a);$("#doing").attr("barType","day");$("#doing").attr("idList",f);$("#doing").attr("data-module","mainlineTaskList");$("#doing").addClass("j_entityslider-toggle");$("#finished").find("a").html(v);$("#finished").attr("group","finished");$("#finished").attr("data-id",e);$("#finished").attr("mainlineId",e);$("#finished").attr("checkDate",a);$("#finished").attr("barType",
"day");$("#finished").attr("idList",f);$("#finished").attr("data-module","mainlineTaskList");$("#finished").addClass("j_entityslider-toggle");$("#created").find("a").html(x);$("#created").attr("group","created");$("#created").attr("data-id",e);$("#created").attr("mainlineId",e);$("#created").attr("checkDate",a);$("#created").attr("idList",f);$("#created").attr("barType","day");$("#created").attr("data-module","mainlineTaskList");$("#created").addClass("j_entityslider-toggle");$("#delayed").find("a").html(y);
$("#delayed").attr("group","delayed");$("#delayed").attr("data-id",e);$("#delayed").attr("idList",f);$("#delayed").attr("mainlineId",e);$("#delayed").attr("checkDate",a);$("#delayed").attr("barType","day");$("#delayed").attr("data-module","mainlineTaskList");$("#delayed").addClass("j_entityslider-toggle");$("#dateTableDiv").empty();for(w=0;w<d.length-1;w++){for(var z,v=0;v<b.length;v++)d[w].userId==b[v].id&&(z="\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d'cs-p usercard-toggle' userid\x3d"+d[w].userId+"\x3e"+
b[v].userName+"\x3c/span\x3e\x3c/td\x3e");z=z+"\x3ctd\x3e\x3ca group\x3d'doing' idList\x3d"+f+" checkDate\x3d'"+a+"' barType\x3d'day' mainlineId\x3d'"+e+"' data-id\x3d'"+e+"' data-module\x3d'mainlineTaskList' userName\x3d'"+d[w].userId+"' class\x3d'j_entityslider-toggle doing'\x3e"+g[w].COUNT+"\x3c/a\x3e\x3c/td\x3e";z=z+"\x3ctd\x3e\x3ca group\x3d'finished' idList\x3d"+f+" checkDate\x3d'"+a+"' barType\x3d'day' mainlineId\x3d'"+e+"' data-id\x3d'"+e+"' data-module\x3d'mainlineTaskList' userName\x3d'"+
d[w].userId+"' class\x3d'j_entityslider-toggle finished'\x3e"+c[w].COUNT+"\x3c/a\x3e\x3c/td\x3e";z=z+"\x3ctd\x3e\x3ca group\x3d'created' idList\x3d"+f+" checkDate\x3d'"+a+"' barType\x3d'day' mainlineId\x3d'"+e+"' data-id\x3d'"+e+"' data-module\x3d'mainlineTaskList' userName\x3d'"+d[w].userId+"' class\x3d'j_entityslider-toggle created'\x3e"+d[w].COUNT+"\x3c/a\x3e\x3c/td\x3e";z=z+"\x3ctd\x3e\x3ca group\x3d'delayed' idList\x3d"+f+" checkDate\x3d'"+a+"' barType\x3d'day' mainlineId\x3d'"+e+"' data-id\x3d'"+
e+"' data-module\x3d'mainlineTaskList' userName\x3d'"+d[w].userId+"' class\x3d'j_entityslider-toggle delayed'\x3e"+h[w].COUNT+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";$("#dateTableDiv").append(z)}})},initRankCharts:function(a){var d=this;d.rankChart=echarts.init(document.getElementById("rank-chart"),"macarons");d.rankChart.on(echarts.config.EVENT.CLICK,function(c){var e=$("#barType ").children(".active").attr("value");c=c.name.split("_,_")[1];var f=d.tasksPrimaryCount();d.entitySlider&&d.entitySlider.remove();
(new b({module:"mainlineTaskList",userName:c,mainlineId:a,barType:e,idList:f})).render()});$(window).on("resize",d.rankChart.resize);$("#rank-chart").on("resize",d.rankChart.resize)},rankChartBasicOption:{tooltip:{show:!0,formatter:function(a){var b=a[1].split("_,_");return a[0]+"\x3cbr\x3e"+b[0]+":"+a[2]}},noDataLoadingOption:{text:"\u6682\u65e0\u6570\u636e",effect:"bubble",effectOption:{effect:{n:0}},textStyle:{color:"#999",fontSize:24}},color:["#2DC3E8"],xAxis:[{type:"category",data:"\u9ec4\u5b9d \u6768\u575a \u738b\u6000\u5b87 \u738b\u51b2 \u5218\u534e \u82cf\u5148\u6d77".split(" "),
axisLabel:{formatter:function(a){return a.split("_,_")[0]}}}],yAxis:[{type:"value"}],series:[{barWidth:35,name:"\u4efb\u52a1\u6570",type:"bar",data:[5,20,40,10,10,20]}]},rankChart:null,initMemberCharts:function(a){var d=this,c;c=d.memberChart=echarts.init(document.getElementById("detail-chart"),"macarons");d.memberChart.on(echarts.config.EVENT.CLICK,function(c){var g=$("#detailBarType").children(".active").attr("value"),e=c.name.split("_,_")[1],f=c.name;c=c.seriesName;var p=d.tasksPrimaryCount();
c="\u8fdb\u884c\u4e2d"==c?"doing":"\u5df2\u5b8c\u6210"==c?"finished":"\u5ef6\u671f"==c?"delayed":"add";d.entitySlider&&d.entitySlider.remove();(new b({module:"mainlineTaskList",userName:e,dataName:f,mainlineId:a,seriesName:c,barType:g,idList:p})).render()});$(window).on("resize",c.resize)},dayChartBasicOption:{tooltip:{trigger:"item"},legend:{textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"},data:["\u8fdb\u884c\u4e2d","\u5df2\u5b8c\u6210","\u65b0\u589e","\u5ef6\u671f"]},noDataLoadingOption:{text:"\u6682\u65e0\u6570\u636e",
effect:"bubble",effectOption:{effect:{n:0}},textStyle:{color:"#999",fontSize:24}},calculable:!0,toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:0,end:100},yAxis:[{type:"value"}],color:["#87DFFD","#FFDD7A","#e2aad5","#FF6A6A"]},dayChart:null,memberChartBasicOption:{tooltip:{show:!0,formatter:function(a){var b=a[1].split("_,_");return a[0]+"\x3cbr\x3e"+b[0]+":"+a[2]}},noDataLoadingOption:{text:"\u6682\u65e0\u6570\u636e",
effect:"bubble",effectOption:{effect:{n:0}},textStyle:{color:"#999",fontSize:24}},dataZoom:{show:!0,showDetail:!1,start:0,end:100},toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},color:["#87DFFD","#FFDD7A","#e2aad5","#FF6A6A"],legend:{orient:"horizontal",x:"center",y:"top",textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif",color:"#333"},data:["\u8fdb\u884c\u4e2d","\u5df2\u5b8c\u6210","\u65b0\u589e","\u5ef6\u671f"]},xAxis:[{type:"category",
data:"\u9ec4\u5b9d \u6768\u575a \u738b\u6000\u5b87 \u738b\u51b2 \u5218\u534e \u82cf\u5148\u6d77".split(" "),axisLabel:{formatter:function(a){return a.split("_,_")[0]}}}],yAxis:[{type:"value"}],series:[{name:"\u8fdb\u884c\u4e2d",type:"bar",data:[5,20,40,10,10,20]},{name:"\u5df2\u5b8c\u6210",type:"bar",data:[4,19,39,9,9,19]},{name:"\u65b0\u589e",type:"bar",data:[6,21,41,11,11,21]},{name:"\u5ef6\u671f",type:"bar",data:[7,22,42,12,12,22]}]},memberChart:null,initGroupCharts:function(a){var d=this,c;c=
d.groupChart=echarts.init(document.getElementById("detail-chart"),"macarons");d.groupChart.on(echarts.config.EVENT.CLICK,function(c){var g=$("#detailBarType").children(".active").attr("value"),e=c.name.split("_,_")[1];c=c.seriesName;var f=d.tasksPrimaryCount();c="\u5df2\u5b8c\u6210"==c?"finished":"\u65b0\u589e"==c?"add":"\u8fdb\u884c\u4e2d"==c?"doing":"delayed";d.entitySlider&&d.entitySlider.remove();(new b({module:"mainlineTaskList",userName:null,dataName:e,seriesName:c,mainlineId:a,barType:g,idList:f})).render()});
$(window).on("resize",c.resize)},groupChartBasicOption:{tooltip:{show:!0,formatter:function(a){var b=a[1].split("_,_");return a[0]+"\x3cbr\x3e"+b[0]+":"+a[2]}},noDataLoadingOption:{text:"\u6682\u65e0\u6570\u636e",effect:"bubble",effectOption:{effect:{n:0}},textStyle:{color:"#999",fontSize:24}},dataZoom:{show:!0,showDetail:!1,start:0,end:100},toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},color:["#87DFFD","#FFDD7A","#e2aad5","#FF6A6A"],legend:{orient:"horizontal",
x:"center",y:"top",textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif",color:"#333"},data:["\u8fdb\u884c\u4e2d","\u5df2\u5b8c\u6210","\u65b0\u589e","\u5ef6\u671f"]},xAxis:[{type:"category",data:["\u8ba1\u5212\u4e2d","\u51c6\u5907\u505a","\u6b63\u5728\u505a","\u672a\u5206\u7ec4"],axisLabel:{formatter:function(a){a=a.split("_,_")[0].split("");for(var b="",c=1;c<=a.length;c++)4>=c&&(b+=a[c-1]);4<a.length&&(b+="...");return b}}}],yAxis:[{type:"value"}],series:[{name:"\u8fdb\u884c\u4e2d",type:"bar",
data:[5,20,40,10]},{name:"\u5df2\u5b8c\u6210",type:"bar",data:[4,19,39,9]},{name:"\u65b0\u589e",type:"bar",data:[6,21,41,11]},{name:"\u5ef6\u671f",type:"bar",data:[7,22,42,12]}]},groupChart:null,finishChartBasicOption:{title:{show:!0,text:"\u9879\u76ee\u5b8c\u6210\u72b6\u51b5",x:"center",y:0,textStyle:{color:"#666"}},legend:{orient:"horizontal",x:"center",y:200,textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif",color:"#333"},data:["\u5168\u90e8","\u5df2\u5b8c\u6210","\u8fdb\u884c\u4e2d","\u5ef6\u671f"]},
tooltip:{show:!0,formatter:"{a} \x3cbr\x3e {b}  {c} | {d}%"},noDataLoadingOption:{text:"\u6682\u65e0\u6570\u636e",effect:"bubble",effectOption:{effect:{n:0}},textStyle:{color:"#999",fontSize:24}},color:["#c29bfa","#FFDD7A","#87DFFD","#FF6A6A"],series:[{name:"\u9879\u76ee\u5b8c\u6210\u72b6\u51b5",type:"pie",center:["50%",110],radius:[0,45],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5df2\u5b8c\u6210",value:150},{name:"\u5ef6\u671f",value:120},{name:"\u8fdb\u884c\u4e2d",
value:30}]},{name:"\u9879\u76ee\u5b8c\u6210\u72b6\u51b5",type:"pie",center:["50%",110],radius:[60,70],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5168\u90e8",value:300}]}]},finishChart:null,loadFinishChart:function(a,b){var c=this,e=c.mainlinelinkmodel;if(c.finishChart){var n=c.finishChart;n.showLoading({effect:"spin"});e.statisticsByFinished(a,b,function(b){var d=c.tasksPrimaryCount();void 0!=b.newOutter[0]?$("#newTasks").html(b.newOutter[0].value):$("#newTasks").html("0");
$("#newTasks").attr("idList",d);$("#newTasks").attr("mainlineId",a);$("#newTasks").attr("data-id",a);$("#newTasks").attr("data-module","mainlineTaskList");n.hideLoading();c.finishChartBasicOption.series[0].data=b.inner;c.finishChartBasicOption.series[1].data=b.outter;n.setOption(c.finishChartBasicOption,!0)})}else f.alert("\u5b8c\u6210\u60c5\u51b5\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},loadRankCharts:function(a,b,c){var e=this,n=e.mainlinelinkmodel;if(e.rankChart){var k=e.rankChart;
k.showLoading({effect:"spin"});n.statisticsByRank(a,b,c,function(a){k.hideLoading();e.rankChartBasicOption.xAxis[0].data=a.xAxis;e.rankChartBasicOption.series[0].data=a.series;k.setOption(e.rankChartBasicOption,!0)})}else f.alert("\u4efb\u52a1\u6392\u540d\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},loadGroupCharts:function(a,b,c){var e=this,n=e.mainlinelinkmodel;if(e.groupChart){var k=e.groupChart;k.showLoading({effect:"spin"});n.statisticsByGroup(a,b,c,function(a){e.groupChartBasicOption.xAxis[0].data=
a.xAxis;e.groupChartBasicOption.series[0].data=a.series[0].data;e.groupChartBasicOption.series[1].data=a.series[1].data;e.groupChartBasicOption.series[2].data=a.series[2].data;e.groupChartBasicOption.series[3].data=a.series[3].data;k.hideLoading();k.setOption(e.groupChartBasicOption,!0)})}else f.alert("\u4efb\u52a1\u6392\u540d\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},loadMemberCharts:function(a,b,c){var e=this,n=e.mainlinelinkmodel;if(e.memberChart){var k=e.memberChart;k.showLoading({effect:"spin"});
n.statisticsByMember(a,b,c,function(a){e.memberChartBasicOption.xAxis[0].data=a.xAxis;e.memberChartBasicOption.series[0].data=a.series[0].data;e.memberChartBasicOption.series[1].data=a.series[1].data;e.memberChartBasicOption.series[2].data=a.series[2].data;e.memberChartBasicOption.series[3].data=a.series[3].data;k.hideLoading();k.setOption(e.memberChartBasicOption,!0)})}else f.alert("\u4efb\u52a1\u6392\u540d\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},loadDayChart:function(a,b,c){var e=
this,n=e.mainlinelinkmodel;if(e.dayChart){var k=e.dayChart;k.showLoading({effect:"spin"});n.statisticsByDay(a,b,c,function(a){k.hideLoading();a=_.extend(a,e.dayChartBasicOption);k.setOption(a,!0)})}else f.alert("\u672a\u627e\u5230\u56fe\u8868\u7ec4\u4ef6\uff0c\u8bf7\u786e\u8ba4\u9875\u9762\u52a0\u8f7d\u6b63\u786e")},renderStatisticians:function(a){for(var b=this.mainlinelinkmodel,c=$("#statistician-tmp").html(),e=_.template(c),f=$(),c=0;c<a.length;c++){var k={id:a[c].newId,username:a[c].userName};
b.statisticians.add(a[c].newId);spanStr=e(k).trim();f=f.add(spanStr)}$("#statisticians").append(f);b=$();c=$("#statistician-list-tmp").html();e=_.template(c);for(c=0;c<a.length;c++)k={id:a[c].newId,username:a[c].userName},spanStr=e(k).trim(),k=$(spanStr),k.children("a").addClass("checked"),b=b.add(k);$("#statisticians-list").append(b);$("#statisticians-list").next().addClass("hide").next().addClass("hide")},refreshStatisticians:function(a){var b=$(a.target);a=b.attr("data-id");b=b.text();this.updateStatisticians({id:a,
username:b})},updateStatisticians:function(a){var b=this.mainlinelinkmodel;$.isArray(a)||(a=[a]);for(var c=$("#statisticians"),e=$("#statistician-tmp").html().trim(),f=$(),k=0;k<a.length;k++){var r=a[k];0>b.statisticians.indexOf(r.id)&&(b.statisticians.add(r.id),$("#statisticians-list").find('a[data-id\x3d"'+r.id+'"]').addClass("checked"),r=_.template(e)(r).trim(),f=f.add(r))}0<f.size()&&c.append(f)}});m.exports=q});
define("teams/component/template",function(h,q,m){m.exports={"selector.employee":'\x3cdiv id\x3d"selector-employee" class\x3d"modal hide fade selector-employee j_chat_filterSlip_js" role\x3d"dialog" aria-labelledby\x3d"modalLabel-employee" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 id\x3d"modalLabel-employee" class\x3d"modal-title"\x3e\u4eba\u5458\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"userSelector-multi" class\x3d"modal-body hide"\x3e\x3cdiv class\x3d"user-wrapper"\x3e\x3cdiv class\x3d"selected-container clearfix"\x3e\x3cdiv class\x3d"mb-10 fs-14"\x3e\u5df2\u9009\u62e9\uff1a\x3c/div\x3e\x3cdiv class\x3d"j_selectedUsersScr" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"selected-users"\x3e\x3cdiv id\x3d"addUserToGroup" class\x3d"add-group-user"\x3e\x3ca id\x3d"addUserToGroupButton" class\x3d"btn btn-sm hide" title\x3d"\u5c06\u5df2\u9009\u62e9\u7684\u7528\u6237\u52a0\u5165\u5230\u65b0\u7684\u7fa4\u7ec4"\x3e\u521b\u5efa\u65b0\u7684\u7fa4\u7ec4\x3c/a\x3e\x3cinput id\x3d"add-group-input-text" type\x3d"text" class\x3d"form-control" /\x3e\x3ca id\x3d"addConfirmButton" class\x3d"btn btn-sm ml-3 hide"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca id\x3d"addCancelButton" class\x3d"btn btn-sm ml-3 hide"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-selector-body clearfix"\x3e\x3cdiv id\x3d"all-org-users" class\x3d"user-selector-body-l pull-left"\x3e\x3c/div\x3e\x3cdiv id\x3d"all-group-users" class\x3d"user-selector-body-r"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cspan class\x3d"selector-btns"\x3e\x3ca class\x3d"btn btn-middle btn-success hide j_user_ok"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn btn-middle j_user_cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',"selector.department":'\x3cdiv id\x3d"selector-department" class\x3d"modal fade selector-department" role\x3d"dialog" aria-labelledby\x3d"modalLabel-department" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 id\x3d"modalLabel-department" class\x3d"modal-title"\x3e\u90e8\u95e8\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"selector-org-tree"  class\x3d"org-tree scrollwrapper modal-body"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"selector.position":'\x3cdiv id\x3d"selector-position" class\x3d"modal fade selector-position" role\x3d"dialog" aria-labelledby\x3d"modalLabel-position" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 id\x3d"modalLabel-position" class\x3d"modal-title"\x3e\u5c97\u4f4d\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"selector-org-tree"  class\x3d"org-tree scrollwrapper modal-body"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"selector.group":'\x3cdiv id\x3d"selector-group" class\x3d"modal fade selector-group" role\x3d"dialog" aria-labelledby\x3d"modalLabel-group" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 id\x3d"modalLabel-group" class\x3d"modal-title"\x3e\u7fa4\u7ec4\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"selector-group-div"  class\x3d"scrollwrapper modal-body"\x3e\x3cdiv height\x3d"332" style\x3d"height: 332px;"\x3e\x3cul class\x3d"e-list active selector-group-ui"\x3e\x3cli id\x3d"group-div-clone" class\x3d"result-li hide groupclick"\x3e\x3cspan class\x3d"sn-link"\x3e1\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text j_entity_name ellipsis" title\x3d"13123"\x3e13123\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"date ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"selector.relevance":'\x3cdiv id\x3d"selector-relevance" class\x3d"modal hide fade selector-relevance" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u5173\u8054\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"relevanceSelector-multi" class\x3d"modal-body"\x3e\x3cdiv\x3e\x3cspan class\x3d"selector-btns"\x3e\x3ca class\x3d"btn btn-sm btn-success relevance-ok"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn btn-sm relevance-cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control suggestion" name\x3d"suggestion" data-entity\x3d"relevance" placeholder\x3d"Search"/\x3e\x3cspan class\x3d"prompt hide"\x3e(\u6309\u4e0benter\u952e\u8fdb\u884c\u5168\u6587\u68c0\u7d22)\x3c/span\x3e\x3ca class\x3d"btn btn-sm relevance-search"\x3e\u641c\u7d22\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"selected-container clearfix hide"\x3e\x3cspan class\x3d"selected-label"\x3e\u5df2\u9009\u62e9\uff1a\x3c/span\x3e\x3cdiv class\x3d"j_selected-relevances controls selected-relevances"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-result"  class\x3d"scrollwrapper search-result"\x3e\x3cul class\x3d"e-list active"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"pagination-centered"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\x3ci class\x3d"icon-step-backward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\x3ci class\x3d"icon-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"result-li-clone" class\x3d"result-li"\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text j_entity_name ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"date ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cspan id\x3d"selected-relevance-clone" class\x3d"entity-item"\x3e\x3ca class\x3d"j_name selected-relevance ellipsis"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"selector.formLabel":'\x3cdiv id\x3d"selector-formLabel" class\x3d"modal fade selector-label" role\x3d"dialog" aria-labelledby\x3d"modalLabel-label" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 id\x3d"modalLabel-label" class\x3d"modal-title"\x3e\u7c7b\u522b\u9009\u62e9\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"selector-label-tree"  class\x3d"org-tree scrollwrapper modal-body"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"selector.tag":'\x3cdiv id\x3d"selector-tag" class\x3d"modal hide fade selector-tag" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u9009\u62e9\u6807\u7b7e\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"tagSelector-multi" class\x3d"modal-body"\x3e\x3cdiv\x3e\x3cspan class\x3d"selector-btns fr"\x3e\x3ca class\x3d"btn btn-sm btn-success tag-ok"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn btn-sm tag-cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control suggestion" name\x3d"suggestion" data-entity\x3d"tag" placeholder\x3d"Search"/\x3e\x3cspan class\x3d"prompt hide"\x3e(\u6309\u4e0benter\u952e\u8fdb\u884c\u5168\u6587\u68c0\u7d22)\x3c/span\x3e\x3ca class\x3d"btn btn-sm j_tagSearch"\x3e\u641c\u7d22\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"relevance-tag-con"\x3e\x3cdiv id\x3d"tag-selector-list" class\x3d"filter-group tag-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"j_tag_selector filter-item hide" id\x3d"tsClone"\x3e\x3ca data-entity\x3d"" title\x3d"" class\x3d"tag-click"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"entity-item" id\x3d"tagItemClone"\x3e\x3ca class\x3d"router" title\x3d"\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879" href\x3d"/tag/common/4271137929157199923" data-value\x3d"4271137929157199923"\x3e\x3c/a\x3e\x3c/span\x3e',
"selector.formtag":'\x3cdiv id\x3d"selector-tag" class\x3d"modal hide fade selector-tag" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u9009\u62e9\u6807\u7b7e\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"tagSelector-multi" class\x3d"modal-body"\x3e\x3cdiv\x3e\x3cspan class\x3d"selector-btns fr"\x3e\x3ca class\x3d"btn btn-sm btn-success tag-ok"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn btn-sm tag-cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control suggestion" name\x3d"suggestion" data-entity\x3d"tag" placeholder\x3d"Search"/\x3e\x3cspan class\x3d"prompt hide"\x3e(\u6309\u4e0benter\u952e\u8fdb\u884c\u5168\u6587\u68c0\u7d22)\x3c/span\x3e\x3ca class\x3d"btn btn-sm j_tagSearch"\x3e\u641c\u7d22\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"relevance-tag-con"\x3e\x3cdiv id\x3d"tag-selector-list" class\x3d"filter-group tag-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"j_tag_selector filter-item hide" id\x3d"tsClone"\x3e\x3ca data-entity\x3d"" title\x3d"" class\x3d"tag-click"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"entity-item" id\x3d"tagItemClone"\x3e\x3ca class\x3d"router" title\x3d"\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879" href\x3d"/tag/common/4271137929157199923" data-value\x3d"4271137929157199923"\x3e\x3c/a\x3e\x3c/span\x3e',
"suggestion.employee":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"employee invite invite-toggle quick-invite-toggle" title\x3d"\u9080\u8bf7\x3c%\x3dusername%\x3e\u52a0\u5165eteams"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u9080\u8bf7 \x3cspan\x3e\x3c%\x3dusername%\x3e\x3c/span\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"employee"\x3e\x3cimg class\x3d"avatar" src\x3d"https://www.eteams.cnimages/avatar.png"\x3e\x3cspan\x3e\x3c%\x3dusername%\x3e\x3c/span\x3e\x3c/p\x3e\x3c%}%\x3e',
"suggestion.department":'\x3cp class\x3d"department"\x3e\x3cspan\x3e\x3c%\x3dname%\x3e\x3c/span\x3e\x3c/p\x3e',"suggestion.position":'\x3cp class\x3d"position"\x3e\x3cspan\x3e\x3c%\x3dname%\x3e\x3c/span\x3e\x3c/p\x3e',"suggestion.group":'\x3cp class\x3d"group"\x3e\x3cspan\x3e\x3c%\x3dname%\x3e\x3c/span\x3e\x3c/p\x3e',"suggestion.tag":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"tag"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\u65b0\u5efa\u6807\u7b7e\uff1a\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"tag"\x3e\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}%\x3e',
"suggestion.mainline":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"mainline"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e \u6dfb\u52a0\u9879\u76ee\uff1a\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"mainline" title\x3d"\x3c%\x3dname%\x3e"\x3e\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}%\x3e',"suggestion.relevance":'\x3c%if(id\x3d\x3d"all"){%\x3e\x3cp class\x3d"relevance"\x3e\x3ci class\x3d"icon-fulltext-plus"\x3e\x3c/i\x3e\x3cspan\x3e\u67e5\u8be2\u5168\u90e8\x3c/span\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"relevance" title\x3d"[\x3c%\x3dcreator.username%\x3e]\u521b\u5efa\u4e8e[\x3c%\x3dcreateTime%\x3e]\uff1a\x3c%\x3dname%\x3e"\x3e\x3ci class\x3d"icon-\x3c%\x3dmodule%\x3e"\x3e\x3c/i\x3e \x3cspan\x3e\x3c%\x3dname%\x3e\x3c/span\x3e\x3c/p\x3e\x3c%}%\x3e',
"suggestion.property":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"tag"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\u65b0\u5efa\u5c5e\u6027\uff1a\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"tag"\x3e\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}%\x3e',"suggestion.invite":'\x3ca class\x3d"invite-toggle decoration-none" type\x3d"modal"\x3e\x3cp class\x3d"employee invite" title\x3d"\u9080\u8bf7\u540c\u4e8b\u52a0\u5165eteams"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u9080\u8bf7\u540c\u4e8b\x3c/p\x3e\x3c/a\x3e',
"suggestion.category":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"category employee"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\u65b0\u5efa\uff1a\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"category employee"\x3e\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}%\x3e',"suggestion.formLabel":'\x3cp class\x3d"formlabel"\x3e\x3cspan\x3e\x3c%\x3dname%\x3e\x3c/span\x3e\x3c/p\x3e',"suggestion.formtag":'\x3c%if(id\x3d\x3d"new"){%\x3e\x3cp class\x3d"tag"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\u65b0\u5efa\u6807\u7b7e\uff1a\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}else{%\x3e\x3cp class\x3d"tag"\x3e\x3c%\x3dname%\x3e\x3c/p\x3e\x3c%}%\x3e',
"base.department":'\x3cspan class\x3d"entity-item"\x3e\x3ca data-value\x3d"\x3c%\x3did%\x3e"\x3e\x3c%\x3dname%\x3e\x3c/a\x3e\x3c/span\x3e',"base.position":'\x3cspan class\x3d"entity-item"\x3e\x3ca data-value\x3d"\x3c%\x3did%\x3e"\x3e\x3c%\x3dname%\x3e\x3c/a\x3e\x3c/span\x3e',"base.user":'\x3cspan id\x3d"\x3c%\x3did%\x3e" class\x3d"entity-item"\x3e\x3ca userId\x3d"\x3c%\x3did%\x3e" class\x3d"usercard-toggle" data-value\x3d"\x3c%\x3did%\x3e"\x3e\x3cspan class\x3d"ellipsis"\x3e\x3c%\x3dusername%\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e',
"base.attachment":'\x3cdiv id\x3d"\x3c%\x3did%\x3e" class\x3d"entity-item attachment"\x3e\x3ca data-value\x3d"\x3c%\x3did%\x3e" href\x3d"/base/download/\x3c%\x3did%\x3e" \x3c%if(image){%\x3e \x3c%if(hasRef){%\x3erel\x3d"\x3c%\x3drefId%\x3e"\x3c%}}%\x3e \x3e\x3c%\x3dname%\x3e (\x3c%\x3dplupload.formatSize(size)%\x3e)\x3ci\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e',"base.newattachment":'\x3cdiv class\x3d"entity-item attachment mb-5"\x3e\x3ca id\x3d"\x3c%\x3did%\x3e"\x3e\x3c%\x3dname%\x3e (\x3c%\x3dplupload.formatSize(size)%\x3e)\x3ci class\x3d"ml-3 c-grey"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e',
"base.messages":'\x3cdiv class\x3d"message-center-wrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"hide title j_wechat_title"\x3e\x3ci class\x3d"graph graph-wechat"\x3e\x3c/i\x3e\u804a\u5929\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d"hide title j_remind_title"\x3e\x3ci class\x3d"graph graph-remind"\x3e\x3c/i\x3e\u63d0\u9192\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d"hide title j_follow_title"\x3e\x3ci class\x3d"graph graph-follow"\x3e\x3c/i\x3e\u5173\u6ce8\u7533\u8bf7\x3c/div\x3e\x3cdiv class\x3d"hide title j_applyJoin_title"\x3e\x3ci class\x3d"graph graph-apply"\x3e\x3c/i\x3e\u52a0\u5165\u7533\u8bf7\x3c/div\x3e\x3cdiv class\x3d"hide title j_shareJoin_title"\x3e\x3ci class\x3d"graph graph-share"\x3e\x3c/i\x3e\u5171\u4eab\u7533\u8bf7\x3c/div\x3e\x3cdiv class\x3d"hide title j_applyReceive_title"\x3e\x3ci class\x3d"graph graph-receive"\x3e\x3c/i\x3e\u9886\u53d6\u7533\u8bf7\x3c/div\x3e\x3cul id\x3d"right-toolkit" class\x3d"toolkit-list fr ml-15"\x3e\x3cli class\x3d"toolkit-item dropdown-arrow mr-0 fr" \x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"j_all_read"\x3e\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm j_page_read btn-primary"\x3e\u5f53\u9875\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"hide message-center-switch e-switcher j_messages_option"\x3e\x3ca id\x3d"j_read" class\x3d"j_read"\x3e\u5df2\u8bfb\x3c/a\x3e\x3ca id\x3d"j_unread" class\x3d"active j_unread"\x3e\u672a\u8bfb\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"message-main"\x3e\x3cdiv class\x3d"message-list-view j_messlistScr mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"j_matters"\x3e\x3cdiv id\x3d"message-center"\x3e\x3cdiv class\x3d"nodata-holder"\x3e\x3cdiv id\x3d"resultlist-loading" class\x3d"loading-super m-20"\x3e\x3cspan\x3e\u6570\u636e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_no-result hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6ca1\u6709\u53ef\u663e\u793a\u7684\u5185\u5bb9 !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u6d88\u606f\uff0c\u8ba9\u60a8\u53ca\u65f6\u63a5\u6536\u5e76\u5904\u7406\u4e8b\u9879\uff0c\u63d0\u9ad8\u5185\u90e8\u5de5\u4f5c\u6548\u7387 !\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"messages-unread message-list" id\x3d"messages-unread-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-more mh-20 mb-15"\x3e\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"message-sidebar"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"messageBoxClone" class\x3d"hide message-item clearfix j_message_read"\x3e\x3cem class\x3d"status"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3cimg class\x3d"hide avatar usercard-toggle" style\x3d"cursor:pointer;" src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3cdiv class\x3d"message-box"\x3e\x3cdiv class\x3d"hd mb-5"\x3e\x3ca class\x3d"user bold c-grey usercard-toggle"\x3e\x3c/a\x3e\x3cdiv class\x3d"event ds-i ml-5"\x3e\x3cspan class\x3d"text"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"control-button" class\x3d\'ml-10 ds-ibm hide\'\x3e\x3ca class\x3d\'btn btn-xs btn-success w-50\'\x3e\u63a5\u53d7\x3c/a\x3e\x3ca class\x3d\'btn btn-xs btn-danger w-50 ml-10\'\x3e\u62d2\u7edd\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"content mb-5"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\u4e8b\u9879\u540d\u79f0\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctime class\x3d"fs-12 c-999 date"\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"wechat-clone" class\x3d"hide message-item clearfix"\x3e\x3cem class\x3d"status"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3cimg class\x3d"avatar usercard-toggle" style\x3d"cursor:pointer;" src\x3d"images/avatar.png"/\x3e\x3cdiv class\x3d"message-box"\x3e\x3cdiv class\x3d"hd mb-5"\x3e\x3ca class\x3d"user bold c-grey usercard-toggle"\x3e\x3c/a\x3e\x3cdiv class\x3d"event ds-i ml-5"\x3e\x3cspan class\x3d"text"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"content mb-5"\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctime class\x3d"fs-12 c-999 date"\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.tenantinfo":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-info"\x3e\x3c/i\x3e\x3cspan\x3e\u7cfb\u7edf\u4fe1\u606f\x3c/span\x3e\x3cspan id\x3d"perfectInfo-msg" class\x3d"hint hint-danger hide"\x3e\uff08\u8bf7\u5c3d\u5feb\u5b8c\u5584\u4e2a\u4eba\u56e2\u961f\u4fe1\u606f\uff09\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tenantinfoWrapScr scrollwrapper"\x3e\x3cdiv class\x3d"tenantinfo-view clearfix"\x3e\x3cdiv id\x3d"tenantinfo" class\x3d"view-main entity-info"\x3e\x3cdiv class\x3d"card card-corner"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u56e2\u961f\u540d\u79f0:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"j_tenantName j_ti_check controls-textspan"\x3e\x3c/span\x3e\x3cinput class\x3d"j_tenantName textinput j_ti_check form-control w-350 hide" type\x3d"text" name\x3d"tenantName" v-required\x3d"true" v-name\x3d"teamName" v-minlength\x3d"4" v-maxlength\x3d"100"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8bc6\u522b\u7801:\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly tenantKey"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8054\u7cfb\u4eba:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"controls-textspan j_contact j_ti_check"\x3e\x3c/span\x3e\x3cinput class\x3d"textinput j_contact j_ti_check form-control hide" type\x3d"text" name\x3d"contact" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8054\u7cfb\u4eba\u624b\u673a:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"controls-textspan j_mobile j_ti_check"\x3e\x3c/span\x3e\x3cinput class\x3d"textinput j_mobile j_ti_check form-control hide" type\x3d"text" name\x3d"mobile" v-required\x3d"true" v-name\x3d"mobile" v-maxlength\x3d"20"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8054\u7cfb\u4eba\u90ae\u7bb1:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"controls-textspan j_email j_ti_check"\x3e\x3c/span\x3e\x3cinput class\x3d"textinput j_email j_ti_check form-control hide" type\x3d"text" name\x3d"email" v-name\x3d"email" v-maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8054\u7cfb\u4eba\u7535\u8bdd:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"controls-textspan j_telephone j_ti_check"\x3e\x3c/span\x3e\x3cinput class\x3d"textinput j_telephone j_ti_check form-control hide" type\x3d"text" name\x3d"telephone" v-name\x3d"tel" v-maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u56e2\u961f\u5730\u5740:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"controls-textspan j_address j_ti_check"\x3e\x3c/span\x3e\x3cinput class\x3d"textinput j_address j_ti_check form-control w-500 hide" type\x3d"text" name\x3d"address" v-maxlength\x3d"100"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tenantinfo-save"\x3e\x3cinput id\x3d"btn-update" class\x3d"btn btn-sm btn-info w-60 hide" type\x3d"button" value\x3d"\u4fdd\u5b58" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card card-corner mv-20"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6ce8\u518c\u7528\u6237\u6570:\x3c/label\x3e\x3cdiv class\x3d"maxLicense controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5e10\u6237\u72b6\u6001:\x3c/label\x3e\x3cdiv class\x3d"status controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u542f\u7528\u65e5\u671f:\x3c/label\x3e\x3cdiv class\x3d"dateCreated controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5230\u671f\u65e5\u671f:\x3c/label\x3e\x3cdiv class\x3d"dateExpired controls controls-textonly" pattern\x3d"yyyy\u5e74MM\u6708dd\u65e5"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5269\u4f59\u5929\u6570:\x3c/label\x3e\x3cdiv class\x3d"dateLeft controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5df2\u4f7f\u7528\u7a7a\u95f4:\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly tenantinfo-space"\x3e\x3cdiv class\x3d"progress"\x3e\x3cdiv class\x3d"progress-bar progress-bar-info progress-bar-striped" style\x3d"width: 0%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"usedSpace"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"view-side"\x3e\x3cdiv class\x3d"tenant-price"\x3e\x3cdiv class\x3d"free-rule"\x3e\x3cp class\x3d"bold fs-16"\x3e\u6b22\u8fce\u60a8\u4f7f\u7528eteams\x3c/p\x3e\x3cp\x3e10\u7528\u6237(\u542b)\u4ee5\u5185\u514d\u8d39\u4f7f\u7528eteams \u6bcf\u7528\u6237\u9ed8\u8ba4\u7a7a\u95f4\u4e3a100M\x3c/p\x3e\x3cp\x3e\x3ca href\x3d"http://www.eteams.cn/product" target\x3d"_blank"\x3e\u4e86\u89e3\u66f4\u591a-\u5173\u4e8eeteams\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3cdl class\x3d"pay-rule"\x3e\x3cdt\x3e\x3cp class\x3d"bold"\x3e\u60a8\u53ef\u4ee5\u5347\u7ea7\u4e3a\u4ed8\u8d39\u7528\u6237\x3c/p\x3e\x3cp class\x3d"opc-7"\x3e\u60a8\u5c06\u83b7\u5f97\u66f4\u591a\u7684\u7528\u6237\u6570\u3001\u66f4\u5927\u7684\u5b58\u50a8\u7a7a\u95f4\u3001\u66f4\u591a\u9ad8\u7ea7\u529f\u80fd\u3001\u53ca\u4f18\u5148\u670d\u52a1\u652f\u6301\u3002\x3c/p\x3e\x3c/dt\x3e\x3cdd\x3e\x3cp class\x3d"bold mb-15"\x3e\u6309\u5e74\u7528\u6237\u6570\u79df\u7528\uff0c\u5355\u4f4d\u4ef7\u683c365\u5143/\u5e74/\u7528\u6237\uff0c5\u4e2a\u7528\u6237\u8d77\u79df\u3002\x3c/p\x3e\x3cp\x3e1\u3001\u5982\u9700\u589e\u52a0\u7528\u6237\u6570\uff0c\u5219\u63095\u7684\u500d\u6570\u8fdb\u884c\u589e\u52a0\u3002\x3c/p\x3e\x3cp\x3e2\u3001\u6bcf\u7528\u6237\u9ed8\u8ba4\u5b58\u50a8\u7a7a\u95f42G\uff0c\u5b58\u50a8\u7a7a\u95f4\u589e\u8d2d\u8d39\u7528(10G\u8d77\u8d2d)10\u5143/G\u3002\x3c/p\x3e\x3cp class\x3d"mb-15"\x3e3\u3001\u4e00\u6b21\u8d2d\u4e70\x3cspan class\x3d"c-warning"\x3e2\u5e74\x3c/span\x3e\u53ef\u4eab\x3cspan class\x3d"c-warning"\x3e8.5\u6298\x3c/span\x3e\u4f18\u60e0\uff0c\u4e00\u6b21\u8d2d\u4e70\x3cspan class\x3d"c-warning"\x3e3\u5e74\x3c/span\x3e\u53ef\u4eab\x3cspan class\x3d"c-warning"\x3e7.5\u6298\u4f18\u60e0\u3002\x3c/span\x3e\x3c/p\x3e\x3cp\x3e\u8be6\u60c5\u53ef\u6765\u7535\u54a8\u8be2\uff1a\x3cspan class\x3d"c-warning"\x3e021-50388680\x3c/span\x3e\x3c/p\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"tenantinfo" class\x3d"center-container hide tenantinfo scrollwrapper"\x3e\x3cdiv class\x3d"sales-content"\x3e\x3cdiv class\x3d"free-user"\x3e\x3cp style\x3d"font-size:15px;"\x3e\x3cb\x3e\u6b22\u8fce\u60a8\u4f7f\u7528eteams\x3c/b\x3e\x3c/p\x3e\x3cp\x3e10\u7528\u6237(\u542b)\u4ee5\u5185\u514d\u8d39\u4f7f\u7528eteams\x3c/p\x3e\x3cp\x3e\u6bcf\u7528\u6237\u9ed8\u8ba4\u7a7a\u95f4\u4e3a100M\x3c/p\x3e\x3cp\x3e\x3ca href\x3d"http://www.eteams.cn/sales" target\x3d"_blank"\x3e\u4e86\u89e3\u66f4\u591a - \u5173\u4e8eeteams\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"unfree-user"\x3e\x3cdiv class\x3d"unfree-top"\x3e\x3cp align\x3d"center"  style\x3d"font-size:15px;"\x3e\x3cb\x3e\u60a8\u53ef\u4ee5\u5347\u7ea7\u4e3a\u4ed8\u8d39\u7528\u6237\x3c/b\x3e\x3c/p\x3e\x3cp\x3e\u60a8\u5c06\u83b7\u5f97\u66f4\u591a\u7684\u7528\u6237\u6570\u3001\u66f4\u5927\u7684\u5b58\u50a8\u7a7a\u95f4\u3001\u66f4\u591a\u9ad8\u7ea7\u529f\u80fd\u3001\u53ca\u4f18\u5148\u670d\u52a1\u652f\u6301\u3002\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"unfree-bottom"\x3e\x3cp\x3e\u6309\u5e74\u7528\u6237\u6570\u79df\u7528\uff0c\u5355\u4f4d\u4ef7\u683c365\u5143/\u5e74/\u7528\u6237\uff0c5\u4e2a\u7528\u6237\u8d77\u79df\u3002\x3c/p\x3e\x3cp\x3e1\u3001\u5982\u9700\u589e\u52a0\u7528\u6237\u6570\uff0c\u5219\u63095\u7684\u500d\u6570\u8fdb\u884c\u589e\u52a0\u3002 \x3c/p\x3e\x3cp\x3e2\u3001\u6bcf\u7528\u6237\u9ed8\u8ba4\u5b58\u50a8\u7a7a\u95f42G\uff0c\u5b58\u50a8\u7a7a\u95f4\u589e\u8d2d\u8d39\u7528(10G\u8d77\u8d2d)10\u5143/G\u3002\x3c/p\x3e\x3cp\x3e3\u3001\u4e00\u6b21\u8d2d\u4e702\u5e74\u53ef\u4eab8.5\u6298\u4f18\u60e0\uff0c\u4e00\u6b21\u8d2d\u4e703\u5e74\u53ef\u4eab7.5\u6298\u4f18\u60e0\u3002\x3c/p\x3e\x3cp\x3e\u8be6\u60c5\u53ef\u6765\u7535\u54a8\u8be2\uff1a021-50388680\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.profile":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-groups fl"\x3e\x3c/i\x3e\x3cul class\x3d"toolkit-list fl tab"\x3e\x3cli id\x3d"title-profile" class\x3d"toolkit-item toolkit-item-tab active"\x3e\x3ca\x3e\u7528\u6237\u8d44\u6599\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"title-lowers" class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca\x3e\u7528\u6237\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"user-lowers" class\x3d"j_profilefollowView scrollwrapper hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"user-container" class\x3d"userinfo-view scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"userinfo-container table-tray"\x3e\x3cdiv class\x3d"tray-cell userinfo-main"\x3e\x3cdiv id\x3d"user-info" class\x3d"card card-corner form-horizontal entity-info  hide"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u59d3 \u540d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"employee-id" name\x3d"employee.id" /\x3e\x3cinput type\x3d"text" id\x3d"employee-username" class\x3d"textinput form-control" name\x3d"employee.username" v-maxlength\x3d"10"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8d26\u53f7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly accounts_js"\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan class\x3d"ml-10"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90ae\u7bb1\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan id\x3d"employee-email-span" class\x3d"hide controls-textspan"\x3e\x3c/span\x3e\x3cinput type\x3d"text" id\x3d"employee-email" class\x3d"textinput form-control" name\x3d"employee.email" class\x3d"bluebox" v-name\x3d"email"/\x3e\x3ca id\x3d"changeEmail" propertyName\x3d"bindingEmail" class\x3d"hide binding_js"\x3e[\u7ed1\u5b9a]\x3c/a\x3e\x3ca class\x3d"hide remove_js binding_js" propertyName\x3d"removeEmail"\x3e[\u89e3\u7ed1]\x3c/a\x3e\x3ca id\x3d"employee-email-repeat" class\x3d"hide"\x3e\u56e2\u961f\u5df2\u6709\u4eba\u4f7f\u7528\u8be5\u90ae\u7bb1\uff01\x3c/a\x3e\x3cem class\x3d"emp-safe-msg hide c-danger"\x3e\u4e3a\u4e86\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u8bf7\u5c3d\u5feb\u7ed1\u5b9a\u90ae\u7bb1\uff01\x3c/em\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u624b \u673a\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan id\x3d"employee-mobile-span" class\x3d"hide controls-textspan"\x3e\x3c/span\x3e\x3cinput type\x3d"text" id\x3d"employee-mobile" name\x3d"employee.mobile" class\x3d"form-control textinput" v-name\x3d"mobile"/\x3e\x3ca id\x3d"changeMobile" propertyName\x3d"bindingMobile" class\x3d"hide binding_js ml-10"\x3e[\u7ed1\u5b9a]\x3c/a\x3e\x3ca class\x3d"hide remove_js binding_js" propertyName\x3d"removeMobile"\x3e[\u89e3\u7ed1]\x3c/a\x3e\x3ca id\x3d"employee-mobile-repeat" class\x3d"hide"\x3e\u56e2\u961f\u5df2\u6709\u4eba\u4f7f\u7528\u8be5\u624b\u673a\uff01\x3c/a\x3e\x3cem class\x3d"emp-safe-msg hide c-danger"\x3e\u4e3a\u4e86\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c\u8bf7\u5c3d\u5feb\u7ed1\u5b9a\u624b\u673a\uff01\x3c/em\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"passwd-btn" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u5bc6\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"btn-changePwd" class\x3d"btn btn-sm btn-primary pwd-toggle hide" type\x3d"changePwd"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e \u4fee\u6539\u5bc6\u7801 \x3c/a\x3e\x3ca id\x3d"btn-resetPwd" class\x3d"btn btn-sm btn-primary pwd-toggle hide" type\x3d"resetPwd" \x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e \u91cd\u7f6e\u5bc6\u7801 \x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6027 \u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls "\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"employee.sex" value\x3d"male"/\x3e\u7537\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"employee.sex" value\x3d"female" /\x3e\u5973\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7535 \u8bdd\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" id\x3d"employee-telephone" name\x3d"employee.telephone" class\x3d"textinput form-control" v-maxlength\x3d"50"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"user-info-hasAcl" class\x3d"hide"\x3e\x3cdiv id\x3d"departmentRow" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8 \u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv undeletable\x3d"true" id\x3d"employee-department" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-department" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u90e8\u95e8" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"otherDepartmentRow" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"other-employee-department" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"other-typeahead-department" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"department" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u517c\u804c\u90e8\u95e8" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"positionRow" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97 \u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"employee-position" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-position" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"position" placeholder\x3d"\u8f93\u5165\u5c97\u4f4d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u5c97\u4f4d" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"otherPositionRow" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u5c97\u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"other-employee-position" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"other-typeahead-position" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"position" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u5c97\u4f4d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u5c97\u4f4d" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u804c \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cselect id\x3d"employee-rank" class\x3d"form-control" name\x3d"employee.rank" \x3e\x3coption value\x3d"user" \x3e\u804c\u5458\x3c/option\x3e\x3coption value\x3d"manager" \x3e\u7ecf\u7406\x3c/option\x3e\x3coption value\x3d"boss" \x3e\u9886\u5bfc\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"superiorRow" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u76f4\u5c5e\u4e0a\u7ea7\uff0c\u591a\u4e2a\u76f4\u5c5e\u4e0a\u7ea7\u8bf7\u5728\u5176\u4ed6\u4e0a\u7ea7\u4e2d\u7ee7\u7eed\u8bbe\u7f6e"\x3e\u4e0a \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"employee-superior" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-superior" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u4e0a\u7ea7" data-placement\x3d"top" data-toggle\x3d"tooltip" \x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"seniorRow" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label" title\x3d"\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u4e0a\u7ea7"\x3e\u5176\u4ed6\u4e0a\u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"business-employee-superior" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-business-superior" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u5176\u4ed6\u4e0a\u7ea7" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"assistantRow" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" title\x3d"\u53ef\u4ee5\u67e5\u770b\u7528\u6237\u4e0b\u5c5e\u7684\u5de5\u4f5c\u5185\u5bb9"\x3e\u52a9\u7406\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"assistant" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-assistant" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u52a9\u7406" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"openAccessRow" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" title\x3d"\u628a\u5f00\u653e\u8005\u7684\u6240\u6709\u5de5\u4f5c\u5185\u5bb9\u5f00\u653e\u7ed9\u5176\u4ed6\u540c\u4e8b\u67e5\u9605"\x3e\u6743\u9650\u5f00\u653e\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"open-access" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-open-access" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editParticipant" class\x3d"control-btn entity-item-add" title\x3d"\u4fee\u6539\u6743\u9650\u5f00\u653e\u4eba\u5458" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"activeDate" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5165\u804c\u65f6\u95f4\uff1a\x3c/label\x3e\x3cinput type\x3d"text"  id\x3d"employee-activeDate" name\x3d"employee.activeDate" class\x3d"textinput form-control" readonly unselectable\x3d"on"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u89d2\u8272\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"ROLE_ADMIN" roleId\x3d"5585537017320349068" name\x3d"roleChk" \x3e \u7cfb\u7edf\u7ba1\u7406\u5458\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"user-info-noAcl" class\x3d"hide"\x3e\x3cdiv  id\x3d"department-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8 \u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"other-department-div" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"position-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97 \u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"other-position-div" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u5c97\u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"rank-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u804c \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cspan class\x3d"controls-text  user hide" \x3e\u804c\u5458\x3c/span\x3e\x3cspan class\x3d"controls-text  manager hide" \x3e\u7ecf\u7406\x3c/span\x3e\x3cspan class\x3d"controls-text  boss hide" \x3e\u9886\u5bfc\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"superior-div"class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"other-superior-div"class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u5176\u4ed6\u4e0a\u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"assistant-div"class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u52a9 \u7406\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"open-access-div"class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u6743\u9650\u5f00\u653e\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"openAccessRow" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u6743\u9650\u5f00\u653e\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"open-access" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-open-access" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editParticipant" class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u4fee\u6539\u6743\u9650\u5f00\u653e\u4eba\u5458" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"activeDate-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5165\u804c\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"statusDiv" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u72b6 \u6001\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cdiv class\x3d"value" for\x3d"status"\x3e\x3cspan id\x3d"employee-status" class\x3d"controls-text"  style\x3d""\x3e\u79bb\u804c\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"btn-container pull-right"\x3e\x3cspan class\x3d"radio" style\x3d"display: none;"\x3e\x3ca id\x3d"employee-unavailable" class\x3d"btn btn-sm btn-primary" propertyName\x3d"resignation"\x3e\u79bb\u804c\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"radio" style\x3d"display: none;"\x3e\x3ca id\x3d"employee-available" class\x3d"btn btn-sm btn-primary" propertyName\x3d"normal"\x3e\u8fd4\u8058\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e\x3ca id\x3d"js_quit_transfer" class\x3d"btn btn-sm btn-primary entitybox-toggle" propertyName\x3d"resignation" data-module\x3d"quitTransfer" data-id\x3d"" data-value\x3d""\x3e\u5de5\u4f5c\u4ea4\u63a5\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"user-info-normal" class\x3d"form-horizontal entity-info user-info hide"\x3e\x3cdiv id\x3d"employee-username-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u59d3 \u540d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"employee-email-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90ae \u4ef6\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"employee-mobile-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label "\x3e\u624b \u673a\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"employee-sex-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6027 \u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp class\x3d"male hide"\x3e\u7537\x3c/p\x3e\x3cp class\x3d"female hide"\x3e\u5973\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"employee-telephone-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7535 \u8bdd\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"department-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8 \u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"other-department-div" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"position-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97 \u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"other-position-div" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u517c\u804c\u5c97\u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"rank-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u804c \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp class\x3d"user hide" \x3e\u804c\u5458\x3c/p\x3e\x3cp class\x3d"manager hide" \x3e\u7ecf\u7406\x3c/p\x3e\x3cp class\x3d"boss hide" \x3e\u9886\u5bfc\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"superior-div"class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a \u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"other-superior-div" class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u5176\u4ed6\u4e0a\u7ea7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"assistant-div"class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u52a9 \u7406\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"open-access-div"class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6743\u9650\u5f00\u653e\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"status-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u72b6 \u6001\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp class\x3d"normal hide"\x3e\u5728\u804c\x3c/p\x3e\x3cp class\x3d"unavailable hide"\x3e\u79bb\u804c\x3c/p\x3e\x3cp class\x3d"locked hide"\x3e\u9501\u5b9a\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"activeDate-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5165\u804c\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls controls-textonly"\x3e\x3cp\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell userinfo-side j_help hide-im"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5176\u4ed6\u6743\u9650\u8bf4\u660e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e1. \u52a9\u7406\uff1a\u4ee3\u8868\u53ef\u4ee5\u67e5\u770b\u672c\u4eba\u4e0b\u5c5e\u7684\u5de5\u4f5c\u5185\u5bb9\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u6743\u9650\u5f00\u653e\uff1a\u4ee3\u8868\u53ef\u4ee5\u628a\u81ea\u5df1\u7684\u6240\u6709\u5de5\u4f5c\u5185\u5bb9\u5f00\u653e\u7ed9\u5176\u4ed6\u540c\u4e8b\u67e5\u9605\x3c/p\x3e\x3cp class\x3d"e-row"\x3e3. \u5176\u4ed6\u4e0a\u7ea7\uff1a\u540c\u4e0a\u7ea7\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.custmenu":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-settings"\x3e\x3c/i\x3e\u5e94\u7528\u5c55\u793a\u8bbe\u7f6e\x3c/div\x3e\x3cdiv class\x3d"j_menuset_close ape-close fr hide"\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"j_btn_close close"\x3e\x26times;\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"menuset-wrapper" class\x3d"module-set-view scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"module-set-list"\x3e\x3cdiv class\x3d\'remindinfo mb-10 hide\'\x3e1\u3001\u9690\u85cf\u7684\u5e94\u7528\u5c06\u5728\u66f4\u591a\u5e94\u7528\u4e2d\u5c55\u793a\uff0c\u9ed8\u8ba4\u663e\u793a\u4efb\u52a1\u534f\u4f5c\u53ca\u5ba1\u6279\u6d41\u7a0b\u6a21\u5757\uff1b\x3cbr\x3e2\u3001\u5e94\u7528\u663e\u793a\u7684\u4e2a\u6570\u662f\u6839\u636e\u60a8\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5927\u5c0f\u4ee5\u53ca\u60a8\u8bbe\u7f6e\u5c55\u793a\u7684\u5e94\u7528\u5171\u540c\u51b3\u5b9a\u7684\u3002\x3c/div\x3e\x3cul class\x3d\'sortmenus j_sortmenus\'\x3e\x3c% for(var i\x3d0,len\x3dmenus.length;i\x3clen;i++) {if(menus[i].id \x3d\x3d 0) continue;//  \u9996\u9875\u4e0d\u663e\u793a\u51fa\u6765%\x3e\x3cli class\x3d\'on_off cs-m\'\x3e\x3cspan class\x3d\'middle_helper\'\x3e\x3c/span\x3e\x3cspan data-id\x3d\'\x3c%\x3d menus[i].id %\x3e\' class\x3d\'menu_name\'\x3e\x3c%\x3d menus[i].menuName %\x3e\x3c/span\x3e\x3cinput  type\x3d"checkbox" \x3c% if(menus[i].menuStatus \x3d\x3d\x3d 1) {%\x3e checked\x3d\'checked\' \x3c% } %\x3e/\x3e\x3cspan title\x3d\'\u62d6\u62c9\u6392\u5e8f\' class\x3d\'menu_move\'\x3e\x3c/span\x3e\x3c/li\x3e\x3c% } %\x3e\x3c/ul\x3e\x3cdiv class\x3d"reset-navsetting mt-20"\x3e\x3ca class\x3d"btn btn-sm btn-success" href\x3d"#"\x3e\u6062\u590d\u9ed8\u8ba4\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell j_moduleset_col view-side"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u9690\u85cf\u7684\u5e94\u7528\u5c06\u5728\u66f4\u591a\u5e94\u7528\u4e2d\u5c55\u793a\uff0c\u9ed8\u8ba4\u663e\u793a\u4efb\u52a1\u534f\u4f5c\u53ca\u5ba1\u6279\u6d41\u7a0b\u6a21\u5757\uff1b\x3cbr\x3e2\u3001\u5e94\u7528\u663e\u793a\u7684\u4e2a\u6570\u662f\u6839\u636e\u60a8\u6d4f\u89c8\u5668\u7a97\u53e3\u7684\u5927\u5c0f\u4ee5\u53ca\u60a8\u8bbe\u7f6e\u5c55\u793a\u7684\u5e94\u7528\u5171\u540c\u51b3\u5b9a\u7684\u3002\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.usersummary":'\x3ca class\x3d"graph j_sidebarCtrl siderbar-ctrl-btn"\x3e\x3c/a\x3e\x3cdiv class\x3d"panel-heading j_panel-head"\x3e\x3ca class\x3d"c-grey close fr"\x3e\u00d7\x3c/a\x3e\x3cdiv class\x3d"panel-title"\x3e\x3cspan class\x3d"profile-label"\x3e\x3c/span\x3e\u7684\u5361\u7247\u4fe1\u606f\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"usersummary-wrap"\x3e\x3cdiv class\x3d"loading_small" id\x3d"userSummary-loading"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"usersummary hide" id\x3d"userSummary-info"\x3e\x3cdiv class\x3d"usersummary-base clearfix"\x3e\x3cdiv class\x3d"avatar-info ps-r fl"\x3e\x3ca class\x3d"avatar j_avatart"\x3e\x3cimg src\x3d"images/avatar.png" class\x3d"media-object"/\x3e\x3c/a\x3e\x3ca class\x3d"avatar-opt upload-toggle ta-c hide"\x3e\u6362\u5934\u50cf\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"profile-info"\x3e\x3cdiv class\x3d"option"\x3e\x3ca class\x3d"pwd-toggle change-password graph graph-28-lock hide" title\x3d"\u4fee\u6539\u5bc6\u7801"\x3e\x3c/a\x3e\x3ca class\x3d"profile-update router link-modify graph graph-28-pencil hide" title\x3d"\u4fee\u6539\u4e2a\u4eba\u4fe1\u606f"\x3e\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"name mr-5"\x3e\x3c/span\x3e\x3cspan class\x3d"sex"\x3e\x3c/span\x3e\x3cdiv class\x3d"department ellipsis"\x3e\x3c/div\x3e\x3cdiv class\x3d"mobile j_profilemobile"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"follow-btns"\x3e\x3cspan class\x3d"approved" title\x3d"\u5df2\u5173\u6ce8\uff0c\u70b9\u51fb\u53d6\u6d88\u5173\u6ce8"\x3e\x3ci class\x3d"icon-ok"\x3e\x3c/i\x3e \u5df2\u5173\u6ce8\x3ca class\x3d"btn-unfollow-cancle j_btn-unfollow-cancle"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"unapproved hide" title\x3d"\u5df2\u53d1\u9001\u5173\u6ce8\u7533\u8bf7"\x3e\u5df2\u7533\u8bf7\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"none btn-follow-add trans-bg hide j_btn-follow-add" title\x3d"\u70b9\u51fb\u6dfb\u52a0\u5173\u6ce8"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e \u6dfb\u52a0\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"btn-wechat trans-bg router wechat-toggle"\x3e\u53d1\u5fae\u4fe1\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"profile-detail clearfix js_profiledetail"\x3e\x3cli\x3e\x3clabel\x3e\u90ae\u7bb1\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis email"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\u7535\u8bdd\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis telephone"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\u4e0a\u7ea7\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis superior"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\u804c\u7ea7\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis rank"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\u72b6\u6001\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis status"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\u89d2\u8272\uff1a\x3c/label\x3e\x3cspan class\x3d"span ellipsis role"\x3e\u65e0\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3ca class\x3d"profile-more j_moreProfile"\x3e\u66f4\u591a  \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"statistic statistic-themeB clearfix ta-c j_followEach"\x3e\x3cli class\x3d"followCount" module\x3d"follow" title\x3d"\u6211\u5173\u6ce8\u7684\u4eba"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u5173\u6ce8\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"fansCount" module\x3d"fans" title\x3d"\u5173\u6ce8\u6211\u7684\u4eba"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u88ab\u5173\u6ce8\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"subordinateCount" module\x3d"subordinate" title\x3d"\u6211\u7684\u4e0b\u5c5e"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u4e0b\u5c5e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"taskCount" module\x3d"task" title\x3d"\u6211\u7684\u4efb\u52a1"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u4efb\u52a1\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"mainlineCount" module\x3d"mainline" title\x3d"\u6211\u7684\u9879\u76ee"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u9879\u76ee\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"blogCount" module\x3d"blog" title\x3d"\u6211\u7684\u65e5\u62a5"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u62a5\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"documentCount" module\x3d"document" title\x3d"\u6211\u4e0a\u4f20\u7684\u6587\u6863"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u6587\u6863\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"customerCount" module\x3d"customer" title\x3d"\u6211\u521b\u5efa\u7684\u5ba2\u6237"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u5ba2\u6237\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"saleChanceCount" module\x3d"saleChance" title\x3d"\u6211\u8d1f\u8d23\u7684\u5546\u673a"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u5546\u673a\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"productionCount" module\x3d"production" title\x3d"\u6211\u8d1f\u8d23\u7684\u4ea7\u54c1"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u4ea7\u54c1\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"flowCount" module\x3d"flow" title\x3d"\u6211\u63d0\u4ea4\u7684\u5ba1\u6279"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u5ba1\u6279\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"reportCount" module\x3d"report" title\x3d"\u6211\u521b\u5efa\u7684\u62a5\u544a"\x3e\x3ci\x3e\x3c/i\x3e\x3cspan\x3e\u62a5\u544a\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"login-info"\x3e\x3ca class\x3d"btn-attendance locus-toggle fr hide mt-25"\x3e\x3ci class\x3d"icon-map-marker mr-3 c-999"\x3e\x3c/i\x3e\u8003\u52e4\u8f68\u8ff9\x3c/a\x3e\x3cp\x3e\x3cspan class\x3d"c-999"\x3e\u6700\u8fd1\u767b\u5f55\uff1a\x3c/span\x3e\x3cspan class\x3d"c-666 last-login"\x3e\x3c/span\x3e\x3c/p\x3e\x3cp\x3e\x3cspan class\x3d"c-999"\x3e\u767b\u5f55\u6b21\u6570\uff1a\x3c/span\x3e\x3cspan class\x3d"c-666 login-count"\x3e\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"visitor-wrapper" id\x3d"visitInfo"\x3e\x3c/div\x3e',
"base.remindcard":'\x3cdiv id\x3d"remindcardDiv" class\x3d"remindcardDiv"\x3e\x3ctextarea id\x3d"remind-textarea" class\x3d"form-control" name\x3d"comment" rows\x3d"3" placeholder\x3d""\x3e\x3c/textarea\x3e\x3cdiv\x3e\x3cspan\x3e\u63d0\u9192\u7ed9\uff1a\x3cspan\x3e\u5f20\u4e09\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group pull-right"\x3e\x3ca id\x3d"remind-submit" class\x3d"btn btn-sm"\x3e\u63d0\u4ea4\x3c/a\x3e\x3ca id\x3d"remind-cancle" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"base.dynamicinfo":'\x3cdiv id\x3d"dynamicinfo" class\x3d"dynamicinfo-pane"\x3e\x3cdiv id\x3d"placard" class\x3d"i-box i-placard placard"\x3e\x3cdiv class\x3d"i-box-head j_portal-col-head"\x3e\x3cul class\x3d"j_portal-col-nav i-box-nav"\x3e\x3cli\x3e\x3ca class\x3d"active cs-m"\x3e\u56e2\u961f\u516c\u544a\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"placard-unreaders" title\x3d"\u70b9\u51fb\u67e5\u770b\u672a\u67e5\u770b\u8fc7\u56e2\u961f\u52a8\u6001\u7684\u4eba"\x3e(\u672a\u9605\u4eba\u5458)\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-remove"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"ds-ib fr"\x3e\x3ca class\x3d"placard-history-btn btn btn-sm btn-primary"\x3e\u5386\u53f2\x3c/a\x3e \x26nbsp;\x3ca class\x3d"placard-submit hide btn btn-sm btn-success"\x3e\u53d1\u5e03\x3c/a\x3e\x3ca class\x3d"placard-add btn btn-sm add-btn hide" title\x3d"\u65b0\u5efa"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"placard-change btn btn-sm btn-success hide" title\x3d"\u4fdd\u5b58"\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cdiv class\x3d"placard-edit"\x3e\x3ctextarea id\x3d"placard-textarea" name\x3d"placard.content" class\x3d"autosize portal-notice-content" maxlength\x3d"3900" placeholder\x3d"\u70b9\u51fb\u8fd9\u91cc\u76f4\u63a5\u53d1\u5e03\u516c\u544a"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"placard-history hide"\x3e\x3cdiv class\x3d"placard-historys"\x3e\x3c/div\x3e\x3cdiv class\x3d"placard-page-btn"\x3e\x3ca id\x3d"placard-next" class\x3d"placard-next-disable" title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3ca id\x3d"placard-pre" class\x3d"placard-pre-disable" title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"unreaders-list" class\x3d"i-placard-unreaders j_unreaderScr scrollwrapper hide" height\x3d"230"\x3e\x3c/div\x3e\x3cdiv id\x3d"placard-history-box-clone" class\x3d"placard-history-box hide"\x3e\x3cspan class\x3d"placard-history-content  pointer ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"placard-history-date pointer"\x3e\x3c/span\x3e\x3ca class\x3d"placard-history-user usercard-toggle pointer"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"placard-history-card" class\x3d"placard-history-card hide j_placard"\x3e\x3cdiv class\x3d"caption"\x3e\x3ca class\x3d"user usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3ca class\x3d"close"\x3e\u00d7\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_contentScr card-content"\x3e\x3cdiv class\x3d"content j_content"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.extend":'\x3cdiv class\x3d"detail-block j_extend"\x3e\x3cdiv class\x3d"detail-tab detail-tab-equal4 clearfix"\x3e\x3cul\x3e\x3cli class\x3d"extend-panel-toggle active extend-comment" data-panel\x3d"comment"\x3e\x3ca class\x3d"task document mainline workreport calendar  formdatareport hide"\x3e\u53cd\u9988\u53ca\u8bc4\u8bba\x3c/a\x3e\x3ca class\x3d"customer hide"\x3e\u8054\u7cfb\u8bb0\u5f55\x3c/a\x3e\x3ca class\x3d"workflow hide"\x3e\u5ba1\u6279\u610f\u89c1\u53ca\u8bc4\u8bba\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"extend-panel-toggle extend-unread" data-panel\x3d"unread"\x3e\x3ca\x3e\u67e5\u9605\u60c5\u51b5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"extend-panel-toggle extend-stream" data-panel\x3d"stream"\x3e\x3ca\x3e\u64cd\u4f5c\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"formDataLog" class\x3d"extend-panel-toggle extend-formDataLog hide" data-panel\x3d"formDataLog"\x3e\x3ca\x3e\u8868\u5355\u4fee\u6539\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"right-panel extend-panel"\x3e\x3cdiv id\x3d"comment-panel" class\x3d"hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"unread-panel" class\x3d"hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"stream-panel" class\x3d"hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"otherblog-panel" class\x3d"hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"formDataLog-panel" class\x3d"hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.stream":'\x3cdiv id\x3d"stream" class\x3d"stream-wrapper"\x3e\x3cdiv class\x3d"stream-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"stream-more common-more m-15 hide"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"stream-clone" class\x3d"hide stream-box"\x3e\x3cdiv class\x3d"stream-top"\x3e\x3ca class\x3d"stream-user router usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"stream-message"\x3e\x3c/span\x3e\x3cspan class\x3d"stream-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"stream-detail"\x3e\x3c/div\x3e\x3c/div\x3e',
"base.comment":'\x3cdiv id\x3d"comment" class\x3d"comment-wrapper"\x3e\x3cdiv class\x3d"comment-post"\x3e\x3cdiv class\x3d"avatar j_comment_avatar"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-input j_comment-input"\x3e\x3ctextarea id\x3d"comment-textarea" class\x3d"form-control" name\x3d"comment" rows\x3d"2" placeholder\x3d"\u8bc4\u8bba..." v-maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-option"\x3e\x3cdiv id\x3d"attachment-div" class\x3d"attachment-div"\x3e\x3ca id\x3d"comment-attach" class\x3d"a-upload fl hide" title\x3d"\u9009\u62e9\u8981\u4e0a\u4f20\u7684\u6587\u6863\uff0c\u7136\u540e\u63d0\u4ea4"\x3e\x3ci class\x3d"icon-paperclip mr-3"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3ca id\x3d"comment-submit" type\x3d"button" class\x3d"fr btn btn-sm btn-info a-submit"\x3e\u63d0\u4ea4\x3c/a\x3e\x3cdiv id\x3d"comment-visittype" class\x3d"e-selectui dropdown dropdown-menu-toggle hide fl ml-10" style\x3d"min-width:120px"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\u8054\u7cfb\u7c7b\u578b \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca  class\x3d"current" value\x3d""\x3e\u8054\u7cfb\u7c7b\u578b\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"phone"\x3e\u6253\u7535\u8bdd\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"mail"\x3e\u53d1\u90ae\u4ef6\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"sms"\x3e\u53d1\u77ed\u4fe1\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"live"\x3e\u89c1\u9762\u62dc\u8bbf\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"report"\x3e\u6c47\u62a5\u8bb0\u5f55\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"meeting"\x3e\u4f1a\u6664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"activity"\x3e\u6d3b\u52a8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca  value\x3d"fete"\x3e\u5546\u52a1\u5bb4\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-contact" class\x3d"e-selectui dropdown dropdown-menu-toggle hide fl ml-10" style\x3d"min-width:120px"\x3e\x3ca  class\x3d"selectui-result dropdown-toggle" style\x3d"padding-right: 20px;"\x3e\u8054\u7cfb\u4eba\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-attachments" class\x3d"entity-container attachment clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-container comment-list"\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-more common-more pv-5 m-10 hide"\x3e\x3ca\x3e\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"comment-container-clone"\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-clone" class\x3d"comment-box comment-item"\x3e\x3cdiv class\x3d"avatar j_comment_clone_avatar"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"hd"\x3e\x3ca class\x3d"comment-user usercard-toggle"\x3e\x3c/a\x3e\x3cspan id\x3d"visit_explain" class\x3d"" style\x3d"padding-left: 5px;color: #999;"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"show_at_comment" class\x3d"clearfix"\x3e\x3cdiv class\x3d"comment-body content"\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-attachment entity-container attachment clearfix" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cdiv class\x3d"parent-comment-body hide"\x3e\x3cdiv\x3e\x3ca class\x3d"parent-username router usercard-toggle"\x3e\x3c/a\x3e\x3ca class\x3d"at-user usercard-toggle"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"parent-content"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cspan class\x3d"comment-coord hide"\x3e\x3ci class\x3d"icon-map-marker" title\x3d"\u5730\u7406\u4f4d\u7f6e"\x3e\x3c/i\x3e\x3cspan class\x3d"comment-address gps-address"\x3e\x3c/span\x3e\x3ca class\x3d"comment-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"ft clearfix"\x3e\x3ci class\x3d"comment-client gps-client hide"\x3e\x3c/i\x3e\x3cspan class\x3d"comment-cal time"\x3e\x3c/span\x3e\x3cdiv class\x3d"actions"\x3e\x3ca class\x3d"comment-opt replay" title\x3d"\u5bf9\u672c\u6761\u8bc4\u8bba\u7684\u56de\u590d"\x3e\x3ci class\x3d"icon-chat-3"\x3e\x3c/i\x3e\u56de\u590d\x3cspan class\x3d"comment-comment-count"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"comment-opt transmit" title\x3d"\u8f6c\u53d1\u5230\u6211\u7684\u5de5\u4f5c"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u8f6c\u4efb\u52a1\x3cspan class\x3d"comment-transmit-count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.commentreplay":'\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"comment-comment-clone" class\x3d"replay-box clearfix"\x3e\x3cdiv class\x3d"comment-comment-hearder"\x3e\u56de\u590d\x3ca class\x3d"comment-comment-username usercard-toggle" userId\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content-div"\x3e\x3ctextarea id\x3d"at-comment-content" rows\x3d"3" class\x3d"comment-comment-content form-control bluebox" v-maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-comment-btn-div clearfix"\x3e\x3ca class\x3d"replay-cancel btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca class\x3d"btn-replay btn btn-sm"\x3e\u56de\u590d\x3c/a\x3e\x3cspan class\x3d"commentComment-bottom hide"\x3e\u5f53\u524d\u5df2\u56de\u590d \x3ca class\x3d"commentComment-count"\x3e\x3c/a\x3e \u6b21\uff0c\x3cspan class\x3d"commentComment-history-extend"\x3e\x3cspan\x3e\u5c55\u5f00\x3c/span\x3e\x3ca class\x3d"commentComment-history-extend-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"commentComment-history-collapse hide"\x3e\x3cspan\x3e\u6536\u8d77\x3c/span\x3e\x3ca class\x3d"commentComment-history-collapse-icon icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"commentComment-commented hide"\x3e\x3cdiv class\x3d"commentComment-commented-more hide"\x3e\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"commentScrollPosition"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"transmit-clone" class\x3d"transmit-box clearfix"\x3e\x3cdiv class\x3d"transmit-tab"\x3e\x3cspan\x3e\u8f6c\u53d1\u5230\u4efb\u52a1\u534f\u4f5c\x3c/span\x3e\x3cspan class\x3d"transmit-parent-commenter"\x3e\x3c/span\x3e\x3ca class\x3d"icon-pencil commentreplay-share selector-toggle" data-entity\x3d"employee"\x3e\x3c/a\x3e\x3cspan class\x3d"transmitDuedate-label"\x3e\u5230\u671f\u65e5\uff1a\x3c/span\x3e\x3cinput name\x3d"transmitDuedate" type\x3d"text" class\x3d"datepicker form-control textinput transmitDuedate"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-parent-content hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-content-div"\x3e\x3ctextarea rows\x3d"3" class\x3d"transmit-content bluebox form-control" v-maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-btn-div"\x3e\x3ca class\x3d"transmit-btn btn btn-sm"\x3e\u8f6c\u53d1\x3c/a\x3e\x3ca class\x3d"transmit-cancel btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3cspan class\x3d"transmit-bottom hide"\x3e\u5f53\u524d\u5df2\u8f6c\u53d1 \x3ca class\x3d"transmit-count"\x3e\x3c/a\x3e \u6b21\uff0c\x3cspan class\x3d"transmit-history-extend"\x3e\u5c55\u5f00\x3ca class\x3d"transmit-history-extend-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"transmit-history-collapse hide"\x3e\u6536\u8d77\x3ca class\x3d"transmit-history-collapse-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-transmited hide"\x3e\x3cdiv class\x3d"transmit-transmited-more hide"\x3e\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"transmitScrollPosition"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-commented-clone" class\x3d"comment-commented-box clearfix"\x3e\x3cdiv class\x3d"comment-commented-header"\x3e\x3ca class\x3d"comment-commented-user router" href\x3d"javascript:void(0);"\x3e\x3c/a\x3e\x3cspan class\x3d"comment-commented-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-commented-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"transmited-clone" class\x3d"transmited-box clearfix"\x3e\x3cdiv class\x3d"transmited-header"\x3e\x3ca class\x3d"transmited-user router" href\x3d"javascript:void(0);"\x3e\x3c/a\x3e\x3cspan class\x3d"transmited-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"transmited-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.readinfo":'\x3cdiv id\x3d"readinfo" class\x3d"stream-wrapper"\x3e\x3cdiv class\x3d"read-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"read-more hide"\x3e\x3ca\x3e\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',"base.entitybox":'\x3cdiv id\x3d"entitybox" class\x3d"entitybox modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content j_modal-content"\x3e\x3cdiv class\x3d"modal-header hide"\x3e\x3ca id\x3d"closebox" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"entitybox-container" class\x3d"modal-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.nopermission":'\x3cdiv class\x3d"p-10"\x3e\x3c% if(msg !\x3d null){%\x3e\x3cdiv class\x3d"alert alert-warning alert-block  fade in"\x3e\x3ch4 class\x3d"alert-heading"\x3e\u5bf9\u4e0d\u8d77! \x3c%\x3dmsg.message%\x3e\x3c/h4\x3e\x3c% if(msg.code \x3d\x3d 900){%\x3e\x3cp\x3e\u60a8\u4e0d\u5177\u6709\u5bf9\u5f53\u524d\u5bf9\u8c61\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5982\u679c\u60f3\u7ee7\u7eed\u67e5\u770b\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u6309\u94ae\u5411\u8be5\u4e8b\u9879\u7684\u521b\u5efa\u4eba \u7533\u8bf7\u6743\u9650\u3002\x3c/p\x3e\x3cp\x3e\x3ca class\x3d"btn btn-sm btn-danger share-join" module\x3d"\x3c%\x3dmodule%\x3e" entityId\x3d"\x3c%\x3did%\x3e"\x3e\u7533\u8bf7\u6743\u9650\x3c/a\x3e\x3ca class\x3d"btn btn-back btn-sm j_btn-back"\x3e\u8fd4\u56de\x3c/a\x3e\x3c/p\x3e\x3c%}%\x3e\x3c% if(msg.code \x3d\x3d 102){%\x3e\x3cp\x3e\u60a8\u8bbf\u95ee\u7684\u6570\u636e\u53ef\u80fd\u5df2\u7ecf\u88ab\u5176\u4ed6\u7528\u6237\u5220\u9664\u4e86\u3002\u8bf7\u8fd4\u56de\u7ee7\u7eed\u4e4b\u524d\u7684\u64cd\u4f5c\u3002\x3c/p\x3e\x3cp\x3e\x3ca class\x3d"btn btn-back btn-sm j_btn-back"\x3e\u8fd4\u56de\x3c/a\x3e\x3c/p\x3e\x3c%}%\x3e\x3c/div\x3e\x3c%}%\x3e\x3c%if(msg \x3d\x3d null){%\x3e\x3cdiv class\x3d"alert alert-warning alert-block  fade in"\x3e\x3ch4 class\x3d"alert-heading"\x3e\u5bf9\u4e0d\u8d77!\u6682\u65e0\u6743\u9650 \x3c/h4\x3e\x3cp\x3e\u60a8\u4e0d\u5177\u6709\u5bf9\u5f53\u524d\u9875\u9762\u7684\u8bbf\u95ee\u6743\u9650\u3002\x3c/p\x3e\x3c/div\x3e\x3c%}%\x3e\x3c/div\x3e',
"base.changepwd":'\x3cdiv id\x3d"changepwd-groups" class\x3d"passwd-modal hide modal fade entity-info" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u4fee\u6539\u5bc6\u7801\x3c/h5\x3e\x3c/div\x3e\x3cdiv  class\x3d"modal-body"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u539f\u5bc6\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-oldPwd" type\x3d"password" placeholder\x3d"\u539f\u5bc6\u7801" class\x3d"form-control" v-minlength\x3d"6" v-required\x3dtrue\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u65b0\u5bc6\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-newPwd" type\x3d"password" placeholder\x3d"\u65b0\u5bc6\u7801" class\x3d"form-control" v-equalTo\x3d"#employee-confirmPwd" v-minlength\x3d"6" v-required\x3dtrue\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u5bc6\u7801\u786e\u8ba4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-confirmPwd" class\x3d"form-control" type\x3d"password" placeholder\x3d"\u5bc6\u7801\u786e\u8ba4" v-minlength\x3d"6" v-required\x3dtrue\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"pwd-btn-update" class\x3d"btn btn-sm btn-primary"\x3e\u4fee\u6539\x3c/a\x3e\x3ca id\x3d"pwd-btn-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.resetpwd":'\x3cdiv id\x3d"resetpwd-groups" class\x3d"passwd-modal modal fade form-horizontal entity-info" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u91cd\u7f6e\u5bc6\u7801\x3c/h5\x3e\x3c/div\x3e\x3cdiv  class\x3d"modal-body"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u65b0\u5bc6\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-newPwd-reset" class\x3d"form-control" type\x3d"password" placeholder\x3d"\u65b0\u5bc6\u7801" v-equalTo\x3d"#employee-confirmPwd-reset" v-minlength\x3d"6" v-required\x3dtrue\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u5bc6\u7801\u786e\u8ba4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-confirmPwd-reset" class\x3d"form-control" type\x3d"password" placeholder\x3d"\u5bc6\u7801\u786e\u8ba4" v-minlength\x3d"6" v-required\x3dtrue\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3cbutton id\x3d"pwd-btn-update" type\x3d"submit" class\x3d"btn btn-sm btn-primary"\x3e\u786e\u5b9a\x3c/button\x3e\x3cbutton id\x3d"pwd-btn-cancel" type\x3d"button" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.uploadavatar":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-settings"\x3e\x3c/i\x3e\u5934\u50cf\u8bbe\u7f6e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-photo-view j_userPhotoScr scrollwrapper "\x3e\x3cdiv class\x3d"p-20 clearfix"\x3e\x3cinput type\x3d"hidden" id\x3d"avatar" name\x3d"imageArea.id" /\x3e\x3cdiv class\x3d"avatar-wrapper"\x3e\x3cdiv id\x3d"avatar-img-container"\x3e\x3c/div\x3e\x3cimg id\x3d"avatar-img" class\x3d"avatar-img hide" alt\x3d"\u5934\u50cf"\x3e\x3cdiv class\x3d"avatar-img avatar-note"\x3e\x3cp\x3e\u4f60\u8fd8\u6ca1\u6709\u8bbe\u7f6e\u4e2a\u4eba\u5934\u50cf\uff0c\u8bf7\u6309\u4e0b\u9762\u7684\u6b65\u9aa4\u8bbe\u7f6e\uff1a\x3c/p\x3e\x3cp\x3e\u7b2c\u4e00\u6b65\uff1a\u4ece\u672c\u5730\u9009\u62e9\u7167\u7247\u4e0a\u4f20\x3c/p\x3e\x3cp\x3e\u7b2c\u4e8c\u6b65\uff1a\u5bf9\u7167\u7247\u8fdb\u884c\u526a\u88c1\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-groups"\x3e\x3ca id\x3d"avatar-upload" class\x3d"avatar-upload btn btn-sm btn-primary" title\x3d"\u4e0a\u4f20\u5934\u50cf"\x3e\x3ci class\x3d"icon-upload-alt"\x3e\x3c/i\x3e \u4e0a\u4f20\u5934\u50cf\x3c/a\x3e\x3ca id\x3d"avatar-cut" class\x3d"btn btn-sm btn-info hide" title\x3d"\u88c1\u526a"\x3e\x3ci class\x3d"icon-cut"\x3e\x3c/i\x3e\u88c1\u526a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar-preview-wrapper hide"\x3e\x3cp\x3e\u5934\u50cf\u9884\u89c8(100*100):\x3c/p\x3e\x3cdiv class\x3d"avatar-preview"\x3e\x3cimg class\x3d"avatar-img-preview" alt\x3d"\u5934\u50cf\u9884\u89c8" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.uploadavatarbox":'\x3cdiv id\x3d"upload-avatar-box" class\x3d"upload-avatar-box modal fade"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u66f4\u6362\u5934\u50cf\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',"base.activebox":'\x3cdiv id\x3d"activebox-mask" class\x3d"modal-backdrop fade"\x3e\x3c/div\x3e\x3cdiv id\x3d"activebox" class\x3d"activebox modal fade"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ch5 class\x3d"modal-title"\x3e\u5b8c\u5584\u60a8\u7684\u57fa\u672c\u8d44\u6599\u5e76\u8bbe\u7f6e\u5bc6\u7801\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"activebox-container" class\x3d"modal-body"\x3e\x3cdiv id\x3d"user-info" class\x3d"form-horizontal entity-info user-info"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u59d3 \u540d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"employee-id" name\x3d"employee.id" /\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"employee-username" name\x3d"employee.username" v-required\x3dtrue v-message-name\x3d"\u59d3\u540d"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90ae \u4ef6(\u8d26\u53f7)\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan id\x3d"employee-email" class\x3d"form-control" name\x3d"employee.email"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"passwd" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u5bc6\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"employee-pwd" class\x3d"form-control" type\x3d"password" placeholder\x3d"\u8bbe\u7f6e\u5bc6\u7801" v-equalTo\x3d"#employee-confirmPwd" v-minlength\x3d"6" v-required\x3dtrue v-message-name\x3d"\u5bc6\u7801"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"passwd-confirm" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u5bc6\u7801\u786e\u8ba4\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput class\x3d"form-control" id\x3d"employee-confirmPwd" type\x3d"password" placeholder\x3d"\u5bc6\u7801\u786e\u8ba4" v-minlength\x3d"6" v-required\x3dtrue v-message-name\x3d"\u5bc6\u7801\u786e\u8ba4"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6027 \u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"employee.sex" value\x3d"male" checked\x3d"checked"/\x3e\u7537\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"employee.sex" value\x3d"female" style\x3d"margin-left: 10px;"/\x3e\u5973\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u624b \u673a\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" id\x3d"employee-mobile" name\x3d"employee.mobile" class\x3d"bluebox form-control" v-name\x3d"mobile" v-required\x3dtrue v-message-name\x3d"\u624b\u673a\u53f7\u7801"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7535 \u8bdd\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" id\x3d"employee-telephone" name\x3d"employee.telephone" class\x3d"bluebox form-control" v-maxlength\x3d"50"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8 \u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3cbutton id\x3d"active-user" class\x3d"btn btn-sm btn-primary"\x3e\u6fc0\u6d3b\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.locus":'\x3cdiv id\x3d"mapModal" class\x3d"map-modal modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca id\x3d"closebox" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3cdiv class\x3d"description"\x3e\x3c/div\x3e\x3cdiv class\x3d"month"\x3e\x3cspan\x3e\u5207\u6362\u6708\u4efd\uff1a\x3c/span\x3e\x3cinput id\x3d"map-month" class\x3d"form-control" type\x3d"text" format\x3d"yyyy-mm" startView\x3d"year" minView\x3d"year" readonly\x3d"readonly" maxlength\x3d"8"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"timecard-info scrollwrapper"\x3e\x3cdiv id\x3d"timecard-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"baidumap-test" class\x3d"map-info"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"timecard-li-clone" class\x3d"timecard-li hide"\x3e\x3cdiv class\x3d"signin clearfix"\x3e\x3cdiv class\x3d"time"\x3e\x3c/div\x3e\x3cdiv class\x3d"address ellipsis"\x3e\x3c/div\x3e\x3cdiv class\x3d"state miss"\x3e\u5df2\u7b7e\u5230\x3cspan\x3e09:00\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"signout clearfix"\x3e\x3cdiv class\x3d"address ellipsis"\x3e\x3c/div\x3e\x3cdiv class\x3d"state miss"\x3e\u5df2\u7b7e\u9000\x3cspan\x3e18:00\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.client":'\x3cdiv id\x3d"client-modal" class\x3d"client-modal modal fade form-horizontal" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u5ba2\u6237\u7aef\u4e0b\u8f7d\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body ds-ib-w ta-c"\x3e\x3cdiv class\x3d"control-group ta-l"\x3e\x3clabel\x3eAndroid \u7248\u626b\u63cf\u4e8c\u7ef4\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3cimg alt\x3d"android" src\x3d"/static/img/app/android.png"\x3e\x3c/div\x3e\x3ci\x3e\u4e0b\u8f7d\u5730\u5740\uff1a\x3c/i\x3e\x3ca href\x3d"http://cdn.eteams.cn/upgrade/eteams.apk"\x3e\u70b9\u51fb\u4e0b\u8f7d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group ta-l"\x3e\x3clabel\x3eIOS(AppStore)\u626b\u63cf\u4e8c\u7ef4\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3cimg alt\x3d"AppStore" src\x3d"/static/img/app/qrcode-ios.png"\x3e\x3c/div\x3e\x3ci\x3e\u590d\u5236\u94fe\u63a5\uff1a\x3c/i\x3e\x3ca id\x3d"link-ios-app" data-entity\x3d"https://itunes.apple.com/cn/app/eteams/id821470312?mt\x3d8"\x3e\u5355\u51fb\u590d\u5236\u94fe\u63a5\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group ta-l"\x3e\x3clabel\x3ePC\u5ba2\u6237\u7aef\u4e0b\u8f7d\uff1a\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3cimg alt\x3d"\u5ba2\u6237\u7aef" src\x3d"/static/img/app/client_pc.png"\x3e\x3c/div\x3e\x3ci\x3e\u4e0b\u8f7d\u5730\u5740\uff1a\x3c/i\x3e\x3ca href\x3d"http://cdn.eteams.cn/upgrade/eteams.exe"\x3e\u70b9\u51fb\u6b64\u5904\u4e0b\u8f7d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group ta-l"\x3e\x3clabel\x3eMAC\u5ba2\u6237\u7aef\u4e0b\u8f7d\uff1a\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3cimg alt\x3d"\u5ba2\u6237\u7aef" src\x3d"/static/img/app/client_mac.png"\x3e\x3c/div\x3e\x3ci\x3e\u4e0b\u8f7d\u5730\u5740\uff1a\x3c/i\x3e\x3ca href\x3d"http://cdn.eteams.cn/upgrade/eteams.dmg"\x3e\u70b9\u51fb\u6b64\u5904\u4e0b\u8f7d\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.advise":'\x3cdiv id\x3d"advise" class\x3d"advise modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca id\x3d"closebox" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u610f\u89c1\u53cd\u9988\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"description"\x3e\u60a8\u597d\uff0c\u6b22\u8fce\u5bf9eteams\u4ea7\u54c1\u63d0\u51fa\u5b9d\u8d35\u7684\u610f\u89c1\uff0c\u60a8\u7559\u4e0b\u7684\u6bcf\u4e2a\u5b57\u90fd\u5c06\u7528\u6765\u6539\u5584\u6211\u4eec\u7684\u670d\u52a1\x3c/div\x3e\x3ctextarea id\x3d"advise-textarea" class\x3d"form-control autosize" maxlength\x3d"1200" placeholder\x3d"\u8bf7\u586b\u5199\u610f\u89c1\u53cd\u9988..."\x3e\x3c/textarea\x3e\x3ca class\x3d"advise-submit btn btn-sm btn-success" title\x3d"\u63d0\u4ea4\u610f\u89c1\u53cd\u9988"\x3e\u63d0\u4ea4\u53cd\u9988\x3c/a\x3e\x3ca class\x3d"advise-cancel btn btn-sm" title\x3d"\u53d6\u6d88"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.versioninfo":'\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-dynamic"\x3e\x3c/i\x3e\u7cfb\u7edf\u66f4\u65b0\u52a8\u6001\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"versioninfo"\x3e\x3cul class\x3d"nav nav-tabs version-tabs"\x3e\x3cli class\x3d"pc active" data-type\x3d"pc"\x3e\x3ca \x3epc\u7248\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"android" data-type\x3d"android"\x3e\x3ca \x3e\u5b89\u5353\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"iphone" data-type\x3d"iphone"\x3e\x3ca \x3eiphone\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"eiphone" data-type\x3d"eiphone"\x3e\x3ca \x3eiphone\u4f01\u4e1a\u7248\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"windows"\x3e\x3ca \x3ewindows\u5ba2\u6237\u7aef\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"mac"\x3e\x3ca \x3emac\u5ba2\u6237\u7aef\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv id\x3d"version-container" class\x3d"scrollwrapper bg-white active"\x3e\x3cul class\x3d"cbp_tmtimeline"\x3e\x3c/ul\x3e\x3cdiv id\x3d"version-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"version-clone"\x3e\x3ctime class\x3d"cbp_tmtime"\x3e\x3cspan class\x3d"year"\x3e\x3c/span\x3e \x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/time\x3e\x3cdiv class\x3d"cbp_tmicon"\x3e\x3c/div\x3e\x3cdiv class\x3d"cbp_tmlabel"\x3e\x3ch2 class\x3d"version"\x3e\x3c/h2\x3e\x3cp class\x3d"content"\x3e\u65b0\u7248\u672c\u53d1\u5e03\x3c/p\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"noresult"\x3e\x3ctime class\x3d"cbp_tmtime"\x3e\x3cspan class\x3d"year"\x3e\x3c/span\x3e \x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/time\x3e\x3cdiv class\x3d"cbp_tmicon"\x3e\x3c/div\x3e\x3cdiv class\x3d"cbp_tmlabel"\x3e\x3ch2 class\x3d"version"\x3e\u5c1a\u672a\u53d1\u5e03\x3c/h2\x3e\x3cp class\x3d"content"\x3e\u656c\u8bf7\u671f\u5f85\x3c/p\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"base.accountbinding":'\x3cdiv id\x3d"accountbinding" class\x3d"passwd-modal modal fade form-horizontal entity-info"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv id\x3d"binding" class\x3d"hide"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u7ed1\u5b9a\u90ae\u7bb1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"passwd-modal-tip"\x3e\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u7684\u5e10\u53f7\u5b89\u5168\uff0c\u66f4\u6362\u5bc6\u4fdd\u624b\u673a\u524d\u8bf7\u5148\u8fdb\u884c\u5b89\u5168\u9a8c\u8bc1\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label changeTitle_js" for\x3d"inputPassword"\x3e\u90ae\u7bb1\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"controls-line-wrapper"\x3e\x3cinput class\x3d"form-control mb-5" id\x3d"bindingChange" type\x3d"text" placeholder\x3d"\u90ae\u7bb1" v-name\x3d"email"\x3e\x3c/div\x3e\x3ca class\x3d"sendCaptcha_js btn btn-sm nomg"\x3e\u53d1\u9001\u9a8c\u8bc1\u7801\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u9a8c\u8bc1\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"captcha" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u9a8c\u8bc1\u7801"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"updateBinding" class\x3d"btn btn-sm btn-primary"\x3e\u786e\u5b9a\x3c/a\x3e \x3ca class\x3d"btn btn-sm" data-dismiss\x3d"modal"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"change" class\x3d"hide"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u91cd\u7f6e\u90ae\u7bb1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"passwd-modal-tip"\x3e\u4e3a\u4e86\u4fdd\u8bc1\u60a8\u7684\u5e10\u53f7\u5b89\u5168\uff0c\u66f4\u6362\u5bc6\u4fdd\u624b\u673a\u524d\u8bf7\u5148\u8fdb\u884c\u5b89\u5168\u9a8c\u8bc1\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label changeTitle_js" for\x3d"inputPassword"\x3e\u90ae\u7bb1\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"oldProperty" class\x3d"controls-textspan mr-30"\x3e454389701@qq.com\x3c/div\x3e\x3ca class\x3d"sendCaptcha_js btn btn-sm nomg"\x3e\u53d1\u9001\u9a8c\u8bc1\u7801\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"inputPassword"\x3e\u9a8c\u8bc1\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"captcha" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u9a8c\u8bc1\u7801"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"oldVeri" class\x3d"btn btn-sm btn-primary"\x3e\u786e\u5b9a\x3c/a\x3e \x3ca class\x3d"btn btn-sm" data-dismiss\x3d"modal"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.relogin":'\x3cdiv id\x3d"relogin" class\x3d"modal fade modal-relogin" data-backdrop\x3d"static"  tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog mt-150"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca id\x3d"closebox" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u91cd\u65b0\u767b\u5f55\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"relogin-container" class\x3d"modal-body"\x3e\x3cdiv id\x3d"message" class\x3d"message c-danger mb-20"\x3e\x3ci class\x3d"glyphicon icon-info-sign"\x3e\x3c/i\x3e\u5f53\u524d\u4f1a\u8bdd\u5df2\u7ecf\u5931\u6548\u4e86\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\x3c/div\x3e\x3cdiv id\x3d"login-div" class\x3d"form-horizontal hide"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"username"\x3e\u5e10 \u6237:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput class\x3d"form-control" type\x3d"text" id\x3d"username" name \x3d "username" value\x3d"" readonly/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label" for\x3d"password"\x3e\u5bc6 \u7801:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput class\x3d"form-control" type\x3d"password" id\x3d"password" name \x3d "password" placeholder\x3d"\u8bf7\u8f93\u5165\u5bc6\u7801" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mt-30 ml-50"\x3e\x3cbutton id\x3d"btn-submit" type\x3d"button" class\x3d"btn btn-primary "\x3e\u91cd\u65b0\u767b\u5f55\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.print":'\x3cdiv id\x3d"print-toolbar" class\x3d"hide js_toolbar"\x3e\x3cdiv class\x3d"grid-1000"\x3e\x3cdiv id\x3d"printFont" class\x3d"changeFont fr"\x3e\x3cspan class\x3d"mr-5"\x3e\u5b57\u53f7:\x3c/span\x3e\x3ca font-item\x3d"big"\x3e\u5927\x3c/a\x3e\x3ca font-item\x3d"medium" class\x3d"active"\x3e\u4e2d\x3c/a\x3e\x3ca font-item\x3d"small"\x3e\u5c0f\x3c/a\x3e\x3c/div\x3e\x3ca class\x3d"btn btn-sm btn-success mr-10 js_print"\x3e\x3ci class\x3d"glyphicon icon-print"\x3e\x3c/i\x3e\u6253\u5370\x3c/a\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" checked\x3d"checked" class\x3d"js_printcomment"\x3e\u662f\u5426\u6253\u5370\u8bc4\u8bba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline hide" id\x3d"js_printblog"\x3e\x3cinput type\x3d"checkbox" checked\x3d"checked" class\x3d"js_printblog"\x3e\u662f\u5426\u6253\u5370\u672c\u5468\u5de5\u4f5c\u62a5\u544a\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"print" class\x3d"grid-1000 mb-30"\x3e\x3c/div\x3e\x3cdiv class\x3d"print-mask"\x3e\x3c/div\x3e',
"base.formdatalog":'\x3cdiv id\x3d"dataLog" class\x3d"stream-wrapper"\x3e\x3cdiv class\x3d"stream-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"stream-more common-more m-15 hide"\x3e\x3ca\x3e\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dataLog-clone" class\x3d"stream-box hide"\x3e\x3cdiv class\x3d"stream-top"\x3e\x3ca class\x3d"stream-user router usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"stream-message"\x3e\x3c/span\x3e\x3cspan class\x3d"stream-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"stream-detail"\x3e\x3c/div\x3e\x3c/div\x3e',
"base.servicenumber":'\x3cdiv id\x3d"servnum"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-settings"\x3e\x3c/i\x3e\u6d88\u606f\u8bbe\u7f6e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"message-set-view" class\x3d"message-set-view scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"swicth-set-list card mb-20"\x3e\x3cdiv class\x3d"list-title bold"\x3e\u5fae\u4fe1\u670d\u52a1\u53f7\u63a8\u9001\u63d0\u9192\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range open fr j_ser_num"\x3e\x3c/div\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u670d\u52a1\u53f7\u6d88\u606f\u63a8\u9001\uff08\u7ed1\u5b9a\u670d\u52a1\u53f7\u540e\u751f\u6548\uff09\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"swicth-set-list card mb-20"\x3e\x3cdiv class\x3d"list-title bold"\x3e\u624b\u673a\u5ba2\u6237\u7aef\u63a8\u9001\u63d0\u9192\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr comment_message_push_set"\x3e\x3c/div\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u8bc4\u8bba\u6d88\u606f\u63a8\u9001\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr agenda_push_set"\x3e\x3c/div\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u65e5\u7a0b\u6d88\u606f\u63a8\u9001\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr workreport_push_set"\x3e\x3c/div\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u62a5\u544a\u6d88\u606f\u63a8\u9001\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"swicth-set-list card mb-20"\x3e\x3cdiv class\x3d"list-title bold"\x3e\u9879\u76ee\u3001\u4efb\u52a1\u53ca\u65e5\u7a0b\u63d0\u9192\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr personal_mainline_expire"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u9879\u76ee\u5230\u671f\u65e5\u524d\x3c/span\x3e\x3cinput class\x3d"earlytime is_personal_mainline_expire personal_blur form-control"/\x3e\x3cspan\x3e\u5929\u63d0\u9192\u6211\uff0c \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col2"\x3e\x3cspan\x3e\u5305\u62ec\u6211\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col3"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"createRemind is_personal_mainline_expire personal_click mr-0" \x3e \u521b\u5efa\u7684\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"primaryRemind is_personal_mainline_expire personal_click mr-0"\x3e \u8d1f\u8d23\u7684\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"participantsRemind is_personal_mainline_expire personal_click mr-0"\x3e \u53c2\u4e0e\u7684\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr personal_task_expire"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u4efb\u52a1\u5230\u671f\u65e5\u524d\x3c/span\x3e\x3cinput class\x3d"earlytime is_personal_task_expire personal_blur form-control"/\x3e\x3cspan\x3e\u5929\u63d0\u9192\u6211\uff0c \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col2"\x3e\x3cspan\x3e\u5305\u62ec\u6211\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col3"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"createRemind is_personal_task_expire personal_click mr-0"\x3e \u521b\u5efa\u7684\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"primaryRemind is_personal_task_expire personal_click mr-0"\x3e \u8d1f\u8d23\u7684\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"participantsRemind is_personal_task_expire personal_click mr-0"\x3e \u53c2\u4e0e\u7684\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr personal_calendar_start"\x3e\x3c/div\x3e\x3cspan\x3e\u65e5\u7a0b\u8d77\u59cb\u65e5\u671f\u524d\x3c/span\x3e\x3cselect class\x3d"remindTime form-control acl-disabled"\x3e\x3coption value\x3d"10_minute"\x3e10\u5206\u949f\x3c/option\x3e\x3coption value\x3d"30_minute"\x3e30\u5206\u949f\x3c/option\x3e\x3coption value\x3d"1_hour"\x3e1\u5c0f\u65f6\x3c/option\x3e\x3coption value\x3d"3_hour"\x3e3\u5c0f\u65f6\x3c/option\x3e\x3coption value\x3d"1_day"\x3e1\u5929\x3c/option\x3e\x3coption value\x3d"2_day"\x3e2\u5929\x3c/option\x3e\x3coption value\x3d"3_day"\x3e3\u5929\x3c/option\x3e\x3c/select\x3e\x3cspan\x3e\u63d0\u9192\u6211\x3c/span\x3e\x3cdiv class\x3d"pt-5"\x3e\x3ci class\x3d"icon-help" title\x3d\'\u63d0\u524d\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e1\u5929\uff0c\u5168\u5929\u65e5\u7a0b\u5c06\u5728\u65e5\u7a0b\u8d77\u59cb\u65f6\u95f4\u5f53\u59298\u70b9\u53d1\u9001\u63d0\u9192\uff1b\u63d0\u524d\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u5927\u4e8e\u3001\u7b49\u4e8e1\u5929\uff0c\u5168\u5929\u65e5\u7a0b\u5c06\u5728\u63d0\u524d\u65e5\u671f\u5f53\u59298\u70b9\u53d1\u9001\u63d0\u9192\u3002\u975e\u5168\u5929\u65e5\u7a0b\u6309\u8bbe\u7f6e\u7684\u63d0\u524d\u65f6\u95f4\u6765\u53d1\u9001\u63d0\u9192\u3002\'data-toggle\x3d"tooltip" data-placement\x3d"right" data-template\x3d\'\x3cdiv class\x3d"tooltip i-tooltip" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow i-tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner i-tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e\'\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell tray-tips"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u7cfb\u7edf\u9ed8\u8ba4\u901a\u8fc7\u670d\u52a1\u53f7\u63a8\u9001\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u6d88\u606f\u63a8\u9001\u7684\u6e20\u9053\u4ee5\u53ca\u63a8\u9001\u7684\u5185\u5bb9 \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.portalsetting":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-settings"\x3e\x3c/i\x3e\u9996\u9875\u6a21\u5757\u663e\u793a\u8bbe\u7f6e\x3c/div\x3e\x3ca class\x3d"close portal-setting-close hide" data-dismiss\x3d"modal"\x3e\x26times;\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"module-set-view"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"module-set-list"\x3e\x3cul id\x3d\'sortmenus\'\x3e\x3c% for(var i\x3d0,len\x3dportalSetting.length;i\x3clen;i++) {%\x3e\x3cli class\x3d\'on_off cs-m\'\x3e\x3cspan class\x3d\'middle_helper\'\x3e\x3c/span\x3e\x3cspan data-id\x3d\'\x3c%\x3d portalSetting[i].id %\x3e\' class\x3d\'menu_name\'\x3e\x3c%\x3d portalSetting[i].name %\x3e\x3c/span\x3e\x3cinput  type\x3d"checkbox" \x3c% if(portalSetting[i].isShow \x3d\x3d\x3d "1") {%\x3e checked\x3d\'checked\' \x3c% } %\x3e/\x3e\x3c/li\x3e\x3c% } %\x3e\x3c/ul\x3e\x3cdiv class\x3d"reset-portalsetting mt-20"\x3e\x3ca class\x3d"btn btn-sm btn-success" href\x3d"#"\x3e\u6062\u590d\u9ed8\u8ba4\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell view-side"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e1. \u901a\u8fc7\u5f00\u5173\uff0c\u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9996\u9875\u6a21\u5757\u663e\u793a \x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u6a21\u5757\u5bf9\u5e94\u7684\u5f00\u5173\u6253\u5f00\uff0c\u5219\u5728\u9996\u9875\u4e2d\u663e\u793a\u8be5\u6a21\u5757\uff0c\u53cd\u4e4b\u5219\u4e0d\u663e\u793a\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.applytenants":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-settings"\x3e\x3c/i\x3e\u7533\u8bf7\u52a0\u5165\u56e2\u961f\u5217\u8868\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_apply_tenants" class\x3d"module-set-view scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell nodata-holder"\x3e\x3cdiv class\x3d"j_module_list module-set-list"\x3e\x3cul id\x3d\'j_applylist\' class\x3d"applylist-ul"\x3e\x3cli class\x3d\'on_off cs-m j_applyinfo_li\'\x3e\x3cspan class\x3d"teamsname"\x3e\u56e2\u961f\u540d\u79f0\x3c/span\x3e\x3cspan class\x3d"applydate"\x3e\u7533\u8bf7\u65f6\u95f4\x3c/span\x3e\x3cspan class\x3d"status"\x3e\u72b6\u6001\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_no_result no-result hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u7533\u8bf7\u52a0\u5165\u5176\u5b83\u56e2\u961f !\x3c/h4\x3e\x3cp class\x3d"small"\x3eeteams \u53ef\u8ba9\u60a8\u5b9e\u73b0\u591a\u56e2\u961f\u534f\u4f5c !\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_joinOrCreate"\x3e\u7533\u8bf7\u52a0\u5165\u6216\u521b\u5efa\u56e2\u961f\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more j_moredocument hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-more" style\x3d"text-align: center;"\x3e\u5df2\u52a0\u8f7d\u6240\u6709\u56e2\u961f\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"j_tenant_li_clone" class\x3d\'on_off j_applyinfo_li\'\x3e\x3cspan class\x3d\'j_name teamsname\'\x3e\u4e0a\u6d77\u6cdb\u5fae\u8f6f\u4ef6\u6709\u9650\u516c\u53f8\x3c/span\x3e\x3cspan class\x3d"j_date applydate"\x3e2015-09-18\x3clable\x3e13:29\x3c/lable\x3e\x3c/span\x3e\x3cspan class\x3d"j_status_span status"\x3e\x3cinput type\x3d"button" class\x3d"j_tip j_cancel_apply btn btn-sm btn-warning" value\x3d"\u53d6\u6d88\u52a0\u5165\u7533\u8bf7"/\x3e\x3cspan class\x3d"j_tip j_accepted"\x3e\u5df2\u63a5\u53d7\x3c/span\x3e\x3cspan class\x3d"j_tip j_refused"\x3e\u5df2\u62d2\u7edd\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell view-side"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e1. \u60a8\u53ef\u4ee5\u8ddf\u8e2a\u7533\u8bf7\u5176\u5b83\u52a0\u5165\u56e2\u961f\u7684\u5904\u7406\u7ed3\u679c\uff1b \x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u5bf9\u4e8e\u8fd8\u672a\u5904\u7406\u7684\u52a0\u5165\u7533\u8bf7\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb\u201c\u53d6\u6d88\u52a0\u5165\u7533\u8bf7\u201d\u6309\u94ae\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"base.quittransfer":'\x3cdiv class\x3d"module-detail-view quittransfer-detail-view"\x3e\x3cdiv class\x3d"quittransferContainer"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv\x3e\x3cdiv class\x3d"detail-brand mt-15"\x3e\u5de5\u4f5c\u4ea4\u63a5\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d\'\x3cdiv class\x3d"e-row ta-l"\x3e1.\u5bf9\u4e8e\u672a\u5b8c\u6210\u4e8b\u60c5\u7684\u4ea4\u63a5\uff0c\u5c06\u88ab\u4ea4\u63a5\u4eba\u66ff\u6362\u4e3a\u4ea4\u63a5\u4eba\uff1b\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e2.\u5bf9\u4e8e\u5df2\u5b8c\u6210\u4e8b\u60c5\u7684\u4ea4\u63a5\uff0c\u5c06\u4ea4\u63a5\u4eba\u6dfb\u52a0\u4e3a\u4e8b\u9879\u7684\u5171\u4eab\u4eba\x3c/div\x3e\' \x3e\x3c/i\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-body j_quittransferScr"\x3e\x3cdiv class\x3d"notes"\x3e\u3010\x3cspan class\x3d"js_quitUser"\x3e\x3c/span\x3e\u3011\u5728\u60a8\u7684\u56e2\u961f\u4e2d\u6709\u53c2\u4e0e\u8fc7\u4e8b\u9879\uff0c\u60a8\u53ef\u5c06\u5176\u5de5\u4f5c\u4ea4\u63a5\u7ed9\u5176\u4ed6\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"detail-block"\x3e\x3cdiv class\x3d"detail-infos"\x3e\x3cdl class\x3d"info-item clearfix"\x3e\x3cdt\x3e\x3cspan\x3e\u6279\u91cf\u8bbe\u7f6e\u4ea4\u63a5\u4eba\u5458\uff1a\x3c/span\x3e\x3c/dt\x3e\x3cdd style\x3d"margin-left: 112px"\x3e\x3cdiv class\x3d"ml-10 js_employee js_all_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"notes"\x3e\u4ea4\u63a5\u5217\u8868\uff08\u60a8\u53ef\u8bbe\u7f6e\u4ea4\u63a5\u7684\u5185\u5bb9\uff0c\u70b9\u51fb\u4ea4\u63a5\u5185\u5bb9\uff0c\u53ef\u67e5\u770b\u5177\u4f53\u4ea4\u63a5\u7684\u660e\u7ec6\uff09\x3c/div\x3e\x3cdiv class\x3d"trashbinlogContent"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item"\x3e\u662f\u5426\u4ea4\u63a5\x3c/div\x3e\x3cdiv class\x3d"item whodo"\x3e\u4ea4\u63a5\u6a21\u5757\x3c/div\x3e\x3cdiv class\x3d"item opt"\x3e\u4ea4\u63a5\u5185\u5bb9\x3c/div\x3e\x3cdiv class\x3d"item time"\x3e\u4ea4\u63a5\u4eba\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"js_quitTransfer_content scrollwrapper"\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox" checked\x3d"true" readonly\x3d"true"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "workflow"\x3e\u5ba1\u6279\u6d41\u7a0b\x3c/div\x3e\x3cdiv class\x3d"item js_sequence js_type" flowFilter\x3d"flowSequence" type\x3d"mine"\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper text-left hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "workflow"\x3e\u5ba1\u6279\u6d41\u7a0b\x3c/div\x3e\x3cdiv class\x3d"item opt js_todo_flow js_type" flowFilter\x3d"todo" type\x3d"mine"\x3e\u5f85\u529e\u5ba1\u6279\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper text-left hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "workflow"\x3e\u5ba1\u6279\u6d41\u7a0b\x3c/div\x3e\x3cdiv class\x3d"item opt js_done_flow js_type" flowFilter\x3d"finished" type\x3d"mine"\x3e\u5df2\u529e\u5ba1\u6279\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide  text-left"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "mainline"\x3e\u76ee\u6807\u9879\u76ee\x3c/div\x3e\x3cdiv class\x3d"item opt js_todo_mainline js_type" status\x3d"open" type\x3d"mine"\x3e\u672a\u5173\u95ed\u9879\u76ee\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper text-left hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "mainline"\x3e\u76ee\u6807\u9879\u76ee\x3c/div\x3e\x3cdiv class\x3d"item opt js_done_mainline js_type" type\x3d"mineFinished"\x3e\u5df2\u5173\u95ed\u9879\u76ee\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide  text-left"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "task"\x3e\u4efb\u52a1\u534f\u4f5c\x3c/div\x3e\x3cdiv class\x3d"item opt js_todo_task js_type" taskStatus\x3d"todo" type\x3d"mine"\x3e\u672a\u5b8c\u6210\u4efb\u52a1\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper text-left hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-sub js_line"\x3e\x3cul class\x3d""\x3e\x3cli\x3e\x3cdiv class\x3d"item"\x3e\x3cinput class\x3d"js_check" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_module" module \x3d "task"\x3e\u4efb\u52a1\u534f\u4f5c\x3c/div\x3e\x3cdiv class\x3d"item opt js_done_task js_type" taskStatus\x3d"todo" type\x3d"mineFinished"\x3e\u5df2\u5b8c\u6210\u4efb\u52a1\x3c/div\x3e\x3cdiv class\x3d"item js_employee"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide  text-left"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"" data-multi\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3cdiv id\x3d"js_quit_transfer" class\x3d"js_quit_transfer loading_small quittransfer-view-loading hide"\x3e\x3cspan\x3e\u6b63\u5728\u5de5\u4f5c\u4ea4\u63a5\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_quit_transfer quittransfer-view-bg hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mt-20"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"fr toolkit-item last"\x3e\x3ca class\x3d"btn" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca class\x3d"btn btn-primary js_confirm"\x3e\u786e\u5b9a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"entityContainer quittransferDetailContainer hide"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u5de5\u4f5c\u4ea4\u63a5\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli class\x3d"icon-reply-li j_entity_reply"\x3e\x3ca title\x3d"\u8fd4\u56de" id\x3d"" class\x3d""\x3e\x3ci class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-body"\x3e\x3cdiv id\x3d"" class\x3d"trashbinlogContent"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul "\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item entity_list_tit_name"\x3e\u5ba1\u6279\u540d\u5b57\x3c/div\x3e\x3cdiv class\x3d"item entity_list_tit_person"\x3e\u7533\u8bf7\u4eba\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"scrollwrapper js_entityBobyScr"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"js_entity_list"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data" class\x3d"table-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"entityListClone hide"\x3e\x3cli\x3e\x3cdiv class\x3d"item js_sort"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item js_entity " data-module\x3d"" data-id\x3d""\x3e\u5ba1\u6279\u540d\u5b57\x3c/div\x3e\x3cdiv class\x3d"item js_entity_creator"\x3e\u7533\u8bf7\u4eba\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"entityDetailContainer quittransfer-detailcontainer hide"\x3e\x3c/div\x3e\x3c/div\x3e',
"org.page":'\x3cdiv class\x3d"module-view" id\x3d"org_container"\x3e\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"aside-content scrollwrapper"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-user"\x3e\x3c/i\x3e\u56e2\u961f\u6210\u5458\u8bbe\u7f6e\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"router j_user" href\x3d"/organization"\x3e\x3ca class\x3d"link-item"\x3e\u56e2\u961f\u7ed3\u6784\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_invitation" href\x3d"/organization/\x3c%\x3duserId%\x3e/invitation"\x3e\x3ca class\x3d"link-item"\x3e\u9080\u8bf7\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_position" href\x3d"/organization/tree/position"\x3e\x3ca class\x3d"link-item"\x3e\u5c97\u4f4d\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv class\x3d"main j_main"\x3e\x3cdiv class\x3d"main-hd hide"\x3e\x3ca class\x3d"btn btn-sm btn-success minw-80 fr invite-toggle"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-remind"\x3e\x3c/i\x3e\u56e2\u961f\u4eba\u5458\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"org-main-bd" class\x3d"main-bd"\x3e\x3cdiv class\x3d"main-content"\x3e\x3cdiv class\x3d"org-view-wrapper card table-tray"\x3e\x3cdiv class\x3d"org-left-col tray-cell j_depa"\x3e\x3c/div\x3e\x3cdiv class\x3d"org-right-col tray-cell j_user"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"invite-main-bd" class\x3d"main-bd"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"org.user":'\x3cdiv class\x3d"user-sort-view j-user-list"\x3e\x3cdiv class\x3d"user-sortbar"\x3e\x3cspan id\x3d"group-user-checkall" class\x3d"hide"\x3e\x3cinput id\x3d"checkAll" class\x3d"user-id" type\x3d"checkbox"\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e\u6210\u5458\u5217\u8868\x3c/span\x3e\x3cspan class\x3d"users-list-pinyin"\x3e\x3ca class\x3d"highlight" id\x3d"ALL"\x3e\u5168\u90e8\x3c/a\x3e\x3ca id\x3d"degit"\x3e#\x3c/a\x3e\x3ca id\x3d"A"\x3eA\x3c/a\x3e\x3ca id\x3d"B"\x3eB\x3c/a\x3e\x3ca id\x3d"C"\x3eC\x3c/a\x3e\x3ca id\x3d"D"\x3eD\x3c/a\x3e\x3ca id\x3d"E"\x3eE\x3c/a\x3e\x3ca id\x3d"F"\x3eF\x3c/a\x3e\x3ca id\x3d"G"\x3eG\x3c/a\x3e\x3ca id\x3d"H"\x3eH\x3c/a\x3e\x3ca id\x3d"I"\x3eI\x3c/a\x3e\x3ca id\x3d"J"\x3eJ\x3c/a\x3e\x3ca id\x3d"K"\x3eK\x3c/a\x3e\x3ca id\x3d"L"\x3eL\x3c/a\x3e\x3ca id\x3d"M"\x3eM\x3c/a\x3e\x3ca id\x3d"N"\x3eN\x3c/a\x3e\x3ca id\x3d"O"\x3eO\x3c/a\x3e\x3ca id\x3d"P"\x3eP\x3c/a\x3e\x3ca id\x3d"Q"\x3eQ\x3c/a\x3e\x3ca id\x3d"R"\x3eR\x3c/a\x3e\x3ca id\x3d"S"\x3eS\x3c/a\x3e\x3ca id\x3d"T"\x3eT\x3c/a\x3e\x3ca id\x3d"U"\x3eU\x3c/a\x3e\x3ca id\x3d"V"\x3eV\x3c/a\x3e\x3ca id\x3d"W"\x3eW\x3c/a\x3e\x3ca id\x3d"X"\x3eX\x3c/a\x3e\x3ca id\x3d"Y"\x3eY\x3c/a\x3e\x3ca id\x3d"Z"\x3eZ\x3c/a\x3e\x3c/span\x3e\x3clabel class\x3d"checkbox users-list-checkbox"\x3e\x3cinput type\x3d"checkbox" id\x3d"chk2" title\x3d"\u542b\u79bb\u804c\u4eba\u5458"\x3e\x3ci\x3e\u542b\u79bb\u804c\x3cspan\x3e\u4eba\u5458\x3c/span\x3e\x3c/i\x3e\x3c/label\x3e\x3clabel class\x3d"checkbox users-list-checkbox"\x3e\x3cinput type\x3d"checkbox" id\x3d"chk3" title\x3d"\u4ec5\u663e\u793a\u7ba1\u7406\u5458"\x3e\x3ci\x3e\u4ec5\u663e\u793a\u7ba1\u7406\u5458\x3c/i\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"user-container" class\x3d"users-container"\x3e\x3cdiv id\x3d"employee-container"\x3e\x3cul class\x3d"employee-list users-list"\x3e\x3cli class\x3d"list-tit clearfix"\x3e\x3cdiv class\x3d"col-4 item username"\x3e\u59d3\u540d\x3c/div\x3e\x3cdiv class\x3d"col-4 item call"\x3e\u8054\u7cfb\u65b9\u5f0f\x3c/div\x3e\x3cdiv class\x3d"col-4 item dept"\x3e\u90e8\u95e8\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"j_userlistScr scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv id\x3d"userlistCon"\x3e\x3cdiv id\x3d"list-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"center-more hide"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"usersListClone" class\x3d"hide"\x3e\x3cli id\x3d"groupUserClone" class\x3d"clearfix"\x3e\x3cdiv class\x3d"col-4 item username ellipsis"\x3e\x3ca\x3e\x3cinput type\x3d"checkbox" name\x3d"userids" class\x3d"user-id hide"/\x3e\x3c/a\x3e\x3ca class\x3d"avatar usercard-toggle"  userId\x3e\x3cimg alt\x3d"avatar" title\x3d"\u67e5\u770b\u5361\u7247\u4fe1\u606f" src\x3d"https://www.eteams.cnimages/avatar.png"\x3e\x3c/a\x3e\x3ca class\x3d"name j_entityslider-toggle" userid\x3d"" data-id\x3d"" data-module\x3d"profile" title\x3d"\u67e5\u770b\u4ed6\u7684\u8d44\u6599"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"col-4 item call ellipsis"\x3e\x3c/div\x3e\x3cdiv class\x3d"col-4 item dept ellipsis"\x3e\x3c/div\x3e\x3cspan class\x3d"follow-btns"\x3e\x3cspan class\x3d"approved hide" title\x3d"\u5df2\u5173\u6ce8\uff0c\u70b9\u51fb\u53d6\u6d88\u5173\u6ce8"\x3e\x3ci class\x3d"icon-ok"\x3e\x3c/i\x3e \u5df2\u5173\u6ce8 |\x3ca class\x3d"btn-unfollow-cancle"\x3e \u53d6\u6d88\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"unapproved hide" title\x3d"\u5df2\u53d1\u9001\u5173\u6ce8\u7533\u8bf7"\x3e\u5df2\u7533\u8bf7\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"none btn-follow-add hide" title\x3d"\u70b9\u51fb\u6dfb\u52a0\u5173\u6ce8"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e \u6dfb\u52a0\u5173\u6ce8\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3cdiv class\x3d"user-invitation-tip"\x3e\x3cp\x3eTA\u6ca1\u6709\u6536\u5230\u9080\u8bf7\u90ae\u4ef6\uff1f  \x3ca class\x3d"user-invitation-resend"\x3e\u91cd\u65b0\u53d1\u9001\x3c/a\x3e\x3c/p\x3e\x3cP\x3e\u6216\u8005\u5c06\u4e0b\u9762\u7684\u9080\u8bf7\u5730\u5740\u76f4\u63a5\u53d1\u7ed9TA:\x3c/P\x3e\x3ca id\x3d"user-invitation-link"\x3ehttp://www.eteams.cn\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"org.invitation":'\x3cdiv id\x3d"invitations-container" class\x3d"users-container"\x3e\x3cul class\x3d"users-list"\x3e\x3cli class\x3d"list-tit clearfix"\x3e\x3cdiv class\x3d"col-3 item username"\x3e\u59d3\u540d\x3c/div\x3e\x3cdiv class\x3d"col-3 item dept"\x3e\u8054\u7cfb\u65b9\u5f0f\x3c/div\x3e\x3cdiv class\x3d"col-3 item call"\x3e\u9080\u8bf7\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"col-3 item dept"\x3e\u72b6\u6001\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"no-result hide" style\x3d"border-bottom:0px"\x3e\u65e0\u76f8\u5173\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"invitelistCon" class\x3d"scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv class\x3d"j_invite_list"\x3e\x3cli class\x3d"clearfix"\x3e\x3cdiv class\x3d"col-3 item username"\x3e\x3ca class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" alt\x3d"avatar"\x3e\x3c/a\x3e\x3ca\x3e\u5eb7\u6653\u9e3d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"col-3 item dept"\x3e15998888888\x3c/div\x3e\x3cdiv class\x3d"col-3 item call"\x3e2015-7-13\x3c/div\x3e\x3cdiv class\x3d"col-3 item dept"\x3e\u5df2\u63a5\u53d7\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv class\x3d"invitation-more center-more hide"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3cdiv id\x3d"no-result" class\x3d"guide-div hide"\x3e\u8fd8\u6ca1\u6709\u9080\u8bf7\u4fe1\u606f\uff0c\u8d76\u7d27\u9080\u8bf7\u540c\u4e8b\u4e00\u8d77\u52a0\u5165\u5427...\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"invitationListClone" class\x3d"hide"\x3e\x3cli class\x3d"clearfix"\x3e\x3cdiv class\x3d"col-3 item username"\x3e\x3ca class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" alt\x3d"avatar"\x3e\x3c/a\x3e\x3ca\x3e\u5eb7\u6653\u9e3d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"col-3 item call"\x3e15998888888\x3c/div\x3e\x3cdiv class\x3d"col-3 item date"\x3e2015-7-13\x3c/div\x3e\x3cdiv class\x3d"col-3 item dept"\x3e\x3ca class\x3d"btn btn-sm btn-warning j_invite_copy"\x3e\u590d\u5236\u94fe\u63a5\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-warning j_invite_send"\x3e\u91cd\u65b0\u9080\u8bf7\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-danger j_invite_delete"\x3e\u5220\u9664\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"org.department":'\x3cdiv class\x3d"dept-hd"\x3e\u7f16\u8f91\u90e8\u95e8\x3c/div\x3e\x3cdiv id\x3d"department-info" class\x3d"form-horizontal scrollwrapper entity-info entity-info-w2 department-info hide"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"department-id" name\x3d"department.id" value\x3d""/\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"department-name" name\x3d"department.name" placeholder\x3d"\u90e8\u95e8\u540d\u79f0"  /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8\u7f16\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control w-80" id\x3d"department-code" name\x3d"department.code" placeholder\x3d"\u90e8\u95e8\u7f16\u7801" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u663e\u793a\u987a\u5e8f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control w-80" id\x3d"department-disporder" name\x3d"department.disporder" placeholder\x3d"\u663e\u793a\u987a\u5e8f" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group mark" id\x3d"department-root"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a\u7ea7\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"department-parent" name\x3d"department.parent.id" /\x3e\x3cdiv class\x3d"entity-container" id\x3d"departmentSelector"\x3e\x3ca data-value\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-department" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn btn btn-sm" title\x3d"\u4fee\u6539\u90e8\u95e8"\x3e\x3ca class\x3d"icon-pencil" \x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8\u7ecf\u7406\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn btn btn-sm" title\x3d"\u4fee\u6539\u90e8\u95e8\u7ecf\u7406"\x3e\x3ca class\x3d"icon-pencil" \x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group "\x3e\x3clabel class\x3d"control-label"\x3e\u5907 \u6ce8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea class\x3d"form-control" id\x3d"department-description" name\x3d"department.description" rows\x3d"4"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-info-read" class\x3d"form-horizontal entity-info department-info hide"\x3e\x3cdiv id\x3d"department-name-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-code-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8\u7f16\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-disporder-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u663e\u793a\u987a\u5e8f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-parent-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a\u7ea7\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"department-description-div" class\x3d"control-group "\x3e\x3clabel class\x3d"control-label"\x3e\u5907 \u6ce8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"org.departmenttree":'\x3cdiv class\x3d"org-left-header"\x3e\x3cspan class\x3d"tab"\x3e\x3ca id\x3d"organization-users" class\x3d"active"\x3e\u56e2\u961f\x3c/a\x3e\x3ca id\x3d"group-users"\x3e\u7fa4\u7ec4\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3ca id\x3d"show-first-group" class\x3d"hide router"\x3e\x3c/a\x3e\x3cdiv id\x3d"org-tree" class\x3d"org-tree scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv id\x3d"org-tree-list"\x3e\x3cdiv id\x3d"list-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"org-group-list" class\x3d"hide"\x3e\x3cdiv id\x3d"add-dept-group"\x3e\x3cdiv class\x3d"dept-grouplist-add text-center"\x3e\u6dfb\u52a0\u7fa4\u7ec4\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"group-message" class\x3d"dept-grouplist"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"org.positiontree":'\x3cdiv class\x3d"org-left-header groupsetting-left-hd"\x3e\x3clabel id\x3d"organization-positions"\x3e\u5c97\u4f4d\u7ed3\u6784\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"org-tree" class\x3d"org-tree scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv id\x3d"org-tree-list"\x3e\x3cdiv id\x3d"list-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"add-posn" class\x3d"hide"\x3e\x3cdiv class\x3d"position-first-add text-center"\x3e\u6dfb\u52a0\u5c97\u4f4d\x3c/div\x3e\x3cdiv id\x3d"posn-message" class\x3d"posn-firstone"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"org.position":'\x3cdiv class\x3d"header groupsetting-right-hd"\x3e\x3cdiv class\x3d"brand"\x3e\x3ci class\x3d"graph graph-groups"\x3e\x3c/i\x3e\u7f16\u8f91\u5c97\u4f4d\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-info" class\x3d"form-horizontal scrollwrapper entity-info entity-info-w2 position-info groupsetting-right-info hide"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97\u4f4d\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"position-id" name\x3d"position.id" value\x3d""/\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"position-name" name\x3d"position.name" placeholder\x3d"\u5c97\u4f4d\u540d\u79f0"  /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97\u4f4d\u7f16\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control w-80" id\x3d"position-code" name\x3d"position.code" maxLength\x3d30  placeholder\x3d"\u5c97\u4f4d\u7f16\u7801" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u663e\u793a\u987a\u5e8f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control w-80" id\x3d"position-disporder" name\x3d"position.disporder" maxLength\x3d9 placeholder\x3d"\u663e\u793a\u987a\u5e8f" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group mark" id\x3d"position-root"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a\u7ea7\u5c97\u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"position-parent" name\x3d"position.parent.id" /\x3e\x3cdiv class\x3d"entity-container" id\x3d"positionSelector"\x3e\x3ca data-value\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-position" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"position" placeholder\x3d"\u8f93\u5165\u5c97\u4f4d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn btn btn-sm" title\x3d"\u4fee\u6539\u5c97\u4f4d"\x3e\x3ca class\x3d"icon-pencil" \x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group mark" id\x3d"position-dept"\x3e\x3clabel class\x3d"control-label"\x3e\u6240\u5c5e\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"position-department" name\x3d"position.department" /\x3e\x3cdiv class\x3d"entity-container mr-5" id\x3d"departmentSelector"\x3e\x3ca data-value\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-department" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn btn btn-sm" title\x3d"\u4fee\u6539\u90e8\u95e8"\x3e\x3ca class\x3d"icon-pencil" \x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5907 \u6ce8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea class\x3d"form-control w-full" id\x3d"position-description" name\x3d"position.description" maxLength\x3d500 rows\x3d"4"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-info-read" class\x3d"form-horizontal entity-info position-info hide"\x3e\x3cdiv id\x3d"position-name-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97\u4f4d\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-code-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5c97\u4f4d\u7f16\u7801\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-parent-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a\u7ea7\u5c97\u4f4d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-disporder-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u663e\u793a\u987a\u5e8f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-department-div" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u6240\u5c5e\u90e8\u95e8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"position-description-div" class\x3d"control-group "\x3e\x3clabel class\x3d"control-label"\x3e\u5907 \u6ce8\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.mainline":'\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee:\x3c/div\x3e\x3cdiv class\x3d"controls mainline-controls"\x3e\x3cdiv id\x3d"other-relevance-mainline" class\x3d"entity-container" data-url\x3d""\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-mainline" class\x3d"control-input typeahead mainline" data-entity\x3d"mainline" placeholder\x3d"\u8f93\u5165\u9879\u76ee"/\x3e\x3ca class\x3d"btn typeahead-search entity-toggle" module\x3d"mainline" \x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e',
"component.tag":'\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-label"\x3e\x3c/i\x3e\x3cspan class\x3d"j_tag_label"\x3e\u6211\u7684\u6807\u7b7e:\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"controls tag-controls controls2"\x3e\x3cdiv id\x3d"tags" class\x3d"entity-container tags-entity-container" data-noConfirm\x3d"true" data-url\x3d""\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-tag" class\x3d"control-input typeahead tag" data-entity\x3d"tag" placeholder\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add \x3c% if(panel\x3d\x3d"ctag"){%\x3e acl-hide \x3c%}%\x3e "\x3e\x3ci title\x3d"\u6dfb\u52a0\u6807\u7b7e" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e',
"component.attachment":'\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-attach"\x3e\x3c/i\x3e\u9644\u3000\u3000\u4ef6:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"upload-wrap" class\x3d"upload-widget-wrap upload-btn-wrap acl-hide"\x3e\x3ca id\x3d"pickFiles" class\x3d"btn btn-xs btn-info"\x3e\x3ci class\x3d"icon-upload-alt"\x3e\x3c/i\x3e \u4e0a\u4f20\u9644\u4ef6\x3c/a\x3e\x3cspan class\x3d"upload-tip"\x3e\u70b9\u51fb\u5de6\u4fa7\u4e0a\u4f20\u6309\u94ae\u9009\u62e9\u6587\u4ef6\u6216\u5c06\u6587\u4ef6\u62d6\u62fd\u5230\u6b64\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"entity-container" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e',
"component.navigation":'\x3c% if (self) { %\x3e\x3cdiv id\x3d"navigation" class\x3d"navigation"\x3e\x3cdiv id\x3d"switcher" class\x3d"switcher"\x3e\x3ci class\x3d"icon-angle-left"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"nav-wrap"\x3e\x3cul class\x3d"nav nav-pills"\x3e\x3cli\x3e\x3ca id\x3d"menu-portal" class\x3d"router" href\x3d"/portal/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"portal"\x3e\x3c/i\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-blog" class\x3d"router" href\x3d"/blog/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"blog"\x3e\x3c/i\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-task" class\x3d"router" href\x3d"/tasks/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"task"\x3e\x3c/i\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-mainline" class\x3d"router" href\x3d"/mainlines/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"goal"\x3e\x3c/i\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-document" class\x3d"router" href\x3d"/documents/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"document"\x3e\x3c/i\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-customer" class\x3d"router" href\x3d"/customers/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"customer"\x3e\x3c/i\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-workflow" class\x3d"router" href\x3d"/workflows/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"workflow"\x3e\x3c/i\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-calendar" class\x3d"router" href\x3d"/calendar/\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"calendar"\x3e\x3c/i\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"menu-workreport" class\x3d"router" href\x3d"/workreport"\x3e\x3ci class\x3d"reports"\x3e\x3c/i\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3ca id\x3d"nav-switcher" class\x3d"nav-switcher off hide"\x3e\x3ci class\x3d"caret"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"btns"\x3e\x3ca class\x3d"btn btn-sm btn-success invite-toggle" type\x3d"modal"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-info client-toggle"\x3e\u79fb\u52a8\u7aef\u4e0b\u8f7d\x3c/a\x3e\x3cspan class\x3d"qq-group-link"\x3e\x3ca class\x3d"btn btn-sm btn-warning" href\x3d"http://jq.qq.com/?_wv\x3d1027\x26k\x3d24sGyfN" target\x3d"_blank"\x3eQQ\u7fa4\x3c/a\x3e\x3cdiv class\x3d"top-dropbox text-center"\x3e\x3clabel\x3e\u5b98\u65b9\u7fa4\x3c/label\x3e\x3cp\x3e196945930\x3c/p\x3e\x3ca class\x3d"btn btn-sm btn-primary" href\x3d"http://jq.qq.com/?_wv\x3d1027\x26k\x3d24sGyfN" target\x3d"_blank"\x3e\u52a0\u5165\x3c/a\x3e\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}else{%\x3e\x3cdiv id\x3d"nav-home" class\x3d"nav-home"\x3e\x3ca class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" alt\x3d"avatar"/\x3e\x3c/a\x3e\x3cdiv id\x3d"menu-nav" class\x3d"menu-nav"\x3e\x3ca class\x3d"menu-text"\x3e\x3cb\x3e\u4efb\u52a1\u534f\u4f5c\x3c/b\x3e \x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"menu-slide" class\x3d"menu-slide"\x3e\x3ca id\x3d"menu-blog" class\x3d"router" href\x3d"/blog/\x3c%\x3duserId%\x3e"\x3e\u5de5\u4f5c\u65e5\u62a5\x3c/a\x3e\x3ca id\x3d"menu-task" class\x3d"router"  href\x3d"/tasks/\x3c%\x3duserId%\x3e"\x3e\u4efb\u52a1\u534f\u4f5c\x3c/a\x3e\x3ca id\x3d"menu-mainline" class\x3d"router"  href\x3d"/mainlines/\x3c%\x3duserId%\x3e"\x3e\u9879\u76ee\x3c/a\x3e\x3ca id\x3d"menu-document" class\x3d"router" href\x3d"/documents/\x3c%\x3duserId%\x3e"\x3e\u6587\u6863\u5e93\x3c/a\x3e\x3ca id\x3d"menu-customer" class\x3d"router" href\x3d"/customers/\x3c%\x3duserId%\x3e"\x3e\u5ba2\u6237\u53ca\u8054\u7cfb\u4eba\x3c/a\x3e\x3ca id\x3d"menu-workflow" class\x3d"router" href\x3d"/workflows/\x3c%\x3duserId%\x3e"\x3e\u5ba1\u6279\x3c/a\x3e\x3ca id\x3d"menu-calendar" class\x3d"router" href\x3d"/calendar/\x3c%\x3duserId%\x3e"\x3e\u65e5\u7a0b\x3c/a\x3e\x3ca id\x3d"menu-workreport" class\x3d"router" href\x3d"/workreport"\x3e\x3ci class\x3d"reports"\x3e\x3c/i\x3e\u62a5\u544a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e',
"component.relevance":'\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-link"\x3e\x3c/i\x3e\x3c%\x3dmoduleLabel%\x3e\x3c/div\x3e\x3cdiv class\x3d"controls mainline-controls"\x3e\x3cdiv id\x3d"relevance" class\x3d"entity-container relevance-container" data-url\x3d""\x3e\x3c/div\x3e\x3cspan class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-relevance" class\x3d"control-input fulltext-typeahead typeahead" data-entity\x3d"relevance" placeholder\x3d""/\x3e\x3ca class\x3d"btn typeahead-search entity-toggle" module\x3d"\x3c%\x3dtargetModule%\x3e"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e',
"component.remind":'\x3cdiv id\x3d"remind-div" class\x3d"remind remind-pop sbox-white filterSlip_js"\x3e\x3ctextarea id\x3d"remind-textarea" class\x3d"form-control" name\x3d"comment" rows\x3d"3" placeholder\x3d""\x3e\x3c/textarea\x3e\x3cdiv  class\x3d"control-group "\x3e\x3clabel class\x3d"control-label" style\x3d"float:left" title\x3d"\u63d0\u9192\u7ed9"\x3e\u63d0\u9192\u7ed9\uff1a\x3c/label\x3e\x3cdiv id\x3d"task" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" checked value\x3d"taskManager"\x3e\u8d1f\u8d23\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"participants" value\x3d"taskParticipants"\x3e\u53c2\u4e0e\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"taskCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" checked value\x3d"mainlineManager"\x3e\u8d1f\u8d23\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"participants" value\x3d"mainlineParticipants"\x3e\u53c2\u4e0e\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"mainlineCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"document" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"share" checked value\x3d"documentShare"\x3e\u5171\u4eab\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" value\x3d"documentManager"\x3e\u8d1f\u8d23\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"documentCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"participants" value\x3d"documentParticipants"\x3e\u53c2\u4e0e\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"customer" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" checked value\x3d"customerManager"\x3e\u5ba2\u6237\u7ecf\u7406\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"share" value\x3d"customerShare"\x3e\u5171\u4eab\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"customerCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"currentmanager" checked value\x3d"workflowCurrent"\x3e\u5f53\u524d\u529e\u7406\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"allmanager" value\x3d"workflowAll"\x3e\u6240\u6709\u529e\u7406\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"workflowCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"workreport" class\x3d"controls hide"\x3e\x3cdiv id\x3d"workreportRemindlist" class\x3d"entity-container" \x3e\x3c/div\x3e\x3cdiv class\x3d"typeahead-wrapper hide"\x3e\x3cdiv class\x3d"remind-user"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true"placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ca class\x3d"icon-plus-thin"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"other-employee" class\x3d"control-group clearfix"\x3e\x3clabel class\x3d"control-label" style\x3d"float:left" title\x3d"\u5176\u4ed6\u4eba"\x3e\u5176\u4ed6\u4eba\uff1a\x3c/label\x3e\x3cdiv id\x3d"remindlist" class\x3d"entity-container" \x3e\x3c/div\x3e\x3cdiv class\x3d"typeahead-wrapper hide"\x3e\x3cdiv class\x3d"remind-user"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true"placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ca class\x3d"icon-plus-thin"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group pull-right"\x3e\x3ca id\x3d"remind-submit" class\x3d"btn btn-sm btn-primary"\x3e\u63d0\u4ea4\x3c/a\x3e\x3ca id\x3d"remind-cancle" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"component.shareout":'\x3cdiv id\x3d"shareout-div" class\x3d"filterSlip_js remind popbox doc-share-pop"\x3e\x3cdiv id\x3d"shareout-create" class\x3d"url-share"\x3e\x3cdiv class\x3d"url-colum"\x3e\x3ca id\x3d"btn-public" class\x3d"btn btn-xm btn-primary"\x3e\u521b\u5efa\u516c\u5f00\u94fe\u63a5\x3c/a\x3e\x3cspan class\x3d"tip"\x3e\uff08\u6240\u6709\u4eba\u53ef\u89c1\uff09 \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"url-colum"\x3e\x3ca id\x3d"btn-private" class\x3d"btn btn-xm btn-primary"\x3e\u521b\u5efa\u79c1\u5bc6\u94fe\u63a5\x3c/a\x3e\x3cspan class\x3d"tip"\x3e\uff08\u53ea\u6709\u5206\u4eab\u7684\u597d\u53cb\u53ef\u89c1\uff09\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"copy-share hide" id\x3d"shareout-show"\x3e\x3cp class\x3d"copy-tip"\x3e\u53ef\u4ee5\u5c06\u94fe\u63a5\u53d1\u9001\u7ed9\u4f60\u7684QQ\u3001\u5fae\u4fe1\u7b49\u597d\u53cb \x3ca id\x3d"copyhref" class\x3d"btn btn-xs btn-success"\x3e\x3c/a\x3e\x3c/p\x3e\x3cdiv class\x3d"copy-colum"\x3e\x3clabel\x3e\u5206\u4eab\u94fe\u63a5\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"shareout-textarea" type\x3d"text" class\x3d"form-control form-control-block" name\x3d"shareouthref" readonly/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"shareoutpwdDiv" class\x3d"copy-colum copy-pwd hide"\x3e\x3clabel\x3e\u63d0\u53d6\u5bc6\u7801\uff1a\x3c/label\x3e\x3cinput id\x3d"shareoutpwd" class\x3d"form-control" style\x3d"width: 65px;" type\x3d"text" name\x3d"shareoutpwd" readonly/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"customer.property":'\x3c%if(type \x3d\x3d "type"){ %\x3e\x3clabel class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u7c7b\u578b"\x3e\u7c7b\t\u578b:\x3c/label\x3e\x3c% } else if(type \x3d\x3d "region"){ %\x3e\x3clabel class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u5730\u533a"\x3e\u5730\t\u533a:\x3c/label\x3e\x3c% } else if(type \x3d\x3d "industry"){ %\x3e\x3clabel class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u884c\u4e1a"\x3e\u884c\t\u4e1a:\x3c/label\x3e\x3c% } else if(type \x3d\x3d "status"){ %\x3e\x3clabel class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u72b6\u6001"\x3e\u72b6\t\u6001:\x3c/label\x3e\x3c% }%\x3e\x3cdiv class\x3d"controls tag-controls"\x3e\x3cdiv id\x3d"property" class\x3d"entity-container" data-url\x3d""\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-property" class\x3d"control-input typeahead" data-entity\x3d"property" placeholder\x3d"\u8f93\u5165"/\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add" title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip"\x3e\x3ca class\x3d"icon-plus-thin"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e',
"component.authority":'\x3cdiv id\x3d"no-blog-watch-authority" class\x3d"no-blog-watch-authority hide"\x3e\x3cdiv class\x3d"no-blog-watch-authority-row3"\x3e\x3c/div\x3e\x3cdiv class\x3d"no-blog-watch-authority-row1"\x3e\x3cspan\x3e\u60a8\u5f53\u524d\u4e0d\u5177\u6709\u5bf9  \x3c/span\x3e\x3cspan class\x3d"no-blog-watch-authority-username"\x3e\x3ca\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e  \u5de5\u4f5c\u7684\u67e5\u770b\u6743\u9650\uff01\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"no-blog-watch-authority-row2"\x3e\u8bf7\u8054\u7cfb\u5bf9\u65b9\u5c06\u5de5\u4f5c\u5206\u4eab\u7ed9\u4f60\uff0c\u6216\x3ca class\x3d"no-blog-watch-authority-followRequest btn-sm"\x3e\u7533\u8bf7\u5173\u6ce8\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"component.invite":'\x3cdiv id\x3d"invite-members" class\x3d"main-content"\x3e\x3cdiv class\x3d"invite-view-wrapper card"\x3e\x3cdiv class\x3d"user-invite form-invite popbox-invite" id\x3d"user-invite" style\x3d"position: inherit;"\x3e\x3cdiv class\x3d"item"\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"inputUsername" name\x3d"username" v-required\x3d"true" v-name\x3d"name" maxlength\x3d"15" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3cinput type\x3d"text" id\x3d"inputEmail" class\x3d"form-control" name\x3d"email" maxlength\x3d"50" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3cbutton id\x3d"invite-submit" type\x3d"submit" class\x3d"btn btn-sm btn-success w-60"\x3e\u9080\u8bf7\x3c/button\x3e\x3cbutton id\x3d"invite-cancel" type\x3d"button" class\x3d"btn btn-sm w-60 hide"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.inviteModal":'\x3cdiv id\x3d"invite-modal" class\x3d"invite-modal modal fade form-horizontal" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"invite-inputs"\x3e\x3cdiv class\x3d"remind-tip"\x3e\x3ci class\x3d"icon-info-sign" style\x3d"margin-right: 3px;"\x3e\x3c/i\x3e\x3cspan\x3e\u63d0\u793a\uff1a\u60a8\u53ef\u4ee5\u901a\u8fc7\u624b\u673a\u53f7\u7801\u6216\u90ae\u7bb1\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u5230eteams\uff1b\u4e5f\u53ef\u4ee5\u70b9\u51fb\x3ca class\x3d"j_invite_link"\x3e\u590d\u5236\u94fe\u63a5\x3c/a\x3e\uff0c\u628a\u94fe\u63a5\u76f4\u63a5\u53d1\u9001\u7ed9\u540c\u4e8b\uff0c\u9080\u8bf7\u4ed6\u4eec\u52a0\u5165\u3002\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cspan class\x3d"form-invite1"\x3e\x3clabel for\x3d"inputName1"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputName1" name\x3d"name" class\x3d"form-control w-150" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"10" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3clabel class\x3d"email" for\x3d"inputEmail1"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputEmail1" name\x3d"email" class\x3d"form-control w-220" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u9080\u8bf7\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cspan class\x3d"form-invite2"\x3e\x3clabel for\x3d"inputName2"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputName2" name\x3d"name" class\x3d"form-control w-150" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"10" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3clabel class\x3d"email" for\x3d"inputEmail2"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputEmail2" name\x3d"email" class\x3d"form-control w-220" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u9080\u8bf7\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cspan class\x3d"form-invite3"\x3e\x3clabel for\x3d"inputName3"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputName3" name\x3d"name" class\x3d"form-control w-150" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"10" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3clabel class\x3d"email" for\x3d"inputEmail3"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputEmail3" name\x3d"email" class\x3d"form-control w-220" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u9080\u8bf7\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cspan class\x3d"form-invite4"\x3e\x3clabel for\x3d"inputName4"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputName4" name\x3d"name" class\x3d"form-control w-150" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"10" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3clabel class\x3d"email" for\x3d"inputEmail4"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputEmail4" name\x3d"email" class\x3d"form-control w-220" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u9080\u8bf7\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cspan class\x3d"form-invite5"\x3e\x3clabel for\x3d"inputName5"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputName5" name\x3d"name" class\x3d"form-control w-150" v-required\x3d"true" v-name\x3d"name" v-maxlength\x3d"10" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3clabel class\x3d"email" for\x3d"inputEmail5"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cinput type\x3d"text" id\x3d"inputEmail5" name\x3d"email" class\x3d"form-control w-220" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u9080\u8bf7\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-remind hide"\x3e\x3cdiv class\x3d"remind-tip"\x3e\x3ci class\x3d"icon-info-sign"\x3e\x3c/i\x3e\x3cspan\x3e\u63d0\u793a\uff1a\u9080\u8bf7\u6210\u529f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed9\u5bf9\u65b9\u53d1\u9001\u9080\u8bf7\u90ae\u4ef6\u6216\u77ed\u4fe1\u63d0\u793a\uff0c\u60a8\u4e5f\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u94fe\u63a5\u5e76\u901a\u8fc7QQ\u7b49\u5de5\u5177\u628a\u94fe\u63a5\u53d1\u7ed9\u5bf9\u65b9\u3002\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"remind-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3cbutton id\x3d"invite-m-submit" type\x3d"submit" class\x3d"btn btn-sm w-70 btn-success"\x3e\u9080\u8bf7\x3c/button\x3e\x3cbutton id\x3d"invite-m-continue" type\x3d"button" class\x3d"btn btn-sm btn-success hide"\x3e\u7ee7\u7eed\u9080\u8bf7\x3c/button\x3e\x3cbutton id\x3d"invite-m-cancel" type\x3d"button" class\x3d"btn btn-sm"\x3e\u4e0b\u6b21\u518d\u8bf4\x3c/button\x3e\x3ca id\x3d"invite-clear-btn" class\x3d"invite-clear"\x3e\u6e05\u7a7a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"invite-remind-clone" class\x3d"control-group"\x3e\x3cspan\x3e\u60a8\u9080\u8bf7 \x3ca class\x3d"invite-user"\x3e\x3c/a\x3e\u3010\x3ca class\x3d"invite-email"\x3e\x3c/a\x3e\u3011 \u52a0\u5165eteams\uff0c\x3cspan class\x3d"tip-failure hide"\x3e\u9080\u8bf7\u5931\u8d25\uff1a\x3c/span\x3e\x3cspan class\x3d"i-tips hide"\x3e\x3c/span\x3e\x3cspan class\x3d"j_url_tip hide"\x3e\uff0c\u9080\u8bf7\u94fe\u63a5\uff1a\x3ca class\x3d"j_invite_url"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.visit":'\x3cdiv class\x3d"tab j_visitorTab"\x3e\x3ca class\x3d"current"\x3e\u6700\u8fd1\u6765\u8bbf\x3c/a\x3e\x3ca\x3e\u6700\u8fd1\u8bbf\u95ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"visitor-list"\x3e\x3cul id\x3d"myVisitors" class\x3d"div_myVisitors"\x3e\x3cli class\x3d"visit-history-box no_visit_record c-999 ta-c"\x3e\u65e0\u8bbf\u95ee\u8bb0\u5f55\x3c/li\x3e\x3c/ul\x3e\x3cul id\x3d"beVisited" class\x3d"div_beVisited hide"\x3e\x3cli class\x3d"visit-history-box no_visit_record c-999 ta-c"\x3e\u65e0\u8bbf\u95ee\u8bb0\u5f55\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cli id\x3d"visitor-clone" class\x3d"hide"\x3e\x3ca class\x3d"avatar fl usercard-toggle" title\x3d"\u70b9\u51fb\u67e5\u770b\u4ed6\u7684\u4eba\u5458\u5361\u7247"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/a\x3e\x3cdiv class\x3d"avatar-right"\x3e\x3ca class\x3d"name usercard-toggle"\x3e\x3c/a\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e',
"component.wechat":'\x3cdiv id\x3d"wechat-div" class\x3d"wechat-div modal"\x3e\x3ctextarea id\x3d"wechat-textarea" class\x3d"form-control" name\x3d"comment" rows\x3d"3" placeholder\x3d""\x3e\x3c/textarea\x3e\x3cdiv  class\x3d"control-group "\x3e\x3cdiv id\x3d"task" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" checked value\x3d"taskManager"\x3e\u8d1f\u8d23\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"participants" value\x3d"taskParticipants"\x3e\u53c2\u4e0e\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"taskCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"document" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"share" checked value\x3d"documentShare"\x3e\u5171\u4eab\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" value\x3d"documentManager"\x3e\u8d1f\u8d23\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"documentCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"customer" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"manager" checked value\x3d"customerManager"\x3e\u5ba2\u6237\u7ecf\u7406\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"share" value\x3d"customerShare"\x3e\u5171\u4eab\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"customerCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow" class\x3d"controls hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"currentmanager" checked value\x3d"workflowCurrent"\x3e\u5f53\u524d\u529e\u7406\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"allmanager" value\x3d"workflowAll"\x3e\u6240\u6709\u529e\u7406\u4eba\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"creater" value\x3d"workflowCreater"\x3e\u521b\u5efa\u4eba\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group pull-right"\x3e\x3ca id\x3d"wechat-submit" class\x3d"btn btn-sm"\x3e\u63d0\u4ea4\x3c/a\x3e\x3ca id\x3d"wechat-cancle" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"component.filter":'\x3cdiv id\x3d"filter-div" class\x3d"clearfix"\x3e\x3cdiv class\x3d"loading_large"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"hide"\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"employee-title" class\x3d"filter-title"\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-task"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-blog"\x3e\u6211\u5173\u6ce8\u7684\u4eba\u53ca\u4e0b\u5c5e\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-document"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-customer"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-saleChance"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-production"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-mainline"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-workflow"\x3e\u7533\u8bf7\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-tag"\x3e\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-formdatareport"\x3e\u4e0a\u62a5\u6536\u96c6\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-label hide" id\x3d"employee-type-biaoge"\x3e\u8d1f\u8d23\u4eba\u6216\u521b\u5efa\u4eba\x3c/span\x3e\x3cspan class\x3d"filter-input"\x3e\x3cinput placeholder\x3d"\u641c\u7d22\u4eba\u5458" data-entity\x3d"employee" class\x3d"typehead form-control" name\x3d"username"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-content" id\x3d"employee-filter"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group hide"\x3e\x3cdiv id\x3d"directsubordinate" class\x3d"filter-title"\x3e\x3cspan class\x3d"filter-label" id\x3d"employee-type-directsubordinate"\x3e\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-content" id\x3d"directsubordinate-filter"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group hide"\x3e\x3cdiv id\x3d"indirectsubordinate" class\x3d"filter-title"\x3e\x3cspan class\x3d"filter-label" id\x3d"employee-type-indirectsubordinate"\x3e\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e\x3c/span\x3e\x3cspan class\x3d"filter-input"\x3e\x3cinput placeholder\x3d"\u641c\u7d22\u95f4\u63a5\u4e0b\u5c5e" data-entity\x3d"indirectsubordinate" class\x3d"typehead form-control" name\x3d"username"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-content" id\x3d"indirectsubordinate-filter"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"due-time" class\x3d"filter-title hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u5230\u671f\u65e5\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"due-time-filter" class\x3d"filter-content due-time-div"\x3e\x3cspan\x3e\u4ece\x3c/span\x3e\x3cinput id\x3d"due-time-begin" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dateGroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"taskGtDate"\x3e\x3cspan\x3e\u81f3\x3c/span\x3e\x3cinput id\x3d"due-time-end" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dategroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"taskLtDate"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"formcreate-time" class\x3d"filter-title hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u521b\u5efa\u65e5\u671f\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"formcreate-time-filter" class\x3d"filter-content due-time-div hide"\x3e\x3cspan\x3e\u4ece\x3c/span\x3e\x3cinput id\x3d"formcreate-time-begin" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dateGroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"taskGtDate"\x3e\x3cspan\x3e\u81f3\x3c/span\x3e\x3cinput id\x3d"formcreate-time-end" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dategroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"taskLtDate"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"form-tag" class\x3d"filter-title datareport-div hide"\x3e\x3cspan class\x3d"filter-label" id\x3d"my-formtag"\x3e\u6211\u7684\u5206\u7c7b\x3c/span\x3e\x3cspan class\x3d"filter-input j_formtag-input hide"\x3e\x3cinput placeholder\x3d"\u641c\u7d22\u6211\u7684\u5206\u7c7b" data-entity\x3d"formtag" class\x3d"typehead form-control" name\x3d"formtag"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-content datareport-div hide" id\x3d"formtag-filter"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"comment" class\x3d"filter-title comment-div"\x3e\x3cspan id\x3d"comment-type-task"  class\x3d"filter-label hide" \x3e\u53cd\u9988\u65f6\u95f4\x3c/span\x3e\x3cspan id\x3d"comment-type-document"  class\x3d"filter-label hide" \x3e\u6587\u6863\u7c7b\u578b\x3c/span\x3e\x3cspan id\x3d"comment-type-customer"  class\x3d"filter-label hide" \x3e\u53cd\u9988\u65f6\u95f4\x3c/span\x3e\x3cspan id\x3d"comment-type-saleChance"  class\x3d"filter-label hide" \x3e\u53cd\u9988\u65f6\u95f4\x3c/span\x3e\x3cspan id\x3d"comment-type-production"  class\x3d"filter-label hide" \x3e\u53cd\u9988\u65f6\u95f4\x3c/span\x3e\x3cspan id\x3d"comment-type-workflow"  class\x3d"filter-label hide" \x3e\u8868\u5355\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-customer" class\x3d"filter-content hide"\x3e\x3cspan id\x3d"one-mounth-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_no" class\x3d"comment-click"\x3e\u4e00\u4e2a\u6708\u5185\u672a\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-weak-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_no" class\x3d"comment-click"\x3e\u4e00\u5468\u672a\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"3day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"three_day_no" class\x3d"comment-click"\x3e3\u5929\u672a\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"1day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_day_no" class\x3d"comment-click"\x3e1\u5929\u672a\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"none" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"none" class\x3d"comment-click"\x3e\u65e0\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one_weak_yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_yes" class\x3d"comment-click"\x3e\u672c\u5468\u5185\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-mounth-yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_yes" class\x3d"comment-click"\x3e\u672c\u6708\u5185\u8054\u7cfb\u7684\u5ba2\u6237\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-saleChance" class\x3d"filter-content hide"\x3e\x3cspan id\x3d"one-mounth-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_no" class\x3d"comment-click"\x3e\u4e00\u4e2a\u6708\u5185\u672a\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-weak-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_no" class\x3d"comment-click"\x3e\u4e00\u5468\u672a\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"3day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"three_day_no" class\x3d"comment-click"\x3e3\u5929\u672a\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"1day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_day_no" class\x3d"comment-click"\x3e1\u5929\u672a\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"none" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"none" class\x3d"comment-click"\x3e\u65e0\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one_weak_yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_yes" class\x3d"comment-click"\x3e\u672c\u5468\u5185\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-mounth-yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_yes" class\x3d"comment-click"\x3e\u672c\u6708\u5185\u53cd\u9988\u7684\u5546\u673a\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-production" class\x3d"filter-content hide"\x3e\x3cspan id\x3d"one-mounth-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_no" class\x3d"comment-click"\x3e\u4e00\u4e2a\u6708\u5185\u672a\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-weak-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_no" class\x3d"comment-click"\x3e\u4e00\u5468\u672a\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"3day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"three_day_no" class\x3d"comment-click"\x3e3\u5929\u672a\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"1day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_day_no" class\x3d"comment-click"\x3e1\u5929\u672a\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"none" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"none" class\x3d"comment-click"\x3e\u65e0\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one_weak_yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_yes" class\x3d"comment-click"\x3e\u672c\u5468\u5185\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-mounth-yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_yes" class\x3d"comment-click"\x3e\u672c\u6708\u5185\u53cd\u9988\u7684\u4ea7\u54c1\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-task" class\x3d"filter-content hide"\x3e\x3cspan id\x3d"one-mounth-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_no" class\x3d"comment-click"\x3e\u4e00\u4e2a\u6708\u5185\u672a\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-weak-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_no" class\x3d"comment-click"\x3e\u4e00\u5468\u672a\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"three_day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"three_day_no" class\x3d"comment-click"\x3e3\u5929\u672a\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one_day-no" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_day_no" class\x3d"comment-click"\x3e1\u5929\u672a\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"none" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"none" class\x3d"comment-click"\x3e\u65e0\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one_weak_yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_weak_yes" class\x3d"comment-click"\x3e\u672c\u5468\u5185\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"one-mounth-yes" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"one_mounth_yes" class\x3d"comment-click"\x3e\u672c\u6708\u5185\u53cd\u9988\u7684\u4efb\u52a1\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-document" class\x3d"filter-content hide"\x3e\x3cspan id\x3d"html" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"html" class\x3d"comment-click"\x3ehtml\u6587\u6863\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"office" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"office" class\x3d"comment-click"\x3eOffice\u6587\u6863\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"text" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"text" class\x3d"comment-click"\x3e\u6587\u672c\u6587\u6863\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"pdf" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"pdf" class\x3d"comment-click"\x3ePDF\u6587\u6863\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"image" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"image" class\x3d"comment-click"\x3e\u56fe\u7247\u6587\u4ef6\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"audio" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"audio" class\x3d"comment-click"\x3e\u97f3\u9891\u6587\u4ef6\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"video" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"video" class\x3d"comment-click"\x3e\u89c6\u9891\u6587\u4ef6\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"other" class\x3d"filter-item"\x3e\x3ca data-entity\x3d"other" class\x3d"comment-click"\x3e\u5176\u4ed6\u7c7b\u578b\u6587\u4ef6\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-filter-workflow" class\x3d"filter-content hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"mainline" class\x3d"filter-title mainline-div"\x3e\x3cspan class\x3d"filter-label"\x3e\u9879\u76ee\x3c/span\x3e\x3cspan class\x3d"filter-input"\x3e\x3cinput name\x3d"mainline" class\x3d"typehead form-control" data-entity\x3d"mainline" placeholder\x3d"\u641c\u7d22\u9879\u76ee"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-filter" class\x3d"filter-content mainline-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"tag" class\x3d"filter-title tag-div"\x3e\x3cspan class\x3d"filter-label"\x3e\u6807\u7b7e\x3c/span\x3e\x3cspan class\x3d"filter-input"\x3e\x3cinput name\x3d"tag" class\x3d"typehead form-control" data-entity\x3d"tag" placeholder\x3d"\u641c\u7d22\u6807\u7b7e"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"tag-filter" class\x3d"filter-content tag-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"formstatus" class\x3d"filter-title formstatus-div hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u8868\u5355\u72b6\u6001\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"formstatus-filter" class\x3d"filter-content formstatus-div hide"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"enable" class\x3d"comment-click"\x3e\u6536\u96c6\u4e2d\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"disable" class\x3d"comment-click"\x3e\u672a\u53d1\u5e03\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"form-status" class\x3d"filter-title form-status-div hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u8868\u5355\u72b6\u6001\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"form-status-filter" class\x3d"filter-content form-status-div hide"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"enable" class\x3d"status-click"\x3e\u542f\u7528\u4e2d\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"disable" class\x3d"status-click"\x3e\u5df2\u505c\u7528\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"relatedstatus" class\x3d"filter-title relatedstatus-div hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u5173\u8054\u5ba1\u6279\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"relatedstatus-filter" class\x3d"filter-content relatedstatus-div hide"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"true" class\x3d"comment-click"\x3e\u5df2\u5173\u8054\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"false" class\x3d"comment-click"\x3e\u672a\u5173\u8054\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"form-type" class\x3d"filter-title formtype-div hide"\x3e\x3cspan class\x3d"filter-label"\x3e\u8868\u5355\u7c7b\u578b\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"formtype-filter" class\x3d"filter-content formtype-div hide"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"company" class\x3d"formtype-click"\x3e\u56e2\u961f\u8868\u5355\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"personal" class\x3d"formtype-click"\x3e\u4e2a\u4eba\u8868\u5355\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv  class\x3d"filter-title hide datareport-div"\x3e\x3cspan class\x3d"filter-label"\x3e\u4e0a\u62a5\u65f6\u95f4\x3c/span\x3e\x3c/div\x3e\x3cdiv  class\x3d"filter-content hide datareport-div due-time-div"\x3e\x3cspan\x3e\u4ece\x3c/span\x3e\x3cinput id\x3d"report-time-begin" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dateGroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"reportGtDate"\x3e\x3cspan\x3e\u81f3\x3c/span\x3e\x3cinput id\x3d"report-time-end" type\x3d"text" v-name\x3d"date" insertAfter\x3d"true" dategroup\x3d"true" format\x3d"yyyy-mm-dd" maxView\x3d"decade" minView\x3d"month" class\x3d"datepicker form-control" name\x3d"reportLtDate"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cdiv id\x3d"employee-title" class\x3d"filter-title datareport-div hide"\x3e\x3cspan class\x3d"filter-label" id\x3d"employee-type-task"\x3e\u4e0a\u62a5\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"filter-input hide"\x3e\x3cinput placeholder\x3d"\u4e0a\u62a5\u8868\u5355" data-entity\x3d"datareport" class\x3d"typehead" name\x3d"name"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-content datareport-div hide" id\x3d"datareport\uff0dform-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"btns" class\x3d"filter-btns clearfix"\x3e\x3ca class\x3d"btn filter-submit btn-sm fr mr-8 hide"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn filter-cancle btn-sm btn-info fr"\x3e\u91cd\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.typeahead":'\x3cdiv id\x3d"typeahead-div" class\x3d"tt-suggestion border-dropdown"\x3e\x3cdiv class\x3d"loading_small"\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e ... \x3c/div\x3e\x3cdiv id\x3d"searchList"\x3e\x3c/div\x3e\x3c/div\x3e',"component.pcpush":'\x3cdiv id\x3d"pcpush" class\x3d"smwx_box"\x3e\x3cdiv class\x3d"sm-msg-box"\x3e\x3cdiv id\x3d"sm-msg-box-clone" class\x3d"alert alert-info sm-msg-item hide"\x3e\x3ca class\x3d"sm-msg-close close"\x3e\x26times;\x3c/a\x3e\x3cp class\x3d"sm-msg-tit"\x3e\x3c/p\x3e\x3cp class\x3d"sm-msg-info"\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.userslider":'\x3cdiv class\x3d"member-head text-center" id\x3d"listTitle"\x3e\x3c/div\x3e\x3cdiv class\x3d"member-layer-search"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u641c\u7d22\u6210\u5458" class\x3d"form-control" id\x3d"membersearch-keywords" /\x3e\x3c/div\x3e\x3cdiv id\x3d"memebers-wrapper" class\x3d"scrollwrapper" marginbottom\x3d"60"\x3e\x3cul id\x3d"members" class\x3d"member-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"userClone" class\x3d"hide"\x3e\x3cli class\x3d"j_user"\x3e\x3cp class\x3d"avatar"\x3e\x3ca class\x3d"router" href\x3d"" user-id\x3d"" user-name\x3d"" id\x3d"avatar"\x3e\x3cimg class\x3d"avatar" src\x3d""\x3e\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"name"\x3e\x3ca class\x3d"router" href\x3d"" user-id\x3d"" user-name\x3d"" id\x3d"name"\x3e\x3c/a\x3e\x3c/p\x3e\x3cspan class\x3d"j_expend"\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e',
"component.multiuserslider":'\x3cdiv class\x3d"employee-head text-center" id\x3d"listTitle"\x3e\x3c/div\x3e\x3cdiv class\x3d"employee-layer-search"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u641c\u7d22\u6210\u5458" class\x3d"form-control" id\x3d"employeesearch-keywords" /\x3e\x3c/div\x3e\x3cdiv id\x3d"employees-wrapper" class\x3d"scrollwrapper employees-wrapper" marginbottom\x3d"92"\x3e\x3cul id\x3d"employees" class\x3d"employee-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"employee-bottom"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"moduleCheckBox" checked\x3d"checked" module\x3d"calendar"\x3e \u65e5\u7a0b\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" class\x3d"moduleCheckBox" checked\x3d"checked" module\x3d"task"\x3e \u4efb\u52a1\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"userClone" class\x3d"hide"\x3e\x3cli class\x3d"j_user li_checkUser"\x3e\x3cp class\x3d"avatar"\x3e\x3ca class\x3d"router" href\x3d"" user-id\x3d"" user-name\x3d"" id\x3d"avatar"\x3e\x3cimg class\x3d"avatar" src\x3d""\x3e\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"name"\x3e\x3ca class\x3d"router" href\x3d"" user-id\x3d"" user-name\x3d"" id\x3d"name"\x3e\x3c/a\x3e\x3c/p\x3e\x3cinput type\x3d"checkbox" class\x3d"userCheckBox"\x3e\x3cspan class\x3d"j_expend"\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e',
"component.timeline":'\x3cdiv class\x3d"reports-selectyear text-center"\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3cspan id\x3d"curYear"\x3e2015\x3c/span\x3e\x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca\x3e2013\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca\x3e2014\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca\x3e2015\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_reportleft_scroll scrollwrapper" marginbottom\x3d"24" id\x3d"timeline"\x3e\x3cdiv class\x3d"reports-timetree"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"month" class\x3d"timetree-month"\x3e\x3cdiv class\x3d"timetree-head month"\x3e\x3cspan class\x3d"j_timetree_spread time-text"\x3e\x3cstrong\x3e1\x3c/strong\x3e\u6708\x3c/span\x3e\x3cspan class\x3d"j_timetree_spread"\x3e\x3cem class\x3d"time-circle"\x3e\x3c/em\x3e\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"timetree-weeklist hide"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cli id\x3d"week" class\x3d"j_week"\x3e\x3ca class\x3d"router" href\x3d""\x3e\u7b2c\x3cspan\x3e\x3c/span\x3e\u5468\x3cem class\x3d"arrow-s"\x3e\x3c/em\x3e\x3cem class\x3d"arrow-b"\x3e\x3c/em\x3e\x3c/a\x3e\x3cem class\x3d"time-circle"\x3e\x3c/em\x3e\x3c/li\x3e\x3cdiv id\x3d"season" class\x3d"timetree-head season"\x3e\x3cspan class\x3d"time-text"\x3e\x3c/span\x3e\x3cem class\x3d"time-circle"\x3e\x3c/em\x3e\x3c/div\x3e\x3c/div\x3e',
"component.spectaculars":'\x3cdiv id\x3d"entry-puzzles-con" class\x3d"puzzles-stage-wrap eui-scroll"\x3e\x3cdiv class\x3d"puzzles-stage"\x3e\x3cdiv id\x3d"j_puzzles_stage" class\x3d"stage-column"\x3e\x3c/div\x3e\x3cdiv id\x3d"j_puzzles_no_stage" class\x3d"stage-column"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"j_puzzle_item_clone" class\x3d"puzzle-item j_puzzle-item"\x3e\x3cdiv class\x3d"puzzle-header j_puzzle-header cs-m"\x3e\x3cdiv class\x3d"puzzle-title j_puzzle-title"\x3e\x3cspan class\x3d"j_stage_name title ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"j_stage_count count"\x3e\x3c/span\x3e\x3c/div\x3e\x3cinput type\x3d"text" class\x3d"form-control puzzle-rename j_stage_name_input hide" maxLength\x3d"20" placeholder\x3d"\u5206\u7ec4\u540d\u5b57(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)"\x3e\x3cdiv class\x3d"j_edit_category_option puzzle-option dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-reorder"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right"\x3e\x3cli class\x3d"j_task-stage"\x3e\x3ca\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_relevance-stage"\x3e\x3ca\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_edit-stage"\x3e\x3ca\x3e\u7f16\u8f91\u5206\u7ec4\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_delete-stage"\x3e\x3ca\x3e\u5220\u9664\u5206\u7ec4\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"puzzle-content"\x3e\x3cdiv class\x3d"j_scrollwrapper scrollwrapper" marginbottom\x3d"60"\x3e\x3cdiv class\x3d"puzzle-entry-list scrollwrapper j_puzzle_items" marginbottom\x3d"60"\x3e\x3cdiv class\x3d"j_puzzle_noitem nodata hide"\x3e\u65e0\u4efb\u52a1\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"puzzle-footer j_puzzle_footer"\x3e\x3cdiv class\x3d"puzzle-entry-poster j_entry_poster hide"\x3e\x3ctextarea class\x3d"form-control form-control-block smart-title j_name_input" rows\x3d"2" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"btns ta-r j_btn_create"\x3e\x3ca class\x3d"btn btn-sm j_btn_cancel" data-type\x3d"cancel"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-info j_btn_success" data-type\x3d"success"\x3e\u786e\u5b9a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"puzzle-entry-addone j_create_task"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3cspan class\x3d"j_add_item"\x3e\u65b0\u5efa\u4e8b\u9879\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_puzzle_task_clone" class\x3d"j_puzzle_li puzzle-entry-item"\x3e\x3cdiv class\x3d"sn"\x3e\x3c/div\x3e\x3cdiv class\x3d"opt dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right"\x3e\x3cli\x3e\x3ca class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"share"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"tit break j_title j_finish_line j_entityslider-toggle cs-p"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_mark info"\x3e\x3cspan class\x3d"j_date_span fl" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u5230\u671f\u65e5"\x3e\x3ci class\x3d"icon-time mr-5"\x3e\x3c/i\x3e\x3cspan class\x3d"j_date"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"importance j_importance hide"\x3e\x3c/span\x3e\x3cspan class\x3d"who fr j_who "\x3e\x3cimg class\x3d"img-24 img-circle usercard-toggle cs-p" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top" src\x3d"images/avatar.png"/\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.batchselector":'\x3cdiv class\x3d"modal fade" id\x3d"batchselectormodal"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3cspan id\x3d"js_title"\x3e\u6279\u91cf\u5171\u4eab\x3c/span\x3e\x3clabel class\x3d"control-label w-90" title\x3d"\u9009\u62e9\u4eba\u5458"\x3e\u5df2\u9009\u62e9\x3cspan id\x3d"js_usersCount"\x3e0\x3c/span\x3e\u4f4d\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body entity-info" id\x3d"batchselectormodal-info"  style\x3d"min-height: 200px;"\x3e\x3cdiv id\x3d"editShare" class\x3d"control-group" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body entity-info hide" id\x3d"shareall" style\x3d"min-height: 200px;"\x3e\x3cspan class\x3d"entity-item"\x3e\x3ca class\x3d"all" style\x3d"margin-top: 5px;"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3ca id\x3d"btn-save" class\x3d"btn btn-sm btn-primary"\x3e\u786e\u5b9a\x3c/a\x3e \x3ca class\x3d"btn btn-sm" id\x3d"btn-cancle" data-dismiss\x3d"modal"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.processbar":'\x3cdiv id\x3d"processModal"\x3e\x3cdiv class\x3d"modal fade in"  style\x3d"display: block;"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" id\x3d"processModalClose"\x3e\u2501\x3c/a\x3e\x3cspan id\x3d"js_title"\x3e\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85!\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body entity-info" style\x3d"min-height: 70px;"\x3e\x3cdiv class\x3d"progress controls tenantinfo-space" style\x3d"margin-left: 120px;"\x3e\x3cdiv class\x3d"progress-bar progress-bar-info progress-bar-striped" id\x3d"processNum" style\x3d"width: 1%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-backdrop  in"\x3e\x3c/div\x3e\x3c/div\x3e',
"component.trashbin":'\x3cdiv id\x3d"trashbin"\x3e\x3cdiv class\x3d"toolkit-bar j_trashbintab" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3cul class\x3d"toolkit-list fl j_goalView"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active js_entity_module" data-status\x3d""\x3e\x3ca\x3e\x3ci class\x3d"icon-tree glyphicon"\x3e\x3c/i\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab form"  data-status\x3d"form"\x3e\x3ca\x3e\x3ci class\x3d"icon-table2 glyphicon"\x3e\x3c/i\x3e\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_center_form scrollwrapper mCus-mh100 hide"\x3e\x3cdiv id\x3d"js_table_form" class\x3d"trashbin_container_form"\x3e\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cul class\x3d"toolkit-list trashbin-tool"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u540d\u79f0\uff1a\x3c/span\x3e\x3cinput id\x3d"flowName_form" class\x3d"form-control" type\x3d"text" name\x3d"name" style\x3d"width: 150px;"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u5220\u9664\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"deleteStartTime_form" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e - \x3cinput id\x3d"deleteEndTime_form" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item trashbin-tool-a" id\x3d"deletorsDiv_form"\x3e\x3cspan class\x3d"fl"\x3e\u5220\u9664\u8005\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer_form"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search nomg" id\x3d"deletors_form" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3ca id\x3d"search_form" class\x3d"btn btn-sm btn-success router search"\x3e\x3ci class\x3d"icon-search mr-3"\x3e\x3c/i\x3e\u641c\u7d22\x3c/a\x3e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item last trashbin-tool-b"\x3e\x3ca id\x3d"restoreAll_form" class\x3d"btn btn-sm btn-primary router"\x3e\x3ci class\x3d"icon-reply mr-3"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3ca class\x3d"js_form_trashbin_log btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-th mr-3"\x3e\x3c/i\x3e\u56de\u6536\u7ad9\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinContent_form" class\x3d"mh-20"\x3e\x3cul class\x3d"trash-bin-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item lp"\x3e\x3csapn class\x3d"ck"\x3e \x3cinput class\x3d"j_flowDelAll_form pointer" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"ellipsis name"\x3e\u540d\u79f0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo"\x3e\u5220\u9664\u8005\x3c/div\x3e\x3cdiv class\x3d"item time"\x3e\u5220\u9664\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"item opt"\x3e\u64cd\u4f5c\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"j_trashbinListScr" id\x3d"j_trashbinListScr_form" marginbottom\x3d"10"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist" id\x3d"j_trashlist_form"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty_form"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data_form" class\x3d"table-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"flowTrClone_form" class\x3d"hide"\x3e\x3cli class\x3d"j_trash"\x3e\x3cdiv class\x3d"item lp"\x3e\x3csapn class\x3d"ck"\x3e \x3cinput class\x3d"j_flowDel pointer" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"ellipsis name"\x3e\x3ca class\x3d"j_tfname js_formPreview" data-module\x3d"workflow" data-id\x3d"" renderType\x3d"02"\x3e\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo j_tuname"\x3e\u5220\u9664\u8005\x3c/div\x3e\x3cdiv class\x3d"item j_ttime time"\x3e\u5220\u9664\u65f6\u95f4\x3c/div\x3e\x3cdiv class\x3d"item opt j_tdel"\x3e\x3cimg src\x3d"images/loading_small.gif" class\x3d"j_loadin fr opt-loading hide"\x3e\x3ca class\x3d"j_thorougDestroy btn btn-sm router"\x3e\x3ci class\x3d"icon-trash mr-3"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3ca class\x3d"j_restore btn btn-sm router"\x3e\x3ci class\x3d"icon-reply mr-3"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_center mCus-mh100 scrollwrapper"\x3e\x3cdiv id\x3d"js_table"\x3e\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cul class\x3d"toolkit-list trashbin-tool"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u540d\u79f0\uff1a\x3c/span\x3e\x3cinput id\x3d"js_name" class\x3d"form-control" type\x3d"text" name\x3d"name" style\x3d"width: 150px;"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u5220\u9664\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"deleteStartTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e - \x3cinput id\x3d"deleteEndTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli  class\x3d"toolkit-item trashbin-tool-a" id\x3d"deletorsDiv"\x3e\x3cspan class\x3d"fl"\x3e\u5220\u9664\u8005\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search nomg" id\x3d"deletors" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3ca id\x3d"search" class\x3d"btn btn-sm btn-success router search"\x3e\x3ci class\x3d"icon-search mr-3"\x3e\x3c/i\x3e\u641c\u7d22\x3c/a\x3e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item last trashbin-tool-b"\x3e\x3ca id\x3d"restoreAll" class\x3d"btn btn-sm btn-primary router"\x3e\x3ci class\x3d"icon-reply mr-3"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3ca class\x3d"js_trashbin_log btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-th mr-3"\x3e\x3c/i\x3e\u56de\u6536\u7ad9\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinContent" class\x3d"mh-20"\x3e\x3cul class\x3d"trash-bin-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item lp"\x3e\x3csapn class\x3d"ck"\x3e\x3cinput class\x3d"j_DelAll pointer" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"ellipsis name"\x3e\u540d\u79f0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo"\x3e\u5220\u9664\u8005\x3c/div\x3e\x3cdiv class\x3d"item time"\x3e\u5220\u9664\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item opt"\x3e\u64cd\u4f5c \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"j_trashbinListScr" id\x3d "j_trashbinScr" marginbottom\x3d"10"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data" class\x3d"table-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinClone" class\x3d"hide"\x3e\x3cli class\x3d"j_trash"\x3e\x3cdiv class\x3d"item lp"\x3e\x3csapn class\x3d"ck"\x3e\x3cinput class\x3d"j_Del pointer" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"ellipsis name"\x3e\x3ca class\x3d"j_tfname j_entityslider-toggle" data-module\x3d"" data-id\x3d"" renderType\x3d"02"\x3e\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo j_tuname"\x3e\u5220\u9664\u8005\x3c/div\x3e\x3cdiv class\x3d"item time j_ttime"\x3e\u5220\u9664\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item opt j_tdel"\x3e\x3cimg src\x3d"images/loading_small.gif" class\x3d"j_loadin fr opt-loading hide"\x3e\x3ca class\x3d"j_thorougDestroy btn btn-sm router"\x3e\x3ci class\x3d"icon-trash mr-3"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3ca class\x3d"j_restore btn btn-sm router"\x3e\x3ci class\x3d"icon-reply mr-3"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"loading-big hide"\x3e\x3c/div\x3e',
"component.trashbinlog":'\x3cdiv class\x3d"modal fade trashbinlog-bx" id\x3d"trashbinlog-entityBox" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e\x3ch4 class\x3d"modal-title"\x3e\u56de\u6536\u7ad9\u65e5\u5fd7\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"mb-20 trashbinlog-ct"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u540d\u79f0\uff1a\x3c/span\x3e\x3cinput id\x3d"js_name_log" class\x3d"form-control name-log" type\x3d"text" name\x3d"name"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u64cd\u4f5c\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"deleteStartTimeLog" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e - \x3cinput id\x3d"deleteEndTimeLog" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli class\x3d"fr"\x3e\x3ca id\x3d"search_log" class\x3d"btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-search glyphicon"\x3e\x3c/i\x3e\u641c\u7d22\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"deletorsDivLog" class\x3d"toolkit-item toolkit-item-nobr"\x3e\x3cspan class\x3d"fl"\x3e\u64cd\u4f5c\u8005\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"deletors" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinlogContent" class\x3d"bg-white trashbinlogContent"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item" style\x3d"width:50%"\x3e\x3cdiv class\x3d"ellipsis name"\x3e\u540d\u79f0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo" style\x3d"width:14%"\x3e\u64cd\u4f5c\u8005\x3c/div\x3e\x3cdiv class\x3d"item opt" style\x3d"width:14%"\x3e\u64cd\u4f5c\u7c7b\u578b \x3c/div\x3e\x3cdiv class\x3d"item time" style\x3d"width:18%"\x3e\u64cd\u4f5c\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"scrollwrapper j_trashbinListScr"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data_log" class\x3d"table-more mt-0 hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinlogClone" class\x3d"hide trashbinlogClone"\x3e\x3cli\x3e\x3cdiv class\x3d"item" style\x3d"width:50%"\x3e\x3cdiv class\x3d"ellipsis name"\x3e\x3ca class\x3d"j_tfname" data-module\x3d"" data-id\x3d"" renderType\x3d"02"\x3e\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_tuname" style\x3d"width:14%"\x3e\u64cd\u4f5c\u8005\x3c/div\x3e\x3cdiv class\x3d"item opt j_tdel" style\x3d"width:14%"\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_ttime" style\x3d"width:18%"\x3e\u64cd\u4f5c\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.fileversionlist":'\x3cdiv class\x3d"modal fileVersionModal doc-modal fade" id\x3d"fileVersionModal"\x3e\x3cdiv class\x3d"modal-dialog" style\x3d"width: 800px;"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u7248\u672c\u6d4f\u89c8\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body entity-info" id\x3d"documentnew-info" style\x3d"max-height: 700px;overflow: hidden;"\x3e\x3cdiv id\x3d"js_table"\x3e\x3cdiv class\x3d"doc-tool mb-20"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u63cf\u8ff0\uff1a\x3c/span\x3e\x3cinput id\x3d"describeSearch" class\x3d"form-control" type\x3d"text" name\x3d"describeSearch"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"createBeginTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e-\x3cinput id\x3d"createEndTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item last"\x3e\x3ca id\x3d"search" class\x3d"btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-search glyphicon"\x3e\x3c/i\x3e\u67e5\u8be2\x3c/a\x3e\x3c/li\x3e\x3cli  class\x3d"toolkit-item toolkit-item-nobr" id\x3d"creatorDiv"\x3e\x3cspan class\x3d"fl"\x3e\u521b\u5efa\u8005\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"creator" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ca class\x3d"icon-plus"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"content" class\x3d"bg-white mb-20"\x3e\x3cul class\x3d"trash-bin-ul doc-bin-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item lp" style\x3d"width:40%"\x3e\x3cspan style\x3d"margin-left: -5px;"\x3e\u7248\u672c\x3c/span\x3e\x3cdiv class\x3d"describe" style\x3d"margin-left: 40px;"\x3e\u63cf\u8ff0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item createUser" style\x3d"width:15%"\x3e\u521b\u5efa\u8005\x3c/div\x3e\x3cdiv class\x3d"item createTime" style\x3d"width:21%"\x3e\u521b\u5efa\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item handle" style\x3d"width:24%"\x3e\u64cd\u4f5c \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"j_versionListScr" marginbottom\x3d"10" style\x3d"height: 500px;" auto-scroll\x3d"yes"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_versionlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cli class\x3d"list-more hide"\x3e\x3ca id\x3d"more_data"\x3e\u66f4\u591a\x26gt;\x26gt;\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"contentClone" class\x3d"hide"\x3e\x3cli class\x3d"j_trash"\x3e\x3cdiv class\x3d"item lp" style\x3d"width:40%"\x3e\x3cspan class\x3d"vs"\x3e\x3cinput class\x3d"j_Del" type\x3d"checkbox"\x3e\x3c/span\x3e\x3cdiv class\x3d"ellipsis describe" style\x3d"margin-left: 40px;" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca class\x3d" j_entityslider-toggle" data-module\x3d"" data-id\x3d"" renderType\x3d"02" style\x3d"  margin-left: 40px;"\x3e\u65e0\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item createUser" style\x3d"width:15%"\x3e\u521b\u5efa\u8005\x3c/div\x3e\x3cdiv class\x3d"item createTime" style\x3d"width:21%"\x3e\u521b\u5efa\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item j_tdel" style\x3d"width:24%"\x3e\x3cimg src\x3d"images/loading_small.gif" class\x3d"j_loadin fr opt-loading hide"\x3e\x3ca class\x3d"hide handle" style\x3d"margin-right: 0px"\x3e\x3c/a\x3e\x3ca class\x3d"detail remoteDownload btn btn-xs btn-info" data-dltype\x3d"version" style\x3d"margin-right: 0px"\x3e\u4e0b\u8f7d\x3c/a\x3e\x3ca class\x3d"restore btn btn-xs btn-success"\x3e\x3ci class\x3d"icon-reply glyphicon"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.chatHistory":'\x3cdiv id\x3d"chat-histroy-modal" class\x3d"chat-histroy-modal modal fade j_chat_filterSlip_js"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u804a\u5929\u8bb0\u5f55\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body  j_chat-history scrollwrapper"\x3e\x3cdiv class\x3d"chat-history-view"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ta-r"\x3e\x3cul class\x3d"pagination nomg va-t hide"\x3e\x3cli class\x3d"page-first page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\x3ci class\x3d"icon-step-backward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e\u7b2c1/1\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\x3ci class\x3d"icon-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-daybox-clone" class\x3d"daybox hide"\x3e\x3cdiv class\x3d"date"\x3e\x3ctime\x3e2015-8-12\x3c/time\x3e\x3chr\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-history-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-box-clone" class\x3d"list-item mine hide"\x3e\x3cdiv class\x3d"info"\x3e\x3cspan\x3e\u59d3\u540d\x3c/span\x3e\x3ctime\x3e12:00:02\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"content break"\x3e\u6d4b\u8bd5\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.quickInvite":'\x3cdiv id\x3d"quick-invite-modal" class\x3d"quick-invite-modal modal fade"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton class\x3d"close" aria-hidden\x3d"true" data-dismiss\x3d"modal" type\x3d"button"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"user-invite j_form-invite form-horizontal" id\x3d"user-invite"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u59d3\u540d\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"inputUsername" name\x3d"username" v-required\x3d"true" v-name\x3d"name" maxlength\x3d"15" placeholder\x3d"\u8bf7\u8f93\u5165\u59d3\u540d" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group nomg"\x3e\x3clabel class\x3d"control-label"\x3e\u8054\u7cfb\u65b9\u5f0f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" id\x3d"inputEmail" class\x3d"form-control" name\x3d"email" maxlength\x3d"50" v-required\x3d"true" v-name\x3d"emailOrMobile" placeholder\x3d"\u8bf7\u8f93\u5165\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ta-c"\x3e\x3cbutton id\x3d"invite-submit" type\x3d"submit" class\x3d"btn btn-sm btn-success w-60"\x3e\u9080\u8bf7\x3c/button\x3e\x3cbutton id\x3d"invite-cancel" type\x3d"button" class\x3d"btn btn-sm btn-danger w-60"\x3e\u53d6\u6d88\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.addteam":'\x3cdiv id\x3d"jointeamModal" class\x3d"modal fade team-pass-modal" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u521b\u5efa\u6216\u52a0\u5165\u56e2\u961f\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"j_join_team" class\x3d"modal-body"\x3e\x3cdiv\x3e\x3cdiv class\x3d"j_loading_tip loading_small addteam-view-loading hide" id\x3d"copy-loading"\x3e\x3cspan\x3e\u6b63\u5728\u521b\u5efa\u56e2\u961f\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_loading_tip addteam-view-bg hide"\x3e\x3c/div\x3e\x3cp class\x3d"tip ta-c"\x3e\u60a8\u53ef\u4ee5\u7533\u8bf7\u52a0\u5165\u5176\u4ed6\u56e2\u961f\u6216\u8005\u521b\u5efa\u65b0\u56e2\u961f\uff0c\u5b9e\u73b0\u8de8\u56e2\u961f\u534f\u4f5c\uff01\x3c/p\x3e\x3cdiv id\x3d"j_apply_area" class\x3d"j_siblings_area teams-join hide"\x3e\x3cdiv class\x3d"tc team-search input-group j_search_area"\x3e\x3cinput id\x3d"search-team-keywords" type\x3d"text" class\x3d"form-control" placeholder\x3d"\u8bf7\u8f93\u5165\u60a8\u7684\u56e2\u961f\u540d\u79f0"\x3e\x3cspan class\x3d"input-group-btn"\x3e\x3ca id\x3d"search-team-btn" class\x3d"btn btn-sm btn-warning"\x3e\u641c\u7d22\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_small mgt10 tc hide" id\x3d"documentlist-loading"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"j_team-search-list team-search-list"\x3e\x3cli class\x3d"j_search_result_title list-item bold hide"\x3e\x3cspan class\x3d"sn"\x3e\u5e8f\u53f7\x3c/span\x3e\x3cspan class\x3d"name ellipsis"\x3e\u56e2\u961f\u540d\u79f0\x3c/span\x3e\x3cspan class\x3d"leader ellipsis"\x3e\u56e2\u961f\u8054\u7cfb\u4eba\x3c/span\x3e\x3cspan class\x3d"option"\x3e\u64cd\u4f5c\x3c/span\x3e\x3c/li\x3e\x3cdiv id\x3d"search-result"\x3e\x3cli\x3e\x3cul class\x3d"j_search-list search-list"\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"result-choose" class\x3d"ui-colorbox ui-colorbox-info p-15 mt-10 hide"\x3e\x3cem\x3e\u63d0\u793a\uff1a\x3c/em\x3e\x3cspan id\x3d"exists-result" class\x3d"hide"\x3e\u4ee5\u4e0a\u662f\u4e0e\u60a8\u641c\u7d22\u76f8\u7c7b\u4f3c\u7684\u56e2\u961f\uff0c\u60a8\u53ef\u4ee5\u8f93\u5165\u66f4\u63a5\u8fd1\u7684\u5173\u952e\u5b57\uff0c\u4e5f\u53ef\u7533\u8bf7\u52a0\u5165\u56e2\u961f\u3001\x3c/span\x3e\x3cspan id\x3d"no-result" class\x3d""\x3e\u6ca1\u6709\u627e\u5230\u4e0e\u60a8\u641c\u7d22\u76f8\u7c7b\u4f3c\u7684\u56e2\u961f\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\x3c/span\x3e\x3ca id\x3d"create-link"\x3e\u521b\u5efa\u56e2\u961f\x3c/a\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"j_create_area" class\x3d"j_siblings_area team-create hide"\x3e\x3cdiv id\x3d"create-form1" class\x3d"form-horizontal team-create-form"\x3e\x3cdiv class\x3d"error"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u56e2\u961f\u540d\u79f0\x3cspan class\x3d"c-danger"\x3e*\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"input-group"\x3e\x3cinput class\x3d"form-control w-300 j_tenant_name" type\x3d"text" name\x3d"tenantName"\x3e\x3cspan class\x3d"input-group-btn"\x3e\x3ca id\x3d"finish-team-btn" class\x3d"btn btn-sm btn-success mr-5"\x3e\u521b\u5efa\u56e2\u961f\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"j_tenant_clone" class\x3d"list-item j_tenant_li"\x3e\x3cspan class\x3d"sn"\x3e\x3ci\x3e1\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"j_name name ellipsis"\x3e0312\u6d4b\u8bd51\x3c/span\x3e\x3cspan class\x3d"j_whoBuild leader ellipsis"\x3e\u96f6\u53f7\x3c/span\x3e\x3cspan class\x3d"j_options_btn j_options_join"\x3e\x3ca class\x3d"btn btn-primary btn-sm j_join_apply_btn"\x3e\u7533\u8bf7\u52a0\u5165\u56e2\u961f\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_options_btn j_options_cancel hide"\x3e\x3ca class\x3d"btn btn-primary btn-sm j_cancel_apply_btn"\x3e\u53d6\u6d88\u7533\u8bf7\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_options_btn j_options_acceptorrefuse hide"\x3e\x3ca class\x3d"btn btn-primary btn-sm j_accept_apply_btn"\x3e\u63a5\u53d7\x3c/a\x3e\x3ca class\x3d"btn btn-primary btn-sm j_refuse_apply_btn"\x3e\u62d2\u7edd\x3c/a\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv class\x3d"j_but_area ta-c team-pass-begin pt-20"\x3e\x3cdiv class\x3d"j_apply_btn_area apply-btn"\x3e\x3cdiv\x3e\x3ca icon\x3d"#j_apply_area" class\x3d"j_apply_btn btn w-300 btn-primary" target\x3d"_blank"\x3e\u52a0\u5165\u56e2\u961f\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"fs-12 mt-5 c-999" id\x3d"apply-tip"\x3e\uff08\u6839\u636e\u56e2\u961f\u540d\u79f0\u641c\u7d22\uff0c\u7533\u8bf7\u52a0\u5165\u5df2\u6709\u56e2\u961f\uff09\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_create_btn_area create-btn"\x3e\x3cdiv\x3e\x3ca icon\x3d"#j_create_area" class\x3d"j_create_btn btn w-300 btn-success" target\x3d"_blank"\x3e\u521b\u5efa\u56e2\u961f\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"fs-12 mt-5 c-999" id\x3d"create-tip"\x3e\uff08\u521b\u5efa\u65b0\u7684\u56e2\u961f\uff09\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.inviteNewTeam":'\x3cdiv id\x3d"inviteteamModal" class\x3d"modal fade inviteteam-modal" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u63a8\u8350\u7ed9\u597d\u53cb\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"invite_new_team" class\x3d"modal-body"\x3e\x3cdiv class\x3d"guide"\x3e\x3cp\x3e\u89c9\u5f97\u8fd8\u4e0d\u9519\uff0c\u5c31\u63a8\u8350\u7ed9\u60a8\u8eab\u8fb9\u7684\u670b\u53cb\u4f19\u4f34\u5427\uff0c\u9080\u8bf7\u4ed6\u4eec\u56e2\u961f\u4e5f\u80fd\u7acb\u5373\u542f\u7528eteams\uff0c\u642d\u5efa\u4ed6\u4eec\u7684\u4e00\u7ad9\u5f0f\u56e2\u961f\u534f\u4f5c\u5e73\u53f0\u3002 \x3c/p\x3e\x3cp\x3e\u4ee5\u4e0b\u662f\u60a8\u7684\u9080\u8bf7\u7801\u548c\u9080\u8bf7\u94fe\u63a5\uff0c\u53ef\u4ee5\u544a\u8bc9\u6b64\u9080\u8bf7\u7801\u6216\u8005\u76f4\u63a5\u590d\u5236\u94fe\u63a5\u7ed9\u60a8\u7684\u670b\u53cb\uff0c\u7ecf\u60a8\u63a8\u8350\u5165\u4f4feteams\u7684\u56e2\u961f\uff0c\u6211\u4eec\u4f1a\u6709\u76f8\u5e94\u7684\u5956\u54c1\u6216\u4f18\u60e0\u3002 \x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"copyfield"\x3e\x3cdiv class\x3d"colum code"\x3e\x3cdiv class\x3d"label"\x3e\u60a8\u7684\u9080\u8bf7\u7801:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"inviteCode"\x3e\x3c/span\x3e\x3ca id\x3d"copyBtn-invitecode" class\x3d"j_create_btn btn btn-sm btn-success"\x3e\u590d\u5236\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"colum url"\x3e\x3cdiv class\x3d"label"\x3e\u9080\u8bf7\u94fe\u63a5:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cspan class\x3d"inviteUrl"\x3e\x3c/span\x3e\x3ca id\x3d"copyBtn-link" class\x3d"j_create_btn btn btn-sm btn-success"\x3e\u590d\u5236\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"teampane"\x3e\x3ch4\x3e\u901a\u8fc7\u60a8\u63a8\u8350\u9080\u8bf7\u6ce8\u518c\u7684\u56e2\u961f\uff1a\x3c/h4\x3e\x3cp class\x3d"noteam hide" id\x3d"noneTeams"\x3e\u597d\u53ef\u60dc\uff0c\u6682\u65f6\u8fd8\u6ca1\u6709\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u9080\u8bf7\u52aa\u529b\u63a8\u8350\u5427\uff01\x3c/p\x3e\x3cdiv class\x3d"listwrap hide" id\x3d"inviteTeamsWrap"\x3e\x3cdiv class\x3d"hd hide"\x3e\x3cdiv class\x3d"unit"\x3e\x3cspan class\x3d"item sn"\x3e\u5e8f\u53f7\x3c/span\x3e\x3cspan class\x3d"item name"\x3e\u516c\u53f8\u540d\u79f0\x3c/span\x3e\x3cspan class\x3d"item man"\x3e\u8054\u7cfb\u4eba\x3c/span\x3e\x3cspan class\x3d"item count"\x3e\u7528\u6237\u6570\x3c/span\x3e\x3cspan class\x3d"item status"\x3e\u6ce8\u518c\u72b6\u6001\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bd" id\x3d"inviteTeamsList"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv class\x3d"unit" id\x3d"tenantItemClone"\x3e\x3cspan class\x3d"item sn j_num"\x3e\u5e8f\u53f7\x3c/span\x3e\x3cspan class\x3d"item name j_tenantName"\x3e\u516c\u53f8\u540d\u79f0\x3c/span\x3e\x3cspan class\x3d"item man j_contact"\x3e\u8054\u7cfb\u4eba\x3c/span\x3e\x3cspan class\x3d"item count j_usedLicense"\x3e\u7528\u6237\u6570\x3c/span\x3e\x3cspan class\x3d"item status j_status"\x3e\u6ce8\u518c\u72b6\u6001\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
"component.entityremind":'\x3cdiv id\x3d"entityremind-component" class\x3d"entityremind-component"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-remind"\x3e\x3c/i\x3e\u63d0\u3000\u3000\u9192:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3c% if(panel\x3d\x3d"calendar"){%\x3e\x3clabel\x3e\u8d77\u59cb\u65f6\u95f4\u524d\x3c/label\x3e\x3cselect id\x3d"remindTime" class\x3d"form-control acl-disabled ml-5 mr-10"\x3e\x3coption value\x3d"10_minute"\x3e10\u5206\u949f\x3c/option\x3e\x3coption value\x3d"30_minute"\x3e30\u5206\u949f\x3c/option\x3e\x3coption value\x3d"1_hour"\x3e1\u5c0f\u65f6\x3c/option\x3e\x3coption value\x3d"3_hour"\x3e3\u5c0f\u65f6\x3c/option\x3e\x3coption value\x3d"1_day"\x3e1\u5929\x3c/option\x3e\x3coption value\x3d"2_day"\x3e2\u5929\x3c/option\x3e\x3coption value\x3d"3_day"\x3e3\u5929\x3c/option\x3e\x3coption value\x3d"cancel"\x3e\u4e0d\u63d0\u9192\x3c/option\x3e\x3c/select\x3e\x3c%}%\x3e\x3c% if(panel\x3d\x3d"task"){%\x3e\x3clabel\x3e\u5230\u671f\u65e5\u524d\x3c/label\x3e\x3cselect id\x3d"remindTime" class\x3d"form-control acl-disabled ml-5 mr-10"\x3e\x3coption value\x3d"1_day"\x3e1\u5929\x3c/option\x3e\x3coption value\x3d"2_day"\x3e2\u5929\x3c/option\x3e\x3coption value\x3d"3_day"\x3e3\u5929\x3c/option\x3e\x3coption value\x3d"4_day"\x3e4\u5929\x3c/option\x3e\x3coption value\x3d"5_day"\x3e5\u5929\x3c/option\x3e\x3coption value\x3d"cancel"\x3e\u4e0d\u63d0\u9192\x3c/option\x3e\x3c/select\x3e\x3c%}%\x3e\x3c% if(panel\x3d\x3d"mainline"){%\x3e\x3clabel\x3e\u5230\u671f\u65e5\u524d\x3c/label\x3e\x3cselect id\x3d"remindTime" class\x3d"form-control acl-disabled ml-5 mr-10"\x3e\x3coption value\x3d"1_day"\x3e1\u5929\x3c/option\x3e\x3coption value\x3d"2_day"\x3e2\u5929\x3c/option\x3e\x3coption value\x3d"3_day"\x3e3\u5929\x3c/option\x3e\x3coption value\x3d"4_day"\x3e4\u5929\x3c/option\x3e\x3coption value\x3d"5_day"\x3e5\u5929\x3c/option\x3e\x3coption value\x3d"cancel"\x3e\u4e0d\u63d0\u9192\x3c/option\x3e\x3c/select\x3e\x3c%}%\x3e\x3cdiv id\x3d"remindEntry" class\x3d""\x3e\x3clabel class\x3d"mr-5"\x3e\u63d0\u9192\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"createRemind" class\x3d"acl-disabled mr-0"\x3e \u521b\u5efa\u4eba\x3c/label\x3e\x3c% if(panel!\x3d"calendar"){%\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"primaryRemind" class\x3d"acl-disabled mr-0"\x3e \u8d1f\u8d23\u4eba\x3c/label\x3e\x3c%}%\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"participantsRemind" class\x3d"acl-disabled mr-0"\x3e \u53c2\u4e0e\u4eba\x3c/label\x3e\x3c/div\x3e\x3c% if(panel\x3d\x3d"calendar"){%\x3e\x3cdiv class\x3d"pt-5"\x3e\x3ci class\x3d"icon-help" title\x3d\'\u63d0\u524d\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u5c0f\u4e8e1\u5929\uff0c\u5168\u5929\u65e5\u7a0b\u5c06\u5728\u65e5\u7a0b\u8d77\u59cb\u65f6\u95f4\u5f53\u59298\u70b9\u53d1\u9001\u63d0\u9192\uff1b\u63d0\u524d\u65f6\u95f4\u8bbe\u7f6e\u4e3a\u5927\u4e8e\u3001\u7b49\u4e8e1\u5929\uff0c\u5168\u5929\u65e5\u7a0b\u5c06\u5728\u63d0\u524d\u65e5\u671f\u5f53\u59298\u70b9\u53d1\u9001\u63d0\u9192\u3002\u975e\u5168\u5929\u65e5\u7a0b\u6309\u8bbe\u7f6e\u7684\u63d0\u524d\u65f6\u95f4\u6765\u53d1\u9001\u63d0\u9192\u3002\'data-toggle\x3d"tooltip" data-placement\x3d"bottom" data-template\x3d\'\x3cdiv class\x3d"tooltip i-tooltip" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow i-tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner i-tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e\'\x3e\x3c/i\x3e\x3c/div\x3e\x3c%}%\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.blog":'\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv id\x3d"blog-filter" class\x3d"btn-group dropdown hide" data-toggle\x3d"#blog-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm people"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"blog-filter-dropdown" class\x3d"dropdown-filter dropdown-div border-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_dropdownMenuToggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u65e5\u671f \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-menu border-dropdown j_dropDownMenu"\x3e\x3cdiv id\x3d"blog-datepicker" class\x3d"inline"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" id\x3d"blogsearch-keywords" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search j_search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr last"\x3e\x3ca id\x3d"make-all-read" class\x3d"hide btn btn-sm" title\x3d"\u5168\u90e8\u6807\u8bb0\u4e3a\u5df2\u8bfb"\x3e\u5168\u90e8\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd j_sidebarPren sidebar-in"\x3e\x3cdiv class\x3d"table-tray scrollwrapper"\x3e\x3cdiv class\x3d"tray-cell main-content"\x3e\x3cdiv id\x3d"blog-post"\x3e\x3c/div\x3e\x3cdiv id\x3d"blogs-container" class\x3d"blog-wrapper"\x3e\x3c/div\x3e\x3cdiv id\x3d"blogs-wrapper"\x3e\x3cdiv class\x3d"nodata-holder mt-50"\x3e\x3cdiv class\x3d"hide j_noResult"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more ml-65 mt-0 j_blogsMore"\x3e\u52a0\u8f7d\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-more j_no-more" align\x3d"center"\x3e\u5df2\u52a0\u8f7d\u6240\u6709\u65e5\u62a5\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"guide-div hide"\x3e\x3cdiv class\x3d"clearfix"\x3e\u60a8\u8fd8\u6ca1\u6709\u586b\u5199\u8fc7\u5de5\u4f5c\u65e5\u62a5\uff0c\u60a8\u53ef\u5728\u4e0a\u9762\u586b\u5199\u65e5\u62a5\u5e76\u201c\u53d1\u5e03\u201d\u3002\x3cbr/\x3e\u65e5\u62a5\u53ef\u4ee5\u7528\u6765\u5e2e\u52a9\u8bb0\u5f55\u6bcf\u4e00\u5929\u505a\u4e86\u4ec0\u4e48\u3001\u4eca\u5929\u7684\u5de5\u4f5c\u5fc3\u5f97\u5982\u4f55\u3001\u4e5f\u53ef\u4ee5\u5907\u5fd8\u660e\u5929\u7684\u4e8b\u9879\uff1b\x3cbr/\x3e\u4ee5\u53ca\u56e2\u961f\u8d1f\u8d23\u4eba\u53ef\u4ee5\u5173\u6ce8\u4e0b\u7ea7\u6bcf\u5929\u7684\u5de5\u4f5c\u60c5\u51b5\u3002 \x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3ca id\x3d"guide-blog-create" class\x3d"btn"\x3e\u586b\u5199\u5de5\u4f5c\u65e5\u62a5\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell main-sidebar" id\x3d"blog-right"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog_people hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u4ed6\u4eba\u65e5\u62a5\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u4ed6\u4eba\u65e5\u62a5\u663e\u793a\u7684\u662f\u60a8\u5173\u6ce8\u4eba\u7684\u65e5\u62a5\uff0c\u770b\u770b\u540c\u4e8b\u6216\u4e0a\u7ea7\u505a\u4e86\u4ec0\u4e48\uff0c\u53d6\u957f\u8865\u77ed\uff0c\u5171\u540c\u8fdb\u6b65\uff01\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog_unread hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u672a\u8bfb\u65e5\u62a5\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u672a\u8bfb\u65e5\u62a5\uff0c\u63d0\u9192\u60a8\u4fdd\u6301\u53ca\u65f6\u5bf9\u201c\u5173\u6ce8\u4eba\u201d\u65e5\u62a5\u7684\u67e5\u9605\uff01\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog_commentme hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u4ed6\u4eba\u8bc4\u8bba\u60a8\u7684\u65e5\u62a5\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8bf4\u8bf4\u4f60\u7684\u770b\u6cd5\u6216\u4e0d\u540c\u89c2\u70b9\u3001\u6216\u8005\u5efa\u8bae\u65b9\u6848\uff0c\u5e2e\u52a9\u4ed6\u4eba\u5176\u5b9e\u4e5f\u662f\u8ba9\u81ea\u5df1\u7684\u601d\u8def\u66f4\u660e\u6670\uff01\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog_replayme hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u56de\u590d\u60a8\u7684\u8bc4\u8bba\uff01\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"blogDateContainerClone" class\x3d"blog-date-container clearfix j_blogDataContainer"\x3e\x3cdiv class\x3d"blog-month j_blog-month hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-list" id\x3d"blogList"\x3e\x3cdl class\x3d"blog-item j_blog-item"\x3e\x3cdt\x3e\x3cdiv class\x3d"blog-date j_blog-date"\x3e\x3cdiv class\x3d"day"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar hide j_avatar"\x3e\x3ca\x3e\x3cimg src\x3d"images/avatar.png" alt\x3d""/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/dt\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"blogUserContainerClone" class\x3d"blog-user-container mark_blog_read j_markBlogRead clearfix j_blogUserContainer"\x3e\x3cdiv class\x3d"blog j_blog"\x3e\x3cdd class\x3d"blog-box"\x3e\x3cdiv class\x3d"box-top"\x3e\x3cdiv class\x3d"blog-header"\x3e\x3cp\x3e\x3ca class\x3d"name usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"new hide"\x3eNEW\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"blog-coord hide blog-minor"\x3e\x3cspan class\x3d"blog-address gps-address mr-10"\x3e\x3ci class\x3d"icon-map-marker mr-3"\x3e\x3c/i\x3e\u6d66\u4e1c\u65b0\u533a\u901a\u8000\u8def\x3c/span\x3e\x3ca class\x3d"blog-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3ci class\x3d"blog-client gps-client hide"\x3e\u6765\u81eaiPhone\u5ba2\u6237\u7aef\x3c/i\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-body j_blog-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-body-edit hide j_blogBodyEdit"\x3e\x3cdiv class\x3d"blog-input"\x3e\x3ctextarea class\x3d"form-control blog-textarea animated j_blogTextarea" rows\x3d"1"  placeholder\x3d"\u4eca\u5929\u8fd8\u505a\u4e86\u4ec0\u4e48?"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-edit-btns clearfix j_blog-post-btns"\x3e\x3ca id\x3d"blog-attach-later" class\x3d"btn btn-sm btn-attachment" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e \x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"pull-right"\x3e\x3ca class\x3d"btn btn-sm btn-success blog-body-edit-post-btn j_blogBodyEditPostBtn"\x3e\u53d1\u5e03 \x3c/a\x3e\x3ca class\x3d"btn btn-sm blog-body-edit-cancel-btn j_blogBodyEditCancelBtn"\x3e\u53d6\u6d88 \x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-attachments-later" class\x3d"entity-container attachment j_attachment clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles clearfix"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/blog/deleteAttachments/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs mt-3"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-time time"\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-action blog-header-right j_blog-action hide-im"\x3e\x3ca class\x3d"blog-add hide-im j_blogAdd" title\x3d"\u8865\u4ea4"\x3e\u8865\u4ea4\x3c/a\x3e\x3ca class\x3d"blog-edit hide-im graph graph-28-pencil j_blogEdit" title\x3d"\u7f16\u8f91"\x3e\x3c/a\x3e\x3ca class\x3d"blog-comment hide-im graph graph-28-bubble j_blogComment" title\x3d"\u8bc4\u8bba"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel blog-records-panel hide j_blog-records-panel"\x3e\x3c/div\x3e\x3cdiv class\x3d"panel blog-comment-panel hide j_blogCommentPanel"\x3e\x3cdiv class\x3d"panel-heading j_commentHead"\x3e\x3cdiv class\x3d"panel-collapse"\x3e\x3ca\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-title j_panel-title"\x3e\u8bc4\u8bba\x3cspan class\x3d"comment-countt hide j_commentCountt"\x3e(\x3cspan class\x3d"count j_count"\x3e\x3c/span\x3e)\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-comments j_blogComments"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"otherBlogsClone" class\x3d"other-blog-panel j_otherBlogPanel"\x3e\x3cdiv class\x3d"panel-heading j_panel-heading"\x3e\x3cdiv class\x3d"panel-collapse j_icon-down-sys"\x3e\x3ca class\x3d"fr"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"c-999 fr"\x3e\u6765\u81ea\u7cfb\u7edf\u5de5\u4f5c\u8bb0\u5f55\x3c/span\x3e\x3c/div\x3e\x3cul  id\x3d"other-group" class\x3d"blog-group panel-tab2 nav nav-pills"\x3e\x3cli id\x3d"all" class\x3d"group active" group\x3d"all"\x3e\x3ca\x3e\u5168\u90e8(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"task" class\x3d"group" group\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"customer" class\x3d"group" group\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"saleChance" class\x3d"group" group\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"production" class\x3d"group" group\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"document" class\x3d"group" group\x3d"document"\x3e\x3ca\x3e\u6587\u6863(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow" class\x3d"group" group\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"mainline" class\x3d"group" group\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workreport" class\x3d"group" group\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"calendar" class\x3d"group" group\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"j_blogSys"\x3e\x3cdiv class\x3d"other-blogs-container panel-body j_otherBlogsContainer"\x3e\x3cul id\x3d"blogRecordsListClone" class\x3d"blog-records-list j_blogRecordsList"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more m-10 mt-0 hide j_otherMore"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli id\x3d"otherBlogClone" class\x3d"blog-records-item"\x3e\x3cdfn class\x3d"graph"\x3e\x3c/dfn\x3e\x3cp class\x3d"time"\x3e\x3c/p\x3e\x3cdiv class\x3d"otherBlog"\x3e\x3cdiv class\x3d"other-body break" \x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"commentClone hide"\x3e\x3cdiv id\x3d"comment-clone" class\x3d"comment-box"\x3e\x3ca class\x3d"comment-user usercard-toggle"\x3e\x3c/a\x3e\x3cdiv\x3e\x3cspan class\x3d"comment-body"\x3e\x3c/span\x3e\x3cdiv class\x3d"comment-attachment entity-container attachment clearfix" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cspan class\x3d"parent-comment-body hide"\x3e\x3ca class\x3d"parent-username router usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"parent-content ellipsis"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e\x3cspan class\x3d"comment-cal"\x3e\x3c/span\x3e\x3ca class\x3d"comment-opt replay-blog" title\x3d"\u5bf9\u672c\u6761\u8bc4\u8bba\u7684\u56de\u590d"\x3e\u56de\u590d\x3cspan class\x3d"comment-comment-count"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"comment-opt transmit-blog" title\x3d"\u8f6c\u53d1\u5230\u6211\u7684\u5de5\u4f5c"\x3e\u8f6c\u4efb\u52a1\x3cspan class\x3d"comment-transmit-count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-comment-clone" class\x3d"replay-box clearfix"\x3e\x3cdiv class\x3d"comment-comment-hearder"\x3e\u56de\u590d\x3ca class\x3d"comment-comment-username router"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content-div"\x3e\x3ctextarea rows\x3d"3" class\x3d"comment-comment-content form-control bluebox" v-maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-comment-btn-div"\x3e\x3ca class\x3d"btn-replay btn btn-sm"\x3e\u56de\u590d\x3c/a\x3e\x3ca class\x3d"replay-cancel btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3cspan class\x3d"commentComment-bottom"\x3e\u5f53\u524d\u5df2\u8bc4\u8bba \x3ca class\x3d"commentComment-count"\x3e\x3c/a\x3e \u6b21\uff0c\x3cspan class\x3d"commentComment-history-extend"\x3e\x3cspan\x3e\u5c55\u5f00\x3c/span\x3e\x3ca class\x3d"commentComment-history-extend-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"commentComment-history-collapse hide"\x3e\x3cspan\x3e\u6536\u8d77\x3c/span\x3e\x3ca class\x3d"commentComment-history-collapse-icon icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"commentComment-commented hide"\x3e\x3cdiv class\x3d"commentComment-commented-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"transmit-clone" class\x3d"transmit-box clearfix"\x3e\x3cdiv class\x3d"transmit-tab"\x3e\x3cspan\x3e\u8f6c\u53d1\u5230\u4efb\u52a1\u534f\u4f5c\x3c/span\x3e\x3cspan class\x3d"transmit-parent-commenter"\x3e\x3c/span\x3e\x3ca class\x3d"icon-pencil commentreplay-share share selector-toggle" data-entity\x3d"employee"\x3e\x3c/a\x3e\x3cspan class\x3d"transmitDuedate-label"\x3e\u5230\u671f\u65e5\uff1a\x3c/span\x3e\x3cinput name\x3d"transmitDuedate" type\x3d"text" class\x3d"form-control datepicker textinput transmitDuedate"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-parent-content hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-content-div"\x3e\x3ctextarea rows\x3d"3" class\x3d"transmit-content bluebox form-control" v-maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-btn-div"\x3e\x3ca class\x3d"transmit-btn btn btn-sm"\x3e\u8f6c\u53d1\x3c/a\x3e\x3ca class\x3d"transmit-cancel btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3cspan class\x3d"transmit-bottom hide"\x3e\u5f53\u524d\u5df2\u8f6c\u53d1 \x3ca class\x3d"transmit-count"\x3e\x3c/a\x3e \u6b21\uff0c\x3cspan class\x3d"transmit-history-extend"\x3e\u5c55\u5f00\x3ca class\x3d"transmit-history-extend-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"transmit-history-collapse hide"\x3e\u6536\u8d77\x3ca class\x3d"transmit-history-collapse-icon"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"transmit-transmited hide"\x3e\x3cdiv class\x3d"transmit-transmited-more hide"\x3e\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"comment-commented-clone" class\x3d"comment-commented-box clearfix"\x3e\x3cdiv class\x3d"comment-commented-header"\x3e\x3ca class\x3d"comment-commented-user router" href\x3d"javascript:void(0);"\x3e\x3c/a\x3e\x3cspan class\x3d"comment-commented-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-commented-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"transmited-clone" class\x3d"transmited-box clearfix"\x3e\x3cdiv class\x3d"transmited-header"\x3e\x3ca class\x3d"transmited-user router" href\x3d"javascript:void(0);"\x3e\x3c/a\x3e\x3cspan class\x3d"transmited-cal"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"transmited-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.blogpage":'\x3cdiv class\x3d"module-view module-blog-view"\x3e\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"aside-content scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-blog"\x3e\x3c/i\x3e\u65e5\u62a5\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"j_myblog active"\x3e\x3ca class\x3d"router link-item" href\x3d"/blog/\x3c%\x3duserId%\x3e/myblog"\x3e\u6211\u7684\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_people j_type"\x3e\x3ca class\x3d"router link-item" href\x3d"/blog/\x3c%\x3duserId%\x3e/people"\x3e\u4ed6\u4eba\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_unread j_type"\x3e\x3ca class\x3d"router unread link-item" href\x3d"/blog/\x3c%\x3duserId%\x3e/unread"\x3e\x3cspan id\x3d"unreadBlog" class\x3d"fr badge"\x3e\x3c/span\x3e\u672a\u8bfb\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_commentme j_type"\x3e\x3ca id\x3d"commentMine" class\x3d"router commentme link-item" href\x3d"/blog/\x3c%\x3duserId%\x3e/commentme"\x3e\x3cspan id\x3d"commentMine-unread" class\x3d"fr badge"\x3e\x3c/span\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_replayme j_type"\x3e\x3ca id\x3d"replayMine" class\x3d"router replayme link-item" href\x3d"/blog/\x3c%\x3duserId%\x3e/replayme"\x3e\x3cspan id\x3d"replayMine-unread" class\x3d"fr badge"\x3e\x3c/span\x3e\u56de\u590d\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv class\x3d"main j_blogConScr scrollwrapper" id\x3d"blog-center"\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.blogpost":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header j_detail-blog-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\u65e5\u62a5\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-post-fast"\x3e\x3cdiv class\x3d"blog-post j_blog-post"\x3e\x3cdiv class\x3d"blog-post-input"\x3e\x3ctextarea class\x3d"j_postsize" placeholder\x3d"\u8bb0\u5f55\u4e00\u4e0b\u60a8\u4eca\u5929\u7684\u5de5\u4f5c\u6210\u679c\u548c\u5fc3\u5f97\u5427......" id\x3d"blog-textarea"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-post-handle j_blog-post-handle clearfix" id\x3d"post-area"\x3e\x3ca class\x3d"post-upload fs-14 fl ml-10" id\x3d"blog-attach"  data-original-title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"post-submit btn btn-lake fr" id\x3d"btn-post"\x3e\u53d1\u5e03 \x3c/a\x3e \x3cspan class\x3d"post-tip fr fs-12 j_post-tip"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-attachments" class\x3d"entity-container attachment clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.blogpostnew":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header j_detail-blog-header-new"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\u65e5\u62a5\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-post-fast-new"\x3e\x3cdiv class\x3d"blog-post j_blog-post-new"\x3e\x3cdiv class\x3d"blog-post-input"\x3e\x3ctextarea class\x3d"j_postsize-new" placeholder\x3d"\u8bb0\u5f55\u4e00\u4e0b\u60a8\u4eca\u5929\u7684\u5de5\u4f5c\u6210\u679c\u548c\u5fc3\u5f97\u5427......" id\x3d"blog-textarea-new"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-post-handle j_blog-post-handle-new clearfix" id\x3d"post-area-new"\x3e\x3ca class\x3d"post-upload fs-14 fl ml-10" id\x3d"blog-attach-new"  data-original-title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"post-submit btn btn-lake fr" id\x3d"btn-post-new"\x3e\u53d1\u5e03 \x3c/a\x3e \x3cspan class\x3d"post-tip fr fs-12 j_post-tip-new"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-attachments-new" class\x3d"entity-container attachment clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.report":'\x3cdiv id\x3d"blogreport" class\x3d"statsheet-view blogreport"\x3e\x3cdiv class\x3d"title"\x3e\x3cspan class\x3d"static-time"\x3e\x3c/span\x3e\u65e5\u62a5\u7edf\u8ba1\u62a5\u8868\x3c/div\x3e\x3cdiv class\x3d"card mh-10 p-10 mb-10"\x3e\x3cdiv class\x3d"static-choose"\x3e\x3cdiv\x3e\x3cselect class\x3d"form-control static-year"\x3e\x3coption value\x3d"2010"\x3e2010\u5e74\x3c/option\x3e\x3coption value\x3d"2011"\x3e2011\u5e74\x3c/option\x3e\x3coption value\x3d"2012"\x3e2012\u5e74\x3c/option\x3e\x3coption value\x3d"2013"\x3e2013\u5e74\x3c/option\x3e\x3coption value\x3d"2014"\x3e2014\u5e74\x3c/option\x3e\x3coption value\x3d"2015"\x3e2015\u5e74\x3c/option\x3e\x3coption value\x3d"2016"\x3e2016\u5e74\x3c/option\x3e\x3coption value\x3d"2017"\x3e2017\u5e74\x3c/option\x3e\x3coption value\x3d"2018"\x3e2018\u5e74\x3c/option\x3e\x3coption value\x3d"2019"\x3e2019\u5e74\x3c/option\x3e\x3coption value\x3d"2020"\x3e2020\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e1\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e2\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e3\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e4\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e5\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e6\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e7\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e8\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e9\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e10\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e11\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e12\u6708\x3c/div\x3e\x3cdiv class\x3d"filter"\x3e\x3cdiv class\x3d"myself"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" checked\x3e\x3cspan\x3e\u6211\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"myfollow"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan\x3e\u6211\u5173\u6ce8\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"mySubordinate"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan\x3e\u6211\u4e0b\u5c5e\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"report-data j_report-data scrollwrapper" marginbottom\x3d"50"\x3e\x3ctable class\x3d"table stat-table table-bordered"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-foot mt-10"\x3e\u8bf4\u660e\uff1a\x3cspan\x3e\x3cimg alt\x3d"\u6709\u65e5\u62a5" src\x3d"images/teams/submited_flat.png"\x3e\u6709\u65e5\u62a5\x3c/span\x3e\x3cspan\x3e\x3cimg alt\x3d"\u8865\u4ea4\u65e5\u62a5" src\x3d"images/teams/laterSubmited.png"\x3e\u8865\u4ea4\u65e5\u62a5\x3c/span\x3e\x3cspan\x3e\x3cimg alt\x3d"\u65e0\u65e5\u62a5 " src\x3d"images/teams/unsubmit.png"\x3e\u65e0\u65e5\u62a5\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"blog.weeklyblog":'\x3cdiv id\x3d"blogs-wrapper" class\x3d"scrollwrapper ml-10 mr-15"\x3e\x3cdiv id\x3d"blogs-container" class\x3d"blogs-container blog-wrapper"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"guide-div hide"\x3e\x3cdiv class\x3d"clearfix"\x3e\u60a8\u8fd8\u6ca1\u6709\u586b\u5199\u8fc7\u5de5\u4f5c\u65e5\u62a5\uff0c\u60a8\u53ef\u5728\u4e0a\u9762\u586b\u5199\u65e5\u62a5\u5e76\u201c\u53d1\u5e03\u201d\u3002\x3cbr/\x3e\u65e5\u62a5\u53ef\u4ee5\u7528\u6765\u5e2e\u52a9\u8bb0\u5f55\u6bcf\u4e00\u5929\u505a\u4e86\u4ec0\u4e48\u3001\u4eca\u5929\u7684\u5de5\u4f5c\u5fc3\u5f97\u5982\u4f55\u3001\u4e5f\u53ef\u4ee5\u5907\u5fd8\u660e\u5929\u7684\u4e8b\u9879\uff1b\x3cbr/\x3e\u4ee5\u53ca\u56e2\u961f\u8d1f\u8d23\u4eba\u53ef\u4ee5\u5173\u6ce8\u4e0b\u7ea7\u6bcf\u5929\u7684\u5de5\u4f5c\u60c5\u51b5\u3002 \x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3ca id\x3d"guide-blog-create" class\x3d"btn"\x3e\u586b\u5199\u5de5\u4f5c\u65e5\u62a5\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"blogDateContainerClone" class\x3d"blog-date-container clearfix"\x3e\x3cdiv class\x3d"blog-month" id\x3d"blogMonth"\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-list" id\x3d"blogList"\x3e\x3cdl class\x3d"blog-item"\x3e\x3cdt\x3e\x3cdiv class\x3d"blog-date"\x3e\x3cdiv class\x3d"day"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar hide"\x3e\x3ca\x3e\x3cimg src\x3d"images/avatar.png" alt\x3d"avatar"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/dt\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"blogUserContainerClone" class\x3d"blog-user-container mark_blog_read clearfix"\x3e\x3cdiv class\x3d"blog"\x3e\x3cdd class\x3d"blog-box"\x3e\x3cdiv class\x3d"box-top"\x3e\x3cdiv class\x3d"blog-header"\x3e\x3cp\x3e\x3ca class\x3d"name"\x3e\u738b\u51b2\x3c/a\x3e\x3cspan class\x3d"new hide"\x3eNEW\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"blog-coord hide blog-minor"\x3e\x3cspan class\x3d"blog-address gps-address mr-10"\x3e\x3ci class\x3d"icon-map-marker mr-3"\x3e\x3c/i\x3e\u6d66\u4e1c\u65b0\u533a\u901a\u8000\u8def\x3c/span\x3e\x3ca class\x3d"blog-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3ci class\x3d"blog-client gps-client hide"\x3e\u6765\u81eaiPhone\u5ba2\u6237\u7aef\x3c/i\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/blog/deleteAttachments/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"blog-time time"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel blog-records-panel hide"\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"otherBlogsClone" class\x3d"other-blog-panel"\x3e\x3cdiv class\x3d"panel-heading j_panel-heading"\x3e\x3cdiv class\x3d"panel-collapse j_icon-down-sys"\x3e\x3ca class\x3d"fr"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"c-999 fr"\x3e\u6765\u81ea\u7cfb\u7edf\u5de5\u4f5c\u8bb0\u5f55\x3c/span\x3e\x3c/div\x3e\x3cul  id\x3d"other-group" class\x3d"blog-group panel-tab2 nav nav-pills"\x3e\x3cli id\x3d"all" class\x3d"group active" group\x3d"all"\x3e\x3ca\x3e\u5168\u90e8(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"task" class\x3d"group" group\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"customer" class\x3d"group" group\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"document" class\x3d"group" group\x3d"document"\x3e\x3ca\x3e\u6587\u6863(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow" class\x3d"group" group\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"mainline" class\x3d"group" group\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workreport" class\x3d"group" group\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"calendar" class\x3d"group" group\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b(\x3cb\x3e0\x3c/b\x3e)\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"report-other-blogs-sys"\x3e\x3cdiv class\x3d"other-blogs-container panel-body"\x3e\x3cul id\x3d"blogRecordsListClone" class\x3d"blog-records-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv align\x3d"center" class\x3d"stream-more common-more m-15 other-more hide"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli id\x3d"otherBlogClone" class\x3d"blog-records-item"\x3e\x3cdfn class\x3d"graph"\x3e\x3c/dfn\x3e\x3cp class\x3d"time"\x3e\x3c/p\x3e\x3cdiv class\x3d"otherBlog"\x3e\x3cdiv class\x3d"other-body break" \x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"follow.user":'\x3cdiv id\x3d"followFansContainer" class\x3d"clearfix"\x3e\x3cdiv\x3e\x3c%if(!forProfile){%\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-follow"\x3e\x3c/i\x3e\x3cspan class\x3d"myfollow_title"\x3e\u6211\u5173\u6ce8\u7684\u4eba\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"follow-container" class\x3d"scrollwrapper follow-container"\x3e\x3cdiv id\x3d"follow-container-inner" class\x3d"clearfix"\x3e\x3cdiv class\x3d"follower-box follower-box-add"\x3e\x3cdiv id\x3d"follower-input" class\x3d"follower-input hide typeahead-wrapper"\x3e\x3cinput type\x3d"text" name\x3d"follower" value\x3d"" class\x3d"control-input form-control typeahead" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"follower-add" class\x3d"control-btn"\x3e\x3cdiv class\x3d"face"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"addtips"\x3e\u70b9\u51fb\u6dfb\u52a0\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-follow"\x3e\x3c/i\x3e\x3cspan class\x3d"myfans_title"\x3e\u5173\u6ce8\u6211\u7684\u4eba\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"fans-container" class\x3d"scrollwrapper follow-container"\x3e\x3cdiv id\x3d"fans-container-inner" class\x3d"clearfix"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3cdiv class\x3d"hide"\x3e\x3c%if(!forProfile){%\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-follow"\x3e\x3c/i\x3e\x3cspan class\x3d"mysubordinate_title"\x3e\u6211\u7684\u4e0b\u5c5e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3cdiv id\x3d"subordinate-container" class\x3d"scrollwrapper follow-container"\x3e\x3cdiv class\x3d"group clearfix"\x3e\x3cdiv class\x3d"title"\x3e\u76f4\u63a5\u4e0b\u5c5e\x3c/div\x3e\x3cdiv id\x3d"subordinate-container-inner"\x3e\x3cdiv class\x3d"addbox hide"\x3e\x3cdiv class\x3d"follower-box follower-box-add"\x3e\x3cdiv id\x3d"follower-input" class\x3d"follower-input hide typeahead-wrapper"\x3e\x3cinput type\x3d"text" name\x3d"follower" value\x3d"" class\x3d"control-input form-control typeahead" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"follower-add" class\x3d"control-btn"\x3e\x3cdiv class\x3d"face"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"addtips"\x3e\u70b9\u51fb\u6dfb\u52a0\u76f4\u63a5\u4e0b\u5c5e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"group clearfix indirect-subordinate-container-inner"\x3e\x3cdiv class\x3d"title"\x3e\u95f4\u63a5\u4e0b\u5c5e\x3c/div\x3e\x3cdiv id\x3d"indirect-subordinate-container-inner"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"follower-clone" class\x3d"follower-box"\x3e\x3ca data-user\x3d"id" class\x3d"btn-link follower-remove close" title\x3d"\u53d6\u6d88\u5173\u6ce8"\x3e\u00d7\x3c/a\x3e\x3cdiv class\x3d"face"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cul class\x3d"info"\x3e\x3cli class\x3d"name ellipsis"\x3e\x3ca class\x3d"router"\x3eusername\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"department ellipsis"\x3edepartment.name\x3c/li\x3e\x3cli class\x3d"approved"\x3e\x3cspan\x3e\x3ci class\x3d"icon-ok"\x3e\x3c/i\x3e\u5df2\u5173\u6ce8\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"unapproved"\x3e\x3cspan class\x3d""\x3e\x3ci class\x3d"icon-ok"\x3e\x3c/i\x3e\u5df2\u7533\u8bf7 \x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
"follow.page":'\x3cdiv id\x3d"follow_container"\x3e\x3caside class\x3d"aside"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-list"\x3e\x3c/i\x3e\u5173\u6ce8\u7684\u4eba\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"router j_myfollow" href\x3d"/users/myfollow/\x3c%\x3duserId%\x3e"\x3e\x3ca class\x3d"link-item"\x3e\u6211\u5173\u6ce8\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_myfans" href\x3d"/users/myfollow/\x3c%\x3duserId%\x3e/myfans"\x3e\x3ca class\x3d"link-item"\x3e\u5173\u6ce8\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_subordinate" href\x3d"/users/myfollow/\x3c%\x3duserId%\x3e/subordinate"\x3e\x3ca class\x3d"link-item"\x3e\u6211\u7684\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/aside\x3e\x3cdiv class\x3d"main scrollwrapper main-narrow j_main"\x3e\x3cdiv class\x3d"j_con"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"home.one":'\x3cdiv id\x3d"one"\x3e\x3cdiv id\x3d"top"\x3e\x3c/div\x3e\x3cdiv class\x3d"main-wrap"\x3e\x3cdiv id\x3d"main-pane" class\x3d"main-pane"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',"home.two":'\x3cdiv id\x3d"two"\x3e\x3cdiv id\x3d"top"\x3e\x3c/div\x3e\x3cdiv class\x3d"center-wrap"\x3e\x3cdiv id\x3d"center-pane" class\x3d"center-pane"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right-wrap"\x3e\x3cdiv id\x3d"right-pane" class\x3d"right-pane"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',"home.backbtn":'\x3cdiv class\x3d"btn-group dropdown-menu-toggle dropdown-backbtn"\x3e\x3ca class\x3d"btn back btn-sm dropdown-toggle"\x3e\u8fd4\u56de \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu"\x3e\x3cli\x3e\x3ca class\x3d"back" title\x3d"\u8fd4\u56de\u4e4b\u524d\u9875\u9762"\x3e\u8fd4\u56de\u524d\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/portal" title\x3d"\u6211\u7684\u5de5\u4f5c\u9996\u9875"\x3e\u5de5\u4f5c\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/blog" title\x3d"\u6211\u7684\u5de5\u4f5c\u65e5\u62a5"\x3e\u5de5\u4f5c\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router"  href\x3d"/tasks" title\x3d"\u6211\u7684\u4efb\u52a1\u534f\u4f5c"\x3e\u4efb\u52a1\u534f\u4f5c\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/documents" title\x3d"\u6211\u7684\u6587\u6863\u5e93"\x3e\u6587\u6863\u5e93\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/customers" title\x3d"\u6211\u7684\u5ba2\u6237\u53ca\u8054\u7cfb\u4eba"\x3e\u5ba2\u6237\u53ca\u8054\u7cfb\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/workflows" title\x3d"\u6211\u7684\u5ba1\u6279"\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/mainlines" title\x3d"\u6211\u7684\u5de5\u4f5c\u9879\u76ee"\x3e\u5de5\u4f5c\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/calendar" title\x3d"\u6211\u7684\u65e5\u7a0b"\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e',
"home.portal":'\x3cdiv class\x3d"hide"\x3e\x3cdl id\x3d"mainline-clone"  class\x3d"entitybox-toggle j_mainline_item" data-module\x3d"mainline" data-id\x3d""\x3e\x3cdt class\x3d"percent"\x3e\x3c/dt\x3e\x3cdd class\x3d"title"\x3e\x3cp class\x3d"j_mainline_name ellipsis"\x3e\x3c/p\x3e\x3cspan class\x3d"leader ellipsis"\x3e\x3c/span\x3e\x3c/dd\x3e\x3cdd class\x3d"j_shortcut option"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5173\u95ed\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cli id\x3d"task-clone" class\x3d"j_task-item entitybox-toggle" data-module\x3d"task" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text j_name ellipsis" data-module\x3d"task"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"task-create-clone"\x3e\x3cdiv class\x3d"title"\x3e\x3cinput type\x3d"text" class\x3d"title" placeholder\x3d"\u4e00\u53e5\u8bdd\u63cf\u8ff0\u4efb\u52a1..." maxlength\x3d"100"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cdl id\x3d"blog-clone" class\x3d"j_portal-blog-item portal-blog-item clearfix"\x3e\x3cdt class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/dt\x3e\x3cdd class\x3d"blog-box"\x3e\x3cdiv class\x3d"blog-header"\x3e\x3cspan\x3e\x3ca class\x3d"user  ellipsis usercard-toggle "\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"time"\x3e\x3c/span\x3e\x3cspan class\x3d"new hide"\x3eNEW\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-body blog-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-coord blog-coord hide"\x3e\x3ci class\x3d"icon-map-marker" title\x3d"\u5730\u7406\u4f4d\u7f6e"\x3e\x3c/i\x3e\x3cspan class\x3d"blog-address gps-address"\x3e\x3c/span\x3e\x3ca class\x3d"blog-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-detail blog-detail"\x3e\x3cp class\x3d"j_mainline-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_task-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_customer-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_document-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_workflow-count "\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"ta-r italic c-999"\x3e\x3cspan class\x3d"create-time"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cli id\x3d"customer-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"customer" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis "\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true" \x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"document-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"document" data-id\x3d""\x3e\x3cspan class\x3d"doc-icon"\x3e\x3ci\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name ellipsis text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true" \x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"workflow-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"workflow" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis"\x3e\x3cspan class\x3d"js_flowname"\x3e\x3c/span\x3e\x3cspan class\x3d"js_sernum"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"calendar-clone" class\x3d"j_agenda-entity" data-module\x3d"agenda" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"portal-container" class\x3d"module-view i-view-wrapper scrollwrapper j_iViewScr"\x3e\x3cdiv class\x3d"i-view"\x3e\x3cdiv class\x3d"i-content"\x3e\x3cdiv class\x3d"i-main-col"\x3e\x3cdiv class\x3d"i-dynamic clearfix"\x3e\x3cdiv class\x3d"i-dynamic-main"\x3e\x3cdiv class\x3d"i-dynamic-main-inner"\x3e\x3cdiv class\x3d"i-dynamic-post clearfix" id\x3d"j_dynamic-post"\x3e\x3c/div\x3e\x3cdiv class\x3d"i-dynamic-channel j_dynamicTab card"\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cul class\x3d"channel fl"\x3e\x3cli class\x3d"j_dynaType j_all active" data-filter-type\x3d"all"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_dynaType j_share"\x3e\x3ca\x3e\u5206\u4eab\x3c/a\x3e\x3cdiv class\x3d"hide"\x3e\x3cul\x3e\x3cli data-filter-type\x3d"share" class\x3d"active"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareAtme"\x3e\x3ca\x3e@\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareReplay"\x3e\x3ca\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"likeme"\x3e\x3ca\x3e\u8d5e\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mine" class\x3d"myShare"\x3e\x3ca\x3e\u6211\u7684\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"j_dynaType j_workdyna"\x3e\x3ca\x3e\u5de5\u4f5c\u52a8\u6001\x3c/a\x3e\x3cdiv class\x3d"hide"\x3e\x3cul\x3e\x3cli class\x3d"active" data-filter-type\x3d"workAll"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"blog"\x3e\x3ca\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"toolkit-list mt-10 mr-15 fr"\x3e\x3cli class\x3d"toolkit-item search hide"\x3e\x3cinput class\x3d"form-control" type\x3d"text" id\x3d"search-keywords"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_dropdownMenuToggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u65e5\u671f \x3ciclass\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-menu border-dropdown dropdown-menu-right j_dropDownMenu"\x3e\x3cdiv id\x3d"dyna-datepicker" class\x3d"inline"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3ci class\x3d"icon-help" title\x3d"\u5de5\u4f5c\u52a8\u6001\u6743\u9650\u8bf4\u660e\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u4e0b\u5c5e\u53ca\u53c2\u4e0e\u4e8b\u9879\u7684\u5de5\u4f5c\u52a8\u6001\u53ca\u5176\u5177\u4f53\u5185\u5bb9\uff1b\u975e\u4e0b\u5c5e\u7684\u5de5\u4f5c\u52a8\u6001\u5c5e\u4e8e\u65e0\u6743\u9650\u8303\u56f4\uff0c\u4ec5\u80fd\u4e86\u89e3\u5230TA\u7684\u5de5\u4f5c\u52a8\u4f5c" data-toggle\x3d"tooltip" data-placement\x3d"top"data-template\x3d\'\x3cdiv class\x3d"tooltip i-tooltip" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow i-tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner i-tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e\'\x3e\x3c/i\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"sub-channel hide j_dynamicSubTab clearfix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-dynamic-card-wrap j_dyna-card-list"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_card-loading i-dynamic-loading"\x3e\x3cspan\x3e\u6570\u636e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_loadedAll hide"\x3e\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_nodata hide"\x3e\u6ca1\u6709\u53ef\u663e\u793a\u7684\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-dynamic-side"\x3e\x3cdiv class\x3d"i-timer j_timer card"\x3e\x3ca class\x3d"checkin-btn tran-bg fr j_check_inOrOut"\x3e\u7b7e\u5230\x3c/a\x3e\x3ctime\x3e\x3cp class\x3d"hour" id\x3d"j_timeHour"\x3e00:00:00\x3c/p\x3e\x3cp class\x3d"date" id\x3d"j_timeYear"\x3e1900/1/1\x3c/p\x3e\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"i-dynamic-owner j_dynamic-owner"\x3e\x3cul class\x3d"owner-group"\x3e\x3cli class\x3d"j_company active" data-range\x3d"company"\x3e\x3ca\x3e\u5168\u516c\u53f8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"hide j_watched" data-range\x3d"watched"\x3e\x3ca\x3e\u6211\u5173\u6ce8\u7684\u540c\u4e8b\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"owner-group hide j_level"\x3e\x3cli class\x3d"hide j_superiors" data-range\x3d"superiors"\x3e\x3ca\x3e\u6211\u4e0a\u7ea7\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"hide j_directSubordinates" data-range\x3d"directSubordinates"\x3e\x3ca\x3e\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"hide j_subordinates" data-range\x3d"subordinates"\x3e\x3ca\x3e\u6211\u6240\u6709\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"owner-group"\x3e\x3cli data-range\x3d"department"\x3e\x3ca\x3e\u672c\u90e8\u95e8\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"otherDepartment" class\x3d"j_ownergroupLi j_otherDepartment" data-range\x3d"otherDepartment"\x3e\x3ca\x3e\u5176\u4ed6\u90e8\u95e8\x3c/a\x3e\x3cdiv id\x3d"departmentDiv" class\x3d"owner-sub popbox suggestion-widget"\x3e\x3cdiv class\x3d"suggestion-input"\x3e\x3cinput id\x3d"departmenetInput" class\x3d"form-control form-control-block"\x3e\x3c/div\x3e\x3cdiv class\x3d"suggestion-list scrollwrapper"\x3e\x3cul\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-side-col"\x3e\x3cdiv class\x3d"i-tile clearfix j_tag_div"\x3e\x3cdiv class\x3d"i-tile-item ds-ib-w tran-bg unfinish j_title_item" id\x3d"j_unfinish" data-href\x3d"/feed/unfinish/all"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-tile-item ds-ib-w tran-bg follow j_title_item" id\x3d"j_watched" data-href\x3d"/feed/watched/all"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-tile-item ds-ib-w tran-bg tags j_title_item" id\x3d"j_privacy" data-href\x3d"/tag/privacy/list"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u6807\u7b7e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-mini-modules j_portal-sortable" id\x3d"modules-section" data-id\x3d"3"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"dynamic-card" class\x3d"i-dynamic-card j_dyna-card"\x3e\x3cdiv class\x3d"card-detail"\x3e\x3cdiv class\x3d"avatar j_avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"info ellipsis"\x3e\x3ca class\x3d"usercard-toggle bold c-666 j_name"\x3e\x3c/a\x3e\x3cspan class\x3d"event j_event"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"text j_content"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/blog/deleteAttachments/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"status"\x3e\x3cdiv class\x3d"opt fr j_opt"\x3e\x3cspan class\x3d"a-feedback j_feedback"\x3e\x3cspan class\x3d"j_tip_feedback"\x3e\u8bc4\u8bba\x3c/span\x3e(\x3cem\x3e0\x3c/em\x3e)\x3ci class\x3d"arr"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"j_like j_a-like"\x3e\x3cspan class\x3d"j_praise"\x3e\x3ci class\x3d"graph arr"\x3e\x3c/i\x3e\x3ci class\x3d"icon-thumbs-up"\x3e\x3c/i\x3e(\x3cem\x3e0\x3c/em\x3e)\x3c/span\x3e\x3cdiv class\x3d"like-pop j_like-pop"\x3e\x3cul class\x3d"like-avatars j_like-avatars"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e\x3ctime\x3e1900-01-01 00:00:00\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-like-wrapper j_more-wrapper hide"\x3e\x3cul class\x3d"like-avatars j_like-wrapper"\x3e\x3c/ul\x3e\x3cdiv class\x3d"like-pager j_like-pager"\x3e\x3cul class\x3d"pagination pagination-sm"\x3e\x3cli class\x3d"disabled j_last_page j_change_page"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_next_page j_change_page"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card-feed hide"\x3e\x3cdiv class\x3d"feed-post clearfix"\x3e\x3cdiv class\x3d"avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-input-wrap j_feedWrap"\x3e\x3cdiv class\x3d"feed-input j_feedInput"\x3e\x3ctextarea class\x3d"form-control form-block j_feedAuto" placeholder\x3d"\u8bc4\u8bba..."\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"j_feedBtn feed-btn"\x3e\x3ca class\x3d"send btn btn-xs fr btn-info"\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"feed-list j_feed-list hide"\x3e\x3c/ul\x3e\x3cdiv class\x3d"loading_small hide j_loading"\x3e\x3cspan\x3e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more nomg hide j_more"\x3e\u52a0\u8f7d\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli id\x3d"dyna-feed-item" class\x3d"list-item j_dyna-feed-item"\x3e\x3cdiv class\x3d"avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"hd"\x3e\x3ca class\x3d"name usercard-toggle"\x3e\u5eb7\u6653\u9e3d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content"\x3eabcdefg\u6d4b\u8bd5\x3c/div\x3e\x3cdiv class\x3d"comment-attachment entity-container attachment clearfix" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cspan class\x3d"parent-comment-body hide"\x3e\u56de\u590d\x3ca class\x3d"parent-username router usercard-toggle" title\x3d"\u6d4b\u8bd5\u53f7" userid\x3d"1553409649410197073" style\x3d"display: inline;"\x3e@\u6d4b\u8bd5\u53f7: \x3c/a\x3e\x3cspan class\x3d"parent-content ellipsis" title\x3d"\u6d4b\u8bd5\u4e0a\u4f20\u590d\u4f4d\u952e"\x3e\u6d4b\u8bd5\u4e0a\u4f20\u590d\u4f4d\u952e\x3c/span\x3e\x3c/span\x3e\x3cdiv class\x3d"ft"\x3e\x3cdiv class\x3d"action fr"\x3e\x3cspan class\x3d"j_item-feedback"\x3e\u56de\u590d\x3c/span\x3e\x3c/div\x3e\x3ctime\x3e1900-01-01 00:00:00\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-post clearfix hide"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-input-wrap j_feedWrap"\x3e\x3cdiv class\x3d"feed-input j_feedInput"\x3e\x3ctextarea class\x3d"form-control form-block j_feedAuto" placeholder\x3d"\u56de\u590d"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"j_feedBtn feed-btn"\x3e\x3ca class\x3d"send btn btn-xs fr btn-info"\x3e\u56de\u590d\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"mainline.statistics":'\x3cdiv class\x3d"stat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox mr-10"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd" dategroup\x3d"true"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd" dategroup\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"right" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d"\x3cdiv class\x3d\'text-left\'\x3e\u9879\u76ee\u7edf\u8ba1\u56fe\u8868\u8bf4\u660e\uff1a\x3c/div\x3e\x3cdiv class\x3d\'text-left\'\x3e1.\u4efb\u52a1\u8d1f\u8d23\u4eba\u662f\u6307\u5728\u9879\u76ee\u4e2d\u6709\u8d1f\u8d23\u4efb\u52a1\u7684\u6210\u5458\uff0c\u9ed8\u8ba4\u663e\u793a\u6240\u6709\u4efb\u52a1\u7684\u8d1f\u8d23\u4eba\uff1b\x3c/div\x3e\x3cdiv class\x3d\'text-left\'\x3e2.\u2018\u8fdb\u884c\u4e2d\u2019\u4e0e\u2018\u5ef6\u671f\u2019\u90fd\u662f\u8fdb\u884c\u4e2d\u7684\u4efb\u52a1\uff1b\u2018\u8fdb\u884c\u4e2d\u2019\u8868\u793a\u6b63\u5e38\u8fdb\u884c\u4e2d\u7684\u4efb\u52a1\uff1b\u2018\u5ef6\u671f\u2019\u8868\u793a\u5ef6\u671f\u8fdb\u884c\u4e2d\u7684\u4efb\u52a1\uff1b\x3c/div\x3e\x3cdiv class\x3d\'text-left\'\x3e3.\u70b9\u51fb\u56fe\u8868\u53ef\u67e5\u770b\u5230\u7edf\u8ba1\u7684\u4efb\u52a1\u660e\u7ec6\x3c/div\x3e" \x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group clearfix"\x3e\x3clabel class\x3d"control-label"\x3e\u4efb\u52a1\u8d1f\u8d23\u4eba\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"statisticians" class\x3d"fl entity-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle cdts-addmem-wgt fl"\x3e\x3ca class\x3d"btn btn-sm add-btn"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-menu dropdown-div border-dropdown dropdown-filter" style\x3d"display: none;"\x3e\x3cdiv class\x3d"filter-group filter-title"\x3e\x3cspan class\x3d"filter-label"\x3e\u4efb\u52a1\u8d1f\u8d23\u4eba\u5217\u8868\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"statisticians-list" class\x3d"filter-group"\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group filter-title"\x3e\x3cspan class\x3d"filter-label"\x3e\u5176\u4ed6\u4eba\u5458\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"employees-list" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editShare" class\x3d"control-btn entity-item-add"\x3e\x3ci class\x3d"icon-plus-thin" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"" data-original-title\x3d"\u6dfb\u52a0"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cscript type\x3d"text/template" id\x3d"statistician-tmp"\x3e\x3cspan class\x3d"entity-item"\x3e\x3ca data-id\x3d"\x3c%\x3d id %\x3e" data-module\x3d"employee"\x3e\x3c%\x3d username %\x3e\x3c/a\x3e\x3c/span\x3e\x3c/script\x3e\x3cscript type\x3d"text/template" id\x3d"statistician-list-tmp"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-id\x3d"\x3c%\x3d id %\x3e" data-module\x3d"employee"\x3e\x3c%\x3d username %\x3e\x3c/a\x3e\x3c/span\x3e\x3c/script\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-cdts-btn"\x3e\x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row mv-20"\x3e\x3cdiv class\x3d"col-6"\x3e\x3ctable style\x3d"width:100%"\x3e\x3ctr\x3e\x3ctd style\x3d"width:70%;border-right:0px black solid;"\x3e\x3cdiv class\x3d"card p-10 pr-0" style\x3d"border-right:0px black solid;"\x3e\x3cdiv id\x3d"finish-chart" class\x3d"h-234 w-full"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd style\x3d"width:30%;border-left:0px black solid;" \x3e\x3cdiv class\x3d"card p-10 pl-0" style\x3d"border-left:0px black solid;"\x3e\x3cdiv class\x3d"h-234 newtasks-div"\x3e\x3cp id\x3d"newTasks" group\x3d"\u65b0\u589e" bartype\x3d"mainlineState"  class\x3d "j_entityslider-toggle newtasks-num"\x3e0\x3c/p\x3e\x3cp style\x3d"text-align:center" class\x3d"control-label"\x3e\u65b0\u589e\u4efb\u52a1\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"col-6"\x3e\x3cdiv class\x3d"card p-10 text-center"\x3e\x3cdiv id\x3d"barType" class\x3d"btn-group mainline-bartype"\x3e\x3ca value \x3d "finish" class\x3d"btn active btn-primary"\x3e\u4efb\u52a1\u5b8c\u6210\u6570\u91cfTop5\x3c/a\x3e\x3ca value \x3d "delay" class\x3d"btn"\x3e\u4efb\u52a1\u5ef6\u671f\u6570\u91cfTop5\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"rank-chart" class\x3d"h-200 w-full"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card p-10 mb-20 text-center"\x3e\x3cdiv id\x3d"detailBarType" class\x3d"btn-group mainline-bartype mb-10"\x3e\x3ca value \x3d "member" class\x3d"btn active btn-primary"\x3e\u6309\u9879\u76ee\u6210\u5458\u7edf\u8ba1\x3c/a\x3e\x3ca value \x3d "date" class\x3d"btn"\x3e\u6309\u65e5\u671f\u7edf\u8ba1\x3c/a\x3e\x3ca value \x3d "group" class\x3d"btn"\x3e\u6309\u4efb\u52a1\u5206\u7ec4\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"detail-chart" class\x3d"h-400 w-full"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"tableDiv" class\x3d"tableDiv hide"\x3e\x3cdiv class\x3d"tableDiv-header ph-20"\x3e\x3cspan id\x3d"date"\x3e2015-10-05\x3c/span\x3e\x3cdiv class\x3d"fr"\x3e\x3cspan id\x3d"doing" class\x3d"doing"\x3e\u8fdb\u884c\u4e2d\uff1a\x3ca\x3e10\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"finished" class\x3d"finished"\x3e\u5df2\u5b8c\u6210\uff1a\x3ca\x3e14\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"created" class\x3d"created"\x3e\u65b0\u589e\uff1a\x3ca\x3e16\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"delayed" class\x3d"delayed"\x3e\u5ef6\u671f\uff1a\x3ca\x3e12\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tableDiv-content"\x3e\x3ctable class\x3d"table table-bordered bg-white"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e\u59d3\u540d\x3c/th\x3e\x3cth\x3e\u8fdb\u884c\u4e2d\x3c/th\x3e\x3cth\x3e\u5df2\u5b8c\u6210\x3c/th\x3e\x3cth\x3e\u65b0\u589e\x3c/th\x3e\x3cth\x3e\u5ef6\u671f\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody id\x3d"dateTableDiv"\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainline":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\u9879\u76ee\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli class\x3d"acl-hide acl-w-hide"\x3e\x3ca id\x3d"mainline-status" class\x3d"iconlabel" data-status\x3d"open"\x3e\x3ci class\x3d"glyphicon icon-todo"\x3e\x3c/i\x3e\x3cspan class\x3d"open-mainline"\x3e\u6807\u8bb0\u5173\u95ed\x3c/span\x3e\x3cspan class\x3d"close-mainline hide"\x3e\u91cd\u65b0\u6253\u5f00\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"acl-hide acl-w-hide acl-p-hide"\x3e\x3ca data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"btn-delete"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u9879\u76ee\u76f8\u5173\u4e8b\u9879" id\x3d"btn-linkdomain"\x3e\u9879\u76ee\u76f8\u5173\u4e8b\u9879\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle j_more_dropdown"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-cog"\x3e\x3c/i\x3e\u66f4\u591a\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca id\x3d"mainline-watch"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e\x3cspan class\x3d"j_watch_tip"\x3e\u5173\u6ce8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-remind" class\x3d"remind-toggle" module\x3d"mainline" targetId\x3d""\x3e\x3ci class\x3d"icon-bell"\x3e\x3c/i\x3e\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"mainline-copy" data-id\x3d"new" data-module\x3d"mainlineCopy" \x3e\x3ci class\x3d"icon-stack-2"\x3e\x3c/i\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"detail-close-li"\x3e\x3ca id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"icon-reply-li hide js_entiyDetail_reply"\x3e\x3ca title\x3d"\u8fd4\u56de" id\x3d"" class\x3d""\x3e\x3ci class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-container" class\x3d"detail-content mainline-container j_detailContentScr scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"hide"\x3e\x3cdiv class\x3d"detail-summary"\x3e\x3cdiv class\x3d"summary-avatar j_goal-icon" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"creator-icon-div"\x3e\x3ca\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"summary-title"\x3e\x3ctextarea id\x3d"mainline-name" class\x3d"textinput acl-disabled smart-title" name\x3d"mainline.name" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898..." v-maxlength\x3d"100"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block"\x3e\x3cdiv class\x3d"detail-infos"\x3e\x3cdl class\x3d"info-item clearfix acl-w-container"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-man"\x3e\x3c/i\x3e\u8d1f\u8d23\u4eba:\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"mainline-manager" undeletable\x3d"true" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-manager" type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba"\x3e\x3ci title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl class\x3d"info-item clearfix"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-flag"\x3e\x3c/i\x3e\u5230\u671f\u65e5:\x3c/dt\x3e\x3cdd class\x3d"date-ending"\x3e\x3cinput id\x3d"endTime" name\x3d"endTime" type\x3d"text" class\x3d"datepicker underline acl-disabled" dateGroup\x3d"true"\x3e\x3c/input\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl class\x3d"info-item clearfix acl-w-container"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-clock"\x3e\x3c/i\x3e\u8fdb\x26nbsp;\x26nbsp;\u5ea6:\x3c/dt\x3e\x3cdd\x3e\x3cspan id\x3d"finished-percent" class\x3d"c-warning"\x3e\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block detail-desc-wrap"\x3e\x3cspan class\x3d"graph graph-16-word"\x3e\x3c/span\x3e\x3cdiv class\x3d"desc-input"\x3e\x3ctextarea id\x3d"mainline-content" class\x3d"content-editor textinput acl-disabled" placeholder\x3d"\u8bf7\u8f93\u5165\u5185\u5bb9..." maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands"\x3e\x3cdiv class\x3d"control-group hide acl-w-container" id\x3d"mainline-participants" icon\x3d"#i-participants"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group tags hide" id\x3d"mainline-ctags" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group tags hide" id\x3d"mainline-tags" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group mainlines entity-relevance hide" id\x3d"mainline-mainlines" icon\x3d"#icon-mainlines-a"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"mainline-beginDate" icon\x3d"#i-beginDate"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-path"\x3e\x3c/i\x3e\u8d77\u59cb\u65e5\u671f:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"startTime" name\x3d"startTime" type\x3d"text" class\x3d"datepicker form-control textinput acl-disabled" dateGroup\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"mainline-share" icon\x3d"#icon-share-a"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"mainline-attachment" icon\x3d"#icon-paperclip-a"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"mainline-remind" icon\x3d"#icon-remind-a"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles"\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-participants" for\x3d"#mainline-participants"\x3e\x3ci class\x3d"graph graph-16 graph-16-mans"\x3e\x3c/i\x3e\u6dfb\u52a0\u53c2\u4e0e\u4eba\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-ctag" for\x3d"#mainline-ctags"\x3e\x3ci class\x3d"graph graph-16 graph-16-commonlabel"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-tag" for\x3d"#mainline-tags"\x3e\x3ci class\x3d"graph graph-16 graph-16-label"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-mainlines-a" for\x3d"#mainline-mainlines"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-share-a" for\x3d"#mainline-share"\x3e\x3ci class\x3d"graph graph-16 graph-16-share"\x3e\x3c/i\x3e\u5171\u4eab\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-beginDate" for\x3d"#mainline-beginDate"\x3e\x3ci class\x3d"graph graph-16 graph-16-path"\x3e\x3c/i\x3e\u8d77\u59cb\u65e5\u671f\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-paperclip-a" for\x3d"#mainline-attachment"\x3e\x3ci class\x3d"graph graph-16 graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-remind-a" for\x3d"#mainline-remind"\x3e\x3ci class\x3d"graph graph-16 graph-16-remind"\x3e\x3c/i\x3e\u63d0\u9192\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlinelist":'\x3cdiv class\x3d"j_mainscroll mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"j_mineType dropdown dropdown-menu-toggle hide"\x3e\x3ca id\x3d"mainlines-targetType" class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli data-entity\x3d"mine" class\x3d"active"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3cli data-entity\x3d"mineManager" title\x3d"\u8d1f\u8d23\u7684\u9879\u76ee"\x3e\x3ca\x3e\u8d1f\u8d23\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli data-entity\x3d"mineParticipants" title\x3d"\u53c2\u4e0e\u7684\u9879\u76ee"\x3e\x3ca\x3e\u53c2\u4e0e\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"mainlines-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"default"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"last_comment_time"\x3e\u6309\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"last_update_time"\x3e\u6309\u9879\u76ee\u66f4\u65b0\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time"\x3e\u6309\u9879\u76ee\u521b\u5efa\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"end_time"\x3e\u6309\u9879\u76ee\u7ed3\u675f\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"manager"\x3e\u6309\u8d1f\u8d23\u4eba\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv id\x3d"mainlines-filter" class\x3d"btn-group dropdown"  data-toggle\x3d"#mainline-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3cdiv id\x3d"mainline-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput  id\x3d"mainline-keywords" class\x3d"form-control" type\x3d"text" name\x3d"mainlinesearch" placeholder\x3d"\u9879\u76ee\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0"\x3e\x3ca class\x3d"j_goal-item-add btn btn-success btn-sm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd"\x3e\x3cdiv id\x3d"mainlinelist-container" class\x3d"main-content-wrapper"\x3e\x3cdiv class\x3d"main-content"\x3e\x3cdiv id\x3d"guide-div" class\x3d"nodata-holder mt-50 hide"\x3e\x3cdiv class\x3d"hide j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u9879\u76ee\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u56f4\u7ed5\u7740\u4e2a\u4eba\u6216\u56e2\u961f\u7684\u5468\u671f\u9879\u76ee\uff0c\u4ee5\u9879\u76ee\u534f\u4f5c\u7684\u65b9\u5f0f\u53ca\u65f6\u505a\u597d\u5de5\u4f5c\u8ba1\u5212\u3001\x3cbr/\x3e\u5e76\u6c47\u603b\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u8fdb\u5c55\uff0c\u63a8\u8fdb\u9879\u76ee\u7684\u6267\u884c\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_watched"\x3e\x3ci class\x3d"ico collect"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u5173\u6ce8\u7684\u9879\u76ee\u54e6\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u901a\u8fc7\u5173\u6ce8\u7684\u9879\u76ee\uff0c\u8ba9\u4f60\u81ea\u7531\u638c\u63e1\uff0c\u7b2c\u4e00\u65f6\u95f4\u63a8\u8fdb\u91cd\u8981\u4e8b\u60c5\uff01\x3cbr/\x3e\u5728\u9879\u76ee\u5217\u8868\u6216\u9879\u76ee\u8be6\u60c5\u4e2d\u5c31\u53ef\u4ee5\u5173\u6ce8\u9879\u76ee\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_shareToMe"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65e0\u5171\u4eab\u7ed9\u60a8\u7684\u9879\u76ee\u54e6\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_mineCreate"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u9879\u76ee\u54e6\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_finished"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u60a8\u8fd8\u6ca1\u6709\u5173\u95ed\u8fc7\u9879\u76ee\u54e6\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_all"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u9879\u76ee\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u56f4\u7ed5\u7740\u4e2a\u4eba\u6216\u56e2\u961f\u7684\u5468\u671f\u9879\u76ee\uff0c\u4ee5\u9879\u76ee\u534f\u4f5c\u7684\u65b9\u5f0f\u53ca\u65f6\u505a\u597d\u5de5\u4f5c\u8ba1\u5212\u3001\x3cbr/\x3e\u5e76\u6c47\u603b\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u8fdb\u5c55\uff0c\u63a8\u8fdb\u9879\u76ee\u7684\u6267\u884c\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_goalList_m goal-list-wrap"\x3e\x3cdiv id\x3d"mainline-list" class\x3d"goal-list goal-list-main"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more j_mainlinelist_more hide"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv id\x3d"mainlinelist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u76f8\u5173\u9879\u76ee\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainlineClone" class\x3d"hide"\x3e\x3cdl class\x3d"j_goalitem goal-item router"\x3e\x3cdt\x3e\x3cimg class\x3d"icon-img" src\x3d"/static/img/icon/goal/1.png"\x3e\x3cdiv class\x3d"percent j_percent"\x3e60%\x3c/div\x3e\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"caption"\x3e\x3cdiv class\x3d"cell"\x3e\x3cp class\x3d"title"\x3e\x3cspan class\x3d"j_goalname" title\x3d"\u6807\u9898" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"lead"\x3e\x3cspan\x3e\u8d1f\u8d23\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_mainlinemanager"\x3e\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/dd\x3e\x3cem class\x3d"arrow" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3c/em\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\x3ci class\x3d"icon-star-empty hide"\x3e\x3c/i\x3e\x3c/dl\x3e\x3c/div\x3e',
"mainline.mainlinenew":'\x3cdiv id\x3d"create-new-goal" class\x3d"detail-content mainlinebox modal modal-grey fade entity-info" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog module-detail-view"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ch5\x3e\u6dfb\u52a0\u65b0\u9879\u76ee\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca id\x3d"save-mainline" data-toggle\x3d"tooltip" data-placement\x3d"top" data-original-title\x3d"" title\x3d""\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"close-botton" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"create-goal-div" class\x3d"creategoal modal-body module-detail-view scrollwrapper nopd"\x3e\x3cdiv class\x3d"detail-summary"\x3e\x3cdiv class\x3d"summary-avatar j_goal-icon"\x3e\x3ca\x3e\x3cimg id\x3d\'picturezone\' src\x3d"/static/img/icon/goal/1.png"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"summary-title"\x3e\x3ctextarea id\x3d"name" class\x3d"j_title acl-disabled" placeholder\x3d"\u6dfb\u52a0\u9879\u76ee\u540d\u79f0" v-maxlength\x3d"100"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block"\x3e\x3cdiv class\x3d"detail-infos"\x3e\x3cdl class\x3d"info-item clearfix"\x3e\x3cdt\x3e\x3cspan class\x3d""\x3e\x3ci class\x3d"graph graph-16-man"\x3e\x3c/i\x3e\u8d1f\u8d23\u4eba\uff1a\x3c/span\x3e\x3c/dt\x3e\x3cdd style\x3d"margin-right:80px"\x3e\x3cdiv id\x3d"mainline-new-manager" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"mainline-typeahead-manager" type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba"\x3e\x3ci title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block detail-desc-wrap"\x3e\x3cspan class\x3d"graph graph-16-word"\x3e\x3c/span\x3e\x3cdiv class\x3d"desc-input"\x3e\x3ctextarea id\x3d"description" class\x3d"acl-disabled" placeholder\x3d"\u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u9879\u76ee\u8be6\u60c5" maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands"\x3e\x3cdiv id\x3d"mainline-new-participants" icon\x3d"#icon-tags-a" class\x3d"control-group acl-w-container "\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-duedate" class\x3d"control-group mainline-duedate"\x3e\x3cdiv class\x3d"control-label" title\x3d"\u8bbe\u7f6e\u4e3b\u7ebf\u7684\u5230\u671f\u65e5"\x3e\x3ci class\x3d"graph graph-16-path"\x3e\x3c/i\x3e\u8d77\u6b62\u65e5\u671f:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"startTime" name\x3d"startTime" type\x3d"text" class\x3d"form-control datepicker textinput acl-disabled"\x3e\x3c/input\x3e - \x3cinput id\x3d"endTime" name\x3d"endTime" type\x3d"text" class\x3d"form-control datepicker textinput acl-disabled"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-tags"  class\x3d"control-group tags"  icon\x3d"#icon-tags-a"\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-ctags"  class\x3d"control-group tags"  icon\x3d"#icon-ctags-a"\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-mainlines"  class\x3d"control-group entity-relevance mainlines hide"  icon\x3d"#icon-mainlines-a"\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-agenda"  class\x3d"control-group entity-relevance agendas hide"  icon\x3d"#icon-agenda-a"\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-shares"  class\x3d"control-group share"  icon\x3d"#icon-share-a"\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-new-attachment" class\x3d"control-group attachments hide"  icon\x3d"#icon-paperclip-a"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles"\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-mainline-a" for\x3d"#mainline-new-mainlines"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-agenda-a" for\x3d"#mainline-new-agenda"\x3e\x3ci class\x3d"graph graph-16 graph-16-calendar"\x3e\x3c/i\x3e\u5173\u8054\u65e5\u7a0b\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"icon-paperclip-a" for\x3d"#mainline-new-attachment"\x3e\x3ci class\x3d"graph graph-16 graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlinelinklist":'\x3cdiv class\x3d"table-tray goal-view-content j_goalSlideObj sidebar-in"\x3e\x3cdiv class\x3d"tray-cell goal-sidebar"\x3e\x3cdiv class\x3d"goal-sidebar-content"\x3e\x3cdiv class\x3d"hd"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cspan id\x3d"projectClass"\x3e\u5206\u7c7b\x3c/span\x3e\x3cdiv class\x3d"j_mineType e-selectui dropdown dropdown-menu-toggle hide-im gettext"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\u6211\u7684\u9879\u76ee\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli data-type \x3d "mine" class\x3d"active"\x3e\x3ca\x3e\u6211\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli id \x3d "mineManager" data-type \x3d "mineManager"\x3e\x3ca\x3e\u8d1f\u8d23\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli id \x3d "mineParticipants" data-type \x3d "mineParticipants"\x3e\x3ca\x3e\u53c2\u4e0e\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mini-mainline-list" class\x3d"scrollwrapper"\x3e\x3cdiv id\x3d"j_mini-goal-list" class\x3d"goal-list goal-list-mini"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell goal-content-wrapper j_center"\x3e\x3cdiv class\x3d"goal-header clearfix"\x3e\x3cdiv class\x3d"goal-slider graph j_goalSlideCtrl on" data-open\x3d"true"\x3e\x3c/div\x3e\x3cdl class\x3d"head-info clearfix"\x3e\x3cdt class\x3d"j_mainline_head_dt cs-p"\x3e\x3cimg src\x3d"images/demo-v3/5.png" /\x3e\x3cdiv class\x3d"percent j_mainline_head_percent"\x3e0%\x3c/div\x3e\x3c/dt\x3e\x3cdd class\x3d"ellipsis maxw-400"\x3e\x3cspan class\x3d"j_mainline_head_title j_entityslider-toggle cs-p" data-module\x3d"mainline" data-id\x3d"" data-tolink\x3d"true"\x3e\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cul class\x3d"head-nav j_head-nav j_e-nav-tab"\x3e\x3cli class\x3d"j_mainline_link router" data-type\x3d"mainlineblog"\x3e\x3ca\x3e\u6700\u65b0\u52a8\u6001\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router current" data-type\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router" data-type\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router" data-type\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router" data-type\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router" data-type\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_update router hide"\x3e\x3ca\x3e\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_link router " data-type\x3d"detail"\x3e\x3ca\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline_view router j_entityslider-toggle" data-module\x3d"mainline" data-id\x3d""  data-tolink\x3d"true"\x3e\x3ca\x3e\u9879\u76ee\u4fe1\u606f\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"goals-state-group scrollwrapper j_stategroupWrapper"\x3e\x3cdiv id\x3d"other-blogs-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainlinelink-statistics-container" class\x3d"mainlinelink-statistics-container scrollwrapper hide"\x3e\x3cdiv class\x3d"js_taskreportScr taskreport-view  p-20"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainlinelink-list-container" class\x3d"mainlinelink-list-container scrollwrapper"\x3e\x3cdiv class\x3d"toolkit-bar"\x3e\x3cul class\x3d"j_subtab-toolkit toolkit-list"\x3e\x3cli id\x3d"create-stage" data-prepend\x3d"true" class\x3d"fast-create fast-create-task toolkit-item dropdown-create create-stage fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u4efb\u52a1\u5206\u7ec4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"create-document" data-prepend\x3d"true" class\x3d"fast-create fast-create-document toolkit-item dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"create-document-html" data-prepend\x3d"true" class\x3d"fast-create fast-create-document toolkit-item dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"relevance-document" data-prepend\x3d"true" module\x3d"document" class\x3d"fast-create toolkit-item fast-create-document dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5173\u8054\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"create-customer" data-prepend\x3d"true" class\x3d"fast-create fast-create-customer toolkit-item dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"relevance-customer" data-prepend\x3d"true" module\x3d"customer" class\x3d"fast-create toolkit-item fast-create-customer dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5173\u8054\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"create-workflow" data-prepend\x3d"true" class\x3d"fast-create fast-create-workflow toolkit-item dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"relevance-workflow" data-prepend\x3d"true" module\x3d"workflow" class\x3d"fast-create toolkit-item fast-create-workflow dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5173\u8054\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"create-calendar" data-prepend\x3d"true" class\x3d"fast-create fast-create-calendar toolkit-item dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"relevance-calendar" data-prepend\x3d"true" module\x3d"agenda" class\x3d"fast-create toolkit-item fast-create-calendar dropdown-create fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5173\u8054\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown" id\x3d"task-filter" data-toggle\x3d"#task-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter border-dropdown dropdown-div" id\x3d"task-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" \x3e\x3cdiv id\x3d"document-filter" class\x3d"btn-group dropdown" data-toggle\x3d"#document-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"document-filter-dropdown" class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"mainline-order" class\x3d"j_toolkit-item toolkit-item hide" data-entity\x3d"default" data-direction\x3d"DESC" data-module\x3d"task"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"task-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul id\x3d"order-li" class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"active"\x3e\x3ca data-entity\x3d"default" class\x3d"orderType" data-direction\x3d"DESC"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-entity\x3d"last_comment_time" class\x3d"orderType" data-direction\x3d"DESC"\x3e\u6309\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"last_update_time" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u66f4\u65b0\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65b0)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"ASC"\x3e\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65e9)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"due_date" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65b0)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"due_date" data-direction\x3d"ASC"\x3e\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65e9)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"manager" data-direction\x3d"ASC"\x3e\u6309\u8d1f\u8d23\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"priority" data-direction\x3d"DESC"\x3e\u6309\u7d27\u6025\u7a0b\u5ea6\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"j_search-task toolkit-item search"\x3e\x3cinput id\x3d"mainlinelink-keywords" class\x3d"form-control" type\x3d"text" name\x3d"searchsearch"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item j_if-time if-finished fr task-tab-li"\x3e\x3cdiv class\x3d"e-selectui dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\x3cspan class\x3d"j_view_type" data-type\x3d"normal"\x3e\u666e\u901a\u89c6\u56fe\x3c/span\x3e\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_ul_viewmenu" style\x3d"display: none;"\x3e\x3cli data-type\x3d"normal" class\x3d"active j_normal"\x3e\x3ca\x3e\u666e\u901a\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"time" class\x3d"j_time"\x3e\x3ca\x3e\u65e5\u671f\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"panel" class\x3d"j_panel"\x3e\x3ca\x3e\u770b\u677f\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr agenda-tab-li hide"\x3e\x3cdiv class\x3d"e-selectui dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\x3cspan class\x3d"j_view_type" data-type\x3d"calendar"\x3e\u65e5\u5386\u89c6\u56fe\x3c/span\x3e\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_ul_viewmenu" style\x3d"display: none;"\x3e\x3cli data-type\x3d"calendar" class\x3d"active j_calendar"\x3e\x3ca\x3e\u65e5\u5386\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"normal" class\x3d"j_normal"\x3e\x3ca\x3e\u5217\u8868\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item j_if-finished if-finished fr task-tab-li"\x3e\x3ca class\x3d"btn btn-sm btn-link"\x3e\x3ci class\x3d"icon-checkbox-unchecked icoinline"\x3e\x3c/i\x3e\u5305\u542b\u5df2\u5b8c\u6210\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item js_iffinished_workflow if-finished fr task-tab-li hide"\x3e\x3ca class\x3d"btn btn-sm btn-link"\x3e\x3ci class\x3d"icon-checkbox-unchecked icoinline"\x3e\x3c/i\x3e\u5305\u542b\u5df2\u5b8c\u6210\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"mainlinelink-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"j_search_result" class\x3d"ph-20 pt-20"\x3e\x3c/div\x3e\x3cdiv id\x3d"calendar-panel" class\x3d"agenda-calendar hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"j_search-time-view" class\x3d"hide"\x3e\x3cdiv class\x3d"hide"\x3e\x3cul\x3e\x3cli class\x3d"notask j_notask j_time_task hide"\x3e\u8fd8\u6ca1\u6709\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3cli class\x3d"notask j_notask_unclick" style\x3d"cursor:default"\x3e\u6ca1\u6709\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"group-view e-list-group delay"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5ef6\u671f\x3ci id\x3d"count-delay"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list center-list task-list" group\x3d"delay"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"group-view e-list-group today"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr create-task-time"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u4eca\u5929\x3ci id\x3d"count-today"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list center-list task-list" group\x3d"today"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"group-view e-list-group tomorrow"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr create-task-time"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u660e\u5929\x3ci id\x3d"count-tomorrow"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list center-list task-list" group\x3d"tomorrow"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"group-view e-list-group future"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr create-task-time create-task-time"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5373\u5c06\x3ci id\x3d"count-future"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list center-list task-list" group\x3d"future"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"group-view e-list-group memo"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr create-task-time"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u65e0\u5230\u671f\u65e5\x3ci id\x3d"count-memo"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list center-list task-list" group\x3d"memo"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_panel_view" class\x3d"hide goal-taskpanel-view"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result" id\x3d"j_no_result"\x3e\u65e0\u76f8\u5173\u4e8b\u9879\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"j_search_result_no" class\x3d"ph-20 pt-20"\x3e\x3cdiv id\x3d"goal-no-stage" class\x3d"j_goal-category goal-category create"\x3e\x3cdiv class\x3d"j_goal-category-head goal-category-head" style\x3d"cursor: auto;color:#999;"\x3e\x3cspan class\x3d"j_stage_name"\x3e\u672a\u5206\u7ec4\x3c/span\x3e\x3cspan class\x3d"j_stage_count"\x3e\x3c/span\x3e\x3ca title\x3d"\u6298\u53e0" data-status\x3d"on" class\x3d"j_stage_switch stage-switch ml-3"\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_create-task btn-newtask"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list task-list"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u76f8\u5173\u4e8b\u9879\u6570\u636e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cul\x3e\x3cli class\x3d"notask j_notask j_notask_clone hide"\x3e\u8fd8\u6ca1\u6709\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"create-stage-container"\x3e\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"guide-div text-left goal-guide hide"\x3e\x3cp\x3e\u5f53\u524d\u9879\u76ee\u4e0b\u8fd8\u6ca1\u6709\u76f8\u5173\u4e8b\u9879\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u201c\u65b0\u5efa\u4efb\u52a1\u5206\u7ec4\u201d\u521b\u5efa\u5206\u7ec4\uff0c\u7ba1\u7406\u60a8\u7684\u4efb\u52a1\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u70b9\u51fb\u9ed8\u8ba4\u5206\u7ec4\u53f3\u4fa7\u7684\u201c+\u201d\u76f4\u63a5\u521b\u5efa\u4efb\u52a1\u3002\x3c/p\x3e\x3cp\x3e\x3ca class\x3d"btn create-stage" data-prepend\x3d"true"\x3e\u65b0\u5efa\u5206\u7ec4\x3c/a\x3e\x3ca id\x3d"guide-task-create" class\x3d"btn"\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/p\x3e\x3cp\x3e\u63d0\u793a\uff1a\u5206\u7ec4\u548c\u4efb\u52a1\u90fd\u53ef\u4ee5\u62d6\u62fd\u54e6\uff0c\u901a\u8fc7\u62d6\u62fd\u5373\u53ef\u5b9e\u73b0\u5206\u7ec4\u7684\u6392\u5e8f\u548c\u4efb\u52a1\u62d6\u653e\u5206\u7ec4\u3002\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"goals-state-group"\x3e\x3cdiv id\x3d"no-update" class\x3d"text-left goal-guide hide"\x3e\u65e0\u76f8\u5173\u52a8\u6001\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"update-more" class\x3d"common-more hide"\x3e\x3ca\x3e\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainline-view" class\x3d"hide "\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdl id\x3d"mini-goal-item-clone" class\x3d"j_goal-item goal-item"\x3e\x3cdt\x3e\x3cimg src\x3d"/static/img/icon/goal/1.png"\x3e\x3cdiv class\x3d"percent j_percent"\x3e60%\x3c/div\x3e\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"caption"\x3e\x3cdiv class\x3d"cell"\x3e\x3cspan class\x3d"j_mainline-name" title\x3d"\u6807\u9898" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\u6807\u9898\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdiv id\x3d"stage-clone" class\x3d"j_goal-category goal-category create"\x3e\x3cdiv class\x3d"j_goal-category-head goal-category-head" title\x3d"\u6309\u4f4f\u9f20\u6807\u62d6\u52a8\u5206\u7ec4\u6392\u5e8f"\x3e\x3cinput type\x3d"text" class\x3d"form-control stage-change-name textinput" maxLength\x3d"20" placeholder\x3d"\u5206\u7ec4\u540d\u5b57(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)"\x3e\x3cspan class\x3d"j_stage_name"\x3e\x3c/span\x3e\x3cspan class\x3d"j_stage_count"\x3e\x3c/span\x3e\x3ca title\x3d"\u6298\u53e0" data-status\x3d"on" class\x3d"j_stage_switch stage-switch ml-3"\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_create-task btn-newtask"\x3e\x3ci class\x3d"icon-plus" title\x3d"\u5b89\u6392\u4efb\u52a1"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"j_goal-category-option goal-category-option dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-reorder"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"relevance-task" module\x3d"task"\x3e\x3ca\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"edit-stage"\x3e\x3ca\x3e\u7f16\u8f91\u5206\u7ec4\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"delete-stage"\x3e\x3ca\x3e\u5220\u9664\u5206\u7ec4\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list e-list task-list"\x3e\x3cli class\x3d"notask j_notask hide"\x3e\u8fd8\u6ca1\u6709\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cul class\x3d"j_e_list_clone e-list filterSlip_js j_e_list"\x3e\x3c/ul\x3e\x3cli id\x3d"domain-clone" class\x3d"task editable" data-module\x3d""\x3e\x3cspan class\x3d"sn-link"\x3e\x3c/span\x3e\x3cdiv class\x3d"j_title j_entityslider-toggle title ellipsis hide"\x3e\x3cdiv class\x3d"text j_finish_line"\x3e\x3c/div\x3e\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_titleinput title"\x3e\x3cinput type\x3d"text" class\x3d"input j_input ellipsis"\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish hide"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cdiv id\x3d"goal-state-container-clone" class\x3d"goal-state-item"\x3e\x3cdiv class\x3d"j_update-day update-day fl"\x3e11-05\x3c/div\x3e\x3cdiv class\x3d"j_goal-events-group goal-events-group"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"goal-events-item-clone" class\x3d"goal-events-item"\x3e\x3cspan class\x3d"j_update-time update-time"\x3e\x3c/span\x3e\x3cdiv class\x3d"avatar fl"\x3e\x3cimg src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar-r"\x3e\x3cdiv class\x3d"update-title"\x3e\x3ca class\x3d"name"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"update-detail"\x3e\x3ca id\x3d"targetName" class\x3d"j_entityslider-toggle"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlineavatar":'\x3cdiv id\x3d"mainline-avatar" class\x3d"modal fade form-horizontal entity-info csicon-box"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv id\x3d"default-imgs" class\x3d""\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u9009\u62e9\u56fe\u7247\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"p-20"\x3e\x3cp class\x3d"h5"\x3e\u5df2\u9009\u56fe\u6807\x3c/p\x3e\x3cdiv class\x3d"csicon-box-hd mv-20 clearfix"\x3e\x3cdiv class\x3d"csicon-thumb pull-left"\x3e\x3cimg id\x3d"seleted-icon" src\x3d"/static/img/icon/goal/1.png"\x3e\x3c/div\x3e\x3cdiv id\x3d"local-icon-add" class\x3d"csicon-add pointer pull-left"\x3e\x3ci class\x3d"icon-plus text-center"\x3e\x3c/i\x3e\u4e0a\u4f20\u672c\u5730\u56fe\u7247\x3c/div\x3e\x3c/div\x3e\x3cp class\x3d"h5"\x3e\u5907\u9009\u56fe\u6807\x3c/p\x3e\x3cdiv class\x3d"csicon-box-bd clearfix"\x3e\x3cul class\x3d"j_goal-icon-lib csicon-thumb csicon-lib"\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/1.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/2.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/3.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/4.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/5.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/6.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/7.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/8.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/9.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/10.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/11.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/12.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/13.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/14.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/15.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/16.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/17.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/18.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/19.png"\x3e\x3c/li\x3e\x3cli\x3e\x3cimg src\x3d"/static/img/icon/goal/20.png"\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cdiv class\x3d"madal-foot-btns text-center"\x3e\x3ca id\x3d"save-choose-img" class\x3d"btn btn-sm btn-success w-80"\x3e\u786e\u5b9a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"local-imgs" class\x3d"hide"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u4e0a\u4f20\u56fe\u7247\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body goal-photo"\x3e\x3cinput type\x3d"hidden" id\x3d"avatar" name\x3d"imageArea.id" /\x3e\x3cdiv class\x3d"avatar-wrapper"\x3e\x3cdiv class\x3d"goal-img-ori"\x3e\x3cdiv id\x3d"avatar-img-container"\x3e\x3c/div\x3e\x3cimg id\x3d"avatar-img" class\x3d"avatar-img hide" title\x3d"\u70b9\u51fb\u56fe\u7247\uff0c\u62d6\u52a8\u9f20\u6807\uff0c\u5bf9\u7167\u7247\u8fdb\u884c\u526a\u88c1,\u70b9\u51fb\u88c1\u526a\u6309\u94ae\u5b8c\u6210\u88c1\u526a"\x3e\x3cdiv id\x3d"avatar-note" class\x3d"avatar-img avatar-note"\x3e\x3cp\x3e\u8bf7\u6309\u4e0b\u9762\u7684\u6b65\u9aa4\u8bbe\u7f6e\uff1a\x3c/p\x3e\x3cp\x3e\u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u4e0a\u4f20\u56fe\u7247\uff0c\u4ece\u672c\u5730\u9009\u62e9\u7167\u7247\u4e0a\u4f20\x3c/p\x3e\x3cp\x3e\u7b2c\u4e8c\u6b65\uff1a\u70b9\u51fb\u56fe\u7247\uff0c\u62d6\u52a8\u9f20\u6807\uff0c\u5bf9\u7167\u7247\u8fdb\u884c\u526a\u88c1,\u70b9\u51fb\u88c1\u526a\u6309\u94ae\u5b8c\u6210\u88c1\u526a\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"avatar-preview-wrapper hide pull-right"\x3e\x3cp\x3e\u5934\u50cf\u9884\u89c8(120*120):\x3c/p\x3e\x3cdiv class\x3d"avatar-preview"\x3e\x3cimg class\x3d"avatar-img-preview" alt\x3d"\u5934\u50cf\u9884\u89c8" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-groups"\x3e\x3ca id\x3d"avatar-upload" class\x3d"avatar-upload btn btn-sm btn-primary" title\x3d"\u4e0a\u4f20\u5934\u50cf"\x3e \x3ci class\x3d"icon-upload-alt"\x3e\x3c/i\x3e \u4e0a\u4f20\u56fe\u7247\x3c/a\x3e\x3ca id\x3d"avatar-cut" class\x3d"btn btn-sm btn-info hide" title\x3d"\u88c1\u526a"\x3e\x3ci class\x3d"icon-cut"\x3e\x3c/i\x3e\u88c1\u526a\x3c/a\x3e\x3cspan id\x3d"cut-title" class\x3d"cut-tip hide"\x3e\u70b9\u51fb\u56fe\u7247\uff0c\u62d6\u52a8\u9f20\u6807\uff0c\u5bf9\u7167\u7247\u8fdb\u884c\u526a\u88c1,\u70b9\u51fb\u88c1\u526a\u6309\u94ae\u5b8c\u6210\u88c1\u526a\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cdiv class\x3d"madal-foot-btns text-center"\x3e\x3ca id\x3d"back-to-default" class\x3d"btn btn-sm btn-success"\x3e\u8fd4\u56de\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlinetaskslist":'\x3cdiv class\x3d"module-detail-view mainlinetaskslist"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\u9879\u76ee\u4efb\u52a1\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-invite popbox-invite p-20" id\x3d"user-invite"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\u4efb\u52a1\u540d\u79f0\uff1a\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"taskName" placeholder\x3d"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cbutton id\x3d"search" type\x3d"submit" class\x3d"btn btn-sm btn-success w-60"\x3e\u641c\u7d22\x3c/button\x3e\x3c/li\x3e\x3cli id\x3d"finishAcountDiv" class\x3d"finishacountdiv toolkit-item fr num nomg" style\x3d"display:none;"\x3e\u5df2\u5b8c\u6210\u4efb\u52a1\u6570\x3cspan id\x3d"totalAmount"  class\x3d"totalamount"\x3e24\x3c/span\x3e\u4e2a\uff0c\u5176\u4e2d\u6ede\u540e\u5b8c\u6210\x3cspan id\x3d"delayAmount" class\x3d"delayamount"\x3e10\x3c/span\x3e\u4e2a\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"js_customerTable_wrapper" class\x3d"scrollwrapper dataTables_wrapper no-footer ph-20"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item" style\x3d"width:40%"\x3e\x3cdiv class\x3d"ellipsis name"\x3e\u4efb\u52a1\u540d\u79f0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo" style\x3d"width:20%"\x3e\u8d1f\u8d23\u4eba\x3c/div\x3e\x3cdiv class\x3d"item opt" style\x3d"width:20%"\x3e\u5230\u671f\u65f6\u95f4 \x3c/div\x3e\x3cdiv id\x3d"title_finish_time" class\x3d"item time" style\x3d"width:20%"\x3e\u5b8c\u6210\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"scrollwrapper j_trashbinListScr trashbinlist"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more j_empty hide"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data" class\x3d"table-more mt-0 hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinlogClone" class\x3d"hide trashbinlogClone"\x3e\x3cli\x3e\x3cdiv class\x3d"item" style\x3d"width:40%;"\x3e\x3ca class\x3d"ellipsis task_name"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"item task_manager" style\x3d"width:20%;"\x3e\u64cd\u4f5c\u8005\x3c/div\x3e\x3cdiv class\x3d"item due_date" style\x3d"width:20%;"\x3e\x3c/div\x3e\x3cdiv class\x3d"item finish_date" style\x3d"width:20%;color:red;"\x3e\u64cd\u4f5c\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlinelinkright":'\x3cdiv class\x3d"mainline-warp"\x3e\x3cdiv class\x3d"right-top text-center"\x3e\x3cdiv class\x3d"sys-tab"\x3e\x3ca class\x3d"active" data-type\x3d"mainlineinfo"\x3e\u9879\u76ee\u4fe1\u606f\x3c/a\x3e \x3ca data-type\x3d"feedback"\x3e\u9879\u76ee\u4e0b\u4e8b\u9879\u53cd\u9988\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainlinelink-info" \x3e\x3c/div\x3e\x3cdiv id\x3d"mainlinelink-feedback" class\x3d"hide"\x3e\x3c/div\x3e\x3c/div\x3e',"mainline.page":'\x3cdiv class\x3d"module-goal-view"\x3e\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv id\x3d"mainlines-type"  class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-goal"\x3e\x3c/i\x3e\u9879\u76ee\x3c/div\x3e\x3cul id\x3d"menu-group-sub" class\x3d"sub-nav"\x3e\x3cli class\x3d"filterType router mine " data-title\x3d"\u7684\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/mine" data-entity\x3d"mine"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u6211\u7684\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router watched"data-title\x3d"\u5173\u6ce8\u7684\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/watched" data-entity\x3d"watched"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5173\u6ce8\u7684\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router subordinates j_subordinates" data-title\x3d"\u4e0b\u5c5e\u7684\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/subordinates"data-entity\x3d"subordinates"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u4e0b\u5c5e\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router shareToMe" data-title\x3d"\u5171\u4eab\u7ed9\u6211\u7684\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/shareToMe"data-entity\x3d"shareToMe"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router mineCreate" data-title\x3d"\u521b\u5efa\u7684\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/mineCreate"data-entity\x3d"mineCreate"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u521b\u5efa\u7684\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router finished" data-title\x3d"\u5df2\u5173\u95ed\u7684\u9879\u76ee"  href\x3d"/mainlines/\x3c%\x3duserId%\x3e/finished"data-entity\x3d"finished"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5df2\u5173\u95ed\u7684\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router all" data-title\x3d"\u7684\u5168\u90e8\u9879\u76ee" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/all" data-entity\x3d"all"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_recylce" data-type\x3d"recylce" data-href\x3d"/mainlines/\x3c%\x3duserId%\x3e/recylce"\x3e\x3ca class\x3d"link-item router" href\x3d"/mainlines/\x3c%\x3duserId%\x3e/recylce"\x3e\x3ci class\x3d"item-icon icon-trash"\x3e\x3c/i\x3e\u56de\u6536\u7ad9\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv id\x3d"main" class\x3d"main"\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlineblog":'\x3cdiv class\x3d"goal-dynamic-container clearfix"\x3e\x3cdiv id\x3d"result" class\x3d"goals-state-result"\x3e\x3c/div\x3e\x3cdiv id\x3d"update-more" class\x3d"j_show-more common-more  hide" style\x3d"margin: -20px 39px 20px 111px;"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"suffix" class\x3d"timeline-end hide" title\x3d"\u6ca1\u6709\u66f4\u591a\u52a8\u6001"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-blog-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_no-result hide no-result"\x3e\u65e0\u6700\u65b0\u52a8\u6001\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"yyyyMMdd" class\x3d"goal-state-item hide"\x3e\x3cdiv class\x3d"j_blog-date update-day"\x3e\x3cspan class\x3d"j_month-day month"\x3e{yyyy/MM/dd}\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-group goal-events-group"\x3e\x3cdiv id\x3d"{blog-id}" class\x3d"j_one-blog goal-events-item"\x3e\x3cdiv class\x3d"avatar fl"\x3e\x3cimg src\x3d"{avatarPath}"\x3e\x3c/div\x3e\x3cdiv class\x3d"event-info"\x3e\x3cdiv class\x3d"event-box"\x3e\x3cspan class\x3d"event-time"\x3e{HH:mm}\x3c/span\x3e\x3cdiv class\x3d"event-title"\x3e\x3cp class\x3d"mb-5"\x3e\x3ca class\x3d"usercard-toggle" userid\x3d"{creator}"\x3e{who}\x3c/a\x3e {operation}\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"event-content"\x3e{ref-link}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.mainlinecopy":'\x3cdiv id\x3d"mainline-copy-model" class\x3d"j_item_copy modal fade mainline-copy-model" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog module-detail-view"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli class\x3d"j_save_copy"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" data-dismiss\x3d"modal" aria-hidden\x3d"true" class\x3d"detail-slide-close"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\u9879\u76ee\u590d\u5236\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv id\x3d"copy-loading" class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u590d\u5236\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"mainlinecopy-view-bg j_mainlinecopy_body hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"mainlinecopy-view"\x3e\x3cdiv class\x3d"detail-body p-20"\x3e\x3cdiv class\x3d"rename"\x3e\x3cinput class\x3d"j_title form-control" type\x3d"text" placeholder\x3d"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0" /\x3e\x3c/div\x3e\x3cdiv class\x3d"mainlinecopy-tab"\x3e\x3cspan class\x3d"notes" title\x3d"\u9879\u76ee\u4e3b\u8981\u5305\u62ec\u4efb\u52a1\uff0c\u5ba1\u6279\uff0c\u5ba2\u6237\u53ca\u6587\u6863\uff1b\u5176\u4e2d\u4efb\u52a1\u4f1a\u590d\u5236\u5373\u65b0\u589e\uff0c\u5176\u4f59\u53ea\u590d\u5236\u5173\u8054\u5173\u7cfb\u3002"  data-toggle\x3d"tooltip" data-placement\x3d"right"\x3e\u53ef\u8bbe\u7f6e\u662f\u5426\u590d\u5236\u9879\u76ee\u6216\u4efb\u52a1\u8d1f\u8d23\u4eba\u3001\u53c2\u4e0e\u4eba\u53ca\u5171\u4eab\u4eba\uff1a\u9ed8\u8ba4\u4e0d\u590d\u5236\x3c/span\x3e\x3cul class\x3d"mainlinecopy-ul"\x3e\x3cli class\x3d"mainlinecopy-title"\x3e\x3cdiv class\x3d"item principal"\x3e\x3cdiv class\x3d"principal-child"\x3e\u539f\u8d1f\u8d23\u4eba\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item participant"\x3e\u539f\u53c2\u4e0e\u4eba\x3c/div\x3e\x3cdiv class\x3d"item share"\x3e\u539f\u5171\u4eab\u4eba\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3cul class\x3d"mainlinecopy-details"\x3e\x3cli\x3e\x3cdiv class\x3d"item principal"\x3e\x3cdiv class\x3d"title" title\x3d"\u60a8\u53ef\u8bbe\u7f6e\u662f\u5426\u590d\u5236\u539f\u9879\u76ee\u7684\u8d23\u4efb\u4eba\uff0c\u53c2\u4e0e\u4eba\u53ca\u5171\u4eab\u4eba\uff1b\u9ed8\u8ba4\u4e0d\u590d\u5236\uff0c\u8d23\u4efb\u4eba\u4e3a\u81ea\u5df1\uff0c\u53c2\u4e0e\u4eba\u4e0e\u5171\u4eab\u4eba\u4e3a\u7a7a\u3002" data-toggle\x3d"tooltip" data-placement\x3d"right"\x3e\u9879\u76ee\x3c/div\x3e\x3clabel class\x3d"checkbox-div"\x3e\x3cinput class\x3d"j_mainline_manager" type\x3d"checkbox"/\x3e\x3c/label\x3e\x3c/div\x3e\x3clabel class\x3d"item participant"\x3e\x3cinput class\x3d"j_mainline_participant" type\x3d"checkbox"/\x3e\x3c/label\x3e\x3clabel class\x3d"item share"\x3e\x3cinput class\x3d"j_mainline_share" type\x3d"checkbox"/\x3e\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"item principal"\x3e\x3cdiv class\x3d"title" title\x3d"\u4efb\u52a1\u662f\u65b0\u589e\u7684\uff1a\u60a8\u53ef\u8bbe\u7f6e\u662f\u5426\u590d\u5236\u539f\u9879\u76ee\u7684\u8d23\u4efb\u4eba\uff0c\u53c2\u4e0e\u4eba\u53ca\u5171\u4eab\u4eba\uff1b\u9ed8\u8ba4\u8d23\u4efb\u4eba\u4e3a\u672c\u4eba\uff0c\u53c2\u4e0e\u4eba\u4e0e\u5171\u4eab\u4eba\u4e3a\u7a7a\u3002" data-toggle\x3d"tooltip" data-placement\x3d"right"\x3e\u4efb\u52a1\x3c/div\x3e\x3clabel class\x3d"checkbox-div"\x3e\x3cinput class\x3d"j_task_manager" type\x3d"checkbox"/\x3e\x3c/div\x3e\x3c/label\x3e\x3clabel class\x3d"item participant"\x3e\x3cinput class\x3d"j_task_participants" type\x3d"checkbox"/\x3e\x3c/label\x3e\x3clabel class\x3d"item share"\x3e\x3cinput class\x3d"j_task_shares" type\x3d"checkbox"/\x3e\x3c/label\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"mainlinecopy-btn-more"\x3e\x3ca class\x3d"btn btn-block btn-sm opc-7 j_more_copy"\x3e\x3cspan\x3e\u9ad8\u7ea7\x3c/span\x3e \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"mainlinecopy-ul-more j_moreitems_copy"\x3e\x3cli\x3e\x3cdiv class\x3d"item details"\x3e\x3cdiv class\x3d"title"\x3e\u6587\u6863\x3c/div\x3e\x3clabel class\x3d"checkbox-div"\x3e\x3cinput class\x3d"j_relevance_document" type\x3d"checkbox"/\x3e\u662f\u5426\u5173\u8054\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"item details"\x3e\x3cdiv class\x3d"title"\x3e\u5ba1\u6279\x3c/div\x3e\x3clabel class\x3d"checkbox-div"\x3e\x3cinput class\x3d"j_relevance_workflow" type\x3d"checkbox"/\x3e\u662f\u5426\u5173\u8054\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"item details"\x3e\x3cdiv class\x3d"title"\x3e\u5ba2\u6237\x3c/div\x3e\x3clabel class\x3d"checkbox-div"\x3e\x3cinput class\x3d"j_relevance_customer" type\x3d"checkbox"/\x3e\u662f\u5426\u5173\u8054\x3c/label\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"j_hidden_more_div hide"\x3e\x3ca class\x3d"btn btn-block btn-sm opc-7 js_detail-block-more j_hidden_more"\x3e\x3cspan\x3e\u9690\u85cf\x3c/span\x3e \x3ci class\x3d"icon-angle-up"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"mainline.calendar":'\x3cdiv class\x3d"calendar-loading loading-big loading-big-fixed hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"calendar" class\x3d""\x3e\x3c/div\x3e',"tag.tagright":'\x3cdiv class\x3d"tag-header"\x3e\x3cdiv class\x3d"tag-head-tit bold"\x3e\u6807\u7b7e \u201c\x3cspan id\x3d"tagname"\x3e\x3c/span\x3e\u201d \u4e0b\u7684\u4e8b\u9879\x3c/div\x3e\x3cul  id\x3d"search-group" class\x3d"tag-head-nav"\x3e\x3cli class\x3d"divider sn toolkit-item ml-15"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group task filterSlip_js " data-module\x3d"task" \x3e\u4efb\u52a1(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group document filterSlip_js" data-module\x3d"document"\x3e\u6587\u6863(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group customer filterSlip_js" data-module\x3d"customer"\x3e\u5ba2\u6237(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group saleChance filterSlip_js" data-module\x3d"saleChance"\x3e\u5546\u673a(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group production filterSlip_js" data-module\x3d"production"\x3e\u4ea7\u54c1(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group  workflow filterSlip_js" data-module\x3d"workflow"\x3e\u5ba1\u6279(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli\x3e\x3ca class\x3d"router j_search-group  mainline filterSlip_js" data-module\x3d"mainline"\x3e\u9879\u76ee(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd"\x3e\x3cdiv class\x3d"main-content-wrapper scrollwrapper j_center"\x3e\x3cdiv class\x3d"layout-hastips"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cul class\x3d"e-list hide"\x3e\x3c/ul\x3e\x3cdiv id\x3d"guide-div" class\x3d"nodata-holder mt-50 no-data hide"\x3e\x3cdiv class\x3d"hide no-data j_holder_all"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u6570\u636e\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u53ef\u7075\u6d3b\u7684\u8bbe\u5b9a\u4e2a\u4eba\u7ea7\u6216\u56e2\u961f\u7ea7\u7684\u6807\u7b7e\uff0c\u53ef\u5b8c\u5168\u4ee3\u66ff\u4e8b\u9879\u81ea\u7531\u5b9a\u4e49\u7684\u5c5e\u6027\uff0c\u5e76\u901a\u8fc7\u4e2a\u4eba\u6807\u7b7e\u5bf9\u4e8b\u9879\u6253\u4e0a\u4e13\u5c5e\u81ea\u5df1\u7684\u5206\u7c7b\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide center-more"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv id\x3d"mytask-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell tray-tips"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u8bf4\u660e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12 hide" id\x3d"person-label"\x3e\x3cp class\x3d"e-row"\x3e1.\u60a8\u7684\u6240\u6709\u4e2a\u4eba\u6807\u7b7e\uff0c\u5e76\u4e14\u9009\u4e2d\u6807\u7b7e\u540e\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u7f16\u8f91\u6216\u8005\u5220\u9664\u64cd\u4f5c\uff1b\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2.\u5207\u6362\u4e0d\u540c\u7684\u6807\u7b7e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0e\u8fd9\u4e2a\u6807\u7b7e\u76f8\u5173\u7684\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u53ca\u5ba2\u6237\uff1b \x3c/p\x3e\x3cp class\x3d"e-row"\x3e3.\u60a8\u53ef\u4ee5\u6279\u91cf\u5173\u6ce8\u6216\u6279\u91cf\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u5168\u9009\u6846\u201d\u3002\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12 hide" id\x3d"common-label"\x3e\x3cp class\x3d"e-row"\x3e1.\u6240\u6709\u516c\u5171\u6807\u7b7e\uff0c\u5e76\u4e14\u53ea\u6709\u7ba1\u7406\u5458\u9009\u4e2d\u6807\u7b7e\u540e\uff0c\u53ef\u4ee5\u8fdb\u884c\u7f16\u8f91\u6216\u8005\u5220\u9664\u64cd\u4f5c\uff1b\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2.\u5207\u6362\u4e0d\u540c\u7684\u6807\u7b7e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0e\u8fd9\u4e2a\u6807\u7b7e\u76f8\u5173\u7684\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u53ca\u5ba2\u6237\uff1b \x3c/p\x3e\x3cp class\x3d"e-row"\x3e3.\u60a8\u53ef\u4ee5\u6279\u91cf\u5173\u6ce8\u6216\u6279\u91cf\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u5168\u9009\u6846\u201d\u3002 \x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12 hide" id\x3d"all-label"\x3e\x3cp class\x3d"e-row"\x3e1.\u56e2\u961f\u7684\u516c\u5171\u6807\u7b7e\u548c\u6211\u7684\u6807\u7b7e\uff0c\u5176\u4e2d\u516c\u5171\u6807\u7b7e\u53ea\u6709\u7ba1\u7406\u5458\u624d\u6709\u7f16\u8f91\u548c\u5220\u9664\u6743\u9650\uff1b\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2.\u5207\u6362\u4e0d\u540c\u7684\u6807\u7b7e\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0e\u8fd9\u4e2a\u6807\u7b7e\u76f8\u5173\u7684\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u53ca\u5ba2\u6237\uff1b \x3c/p\x3e\x3cp class\x3d"e-row"\x3e3.\u60a8\u53ef\u4ee5\u6279\u91cf\u5173\u6ce8\u6216\u6279\u91cf\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u5168\u9009\u6846\u201d\u3002 \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"main-hd main-hd-fixed j_batchEl hide"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"search-watchs btn btn-sm"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e \x3ca class\x3d"search-share btn btn-sm" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"result-clone"\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"module"\x3e\x3c/span\x3e\x3cspan class\x3d"type"\x3e\x3c/span\x3e\x3cdiv class\x3d"title j_entityslider-toggle"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share  selector-toggle" data-entity\x3d"employee" data-multi\x3d"true" \x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"tag.taglist":'\x3cdiv class\x3d"j_taglist"\x3e\x3cdiv class\x3d"tag-title"\x3e\x3cdiv class\x3d"action"\x3e\x3ca class\x3d"icon-search j_show_search"\x3e\x3c/a\x3e\x3ca class\x3d"icon-plus"\x3e\x3c/a\x3e\x3c/div\x3e\x3ci class\x3d"graph graph-tag"\x3e\x3c/i\x3e\x3ch5\x3e\u6807\u7b7e\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"tag-search  hide"\x3e\x3cinput type\x3d"text"  placeholder\x3d"\u641c\u7d22\u6807\u7b7e"/\x3e\x3ci class\x3d"icon-search j_search"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"tag-add hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"+ \u65b0\u5efa\u6807\u7b7e"/\x3e\x3ci class\x3d"icon-save j_create"\x3e\x3c/i\x3e\x3c/div\x3e\x3cul class\x3d"tag-cate"\x3e\x3cli class\x3d"toolkit-item j_privacy active" type\x3d"privacy"\x3e\x3ca\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item j_common" type\x3d"common"\x3e\x3ca\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item j-all" type\x3d"all"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"tag-list-wrap scrollwrapper"\x3e\x3cul class\x3d"tag-list j_tags"\x3e\x3c/ul\x3e\x3cdiv class\x3d"tag-item no-result  nomg nobd hide"\x3e\u6ca1\u6709\u6807\u7b7e\x3c/div\x3e\x3cdiv class\x3d"list-more hide"\x3e\x3ca class\x3d"tran-bg"\x3e\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli class\x3d"hide" id\x3d"tag"\x3e\x3ca class\x3d"tag-item router" style\x3d"height:33px;"\x3e\x3cspan class\x3d"tag-text ellipsis"\x3e\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"tag-option"\x3e\x3ca class\x3d"j_edit"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_del"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e',
"tag.tagpage":'\x3caside class\x3d"aside j_taglist tag-side-col"\x3e\x3c/aside\x3e\x3cdiv class\x3d"main tag-main-col"\x3e\x3c/div\x3e',"task.taskpage":'\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-task"\x3e\x3c/i\x3e\u4efb\u52a1\x3c/div\x3e\x3cul class\x3d"sub-nav" id\x3d"tasknav"\x3e\x3cli class\x3d"j_mine" data-title\x3d"\u7684\u4efb\u52a1" data-type\x3d"mine"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/mine"\x3e\x3cspan class\x3d"j_type-name"\x3e\u6211\u7684\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_watched" data-title\x3d"\u5173\u6ce8\u7684\u4efb\u52a1" data-type\x3d"watched"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/watched"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5173\u6ce8\u7684\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_subordinates"  data-title\x3d"\u4e0b\u5c5e\u7684\u4efb\u52a1" data-type\x3d"subordinates"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/subordinates"\x3e\x3cspan class\x3d"j_type-name"\x3e\u4e0b\u5c5e\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_shareToMe" data-title\x3d"\u5171\u4eab\u7ed9\u6211\u7684\u4efb\u52a1" data-type\x3d"shareToMe"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/shareToMe"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineCreate" data-title\x3d"\u521b\u5efa\u7684\u4efb\u52a1" data-type\x3d"mineCreate"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/mineCreate"\x3e\x3cspan class\x3d"j_type-name"\x3e\u521b\u5efa\u7684\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_finished" data-title\x3d"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1" data-type\x3d"finished"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/finished"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5df2\u5b8c\u6210\u7684\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_all" data-title\x3d"\u7684\u5168\u90e8\u4efb\u52a1" data-type\x3d"all"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/all"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_feedback" data-type\x3d"feedback"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/feedback"\x3e\x3ci class\x3d"item-icon icon-chat-3" \x3e\x3c/i\x3e\u4efb\u52a1\u8bc4\u8bba\u53ca\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_taskstatistics" data-type\x3d"taskstatistics"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/taskstatistics"\x3e\x3ci class\x3d"item-icon icon-stats" \x3e\x3c/i\x3e\u4efb\u52a1\u7edf\u8ba1\u62a5\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_taskreport" data-type\x3d"taskreport"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/taskreport"\x3e\x3ci class\x3d"item-icon icon-stats" \x3e\x3c/i\x3e\u4efb\u52a1\u5b8c\u6210\u60c5\u51b5\x3c/a\x3e\x3c/li\x3e\x3c% if(isAdmin) { %\x3e\x3cli class\x3d"j_taskform" data-type\x3d"taskform"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/taskform"\x3e\x3ci class\x3d"item-icon icon-th-large" \x3e\x3c/i\x3e\u81ea\u5b9a\u4e49\u5b57\u6bb5\u7ba1\u7406\x3c/a\x3e\x3c/li\x3e\x3c% } %\x3e\x3cli class\x3d"j_recylce" data-type\x3d"recylce"\x3e\x3ca class\x3d"link-item router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/recylce"\x3e\x3ci class\x3d"item-icon icon-trash" \x3e\x3c/i\x3e\u56de\u6536\u7ad9\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv class\x3d"main" id\x3d"j_taskcenter"\x3e\x3c/div\x3e',
"task.mytask":'\x3cdiv class\x3d"j_mainscroll mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli id\x3d"view-taskType" class\x3d"toolkit-item hide"\x3e\x3cdiv class\x3d"j_mineType btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"task-taskType" class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli data-entity\x3d"mine" class\x3d"active"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3cli data-entity\x3d"mineManager" title\x3d"\u8d1f\u8d23\u7684\u4efb\u52a1"\x3e\x3ca\x3e\u8d1f\u8d23\u7684\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli data-entity\x3d"mineParticipants" title\x3d"\u53c2\u4e0e\u7684\u4efb\u52a1"\x3e\x3ca\x3e\u53c2\u4e0e\u7684\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"view-state-toggle" class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u89c6\u56fe\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul id\x3d"view-state" class\x3d"dropdown-menu border-dropdown"\x3e\x3cli data-value\x3d"list"\x3e\x3ca\x3e\u5217\u8868\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli data-value\x3d"dueDate"\x3e\x3ca\x3e\u5230\u671f\u65e5\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli data-value\x3d"beginDate"\x3e\x3ca\x3e\u8d77\u59cb\u65e5\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"tasks-calendar btn btn-sm j_timeview hide router" href\x3d"/tasks/\x3c%\x3duserId%\x3e/calendar"\x3e\u65f6\u95f4\u89c6\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"task-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca data-entity\x3d"default" class\x3d"orderType" data-direction\x3d"DESC"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-entity\x3d"last_comment_time" class\x3d"orderType" data-direction\x3d"DESC"\x3e\u6309\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"last_update_time" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u66f4\u65b0\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65b0)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"ASC"\x3e\u6309\u4efb\u52a1\u521b\u5efa\u65f6\u95f4(\u6700\u65e9)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"due_date" data-direction\x3d"DESC"\x3e\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65b0)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"due_date" data-direction\x3d"ASC"\x3e\u6309\u4efb\u52a1\u5230\u671f\u65f6\u95f4(\u6700\u65e9)\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"manager" data-direction\x3d"ASC"\x3e\u6309\u8d1f\u8d23\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"priority" data-direction\x3d"DESC"\x3e\u6309\u7d27\u6025\u7a0b\u5ea6\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown" id\x3d"task-filter" data-toggle\x3d"#task-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3cdiv id\x3d"task-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22" id\x3d"tasksearch-keywords"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-hd main-hd-fixed j_batchEl hide"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"task-watchs btn btn-sm"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"task-reminds btn btn-sm"\x3e\u6279\u91cf\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"task-share btn btn-sm" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"task-finished btn btn-sm"\x3e\u6279\u91cf\u5b8c\u6210\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd sidebar-in j_sidebarPren"\x3e\x3cdiv class\x3d"table-tray scrollwrapper"\x3e\x3cdiv class\x3d"tray-cell main-content j_center" id\x3d"mytask-container"\x3e\x3cdiv class\x3d"task-creater"\x3e\x3cinput id\x3d"qcreatetask" class\x3d"placeholder-italic" placeholder\x3d"\u63d0\u4ea4\u65b0\u4efb\u52a1\uff0c\u76f4\u63a5@\u4efb\u52a1\u8d23\u4efb\u4eba\uff0cCtrl+Enter\u5feb\u901f\u65b0\u5efa"\x3e\x3c/input\x3e\x3ca class\x3d"addbtn j_qcreatetask"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_due group-view e-list-group delay"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5df2\u7ecf\u5ef6\u671f\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"dueDate/delay"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_due group-view e-list-group today"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u4eca\u5929\u5230\u671f\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"dueDate/today"\x3e\x3cli class\x3d"notask"\x3e\u8fd8\u6ca1\u6709\u4eca\u5929\u5230\u671f\u7684\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_due group-view e-list-group tomorrow"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u660e\u5929\u5230\u671f\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"dueDate/tomorrow"\x3e\x3cli class\x3d"notask"\x3e\u8fd8\u6ca1\u6709\u660e\u5929\u5230\u671f\u7684\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_due group-view e-list-group future"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5373\u5c06\u5230\u671f\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"dueDate/future"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_due group-view e-list-group memo"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u65e0\u5230\u671f\u65e5\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"dueDate/memo"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_begin group-view e-list-group past"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5df2\u7ecf\u5f00\u59cb\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"beginDate/past"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_begin group-view e-list-group today"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u4eca\u5929\u5f00\u59cb\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"beginDate/today"\x3e\x3cli class\x3d"notask"\x3e\u8fd8\u6ca1\u6709\u4eca\u5929\u5f00\u59cb\u7684\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_begin group-view e-list-group tomorrow"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u660e\u5929\u5f00\u59cb\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"beginDate/tomorrow"\x3e\x3cli class\x3d"notask"\x3e\u8fd8\u6ca1\u6709\u660e\u5929\u5f00\u59cb\u7684\u4efb\u52a1\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u53f3\u8fb9\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u65b0\u5efa\u4e00\u6761\u4efb\u52a1\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_begin group-view e-list-group future"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u5373\u5c06\u5f00\u59cb\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"beginDate/future"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_begin group-view e-list-group memo"\x3e\x3cdiv class\x3d"e-list-head"\x3e\x3ca class\x3d"group-add fr" title\x3d"\u5b89\u6392\u4efb\u52a1" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"e-list-title group-switch" title\x3d"\u6298\u53e0" data-status\x3d"on"\x3e\x3cstrong\x3e\u65e0\u8d77\u59cb\u65e5\x3ci class\x3d"j_count"\x3e\x3c/i\x3e\x3c/strong\x3e\x3ci class\x3d"icon-angle-right "\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"e-list task-list" group\x3d"beginDate/memo"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"all-type-view e-list-group all-type hide"\x3e\x3cul id\x3d"all-type-list" class\x3d"e-list center-list task-list hide" group\x3d"all-type"\x3e\x3c/ul\x3e\x3cdiv class\x3d"nodata-holder j_fast-create hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u8d1f\u8d23\u53c2\u4e0e\u7684\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8ba9\u81ea\u5df1\u6bcf\u4e00\u5929\u90fd\u5f88\u660e\u786e\u8981\u63a8\u8fdb\u4ec0\u4e48\u4e8b\u3001\u8ba1\u5212\u7b2c\u4e8c\u5929\u8fd8\u8981\u5904\u7406\u7684\u4e8b\u3001\u8fd9\u5468\u8fd9\u6708\u8fd8\u6709\u54ea\u4e9b\u4e8b\u8981\u505a\uff0c\u5f62\u6210\u4e2a\u4eba\u7684Todo\u4e2d\u5fc3\uff01\x3c/p\x3e\x3cp class\x3d"small"\x3e\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_fast-minecreate hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_fast-watchedcreate hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico collect"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u5173\u6ce8\u7684\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u901a\u8fc7\u5173\u6ce8\u7684\u4efb\u52a1\uff0c\u8ba9\u4f60\u81ea\u7531\u638c\u63e1\uff0c\u7b2c\u4e00\u65f6\u95f4\u63a8\u8fdb\u91cd\u8981\u4e8b\u60c5\uff01\x3c/p\x3e\x3cp class\x3d"small"\x3e\u5982\u4f55\u5173\u6ce8\u4efb\u52a1\uff1f\x3c/p\x3e\x3cp class\x3d"small"\x3e\u5728\u4efb\u52a1\u5217\u8868\u6216\u4efb\u52a1\u8be6\u60c5\u4e2d\u5c31\u53ef\u4ee5\u5173\u6ce8\u4efb\u52a1\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_fast-shareToMecreate hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u5171\u4eab\u7ed9\u60a8\u7684\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_fast-finishedcreate hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u5b8c\u6210\u7684\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3eor\x3c/p\x3e\x3cp class\x3d"small"\x3e\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u4efb\u52a1\uff1f\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_fast-subordinatescreate hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u7684\u4e0b\u5c5e\u6682\u65f6\u6ca1\u6709\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8d76\u5feb\u7ed9\u60a8\u7684\u4e0b\u5c5e\u5b89\u6392\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder j_no-result-tip hide"\x3e\x3cdiv class\x3d"j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u4efb\u52a1\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u4efb\u52a1\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success j_goal-item-add j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-more j_moretask"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-nodata j_nodata"\x3e\u5df2\u52a0\u8f7d\u6240\u6709\u4efb\u52a1\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mytask-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell main-sidebar j_rightView" id\x3d"mytask-right"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"taskClone" class\x3d"task"\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"e-list-loading"\x3e\x3c/span\x3e\x3cdiv class\x3d"title j_entityslider-toggle"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut hide"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\x26nbsp;\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\x26nbsp;\u6807\u8bb0\u672a\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share selector-toggle" data-entity\x3d"employee" data-multi\x3d"true" targetId\x3d""\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\x26nbsp;\u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"task.subtask":'\x3cdiv class\x3d"right-nav subtask-nav hd" id\x3d"subtask-head"\x3e\x3cspan class\x3d"title" id\x3d"taskChoose"\x3e\x3ci class\x3d"graph graph-16 graph-16-subtask mr-10"\x3e\x3c/i\x3e\u5b50\u4efb\u52a1\x3ci class\x3d"icon-angle-right ph-10 fs-16"\x3e\x3c/i\x3e\x3ca class\x3d"toolkit-item j_if-finished hide"\x3e\x3ci class\x3d"icon-checkbox-unchecked icoinline"\x3e\x3c/i\x3e\u5305\u542b\u5df2\u5b8c\u6210\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"numberDiv" class\x3d"numberDiv"\x3e\x3cspan\x3e0\x3c/span\x3e/0\x3c/span\x3e\x3cspan id\x3d"descriptionDiv" class\x3d"hide ml-5 descriptionDiv"\x3e\u672a\u5b8c\u6210\u6570/\u603b\u6570\x3c/span\x3e\x3cspan class\x3d"pull-right addSubtask-container"\x3e\x3ca class\x3d"btn btn-sm j_addSubtask addSubtask" style\x3d"margin-right: -7px;"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\u65b0\u5efa\u5b50\u4efb\u52a1\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli class\x3d"aaa  entity-toggle" data-entity\x3d"relevance" data-type\x3d"subtask" module\x3d"task"\x3e\x3ca id\x3d"js_customer-import-btn"\x3e\u5173\u8054\u5b50\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"subtask-panel" id\x3d"subtask-content"\x3e\x3cul class\x3d"e-list task-list"\x3e\x3c/ul\x3e\x3cdiv class\x3d"hide center-more"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv class\x3d"hide common-nodata"\x3e\u5df2\u52a0\u8f7d\u6240\u6709\u4efb\u52a1\x3c/div\x3e\x3cdiv id\x3d"subtask-loading" class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"subtaskClone" class\x3d"task subtask" href\x3d"#"\x3e\x3cspan class\x3d"sn-link"\x3e\x3c/span\x3e\x3cdiv\x3e\x3cdiv class\x3d"j_edit title entitybox-toggle"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3cspan class\x3d"importance hide"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right entity-info"\x3e\x3cspan class\x3d" title date"\x3e\x3cinput type\x3d"text" class\x3d"datepicker textinput subtask-duedate dudate j_dueDateInput" readonly unselectable\x3d"on"\x3e\x3c/input\x3e\x3cspan class\x3d"j_dueDateTxt"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search j_subtaskManager" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d" /\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut hide"\x3e\x3cspan class\x3d"j_manager" title\x3d"\u9009\u62e9\u8d1f\u8d23\u4eba"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"j_duedate" title\x3d"\u9009\u62e9\u5230\u671f\u65e5"\x3e\x3ci class\x3d"icon-alarm"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"j_finished" title\x3d"\u6807\u8bb0\u5b8c\u6210/\u672a\u5b8c\u6210"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"task.taskinfo":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u4efb\u52a1\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli class\x3d"acl-hide"\x3e\x3ca title\x3d"\u72b6\u6001" data-toggle\x3d"tooltip" data-placement\x3d"bottom" id\x3d"task-status" class\x3d"iconlabel" data-status\x3d"todo"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\u6807\u8bb0\u5b8c\u6210\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u9501\u5b9a\u540e\u53c2\u4e0e\u4eba\u4e0d\u53ef\u7f16\u8f91" id\x3d"task-lock" class\x3d"iconlabel" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-lock"\x3e\x3c/i\x3e\u9501\u5b9a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle j_more_dropdown"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-cog"\x3e\x3c/i\x3e\u66f4\u591a\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca id\x3d"task-watch"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-remind" class\x3d"remind-toggle" module\x3d"task" targetId\x3d""\x3e\x3ci class\x3d"icon-bell"\x3e\x3c/i\x3e\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"copy-task"\x3e\x3ci class\x3d"icon-stack-2"\x3e\x3c/i\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-calendar" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-calendar-empty"\x3e\x3c/i\x3e\u8f6c\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cdiv class\x3d"hide entitybox-toggle convert-to-calendar" data-id\x3d"" data-module\x3d"agenda"\x3e\x3c/div\x3e\x3cli\x3e\x3ca id\x3d"task-print" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\u6253\u5370\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"acl-hide acl-w-hide acl-p-hide"\x3e\x3ca id\x3d"btn-delete"  data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_li_save_untrue hide"\x3e\x3ca data-toggle\x3d"tooltip" data-placement\x3d"top" data-original-title\x3d"" title\x3d""\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"detail-close-li"\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"icon-reply-li hide js_entiyDetail_reply"\x3e\x3ca title\x3d"\u8fd4\u56de" id\x3d"" class\x3d""\x3e\x3ci class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-content scrollwrapper" marginbottom\x3d"20" id\x3d"task-wrapper" class\x3d"form-horizontal entity-info task-info"\x3e\x3cdiv id\x3d"task-container" class\x3d"task-container"\x3e\x3cdiv class\x3d"detail-summary"\x3e\x3cdiv class\x3d"summary-avatar j_summary-avatar usercard-toggle" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"summary-title"\x3e\x3ctextarea id\x3d"task-title" class\x3d"j_title acl-disabled smart-title" name\x3d"task.title" v-maxlength\x3d"100" placeholder\x3d"\u4e00\u53e5\u8bdd\u63cf\u8ff0\u4efb\u52a1..."\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_recommend_block"\x3e\x3cdiv class\x3d"detail-infos manager-div"\x3e\x3cdl class\x3d"info-item clearfix acl-w-container"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-man task-manager-label"\x3e\x3c/i\x3e\u8d1f\u8d23\u4eba:\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv undeletable\x3d"true" id\x3d"task-manager" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-manager" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editManager" class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba"\x3e\x3ci title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl class\x3d"info-item clearfix"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-flag"\x3e\x3c/i\x3e\u5230\u671f\u65e5:\x3c/dt\x3e\x3cdd class\x3d"date-ending controls"\x3e\x3cinput class\x3d"acl-disabled" id\x3d"dueDate" name\x3d"dueDate" type\x3d"text" placeholder\x3d"\u9009\u62e9\u5230\u671f\u65e5" dateGroup\x3d"true"\x3e\x3c/input\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl class\x3d"info-item clearfix acl-hide"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-clock"\x3e\x3c/i\x3e\u7d27\u6025\u7a0b\u5ea6:\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle"\x3e\x3cspan id\x3d"task-urgency" class\x3d"dropdown-toggle"\x3e\x3cdiv class\x3d"importance-item j_importance_level"\x3e\x3cdfn\x3e\x3c/dfn\x3e\x3cspan class\x3d"j_urgency_name"\x3e\u6b63\u5e38\x3c/span\x3e\x3c/div\x3e\x3c/span\x3e\x3cul class\x3d"dropdown-menu dropdown-urgency border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"j_urgency" value\x3d"normal"\x3e\x3cdiv class\x3d"importance-item"\x3e\x3cdfn\x3e\x3c/dfn\x3e\u6b63\u5e38\x3c/div\x3e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_urgency" value\x3d"high"\x3e\x3cdiv class\x3d"importance-item warning"\x3e\x3cdfn\x3e\x3c/dfn\x3e\u7d27\u6025\x3c/div\x3e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_urgency" value\x3d"urgency"\x3e\x3cdiv class\x3d"importance-item danger"\x3e\x3cdfn\x3e\x3c/dfn\x3e\u975e\u5e38\u7d27\u6025\x3c/div\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block detail-desc-wrap j_content_block"\x3e\x3cspan class\x3d"graph graph-16-word"\x3e\x3c/span\x3e\x3cdiv class\x3d"desc-input"\x3e\x3ctextarea id\x3d"task-content" class\x3d"acl-disabled" name\x3d"task.content" placeholder\x3d"\u8fd9\u91cc\u53ef\u4ee5\u6dfb\u52a0\u4efb\u52a1\u8be6\u60c5..." maxlength\x3d"2000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"form-preview hide" \x3e\x3cdiv class\x3d"form-view  j_form_view form-view_js j_formpreview" \x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block detail-desc-wrap info-submit-div hide"\x3e\x3ca id\x3d"form-submit" class\x3d"fr btn btn-sm btn-info a-submit"\x3e\u4fdd\u5b58\x3c/a\x3e\x3cspan class\x3d"fr mr-10"\x3e\u81ea\u5b9a\u4e49\u5b57\u6bb5\u533a\u57df\u9700\u8981\u624b\u52a8\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block-more hide j_task_form"\x3e\x3ca class\x3d"btn btn-block btn-sm opc-7"\x3e\x3cspan class\x3d"js_detail-block-more"\x3e\u66f4\u591a\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands" style\x3d"outline:none;"\x3e\x3cdiv class\x3d"control-group j_task_detail acl-w-container hide" id\x3d"task-participants" icon\x3d"#i-participants"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group j_task_detail hide" id\x3d"task-ctag" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group j_task_detail hide" id\x3d"task-tag" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group j_task_detail hide" id\x3d"task-share" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group j_task_detail hide" id\x3d"task-beginDate"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-path"\x3e\x3c/i\x3e\u8d77\u59cb\u65e5\u671f:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"beginDate" name\x3d"beginDate" type\x3d"text" class\x3d"datepicker form-control textinput acl-disabled" dateGroup\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-mainline" icon\x3d"#i-mainline"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-relevance-task" icon\x3d"#i-relevance-task"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-relevance-doc" icon\x3d"#i-relevance-doc"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-relevance-crm" icon\x3d"#i-relevance-crm"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-relevance-flow" icon\x3d"#i-relevance-flow"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"task-relevance-agenda" icon\x3d"#i-relevance-agenda"\x3e\x3c/div\x3e\x3cdiv id\x3d"parent-task" class\x3d"control-group  hide"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-parent"\x3e\x3c/i\x3e\u4e0a\u7ea7\u4efb\u52a1:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"parent-task-name entity-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"task-attachment" icon\x3d"#i-attach"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"task-remind" icon\x3d"#i-remind"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles j_task_handle_item"\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-participants" for\x3d"#task-participants"\x3e\x3ci class\x3d"graph graph-16 graph-16-mans"\x3e\x3c/i\x3e\u6dfb\u52a0\u53c2\u4e0e\u4eba\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-subtask" for\x3d"#task-subtask"\x3e\x3ci class\x3d"graph graph-16 graph-16-subtask"\x3e\x3c/i\x3e\u5b50\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-ctag" for\x3d"#task-ctag" for\x3d"#task-ctag"\x3e\x3ci class\x3d"graph graph-16 graph-16-commonlabel"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-tag" for\x3d"#task-tag"\x3e\x3ci class\x3d"graph graph-16 graph-16-label"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-share" for\x3d"#task-share"\x3e\x3ci class\x3d"graph graph-16 graph-16-share"\x3e\x3c/i\x3e\u5171\u4eab\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-mainline" for\x3d"#task-mainline"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-task" for\x3d"#task-relevance-task"\x3e\x3ci class\x3d"graph graph-16 graph-16-task"\x3e\x3c/i\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-doc" for\x3d"#task-relevance-doc"\x3e\x3ci class\x3d"graph graph-16 graph-16-document"\x3e\x3c/i\x3e\u5173\u8054\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-crm" for\x3d"#task-relevance-crm"\x3e\x3ci class\x3d"graph graph-16 graph-16-customer"\x3e\x3c/i\x3e\u5173\u8054\u5ba2\u6237\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-flow" for\x3d"#task-relevance-flow"\x3e\x3ci class\x3d"graph graph-16 graph-16-workflow"\x3e\x3c/i\x3e\u5173\u8054\u5ba1\u6279\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-agenda" for\x3d"#task-relevance-agenda"\x3e\x3ci class\x3d"graph graph-16 graph-16-calendar"\x3e\x3c/i\x3e\u5173\u8054\u65e5\u7a0b\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-beginDate" for\x3d"#task-beginDate"\x3e\x3ci class\x3d"graph graph-16 graph-16-path"\x3e\x3c/i\x3e\u8d77\u59cb\u65e5\u671f\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-attach" for\x3d"#task-attachment"\x3e\x3ci class\x3d"graph graph-16 graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-remind" for\x3d"#task-remind"\x3e\x3ci class\x3d"graph graph-16 graph-16-remind"\x3e\x3c/i\x3e\u63d0\u9192\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block subtask-wrap hide" id\x3d"task-subtask"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"comment-easy-wrapper hide"\x3e\x3cdiv class\x3d"easy-input"\x3e\x3cspan class\x3d"graph"\x3e\x3c/span\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u8f93\u5165\u8bc4\u8bba"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"easy-handle"\x3e\x3ca class\x3d"a-upload fl"\x3e\x3ci class\x3d"icon-paperclip mr-3"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3ca class\x3d"fr btn btn-sm btn-info a-submit"\x3e\u53d1\u5e03\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"task.taskright":'\x3cdiv class\x3d"j_sidebarCtrl graph siderbar-ctrl-btn"\x3e\x3c/div\x3e\x3cdiv class\x3d"main-sidebar-bd"\x3e\x3cdiv id\x3d"task-right"\x3e\x3cdiv class\x3d"sbox"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 class\x3d"sbox-title"\x3e\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-bd"\x3e\x3cdiv class\x3d"h-280" id\x3d"mytask"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 class\x3d"sbox-title"\x3e\u4e0b\u5c5e\u4efb\u52a1\u7edf\u8ba1\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"sub" class\x3d"sbox-bd"\x3e\x3cdiv class\x3d"task-underling-stat"\x3e\x3cdiv id\x3d"empList" class\x3d"underling-filter clearfix"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_notask no-more hide"\x3e\u8be5\u4e0b\u5c5e\u6ca1\u6709\u4efb\u52a1\x3c/div\x3e\x3cdiv id\x3d"subtask" class\x3d"h-280"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-no-data j_nosub hide"\x3e\u60a8\u6ca1\u6709\u4e0b\u5c5e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide" id\x3d"empItem"\x3e\x3cspan class\x3d" filter-item"\x3e\x3ca userId\x3d"" title\x3d"" class\x3d"j_employee-click"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d" filter-item j_submore more hide"\x3e\x3ca\x3e\u66f4\u591a\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
"task.calendar":'\x3cdiv id\x3d"taskcalendar-head" class\x3d"p-10 ps-r clearfix"\x3e\x3ca class\x3d"new btn btn-sm btn-success fr"\x3e\x3ci class\x3d"icon-pencil glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3ca class\x3d"this-month btn btn-sm fr"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"this-week btn btn-sm hide fr"\x3e\u672c\u5468\x3c/a\x3e\x3cdiv class\x3d"fr"\x3e\x3cdiv class\x3d"timeviews"\x3e\x3ca class\x3d"duedate-view btn btn-sm btn-info hide"\x3e\u5230\u671f\u65e5\u89c6\u56fe\x3c/a\x3e\x3ca class\x3d"finished-view btn btn-sm hide"\x3e\u5b8c\u6210\u65e5\u89c6\u56fe\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"views btn-group ml-10"\x3e\x3ca class\x3d"week btn btn-sm"\x3e\u5468\x3c/a\x3e\x3ca class\x3d"month btn btn-sm btn-info"\x3e\u6708\x3c/a\x3e\x3ca class\x3d"refresh btn-sm btn"\x3e\u5237\u65b0\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"arrows btn-group fr"\x3e\x3ca class\x3d"arrow-left btn btn-sm ph-10"\x3e\x26lt;\x3c/a\x3e\x3ca class\x3d"arrow-right btn btn-sm ph-10"\x3e\x26gt;\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"bold j_taskusername"\x3e\u65f6\u95f4\u89c6\u56fe\x3c/span\x3e\x3cspan class\x3d"date-between ml-20 fs-16 lh-30"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"taskcalendar-wrapper" class\x3d"scrollwrapper"\x3e\x3cdiv id\x3d"taskcalendar"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"taskcalendar-week"  class\x3d"datepicker scrollwrapper hide"\x3e\x3ctable\x3e\x3cthead\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv id\x3d"taskModal" class\x3d"statcalendar-modal entitybox modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"taskModalLabel" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca id\x3d"closebox" href\x3d"javascript:;" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u5b89\u6392\u4efb\u52a1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"alltasks" class\x3d"modal hide fade" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"alltasksModalLabel" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch3 id\x3d"alltasksModalLabel"\x3e\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton class\x3d"btn" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u5173\u95ed\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"task.report":'\x3cdiv id\x3d"taskreport"  class\x3d"statsheet-view taskreport"\x3e\x3cdiv class\x3d"title"\x3e\x3cspan class\x3d"static-time"\x3e\x3c/span\x3e\u4efb\u52a1\u7edf\u8ba1\u62a5\u8868\x3c/div\x3e\x3cdiv class\x3d"card p-10 mh-10"\x3e\x3cdiv class\x3d"static-choose"\x3e\x3cdiv\x3e\x3cselect class\x3d"form-control static-year"\x3e\x3coption value\x3d"2010"\x3e2010\u5e74\x3c/option\x3e\x3coption value\x3d"2011"\x3e2011\u5e74\x3c/option\x3e\x3coption value\x3d"2012"\x3e2012\u5e74\x3c/option\x3e\x3coption value\x3d"2013" selected\x3d"selected"\x3e2013\u5e74\x3c/option\x3e\x3coption value\x3d"2014"\x3e2014\u5e74\x3c/option\x3e\x3coption value\x3d"2015"\x3e2015\u5e74\x3c/option\x3e\x3coption value\x3d"2016"\x3e2016\u5e74\x3c/option\x3e\x3coption value\x3d"2017"\x3e2017\u5e74\x3c/option\x3e\x3coption value\x3d"2018"\x3e2018\u5e74\x3c/option\x3e\x3coption value\x3d"2019"\x3e2019\u5e74\x3c/option\x3e\x3coption value\x3d"2020"\x3e2020\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e1\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e2\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e3\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e4\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e5\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e6\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e7\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e8\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e9\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e10\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e11\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e12\u6708\x3c/div\x3e\x3cdiv class\x3d"filter"\x3e\x3cdiv class\x3d"myself"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" checked\x3e\x3cspan\x3e\u6211\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"myfollow"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan\x3e\u6211\u5173\u6ce8\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"mySubordinate"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u6211\u4e0b\u5c5e\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"report-data"  class\x3d"report-data j_report-data scrollwrapper" marginbottom\x3d"50"\x3e\x3ctable class\x3d"table table-bordered"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-foot mt-10"\x3e\u8bf4\u660e\uff1a\x3cspan\x3e\x3cimg alt\x3d"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1" src\x3d"images/teams/submited.png"\x3e\u5df2\u5b8c\u6210\u7684\u4efb\u52a1\x3c/span\x3e\x3cspan\x3e\x3cimg alt\x3d"\u65e0\u5b8c\u6210\u4efb\u52a1" src\x3d"images/teams/unsubmit.png"\x3e\u65e0\u5b8c\u6210\u4efb\u52a1\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"task.statistics":'\x3cdiv id\x3d"taskreportview"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title-opt fr"\x3e\x3ca class\x3d"hide btn btn-sm btn-success mt-8"\x3e\u4fdd\u5b58\u4e3a\u5feb\u6377\u83dc\u5355\x3c/a\x3e\x3ca class\x3d"hide btn btn-sm btn-primary mt-8"\x3e\u7edf\u8ba1\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"title bold"\x3e\u4efb\u52a1\u7edf\u8ba1\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bg-white js_taskreportScr scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"stat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group clearfix"\x3e\x3clabel class\x3d"control-label"\x3e\u53c2\u4e0e\u4eba\u548c\u8d1f\u8d23\u4eba\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"statisticians" class\x3d"fl entity-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle cdts-addmem-wgt fl"\x3e\x3ca class\x3d"btn btn-sm add-btn"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-menu dropdown-div border-dropdown dropdown-filter" style\x3d"display: none;"\x3e\x3cdiv class\x3d"filter-group filter-title"\x3e\x3cspan class\x3d"filter-label"\x3e\u6211\u7684\u4e0b\u5c5e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"statisticians-list" class\x3d"filter-group"\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group filter-title"\x3e\x3cspan class\x3d"filter-label"\x3e\u5176\u4ed6\u4eba\u5458\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filter-group"\x3e\x3cinput type\x3d"text" id\x3d"employees-list" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cscript type\x3d"text/template" id\x3d"statistician-tmp"\x3e\x3cspan class\x3d"entity-item"\x3e\x3ca data-id\x3d"\x3c%\x3d id %\x3e" data-module\x3d"employee"\x3e\x3c%\x3d username %\x3e\x3c/a\x3e\x3c/span\x3e\x3c/script\x3e\x3cscript type\x3d"text/template" id\x3d"statistician-list-tmp"\x3e\x3cspan class\x3d"filter-item"\x3e\x3ca data-id\x3d"\x3c%\x3d id %\x3e" data-module\x3d"employee"\x3e\x3c%\x3d username %\x3e\x3c/a\x3e\x3c/span\x3e\x3c/script\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-cdts-btn"\x3e\x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card p-10"\x3e\x3cdiv id\x3d"day-chart" class\x3d"h-400"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"alert stat-tip alert-info mv-20"\x3e\x3ch5\x3e\u4efb\u52a1\u7edf\u8ba1\u56fe\u8868\u8bf4\u660e\x3c/h5\x3e\x3cdiv class\x3d"content"\x3e\x3cp\x3e\u8fdb\u884c\u4e2d\uff1a\u5305\u62ec\u4e86\u7d2f\u79ef\u5230\u5f53\u5929\u5c1a\u672a\u5b8c\u6210\u7684\u4efb\u52a1\u6570\u91cf\x3c/p\x3e\x3cp\x3e\u5df2\u5b8c\u6210\uff1a\u5f53\u5929\u5b8c\u6210\u7684\u4efb\u52a1\u6570\u91cf\x3c/p\x3e\x3cp\x3e\u65b0\u521b\u5efa\uff1a\u5f53\u5929\u521b\u5efa\u7684\u4efb\u52a1\u6570\u91cf\uff0c\u8868\u683c\u4e2d\u7684\u201c\u65b0\u521b\u5efa\u201d\u662f\u6307\u7b2c\u4e00\u5217\u6307\u660e\u7684\u4eba\u5458\u521b\u5efa\u7684\u4efb\u52a1\u6570\u91cf\x3c/p\x3e\x3cp\x3e\u6ce8\u610f\uff1a "\u5b8c\u6210\u72b6\u51b5" \u548c "\u7d27\u6025\u7a0b\u5ea6" \u4e2d\u7684\u4efb\u52a1\u90fd\u662f\u6307\u8be5\u4eba\u5458\u8d1f\u8d23\u6216\u53c2\u4e0e\u7684\u4efb\u52a1\uff0c\u800c "\u65b0\u521b\u5efa" \u7684\u6570\u91cf\u6ca1\u6709\u6b64\u9650\u5236\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row mv-20"\x3e\x3cdiv class\x3d"col-6"\x3e\x3cdiv class\x3d"card p-10"\x3e\x3cdiv id\x3d"finish-chart" class\x3d"h-200"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"col-6"\x3e\x3cdiv class\x3d"card p-10"\x3e\x3cdiv id\x3d"urgency-chart" class\x3d"h-200"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctable id\x3d"detail-table" class\x3d"stat-table table table-bordered nomg mb-50"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth rowspan\x3d"2"\x3e\u4eba\u5458\x3c/th\x3e\x3cth colspan\x3d"5"\x3e\u5b8c\u6210\u60c5\u51b5\x3c/th\x3e\x3cth colspan\x3d"3"\x3e\u7d27\u6025\u7a0b\u5ea6\x3c/th\x3e\x3cth rowspan\x3d"2"\x3e\u65b0\u521b\u5efa\x3c/th\x3e\x3c/tr\x3e\x3ctr\x3e\x3cth\x3e\u4efb\u52a1\u6570\x3c/th\x3e\x3cth\x3e\u5b8c\u6210\u5ea6\x3c/th\x3e\x3cth\x3e\u8fdb\u884c\u4e2d\x3c/th\x3e\x3cth\x3e\u5df2\u5b8c\u6210\x3c/th\x3e\x3cth\x3e\u6709\u5ef6\u671f\x3c/th\x3e\x3cth\x3e\u6b63\u5e38\x3c/th\x3e\x3cth\x3e\u7d27\u6025\x3c/th\x3e\x3cth\x3e\u975e\u5e38\u7d27\u6025\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cscript type\x3d"text/template" id\x3d"row-template"\x3e\x3ctr\x3e\x3ctd userId\x3d"\x3c%\x3d PERSON %\x3e"\x3e\x3c%\x3d personName %\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"all"\x3e\x3c%\x3d manageOrIn %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3c%\x3d Math.round((percent ? percent : 0) * 100) %\x3e %\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"doing"\x3e\x3c%\x3d doing %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"finished"\x3e\x3c%\x3d finished %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"delayed"\x3e\x3c%\x3d delayed %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"urgency_normal"\x3e\x3c%\x3d normal %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"urgency_high"\x3e\x3c%\x3d high %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"urgency_urgency"\x3e\x3c%\x3d urgency %\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"table_num_details j_entityslider-toggle" style\x3d"cursor:pointer;" type\x3d"created"\x3e\x3c%\x3d created %\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/script\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"task.statisticstasklist":'\x3cdiv class\x3d"module-detail-view taskslist taskslist-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u4efb\u52a1\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e" data-original-title\x3d"\x3cdiv class\x3d\x26quot;e-row ta-l\x26quot;\x3e\u5217\u8868\u4e2d\u4e0d\u663e\u793a\u65e0\u6743\u9650\u67e5\u770b\u7684\u4efb\u52a1\x3c/div\x3e"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-invite popbox-invite p-20" id\x3d"user-invite"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\u4efb\u52a1\u540d\u79f0\uff1a\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"taskName" placeholder\x3d"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cbutton id\x3d"search" type\x3d"submit" class\x3d"btn btn-sm btn-success w-60"\x3e\u641c\u7d22\x3c/button\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"js_customerTable_wrapper" class\x3d"scrollwrapper dataTables_wrapper no-footer ph-20"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item" style\x3d"width:40%"\x3e\x3cdiv class\x3d"ellipsis name"\x3e\u4efb\u52a1\u540d\u79f0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item whodo" style\x3d"width:20%"\x3e\u8d1f\u8d23\u4eba\x3c/div\x3e\x3cdiv class\x3d"item opt" style\x3d"width:20%"\x3e\u5230\u671f\u65f6\u95f4 \x3c/div\x3e\x3cdiv id\x3d"title_finish_time" class\x3d"item time" style\x3d"width:20%"\x3e\u5b8c\u6210\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"scrollwrapper j_trashbinListScr trashbinlist"\x3e\x3cli class\x3d"list-more statistics_task_loading hide"\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/li\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more j_empty hide"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"more_data" class\x3d"table-more mt-0 hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv style\x3d"height:36px;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"trashbinlogClone" class\x3d"hide trashbinlogClone"\x3e\x3cli\x3e\x3cdiv class\x3d"item" style\x3d"width:40%;"\x3e\x3ca class\x3d"ellipsis task_name"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"item task_manager" style\x3d"width:20%;"\x3e\u64cd\u4f5c\u8005\x3c/div\x3e\x3cdiv class\x3d"item due_date" style\x3d"width:20%;"\x3e\x3c/div\x3e\x3cdiv class\x3d"item finish_date" style\x3d"width:20%;color:red;"\x3e\u64cd\u4f5c\u65f6\u95f4 \x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"task.chart":'\x3cdiv class\x3d"caption"\x3e\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1\x3ci class\x3d"ml-3"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"tc-wrap"\x3e\x3cdiv class\x3d"sub-caption "\x3e\u6211\u7684\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1\x3cspan id\x3d"j_me" class\x3d"hide"\x3e[\u60a8\u5f53\u524d\u6ca1\u6709\u4efb\u52a1]\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"taskchart" class\x3d"h-250 p-10" \x3e\x3c/div\x3e\x3cdiv id\x3d"sub" class\x3d"hide"\x3e\x3cdiv class\x3d"sub-caption"\x3e\x3cspan id\x3d"name"\x3e\u6240\u6709\u4e0b\u5c5e\x3c/span\x3e\u7684\u4eca\u5929\u4efb\u52a1\u7edf\u8ba1  \x3cspan class\x3d"cs-p j_sub pull-right"\x3e\u6211\u7684\u4e0b\u5c5e\x3ci class\x3d"caret caret-right ml-3"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"empList" class\x3d"p-10 staff-filter hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"taskchart1" class\x3d"h-250 p-10"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide" id\x3d"empItem"\x3e\x3cspan class\x3d" filter-item"\x3e\x3ca userId\x3d"" title\x3d"" class\x3d"employee-click"\x3e\u6d4b\u8bd5\u4e00\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e',
"task.taskcopy":'\x3cdiv id\x3d"task-copy-model" class\x3d"j_item_copy modal fade task-copy-model" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog module-detail-view"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli class\x3d"j_save_copy"\x3e\x3ca data-toggle\x3d"tooltip" data-placement\x3d"top" data-original-title\x3d"" title\x3d""\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" data-dismiss\x3d"modal" aria-hidden\x3d"true" class\x3d"detail-slide-close"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u4efb\u52a1\u590d\u5236\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv id\x3d"copy-loading" class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u590d\u5236\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"taskcopy-view-bg j_taskcopy_body hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"taskcopy-view"\x3e\x3cdiv class\x3d"detail-body p-20"\x3e\x3cdiv class\x3d"rename"\x3e\x3cinput class\x3d"j_title form-control" type\x3d"text" placeholder\x3d"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0" /\x3e\x3c/div\x3e\x3cdiv class\x3d"taskcopy-tab"\x3e\x3cspan class\x3d"notes"\x3e\u8bf7\u8bbe\u7f6e\u662f\u5426\u590d\u5236\u539f\u4efb\u52a1\u7684\u4ee5\u4e0b\u5185\u5bb9\x3c/span\x3e\x3cul class\x3d"taskcopy-ul"\x3e\x3cli\x3e\x3clabel class\x3d"item principal"\x3e\x3cinput class\x3d"j_task_manager" type\x3d"checkbox"/\x3e\x3cspan\x3e\u8d1f\u8d23\u4eba\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item participant"\x3e\x3cinput class\x3d"j_task_participants" type\x3d"checkbox"/\x3e\x3cspan\x3e\u53c2\u4e0e\u4eba\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item share"\x3e\x3cinput class\x3d"j_task_shares" type\x3d"checkbox"/\x3e\x3cspan\x3e\u5171\u4eab\u4eba\x3c/span\x3e\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3clabel class\x3d"item principal"\x3e\x3cinput class\x3d"j_relevance_mainline" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u9879\u76ee\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item participant"\x3e\x3cinput class\x3d"j_relevance_task" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u4efb\u52a1\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item share"\x3e\x3cinput class\x3d"j_relevance_document" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u6587\u6863\x3c/span\x3e\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3clabel class\x3d"item principal"\x3e\x3cinput class\x3d"j_relevance_customer" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u5ba2\u6237\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item participant"\x3e\x3cinput class\x3d"j_relevance_workflow" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u5ba1\u6279\x3c/span\x3e\x3c/label\x3e\x3clabel class\x3d"item share"\x3e\x3cinput class\x3d"j_relevance_calendar" type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u5173\u8054\u65e5\u7a0b\x3c/span\x3e\x3c/label\x3e\x3c/li\x3e\x3c/ul\x3e\x3cspan class\x3d"notes"\x3e \u9ed8\u8ba4\u590d\u5236\u539f\u4efb\u52a1\u7684\u540d\u79f0\uff0c\u63cf\u8ff0\uff0c\u7d27\u6025\u7a0b\u5ea6\uff0c\u6807\u7b7e\u53ca\u5173\u8054\u5173\u7cfb\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"task.taskform":'\x3cdiv id\x3d"taskform"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active"  data-target\x3d"form_set"\x3e\x3ca\x3e\x3ci class\x3d"icon-layers glyphicon"\x3e\x3c/i\x3e\u81ea\u5b9a\u4e49\u5b57\u6bb5\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"  data-target\x3d"form_manager"\x3e\x3ca\x3e\x3ci class\x3d"icon-tasks glyphicon"\x3e\x3c/i\x3e\u81ea\u5b9a\u4e49\u5b57\u6bb5\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"form_set" class\x3d"js_forms"\x3e\x3cdiv class\x3d"layout-hastips j_center"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"swicth-set-list card"\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"fr"\x3e\x3ca class\x3d"btn btn-sm w-60 btn-success fr j_set_form"\x3e\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3cspan\x3e\u81ea\u5b9a\u4e49\u5b57\u6bb5\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell message-sidebar tray-tips"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u70b9\u51fb\u201c\u8bbe\u7f6e\u201d\u6309\u94ae\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u4efb\u52a1\u8be6\u60c5\u4e2d\u7684\u81ea\u5b9a\u4e49\u5b57\u6bb5\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_forms eform-stat-content hide" id\x3d"form_manager"\x3e\x3cdiv class\x3d"toolkit toolkit-lg toolkit-bar clearfix"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active" data-target\x3d"form_data"\x3e\x3ca id\x3d\'data-stat\'\x3e\x3ci class\x3d"icon-th"\x3e\x3c/i\x3e\u6570\u636e\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab" data-target\x3d"form_stat"\x3e\x3ca id\x3d"field-stat"\x3e\x3ci class\x3d"icon-chart-pie"\x3e\x3c/i\x3e\u6570\u636e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab" data-target\x3d"form_report"\x3e\x3ca id\x3d"report-stat"\x3e\x3ci class\x3d"icon-columns"\x3e\x3c/i\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d\'js_forms details hide\' id\x3d\'form_data\'\x3e\u6570\u636e\u5217\u8868\x3c/div\x3e\x3cdiv class\x3d\'js_forms details hide\' id\x3d\'form_stat\'\x3e\u6570\u636e\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d\'js_forms details hide\' id\x3d\'form_report\'\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"share.simpleshare":'\x3c% if(panel\x3d\x3d"participants"){%\x3e\x3cdiv id\x3d"participants-component"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-mans"\x3e\x3c/i\x3e\u53c2\u4e0e\u4eba\u5458:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"participants" class\x3d"entity-container" data-url\x3d"/share/{id}.json"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-participants" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editParticipant" class\x3d"control-btn entity-item-add acl-hide j_add_participants" title\x3d"\u6dfb\u52a0\u53c2\u4e0e\u4eba\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a"\x3e\x3ci title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3c% if(panel\x3d\x3d"share"){%\x3e\x3cdiv id\x3d"share-component"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-share"\x3e\x3c/i\x3e\u5171\u3000\u3000\u4eab:\x3c/div\x3e\x3cdiv  class\x3d"controls"\x3e\x3cdiv class\x3d"entity-simpleshare"\x3e\x3cdiv id\x3d"shareentrys" class\x3d"entity-container" data-url\x3d"/share/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"typeahead-wrapper hide"\x3e\x3cselect id\x3d"share-select" class\x3d"form-control control-input hide"\x3e\x3coption value\x3d"user"\x3e\u6307\u5b9a\u7528\u6237\x3c/option\x3e\x3coption value\x3d"department"\x3e\u90e8\u95e8\u5185\u5171\u4eab\x3c/option\x3e\x3coption value\x3d"secLevel"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sharetype-dept hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sharetype-user"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan id\x3d"editShare" class\x3d"control-btn entity-item-add j_add_shareentrys"\x3e\x3ci title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e',
"share.shareall":'\x3c% if(panel\x3d\x3d"participants"){%\x3e\x3cdiv id\x3d"participants-component"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-mans"\x3e\x3c/i\x3e\u53c2\u4e0e\u4eba\u5458:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"participants" class\x3d"entity-container" data-url\x3d"/share/{id}.json"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-participants" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"editParticipant" class\x3d"control-btn entity-item-add acl-hide j_add_participants" title\x3d"\u6dfb\u52a0\u53c2\u4e0e\u4eba\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a"\x3e\x3ci title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3c% if(panel\x3d\x3d"share"){%\x3e\x3cdiv id\x3d"share-component"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-share"\x3e\x3c/i\x3e\u5171\u3000\u3000\u4eab:\x3c/div\x3e\x3cdiv  class\x3d"controls"\x3e\x3cdiv class\x3d"entity-simpleshare"\x3e\x3cdiv id\x3d"shareentrys" class\x3d"entity-container" data-url\x3d"/share/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"typeahead-wrapper hide"\x3e\x3cselect id\x3d"share-select" class\x3d"form-control"\x3e\x3coption value\x3d"user"\x3e\u7528\u6237\x3c/option\x3e\x3coption value\x3d"department"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption value\x3d"group"\x3e\u7fa4\u7ec4\x3c/option\x3e\x3coption value\x3d"all"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sharetype-group hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"group" placeholder\x3d"\u8f93\u5165\u7fa4\u7ec4"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sharetype-dept hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sharetype-user"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan id\x3d"editShare" class\x3d"control-btn entity-item-add j_add_shareentrys"\x3e\x3ci title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e',
"report.reportpage":'\x3cdiv class\x3d"module-view"\x3e\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-stat"\x3e\x3c/i\x3e\u62a5\u8868\u7edf\u8ba1\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"j_taskstatistics"\x3e\x3ca href\x3d"/report/taskstatistics" class\x3d"link-item router"\x3e\u4efb\u52a1\u7edf\u8ba1\u62a5\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_task"\x3e\x3ca href\x3d"/report/task" class\x3d"link-item router"\x3e\u4efb\u52a1\u5b8c\u6210\u60c5\u51b5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_flow"\x3e\x3ca href\x3d"/report/flow" class\x3d"link-item router"\x3e\u5ba1\u6279\u7533\u8bf7\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_flowstat"\x3e\x3ca href\x3d"/report/flowstat" class\x3d"link-item router"\x3e\u5ba1\u6279\u7efc\u5408\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_timecard"\x3e\x3ca href\x3d"/report/timecard" class\x3d"link-item router"\x3e\u8003\u52e4\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_log"\x3e\x3ca href\x3d"/report/logs" class\x3d"link-item router"\x3e\u767b\u5f55\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_blog"\x3e\x3ca href\x3d"/report/blog" class\x3d"link-item router"\x3e\u65e5\u62a5\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_workhour hide"\x3e\x3ca href\x3d"/report/workhour" class\x3d"link-item router"\x3e\u5de5\u4f5c\u65f6\u957f\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3c% if(multicolum){ %\x3e\x3cdiv class\x3d"main main-narrow"\x3e\x3cdiv class\x3d"statistic-title"\x3e\u767b\u5f55\u65e5\u5fd7\x3c/div\x3e\x3cdiv class\x3d"card mh-20 pt-50 clearfix"\x3e\x3cdiv class\x3d"col-7"\x3e\x3cdiv id\x3d"center-pane"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"col-5 col-fix"\x3e\x3cdiv id\x3d"right-pane"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c% }else{%\x3e\x3cdiv class\x3d"main main-narrow" id\x3d"j_reportcenter"\x3e\x3c/div\x3e\x3c%}%\x3e\x3c/div\x3e',
"log.report":'\x3cdiv class\x3d"filter loginreport-filter"\x3e\x3cspan class\x3d"myfollow"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u6211\u5173\u6ce8\u7684\x3c/span\x3e\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"mySubordinate"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u6211\u4e0b\u5c5e\u7684\x3c/span\x3e\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"report-wrap" class\x3d"scrollwrapper mt-10" marginbottom\x3d"10"\x3e\x3ctable id\x3d"login-table" class\x3d"table stat-table table-bordered nomg"\x3e\x3ccolgroup\x3e\x3ccol width\x3d"70px" /\x3e\x3ccol /\x3e\x3ccol /\x3e\x3ccol /\x3e\x3ccol width\x3d"200px" /\x3e\x3ccol width\x3d"70px" /\x3e\x3c/colgroup\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e\u59d3\u540d\x3c/th\x3e\x3cth\x3e\u672c\u6708\x3c/th\x3e\x3cth\x3e\u672c\u5468\x3c/th\x3e\x3cth\x3e\u4eca\u5929\x3c/th\x3e\x3cth\x3e\u6700\u540e\u767b\u5f55\u65f6\u95f4\x3c/th\x3e\x3cth\x3e\u660e\u7ec6\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3ctr id\x3d"loginlog-tr-clone"\x3e\x3ctd class\x3d"login-user"\x3e\u738b\u5bb6\u714c\x3c/td\x3e\x3ctd class\x3d"month-count"\x3e1\x3c/td\x3e\x3ctd class\x3d"week-count"\x3e1\x3c/td\x3e\x3ctd class\x3d"day-count"\x3e1\x3c/td\x3e\x3ctd class\x3d"last-login"\x3e2013-8-1 14:34:40\x3c/td\x3e\x3ctd class\x3d"login-detail"\x3e\x3ca\x3e\u660e\u7ec6\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/div\x3e',
"log.detail":'\x3cdiv class\x3d"scrollwrapper mt-10" id\x3d"logdetail" marginbottom\x3d"20"\x3e\x3ctable id\x3d"login-table" class\x3d"table stat-table table-bordered"\x3e\x3ccolgroup\x3e\x3ccol width\x3d"100px" /\x3e\x3ccol /\x3e\x3c/colgroup\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e\u59d3\u540d\x3c/th\x3e\x3cth\x3e\u767b\u5f55\u65f6\u95f4\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\x3ci class\x3d"icon-step-backward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\x3ci class\x3d"icon-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
"report.calendar":'\x3cdiv class\x3d"datepicker"\x3e\x3cdiv class\x3d"datepicker-days"\x3e\x3ctable class\x3d"table-condensed table-full"\x3e\x3cthead\x3e\x3ctr class\x3d"head-opt"\x3e\x3cth class\x3d"prev"\x3e\x3ci class\x3d"icon-arrow-left"/\x3e\x3c/th\x3e\x3cth colspan\x3d"5" class\x3d"datepicker-switch"\x3e\x3cspan class\x3d"switch-month"\x3e\x3c/span\x3e\x3cspan class\x3d"switch-year"\x3e\x3c/span\x3e\x3c/th\x3e\x3cth class\x3d"next"\x3e\x3ci class\x3d"icon-arrow-right"/\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ctfoot\x3e\x3ctr\x3e\x3ctd colspan\x3d"7" class\x3d"foot-buttons"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tfoot\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-months"\x3e\x3ctable class\x3d"table-condensed table-full"\x3e\x3cthead\x3e\x3ctr class\x3d"head-opt"\x3e\x3cth class\x3d"prev"\x3e\x3ci class\x3d"icon-arrow-left"/\x3e\x3c/th\x3e\x3cth colspan\x3d"5" class\x3d"datepicker-switch"\x3e\x3c/th\x3e\x3cth class\x3d"next"\x3e\x3ci class\x3d"icon-arrow-right"/\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d"7"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3ctfoot\x3e\x3ctr\x3e\x3ctd colspan\x3d"7" class\x3d"foot-buttons"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tfoot\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datepicker-years"\x3e\x3ctable class\x3d"table-condensed table-full"\x3e\x3cthead\x3e\x3ctr class\x3d"head-opt"\x3e\x3cth class\x3d"prev"\x3e\x3ci class\x3d"icon-arrow-left"/\x3e\x3c/th\x3e\x3cth colspan\x3d"5" class\x3d"datepicker-switch"\x3e\x3c/th\x3e\x3cth class\x3d"next"\x3e\x3ci class\x3d"icon-arrow-right"/\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d"7"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3ctfoot\x3e\x3ctr\x3e\x3ctd colspan\x3d"7" class\x3d"foot-buttons"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tfoot\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e',
"report.timecard":'\x3cdiv class\x3d"statistic-title"\x3e\u8003\u52e4\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d"attendance-main card mh-20"\x3e\x3cdiv class\x3d"attendance-left"\x3e\x3cdiv id\x3d"report-left" class\x3d"stat-box scrollwrapper"\x3e\x3cdiv class\x3d"e-caption fs-14 bg-f1 bw-B1 b-light p-10"\x3e\u8bbe\u5b9a\u4e0a\u4e0b\u73ed\u65f6\u95f4\u67e5\u8be2\x3c/div\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"mb-5"\x3e\x3clabel\x3e\u4e0a\u73ed\u65f6\u95f4\uff1a\x3c/label\x3e\x3cinput id\x3d"workTime1" name\x3d"workTime1" type\x3d"text" class\x3d"form-control datetimepicker w-150" format\x3d"hh:ii" minview\x3d"day" startView\x3d"day" maxView\x3d"day" value\x3d"09:00" readonly\x3d"readonly" /\x3e\x3c/div\x3e\x3cdiv\x3e\x3clabel\x3e\u4e0b\u73ed\u65f6\u95f4\uff1a\x3c/label\x3e\x3cinput id\x3d"workTime2" name\x3d"workTime2" type\x3d"text" class\x3d"form-control datetimepicker w-150" format\x3d"hh:ii" minview\x3d"day" startView\x3d"day" maxView\x3d"day" value\x3d"18:00" readonly\x3d"readonly"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"e-caption fs-14 bg-f1 bw-1 b-light bw-R0 bw-L0 p-10"\x3e\u9009\u62e9\u65e5\u671f\x3c/div\x3e\x3cdiv class\x3d"ph-10"\x3e\x3cdiv id\x3d"report-calendar" class\x3d"stat-calendar"\x3e\x3c/div\x3e\x3cdiv class\x3d"mt-20"\x3e\x3ca id\x3d"report-search" class\x3d"btn btn-sm btn-primary"\x3e\u67e5\u8be2\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"report-description"\x3e1\u3001\u65e0\u987b\u9884\u5148\u8bbe\u7f6e\u5de5\u4f5c\u65e5\u3001\u8282\u5047\u65e5\uff0c\u7edf\u8ba1\u65f6\u6839\u636e\u9700\u8981\u81ea\u7531\u8bbe\u5b9a\x3cbr/\x3e2\u3001\u5de5\u4f5c\u65f6\u95f4:\u4e0d\u9700\u8981\u6bcf\u6b21\u8bbe\u5b9a\uff0c\u7cfb\u7edf \u4f1a\u8bb0\u4f4f\u4e0a\u4e00\u6b21\u7684\u9009\u62e9\x3cbr/\x3e3\u3001\u5de5\u4f5c\u65e5:\u9ed8\u8ba4\u5468\u516d\u5468\u65e5\u4e3a\u975e\u5de5\u4f5c\u65e5\uff0c\u70b9\u51fb\u65e5\u5386\u53ef\u8bbe\u7f6e\u3001\u53d6\u6d88\u8bbe\u7f6e\u5de5\u4f5c\u65e5\x3cbr/\x3e4\u3001\u9ed8\u8ba4\u5f53\u524d\u6708\u4efd\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"timecard-right" class\x3d"scrollwrapper attendance-right clearfix j_report-view"\x3e\x3cdiv class\x3d"p-10 clearfix"\x3e\x3cdiv class\x3d"filter timecard-report fr"\x3e\x3cspan class\x3d"myself mr-5"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" checked/\x3e\x3cspan\x3e\u6211\u7684\x3c/span\x3e\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"myfollow mr-5"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan\x3e\u6211\u5173\u6ce8\u7684\x3c/span\x3e\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"mySubordinate mr-5"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u6211\u4e0b\u5c5e\u7684\x3c/span\x3e\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"department"\x3e\x3cselect class\x3d"static-department form-control"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-view nopd pr-10 mb-50"\x3e\x3ctable class\x3d"table stat-table table-bordered"\x3e\x3cthead\x3e\x3ctr class\x3d"ui-state-hover"\x3e\x3cth\x3e\u59d3\u540d\x3c/th\x3e\x3cth\x3e\u7b7e\u5230\u6b21\u6570\x3c/th\x3e\x3cth\x3e\u8fdf\u5230\u6b21\u6570\x3c/th\x3e\x3cth\x3e\u65e9\u9000\u6b21\u6570\x3c/th\x3e\x3cth\x3e\u672a\u7b7e\u5230\u6b21\u6570\x3c/th\x3e\x3cth\x3e\u672a\u7b7e\u9000\u6b21\u6570\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"report.timecard.detail":'\x3cdiv id\x3d"timecard-detail" class\x3d"timecarddetail-box modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca id\x3d"closebox" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u8003\u52e4\u660e\u7ec6\x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"timecarddetail-container" class\x3d"modal-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"report.workdays":'\x3cdiv class\x3d"center-title"\x3e\x3cdiv\x3e\x3ch5\x3e\x3ci class\x3d"icon-cog"\x3e\x3c/i\x3e\u5de5\u4f5c\u65e5\u8bbe\u5b9a\x3c/h5\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workdays-container" class\x3d"scrollwrapper"\x3e\x3cdiv id\x3d"workdays"\x3e\x3c/div\x3e\x3cdiv class\x3d"workdays-workingtime"\x3e\x3clabel\x3e\u4e0a\u73ed\u65f6\u95f4\uff1a\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"workingTimeBeginHour"\x3e\x3coption value\x3d"0"\x3e00\x3c/option\x3e\x3coption value\x3d"1"\x3e01\x3c/option\x3e\x3coption value\x3d"2"\x3e02\x3c/option\x3e\x3coption value\x3d"3"\x3e03\x3c/option\x3e\x3coption value\x3d"4"\x3e04\x3c/option\x3e\x3coption value\x3d"5"\x3e05\x3c/option\x3e\x3coption value\x3d"6"\x3e06\x3c/option\x3e\x3coption value\x3d"7"\x3e07\x3c/option\x3e\x3coption value\x3d"8"\x3e08\x3c/option\x3e\x3coption value\x3d"9"\x3e09\x3c/option\x3e\x3coption value\x3d"10"\x3e10\x3c/option\x3e\x3coption value\x3d"11"\x3e11\x3c/option\x3e\x3coption value\x3d"12"\x3e12\x3c/option\x3e\x3coption value\x3d"13"\x3e13\x3c/option\x3e\x3coption value\x3d"14"\x3e14\x3c/option\x3e\x3coption value\x3d"15"\x3e15\x3c/option\x3e\x3coption value\x3d"16"\x3e16\x3c/option\x3e\x3coption value\x3d"17"\x3e17\x3c/option\x3e\x3coption value\x3d"18"\x3e18\x3c/option\x3e\x3coption value\x3d"19"\x3e19\x3c/option\x3e\x3coption value\x3d"20"\x3e20\x3c/option\x3e\x3coption value\x3d"21"\x3e21\x3c/option\x3e\x3coption value\x3d"22"\x3e22\x3c/option\x3e\x3coption value\x3d"23"\x3e23\x3c/option\x3e\x3c/select\x3e\x3clabel\x3e:\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"workingTimeBeginMinute"\x3e\x3coption value\x3d"0"\x3e00\x3c/option\x3e\x3coption value\x3d"1"\x3e01\x3c/option\x3e\x3coption value\x3d"2"\x3e02\x3c/option\x3e\x3coption value\x3d"3"\x3e03\x3c/option\x3e\x3coption value\x3d"4"\x3e04\x3c/option\x3e\x3coption value\x3d"5"\x3e05\x3c/option\x3e\x3coption value\x3d"6"\x3e06\x3c/option\x3e\x3coption value\x3d"7"\x3e07\x3c/option\x3e\x3coption value\x3d"8"\x3e08\x3c/option\x3e\x3coption value\x3d"9"\x3e09\x3c/option\x3e\x3coption value\x3d"10"\x3e10\x3c/option\x3e\x3coption value\x3d"11"\x3e11\x3c/option\x3e\x3coption value\x3d"12"\x3e12\x3c/option\x3e\x3coption value\x3d"13"\x3e13\x3c/option\x3e\x3coption value\x3d"14"\x3e14\x3c/option\x3e\x3coption value\x3d"15"\x3e15\x3c/option\x3e\x3coption value\x3d"16"\x3e16\x3c/option\x3e\x3coption value\x3d"17"\x3e17\x3c/option\x3e\x3coption value\x3d"18"\x3e18\x3c/option\x3e\x3coption value\x3d"19"\x3e19\x3c/option\x3e\x3coption value\x3d"20"\x3e20\x3c/option\x3e\x3coption value\x3d"21"\x3e21\x3c/option\x3e\x3coption value\x3d"22"\x3e22\x3c/option\x3e\x3coption value\x3d"23"\x3e23\x3c/option\x3e\x3coption value\x3d"24"\x3e24\x3c/option\x3e\x3coption value\x3d"25"\x3e25\x3c/option\x3e\x3coption value\x3d"26"\x3e26\x3c/option\x3e\x3coption value\x3d"27"\x3e27\x3c/option\x3e\x3coption value\x3d"28"\x3e28\x3c/option\x3e\x3coption value\x3d"29"\x3e29\x3c/option\x3e\x3coption value\x3d"30"\x3e30\x3c/option\x3e\x3coption value\x3d"31"\x3e31\x3c/option\x3e\x3coption value\x3d"32"\x3e32\x3c/option\x3e\x3coption value\x3d"33"\x3e33\x3c/option\x3e\x3coption value\x3d"34"\x3e34\x3c/option\x3e\x3coption value\x3d"35"\x3e35\x3c/option\x3e\x3coption value\x3d"36"\x3e36\x3c/option\x3e\x3coption value\x3d"37"\x3e37\x3c/option\x3e\x3coption value\x3d"38"\x3e38\x3c/option\x3e\x3coption value\x3d"39"\x3e39\x3c/option\x3e\x3coption value\x3d"40"\x3e40\x3c/option\x3e\x3coption value\x3d"41"\x3e41\x3c/option\x3e\x3coption value\x3d"42"\x3e42\x3c/option\x3e\x3coption value\x3d"43"\x3e43\x3c/option\x3e\x3coption value\x3d"44"\x3e44\x3c/option\x3e\x3coption value\x3d"45"\x3e45\x3c/option\x3e\x3coption value\x3d"46"\x3e46\x3c/option\x3e\x3coption value\x3d"47"\x3e47\x3c/option\x3e\x3coption value\x3d"48"\x3e48\x3c/option\x3e\x3coption value\x3d"49"\x3e49\x3c/option\x3e\x3coption value\x3d"50"\x3e50\x3c/option\x3e\x3coption value\x3d"51"\x3e51\x3c/option\x3e\x3coption value\x3d"52"\x3e52\x3c/option\x3e\x3coption value\x3d"53"\x3e53\x3c/option\x3e\x3coption value\x3d"54"\x3e54\x3c/option\x3e\x3coption value\x3d"55"\x3e55\x3c/option\x3e\x3coption value\x3d"56"\x3e56\x3c/option\x3e\x3coption value\x3d"57"\x3e57\x3c/option\x3e\x3coption value\x3d"58"\x3e58\x3c/option\x3e\x3coption value\x3d"59"\x3e59\x3c/option\x3e\x3c/select\x3e\x3cbr/\x3e\x3clabel\x3e\u4e0b\u73ed\u65f6\u95f4\uff1a\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"workingTimeEndHour"\x3e\x3coption value\x3d"0"\x3e00\x3c/option\x3e\x3coption value\x3d"1"\x3e01\x3c/option\x3e\x3coption value\x3d"2"\x3e02\x3c/option\x3e\x3coption value\x3d"3"\x3e03\x3c/option\x3e\x3coption value\x3d"4"\x3e04\x3c/option\x3e\x3coption value\x3d"5"\x3e05\x3c/option\x3e\x3coption value\x3d"6"\x3e06\x3c/option\x3e\x3coption value\x3d"7"\x3e07\x3c/option\x3e\x3coption value\x3d"8"\x3e08\x3c/option\x3e\x3coption value\x3d"9"\x3e09\x3c/option\x3e\x3coption value\x3d"10"\x3e10\x3c/option\x3e\x3coption value\x3d"11"\x3e11\x3c/option\x3e\x3coption value\x3d"12"\x3e12\x3c/option\x3e\x3coption value\x3d"13"\x3e13\x3c/option\x3e\x3coption value\x3d"14"\x3e14\x3c/option\x3e\x3coption value\x3d"15"\x3e15\x3c/option\x3e\x3coption value\x3d"16"\x3e16\x3c/option\x3e\x3coption value\x3d"17"\x3e17\x3c/option\x3e\x3coption value\x3d"18"\x3e18\x3c/option\x3e\x3coption value\x3d"19"\x3e19\x3c/option\x3e\x3coption value\x3d"20"\x3e20\x3c/option\x3e\x3coption value\x3d"21"\x3e21\x3c/option\x3e\x3coption value\x3d"22"\x3e22\x3c/option\x3e\x3coption value\x3d"23"\x3e23\x3c/option\x3e\x3c/select\x3e\x3clabel\x3e:\x3c/label\x3e\x3cselect class\x3d"form-control" name\x3d"workingTimeEndMinute"\x3e\x3coption value\x3d"0"\x3e00\x3c/option\x3e\x3coption value\x3d"1"\x3e01\x3c/option\x3e\x3coption value\x3d"2"\x3e02\x3c/option\x3e\x3coption value\x3d"3"\x3e03\x3c/option\x3e\x3coption value\x3d"4"\x3e04\x3c/option\x3e\x3coption value\x3d"5"\x3e05\x3c/option\x3e\x3coption value\x3d"6"\x3e06\x3c/option\x3e\x3coption value\x3d"7"\x3e07\x3c/option\x3e\x3coption value\x3d"8"\x3e08\x3c/option\x3e\x3coption value\x3d"9"\x3e09\x3c/option\x3e\x3coption value\x3d"10"\x3e10\x3c/option\x3e\x3coption value\x3d"11"\x3e11\x3c/option\x3e\x3coption value\x3d"12"\x3e12\x3c/option\x3e\x3coption value\x3d"13"\x3e13\x3c/option\x3e\x3coption value\x3d"14"\x3e14\x3c/option\x3e\x3coption value\x3d"15"\x3e15\x3c/option\x3e\x3coption value\x3d"16"\x3e16\x3c/option\x3e\x3coption value\x3d"17"\x3e17\x3c/option\x3e\x3coption value\x3d"18"\x3e18\x3c/option\x3e\x3coption value\x3d"19"\x3e19\x3c/option\x3e\x3coption value\x3d"20"\x3e20\x3c/option\x3e\x3coption value\x3d"21"\x3e21\x3c/option\x3e\x3coption value\x3d"22"\x3e22\x3c/option\x3e\x3coption value\x3d"23"\x3e23\x3c/option\x3e\x3coption value\x3d"24"\x3e24\x3c/option\x3e\x3coption value\x3d"25"\x3e25\x3c/option\x3e\x3coption value\x3d"26"\x3e26\x3c/option\x3e\x3coption value\x3d"27"\x3e27\x3c/option\x3e\x3coption value\x3d"28"\x3e28\x3c/option\x3e\x3coption value\x3d"29"\x3e29\x3c/option\x3e\x3coption value\x3d"30"\x3e30\x3c/option\x3e\x3coption value\x3d"31"\x3e31\x3c/option\x3e\x3coption value\x3d"32"\x3e32\x3c/option\x3e\x3coption value\x3d"33"\x3e33\x3c/option\x3e\x3coption value\x3d"34"\x3e34\x3c/option\x3e\x3coption value\x3d"35"\x3e35\x3c/option\x3e\x3coption value\x3d"36"\x3e36\x3c/option\x3e\x3coption value\x3d"37"\x3e37\x3c/option\x3e\x3coption value\x3d"38"\x3e38\x3c/option\x3e\x3coption value\x3d"39"\x3e39\x3c/option\x3e\x3coption value\x3d"40"\x3e40\x3c/option\x3e\x3coption value\x3d"41"\x3e41\x3c/option\x3e\x3coption value\x3d"42"\x3e42\x3c/option\x3e\x3coption value\x3d"43"\x3e43\x3c/option\x3e\x3coption value\x3d"44"\x3e44\x3c/option\x3e\x3coption value\x3d"45"\x3e45\x3c/option\x3e\x3coption value\x3d"46"\x3e46\x3c/option\x3e\x3coption value\x3d"47"\x3e47\x3c/option\x3e\x3coption value\x3d"48"\x3e48\x3c/option\x3e\x3coption value\x3d"49"\x3e49\x3c/option\x3e\x3coption value\x3d"50"\x3e50\x3c/option\x3e\x3coption value\x3d"51"\x3e51\x3c/option\x3e\x3coption value\x3d"52"\x3e52\x3c/option\x3e\x3coption value\x3d"53"\x3e53\x3c/option\x3e\x3coption value\x3d"54"\x3e54\x3c/option\x3e\x3coption value\x3d"55"\x3e55\x3c/option\x3e\x3coption value\x3d"56"\x3e56\x3c/option\x3e\x3coption value\x3d"57"\x3e57\x3c/option\x3e\x3coption value\x3d"58"\x3e58\x3c/option\x3e\x3coption value\x3d"59"\x3e59\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"workdays-memo"\x3e\x3ch5\x3e\u8bf4\u660e\uff1a\x3c/h5\x3e\x3cp\x3ea. \u5468\u516d\u3001\u5468\u65e5\u9ed8\u8ba4\u4e3a\u975e\u5de5\u4f5c\u65e5\uff1b\x3cbr\x3eb. \u9f20\u6807\u79fb\u5230\u67d0\u65e5\u671f\u4e0a\u70b9\u51fb\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u5de5\u4f5c\u65e5\u6216\u8005\u975e\u5de5\u4f5c\u65e5\uff1b\x3cbr\x3ec. \u5de5\u4f5c\u65e5\u8bbe\u7f6e\u540e\u4e3b\u8981\u4f5c\u7528\u4e8e\u5de5\u4f5c\u65e5\u5fd7\u548c\u8003\u52e4\u62a5\u8868\uff0c\u975e\u5de5\u4f5c\u65e5\u9ed8\u8ba4\u4e0d\u7edf\u8ba1\u3002\x3cbr\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e',
"report.flow":'\x3cdiv id\x3d"flowreport" class\x3d"flowreport statsheet-view "\x3e\x3cdiv class\x3d"title"\x3e\x3cspan class\x3d"static-time"\x3e\x3c/span\x3e\u5ba1\u6279\u7533\u8bf7\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d"card p-10 mh-10"\x3e\x3cdiv class\x3d"static-choose"\x3e\x3cdiv\x3e\x3cselect class\x3d"form-control static-year"\x3e\x3coption value\x3d"2010"\x3e2010\u5e74\x3c/option\x3e\x3coption value\x3d"2011"\x3e2011\u5e74\x3c/option\x3e\x3coption value\x3d"2012"\x3e2012\u5e74\x3c/option\x3e\x3coption value\x3d"2013" selected\x3d"selected"\x3e2013\u5e74\x3c/option\x3e\x3coption value\x3d"2014"\x3e2014\u5e74\x3c/option\x3e\x3coption value\x3d"2015"\x3e2015\u5e74\x3c/option\x3e\x3coption value\x3d"2016"\x3e2016\u5e74\x3c/option\x3e\x3coption value\x3d"2017"\x3e2017\u5e74\x3c/option\x3e\x3coption value\x3d"2018"\x3e2018\u5e74\x3c/option\x3e\x3coption value\x3d"2019"\x3e2019\u5e74\x3c/option\x3e\x3coption value\x3d"2020"\x3e2020\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e1\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e2\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e3\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e4\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e5\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e6\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e7\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e8\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e9\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e10\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e11\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e12\u6708\x3c/div\x3e\x3cdiv class\x3d"filter"\x3e\x3cdiv class\x3d"myself"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" checked\x3e\x3cspan\x3e\u6211\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"myfollow"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan\x3e\u6211\u5173\u6ce8\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"mySubordinate"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u6211\u4e0b\u5c5e\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"report-data j_report-data stat-data-flow scrollwrapper"\x3e\x3cdiv class\x3d"j_flow_innerScr"\x3e\x3ctable class\x3d"table stat-table table-bordered table-widthauto nomg"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-foot mt-10"\x3e\u8bf4\u660e\uff1a\x3cspan\x3e\x3cimg alt\x3d"\u5df2\u521b\u5efa\u5ba1\u6279" src\x3d"images/teams/submited.png"\x3e\u5df2\u521b\u5efa\u5ba1\u6279\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-list" class\x3d"flowreport-list hide"\x3e\x3cul\x3e\x3c/ul\x3e\x3c/div\x3e\x3cli id\x3d"flow-li" class\x3d"workflow clearfix hide" data-id\x3d"" data-module\x3d"workflow" data-value\x3d""\x3e\x3cspan class\x3d"title" style\x3d"padding-left:10px;"\x3e\x3c/span\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"content"\x3e\x3c/span\x3e\x3cspan class\x3d"time"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"report.workhour":'\x3cdiv id\x3d"workhour" class\x3d"statistics-workhour statsheet-view"\x3e\x3cdiv class\x3d"title"\x3e\x3cspan class\x3d"static-time"\x3e\x3c/span\x3e\u5de5\u4f5c\u65f6\u957f\u7edf\u8ba1\u62a5\u8868\x3c/div\x3e\x3cdiv class\x3d"card mh-10 p-10 mb-10"\x3e\x3cdiv class\x3d"static-choose"\x3e\x3cdiv\x3e\x3cselect class\x3d"form-control static-year"\x3e\x3coption value\x3d"2010"\x3e2010\u5e74\x3c/option\x3e\x3coption value\x3d"2011"\x3e2011\u5e74\x3c/option\x3e\x3coption value\x3d"2012"\x3e2012\u5e74\x3c/option\x3e\x3coption value\x3d"2013" selected\x3d"selected"\x3e2013\u5e74\x3c/option\x3e\x3coption value\x3d"2014"\x3e2014\u5e74\x3c/option\x3e\x3coption value\x3d"2015"\x3e2015\u5e74\x3c/option\x3e\x3coption value\x3d"2016"\x3e2016\u5e74\x3c/option\x3e\x3coption value\x3d"2017"\x3e2017\u5e74\x3c/option\x3e\x3coption value\x3d"2018"\x3e2018\u5e74\x3c/option\x3e\x3coption value\x3d"2019"\x3e2019\u5e74\x3c/option\x3e\x3coption value\x3d"2020"\x3e2020\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e1\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e2\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e3\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e4\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e5\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e6\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e7\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e8\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e9\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e10\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e11\u6708\x3c/div\x3e\x3cdiv class\x3d"static-month"\x3e12\u6708\x3c/div\x3e\x3cdiv class\x3d"filter"\x3e\x3cdiv class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department va-m"\x3e\x3coption value\x3d"" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3ca class\x3d"btn btn-sm ml-5" id\x3d"export" \x3e\u5bfc\u51fa\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"report-data  j_report-data scrollwrapper" marginbottom\x3d"20"\x3e\x3ctable class\x3d"table stat-table table-bordered nomg"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentpage":'\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-doc"\x3e\x3c/i\x3e\u6587\u6863\x3c/div\x3e\x3cul class\x3d"sub-nav j_all_docMenu"\x3e\x3cli class\x3d"j_mine" data-title\x3d"\u7684\u6587\u6863\u5e93" data-type\x3d"mine" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/mine/"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u6587\u6863\u5e93\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_watched" data-type\x3d"watched" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/watched/" data-title\x3d"\u5173\u6ce8\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5173\u6ce8\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_subordinates" data-type\x3d"subordinates" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/subordinates/" data-title\x3d"\u4e0b\u5c5e\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u4e0b\u5c5e\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_all" data-type\x3d"all" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/all/" data-title\x3d"\u5168\u90e8\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_feedback" data-type\x3d"feedback" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/feedback/"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-chat-3" \x3e\x3c/i\x3e\u6587\u6863\u8bc4\u8bba\u53ca\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_recylce" id\x3d"document_j_recylce" data-type\x3d"recylce" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/recylce"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-trash" \x3e\x3c/i\x3e\u56de\u6536\u7ad9\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv id\x3d"j_mainscroll" class\x3d"main scrollwrapper"\x3e\x3cdiv class\x3d"main-hd document-header-toolbar"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn divider sn"\x3e\x3ci id\x3d"check-all" class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"mine-doc-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_mine sub-indent" data-type\x3d"mine" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/mine/" data-title\x3d"\u5168\u90e8"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent" data-type\x3d"incharge" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/incharge/" data-title\x3d"\u8d1f\u8d23\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8d1f\u8d23\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent" data-type\x3d"mineParticipants" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/mineParticipants" data-title\x3d"\u53c2\u4e0e\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u53c2\u4e0e\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent" data-type\x3d"created" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/created/" data-title\x3d"\u521b\u5efa\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u521b\u5efa\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_sharetome sub-indent" data-type\x3d"sharetome" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/sharetome/" data-title\x3d"\u5171\u4eab\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"documents-title" class\x3d"toolkit-item toolkit-title"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"document-order" class\x3d"btn btn-sm  dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"default"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"last_comment_time"\x3e\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"last_update_time"\x3e\u6587\u6863\u66f4\u65b0\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"create_time"\x3e\u6587\u6863\u521b\u5efa\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"    data-entity\x3d"manager"\x3e\u8d1f\u8d23\u4eba\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item" \x3e\x3cdiv id\x3d"document-filter" class\x3d"btn-group dropdown" data-toggle\x3d"#document-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm "\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"document-filter-dropdown" class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"document-keywords" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0"\x3e\x3ca id\x3d"document-html-create" class\x3d"btn btn-success btn-sm dropdown-toggle" data-module\x3d"document" data-id\x3d"0"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3ca id\x3d"document-create" class\x3d"btn btn-success btn-sm dropdown-toggle"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr hide" id\x3d"js_folder-create-li"\x3e\x3ca id\x3d"js_folder-create" class\x3d"btn btn-success btn-sm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u6587\u4ef6\u5939\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm  dropdown-toggle"\x3e\x3ci class\x3d"icon-th-list glyphicon"\x3e\x3c/i\x3e\u6279\u91cf \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"document-watchs"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"document-reminds remind-toggle"\x3e\u6279\u91cf\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"document-share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"document-move"\x3e\u6279\u91cf\u79fb\u52a8\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd-wrap"\x3e\x3cdiv class\x3d"main-bd j_sidebarPren sidebar-in"\x3e\x3cdiv class\x3d"table-tray scrollwrapper"\x3e\x3cdiv id\x3d"document-center" class\x3d"col-cell j_center tray-cell main-content"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-statistic" class\x3d"col-cell col-off j_rightView tray-cell main-sidebar"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentlist":'\x3cdiv class\x3d"j_mainscroll mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"main-hd document-header-toolbar"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn divider sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all-doc" id\x3d"j_check-all-document"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"mine-doc-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_mine sub-indent" data-type\x3d"mine" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/mine/" data-title\x3d"\u5168\u90e8"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent" data-type\x3d"incharge" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/incharge/" data-title\x3d"\u8d1f\u8d23\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8d1f\u8d23\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent" data-type\x3d"mineParticipants" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/mineParticipants" data-title\x3d"\u53c2\u4e0e\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u53c2\u4e0e\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent" data-type\x3d"created" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/created/" data-title\x3d"\u521b\u5efa\u7684\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u521b\u5efa\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_sharetome sub-indent" data-type\x3d"sharetome" data-href\x3d"/documents/\x3c%\x3duserId%\x3e/sharetome/" data-title\x3d"\u5171\u4eab\u6587\u6863"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"documents-title" class\x3d"toolkit-item toolkit-title"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"document-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli id\x3d"orderType-default"\x3e\x3ca class\x3d"orderType"   data-entity\x3d"default"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"last_comment_time"\x3e\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"last_update_time"\x3e\u6587\u6863\u66f4\u65b0\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"create_time"\x3e\u6587\u6863\u521b\u5efa\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"    data-entity\x3d"manager"\x3e\u8d1f\u8d23\u4eba\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item" \x3e\x3cdiv id\x3d"document-filter" class\x3d"btn-group dropdown" data-toggle\x3d"#document-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3cdiv id\x3d"document-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"document-keywords" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow mr-0 fr toolbar-document-select"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca id\x3d"document-create"\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"js_folder-create-li"\x3e\x3ca id\x3d"js_folder-create"\x3e\u65b0\u5efa\u6587\u4ef6\u5939\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca id\x3d"document-html-create" class\x3d"btn btn-success btn-sm dropdown-toggle document-html-create" data-module\x3d"document" data-id\x3d"0" style\x3d"border-right: 0px;"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-hd main-hd-fixed j_batchEl hide"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all-doc"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"document-watchs btn btn-sm"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"document-reminds remind-toggle btn btn-sm"\x3e\u6279\u91cf\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"document-share btn btn-sm" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"document-move btn btn-sm"\x3e\u6279\u91cf\u79fb\u52a8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow mr-0 fr toolbar-document-select"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca id\x3d"document-create"\x3e\u4e0a\u4f20\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"js_folder-create-li"\x3e\x3ca id\x3d"js_folder-create"\x3e\u65b0\u5efa\u6587\u4ef6\u5939\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca id\x3d"document-html-create" class\x3d"btn btn-success btn-sm dropdown-toggle document-html-create" data-module\x3d"document" data-id\x3d"0" style\x3d"border-right: 0px;"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd-wrap"\x3e\x3cdiv class\x3d"main-bd j_sidebarPren sidebar-in"\x3e\x3cdiv class\x3d"table-tray scrollwrapper"\x3e\x3cdiv id\x3d"document-center" class\x3d"col-cell j_center tray-cell main-content"\x3e\x3cdiv id\x3d"documentlist-container" class\x3d"ebox1 documentlist-container"\x3e\x3cdiv class\x3d"doc-file-path hide"\x3e\x3col class\x3d"breadcrumb " id\x3d"navbar" \x3e\x3cli id\x3d"folder-menu" data-type\x3d"all"\x3e\x3ca class\x3d"title"\x3e\u6240\u6709\u6587\u4ef6\x3c/a\x3e\x3c/li\x3e\x3c/ol\x3e\x3c/div\x3e\x3cdiv\x3e\x3cul id\x3d"folder-list" class\x3d"e-list e-list-merge"\x3e\x3c/ul\x3e\x3cul id\x3d"document-list" class\x3d"e-list document-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"documentlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-more j_moredocument"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-more" style\x3d"text-align: center;"\x3e\u5df2\u52a0\u8f7d\u6240\u6709\u6587\u6863\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"hide nodata-holder mt-50"\x3e\x3cdiv class\x3d"hide j_holder_mine"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8bd5\u8bd5\u521b\u5efa\u4e00\u4e2a\u6587\u6863\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca id\x3d"guide-document-create" class\x3d"btn btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3ca id\x3d"guide-document-html-create" class\x3d"btn btn-success" data-module\x3d"document" data-id\x3d"0" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u589e\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_subordinates"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u7684\u4e0b\u5c5e\u6682\u65f6\u6ca1\u6709\u6587\u6863\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8d76\u5feb\u7ed9\u60a8\u7684\u4e0b\u5c5e\u521b\u5efa\u6587\u6863\u5427~\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca id\x3d"guide-document-create" class\x3d"btn btn-success"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3ca id\x3d"guide-document-html-create" class\x3d"btn btn-success" data-module\x3d"document" data-id\x3d"0" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u589e\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_holder_watched"\x3e\x3ci class\x3d"ico collect"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u6682\u65f6\u8fd8\u6ca1\u6709\u5173\u6ce8\u7684\u6587\u6863\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u901a\u8fc7\u5173\u6ce8\u6536\u85cf\u7684\u6587\u6863\uff0c\u8ba9\u4f60\u81ea\u7531\u638c\u63e1\uff0c\u4e13\u95e8\u817e\u51fa\u65f6\u95f4\u9759\u4e0b\u5fc3\u6765\u719f\u8bfb\u5bf9\u81ea\u5df1\u6709\u7528\u7684\u77e5\u8bc6\u6587\u6863\u3001\u6216\u8005\u6307\u5bfc\u6587\u6848\u7f16\u5199\u5185\u5bb9\x3cbr/\x3e\u5982\u4f55\u5173\u6ce8\u6587\u6863\uff1f\x3cbr/\x3e\u5728\u6587\u6863\u8be6\u60c5\u9875\u9762\u6216\u6587\u6863\u5217\u8868\u4e2d\u5c31\u53ef\u4ee5\u5173\u6ce8\u6587\u6863\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"document-li" class\x3d"document router document-li"\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"doc-icon j_doctype"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title ellipsis filterSlip_js"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count hide-im"\x3e\x3ci class\x3d"icon-chat-3 mr-3"\x3e\x3c/i\x3e\x3cem\x3e0\x3c/em\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"shareout"\x3e\x3ci class\x3d"icon-share2"\x3e\x3c/i\x3e\u5206\u4eab\x3c/span\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share selector-toggle" data-entity\x3d"employee" data-multi\x3d"true" targetId\x3d""\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3cspan class\x3d"js_document-move hide"\x3e\x3ci class\x3d"icon-move"\x3e\x3c/i\x3e \u79fb\u52a8\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"folder-li" class\x3d"folder-li folder-private can-check"\x3e\x3cspan class\x3d"owner"\x3e\x3ci class\x3d"icon-libreoffice"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan id\x3d"js_folder-type" class\x3d"doc-icon"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3c/span\x3e\x3cinput class\x3d"name rename form-control hide" type\x3d"text" v-maxlength\x3d"20"/\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"js_folder-setting hide"\x3e\x3ci class\x3d"item-icon icon-cog"\x3e\x3c/i\x3e\u8bbe\u7f6e\x3c/span\x3e\x3cspan class\x3d"js_folder-modif hide"\x3e\x3ci class\x3d"icon-edit"\x3e\x3c/i\x3e\u4fee\u6539\x3c/span\x3e\x3cspan class\x3d"js_folder-move hide"\x3e\x3ci class\x3d"icon-move"\x3e\x3c/i\x3e \u79fb\u52a8\x3c/span\x3e\x3cspan class\x3d"js_folder-delete hide"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e \u5220\u9664\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"js_folder-company" class\x3d"js_folder-company folder-li" data-type\x3d"company" data-name\x3d"\u516c\u5171\u6587\u4ef6\u5939"\x3e\x3cspan class\x3d"owner"\x3e\x3ci class\x3d"icon-users"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"doc-icon company"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title name"\x3e\u516c\u5171\u6587\u4ef6\u5939\x3c/span\x3e\x3c/li\x3e\x3cli id\x3d"js_folder-attach" class\x3d"js_folder-attach folder-li" data-type\x3d"attachment" data-name\x3d"\u9644\u4ef6\u6587\u4ef6\u5939"\x3e\x3cspan class\x3d"owner"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"doc-icon attach"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title name name"\x3e\u9644\u4ef6\u6587\u4ef6\u5939\x3c/span\x3e\x3c/li\x3e\x3cli id\x3d"js_folder-share" class\x3d"js_folder-sharey folder-li" data-type\x3d"share" data-name\x3d"\u5171\u4eab\u6587\u4ef6\u5939"\x3e\x3cspan class\x3d"owner"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"doc-icon share"\x3e\x3ci\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u6587\u6863\x3c/span\x3e\x3c/li\x3e\x3cli id\x3d"folder-menu" class\x3d"folder-menu-clone"\x3e\x3ca class\x3d"title"\x3e\u666e\u901a\u6587\u4ef6\u5939\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-statistic" class\x3d"col-cell col-off j_rightView tray-cell main-sidebar"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentinfo":'\x3cdiv id\x3d"document-wrap" class\x3d"module-detail-view doc-detial-view" \x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-doc"\x3e\x3c/i\x3e\u6587\u6863\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u6ce8" id\x3d"document-watch" class\x3d"detailpage"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u50ac\u529e" id\x3d"btn-remind" class\x3d"remind-toggle detailpage" module\x3d"document" targetId\x3d""\x3e\x3ci class\x3d"icon-bell"\x3e\x3c/i\x3e\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle j_more_dropdown detailpage"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-cog"\x3e\x3c/i\x3e\u66f4\u591a\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli class\x3d"iconlabel detailpage btn-feedback"\x3e\x3ca\x3e\x3ci class\x3d"icon-edit"\x3e\x3c/i\x3e\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"acl-hide acl-w-hide acl-p-hide detailpage"\x3e\x3ca id\x3d"btn-delete"  data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"docFileObjDiv"\x3e\x3cdiv class\x3d"detail-summary" style\x3d"padding: 10px 0 5px 0;"\x3e\x3cdiv class\x3d"summary-avatar usercard-toggle" data-toggle\x3d"tooltip" data-placement\x3d"top" style\x3d"cursor: pointer;"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"summary-title"\x3e\x3ctextarea id\x3d"document-title" class\x3d"j_title acl-disabled smart-title" v-maxlength\x3d"100" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898..."\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block acl-w-container detailpage"\x3e\x3cdiv class\x3d"detail-infos"\x3e\x3cdl class\x3d"info-item clearfix" style\x3d"width: 40%;"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-man document-manager-label"\x3e\x3c/i\x3e\u8d1f\u8d23\u4eba:\x3c/dt\x3e\x3cdd\x3e\x3cdiv class\x3d"entity-container"\x3e\x3cdiv id\x3d"document-manager" class\x3d"entity-container" undeletable\x3d"true" data-url\x3d"/document/deleteManager/{id}"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-manager" type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" placeholder\x3d"\u8f93\u5165\u59d3\u540d"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add acl-hide" title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba"\x3e\x3ci title\x3d"\u4fee\u6539\u8d1f\u8d23\u4eba" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl class\x3d"info-item belongs clearfix" style\x3d"width:60%"\x3e\x3cdt\x3e\x3ci class\x3d"graph graph-16-folder"\x3e\x3c/i\x3e\u6587\u4ef6\u5939:\x3c/dt\x3e\x3cdd id\x3d"document-folder-path" class\x3d"ellipsis"\x3e\u65e0\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-container" class\x3d"scrollwrapper detail-content detailpage" marginbottom\x3d"20" style\x3d"margin-top: 10px;"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"hide" style\x3d"margin-bottom: 13px;"\x3e\x3cdiv id\x3d"document-info" class\x3d"form-horizontal entity-info document-info"\x3e\x3cdiv class\x3d"detail-block detail-desc-wrap hide" id\x3d"summary_blank" style\x3d"margin-bottom:13px"\x3e\x3cspan class\x3d"graph graph-16-word"\x3e\x3c/span\x3e\x3cdiv class\x3d"desc-input"\x3e\x3ctextarea placeholder\x3d"\u6dfb\u52a0\u63cf\u8ff0" class\x3d"acl-disabled" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"doc_ueditor_wrap" class\x3d"doc-editor-wrap"\x3e\x3ctextarea id\x3d"document-summary" class\x3d"acl-disabled filterSlip_js hide" placeholder\x3d""\x3e\x3c/textarea\x3e\x3cdiv id\x3d"simulateToolbar" class\x3d"doc-editor-toolbar"\x3e\x3cdiv class\x3d"edui-toolbar-action"\x3e\x3ca id\x3d"document-version" class\x3d"acl-hide btn btn-xs btn-info"\x3e\u5386\u53f2\u7248\u672c\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"edui-toolbar-action"\x3e\x3ca id\x3d"ueditorEdit" class\x3d"acl-hide btn btn-xs btn-success"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/div\x3e\x3ca class\x3d"tit" id\x3d"doc_divSlide"\x3e\x3cstrong\x3e\u6b63\u6587\u5185\u5bb9\x3c/strong\x3e \x3ci class\x3d"icon-angle-down ml-5"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3ciframe id\x3d"document-summary-iframe" class\x3d"doc-editor-frame" width\x3d"100%" height\x3d"100%" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3cdiv class\x3d"detailpage"\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands" style\x3d"outline:none;"\x3e\x3cdiv class\x3d"control-group" id\x3d"document-attachment" icon\x3d"#i-attach"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-participants" class\x3d"control-group acl-w-container hide" icon\x3d"#i-participants"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-tag" class\x3d"control-group hide" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-ctag" class\x3d"control-group hide" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-share" class\x3d"control-group hide" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-relevance" class\x3d"control-group hide" icon\x3d"#i-relevance"\x3e\x3c/div\x3e\x3cdiv id\x3d"document-mainline" class\x3d"control-group entity-relevance hide" icon\x3d"#i-mainline"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"document-relevance-task" icon\x3d"#i-relevance-task"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"document-relevance-doc" icon\x3d"#i-relevance-doc"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"document-relevance-crm" icon\x3d"#i-relevance-crm"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"document-relevance-flow" icon\x3d"#i-relevance-flow"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance j_task_detail hide" id\x3d"document-relevance-agenda" icon\x3d"#i-relevance-agenda"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles"\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-participants" for\x3d"#document-participants"\x3e\x3ci class\x3d"graph graph-16 graph-16-mans"\x3e\x3c/i\x3e\u6dfb\u52a0\u53c2\u4e0e\u4eba\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-ctag" title\x3d"\u6dfb\u52a0\u516c\u5171\u6807\u7b7e" for\x3d"#document-ctag"\x3e\x3ci class\x3d"graph graph-16 graph-16-commonlabel"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-tag" title\x3d"\u6dfb\u52a0\u6211\u7684\u6807\u7b7e" for\x3d"#document-tag"\x3e\x3ci class\x3d"graph graph-16 graph-16-label"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-share" title\x3d"\u6dfb\u52a0\u5171\u4eab" for\x3d"#document-share"\x3e\x3ci class\x3d"graph graph-16 graph-16-share"\x3e\x3c/i\x3e\u5171\u4eab\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-mainline" title\x3d"" for\x3d"#document-mainline"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-relevance-task" for\x3d"#document-relevance-task"\x3e\x3ci class\x3d"graph graph-16 graph-16-task"\x3e\x3c/i\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-relevance-doc" for\x3d"#document-relevance-doc"\x3e\x3ci class\x3d"graph graph-16 graph-16-document"\x3e\x3c/i\x3e\u5173\u8054\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-relevance-crm" for\x3d"#document-relevance-crm"\x3e\x3ci class\x3d"graph graph-16 graph-16-customer"\x3e\x3c/i\x3e\u5173\u8054\u5ba2\u6237\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-relevance-flow" for\x3d"#document-relevance-flow"\x3e\x3ci class\x3d"graph graph-16 graph-16-workflow"\x3e\x3c/i\x3e\u5173\u8054\u5ba1\u6279\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item acl-hide"\x3e\x3ca id\x3d"i-relevance-agenda" for\x3d"#document-relevance-agenda"\x3e\x3ci class\x3d"graph graph-16 graph-16-calendar"\x3e\x3c/i\x3e\u5173\u8054\u65e5\u7a0b\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentnew":'\x3cdiv class\x3d"modal modal-grey documentnew fade" id\x3d"documentnew"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"module-detail-view p-20" id\x3d"documentnew-info"\x3e\x3cdiv class\x3d"detail-block entity-info nomg"\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-attach"\x3e\x3c/i\x3e\u9644\u3000\u3000\u4ef6:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"documentFiles" class\x3d"btn btn-sm "\x3e\x3ci class\x3d"glyphicon icon-paperclip"\x3e\x3c/i\x3e\u8bf7\u9009\u62e9\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"documentnew-attachments" class\x3d"clearfix"\x3e\x3cdiv class\x3d"entity-container" data-url\x3d"/base/upload/{id}"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"documentnew-share" class\x3d"control-group share entity-info"\x3e\x3cdiv id\x3d"share-component"\x3e\x3cdiv id\x3d"editShare" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3ca id\x3d"btn-save" class\x3d"btn btn-sm btn-primary"\x3e\u786e\u5b9a\x3c/a\x3e \x3ca class\x3d"btn btn-sm" id\x3d"btn-cancle" data-dismiss\x3d"modal"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentmove":'\x3cdiv id\x3d"js_moveview" class\x3d"modal modal-grey modal-foldertree fade"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u79fb\u52a8\u5230\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"folder-tree bg-white"\x3e\x3cul class\x3d"treeview"\x3e\x3cli\x3e\x3cdiv class\x3d"treeview-node treeview-root treeview-node-on active" data-type\x3d"all"\x3e\x3cem class\x3d"graph graph-status"\x3e\x3c/em\x3e\x3cdfn class\x3d"graph graph-folder"\x3e\x3c/dfn\x3e\x3cspan class\x3d"tree-txt ellipsis"\x3e\u5168\u90e8\u6587\u4ef6\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"treeview"\x3e\x3cli\x3e\x3cdiv class\x3d"treeview-node" style\x3d"padding-left:15px" data-type\x3d"company"\x3e\x3cem class\x3d"graph graph-status"\x3e\x3c/em\x3e\x3cdfn class\x3d"graph graph-folder"\x3e\x3c/dfn\x3e\x3cspan class\x3d"tree-txt ellipsis"\x3e\u516c\u5171\u6587\u4ef6\u5939\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"treeview"\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ta-r"\x3e\x3ca class\x3d"btn btn-sm btn-primary" id\x3d"btn-save" data-dismiss\x3d"modal"\x3e\u786e\u5b9a\x3c/a\x3e\x3ca class\x3d"btn btn-sm" id\x3d"btn-cancle" data-dismiss\x3d"modal"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"js_folder-item-clone"\x3e\x3cdiv class\x3d"treeview-node"\x3e\x3cem class\x3d"graph graph-status"\x3e\x3c/em\x3e\x3cdfn class\x3d"graph graph-folder"\x3e\x3c/dfn\x3e\x3cspan class\x3d"tree-txt ellipsis title"\x3e\u6587\u4ef6\u5939\u540d\u79f0\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"treeview"\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentstatistic":'\x3cdiv class\x3d"j_sidebarCtrl graph siderbar-ctrl-btn on" data-open\x3d"true"\x3e\x3c/div\x3e\x3cdiv class\x3d"main-sidebar-bd" id\x3d"document-right"\x3e\x3cdiv class\x3d"sbox"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 id\x3d"documentTitle"class\x3d"sbox-title"\x3e\u6587\u6863\u7edf\u8ba1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-hd" style\x3d"padding: 20px 0;  border-bottom: 0px;"\x3e\x3cdiv class\x3d"workflowchart-wrap h-280" id\x3d"mydocument"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox hide-im" id\x3d"document-subordinates"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 class\x3d"sbox-title"\x3e\u4e0b\u5c5e\u6587\u6863\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-bd"\x3e\x3cdiv class\x3d"side-statlist"\x3e\x3cul id\x3d"empList"\x3e\x3cli class\x3d"hide-im j_noresult no-result nomg nobd"\x3e\u6ca1\u6709\u4e0b\u5c5e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d" hide list-more"\x3e\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_eitem" \x3e\x3cli\x3e\x3cspan class\x3d"fr j_count"\x3e\x3c/span\x3e\x3cimg src\x3d"images/avatar.png" class\x3d"avatar usercard-toggle" style\x3d"width: 20px;height: 20px;cursor: pointer;"/\x3e\x3cspan class\x3d"j_name usercard-toggle" style\x3d"cursor: pointer;"\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e',
"document.documentversionlist":'\x3cdiv class\x3d"modal documentVersionModal doc-modal fade" id\x3d"documentVersionModal"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3ch5 class\x3d"modal-title"\x3e\u7248\u672c\u6d4f\u89c8\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body entity-info" id\x3d"documentnew-info" style\x3d"max-height: 700px;overflow: hidden;"\x3e\x3cdiv class\x3d"doc-tool mb-20"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u63cf\u8ff0\uff1a\x3c/span\x3e\x3cinput id\x3d"describeSearch" class\x3d"form-control describe" type\x3d"text" name\x3d"describeSearch"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"createBeginTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e- \x3cinput id\x3d"createEndTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item last"\x3e\x3ca id\x3d"search" class\x3d"btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-search glyphicon"\x3e\x3c/i\x3e\u67e5\u8be2\x3c/a\x3e\x3ca id\x3d"contrast" class\x3d"btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-reply glyphicon"\x3e\x3c/i\x3e\u7248\u672c\u5bf9\u6bd4\x3c/a\x3e\x3c/li\x3e\x3cli  class\x3d"toolkit-item toolkit-item-nobr" id\x3d"creatorDiv"\x3e\x3cspan class\x3d"fl"\x3e\u521b\u5efa\u8005\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"creator" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ca class\x3d"icon-plus"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"content" class\x3d"bg-white doc-content"\x3e\x3cul class\x3d"trash-bin-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item lp" style\x3d"width:35%"\x3e\x3csapn class\x3d"ck"\x3e\x3cinput class\x3d"j_DelAll hide" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"describe" style\x3d"margin-left: 40px;"\x3e\u63cf\u8ff0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item createUser" style\x3d"width:15%"\x3e\u521b\u5efa\u8005\x3c/div\x3e\x3cdiv class\x3d"item createTime" style\x3d"width:20%"\x3e\u521b\u5efa\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item versionNum" style\x3d"width:10%"\x3e\u7248\u672c \x3c/div\x3e\x3cdiv class\x3d"item handle" style\x3d"width:20%"\x3e\u64cd\u4f5c \x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"j_versionListScr scrollwrapper" marginbottom\x3d"10" style\x3d"height: 200px;max-height: 500px;"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_versionlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cli class\x3d"list-more hide"\x3e\x3ca id\x3d"more_data"\x3e\u66f4\u591a\x26gt;\x26gt;\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"contentClone" class\x3d"hide"\x3e\x3cli class\x3d"j_trash"\x3e\x3cdiv class\x3d"item lp" style\x3d"width:35%"\x3e\x3csapn class\x3d"ck"\x3e\x3cinput class\x3d"j_Del" type\x3d"checkbox"\x3e\x3c/sapn\x3e\x3cdiv class\x3d"ellipsis describe" style\x3d"margin-left: 40px;"\x3e\u65e0\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item createUser" style\x3d"width:15%"\x3e\u521b\u5efa\u8005\x3c/div\x3e\x3cdiv class\x3d"item createTime" style\x3d"width:20%"\x3e\u521b\u5efa\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item versionNum" style\x3d"width:10%"\x3e\u7248\u672c \x3c/div\x3e\x3cdiv class\x3d"item opt j_tdel" style\x3d"width:20%"\x3e\x3cimg src\x3d"images/loading_small.gif" class\x3d"j_loadin fr opt-loading hide"\x3e \x3ca class\x3d"detail btn btn-xs btn-info"\x3e\u67e5\u770b\x3c/a\x3e \x3ca class\x3d"restore btn btn-xs btn-info"\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentversioninfo":'\x3cdiv id\x3d"documentversion-modal" class\x3d"entitybox modal fade documentversioninfo-backdrop" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" style\x3d"display: block;"\x3e\x3cdiv class\x3d"modal-dialog documentversion-modal-dialog" style\x3d"z-index: 2001"\x3e\x3cdiv class\x3d"modal-content version-content-div bg-white"\x3e\x3cdiv id\x3d"entitybox-container" class\x3d"modal-body"\x3e\x3cdiv id\x3d"document-version-info" class\x3d"document-version-info module-detail-view" \x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"margin-left: 10px;"\x3e\u7248\u672c\u53f7:\x3cspan class\x3d"document-version-num"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u8005:\x3cspan class\x3d"document-version-creator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u65f6\u95f4:\x3cspan class\x3d"document-version-createTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli class\x3d""\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"closebox" class\x3d"detail-slide-close j_btn_documentversion_close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"float: right;margin-right: 10px;"\x3e\x3ca title\x3d"\u8fd8\u539f" id\x3d"btn-restore" class\x3d"fr restore btn btn-xs btn-success" \x3e\x3ci class\x3d"icon-reply glyphicon"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-container" marginbottom\x3d"78" class\x3d"detail-content document-container bg-white p-10" style\x3d"height:450px;" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"document-version-info-div"\x3e\x3cdiv id\x3d"document-info" class\x3d"form-horizontal entity-info document-info"\x3e\x3ciframe id\x3d"document-version-summary" class\x3d"document-version-summary" width\x3d"100%" height\x3d"100%" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border: 0px"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentversioncontrast":'\x3cdiv id\x3d"documentversion-modal" class\x3d"entitybox modal fade documentversioninfo-backdrop" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" style\x3d"display: block;" \x3e\x3cdiv class\x3d"modal-dialog documentversion-modal-dialog documentversion-modal-compare"\x3e\x3cdiv class\x3d"modal-content version-content-div bg-white"\x3e\x3cdiv id\x3d"entitybox-container" class\x3d"modal-body"\x3e\x3cdiv id\x3d"document-version-info" class\x3d"document-version-info module-detail-view" \x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"margin-left: 10px;"\x3e\u7248\u672c\u53f7:\x3cspan class\x3d"document-version-num"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u8005:\x3cspan class\x3d"document-version-creator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u65f6\u95f4:\x3cspan class\x3d"document-version-createTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"float: right;margin-right: 10px;"\x3e\x3ca title\x3d"\u8fd8\u539f" id\x3d"btn-restore" class\x3d"fr restore btn btn-xs btn-success" \x3e\x3ci class\x3d"icon-reply glyphicon"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-container" marginbottom\x3d"78" class\x3d"detail-content document-container bg-white p-10" style\x3d"height:450px;" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"document-version-info-div"\x3e\x3cdiv id\x3d"document-info" class\x3d"form-horizontal entity-info document-info"\x3e\x3ciframe id\x3d"document-version-summary" class\x3d"document-version-summary" width\x3d"100%" height\x3d"100%" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border: 0px"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer bg-white"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-content version-content-div2 bg-white"\x3e\x3cdiv id\x3d"entitybox-container" class\x3d"modal-body"\x3e\x3cdiv id\x3d"document-version-info" class\x3d"document-version-info module-detail-view" \x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"margin-left: 10px;"\x3e\u7248\u672c\u53f7:\x3cspan class\x3d"document-version-num"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u8005:\x3cspan class\x3d"document-version-creator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo"\x3e\u521b\u5efa\u65f6\u95f4:\x3cspan class\x3d"document-version-createTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli class\x3d""\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"closebox" class\x3d"detail-slide-close j_btn_documentversion_close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-header-versioninfo" style\x3d"float: right;margin-right: 10px;"\x3e\x3ca title\x3d"\u8fd8\u539f" id\x3d"btn-restore" class\x3d"fr restore btn btn-xs btn-success" \x3e\x3ci class\x3d"icon-reply glyphicon"\x3e\x3c/i\x3e\u8fd8\u539f\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-container"  marginbottom\x3d"78" class\x3d"detail-content document-container bg-white p-10" style\x3d"height:450px;" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"document-version-info-div"\x3e\x3cdiv id\x3d"document-info" class\x3d"form-horizontal entity-info document-info"\x3e\x3ciframe id\x3d"document-version-summary" class\x3d"document-version-summary" width\x3d"100%" height\x3d"100%" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border: 0px"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer bg-white"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"document.documentsetting":'\x3cdiv class\x3d"modal documentsetting fade" id\x3d"documentsetting"\x3e\x3cdiv class\x3d"modal-dialog docshare-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header" style\x3d"min-height: 45px;"\x3e\x3ca class\x3d"close" data-dismiss\x3d"modal"\x3e\u00d7\x3c/a\x3e\x3cul class\x3d"modal-title head-nav"\x3e\x3cli class\x3d"active document-setting-btn"  tab\x3d"1"\x3e\x3ca\x3e\u9ed8\u8ba4\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli  class\x3d"document-setting-btn" tab\x3d"2"\x3e\x3ca\x3e\u540c\u6b65\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"document-setting-tab1" class\x3d"document-setting-tab1"\x3e\x3cdiv class\x3d"modal-body entity-info pv-0" id\x3d"documentsetting-info"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clable class\x3d"control-label"\x3e\u5728\u6b64\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u6863\u5c06\u81ea\u52a8\u5171\u4eab\u7ed9:\x3c/lable\x3e\x3c/div\x3e\x3cdiv id\x3d"editShare" class\x3d"control-group" icon\x3d"#i-share" style\x3d"border-bottom: 0;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ph-35"\x3e\x3ca id\x3d"btn-save" class\x3d"btn btn-sm btn-success"\x3e\u4fdd\u5b58\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"document-setting-tab2" class\x3d"hide document-setting-tab2"\x3e\x3cdiv class\x3d"modal-body entity-info pv-0"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clable class\x3d"control-label"\x3e\u5c06\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u6863\u7684\u5171\u4eab\u6743\u9650\u5168\u90e8\u4fee\u6539\u4e3a:\x3c/lable\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv id\x3d"synShare" class\x3d"control-label" style\x3d"width: 550px;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"control-label" style\x3d"cursor: pointer;" id\x3d"saveToChildrenDiv"\x3e\x3cspan id\x3d"saveToChildren"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\u5305\u542b\u6240\u6709\u5b50\u76ee\u5f55\u53ca\u5176\u4e2d\u7684\u6587\u6863\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ph-35"\x3e\x3ca id\x3d"btn-save-syn" class\x3d"btn btn-sm btn-success"\x3e\u5f00\u59cb\u540c\u6b65\x3c/a\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workflow.workflowpage":'\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav j_aside-nav" data-nav\x3d"fold"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item router" href\x3d"/workflows/\x3c%\x3duserId%\x3e/todo"\x3e\x3ci class\x3d"item-icon graph-16-thin-flow"\x3e\x3c/i\x3e\u5ba1\u6279\x3c/div\x3e\x3cul class\x3d"sub-nav j_all_flowMenu hide"\x3e\x3cli class\x3d"acive j_todo router"  data-title\x3d"\u5f85\u529e\u5ba1\u6279" data-type\x3d"todo" href\x3d"/workflows/\x3c%\x3duserId%\x3e/todo" data-sub\x3d"#todo-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u5f85\u529e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_drafts router" data-title\x3d"\u8349\u7a3f\u5ba1\u6279" data-type\x3d"drafts" href\x3d"/workflows/\x3c%\x3duserId%\x3e/drafts"\x3e\x3ca class\x3d"link-item"\x3e\u8349\u7a3f\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_minecreate router" data-title\x3d"\u63d0\u4ea4\u7684\u5ba1\u6279" data-type\x3d"minecreate" href\x3d"/workflows/\x3c%\x3duserId%\x3e/minecreate" data-sub\x3d"#create-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u6211\u63d0\u4ea4\u7684\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_finshed router" data-title\x3d"\u5df2\u529e\u5ba1\u6279" data-type\x3d"finshed" href\x3d"/workflows/\x3c%\x3duserId%\x3e/finshed" data-sub\x3d"#finshed-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u5df2\u529e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_sharetome shareToMe router" data-title\x3d"\u5ba1\u6279" data-type\x3d"sharetome" href\x3d"/workflows/\x3c%\x3duserId%\x3e/sharetome" data-sub\x3d"#sharetome-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u5171\u4eab\u7ed9\u6211\u7684\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_watched router" data-title\x3d"\u5173\u6ce8\u7684\u5ba1\u6279" data-type\x3d"watched" href\x3d"/workflows/\x3c%\x3duserId%\x3e/watched" data-sub\x3d"#watched-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u6211\u5173\u6ce8\u7684\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_subordinates router" data-title\x3d"\u4e0b\u5c5e\u7684\u5f85\u529e\u5ba1\u6279" data-type\x3d"subordinates" href\x3d"/workflows/\x3c%\x3duserId%\x3e/subordinates"\x3e\x3ca class\x3d"link-item"\x3e\u4e0b\u5c5e\u7684\u5f85\u529e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_all router" data-title\x3d"\u5168\u90e8\u5ba1\u6279" data-type\x3d"all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/all" data-sub\x3d"#all-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\u5168\u90e8\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_feedbackflow j_mclick router" data-type\x3d"feedbackflow" href\x3d"/workflows/\x3c%\x3duserId%\x3e/feedbackflow"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-chat-3 " \x3e\x3c/i\x3e\u5ba1\u6279\u610f\u89c1\u53ca\u8bc4\u8bba \x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"link-item router" href\x3d"/workflows/\x3c%\x3duserId%\x3e/personal"\x3e\x3ci class\x3d"item-icon graph-16-thin-formstat"\x3e\x3c/i\x3e\u5ba1\u6279\u8868\u7ba1\u7406\x3c/div\x3e\x3cul class\x3d"sub-nav j_all_flowMenu hide"\x3e\x3cli class\x3d"router j_personal" href\x3d"/workflows/\x3c%\x3duserId%\x3e/personal"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u6211\u7684\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c% if(isAdmin) { %\x3e\x3cli class\x3d"router j_company" href\x3d"/workflows/\x3c%\x3duserId%\x3e/company"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_employee" href\x3d"/workflows/\x3c%\x3duserId%\x3e/employee"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u6210\u5458\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c% } %\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"link-item router" href\x3d"/workflows/\x3c%\x3duserId%\x3e/formstat"\x3e\x3ci class\x3d"item-icon icon-stats"\x3e\x3c/i\x3e\u5ba1\u6279\u7edf\u8ba1\x3c/div\x3e\x3cul class\x3d"sub-nav hide"\x3e\x3cli class\x3d"router j_formstat j_mclick" data-type\x3d"formstat" href\x3d"/workflows/\x3c%\x3duserId%\x3e/formstat"\x3e\x3ca class\x3d"link-item"\x3e\u5ba1\u6279\u8868\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_flow j_mclick j_report" data-type\x3d"report" href\x3d"/workflows/\x3c%\x3duserId%\x3e/report"\x3e\x3ca class\x3d"link-item"\x3e\u5ba1\u6279\u7533\u8bf7\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_mclick j_flowstat" data-type\x3d"flowstat" href\x3d"/workflows/\x3c%\x3duserId%\x3e/flowstat"\x3e\x3ca class\x3d"link-item"\x3e\u5ba1\u6279\u7efc\u5408\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"j_formcloud j_mclick router" data-type\x3d"formcloud" href\x3d"/workflows/\x3c%\x3duserId%\x3e/formcloud"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-cloud" \x3e\x3c/i\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_trashbin j_mclick router" data-type\x3d"trashbin" href\x3d"/workflows/\x3c%\x3duserId%\x3e/trashbin"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-trash" \x3e\x3c/i\x3e\u56de\u6536\u7ad9\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv id\x3d"j_flowscroll" class\x3d"main scrollwrapper"\x3e\x3c/div\x3e\x3c/div\x3e',
"workflow.workflowright":'\x3cdiv id\x3d"workflow-right" class\x3d"main-sidebar-bd"\x3e\x3cdiv class\x3d"sbox"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 id\x3d"flowTitle" class\x3d"sbox-title"\x3e\u5ba1\u6279\u7edf\u8ba1\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-bd"\x3e\x3cdiv id\x3d"myworkflow" class\x3d"h-280"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox j_subordinatestat"\x3e\x3cdiv class\x3d"sbox-hd"\x3e\x3ch5 class\x3d"sbox-title"\x3e\u4e0b\u5c5e\u5f85\u529e\u5ba1\u6279\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"sbox-bd"\x3e\x3cdiv class\x3d"side-statlist"\x3e\x3cul id\x3d"empList"\x3e\x3cli class\x3d"hide j_noresult no-result nomg nobd"\x3e\u65e0\u4e0b\u5c5e\u5ba1\u6279\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"list-more hide j_more"\x3e\u52a0\u8f7d\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_eitem" \x3e\x3cli\x3e\x3cspan class\x3d"fr j_todo"\x3e\x3c/span\x3e\x3cimg src\x3d"images/demo-v3/avatar_demo.png" class\x3d"avatar usercard-toggle cs-p j_avatar"/\x3e\x3cspan class\x3d"usercard-toggle cs-p j_name"\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.requestlist":'\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"todo-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli class\x3d"j_incharge sub-indent router" data-title\x3d"\u5f85\u529e\u5ba1\u6279" data-type\x3d"todo" href\x3d"/workflows/\x3c%\x3duserId%\x3e/todo"  data-sub\x3d"#todo-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"unread-todo" href\x3d"/workflows/\x3c%\x3duserId%\x3e/unread-todo" data-title\x3d"\u672a\u8bfb\u6700\u65b0\u5f85\u529e" data-sub\x3d"#todo-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u672a\u8bfb\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router"  data-type\x3d"newcomment-todo" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-todo" data-title\x3d"\u6709\u65b0\u53cd\u9988\u5f85\u529e" data-sub\x3d"#todo-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"read-todo" href\x3d"/workflows/\x3c%\x3duserId%\x3e/read-todo" data-title\x3d"\u5df2\u67e5\u9605\u5f85\u529e" data-sub\x3d"#todo-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5df2\u67e5\u9605\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"finshed-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"finshed" href\x3d"/workflows/\x3c%\x3duserId%\x3e/finshed" data-sub\x3d"#finshed-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"newcomment-finshed" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-finshed" data-title\x3d"\u6709\u65b0\u53cd\u9988\u5df2\u529e" data-sub\x3d"#finshed-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router" data-type\x3d"proceeding-finshed" href\x3d"/workflows/\x3c%\x3duserId%\x3e/proceeding-finshed" data-title\x3d"\u8fdb\u884c\u4e2d" data-sub\x3d"#finshed-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8fdb\u884c\u4e2d\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"done" href\x3d"/workflows/\x3c%\x3duserId%\x3e/done" data-title\x3d"\u529e\u7ed3" data-sub\x3d"#finshed-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u529e\u7ed3\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"create-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_incharge sub-indent router"data-title\x3d"\u63d0\u4ea4\u7684\u5ba1\u6279" data-type\x3d"minecreate" href\x3d"/workflows/\x3c%\x3duserId%\x3e/minecreate" data-sub\x3d"#create-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"newcomment-minecreate" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-minecreate" data-title\x3d"\u65b0\u53cd\u9988"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router" data-type\x3d"proceeding-minecreate" href\x3d"/workflows/\x3c%\x3duserId%\x3e/proceeding-minecreate" data-title\x3d"\u8fdb\u884c\u4e2d"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8fdb\u884c\u4e2d\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"done-minecreate" href\x3d"/workflows/\x3c%\x3duserId%\x3e/done-minecreate" data-title\x3d"\u529e\u7ed3\u5ba1\u6279"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u529e\u7ed3\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"watched-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_incharge sub-indent router"  data-title\x3d"\u5173\u6ce8\u7684\u5ba1\u6279" data-type\x3d"watched" href\x3d"/workflows/\x3c%\x3duserId%\x3e/watched" data-sub\x3d"#watched-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"newcomment-watched" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-watched" data-title\x3d"\u65b0\u53cd\u9988"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router" data-type\x3d"proceeding-watched" href\x3d"/workflows/\x3c%\x3duserId%\x3e/proceeding-watched" data-title\x3d"\u8fdb\u884c\u4e2d"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8fdb\u884c\u4e2d\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"done-watched" href\x3d"/workflows/\x3c%\x3duserId%\x3e/done-watched" data-title\x3d"\u529e\u7ed3\u5ba1\u6279"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u529e\u7ed3\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"sharetome-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_incharge sub-indent router" data-title\x3d"\u5ba1\u6279" data-type\x3d"sharetome" href\x3d"/workflows/\x3c%\x3duserId%\x3e/sharetome" data-sub\x3d"#sharetome-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"newcomment-sharetome" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-sharetome" data-title\x3d"\u65b0\u53cd\u9988"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router" data-type\x3d"proceeding-sharetome" href\x3d"/workflows/\x3c%\x3duserId%\x3e/proceeding-sharetome" data-title\x3d"\u8fdb\u884c\u4e2d"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8fdb\u884c\u4e2d\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"done-sharetome" href\x3d"/workflows/\x3c%\x3duserId%\x3e/done-sharetome" data-title\x3d"\u529e\u7ed3\u5ba1\u6279"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u529e\u7ed3\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide" id\x3d"all-flow-menu"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u5206\u7c7b\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"j_incharge sub-indent router" data-title\x3d"\u5168\u90e8\u5ba1\u6279" data-type\x3d"all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/all" data-sub\x3d"#all-flow-menu"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u5168\u90e8\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"unread-all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/unread-all" data-title\x3d"\u5ba1\u6279\u672a\u8bfb"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u672a\u8bfb\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_incharge sub-indent router" data-type\x3d"newcomment-all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/newcomment-all" data-title\x3d"\u65b0\u53cd\u9988"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u65b0\u53cd\u9988\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mineParticipants sub-indent router" data-type\x3d"proceeding-all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/proceeding-all" data-title\x3d"\u8fdb\u884c\u4e2d"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u8fdb\u884c\u4e2d\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_created sub-indent router" data-type\x3d"done-all" href\x3d"/workflows/\x3c%\x3duserId%\x3e/done-all" data-title\x3d"\u529e\u7ed3\u5ba1\u6279"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan class\x3d"j_type-name"\x3e\u529e\u7ed3\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"workflow-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"active"\x3e\x3ca class\x3d"orderType"  data-entity\x3d"default"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"last_comment_time"\x3e\u6309\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"create_time"\x3e\u6309\u7533\u8bf7\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"create_time"\x3e\u6309\u63a5\u6536\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"   data-entity\x3d"creator"\x3e\u6309\u7533\u8bf7\u4eba\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown" id\x3d"workflow-filter" data-toggle\x3d"#workflow-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter dropdown-div border-dropdown"\x3e\x3cdiv id\x3d"workflow-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"workflow-keywords" name\x3d"workflowsearch" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item last fr"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"flowform" data-id\x3d"new" userid\x3d"\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-hd main-hd-fixed j_batchEl hide"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"workflow-watchs btn btn-sm"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"workflow-reminds btn btn-sm"\x3e\u6279\u91cf\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"workflow-share btn btn-sm" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item last fr"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"flowform" data-id\x3d"new" userid\x3d"\x3c%\x3duserId%\x3e"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd j_mainbdScr j_sidebarPren sidebar-in"\x3e\x3cdiv id\x3d"flowlist-container" class\x3d"table-tray scrollwrapper"\x3e\x3cdiv class\x3d"tray-cell main-content j_center"\x3e\x3cul id\x3d"flow-list" class\x3d"e-list workflow-list"\x3e\x3c/ul\x3e\x3cdiv id\x3d"flowlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_no_my_workflow no-result"\x3e\u65e0\u5f85\u529e\u5ba1\u6279,\u60a8\u53ef\u901a\u8fc7\u201c\u5206\u7c7b\u201d\u6765\u5207\u6362\u5230\u5176\u4ed6\u5ba1\u6279\u5217\u8868\u67e5\u9605\x3c/div\x3e\x3cdiv class\x3d"hide common-more js_more"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"guide-div hide"\x3e\x3cdiv class\x3d"clearfix"\x3e\u60a8\u53ef\u70b9\u51fb\u201c\u63d0\u4ea4\u7533\u8bf7\u201d\u6765\u63d0\u4ea4\u60a8\u7684\u5ba1\u6279\uff1b\x3cbr/\x3e\u5ba1\u6279\u53ef\u4ee5\u5e2e\u52a9\u60a8\u628a\u65e5\u5e38\u884c\u653f\u65b9\u9762\u7684\u7533\u8bf7\u76f4\u63a5\u63d0\u4ea4\u7ed9\u60a8\u7684\u4e0a\u7ea7\u6216\u5176\u4ed6\u540c\u4e8b\uff0c\x3cbr/\x3e\u65b9\u4fbf\u4ed6\u4eec\u5feb\u901f\u5ba1\u6838\uff0c\u540c\u65f6\u7cfb\u7edf\u652f\u6301\u53ef\u81ea\u5b9a\u4e49\u5ba1\u6279\u8fc7\u7a0b\u53ca\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e \x3ca id\x3d"guide-customer-create" class\x3d"btn j_entityslider-toggle" data-module\x3d"flowform" data-id\x3d"new" userid\x3d"\x3c%\x3duserId%\x3e" class\x3d"btn"\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell main-sidebar"\x3e\x3cdiv class\x3d"j_sidebarCtrl graph siderbar-ctrl-btn"\x3e\x3c/div\x3e\x3cdiv id\x3d"j_workflowright"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"flow-clone" class\x3d"workflow filterSlip_js j_entityslider-toggle  flow-list" href\x3d"" data-module\x3d"workflow" data-id\x3d"" userId\x3d""\x3e\x3cspan class\x3d"sn hide"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text"\x3e\x3cspan class\x3d"js_flowname"\x3e\x3c/span\x3e\x3cspan class\x3d"js_sernum c-999"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share selector-toggle" data-entity\x3d"employee" data-multi\x3d"true" targetId\x3d""\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"flow.flowprocess":'\x3cdiv class\x3d"module-detail-view flow-detail-view" id\x3d"workflow-wrap"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u5ba1\u6279\x3c/div\x3e\x3cdiv class\x3d"detail-actions" id\x3d"permissions"\x3e\x3cul\x3e\x3cli id\x3d"btn-pass" class\x3d"btn-pass js_display_tool current-operator hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u540c\u610f\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-free-back" class\x3d"btn-free-back js_display_tool current-operator hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-reply2"\x3e\x3c/i\x3e\u81ea\u7531\u9000\u56de\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-step" class\x3d"btn-step js_display_tool current-operator hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-code-fork"\x3e\x3c/i\x3e\u52a0\u7b7e\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-joinStep" class\x3d"btn-joinStep js_display_tool current-operator hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-flow-children"\x3e\x3c/i\x3e\u4f1a\u7b7e\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-submit" class\x3d"btn-submit js_display_tool hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-save" class\x3d"btn-save js_display_tool hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-takeBack" class\x3d"workflow-takeBack hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-reply"\x3e\x3c/i\x3e\u6536\u56de\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle js_more_tools current-operator hide"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"icon-cog"\x3e\x3c/i\x3e\u66f4\u591a\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli id\x3d"workflow-chart-btn" class\x3d"workflow-chart-btn"\x3e\x3ca\x3e\x3ci class\x3d"icon-flowchart"\x3e\x3c/i\x3e\u5ba1\u6279\u6d41\u7a0b\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-save" class\x3d"btn-save"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u6682\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-watch" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-remind" class\x3d"btn-remind remind-toggle"  module\x3d"workflow" targetId\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-bell"\x3e\x3c/i\x3e\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-print" class\x3d"workflow-chart-btn" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\u6253\u5370\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli id\x3d"workflow-chart-btn" class\x3d"workflow-chart-btn js_tool"\x3e\x3ca\x3e\x3ci class\x3d"icon-flowchart"\x3e\x3c/i\x3e\u5ba1\u6279\u6d41\u7a0b\u56fe\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-submit-again" class\x3d"workflow-chart-btn hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u91cd\u65b0\u63d0\u4ea4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-delete" class\x3d"btn-delete js_display_tool hide" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-watch" class\x3d"js_tool" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"btn-remind" class\x3d"btn-remind remind-toggle js_tool"  module\x3d"workflow" targetId\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-bell"\x3e\x3c/i\x3e\u50ac\u529e\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-print" class\x3d"workflow-chart-btn js_tool" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ca\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\u6253\u5370\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"detail-close-li"\x3e\x3ca id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"icon-reply-li hide js_entiyDetail_reply"\x3e\x3ca title\x3d"\u8fd4\u56de" id\x3d"" class\x3d""\x3e\x3ci class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"newFlowPermissions" class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli id\x3d"workflow-submit" class\x3d"btn-submit"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"workflow-save" class\x3d"btn-save"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"flowContent" class\x3d"scrollwrapper mCus-mh100"  marginbottom\x3d"20"\x3e\x3cdiv  class\x3d"detail-content"\x3e\x3cdiv id\x3d"pass-container" class\x3d"hide"\x3e\x3cdiv class\x3d"flow-option-post""\x3e\x3ctextarea rows\x3d"2" class\x3d"form-control"  placeholder\x3d"\u8bf7\u8f93\u5165\u8be5\u5ba1\u6279\u7684\u6d41\u8f6c\u610f\u89c1..."\x3e\x3c/textarea\x3e\x3cdiv class\x3d"mt-10"\x3e\x3ca id\x3d"pass-submit" type\x3d"button" class\x3d"btn btn-sm btn-success"\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"takeBack-container" class\x3d"hide"\x3e\x3cdiv class\x3d"flow-option-post""\x3e\x3ctextarea rows\x3d"2" class\x3d"form-control"  placeholder\x3d"\u8bf7\u8f93\u5165\u8be5\u5ba1\u6279\u7684\u6536\u56de\u610f\u89c1..."\x3e\x3c/textarea\x3e\x3cdiv class\x3d"mt-10"\x3e\x3ca id\x3d"takeBack-submit" type\x3d"button" class\x3d"btn btn-sm btn-success"\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"free-back-container" class\x3d"hide"\x3e\x3cdiv class\x3d"flow-option-post"\x3e\x3ctextarea id\x3d"js_rejectText" rows\x3d"2" class\x3d"form-control" placeholder\x3d"\u8bf7\u8f93\u5165\u8be5\u5ba1\u6279\u7684\u9000\u56de\u610f\u89c1"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"mt-10 fr"\x3e\x3cselect id\x3d"js_steps" class\x3d"form-control"\x3e\x3c/select\x3e\x3ca id\x3d"free-back-submit" class\x3d"btn btn-sm btn-success ml-5"\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e\x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"joinStep-container" class\x3d"flow-option-post hide"\x3e\x3cdiv class\x3d"approvers-join clearfix"\x3e\x3cspan class\x3d"title"\x3e\u8bf7\u9009\u62e9\u4f1a\u7b7e\u4eba\u5458\uff1a\x3c/span\x3e\x3cdiv class\x3d"join-box ml-10"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search join-selector" data-entity\x3d"employee" module\x3d"flow" data-multi\x3d"true"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctextarea rows\x3d"2" class\x3d"form-control" placeholder\x3d"\u8bf7\u8f93\u5165\u8be5\u5ba1\u6279\u7684\u4f1a\u7b7e\u610f\u89c1" style\x3d"height:50px;"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"mt-10"\x3e\x3ca id\x3d"joinStep-submit" class\x3d"btn btn-sm btn-success"\x3e\u786e\u8ba4\u4f1a\u7b7e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"addstep-container" class\x3d"flow-option-post"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-container" class\x3d"workflow-container"\x3e\x3cdiv class\x3d"workflow-typename"\x3e\x3cstrong id\x3d"formName" class\x3d"name"\x3e\x3c/strong\x3e\x3cspan id\x3d"ownership" class\x3d"type"\x3e\x3c/span\x3e\x3cdiv class\x3d"js_flowstatus workflow-status hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_flowchartContainer" class\x3d"hide flow-sketch-view"\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block-more hide" id\x3d"chart-fold"\x3e\x3ca class\x3d"btn btn-block btn-sm opc-7"\x3e\x3cspan class\x3d"js_detail-block-more"\x3e\u6536\u8d77\x3c/span\x3e \x3ci class\x3d"icon-angle-up"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"detail-block"\x3e\x3cdiv class\x3d"wform-title"\x3e\x3cinput id\x3d"workflow-name" class\x3d"textinput-b title" name\x3d"workflow.name" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898..." v-maxlength\x3d"100" v-required\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv id\x3d"applicants"  class\x3d"wform-post-info clearfix"\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u63d0\u4ea4\u4eba:\x3c/label\x3e\x3cdiv undeletable\x3d"true" class\x3d"entity-container"\x3e\x3cspan class\x3d"entity-item"\x3e\x3ca class\x3d"usercard-toggle ellipsis  username applyUser_js" userId\x3d""\x3e\x3cimg class\x3d"avatar" src\x3d"images/avatar.png"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u90e8\u95e8:\x3c/label\x3e\x3cspan class\x3d"department ellipsis applyDepa_js"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u65e5\u671f:\x3c/label\x3e\x3cspan class\x3d"applyDate_js"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-request" class\x3d"form-info"\x3e\x3c/div\x3e\x3cdiv class\x3d"form-preview"\x3e\x3cdiv id\x3d"new-workflow-request" class\x3d"form-view form-view_js hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands hide" id\x3d"workflow-control-detail"\x3e\x3cdiv class\x3d"control-group hide" id\x3d"workflow-label" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"workflow-mylabel" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"workflow-share" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-goal" icon\x3d"#i-mainline"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-task" icon\x3d"#i-relevance-task"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-doc" icon\x3d"#i-relevance-doc"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-crm" icon\x3d"#i-relevance-crm"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-flow" icon\x3d"#i-relevance-flow"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance workflow-relevance hide" id\x3d"workflow-agenda" icon\x3d"#i-relevance-agenda"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"workflow-attach" icon\x3d"#i-attach"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-control-group" class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles"\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-ctag" title\x3d"\u6dfb\u52a0\u516c\u5171\u6807\u7b7e" for\x3d"#workflow-label"\x3e\x3ci class\x3d"graph graph-16 graph-16-commonlabel"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-tag" title\x3d"\u6dfb\u52a0\u6211\u7684\u6807\u7b7e" for\x3d"#workflow-mylabel"\x3e\x3ci class\x3d"graph graph-16 graph-16-label"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-share" title\x3d"\u6dfb\u52a0\u5171\u4eab" for\x3d"#workflow-share"\x3e\x3ci class\x3d"graph graph-16 graph-16-share"\x3e\x3c/i\x3e\u5171\u4eab\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-mainline" title\x3d"\u6dfb\u52a0\u9879\u76ee" for\x3d"#workflow-goal"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-task" title\x3d"\u6dfb\u52a0\u4efb\u52a1" for\x3d"#workflow-task"\x3e\x3ci class\x3d"graph graph-16 graph-16-task"\x3e\x3c/i\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-doc" title\x3d"\u6dfb\u52a0\u6587\u6863" for\x3d"#workflow-doc"\x3e\x3ci class\x3d"graph graph-16 graph-16-document"\x3e\x3c/i\x3e\u5173\u8054\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-crm" title\x3d"\u6dfb\u52a0\u5ba2\u6237" for\x3d"#workflow-crm"\x3e\x3ci class\x3d"graph graph-16 graph-16-customer"\x3e\x3c/i\x3e\u5173\u8054\u5ba2\u6237\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-flow" title\x3d"\u6dfb\u52a0\u5ba1\u6279" for\x3d"#workflow-flow"\x3e\x3ci class\x3d"graph graph-16 graph-16-workflow"\x3e\x3c/i\x3e\u5173\u8054\u5ba1\u6279\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-agenda" title\x3d"\u6dfb\u52a0\u65e5\u7a0b" for\x3d"#workflow-agenda"\x3e\x3ci class\x3d"graph graph-16 graph-16-calendar"\x3e\x3c/i\x3e\u5173\u8054\u65e5\u7a0b\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-attach" title\x3d"\u6dfb\u52a0\u9644\u4ef6" for\x3d"#workflow-attach"\x3e\x3ci class\x3d"graph graph-16 graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-info"\x3e\x3cdiv class\x3d"detail-block hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.requestinfo":'\x3cdiv id\x3d"workflow-wrap" class\x3d"workflow-wrap"\x3e\x3cdiv class\x3d"right-top"\x3e\x3cdiv class\x3d"title-hint"\x3e\x3ca class\x3d"close" id\x3d"btn-close" title\x3d"\u5173\u95ed"\x3e\u00d7\x3c/a\x3e\x3cspan class\x3d"createinfo"\x3e\x3ca id\x3d"workflow-creator" class\x3d"usercart-toggle"\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"right-top-btns"\x3e\x3cspan class\x3d"entity-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u5ba1\u6279\x3c/span\x3e\x3ca title\x3d"\u63d0\u4ea4" id\x3d"workflow-submit" class\x3d"iconlabel btn-submit"\x3e\x3ci class\x3d"glyphicon icon-ok-sign"\x3e\x3c/i\x3e\u63d0\u4ea4\x3c/a\x3e\x3ca title\x3d"\u4fdd\u5b58" id\x3d"workflow-save" class\x3d"iconlabel btn-save"\x3e\x3ci class\x3d"glyphicon icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-container" class\x3d"scrollwrapper form-horizontal"\x3e\x3cdiv class\x3d"workflow-typename"\x3e\x3cspan id\x3d"formName"\x3e\x3c/span\x3e\x3cspan id\x3d"ownership" class\x3d"ownership"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-info" class\x3d"form-horizontal entity-info"\x3e\x3cdiv class\x3d"workflow-title workflow-title-new"\x3e\x3ctextarea id\x3d"workflow-name" class\x3d"form-control title textinput" name\x3d"workflow.name" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898..." v-maxlength\x3d"50" v-required\x3d"true"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-request" class\x3d"form-info" \x3e\x3c/div\x3e\x3cdiv id\x3d"applicants" class\x3d"flow-ctrl-length control-group form-info pl-15 nobd hide"\x3e\x3cdiv class\x3d"span1"\x3e\x3clabel class\x3d"control-label"\x3e\u63d0\u4ea4\u4eba:\x3c/label\x3e\x3cdiv class\x3d"controls text underline"\x3e\x3ca class\x3d"username ellipsis usercard-toggle applyUser_js" userId\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"span2"\x3e\x3clabel class\x3d"control-label"\x3e\u90e8\u95e8:\x3c/label\x3e\x3cdiv class\x3d"controls text underline"\x3e\x3cspan class\x3d"department ellipsis applyDepa_js"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"span1"\x3e\x3clabel class\x3d"control-label"\x3e\u65e5\u671f:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" disabled\x3d"disabled" position\x3d"bottom-left" class\x3d"form-control datepicker applyDate_js"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"form-preview" \x3e\x3cdiv id\x3d"new-workflow-request" class\x3d"form-view hide form-view_js" \x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-mainline" class\x3d"control-group hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-tag" class\x3d"control-group hide" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-ctag" class\x3d"control-group hide" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-share" class\x3d"control-group hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-relevance" class\x3d"control-group hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-attachment" class\x3d"control-group hide" icon\x3d"#i-attach"\x3e\x3c/div\x3e\x3cdiv id\x3d"workflow-control-group" class\x3d"control-group nobd pl-15 links-control-group"\x3e\x3ca id\x3d"i-mainline" title\x3d"\u6dfb\u52a0\u9879\u76ee" for\x3d"#workflow-mainline"\x3e\x3ci class\x3d"icon-tasks"\x3e\x3c/i\x3e\u9879\u76ee\x3c/a\x3e\x3ca id\x3d"i-tag" title\x3d"\u6dfb\u52a0\u6211\u7684\u6807\u7b7e" for\x3d"#workflow-tag"\x3e\x3ci class\x3d"icon-tags"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3ca id\x3d"i-ctag" title\x3d"\u6dfb\u52a0\u516c\u5171\u6807\u7b7e" for\x3d"#workflow-ctag"\x3e\x3ci class\x3d"icon-tags"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3ca id\x3d"i-share" title\x3d"\u6dfb\u52a0\u5171\u4eab" for\x3d"#workflow-share"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u5171\u4eab\x3c/a\x3e\x3cspan  class\x3d"j_links-dropdown links-dropdown dropdown dropdown-menu-toggle"\x3e\x3ca  id\x3d"i-relevance" title\x3d"\u6dfb\u52a0\u5173\u8054" for\x3d"#workflow-relevance"\x3e \x3ci class\x3d"icon-link"\x3e\x3c/i\x3e\u5173\u8054\x3cb class\x3d"caret"\x3e\x3c/b\x3e \x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e \x3ca class\x3d"relevance-module-workflow" data-entity\x3d"task"\x3e\u76f8\u5173\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli\x3e \x3ca class\x3d"relevance-module-workflow" data-entity\x3d"document"\x3e\u76f8\u5173\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli\x3e \x3ca class\x3d"relevance-module-workflow" data-entity\x3d"customer"\x3e\u76f8\u5173\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\t\x3ca class\x3d"relevance-module-workflow" data-entity\x3d"workflow"\x3e\u76f8\u5173\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/span\x3e\x3ca id\x3d"i-attach" title\x3d"\u6dfb\u52a0\u9644\u4ef6" for\x3d"#workflow-attachment"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.requestnew":'\x3cdiv id\x3d"workflows-wrap" class\x3d"entity-wrap workflows-wrap"\x3e\x3cdiv class\x3d"right-title"\x3e\x3ch5\x3e\u63d0\u4ea4\u7533\u8bf7  \x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"workflows-container" class\x3d"scrollwrapper workflows-container"\x3e\x3cdiv id\x3d"workflows-info" class\x3d"form-horizontal entity-info"\x3e\x3cul id\x3d"form-list" class\x3d"wform-list"\x3e\x3c% for(var i \x3d 0; i \x3c formInfos.length;i++){if(formInfos[i].masterTable\x3d\x3dnull){%\x3e\x3c% if(fastCreate) %\x3e\x3cli class\x3d"forminfo clearfix fast-create" data-id\x3d"\x3c%\x3dformInfos[i].id%\x3e" \x3e\x3c%else{%\x3e\x3cli class\x3d"forminfo clearfix router" href\x3d"/workflows/\x3c%\x3duserId%\x3e/new/\x3c%\x3dformInfos[i].id%\x3e"\x3e\x3c%}%\x3e\x3c%\x3di+1%\x3e\u3001\x3c%\x3dformInfos[i].description%\x3e\x3c/li\x3e\x3c%}}%\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"flow-form"\x3e\u4f7f\u7528\u6b65\u9aa4\uff1a1.\u9009\u62e9\u8868\u5355-\x3e2.\u586b\u5199\u8868\u5355 -\x3e3.\u9009\u62e9\u5e76\u5b9a\u4e49\u5ba1\u6279\u8fc7\u7a0b(\u4eba)\u5e76\u63d0\u4ea4  -\x3e4.\u5ba1\u6279\u529e\u7406(\u53ef\u591a\u6b21\u5e76\u52a0\u7b7e)-\x3e\u7ed3\u675f\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowstep":'\x3cdiv id\x3d"step-container"  class\x3d"step-container hide"\x3e\x3cdiv class\x3d"step-def-title"\x3e\x3ca class\x3d"js_aftercurrent btn btn-sm add-approvers"\x3e\u65b0\u589e\u5ba1\u6279\u73af\u8282\x3c/a\x3e\x3cspan class\x3d"js_aftercurrenttips c-danger"\x3e: \u4f4d\u4e8e\u5f53\u524d\u5ba1\u6279\u8282\u70b9\u4e4b\u540e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"approvers-container" class\x3d"approvers-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"step-def-title mb-5"\x3e\x3ca class\x3d"js_afterend btn btn-sm add-approvers"\x3e\u65b0\u589e\u5ba1\u6279\u73af\u8282\x3c/a\x3e\x3cspan class\x3d"c-danger"\x3e: \u4f4d\u4e8e\u6700\u540e\u5ba1\u6279\u8282\u70b9\u4e4b\u540e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3ctextarea id\x3d"flow-textarea" class\x3d"form-control hide" rows\x3d"2" placeholder\x3d"\u8bf7\u8f93\u5165\u52a0\u7b7e\u6216\u6d41\u8f6c\u610f\u89c1"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"approvers-btns mt-5"\x3e\x3ca id\x3d"add-step-confirm" class\x3d"btn btn-sm btn-success hide"\x3e \u786e\u8ba4\u52a0\u7b7e\u5e76\u540c\u610f\x3c/a\x3e\x3ca id\x3d"step-confirm" class\x3d"btn btn-sm btn-success hide"\x3e \u786e\u8ba4\u5e76\u63d0\u4ea4\u5ba1\u6279\x3c/a\x3e\x3ca id\x3d"step-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"approvers-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"approver-line"\x3e\x3cdiv class\x3d"hd"\x3e\x3cinput type\x3d"text" class\x3d"flow-node-name form-control j_steptitle" maxlength\x3d"15" placeholder\x3d""\x3e\x3ca class\x3d"btn-delete-approver fr"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"bd"\x3e\x3cdiv class\x3d"line-item"\x3e\x3clabel\x3e\u5ba1\u6279\u4eba\u5458\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls node-control"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"flow" data-multi\x3d"true"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"opt-item if-check  j_orcheck hide"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e \u6216\u7b7e\x3c/span\x3e\x3cspan class\x3d"icon_orCheck orcheck icon-flow-or hide" title\x3d"\u6216\u7b7e"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"line-item"\x3e\x3clabel\x3e\u5ba1\u6279\u73af\u8282\u7c7b\u578b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"line-opts"\x3e\x3cspan class\x3d"opt-item j_not_verify"\x3e\x3ci class\x3d"icon-checkbox-checked"\x3e\x3c/i\x3e \u5ba1\u6279\x3c/span\x3e\x3cspan class\x3d"opt-item j_is_verify"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e \u786e\u8ba4\x3c/span\x3e\x3cspan class\x3d"opt-item j_writeable fr"\x3e\u662f\u5426\u53ef\u4fee\u6539\u8868\u5355\u5185\u5bb9\uff1a\x3cem class\x3d"ml-10 e-range j_range e-range-sm"\x3e\x3c/em\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3clabel class\x3d"control-label hide"\x3e\x3cspan class\x3d"approver-i"\x3e\x3c/span\x3e\x3cspan\x3e\u7ea7\u5ba1\u6279\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowsequence":'\x3cdiv class\x3d"module-detail-view wform-sequence-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv id\x3d"js_sequenceHeader"\x3e\x3cdiv id\x3d"js_sequenceTitle" class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_conditionHeader" class\x3d"hide"\x3e\x3cdiv id\x3d"js_conditionTitle" class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u914d\u7f6e\u6761\u4ef6\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d\'\x3cdiv class\x3d"e-row ta-l"\x3e\u5907\u6ce8\uff1a1.\u5728\u6761\u4ef6\u8f93\u5165\u680f\u4e2d\u8f93\u5165\u5b8c\u6210\uff0c\u70b9\u51fb\u201c+\u201d\u589e\u52a0\u6309\u94ae\uff0c\u60a8\u8bbe\u7f6e\u7684\u6761\u4ef6\u5c06\u6dfb\u52a0\u81f3\u4e0b\u9762\u7684\u6761\u4ef6\u663e\u793a\u533a\u57df\uff1b\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e2.\u5982\u4f55\u4fee\u6539\u6216\u5220\u9664\u6761\u4ef6\u663e\u793a\u533a\u57df\u7684\u6761\u4ef6\uff1a\u9009\u4e2d\u6761\u4ef6\uff0c\u5c06\u8054\u52a8\u6761\u4ef6\u8f93\u5165\u680f\uff0c\u5728\u6761\u4ef6\u8f93\u5165\u680f\u4e2d\u4fee\u6539\u6761\u4ef6\uff1b\u70b9\u51fb\u201c-\u201d\u5220\u9664\u6309\u94ae\uff0c\u53ef\u5c06\u6761\u4ef6\u5220\u9664\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e3.\u5bf9\u4e8e\u4efb\u4f55\u63a7\u4ef6\uff0c\u5982\u201c\u65e5\u671f\u201d\uff1b\u63d0\u4ea4\u5ba1\u6279\u65f6\u201c\u65e5\u671f\u201d\u6ca1\u6709\u8f93\u5165\u5185\u5bb9\uff0c\u6d89\u53ca\u201c\u65e5\u671f\u201d\u7684\u4efb\u4f55\u6761\u4ef6\u90fd\u4f1a\u88ab\u5224\u65ad\u4e3a\u5047\x3c/div\x3e\' \x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"icon-reply-li" id\x3d"js_backSequence"\x3e\x3ca\x3e\x3ci title\x3d"\u8fd4\u56de" class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_flowchartHeader" class\x3d"hide"\x3e\x3cdiv id\x3d"js_backSequence" class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u5ba1\u6279\u56fe\u9884\u89c8\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli id\x3d"js_backSequence" class\x3d"icon-reply-li"\x3e\x3ca\x3e\x3ci title\x3d"\u8fd4\u56de" class\x3d"icon-reply"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"fasten-container"  class\x3d"fasten-container"\x3e\x3cdiv id\x3d"step-container"  class\x3d"step-container"\x3e\x3cdiv class\x3d"step-def-title"\x3e\u8bf7\u9009\u62e9\u5e76\u5b9a\u4e49\u5ba1\u6279\u8fc7\u7a0b\x3ca class\x3d"add-approvers"\x3e\u65b0\u589e\u5ba1\u6279\u73af\u8282\x3c/a\x3e\x3ca class\x3d"fr js_preview_flow"\x3e\u9884\u89c8\u5ba1\u6279\u56fe\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"approvers-container" class\x3d"approvers-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"approvers-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"approver-line"\x3e\x3cdiv class\x3d"hd"\x3e\x3cinput type\x3d"text" class\x3d"flow-node-name form-control" maxlength\x3d"15" placeholder\x3d""/\x3e\x3ca class\x3d"btn-delete-approver fr"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"bd"\x3e\x3cdiv id\x3d"js_approver" class\x3d"line-item"\x3e\x3clabel\x3e\u5ba1\u6279\u4eba\u5458\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls node-control"\x3e\x3cdiv class\x3d"entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" module\x3d"flow" data-multi\x3d"true"/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"userSelector" class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ca\x3e\u4eba\u5458\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"addRole" class\x3d"btn btn-sm"\x3e\x3ca\x3e\u76f4\u63a5\u4e0a\u7ea7\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"applicant" class\x3d"btn btn-sm"\x3e\x3ca\x3e\u7533\u8bf7\u4eba\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"free" class\x3d"btn btn-sm"\x3e\x3ca\x3e\u81ea\u7531\u9009\u62e9\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"approvers-if-check if-check hide"\x3e\x3ci id\x3d"orCheck" class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e \u6216\u7b7e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_approve_type" class\x3d"line-item"\x3e\x3clabel\x3e\u5ba1\u6279\u73af\u8282\u7c7b\u578b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"line-opts"\x3e\x3cspan class\x3d"opt-item approvers-not-verify"\x3e\x3ci id\x3d"notVerify" class\x3d"icon-checkbox-checked"\x3e\x3c/i\x3e \u5ba1\u6279\x3c/span\x3e\x3cspan class\x3d"opt-item approvers-is-verify"\x3e\x3ci id\x3d"isVerify" class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e \u786e\u8ba4\x3c/span\x3e\x3cspan class\x3d"opt-item approvers-if-edit fr" id\x3d"formWritable"\x3e\u662f\u5426\u53ef\u4fee\u6539\u8868\u5355\u5185\u5bb9\uff1a\x3cem class\x3d"ml-10 e-range j_range e-range-sm"\x3e\x3c/em\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_flowset" class\x3d"line-item"\x3e\x3clabel\x3e\u51fa\u53e3\u8bbe\u7f6e\uff1a\x3c/label\x3e\x3cdiv id\x3d"js_exportSet" class\x3d"controls"\x3e\x3cdiv class\x3d"js_export_default_line line-opts export-line"\x3e\x3cinput type\x3d"text" value\x3d"\u9ed8\u8ba4\u51fa\u53e3" class\x3d"js_export_text form-control" maxlength\x3d"15"/\x3e\x3cspan\x3e1\u7ea7\u5ba1\u6279\x3c/span\x3e\x3ca id\x3d"js_addExport" class\x3d"control-btn"\x3e\x3ci class\x3d"icon-plus-thin" title\x3d"\u589e\u52a0\u51fa\u53e3"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"operateWrapper" class\x3d"operate-btns fr"\x3e\x3ca id\x3d"delete-sequence" type\x3d"button" class\x3d"btn"\x3e\u5220\u9664\x3c/a\x3e\x3ca id\x3d"save-sequence" type\x3d"button" class\x3d"btn btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"js_export_clone" class\x3d"hide"\x3e\x3cdiv class\x3d"export-line js_export"\x3e\x3cinput type\x3d"text" value\x3d"\u51fa\u53e3" class\x3d"js_export_text form-control" maxlength\x3d"15"\t /\x3e\x3cselect id\x3d"js_conditional_export" class\x3d"form-control"\x3e\x3coption id\x3d"null"\x3e\u7ed3\u675f\x3c/option\x3e\x3c/select\x3e\x3ca class\x3d"btn-config-condition j_configCondition"\x3e\u914d\u7f6e\u6761\u4ef6\x3c/a\x3e\x3ca id\x3d"js_delExport" class\x3d"control-btn"\x3e\x3ci class\x3d"icon-minus-thin" title\x3d"\u5220\u9664\u51fa\u53e3"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_flowconditonContainer" class\x3d"hide "\x3e\x3cdiv id\x3d"js_conditionSet" class\x3d"conditionSet" value\x3d""\x3e\x3cdiv class\x3d"js_formField"\x3e\x3cselect id\x3d"js_form_field_set" class\x3d"form-control"\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formField_condition formField-condition"\x3e\x3c/div\x3e\x3cdiv class\x3d"fr conditionSet-btn"\x3e\x3ca class\x3d"js_addCondition control-btn"\x3e\x3ci class\x3d"icon-plus-thin" title\x3d"\u6dfb\u52a0\u6761\u4ef6"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_conditionScr conditionList-wrap scrollwrapper"\x3e\x3cdiv class\x3d"js_conditionList  conditionList" \x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"fr mv-15 mr-20"\x3e\x3ca class\x3d"js_clear btn btn-success"\x3e\u91cd\u7f6e\x3c/a\x3e\x3ca class\x3d"js_save btn btn-primary"\x3e\u786e\u5b9a\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"js_conditon_clone hide"\x3e\x3cdiv class\x3d"js_condition_line condition-line"\x3e\x3cul class\x3d"ph-20"\x3e\x3cli\x3e\x3clable id\x3d"js_logic_operlabletor_left" class\x3d"js_left hide" value\x3d"\x26"\x3e\u5e76\u4e14\x3c/lable\x3e\x3clable id\x3d"js_form_field" value\x3d""\x3e\x3c/lable\x3e\x3clable id\x3d"js_arith_symbol_left" class\x3d"js_left hide" value\x3d"\x3e\x3d"\x3e\u5927\u4e8e\u7b49\u4e8e\x3c/lable\x3e\x3clable id\x3d"js_arith_value_left" class\x3d"js_left hide" value\x3d""\x3e\x3c/lable\x3e\x3clable id\x3d"js_logic_operlabletor_right" class\x3d"js_right hide" value\x3d"\x26"\x3e\u5e76\u4e14\x3c/lable\x3e\x3clable id\x3d"js_arith_symbol_right" class\x3d"js_right hide" value\x3d"\x3c\x3d"\x3e\u5c0f\u4e8e\u7b49\u4e8e\x3c/lable\x3e\x3clable id\x3d"js_arith_value_right" class\x3d"js_right hide" value\x3d""\x3e\x3c/lable\x3e\x3cdiv class\x3d"fr conditionSet-btn"\x3e\x3ca class\x3d"js_delCondition control-btn"\x3e\x3ci class\x3d"icon-minus-thin" title\x3d"\u5220\u9664\u6761\u4ef6"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_DateComponent_clone" class\x3d"hide"\x3e\x3cspan class\x3d" j_datetime datetime-span"\x3e\x3cinput type\x3d"text" class\x3d"datepicker datetime form-control" name\x3d"startTime" id\x3d"startTime"\x3e\x3cspan class\x3d""\x3e-\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"datepicker datetime form-control" name\x3d"endTime" id\x3d"endTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"js_NumberComponent_clone" class\x3d"hide"\x3e\x3cspan class\x3d"numberCheck-span"\x3e\x3cinput class\x3d"j_numberCheck numberCheck form-control" type\x3d"text"\x3e\x3cspan class\x3d""\x3e-\x3c/span\x3e\x3cinput class\x3d"j_numberCheck numberCheck form-control" type\x3d"text"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"js_RadioBox_clone" class\x3d"hide"\x3e\x3cselect id\x3d"js_arith_symbol_set" class\x3d"form-control mr-5"\x3e\x3coption value\x3d"IN"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"NOTIN"\x3e\u4e0d\u5305\u542b\x3c/option\x3e\x3c/select\x3e\x3cdiv id\x3d"" class\x3d"js_arith_value_set entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"formField" module\x3d"flow" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165"/\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"js_System_Variables_clone" class\x3d"hide"\x3e\x3cselect id\x3d"js_variables" class\x3d"form-control"\x3e\x3coption id\x3d"system_department" key\x3d"System_Department"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption id\x3d"system_rank" key\x3d"System_Rank"\x3e\u804c\u7ea7\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"js_System_condition ds-ib"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"js_System_Department_clone" class\x3d"hide"\x3e\x3cselect id\x3d"js_arith_symbol_set" class\x3d"form-control mr-5"\x3e\x3coption value\x3d"IN"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"NOTIN"\x3e\u4e0d\u5305\u542b\x3c/option\x3e\x3c/select\x3e\x3cdiv id\x3d"" class\x3d"js_arith_value_set entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"department" module\x3d"flow" placeholder\x3d"\u8f93\u5165\u90e8\u95e8" data-show-new\x3d"forceDisabled"/\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"js_System_Rank_clone" class\x3d"hide"\x3e\x3cselect id\x3d"js_arith_symbol_set" class\x3d"form-control mr-5"\x3e\x3coption value\x3d"IN"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"NOTIN"\x3e\u4e0d\u5305\u542b\x3c/option\x3e\x3c/select\x3e\x3cdiv id\x3d"" class\x3d"js_arith_value_set entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"formField" data-type\x3d"rank" module\x3d"flow" placeholder\x3d"\u8f93\u5165\u804c\u7ea7" data-show-new\x3d"forceDisabled"/\x3e\x3c/span\x3e\x3cspan class\x3d"plus-btn control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_flowchartWrap" class\x3d"hide"\x3e\x3cdiv id\x3d"js_flowchartContainer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowstart":'\x3cdiv id\x3d"workflow-container"\x3e\x3cdiv id\x3d"workflows-wrap" class\x3d"flow-create-view module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_Workflows_scroll"\x3e\x3cdiv class\x3d"toolkit-bar"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active"\x3e\x3ca\x3e\x3ci class\x3d"icon-tree"\x3e\x3c/i\x3e\u56e2\u961f\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"my-forms"\x3e\x3ci class\x3d"icon-user glyphicon"\x3e\x3c/i\x3e\u6211\u7684\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"toolkit-list fr"\x3e\x3cli class\x3d"toolkit-item search search-right formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"companyformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"company"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow mr-0 fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success" style\x3d"border-top-left-radius: 0;border-bottom-left-radius: 0;"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli class\x3d"js_folder-create-li router" href\x3d"/workflows/\x3c%\x3duserId%\x3e/formcloud"\x3e\x3ca id\x3d"js_folder-create"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms mCus-mh100"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_companyforms workflows-container pl-10 js_form_list"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_personalforms workflows-container pl-10 hide js_form_list"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"wform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems-company" class\x3d"entity-wrap workflows-wrap"\x3e\x3cli class\x3d"js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"title router ellipsis filterSlip_js js_formtitle"\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_previewbtn"\x3e\x3ca class\x3d"btn btn-sm js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems-personal" class\x3d"entity-wrap workflows-wrap"\x3e\x3cli class\x3d"js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cspan class\x3d"formItem-disable fs-16 c-999"\x3e\x3ci class\x3d"icon-lock" title\x3d"\u5df2\u505c\u7528\u8868\u5355"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"title router ellipsis filterSlip_js js_formtitle"\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group text-right js_previewbtn"\x3e\x3ca id\x3d"flowSequence" class\x3d"entitybox-toggle btn btn-sm" data-module\x3d"flowSequence" data-target\x3d"#templateName" data-id\x3d"" data-value\x3d""\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_changeFormStatus"\x3e\u542f\u7528\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle js_formManage"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm" operationtype\x3d"copy"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm" id\x3d"delete-personalform"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"cloud-form-manage"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle js_formManage"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"company-search-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"j_companySearch"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount j_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"wform-list clearfix js_companysearchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-company"\x3e\x3cdiv class\x3d"hide js_noresult-company wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-company" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"personal-search-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"j_personalSearch"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u4e2a\u4eba\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount j_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"wform-list clearfix js_personalsearchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-personal"\x3e\x3cdiv class\x3d"hide js_noresult-personal wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-personal" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.formlist":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"wform-manage-wrapper j_managelist_scroll scrollwrapper"\x3e\x3cdiv class\x3d"toolkit toolkit-lg toolkit-bar clearfix"\x3e\x3cul class\x3d"toolkit-list  fl js_formtab"\x3e\x3c%if(isAdmin||module\x3d\x3d"formstat"){%\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active"\x3e\x3ca listEl\x3d"js_companyforms"\x3e\x3ci class\x3d"icon-tree glyphicon"\x3e\x3c/i\x3e\u56e2\u961f\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c%if(isAdmin){%\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"mem-forms" listEl\x3d"js_memberforms"\x3e\x3ci class\x3d"icon-users glyphicon"\x3e\x3c/i\x3e\u6210\u5458\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_personal-forms"\x3e\x3ca id\x3d"personal-forms" listEl\x3d"js_personalforms"\x3e\x3ci class\x3d"icon-user glyphicon"\x3e\x3c/i\x3e\u6211\u7684\u5ba1\u6279\u8868\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"toolkit-list fr j_toolList"\x3e\x3cli class\x3d"toolkit-item search search-right formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"companyformsearch-keywords" class\x3d"form-control js_searchkeyword" searchtype\x3d"company"/\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item last"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms mCus-mh100"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix wform-manage-list ph-10 hide js_companyforms"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult-org wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix wform-manage-list ph-10 hide js_memberforms" style\x3d"padding-bottom: 170px;"\x3e\x3cdiv id\x3d"memberformul"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u6210\u5458\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"form-list wform-list clearfix js_memberformlist member"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-member"\x3e\x3cdiv class\x3d"hide js_noresult-member wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-member" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix wform-manage-list ph-10 hide js_personalforms"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_noresult-personal wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"wform-list form-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems-company"\x3e\x3cli class\x3d"js_formitemsli" formtype\x3d"company" class\x3d"wform-li formlistsli-li"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cspan class\x3d"isGn" style\x3d"display:none"\x3e\u56fa\u5b9a\x3c/span\x3e\x3cspan class\x3d"formItem-disable fs-16 c-999"\x3e\x3ci class\x3d"icon-lock" title\x3d"\u5df2\u505c\u7528\u8868\u5355"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" skiptype\x3d"edit"\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formmanag hide"\x3e\x3ca id\x3d"flowSequence" class\x3d"entitybox-toggle btn btn-sm" data-module\x3d"flowSequence" data-type\x3d"company" data-id\x3d"" data-value\x3d""\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_changeFormStatus"\x3e\u505c\u7528\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm" operationtype\x3d"copy"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formstat hide"\x3e\x3ca class\x3d"btn btn-sm js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm router js_formstat" href\x3d"/workflows/4269582643046602887/formstat/5074264620919922958"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems-member"\x3e\x3cli class\x3d"js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" skiptype\x3d"preview"\x3e\x3c/h4\x3e\x3cdiv class\x3d"form-author description"\x3e\x3cp class\x3d"ellipsis"\x3e\u521b\u5efa\u4eba\uff1a \x3ca id\x3d"form-operator" class\x3d"name usercard-toggle"\x3e\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"ellipsis"\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3cspan id\x3d"form-createtime"\x3e\x3c/span\x3e\x3cp\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formmanag hide"\x3e\x3ca class\x3d"btn btn-sm js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_copyForm" operationtype\x3d"copy"\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formstat hide"\x3e\x3ca class\x3d"btn btn-sm js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm router js_formstat" href\x3d"/workflows/4269582643046602887/formstat/5074264620919922958"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems-personal" class\x3d"entity-wrap workflows-wrap"\x3e\x3cli class\x3d"js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cspan class\x3d"formItem-disable fs-16 c-999"\x3e\x3ci class\x3d"icon-lock" title\x3d"\u5df2\u505c\u7528\u8868\u5355"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"title router ellipsis filterSlip_js js_formtitle"\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group text-right js_previewbtn js_formmanag hide"\x3e\x3ca id\x3d"flowSequence" class\x3d"entitybox-toggle btn btn-sm" data-module\x3d"flowSequence" data-target\x3d"#templateName" data-id\x3d"" data-value\x3d""\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_changeFormStatus"\x3e\u542f\u7528\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm" operationtype\x3d"copy"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm" id\x3d"delete-personalform"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formstat hide"\x3e\x3ca class\x3d"btn btn-sm js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm router js_formstat" href\x3d"/workflows/4269582643046602887/formstat/5074264620919922958"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"company-search-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"j_companySearch"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount j_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"form-list wform-list clearfix js_companysearchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-company"\x3e\x3cdiv class\x3d"hide js_noresult-company wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-company" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"cloud-search-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"j_cloudSearch"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u4e91\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount j_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"form-list wform-list clearfix js_cloudsearchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-cloud"\x3e\x3cdiv class\x3d"hide js_noresult-cloud wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-cloud" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"nopermisson-form" class\x3d"alert alert-warning alert-block fade in"\x3e\x3ch4 class\x3d"alert-heading"\x3e\u5bf9\u4e0d\u8d77!\x3c/h4\x3e\x3cp\x3e\u60a8\u4e0d\u5177\u6709\u5bf9\u5f53\u524d\u9875\u9762\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8bf7\u8054\u7cfb\u7cfb\u7edf\u7ba1\u7406\u5458\u3002\x3c/p\x3e\x3cp\x3e\x3ca class\x3d"btn btn-back btn-sm"\x3e\u8fd4\u56de\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv id\x3d"personal-search-clone" class\x3d"hide"\x3e\x3cdiv class\x3d"j_personalSearch"\x3e\x3cdiv class\x3d"form-category-hd wform-cty-hd"\x3e\x3ch4\x3e\x3cspan\x3e\u4e2a\u4eba\u8868\u5355\x3c/span\x3e\x3cspan class\x3d"form-acount j_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3c/div\x3e\x3cul class\x3d"wform-list clearfix js_personalsearchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo-personal"\x3e\x3cdiv class\x3d"hide js_noresult-personal wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore-personal" class\x3d"blogs-more js_loadMore"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.formnew":'\x3cdiv id\x3d"build-newform" class\x3d"newform-modal modal fade form-horizontal entity-info"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u65b0\u5efa\u8868\u5355\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body js_forminfo"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput name\x3d"form-name" id\x3d"form-name" class\x3d"form-control w-full" type\x3d"text" maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u63cf\u8ff0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea id\x3d"form-describe" class\x3d"form-control w-full" maxlength\x3d"1000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3c%if(admin){%\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u7c7b\u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls js_formowner"\x3e\x3clabel class\x3d"radio-inline"\x3e \x3cinput type\x3d"radio" value\x3d"company" name\x3d"ownership" id\x3d"company"\x3e\u56e2\u961f\u8868\u5355\x3c/label\x3e \x3clabel class\x3d"radio-inline"\x3e \x3cinput type\x3d"radio" value\x3d"personal" name\x3d"ownership" id\x3d"personal"\x3e\u6211\u7684\u8868\u5355\x3c/label\x3e\x3clabel class\x3d"radio-inline hide js_cloudform"\x3e \x3cinput type\x3d"radio" value\x3d"cloud" name\x3d"ownership" id\x3d"cloud"\x3eeteams\u4e91\u8868\u5355\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3cdiv style\x3d"padding: 8px;"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"form-btn-save" class\x3d"btn btn-sm btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e \x3ca id\x3d"form-btn-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.formcopy":'\x3cdiv id\x3d"copy-form" class\x3d"newform-modal modal fade form-horizontal entity-info" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u8bf7\u8f93\u5165\x3c%\x3doperationtype%\x3e\u540e\u7684\u8868\u5355\u540d\u79f0\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body js_forminfo"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"form-name-copy" class\x3d"form-control w-full" type\x3d"text" maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"  \x3c%if(!admin){%\x3estyle\x3d"display:none;"\x3c%}%\x3e\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u7c7b\u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls js_formowner"\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" value\x3d"company" name\x3d"ownership" id\x3d"company"\x3e\u56e2\u961f\u8868\u5355\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" value\x3d"personal" name\x3d"ownership" id\x3d"personal"\x3e\u6211\u7684\u8868\u5355\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv style\x3d"padding: 8px;"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"form-btn-copy" class\x3d"btn btn-sm btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e\x3ca id\x3d"form-btn-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowcondition":'\x3cdiv class\x3d"modal" id\x3d"flowcondition-dialog"  tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3ch4 class\x3d"modal-title"\x3e\u914d\u7f6e\u6761\u4ef6\x3c/h4\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"js_conditionList"\x3e\x3c/div\x3e\x3cdiv\x3e\x3ca class\x3d"js_save"\x3e\u4fdd\u5b58\x3c/a\x3e\x3ca class\x3d"js_addCondition"\x3e\u6dfb\u52a0\u6761\u4ef6\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_conditon_clone hide"\x3e\x3cdiv class\x3d"js_condition_line"\x3e\x3cselect id\x3d"js_logic_operator"\x3e\x3coption value\x3d"\x26"\x3e\u5e76\u4e14\x3c/option\x3e\x3c/select\x3e\x3cselect id\x3d"js_form_field"\x3e\x3c/select\x3e\x3cselect id\x3d"js_arith_symbol"\x3e\x3coption value\x3d"\x3e"\x3e\u5927\u4e8e\x3c/option\x3e\x3coption value\x3d"\x3c"\x3e\u5c0f\u4e8e\x3c/option\x3e\x3coption value\x3d"\u2283"\x3e\u5305\u542b\x3c/option\x3e\x3c/select\x3e\x3cdiv\x3e\x3cinput id\x3d"js_arith_value" placeholder\x3d"\u8bf7\u8f93\u5165\u6761\u4ef6\u503c"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowchartsvg":'\x3csvg id\x3d"drawing" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" version\x3d"1.1" \x3e\x3c/svg\x3e\x3cdiv id\x3d"logModel" class\x3d"hide sketch-node-log"\x3e\x3cdiv class\x3d"hd"\x3e\x3cdiv id\x3d"logTitle"\x3e\x3c/div\x3e\x3ca class\x3d"close j_closeModel"\x3e\u00d7\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"bd"\x3e\x3cdiv class\x3d"log-list-wrapper j_chartLogScr"\x3e\x3cdiv id\x3d"logContent"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"cloneTitle" class\x3d"hide"\x3e\x3cspan class\x3d"js_request"\x3e\u5df2\u63d0\u4ea4\uff1aNUM\x3c/span\x3e\x3cspan class\x3d"js_read"\x3e\u5df2\u67e5\u9605\uff1aNUM\x3c/span\x3e\x3cspan class\x3d"js_unread"\x3e\u672a\u67e5\u9605\uff1aNUM\x3c/span\x3e\x3cspan class\x3d"js_approve"\x3e\u5df2\u540c\u610f\uff1aNUM\x3c/span\x3e\x3cspan class\x3d"js_reject"\x3e\u5df2\u9000\u56de\uff1aNUM\x3c/span\x3e\x3cspan class\x3d"js_process"\x3e\u5df2\u5904\u7406\uff1aNUM\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"cloneContent" class\x3d"hide"\x3e\x3cdiv class\x3d"js_listitem log-item"\x3e\x3cdiv class\x3d"js_name name"\x3e\x3ca class\x3d"js_link usercard-toggle"\x3eOPERATOR\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"js_receivetime opt"\x3e\u63a5\u6536\uff1aDATETIME\x3c/div\x3e\x3cdiv class\x3d"js_readtime opt"\x3e\u67e5\u9605\uff1aDATETIME\x3c/div\x3e\x3cdiv class\x3d"js_operatetime opt"\x3e\u540c\u610f\uff1aDATETIME\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c% if(isSvg\x3d\x3d"undefined"){  %\x3e\x3cscript type\x3d"text/javascript" src\x3d"/static/js/svg/svg.m.js"\x3e\x3c/script\x3e\x3c% } %\x3e',
"flow.flowstat":'\x3cdiv id\x3d"flowstat" class\x3d"flowreport statsheet-view nomg nopd"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\u5ba1\u6279\u7efc\u5408\u7edf\u8ba1\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_flowstatScr scrollwrapper"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"stat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group" style\x3d"margin-left:-40px;"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd" dategroup\x3d"true"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd" dategroup\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group clearfix" style\x3d"margin-left:-40px;"\x3e\x3clabel class\x3d"control-label"\x3e\u4eba\u5458\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"entity-simpleshare"\x3e\x3cdiv id\x3d"shareentrys" class\x3d"entity-container"\x3e\x3cspan class\x3d"entity-item j_entity_item" type\x3d"all"\x3e\x3ca class\x3d"" data-id\x3d""\x3e\x3cspan class\x3d"j_shareEntry_name"\x3e\u6240\u6709\u4eba\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"typeahead-wrapper hide"\x3e\x3cselect id\x3d"flowStatSelect" class\x3d"form-control"\x3e\x3coption value\x3d"user"\x3e\u7528\u6237\x3c/option\x3e\x3coption value\x3d"dept"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption value\x3d"all"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sharetype-user"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"employee" data-multi\x3d"true" placeholder\x3d"\u8f93\u5165\u59d3\u540d"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sharetype-dept hide"\x3e\x3cinput type\x3d"text" class\x3d"control-input typeahead search" data-entity\x3d"department" placeholder\x3d"\u8f93\u5165\u90e8\u95e8"\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan id\x3d"editShare" class\x3d"control-btn entity-item-add j_add_shareentrys"\x3e\x3ci title\x3d"\u6dfb\u52a0" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cscript type\x3d"text/template" id\x3d"js_template_item"\x3e\x3cspan class\x3d"entity-item j_entity_item" type\x3d"\x3c%\x3dtype %\x3e"\x3e\x3ca class\x3d"" data-id\x3d"\x3c%\x3did %\x3e"\x3e\x3cspan class\x3d"j_shareEntry_name"\x3e\x3c%\x3dname %\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e\x3c/script\x3e\x3c/div\x3e\x3cdiv class\x3d"stat-cdts-btn" style\x3d"margin-left:-40px;"\x3e\x3ca id\x3d"flowStatBtn" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row mv-20"\x3e\x3cdiv class\x3d"card text-center flow-chartcontent mh-10"\x3e\x3cdiv class\x3d"flow-countdiv"\x3e\x3cdiv class\x3d"countdiv-child active"\x3e\x3cdiv id\x3d"requestCountDiv" class\x3d"js_lefttarget countdiv-num requestCountDiv pointer" value\x3d"request"\x3e0\x3c/div\x3e\x3cdiv class\x3d"countdiv-btn"\x3e\x3cspan\x3e\u7533\u8bf7\u6570\x3c/span\x3e\x3ca class\x3d"js_lefttarget_all btn btn-xs j_entityslider-toggle"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"countdiv-child"\x3e\x3cdiv id\x3d"finishedCountDiv" class\x3d"js_lefttarget countdiv-num finishedCountDiv pointer" value\x3d"finished"\x3e0\x3c/div\x3e\x3cdiv class\x3d"countdiv-btn"\x3e\x3cspan\x3e\u5df2\u529e\u6570\x3c/span\x3e\x3ca class\x3d"js_lefttarget_all btn btn-xs j_entityslider-toggle"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"countdiv-child"\x3e\x3cdiv id\x3d"unfinishCountDiv" class\x3d"js_lefttarget countdiv-num unfinishCountDiv pointer" value\x3d"unfinish"\x3e0\x3c/div\x3e\x3cdiv class\x3d"countdiv-btn"\x3e\x3cspan\x3e\u5f85\u529e\u6570\x3c/span\x3e\x3ca class\x3d"js_lefttarget_all btn btn-xs j_entityslider-toggle"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"flow-chartdiv"\x3e\x3cdiv id\x3d"barWarningTitle" class\x3d"hide" value\x3d"request"\x3e\x3c/div\x3e\x3cdiv id\x3d"rankType" class\x3d"btn-group"\x3e\x3ca value\x3d"empRank" class\x3d"btn active btn-primary"\x3e\u6309\u4eba\u5458\u7edf\u8ba1Top10\x3c/a\x3e\x3ca value\x3d"formRank" class\x3d"btn"\x3e\u6309\u5ba1\u6279\u7edf\u8ba1Top10\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"rank-chart" class\x3d"h-200 j_entityslider-toggle rank-chart"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card p-10 mb-20"\x3e\x3cdiv style\x3d"margin-right: 10px;"\x3e\u6309\u4eba\u5458\u7edf\u8ba1\x3c/div\x3e\x3cdiv id\x3d"emp-chart" class\x3d"h-400 w-full j_entityslider-toggle"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.flowstatlist":'\x3cdiv class\x3d"module-detail-view mainlinetaskslist"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\u5ba1\u6279\u7edf\u8ba1\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"flowStatList" class\x3d"scrollwrapper dataTables_wrapper no-footer ph-20" style\x3d"padding-top:20px;"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul ta-c"\x3e\x3cli class\x3d"js_flow_request js_liheader list-tit bold hide"\x3e\x3cdiv class\x3d"item" style\x3d"width:30%"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:20%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:20%"\x3e\u7533\u8bf7\u4eba\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:30%"\x3e\u7533\u8bf7\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"js_flow_finished js_liheader list-tit bold hide"\x3e\x3cdiv class\x3d"item" style\x3d"width:30%"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:20%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:20%"\x3e\u8282\u70b9\u5904\u7406\u4eba\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:30%"\x3e\u6700\u540e\u5904\u7406\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"js_flow_unfinish js_liheader list-tit bold hide"\x3e\x3cdiv class\x3d"item" style\x3d"width:25%"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:15%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:20%"\x3e\u8282\u70b9\u540d\u79f0\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:15%"\x3e\u8282\u70b9\u5904\u7406\u4eba\x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:25%"\x3e\u8282\u70b9\u5230\u8fbe\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3cdiv class\x3d"scrollwrapper j_trashbinListScr trashbinlist"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_trashlist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more j_empty hide"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv id\x3d"loadMore" class\x3d"table-more mt-0 hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"flowStatItemClone" class\x3d"trashbinlogClone hide"\x3e\x3cli class\x3d"js_flow_request"\x3e\x3cdiv class\x3d"item js_flowname" style\x3d"width:30%;"\x3e\x3ca class\x3d"entitybox-toggle" data-module\x3d"workflow"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_flowstatus" style\x3d"width:20%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item js_nodeopt" style\x3d"width:20%"\x3e\u7533\u8bf7\u4eba\x3c/div\x3e\x3cdiv class\x3d"item js_reqtime" style\x3d"width:30%"\x3e\u7533\u8bf7\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"js_flow_finished"\x3e\x3cdiv class\x3d"item js_flowname" style\x3d"width:30%;"\x3e\x3ca class\x3d"entitybox-toggle" data-module\x3d"workflow"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_flowstatus" style\x3d"width:20%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item js_nodeopt" style\x3d"width:20%"\x3e\u8282\u70b9\u5904\u7406\u4eba\x3c/div\x3e\x3cdiv class\x3d"item js_reqtime" style\x3d"width:30%"\x3e\u6700\u540e\u5904\u7406\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"js_flow_unfinish"\x3e\x3cdiv class\x3d"item js_flowname" style\x3d"width:25%;"\x3e\x3ca class\x3d"entitybox-toggle" data-module\x3d"workflow"\x3e\u6d41\u7a0b\u540d\u79f0\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"item js_flowstatus" style\x3d"width:15%"\x3e\u6d41\u7a0b\u72b6\u6001\x3c/div\x3e\x3cdiv class\x3d"item js_nodename" style\x3d"width:20%"\x3e\u8282\u70b9\u540d\u79f0\x3c/div\x3e\x3cdiv class\x3d"item js_nodeopt" style\x3d"width:15%"\x3e\u8282\u70b9\u5904\u7406\u4eba\x3c/div\x3e\x3cdiv class\x3d"item js_recetime" style\x3d"width:25%"\x3e\u8282\u70b9\u5230\u8fbe\u65f6\u95f4\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"flow.sernumrule":'\x3cdiv class\x3d"module-detail-view wform-sernumrule-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv id\x3d"serNumRuleHeader"\x3e\x3cdiv id\x3d"serNumRuleTitle" class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u5ba1\u6279\u6d41\u6c34\u53f7\u89c4\u5219\u8bbe\u7f6e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d\'\x3cdiv class\x3d"e-row ta-l"\x3e1.\u6d41\u6c34\u53f7\u662f\u7528\u4e8e\u663e\u793a\u5728\u6d41\u7a0b\u540d\u79f0\u4e2d\uff0c\u4ee5\u4fbf\u533a\u522b\u540c\u4e00\u4e2a\u8868\u5355\u53d1\u8d77\u7684\u6d41\u7a0b\uff1b\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e2.\u91cd\u7f6e\u5468\u671f\u8868\u793a\u6309\u5468\u671f\u91cd\u7f6e\u7f16\u53f7\uff0c\u5982\u7f16\u53f7\u4f4d\u6570\u4e3a3\uff0c\u91cd\u7f6e\u5468\u671f\u4e3a\u65e5\uff0c\u5219\u8868\u793a\u7f16\u53f7\u6bcf\u5929\u90fd\u662f\u4ece001\u5f00\u59cb\u8ba1\u7b97 \x3c/div\x3e\' \x3e\x3c/i\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"serNumRuleContainer" class\x3d"detail-content entity-info pv-20"\x3e\x3cdiv class\x3d"detail-block"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label title"\x3e\u542f\u7528\u6d41\u6c34\u53f7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" name\x3d"id" value\x3d""\x3e\x3cspan name\x3d"isEnable" class\x3d"tzCheckBox e-range" value\x3d"false"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block js_sernumdetailblock"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label title"\x3e\u6d41\u6c34\u53f7\u89c4\u5219\x3cspan\x3e\uff08\u89c4\u5219\u662f\uff1a\u65e5\u671f\u89c4\u5219 + \u7f16\u53f7\uff09\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65e5\u671f\u89c4\u5219\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cselect name\x3d"dateFmt" class\x3d"form-control"\x3e\x3coption value\x3d"0"\x3e\u5e74\x3c/option\x3e\x3coption value\x3d"1"\x3e\u5e74\u6708\x3c/option\x3e\x3coption value\x3d"2"\x3e\u5e74\u6708\u65e5\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7f16\u53f7\u4f4d\u6570\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" name\x3d"tailnumLen" class\x3d"js_numberCheck form-control w-60" value\x3d"3"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u91cd\u7f6e\u5468\u671f\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cselect name\x3d"resetCycle" class\x3d"form-control"\x3e\x3coption value\x3d"0"\x3e\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8bbe\u7f6e\u7ed3\u679c\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls set-text"\x3e\x3cspan\x3e\x3cspan id\x3d"dateFmtResult"\x3e\x3c/span\x3e\x3cspan id\x3d"tailnumResult"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"serNumRuleBottom" class\x3d"operate-btns fr"\x3e\x3ca id\x3d"cancelBtn" type\x3d"button" class\x3d"btn"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca id\x3d"saveBtn" type\x3d"button" class\x3d"btn btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/div\x3e',
"form.formpage":'\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav j_aside-nav" data-nav\x3d"fold"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item router" href\x3d"/forms/\x3c%\x3duserId%\x3e/write"\x3e\x3ci class\x3d"item-icon icon-file-openoffice"\x3e\x3c/i\x3e\u6570\u636e\u8bb0\u5f55\x3c/div\x3e\x3cul class\x3d"sub-nav j_all_formMenu hide"\x3e\x3cli class\x3d"router j_form_write" href\x3d"/forms/\x3c%\x3duserId%\x3e/write"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u6570\u636e\u586b\u5199\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_form-todo" href\x3d"/forms/\x3c%\x3duserId%\x3e/todo"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u5f85\u586b\u5199\u4e0a\u62a5\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_form-finshed" href\x3d"/forms/\x3c%\x3duserId%\x3e/finshed"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u5df2\u586b\u5199\u4e0a\u62a5\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_form-subordinates" href\x3d"/forms/\x3c%\x3duserId%\x3e/subordinates"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u4e0b\u5c5e\u4e0a\u62a5\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c% if(isWeaver \x26\x26 isAdmin) { %\x3e\x3cli\x3e\x3cdiv class\x3d"link-item router" href\x3d"/forms/\x3c%\x3duserId%\x3e/monitorList"\x3e\x3ci class\x3d"item-icon icon-stack-2"\x3e\x3c/i\x3e\u8868\u5355\u76d1\u63a7\x3c/div\x3e\x3cul class\x3d"sub-nav j_all_formMenu hide"\x3e\x3cli class\x3d"router j_form-monitorList" href\x3d"/forms/\x3c%\x3duserId%\x3e/monitorList"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u8868\u5355\u5217\u8868\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_form-monitorChart " href\x3d"/forms/\x3c%\x3duserId%\x3e/monitorChart"\x3e\x3ca class\x3d"link-item"\x3e\x3cspan\x3e\u8d8b\u52bf\u56fe\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"router j_form-label j_typeName" data-type\x3d"form-label" href\x3d"/forms/\x3c%\x3duserId%\x3e/label"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-tasks"\x3e\x3c/i\x3e\u4e91\u8868\u5355\u7ba1\u7406\x3c/a\x3e\x3c/li\x3e\x3c% } %\x3e\x3cli class\x3d"j_form-cloud j_typeName router" data-type\x3d"form-cloud" href\x3d"/forms/\x3c%\x3duserId%\x3e/cloud"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-cloud"\x3e\x3c/i\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_form-trashbin j_mclick router" data-type\x3d"trashbin" href\x3d"/forms/\x3c%\x3duserId%\x3e/trashbin"\x3e\x3ca class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-trash" \x3e\x3c/i\x3e\u56de\u6536\u7ad9\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv id\x3d"j_formscroll" class\x3d"main main-narrow" style\x3d"left:220px"\x3e\x3cdiv id\x3d"j_formContent" class\x3d"col-12 nopd scrollwrapper"\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formpersonal":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"j_managelist_scroll scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list j_toolList"\x3e\x3cli class\x3d"toolkit-item search formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"formsearch-keywords" class\x3d"form-control js_searchkeyword" /\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr j_formIntroduction last"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success" style\x3d"border-top-left-radius: 0;border-bottom-left-radius: 0;"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli class\x3d"js_folder-create-li router js_cloud" href\x3d""\x3e\x3ca id\x3d"js_folder-create"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_biaoge eform-list-wrapper hide"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix ph-10 hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_workflow hide eform-list-wrapper ph-10"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_biaoge"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"eform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_workflow"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"wform-list form-list clearfix j_formlist ui-sortable"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_biaoge"\x3e\x3cul class\x3d"eform-list clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_workflow"\x3e\x3cul class\x3d"wform-list clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli stopped"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis j_entityslider-toggle" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d""\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn btn-sm js_editForm"\x3e\x3cspan\x3e\u7f16\u8f91\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle reportConfig-btn"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm j_dataReportConfig"\x3e\u6570\u636e\u4e0a\u62a5\u8bbe\u7f6e\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"typeahead-search hide j_employee" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"j_insideCollect"\x3e\u5185\u90e8\u901a\u77e5\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_reportConf"\x3e\u5185\u90e8\u5b9a\u65f6\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_continueWrite"\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_shareForm"\x3e\u5916\u90e8\u5206\u53d1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle formmore-btn"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_useflow"\x3e\u4f7f\u7528\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_authConfig"\x3e\u6743\u9650\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"status-box"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_gatherStatus"\x3e\x3cspan class\x3d"dropdown-icon graph"\x3e\x3c/span\x3e\x3ca class\x3d"dropdown-toggle btn-sm"\x3e\u672a\u53d1\u5e03\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_workflow"\x3e\x3cli class\x3d"js_formitemsli"  class\x3d"wform-li formlistsli-li" formtype\x3d"personal"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cspan class\x3d"isGn" style\x3d"display:none"\x3e\u56fa\u5b9a\x3c/span\x3e\x3cspan class\x3d"formItem-disable fs-16 c-999"\x3e\x3ci class\x3d"icon-lock" title\x3d"\u5df2\u505c\u7528\u8868\u5355"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"j_entityslider-toggle ellipsis " data-module\x3d"newflow" data-id\x3d""\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formmanag"\x3e\x3ca id\x3d"flowSequence" class\x3d"entitybox-toggle btn btn-sm" data-module\x3d"flowSequence" data-type\x3d"personal" data-id\x3d"" data-value\x3d""\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_changeFormStatus"\x3e\u505c\u7528\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm" operationtype\x3d"copy"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_serNumRule entitybox-toggle" data-style\x3d\'{"autoheight":true}\' data-id\x3d"" data-module\x3d"serNumRule"\x3e\u6d41\u6c34\u53f7\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"form.formcompany":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"j_managelist_scroll scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list j_toolList"\x3e\x3cli class\x3d"toolkit-item search formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"formsearch-keywords" class\x3d"form-control js_searchkeyword" /\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide"\x3e\x3cdiv id\x3d"forms-filter" class\x3d"btn-group dropdown "  data-toggle\x3d"#form-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm "\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"form-filter-dropdown" class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr j_formIntroduction last"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success" style\x3d"border-top-left-radius: 0;border-bottom-left-radius: 0;"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli class\x3d"js_folder-create-li router js_cloud" href\x3d""\x3e\x3ca id\x3d"js_folder-create"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_biaoge eform-list-wrapper eform-company-wrapper hide"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix ph-10 hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_workflow hide ph-10 hide"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_biaoge"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname" title\x3d""\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"eform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_workflow"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"wform-list form-list j_formlist ui-sortable clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_biaoge"\x3e\x3cul class\x3d"eform-list clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_workflow"\x3e\x3cul class\x3d"wform-list clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli manager stopped"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis j_entityslider-toggle" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d""\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn btn-sm js_editForm"\x3e\x3cspan\x3e\u7f16\u8f91\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle reportConfig-btn"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm j_dataReportConfig"\x3e\u6570\u636e\u4e0a\u62a5\u8bbe\u7f6e\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"typeahead-search hide j_employee" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"j_insideCollect"\x3e\u5185\u90e8\u901a\u77e5\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_reportConf"\x3e\u5185\u90e8\u5b9a\u65f6\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_continueWrite"\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_shareForm"\x3e\u5916\u90e8\u5206\u53d1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle formmore-btn"\x3e\x3ca class\x3d"dropdown-toggle btn-sm btn"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_useflow"\x3e\u4f7f\u7528\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_authConfig"\x3e\u6743\u9650\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"status-box"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_gatherStatus"\x3e\x3cspan class\x3d"dropdown-icon graph"\x3e\x3c/span\x3e\x3ca class\x3d"dropdown-toggle btn-sm"\x3e\u672a\u53d1\u5e03\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_workflow"\x3e\x3cli class\x3d"js_formitemsli"  class\x3d"wform-li formlistsli-li" formtype\x3d"company"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cspan class\x3d"isGn" style\x3d"display:none"\x3e\u56fa\u5b9a\x3c/span\x3e\x3cspan class\x3d"formItem-disable fs-16 c-999"\x3e\x3ci class\x3d"icon-lock" title\x3d"\u5df2\u505c\u7528\u8868\u5355"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"j_entityslider-toggle ellipsis " data-module\x3d"newflow" data-id\x3d""\x3e\x3c/h4\x3e\x3cp id\x3d"form-describe" class\x3d"description ellipsis"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_formmanag"\x3e\x3ca id\x3d"flowSequence" class\x3d"entitybox-toggle btn btn-sm" data-module\x3d"flowSequence" data-type\x3d"company" data-id\x3d"" data-value\x3d""\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/a\x3e\x3ca class\x3d"btn btn-sm js_changeFormStatus"\x3e\u505c\u7528\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_editForm"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm" operationtype\x3d"copy"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_serNumRule entitybox-toggle" data-style\x3d\'{"autoheight":true}\' data-id\x3d"" data-module\x3d"serNumRule"\x3e\u6d41\u6c34\u53f7\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"fei-formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d"" style\x3d"cursor: auto;"\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn-sm btn js_formPreview"\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"form.formemployee":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"j_managelist_scroll scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list j_toolList"\x3e\x3cli class\x3d"toolkit-item search formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"formsearch-keywords" class\x3d"form-control js_searchkeyword" /\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr hide j_formIntroduction last"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_biaoge eform-list-wrapper hide"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix ph-10 hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_workflow hide ph-10 hide"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide js_noresult wform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_biaoge"\x3e\x3cul class\x3d"eform-list form-boxlist clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_workflow"\x3e\x3cul class\x3d"eform-list form-boxlist clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d"" style\x3d"cursor: auto;"\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv  class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_operator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv  class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan class\x3d"j_createtime"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn-sm btn js_formPreview"\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"btn-sm btn js_copyForm"\x3e\x3cspan\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_workflow"\x3e\x3cli class\x3d"js_formboxli js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" data-module\x3d"workflow" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d""\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_operator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan class\x3d"j_createtime"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn-sm btn js_formPreview"\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"btn-sm btn js_copyForm"\x3e\x3cspan\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"form.formdatareport":'\x3cdiv class\x3d"module-detail-view flow-detail-view" id\x3d"datareport-wrap"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u6570\u636e\u4e0a\u62a5\x3c/div\x3e\x3cdiv class\x3d"detail-actions" id\x3d"permissions"\x3e\x3cul\x3e\x3cli id\x3d"datareport-submit" class\x3d"j_btn_save js_display_tool hide" status\x3d"finshed"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"datareport-save" class\x3d"j_btn_save js_display_tool hide" status\x3d"todo"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u6682\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"datareport-back" class\x3d"j_btn_back js_display_tool hide"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u9000\u56de\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"reportContent" class\x3d"scrollwrapper mCus-mh100"  marginbottom\x3d"20"\x3e\x3cdiv  class\x3d"detail-content"\x3e\x3cdiv id\x3d"datareport-container" class\x3d"datareport-container"\x3e\x3cdiv class\x3d"workflow-typename"\x3e\x3cstrong id\x3d"formName" class\x3d"name"\x3e\x3c/strong\x3e\x3cspan id\x3d"ownership" class\x3d"type"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"info-div" class\x3d"detail-block"\x3e\x3cdiv class\x3d"wform-title"\x3e\x3cinput id\x3d"datareport-name" class\x3d"textinput-b title" name\x3d"datareport.name" placeholder\x3d"\u8bf7\u8f93\u5165\u6807\u9898..." v-message-name\x3d"\u4e0a\u62a5\u540d\u79f0" v-maxlength\x3d"100" v-required\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv id\x3d"applicants"  class\x3d"wform-post-info clearfix"\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u6536\u96c6\u4eba:\x3c/label\x3e\x3cdiv class\x3d"control ellipsis"\x3e\x3ca class\x3d"usercard-toggle ellipsis  username applyUser_js" userId\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u90e8\u95e8:\x3c/label\x3e\x3cdiv class\x3d"control ellipsis"\x3e\x3ca class\x3d"department ellipsis applyDepa_js"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u65e5\u671f:\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3cinput type\x3d"text" disabled\x3d"disabled" position\x3d"bottom-left" class\x3d"textinput-b datepicker applyDate_js"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"form-preview"\x3e\x3cdiv id\x3d"datareport-form" class\x3d"form-view hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"datareport-info"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formdatareportlist":'\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"datareport-order" class\x3d"btn btn-sm dropdown-toggle"\x3e\u6392\u5e8f\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" id\x3d"j_order_list"\x3e\x3cli class\x3d"active"\x3e\x3ca class\x3d"orderType"  data-entity\x3d"default"\x3e\u9ed8\u8ba4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"last_update_time"\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"last_comment_time"\x3e\u53cd\u9988\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType"  data-entity\x3d"creater"\x3e\u4e0a\u62a5\u6536\u96c6\u4eba\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown" id\x3d"datareport-filter" data-toggle\x3d"#datareport-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter dropdown-div border-dropdown" id\x3d"datareport-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"report-keywords" name\x3d"datareportsearch" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-bd j_mainbdScr j_sidebarPren"\x3e\x3cdiv id\x3d"reportlist-container" class\x3d"table-tray scrollwrapper"\x3e\x3cdiv class\x3d"tray-cell main-content j_center"\x3e\x3cul id\x3d"report-list" class\x3d"e-list"\x3e\x3c/ul\x3e\x3cdiv id\x3d"reportlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_no_my_datareport nodata-holder"\x3e\x3cdiv class\x3d"mt-70"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u4e0a\u62a5\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide table-more js_more"\x3e\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli  id\x3d"report-clone" class\x3d"datareport filterSlip_js j_entityslider-toggle  report-list no-hover" href\x3d"" data-module\x3d"formdatareport" data-id\x3d"" userId\x3d""\x3e\x3cspan class\x3d"sn-link"\x3e\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3ci class\x3d"icon-chat-3 mr-3 hide"\x3e\x3c/i\x3e\x3cem\x3e\x3c/em\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"form.formreportconfig":'\x3cdiv class\x3d"modal fade modal-grey modal-eform-repeat" id\x3d"form-report-config" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-body j_modal-body nopd"\x3e\x3cdiv class\x3d"module-detail-view wform-sequence-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u4e0a\u62a5\u8bbe\u7f6e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d\'\x3cdiv class\x3d"e-row ta-l"\x3e\u8bf4\u660e\uff1a1.\u5982\u679c\u8868\u5355\u5220\u9664\uff0c\u5219\u4e0d\u4f1a\u7ee7\u7eed\u5b9a\u65f6\u53d1\u9001\u4e0a\u62a5\uff1b\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e2.\u7b26\u5408\u6761\u4ef6\u7684\u8868\u5355\uff0c\u8bbe\u7f6e\u5b9a\u65f6\u4e0a\u62a5\u540e\uff0c\u5982\u679c\u5c06\u72b6\u6001\u6539\u4e3a\u505c\u6b62\uff0c\u5219\u4f1a\u505c\u6b62\u53d1\u9001\u4e0a\u62a5\uff1b\x3c/div\x3e\x3cdiv class\x3d"e-row ta-l"\x3e3.\u5982\u679c\u5f00\u59cb\u65e5\u671f\u4e3a\u5f53\u5929\uff0c\u5219\u7b2c\u4e8c\u5929\u5f00\u59cb\u751f\u6548\uff1b\x3c/div\x3e\' \x3e\x3c/i\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"save-config" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close-conf" class\x3d"detail-slide-close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_repeat_setting" style\x3d"height:370px;" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"eform-repeat-setting"\x3e\x3cdiv class\x3d"mod-box" id\x3d"config-Setting"\x3e\x3cdiv id\x3d"reportConf-participants" class\x3d"period-item"\x3e\x3clabel class\x3d"label"\x3e\u4e0a\u62a5\u8303\u56f4:\x3c/label\x3e\x3cdiv class\x3d"j_reportuser-select content mr-0"\x3e\x3cselect class\x3d"form-control" id\x3d"user-select"\x3e\x3coption value\x3d"user" selected\x3d"selected"\x3e\u7528\u6237\x3c/option\x3e\x3coption value\x3d"department"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption value\x3d"allpeople"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"j_formField-condition content"\x3e\x3cdiv class\x3d"j_userSelect" \x3e\x3cdiv class\x3d"j_optcontainer" id\x3d"userContainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-report-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm j_user_btn"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_deptSelect hide"\x3e\x3cdiv class\x3d"j_optdeptcontainer" id\x3d"departmentContainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u90e8\u95e8\u540d\u79f0" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-report-department" data-entity\x3d"department"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"department" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u90e8\u95e8" class\x3d"control-btn btn btn-sm j_dept_btn"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"period-item"\x3e\x3clabel class\x3d"label"\x3e\u91cd\u3000\u3000\u590d:\x3c/label\x3e\x3cdiv class\x3d"content"\x3e\x3cselect class\x3d"form-control" id\x3d"config-repeat-type"\x3e\x3coption value\x3d"everyday" selected\x3d"selected"\x3e\u6bcf\u5929\x3c/option\x3e\x3coption value\x3d"everyWeek"\x3e\u6bcf\u5468\x3c/option\x3e\x3coption value\x3d"everyMonth"\x3e\u6bcf\u6708\x3c/option\x3e\x3coption value\x3d"everyQuarter"\x3e\u6bcf\u5b63\u5ea6\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"label"\x3e\u9891\u7387:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cinput type\x3d"text" value\x3d"1" size\x3d"10" id\x3d"frequency-input" class\x3d"form-control input-num mr-5"/\x3e\x3cspan id\x3d"frequency-type"\x3e\u5929\x3c/span\x3e\x3cspan id\x3d"week-repeat" class\x3d"weekgroup hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"sunday" /\x3e\u5468\u65e5\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"monday" /\x3e\u5468\u4e00\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"tuesday" /\x3e\u5468\u4e8c\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"wednesday" /\x3e\u5468\u4e09\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"thursday" /\x3e\u5468\u56db\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"friday" /\x3e\u5468\u4e94\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatWk" value\x3d"saturday" /\x3e\u5468\u516d\x3c/label\x3e\x3c/span\x3e\x3cdiv id\x3d"ford-back" class\x3d"content hide"\x3e\x3cselect class\x3d"form-control " id\x3d"forward-backward"\x3e\x3coption value\x3d"forward" selected\x3d"selected"\x3e\u6b63\u6570\x3c/option\x3e\x3coption value\x3d"backward"\x3e\u5012\u6570\x3c/option\x3e\x3c/select\x3e\x3clabel class\x3d"label"\x3e\u7b2c\x3c/label\x3e\x3cinput type\x3d"text" value\x3d"1" size\x3d"10" id\x3d"fb-days" class\x3d"form-control input-num "/\x3e\x3cspan\x3e\u5929\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"period-item j_start-date"\x3e\x3clabel class\x3d"label"\x3e\u5f00\u59cb\u65f6\u95f4:\x3c/label\x3e\x3cdiv class\x3d"content"\x3e\x3cinput type\x3d"text" class\x3d"j_start form-control textinput datetimepicker w-150" /\x3e\x3c/div\x3e\x3clabel class\x3d"label"\x3e\u5982\u679c\u8bbe\u7f6e\u7684\u5f00\u59cb\u65e5\u671f\u662f\u5f53\u5929\uff0c\u5219\u7b2c\u4e8c\u5929\u5f00\u59cb\u751f\u6548\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"period-item"\x3e\x3cdiv class\x3d"label"\x3e\u7ed3\u3000\u3000\u675f:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cselect class\x3d"j_end-repeat form-control"\x3e\x3coption value\x3d"never" selected\x3d"selected"\x3e\u6c38\u4e0d\x3c/option\x3e\x3coption value\x3d"number"\x3e\u6b21\u6570\x3c/option\x3e\x3coption value\x3d"date"\x3e\u65e5\u671f\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cspan class\x3d"j_happen-times hide"\x3e\x3cdiv class\x3d"label"\x3e\u53d1\u751f:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cinput value\x3d"1" type\x3d"text" class\x3d"j_times form-control input-num" /\x3e\u6b21\u540e\x3c/div\x3e\x3c/span\x3e\x3cspan class\x3d"j_end-date hide content ml-0"\x3e\x3cinput type\x3d"text" class\x3d"j_end form-control datetimepicker" format\x3d"yyyy-mm-dd hh:ii" minview\x3d"day" /\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"setting-result"\x3e\x3cdiv id\x3d"config_result"\x3e\x3clabel class\x3d"mr-10 j_resultLabel"\x3e\x3c/label\x3e\x3cspan class\x3d"j_configResult"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formauthconfig":'\x3cdiv class\x3d"modal fade modal-grey modal-eform-repeat" id\x3d"form-auth-config" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-body j_modal-body nopd" style\x3d"height:440px;"\x3e\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u6743\u9650\u8bbe\u7f6e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"authconfig-close" class\x3d"detail-slide-close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-repeat-setting"\x3e\x3cdiv class\x3d"mod-box" id\x3d"authconfig-setting"\x3e\x3cdiv id\x3d"look-auth" class\x3d"period-item"\x3e\x3clabel class\x3d"label"\x3e\u6570\u636e\u7edf\u8ba1\u67e5\u770b\u6743\u9650:\x3c/label\x3e\x3cdiv class\x3d"j_lookAuthSelect content mr-0"\x3e\x3cselect class\x3d"form-control" id\x3d"lookauth-select"\x3e\x3coption value\x3d"user" selected\x3d"selected"\x3e\u7528\u6237\x3c/option\x3e\x3coption value\x3d"department"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption value\x3d"allpeople"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_hideSelect"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_lookAuthUserDept content"\x3e\x3cdiv class\x3d"j_lookAuthUser" \x3e\x3cdiv class\x3d"j_lookuserContainer" id\x3d"lookusercontainer"\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-lookauth-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm j_user_btn"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_lookAuthDept hide"\x3e\x3cdiv class\x3d"j_lookdeptContainer" id\x3d"lookdeptcontainer"\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u90e8\u95e8\u540d\u79f0" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-lookauth-department" data-entity\x3d"department"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"department" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u90e8\u95e8" class\x3d"control-btn btn btn-sm j_dept_btn"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formcontinuewrite":'\x3cdiv class\x3d"modal fade modal-grey modal-eform-repeat" id\x3d"form-continue-write" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-body j_modal-body nopd" style\x3d"height:440px;"\x3e\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand j_header"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\u8bbe\u7f6e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"contWrite-close" class\x3d"detail-slide-close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-repeat-setting"\x3e\x3cdiv class\x3d"mod-box" id\x3d"contWrite-setting"\x3e\x3cdiv id\x3d"continue-write" class\x3d"period-item"\x3e\x3clabel class\x3d"label j_write-label"\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\u8bbe\u7f6e\x3c/label\x3e\x3cdiv class\x3d"j_contwriteSelect content mr-0"\x3e\x3cselect class\x3d"form-control" id\x3d"contwrite-select"\x3e\x3coption value\x3d"user" selected\x3d"selected"\x3e\u7528\u6237\x3c/option\x3e\x3coption value\x3d"department"\x3e\u90e8\u95e8\x3c/option\x3e\x3coption value\x3d"allpeople"\x3e\u6240\u6709\u4eba\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"j_selected entity-container ml-10"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide j_hideSelect"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_contWrite-UserDept content"\x3e\x3cdiv class\x3d"j_contWriteUser" \x3e\x3cdiv class\x3d"j_writeuserContainer" id\x3d"writeusercontainer"\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-contwrite-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm j_user_btn"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_contWriteDept hide"\x3e\x3cdiv class\x3d"j_writedeptContainer" id\x3d"writedeptcontainer"\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u90e8\u95e8\u540d\u79f0" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-contwrite-department" data-entity\x3d"department"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"department" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u90e8\u95e8" class\x3d"control-btn btn btn-sm j_dept_btn"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formwrite":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"j_managelist_scroll scrollwrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list j_toolList"\x3e\x3cli class\x3d"toolkit-item j_formIntroduction fr"\x3e\x3ca class\x3d"btn btn-sm btn-warning js_newcategory"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u5206\u7c7b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr j_form_set_btn"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown j_form_set"\x3e\x3cli class\x3d"j_cloudpage"\x3e\x3ca class\x3d"j_cloudpage-a"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre j_form_new"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fl"\x3e\x3cdiv id\x3d"forms-filter" class\x3d"btn-group dropdown "  data-toggle\x3d"#form-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm "\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"form-filter-dropdown" class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search formSearch js_searchform fl"\x3e\x3cinput type\x3d"text" id\x3d"formsearch-keywords" class\x3d"form-control js_searchkeyword" /\x3e\x3ci class\x3d"icon-search j_form_search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_biaoge eform-list-wrapper hide"\x3e \x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"js_form-list eform-manage-list clearfix ph-10 hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_biaoge"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"eform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_biaoge"\x3e\x3cul class\x3d"eform-list clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli stopped"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis router" href\x3d""\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"form-tag-select"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn btn-sm js_editForm"\x3e\x3cspan\x3e\u7f16\u8f91\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle reportConfig-btn"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm j_dataReportConfig"\x3e\u6570\u636e\u4e0a\u62a5\u8bbe\u7f6e\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"typeahead-search hide j_employee" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"j_insideCollect"\x3e\u5185\u90e8\u901a\u77e5\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_reportConf"\x3e\u5185\u90e8\u5b9a\u65f6\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_continueWrite"\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_shareForm"\x3e\u5916\u90e8\u5206\u53d1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle formmore-btn"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm"\x3e\u66f4\u591a\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3cli\x3e\x3ca class\x3d"js_formPreview"\x3e\u9884\u89c8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_copyForm"\x3e\u590d\u5236\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_deleteForm"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_renameForm"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_useflow"\x3e\u4f7f\u7528\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"js_authConfig"\x3e\u6743\u9650\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3ca class\x3d"btn-sm btn js_formPreview-only hide" formid\x3d""\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"status-box"\x3e\x3cspan class\x3d"team-icon graph j_team-icon hide" title\x3d"\u56e2\u961f\u8868\u5355"\x3e\x3c/span\x3e\x3cspan class\x3d"recover-icon graph j_recover-icon hide"\x3e\x3c/span\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_gatherStatus"\x3e\x3ca class\x3d"dropdown-toggle btn-sm"\x3e\u505c\u7528\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown dropdown-menu-simplify"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"noform-clone" class\x3d"hide"\x3e\x3cdiv id\x3d"noformsShow" class\x3d"j_no_my_workflow nodata-holder mv-50"\x3e\x3cdiv\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u60a8\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u8868\u5355\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u652f\u6301\u81ea\u5b9a\u4e49\u8868\u5355\u5185\u5bb9\u548c\u6570\u636e\u6536\u96c6\u5206\u6790\u7ba1\u7406\uff0c\u53ef\u4ee5\u65b0\u5efa\u8868\u5355\uff0c\x3cbr/\x3e\u8fd8\u53ef\u4ee5\u5728\u4e91\u8868\u5355\u5e93\u4e2d\u9009\u62e9\u8868\u5355\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e0b\u63a8\u8350\u8868\u5355\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"pop-forms" class\x3d"eform-cloud-item" data-form-id\x3d""\x3e\x3ca class\x3d"item-title word-limit j_title" data-operate\x3d"preview"\x3e\x3c/a\x3e\x3cp class\x3d"item-info"\x3e\x3c/p\x3e\x3cp class\x3d"item-desc"\x3e\x3c/p\x3e\x3cdiv class\x3d"dlcnt" title\x3d""\x3e\x3cspan class\x3d"use"\x3e\u4f7f\u7528\x3c/span\x3e\x3cspan class\x3d"countnum"\x3e\x3c/span\x3e\u6b21\x3c/div\x3e\x3cdiv class\x3d"opbtns btn-group"\x3e\x3ca class\x3d"btn btn-default op-preview j_preview" href\x3d"#" data-operate\x3d"preview"\x3e\x3ci class\x3d"icon-eye"\x3e\x3c/i\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-default op-use j_use" data-operate\x3d"copy"\x3e\x3ci class\x3d"icon-write"\x3e\x3c/i\x3e\u4f7f\u7528\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formsubordinate":'\x3cdiv class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanage-container"\x3e\x3cdiv id\x3d"formmanagelist" class\x3d"j_managelist_scroll scrollwrapper formmanage-wrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list fl js_formtab hide"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active j_biaoge-tab"\x3e\x3ca\x3e\x3ci class\x3d"icon-tree glyphicon"\x3e\x3c/i\x3e\u6570\u636e\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_workflow-tab"\x3e\x3ca\x3e\x3ci class\x3d"icon-user glyphicon"\x3e\x3c/i\x3e\u5ba1\u6279\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"toolkit-list j_toolList"\x3e\x3cli class\x3d"toolkit-item search formSearch js_searchform"\x3e\x3cinput type\x3d"text" id\x3d"formsearch-keywords" class\x3d"form-control js_searchkeyword" /\x3e\x3ci class\x3d"icon-search" title\x3d"\u8868\u5355\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item hide"\x3e\x3cdiv id\x3d"forms-filter" class\x3d"btn-group dropdown "  data-toggle\x3d"#form-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm "\x3e\u7b5b\u9009 \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv id\x3d"form-filter-dropdown" class\x3d"dropdown-filter border-dropdown dropdown-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_biaoge bg-ee"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small bg-ee"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"form-list-wrap js_form-list form-list-org clearfix bg-ee ph-10 hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper js_forms j_workflow hide bg-white ph-10" data-load\x3d"false"\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"form-list-wrap js_form-list form-list-org clearfix bg-white hide"\x3e\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_biaoge"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"eform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"js_formcategory j_workflow"\x3e\x3cdiv class\x3d"form-category-hd eform-cty-hd j_form-category"\x3e\x3ch4 id\x3d"cate-name"\x3e\x3cspan class\x3d"js_categoryname ctyname"\x3e\x3c/span\x3e\x3cspan class\x3d"form-acount js_formcount"\x3e\x3c/span\x3e\x3c/h4\x3e\x3cspan class\x3d"j_formcateInfo formcatetip hide"\x3e\u60a8\u53ef\u4ee5\u62d6\u62fd\u8868\u5355\u5206\u7c7b\u8fdb\u884c\u6392\u5e8f\uff0c\u4ea6\u53ef\u62d6\u62fd\u5206\u7c7b\u4e0b\u7684\u8868\u5355\u8fdb\u884c\u6392\u5e8f\uff1b\u9f20\u6807\u70b9\u51fb\u5206\u7c7b\u540d\u79f0\u56de\u8f66\u5373\u53ef\u4fdd\u5b58\u4fee\u6539\uff0cESC\u4e0d\u4fdd\u5b58\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"eform-list clearfix j_formlist"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_biaoge"\x3e\x3cul class\x3d"eform-list form-boxlist clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"search-boxlist"\x3e\x3cdiv class\x3d"j_Search j_workflow"\x3e\x3cul class\x3d"eform-list form-boxlist clearfix js_searchlist"\x3e\x3c/ul\x3e\x3cinput type\x3d"hidden" id\x3d"pageNo"\x3e\x3cdiv class\x3d"hide js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"loadMore" class\x3d"blogs-more ta-c js_loadMore hide"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_biaoge"\x3e\x3cli class\x3d"js_formboxli js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d"" style\x3d"cursor: auto;"\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"group-data"\x3e\x3ca class\x3d"j_fillCount router"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv  class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_operator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv  class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan class\x3d"j_createtime"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn-sm btn js_formPreview"\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"btn-sm btn js_copyForm"\x3e\x3cspan\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"j_workflow"\x3e\x3cli class\x3d"js_formboxli js_formitemsli"\x3e\x3cdiv class\x3d"list-box js_formListBox"\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"form-number" class\x3d"serial"\x3e1\x3c/span\x3e\x3ch4 id\x3d"form-title" class\x3d"ellipsis j_entityslider-toggle" data-module\x3d"biaogeform" skiptype\x3d"edit" href\x3d"" data-id\x3d"" userId\x3d"" renderType\x3d""\x3e\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"text-content"\x3e\x3cdiv class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_operator"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"creat-message"\x3e\x3cspan\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan class\x3d"j_createtime"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group fr js_btn-group js_manager_btn"\x3e\x3ca class\x3d"btn-sm btn js_formPreview"\x3e\x3cspan\x3e\u9884\u89c8\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"btn-sm btn js_copyForm"\x3e\x3cspan\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"form.writeform":'\x3cdiv class\x3d"form-preview module-detail-view writeform-content"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-from"\x3e\x3c/i\x3e\x3cspan class\x3d"j_form_title"\x3e\u586b\u5199\u8868\u5355\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli id\x3d"write-form-submit" class\x3d"j_btn_save js_display_tool" status\x3d"finshed"\x3e\x3ca\x3e\x3ci class\x3d"icon-ok-sign"\x3e\x3c/i\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"write-form-save" class\x3d"j_btn_save js_display_tool" status\x3d"todo"\x3e\x3ca\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u6682\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_btn_close detail-slide-close"\x3e\x3ca\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper j_formContainer"\x3e\x3cdiv class\x3d"workflow-typename"\x3e\x3cstrong id\x3d"formName" class\x3d"name"\x3e\x3c/strong\x3e\x3c/div\x3e\x3cdiv id\x3d"form-info-div" class\x3d"detail-block"\x3e\x3cdiv class\x3d"wform-title"\x3e\x3cinput id\x3d"form-name" class\x3d"textinput-b title" name\x3d"" placeholder\x3d"" v-message-name\x3d"\u4e0a\u62a5\u540d\u79f0" v-maxlength\x3d"100" v-required\x3d"true"\x3e\x3c/input\x3e\x3c/div\x3e\x3cdiv id\x3d"applicants"  class\x3d"wform-post-info clearfix"\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u6536\u96c6\u4eba:\x3c/label\x3e\x3cdiv class\x3d"control ellipsis"\x3e\x3ca class\x3d"usercard-toggle ellipsis  username applyUser_js" userId\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u90e8\u95e8:\x3c/label\x3e\x3cdiv class\x3d"control ellipsis"\x3e\x3ca class\x3d"department ellipsis applyDepa_js j_dept"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3clabel\x3e\u65e5\u671f:\x3c/label\x3e\x3cdiv class\x3d"control"\x3e\x3ca class\x3d"j_date ellipsis department applyDepa_js"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js-biaoge-form form-view"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.formtag":'\x3cdiv class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-label"\x3e\x3c/i\x3e\x3cspan class\x3d"j_tag_label"\x3e\u6211\u7684\u6807\u7b7e:\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"controls tag-controls controls2"\x3e\x3cdiv id\x3d"tags" class\x3d"entity-container tags-entity-container" data-noConfirm\x3d"true" data-url\x3d""\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" id\x3d"typeahead-tag" class\x3d"control-input typeahead tag" data-entity\x3d"formtag" placeholder\x3d""/\x3e\x3ca class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn entity-item-add"\x3e\x3ci title\x3d"\u6dfb\u52a0\u6807\u7b7e" data-placement\x3d"top" data-toggle\x3d"tooltip" class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e',
"form.formtagnew":'\x3cli id\x3d"formtag-container" class\x3d"formtag-container"\x3e\x3ch5 class\x3d"text-center title"\x3e\u8bbe\u7f6e\u6211\u7684\u8868\u5355\u5206\u7c7b\x3c/h5\x3e\x3cdiv class\x3d"j_formtagScr scrollwrapper" height\x3d"200" auto-scroll\x3d"no"\x3e\x3cul class\x3d"j_formtag-ul formtag-ul"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formtag-create" class\x3d"formtag-create"\x3e\x3cinput name\x3d"formtagcreate" value\x3d"" id\x3d"formtagcreate-input" class\x3d"form-control"\x3e\x3ca class\x3d"j_tagcreate btn btn-xs btn-primary ml-5"\x3e\u6dfb\u52a0\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3cdiv id\x3d"formtag-li-clone" class\x3d"hide"\x3e\x3cli\x3e\x3ca\x3e\x3cinput class\x3d"j_tagname tagname form-control edit-disabled" title\x3d"" data-placement\x3d"top" style\x3d"width:110px;" readonly\x3d"true"\x3e\x3cspan class\x3d"opt"\x3e\x3ci class\x3d"icon-pencil j_tagedit"\x3e\x3c/i\x3e\x3ci class\x3d"icon-trash j_tagdelete"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"choose"\x3e\x3cinput class\x3d"j_choose" type\x3d"radio" /\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e',
"workreport.workreportpage":'\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-report"\x3e\x3c/i\x3e\u62a5\u544a\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"j_mine"\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport"\x3e\u6211\u7684\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_share "\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport/share"\x3e\u5171\u4eab\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_replay "\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport/replay"\x3e\u56de\u590d\u6211\u7684\x3cspan class\x3d"fr j_replayCount" \x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_comment "\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport/comment"\x3e\u8bc4\u8bba\u6211\u7684\x3cspan class\x3d"fr j_commentCount" \x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_unread "\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport/unread"\x3e\u672a\u8bfb\u62a5\u544a\x3cspan class\x3d"fr j_unreadCount" \x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_statistics"\x3e\x3ca class\x3d"link-item router" href\x3d"/workreport/statistics"\x3e\u62a5\u544a\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv class\x3d"main"\x3e\x3cdiv class\x3d"reports-panel" id\x3d"yearPanel"\x3e\x3c% if(flag) {%\x3e\x3cdiv class\x3d"reports-left"\x3e\x3cdiv class\x3d"js_reportsnav_scroll scrollwrapper" marginbottom\x3d"20"\x3e\x3cul class\x3d"reports-someoneNav"\x3e\x3cli class\x3d"no-result hide"\x3e\u6ca1\u6709\u6570\u636e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"j_more feedback-more common-more hide"\x3e\u4e0b\u4e00\u9875\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-right reports-right-full reports-someone" id\x3d"reports-right"\x3e\x3c/div\x3e\x3c% }else{ %\x3e\x3cdiv id\x3d"reports-left" class\x3d"reports-left" \x3e\x3c/div\x3e\x3cdiv id\x3d"reports-right" class\x3d"reports-right" \x3e\x3c/div\x3e\x3cdiv id\x3d"member-layer" class\x3d"member-layer text-center"\x3e\x3c/div\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% if(flag){ %\x3e\x3cdiv id\x3d"reportClone" class\x3d"hide"\x3e\x3cli class\x3d"clearfix active "\x3e\x3cdiv class\x3d"pull-left avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"someoneNav-right"\x3e\x3ch4\x3e\x3ca   class\x3d"ellipsis router j_reportTitle" href\x3d"#"\x3e\u5434\u7389\u5357\u7684\u7b2c27\u5468\u8ba1\u5212\u603b\u7ed3\x3c/a\x3e\x3c/h4\x3e\x3cp\x3e\x3cspan class\x3d"author"\x3e\x3c/span\x3e\x3cspan class\x3d"time"\x3e07-17 12:00\x3c/span\x3e\x3c/p\x3e\x3cspan class\x3d"someoneNav-right-arrow"\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"reportContentClone" class\x3d"hide"\x3e\x3cdiv class\x3d"reports-head"\x3e\x3cspan class\x3d"reports-caption" id\x3d"reportTitle"\x3e\x3c/span\x3e\x3cspan class\x3d"pull-right time" id\x3d"createTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"report-result"\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"normal"\x3e\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u5de5\u4f5c\u603b\u7ed3\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"summary"\x3e\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan  id\x3d"planTitle"\x3e\u4e0b\u5468\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"plan"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } %\x3e',
"workreport.report":'\x3cdiv id\x3d"one"\x3e\x3cdiv class\x3d"j_header"\x3e\x3c/div\x3e\x3cdiv class\x3d"center-nav reports-nav"\x3e\x3cul class\x3d"nav"\x3e\x3cli \x3e\x3ca class\x3d"myreport-link" id\x3d"myReport"\x3e\u6211\u7684\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right hide" id\x3d"all-read"\x3e\x3ca \x3e\u5168\u90e8\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca id\x3d"unread" class\x3d"router" href\x3d"/workreport/unread"\x3e\u672a\u8bfb\u62a5\u544a(\x3ci id\x3d"unreadCount"\x3e0\x3c/i\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/comment" id\x3d"commentMe"\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3ca class\x3d"router right-a" href\x3d"/workreport/unreadComment" id\x3d"commentMe-unread"\x3e\x3cspan class\x3d"hide"\x3e(\u672a\u8bfb:\x3ci id\x3d"commentMeCount"\x3e0\x3c/i\x3e)\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/replay" id\x3d"replayMe"\x3e\u56de\u590d\u6211\u7684\x3c/a\x3e\x3ca class\x3d"router right-a" href\x3d"/workreport/unreadReplay" id\x3d"replayMe-unread"\x3e\x3cspan class\x3d"hide"\x3e(\u672a\u8bfb:\x3ci id\x3d"replayMeCount"\x3e0\x3c/i\x3e)\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/share" id\x3d"share"\x3e\u5171\u4eab\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-panel" id\x3d"yearPanel"\x3e\x3cdiv id\x3d"reports-left" class\x3d"reports-left" \x3e\x3c/div\x3e\x3cdiv id\x3d"reports-right" class\x3d"reports-right" \x3e\x3c/div\x3e\x3cdiv id\x3d"member-layer" class\x3d"member-layer text-center"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.reportcontent":'\x3cdiv class\x3d"reports-head"\x3e\x3cspan class\x3d"reports-caption" id\x3d"title"\x3e \x3c/span\x3e\x3cspan id\x3d"weekDay" class\x3d"ml-5"\x3e\x3c/span\x3e \x3cspan id\x3d"createTime" class\x3d"time"\x3e\x3c/span\x3e \x3cspan\x3e\x3ca title\x3d"\u6253\u5370"id\x3d"wr-print" data-toggle\x3d"tooltip" data-placement\x3d"top" class\x3d"mh-5 fs-14 hide"\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u5bfc\u51fa" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-export" class\x3d"fs-14 hide"\x3e\x3ci class\x3d"icon-file-word"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"btn-group pull-right hide" id\x3d"switch"\x3e\x3ca class\x3d"btn" class\x3d"router " id\x3d"prev"\x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"current"\x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"next"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workreportcontent" class\x3d"scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv class\x3d"j_loading loading_large hide"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan id\x3d"contentTitle"\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/span\x3e\x3cspan class\x3d"pull-right"\x3e\x3ca class\x3d"entitybox-toggle"data-module\x3d"weeklyblog" id\x3d"weeklyblog"\x3e\x3cstrong id\x3d"dayReport"\x3e\x3c/strong\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u5de5\u4f5c\u6210\u6548..." id\x3d"content"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u603b\u7ed3\u5fc3\u5f97\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u603b\u7ed3\u5fc3\u5f97..." id\x3d"summary"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan id\x3d"planTitle"\x3e\u4e0b\u5468\u8ba1\u5212\x3c/span\x3e\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u5de5\u4f5c\u8ba1\u5212..." id\x3d"plan"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"report-moreinfo mt-20"\x3e\x3cdiv class\x3d"detail-block entity-info nomg"\x3e\x3cdiv id\x3d"report-share" class\x3d"control-group hide" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3cdiv id\x3d"report-attachment" class\x3d"control-group"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-panel" class\x3d"reports-input hide"\x3e\x3ch5\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e\x3cdiv id\x3d"week-blog"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.reportcontentstat":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3cspan class\x3d"reports-caption" id\x3d"title"\x3e \x3c/span\x3e\x3cspan id\x3d"weekDay" class\x3d"ml-5"\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u6253\u5370" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-print" class\x3d"mh-5 fs-14 hide"\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u5bfc\u51fa" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-export" class\x3d"fs-14 hide"\x3e\x3ci class\x3d"icon-file-word"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"btn-group pull-right mt-8 mr-10 hide" id\x3d"switch"\x3e\x3ca class\x3d"btn" class\x3d"router " id\x3d"prev" \x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"current"\x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"next"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workreportcontent" class\x3d"scrollwrapper" marginbottom\x3d"50"\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan id\x3d"contentTitle"\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/span\x3e\x3cspan class\x3d"pull-right"\x3e\x3ca class\x3d"entitybox-toggle"data-module\x3d"weeklyblog" id\x3d"weeklyblog"\x3e\x3cstrong id\x3d"dayReport"\x3e\x3c/strong\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u5de5\u4f5c\u6210\u6548..." id\x3d"content"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u603b\u7ed3\u5fc3\u5f97\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u603b\u7ed3\u5fc3\u5f97..." id\x3d"summary"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-input"\x3e\x3cdiv class\x3d"reports-input-tit"\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan id\x3d"planTitle"\x3e\u4e0b\u5468\u8ba1\u5212\x3c/span\x3e\x3c/div\x3e\x3ctextarea class\x3d"form-control" placeholder\x3d"\u6b64\u5904\u586b\u5199\u5de5\u4f5c\u8ba1\u5212..." id\x3d"plan"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"report-moreinfo mt-20"\x3e\x3cdiv class\x3d"detail-block entity-info nomg"\x3e\x3cdiv id\x3d"report-share" class\x3d"control-group hide" icon\x3d"#i-share"\x3e\x3c/div\x3e\x3cdiv id\x3d"report-attachment" class\x3d"control-group"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-panel" class\x3d"reports-input hide"\x3e\x3ch5\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e\x3cdiv id\x3d"week-blog"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.readonlyreportcontent":'\x3cdiv class\x3d"reports-head"\x3e\x3cspan class\x3d"reports-caption" id\x3d"title"\x3e \x3c/span\x3e\x3cspan id\x3d"weekDay" class\x3d"ml-5"\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u6253\u5370" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-print" class\x3d"mh-5 fs-14 hide"\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u5bfc\u51fa" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-export" class\x3d"fs-14 hide"\x3e\x3ci class\x3d"icon-file-word"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"btn-group pull-right hide" id\x3d"switch"\x3e\x3ca class\x3d"btn" class\x3d"router " id\x3d"prev" \x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"current"\x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"next"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workreportcontent" class\x3d"scrollwrapper" marginbottom\x3d"50"\x3e\x3cdiv class\x3d"loading_large ps-a hide"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"report-result mb-20"\x3e\x3cspan class\x3d"pull-right"\x3e\x3ca href\x3d""\x3e\x3ca class\x3d"entitybox-toggle" data-module\x3d"weeklyblog" id\x3d"weeklyblog"\x3e\x3cstrong id\x3d"dayReport"\x3e\x3c/strong\x3e\x3c/a\x3e\x3c/span\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan id\x3d"contentTitle"\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"content"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u603b\u7ed3\u5fc3\u5f97\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"summary"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan id\x3d"planTitle"\x3e\u4e0b\u5468\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"plan"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"entity-info nomg"\x3e\x3cdiv id\x3d"report-attachment" class\x3d"control-group" style\x3d"border:1px solid #d5d5d5; border-radius:3px"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-panel" class\x3d"blog-print-content hide"\x3e\x3ch5\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e\x3cdiv id\x3d"week-blog"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.readonlyreportcontentstat":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3cspan class\x3d"reports-caption" id\x3d"title"\x3e \x3c/span\x3e\x3cspan id\x3d"weekDay" class\x3d"ml-5"\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u6253\u5370" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-print" class\x3d"mh-5 fs-14 hide"\x3e\x3ci class\x3d"icon-print"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan\x3e\x3ca title\x3d"\u5bfc\u51fa" data-toggle\x3d"tooltip" data-placement\x3d"top" id\x3d"wr-export" class\x3d"fs-14 hide"\x3e\x3ci class\x3d"icon-file-word"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"btn-group pull-right mt-8 mr-10 hide" id\x3d"switch"\x3e\x3ca class\x3d"btn" class\x3d"router " id\x3d"prev" \x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"current"\x3e\x3c/a\x3e \x3ca class\x3d"btn" class\x3d"router" id\x3d"next"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"workreportcontent" class\x3d"scrollwrapper" marginbottom\x3d"50"\x3e\x3cdiv class\x3d"loading_large ps-a hide"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"report-result mb-20"\x3e\x3cspan class\x3d"pull-right"\x3e\x3ca href\x3d""\x3e\x3ca class\x3d"entitybox-toggle" data-module\x3d"weeklyblog" id\x3d"weeklyblog"\x3e\x3cstrong id\x3d"dayReport"\x3e\x3c/strong\x3e\x3c/a\x3e\x3c/span\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan id\x3d"contentTitle"\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"content"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u603b\u7ed3\u5fc3\u5f97\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"summary"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan id\x3d"planTitle"\x3e\u4e0b\u5468\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"plan"\x3e\u5c1a\u672a\u586b\u5199\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"entity-info nomg"\x3e\x3cdiv id\x3d"report-attachment" class\x3d"control-group" style\x3d"border:1px solid #d5d5d5; border-radius:3px"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-panel" class\x3d"blog-print-content hide"\x3e\x3ch5\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e\x3cdiv id\x3d"week-blog"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.reporttype":'\x3cdiv id\x3d"one"\x3e\x3cdiv class\x3d"j_header"\x3e\x3c/div\x3e\x3cdiv class\x3d"center-nav reports-nav"\x3e\x3cul class\x3d"nav"\x3e\x3cli\x3e\x3ca id\x3d"myReport" class\x3d"myreport-link"\x3e\u6211\u7684\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right hide" id\x3d"all-read"\x3e\x3ca \x3e\u5168\u90e8\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca id\x3d"unread" class\x3d"router" href\x3d"/workreport/unread"\x3e\u672a\u8bfb\u62a5\u544a(\x3ci id\x3d"unreadCount"\x3e0\x3c/i\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/comment" id\x3d"commentMe"\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3ca class\x3d"router right-a" href\x3d"/workreport/unreadComment" id\x3d"commentMe-unread"\x3e\x3cspan class\x3d"hide"\x3e(\u672a\u8bfb:\x3ci id\x3d"commentMeCount"\x3e0\x3c/i\x3e)\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/replay" id\x3d"replayMe"\x3e\u56de\u590d\u6211\u7684\x3c/a\x3e\x3ca class\x3d"router right-a" href\x3d"/workreport/unreadReplay" id\x3d"replayMe-unread"\x3e\x3cspan class\x3d"hide"\x3e(\u672a\u8bfb:\x3ci id\x3d"replayMeCount"\x3e0\x3c/i\x3e)\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pull-right"\x3e\x3ca class\x3d"router left-a" href\x3d"/workreport/share" id\x3d"share"\x3e\u5171\u4eab\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-panel"\x3e\x3cdiv class\x3d"reports-left"\x3e\x3cdiv class\x3d"js_reportsnav_scroll scrollwrapper" marginbottom\x3d"24"\x3e\x3cul class\x3d"reports-someoneNav"\x3e\x3cli class\x3d"no-result hide"\x3e\u6ca1\u6709\u6570\u636e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"j_more feedback-more common-more hide"\x3e\u4e0b\u4e00\u9875\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-right reports-right-full reports-someone" id\x3d"reports-right"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"reportClone" class\x3d"hide"\x3e\x3cli class\x3d"clearfix active "\x3e\x3cdiv class\x3d"pull-left avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"someoneNav-right"\x3e\x3ch4\x3e\x3ca   class\x3d"ellipsis router j_reportTitle" href\x3d"#"\x3e\u5434\u7389\u5357\u7684\u7b2c27\u5468\u8ba1\u5212\u603b\u7ed3\x3c/a\x3e\x3c/h4\x3e\x3cp\x3e\x3cspan class\x3d"author"\x3e\x3c/span\x3e\x3cspan class\x3d"time"\x3e07-17 12:00\x3c/span\x3e\x3c/p\x3e\x3cspan class\x3d"someoneNav-right-arrow"\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"reportContentClone" class\x3d"hide"\x3e\x3cdiv class\x3d"reports-head"\x3e\x3cspan class\x3d"reports-caption" id\x3d"reportTitle"\x3e\x3c/span\x3e\x3cspan class\x3d"pull-right time" id\x3d"createTime"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"reports-body"\x3e\x3cdiv class\x3d"report-result"\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u5b8c\u6210\u5de5\u4f5c\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"normal"\x3e\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-idea"\x3e\x3c/i\x3e\u5de5\u4f5c\u603b\u7ed3\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"summary"\x3e\x3c/div\x3e\x3ch4\x3e\x3ci class\x3d"graph graph-plan"\x3e\x3c/i\x3e\x3cspan  id\x3d"planTitle"\x3e\u4e0b\u5468\u5de5\u4f5c\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"report-result-content" id\x3d"plan"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"extend-panel"\x3e\x3c/div\x3e\x3c/div\x3e',
"workreport.reportstatistics":'\x3cdiv id\x3d"reportstatistics" class\x3d"statsheet-view nopd reportstatistics nomg"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title bold"\x3e\x3cspan class\x3d"static-time"\x3e\x3c/span\x3e\u62a5\u544a\u7edf\u8ba1\u62a5\u8868\x3c/div\x3e\x3cdiv class\x3d"filter"\x3e\x3cdiv class\x3d"my"\x3e\x3clabel class\x3d"checkbox-inline mr-5"\x3e\x3cinput type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u6211\u7684\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"mySubordinate"\x3e\x3clabel class\x3d"checkbox-inline mr-5"\x3e\x3cinput type\x3d"checkbox" checked\x3d"checked"/\x3e\x3cspan\x3e\u76f4\u63a5\u4e0b\u5c5e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"myUndirectSubordinate"\x3e\x3clabel class\x3d"checkbox-inline mr-5"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan\x3e\u95f4\u63a5\u4e0b\u5c5e\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"department"\x3e\x3cselect class\x3d"form-control static-department"\x3e\x3coption value\x3d"-1" selected\x3d"selected"\x3e\u8bf7\u9009\u62e9-\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"static-choose mh-20 mv-10"\x3e\x3cdiv class\x3d"date-div"\x3e\x3ci class\x3d"icon-angle-left"\x3e\x3c/i\x3e\x3cspan class\x3d"static" value\x3d"2016"\x3e2016\x3c/span\x3e\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv id\x3d"statisticsType" class\x3d"btn-group statisticstype fr"\x3e\x3ca value \x3d "week" class\x3d"btn active"\x3e\u5468\x3c/a\x3e\x3ca value \x3d "month" class\x3d"btn"\x3e\u6708\x3c/a\x3e\x3ca value \x3d "season" class\x3d"btn"\x3e\u5b63\x3c/a\x3e\x3ca value \x3d "halfyear" class\x3d"btn"\x3e\u5e74\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mb-20 mh-20 p-10 card report-content"\x3e\x3cdiv class\x3d"j_flow_innerScr report-tabdiv"\x3e\x3cdiv class\x3d"report-data j_report-data scrollwrapper eui-scroll" marginbottom\x3d"50"\x3e\x3ctable id\x3d"reportTable" class\x3d"table stat-table table-bordered j_stripedTable"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody id\x3d"reportTableBody" class\x3d"scrollwrapper"\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"no-data" class\x3d"hide no-data"\x3e\u6ca1\u6709\u6570\u636e\x3c/div\x3e\x3cdiv class\x3d"stat-foot mt-10"\x3e\u8bf4\u660e\uff1a\x3cspan\x3e\x3cimg alt\x3d"\u6709\u65e5\u62a5" src\x3d"images/teams/submited_flat.png"\x3e\u6709\u62a5\u544a\x3c/span\x3e\x3cspan\x3e\x3cimg alt\x3d"\u65e0\u65e5\u62a5 " src\x3d"images/teams/unsubmit.png"\x3e\u65e0\u62a5\u544a\x3c/span\x3e\x3ci class\x3d"icon-help" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"top" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e"data-original-title\x3d"\u70b9\u51fb\u8868\u5934\u6216\u8005\x3cimg alt\x3d\'\u65e0\u65e5\u62a5 \' src\x3d\'images/teams/unsubmit.png\'\x3e\u53ef\u53d1\u9001\u63d0\u9192\u7ed9\u672a\u63d0\u4ea4\u62a5\u544a\u7684\u4eba\u5458\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5165\u804c\u5e74\u4efd\u4e0d\u5927\u4e8e\u7b5b\u9009\u5e74\u4efd\u7684\u4eba\u5458\u6ee1\u8db3\u63d0\u9192\u6761\u4ef6" \x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"chat.chat":'\x3cdiv class\x3d"e-title"\x3e\x3ca class\x3d"btn btn-link btn-sm mt-8 fr newchannel selector-toggle router" href\x3d"/messages/wechat"\x3e\u8fd4\u56de\x3c/a\x3e\x3ca id\x3d"newchannel" class\x3d"btn btn-link btn-sm mt-8 fr newchannel selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6dfb\u52a0\u6210\u5458\x3c/a\x3e\x3cdiv id\x3d"chat-user" \x3e\x3ca class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/a\x3e\x3cspan class\x3d"chat-user-name"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-channel" class\x3d"hide  "\x3e\x3ca class\x3d"avatar fl mr-10"\x3e\x3cimg src\x3d"images/group.png"\x3e\x3c/a\x3e\x3cdiv class\x3d"entity-info"\x3e\x3cinput class\x3d"form-control mt-10" type\x3d"text" id\x3d"channel-name" title\x3d"\u7fa4\u7ec4\u540d\u5b57"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-container" class\x3d"chat-container bg-white scrollwrapper" marginbottom\x3d"154"\x3e\x3cdiv id\x3d"chat-messages" class\x3d"chat-messages"\x3e\x3cdiv class\x3d"chat-more hide"\x3e\x3ca\x3e\u67e5\u770b\u66f4\u591a\u6d88\u606f\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-message-clone" class\x3d"chat-message hide"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chart-content"\x3e\x3cdiv class\x3d"bubble" \x3e\x3cp style\x3d"max-width:450px;overflow:hidden; word-wrap:break-word;"\x3e\x3c/p\x3e\x3cspan class\x3d"send-date"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-input clearfix" style\x3d"max-height:280px;"\x3e\x3cdiv id\x3d"input-area" class\x3d"chat-inputedit" contentEditable\x3d"true"\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-btns"\x3e\x3cdiv class\x3d"chat-icons"\x3e\x3ca id\x3d"chatImage" title\x3d"\u8bf7\u9009\u62e9\u56fe\u7247"\x3e\x3ci class\x3d"icon-picture"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca id\x3d"chatAttachment" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"pull-right"\x3e\x3ci class\x3d"word-count hide"\x3e\u6700\u591a\u53d1\u90011000\u5b57\x3c/i\x3e\x3ca class\x3d"btn btn-sm btn-send"\x3e\u53d1\u9001\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"chat.history":'\x3cdiv id\x3d"chat-right-wrap" class\x3d"scrollwrapper" style\x3d"width:100%;" marginbottom\x3d"" \x3e\x3cdiv id\x3d"chat-history-wrap"\x3e\x3cdiv class\x3d"chat-more hide" id\x3d"more-message"\x3e\x3ca\x3e\u67e5\u770b\u66f4\u591a\u6d88\u606f\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-history" class\x3d"chat-history"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"chat-history-daybox" class\x3d"daybox"\x3e\x3cdiv class\x3d"horizontal"\x3e\x3c/div\x3e\x3cdiv class\x3d"day"\x3e\x3c/div\x3e\x3cdiv class\x3d"history-list-div"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-history-clone" class\x3d"message-box"\x3e\x3ca\x3e\x3c/a\x3e\x3cspan\x3e\x3c/span\x3e\x3cdiv style\x3d"overflow:hidden; word-wrap:break-word;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"channel-member-wrap" class\x3d"hide"\x3e\x3cdiv id\x3d"channel-members" class\x3d"user-history"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"channel-member-clone" class\x3d"member"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"member-list-wrap" class\x3d"hide all-employee"\x3e\x3cdiv class\x3d"user-selector-header"\x3e\x3cinput type\x3d"text" class\x3d"suggestion form-control" name\x3d"suggestion" data-entity\x3d"employee" placeholder\x3d"\u59d3\u540d/\u90ae\u4ef6" /\x3e\x3c/div\x3e\x3cdiv class\x3d"employee-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"members-more" pageNo\x3d"2"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"employee-clone" class\x3d"selector-item"\x3e\x3ca class\x3d"avatar"\x3e \x3cimg alt\x3d"avatar" src\x3d"images/avatar.png"\x3e\x3c/a\x3e \x3ca class\x3d"name"\x3e \x3c/a\x3e \x3cspan class\x3d"email"\x3e\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"members-pinyin" class\x3d"hide"\x3e\x3cdiv class\x3d"pinyin-container" id\x3d"list-history#"\x3e\x3cspan class\x3d"pinyin"\x3e#\x3c/span\x3e\x3cul class\x3d"users-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"channel-list-wrap" class\x3d"hide"\x3e\x3cdiv id\x3d"channel-links" class\x3d"user-history"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide channel-link-clone"\x3e\x3cdiv id\x3d"channel-link-clone" class\x3d"member channel-gray"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/group.png" /\x3e \x3cspan class\x3d"pull-right"\x3e \x3ca title\x3d"\u9000\u51fa" id\x3d"btn-quit" class\x3d"btn btn-sm hide"\x3e\u9000\u51fa\x3c/a\x3e \x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"ta-c"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\x3ci class\x3d"icon-step-backward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e\u7b2c1/1\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\x3ci class\x3d"icon-step-forward"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e',
"wechat.message":'\x3cdiv class\x3d"center-title"\x3e\x3cdiv class\x3d"nav nav-pills pull-right"\x3e\x3cdiv style\x3d"height:29px;text-align:center;line-height:40px;vertical-align:middle;"\x3e\x3cinput id\x3d"newchannel" data-entity\x3d"employee" data-multi\x3d"true" value\x3d"12" class\x3d"hide form-control"\x3e\x3ca id\x3d"channel_btn" class\x3d"typeahead-search"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\u65b0\u5efa\u804a\u5929\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3ch5 style\x3d"padding:8px;"\x3e\u672a\u8bfb\u6d88\u606f \x3c/h5\x3e\x3c/div\x3e\x3cdiv id\x3d"messagelist-container" class\x3d"scrollwrapper"\x3e\x3cdiv \x3e\x3ctable id\x3d"message-table" class\x3d"table"\x3e\x3ctr id\x3d"message-tr" class\x3d"hide"\x3e\x3ctd class\x3d"sn" width\x3d"20px"\x3e\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d"" class\x3d"message-title router"\x3e\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e',
"wechat.channeluserlink":'\x3cdiv class\x3d"right-title"\x3e\x3cul class\x3d"nav nav-pills"\x3e\x3cli class\x3d"nav1 panel-dynamicinfo " data-entity\x3d"recent-contact" id\x3d"recent-contact"\x3e\x3ca\x3e\u6700\u8fd1\u8054\u7cfb\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"nav1 panel-dynamicinfo " data-entity\x3d"all-contact" id\x3d"all-contact"\x3e\x3ca\x3e\u6240\u6709\u8054\u7cfb\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"nav1 panel-dynamicinfo " data-entity\x3d"all-channel" id\x3d"all-channel"\x3e\x3ca\x3e\u6240\u6709\u7fa4\u7ec4\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"message-recently-container" class\x3d"scrollwrapper"\x3e\x3cdiv class\x3d"right-panel visited"\x3e\x3cdiv id\x3d"user-links" class\x3d"user-history"\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"user-link-clone" class\x3d"member"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"  style\x3d"width:38px;height:38px"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"member-list-wrap" class\x3d"scrollwrapper hide" \x3e\x3cdiv id\x3d"member-links" class\x3d"user-history"\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"member-link-clone" class\x3d"member"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"  style\x3d"width:38px;height:38px"/\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"wechat.auth":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-wechatAPP"\x3e\x3c/i\x3e\x3cspan\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"hint hint-danger hide"\x3e\u82e5\u60a8\u56e2\u961f\u8fd8\u6ca1\u6709\u4f01\u4e1a\u53f7\uff0c\x3ca href\x3d"https://qy.weixin.qq.com" class\x3d"bold" target\x3d"_blank"\x3e\u8bf7\u70b9\u51fb\u8fd9\u91cc\x3c/a\x3e\u5148\u5230\u817e\u8baf\u5fae\u4fe1\u4f01\u4e1a\u53f7\u5b98\u7f51\u8fdb\u884c\u6ce8\u518c\u3002\x3ca href\x3d"https://qy.weixin.qq.com" class\x3d"bold" target\x3d"_blank"\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\u6ce8\u518c |\x3c/a\x3e\x26nbsp;\x3c%if(isAdmin){%\x3e\x3ca href\x3d"http://qydev.weixin.qq.com/wiki/mp/introduce.html?from\x3dgroupmessage\x26isappinstalled\x3d0" class\x3d"bold" target\x3d"_blank"\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\u529f\u80fd\u4ecb\u7ecd\x3c/a\x3e\x3c/span\x3e\x3c%}else{%\x3e\x3cspan class\x3d"hint hint-danger hide"\x3e\u60a8\u8fd8\u4e0d\u662f\u7ba1\u7406\u5458\uff0c\u6240\u4ee5\u6682\u4e0d\u80fd\u505a\u4ee5\u4e0b\u7684\u6388\u6743\u64cd\u4f5c\uff0c\u8bf7\u7ba1\u7406\u5458\u6765\u4f7f\u7528\u6388\u6743\uff01\x3c/span\x3e\x3c%}%\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-access"\x3e\x3cdiv class\x3d"j_wechatAppScroll scrollwrapper" marginbottom\x3d"185"\x3e\x3cdiv class\x3d"wechatAPP-mod"\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u6388\u6743\u6258\u7ba1\u5e94\u7528\x3cspan class\x3d"hint"\x3e\u60a8\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u7684\u5e94\u7528\u6388\u6743\u6258\u7ba1\u5230\u60a8\u5efa\u7acb\u7684\u5fae\u4fe1\u4f01\u4e1a\u53f7\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u60a8\u7684\u56e2\u961f\u6210\u5458\u76f4\u63a5\u901a\u8fc7\u4f01\u4e1a\u53f7\u5373\u53ef\u4f7f\u7528eteams\u4e2d\u7684\u529f\u80fd\x3c/span\x3e\x3c/h3\x3e\x3cul class\x3d"wechatAPP-mod-list"\x3e\x3cli class\x3d"j_task"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_task.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u4efb\u52a1\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_blog"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_blog.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u65e5\u62a5\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_goal"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_goal.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u9879\u76ee\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_docl"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_doc.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u6587\u6863\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_flow"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_workflow.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5ba1\u6279\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_placard"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_notice.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u516c\u544a\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_report"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_report.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u62a5\u544a\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_schedule"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_calendar.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u65e5\u7a0b\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_crm"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_crm.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5ba2\u6237\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_org"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_org.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u56e2\u961f\u4eba\u5458\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_globalsearch"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_search.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5168\u5c40\u641c\u7d22\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_timecard"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_sign.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u8003\u52e4\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-guide"\x3e\x3cdiv class\x3d"j_guideTab guide-tab ta-c"\x3e\x3cdiv class\x3d"btn-group"\x3e\x3ca class\x3d"btn btn-success"\x3e\u4f01\u4e1a\u53f7\u6388\u6743\u5e2e\u52a9\x3c/a\x3e\x3ca class\x3d"btn"\x3e\u7528\u6237\u4f7f\u7528\u6307\u5bfc\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_wechatTabCon"\x3e\x3cdiv class\x3d"wechatAPP-guide-pic-con"\x3e\x3cp class\x3d"guide-tip ta-c"\x3e\u4e86\u89e3\u4ee5\u4e0b\x3cspan class\x3d"c-success"\x3e\u4f7f\u7528\u79d8\u7c4d\x3c/span\x3e\uff0c\u80fd\u591f\u5e2e\u52a9\u60a8\u5feb\u901f\u6388\u6743\u6210\u529f\x3c/p\x3e\x3cdiv class\x3d"guide-pic-slide" id\x3d"guidePicSlide_1"\x3e\x3cdiv class\x3d"slide-con"\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_1.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_1.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_2.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_2.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_3.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_3.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_4.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_4.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_5.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_5.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_6.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_6.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_7.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_7.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_8.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_8.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_9.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_9.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_10.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_10.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_11.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_11.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_12.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_12.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_13.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_13.png"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-guide-pic-con" style\x3d"display:none"\x3e\x3cp class\x3d"guide-tip ta-c"\x3e\u4e86\u89e3\u4ee5\u4e0b\x3cspan class\x3d"c-success"\x3e\u4f7f\u7528\u79d8\u7c4d\x3c/span\x3e\uff0c\u80fd\u591f\u5e2e\u52a9\u60a8\u5feb\u901f\u6388\u6743\u6210\u529f\x3c/p\x3e\x3cdiv class\x3d"guide-pic-slide" id\x3d"guidePicSlide_2"\x3e\x3cdiv class\x3d"slide-con"\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_1.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_1.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_2.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_2.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_3.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_3.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_4.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_4.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_5.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_5.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_6.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_6.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_7.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_7.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_8.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_8.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_9.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_9.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_10.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_10.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_11.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_11.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_12.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_12.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_13.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_13.png"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-contact"\x3e\x3c%if(isAdmin){%\x3e\x3ca class\x3d"sync-btn"\x3e\u540c\u6b65\x3c/a\x3e\x3c%}%\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u672a\u540c\u6b65\u4eba\u5458\x3c/h3\x3e\x3cdiv class\x3d"wechat-noresult hide"\x3e\u65e0\u672a\u540c\u6b65\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3ca id\x3d"wechatAuth" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-cont-list"\x3e\x3cdiv class\x3d"j_wechatAppConList" marginbottom\x3d"40"\x3e\x3cul class\x3d"clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"wechat.service":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-wechatservice"\x3e\x3c/i\x3e\x3cspan\x3e\u5fae\u4fe1\u670d\u52a1\u53f7\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-access"\x3e\x3cdiv class\x3d"j_serviceAppScroll scrollwrapper" marginbottom\x3d"20"\x3e\x3cdiv class\x3d"wechatAPP-mod"\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u7528\u6237\u4f7f\u7528\u6307\u5bfc\x3cspan class\x3d"hint"\x3e\u65e0\u9700\u6ce8\u518c\u53ca\u8ba4\u8bc1\u4f01\u4e1a\u53f7\uff0c\u53ea\u8981\u5173\u6ce8eteams\u670d\u52a1\u53f7\u5e76\u7ed1\u5b9a\u5e10\u53f7\uff0c\u5c31\u53ef\u4ee5\u9a6c\u4e0a\u8fdb\u884c\u5185\u90e8\u5de5\u4f5c\u534f\u4f5c\x3c/span\x3e\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-guide"\x3e\x3cdiv class\x3d"j_wechatTabCon"\x3e\x3cdiv class\x3d"wechatAPP-guide-pic-con"\x3e\x3cdiv class\x3d"guide-pic-slide" id\x3d"servicePicSlide"\x3e\x3cdiv class\x3d"slide-con"\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/service/1.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/service/1.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/service/2.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/service/2.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/service/3.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/service/3.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/service/4.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/service/4.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/service/5.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/service/5.png"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-contact"\x3e\x3c%if(isAdmin){%\x3e\x3ca class\x3d"sync-btn"\x3e\u540c\u6b65\x3c/a\x3e\x3c%}%\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u672a\u540c\u6b65\u4eba\u5458\x3c/h3\x3e\x3cdiv class\x3d"wechat-noresult hide"\x3e\u65e0\u672a\u540c\u6b65\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3ca id\x3d"wechatAuth" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-cont-list"\x3e\x3cdiv class\x3d"j_wechatAppConList" marginbottom\x3d"40"\x3e\x3cul class\x3d"clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"minichat.newmessage":'\x3cdiv id\x3d"smwx_box" class\x3d"smwx-box"\x3e\x3cdiv class\x3d"smwx-list hide"\x3e\x3cdiv class\x3d"smwx-list-header clearfix"\x3e\x3cdiv class\x3d"opt"\x3e\x3ca class\x3d"smwx-list-ctrl-size"\x3e\x3ci class\x3d"icon-minus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-list-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3cinput type\x3d"text" class\x3d"form-control suggestion" placeholder\x3d"\u641c\u7d22"\x3e\x3c/div\x3e\x3cul class\x3d"tab"\x3e\x3cli\x3e\x3ca data-entity\x3d"user"\x3e\u540c\u4e8b\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-entity\x3d"channel"\x3e\u7fa4\u7ec4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"active" data-entity\x3d"recent""\x3e\u6700\u8fd1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-list-con" class\x3d"smwx-list-con scrollwrapper" height\x3d"416"\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-list-search-result-query" class\x3d"smwx-list-search-result hide"\x3e\x3cdiv class\x3d"chat-member-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-list-search-result-all" class\x3d"smwx-list-search-result"\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-list-search-result-channel" class\x3d"smwx-list-search-result hide"\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-list-search-result-recent" class\x3d"smwx-list-search-result"\x3e\x3cdiv class\x3d"chat-member-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"members-more j_members-more hide" pageNo\x3d"2"\x3e\u66f4\u591a...\x3c/div\x3e\x3cdiv class\x3d"members-more j_recent_more hide"\x3e\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-a-invite invite-toggle"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3ca\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"hide channel-link-clone" \x3e\x3cdiv id\x3d"channel-link-clone" class\x3d"chat-member" data-entity\x3d"channel"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg alt\x3d"avatar" src\x3d"images/group.png"\x3e\x3c/div\x3e\x3cspan class\x3d"name"\x3e\x3c/span\x3e\x3ctime\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"employee-clone" class\x3d"chat-member" data-entity\x3d"employee"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg alt\x3d"avatar" src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cspan class\x3d"name"\x3e\x3c/span\x3e\x3ctime\x3e\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-mes-view" id\x3d"blogmessage-clone"\x3e\x3cdiv class\x3d"smwx-mes-view-items router" \x3e\x3cspan class\x3d"title"\x3e\x3c/span\x3e\x3cspan class\x3d"count badge badge-warning pull-right"\x3e8\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"members-pinyin" class\x3d"hide"\x3e\x3cdiv class\x3d"pinyin-container" id\x3d"list-history#"\x3e\x3cspan class\x3d"pinyin"\x3e#\x3c/span\x3e\x3cdiv class\x3d"chat-member-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"pinyin-container hide" id\x3d"all-employee-service"\x3e\x3cspan class\x3d"pinyin"\x3e\x3c/span\x3e\x3cdiv class\x3d"chat-member-list"\x3e\x3cdiv class\x3d"chat-member" id\x3d"10000"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg alt\x3d"avatar" src\x3d"images/service.png"\x3e\x3c/div\x3e\x3cspan class\x3d"name"\x3eeteams\u670d\u52a1\u53f7\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"invite-tip-clone" class\x3d"smwx-invite-tip text-center c-999 fs-12"\x3e\u56e2\u961f\u4eba\u5458\u5c11\uff0c\u8bf7\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u534f\u4f5c\u5427\uff01\x3cdiv class\x3d"mt-10"\x3e\x3ca class\x3d"invite-toggle btn btn-danger btn-sm"\x3e\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-chat hide"\x3e\x3cdiv id\x3d"leftChatList" class\x3d"smwx-chat-lf"\x3e\x3cdiv class\x3d"smwx-chat-scr-con j_chatlistScr scrollwrapper" marginbottom\x3d""\x3e\x3cul\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-left-list-clone" class\x3d"hide"\x3e\x3cli\x3e\x3ca class\x3d"j_leftChatOne"\x3e\x3c/a\x3e\x3cspan class\x3d"smwx-chat-cur-close"\x3e\x26times;\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-chat-rt"\x3e\x3cdiv class\x3d"smwx-chat-header"\x3e\x3cdiv class\x3d"chat-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"opt"\x3e\x3ca class\x3d"smwx-mini-ctrl-size"\x3e\x3ci class\x3d"icon-minus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"smwx-mini-ctrl-close"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"addmember-layer j_memberLayer" \x3e\x3cdiv class\x3d"j_memberLayerScr" auto-scroll\x3d"yes"\x3e\x3cdiv class\x3d"inner"\x3e\x3cul\x3e\x3cdiv id\x3d"channel-member-top"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cli class\x3d"add"\x3e\x3ca id\x3d"mini-new-channel" title\x3d"\u6dfb\u52a0\u6210\u5458" class\x3d"add-member selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"smwx-chat-top" class\x3d"smwx-chat-content w-full j_chatConScr  scrollwrapper" height\x3d"342"\x3e\x3cdiv id\x3d"message-list-div"\x3e\x3c/div\x3e\x3cdiv id\x3d"message-list-div-clone" class\x3d"chat-message-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-editor"\x3e\x3cdiv class\x3d"tool-bar j_minichat_tool"\x3e\x3cdiv class\x3d"a-tools fl"\x3e\x3ca id\x3d"chat-image-mini" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u8bf7\u9009\u62e9\u56fe\u7247" class\x3d"graph a-pic"\x3e\x3ci class\x3d"icon-image2"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca id\x3d"chat-attachment" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" class\x3d"graph a-attach"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3ca id\x3d"history-chat" class\x3d"a-his chat-history-toggle fr"\x3e\x3ci class\x3d"icon-history icoinline"\x3e\x3c/i\x3e\u804a\u5929\u8bb0\u5f55\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3ctextarea id\x3d"message-textarea" class\x3d"area w-full"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"action-bar j_actionbar"\x3e\x3cdiv class\x3d"fl"\x3e\x3cspan class\x3d"j_key-tip key-tip c-666"\x3e\x3ci class\x3d"icon-exclamation-sign icoinline"\x3e\x3c/i\x3e\u6309Ctrl+Enter\u952e\u53d1\u9001\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"toolkit-list send-btns fr"\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown j_sendType_menu" data-type\x3d"CtrlEnter"\x3e\x3cli data-type\x3d"Enter" class\x3d"j_sendType_li"\x3e\x3ca class\x3d"sendType"\x3e\x3ci class\x3d"icon-checkmark"\x3e\x3c/i\x3e\x3cspan\x3e\u6309Enter\u53d1\u9001\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"CtrlEnter" class\x3d"j_sendType_li active"\x3e\x3ca class\x3d"sendType"\x3e\x3ci class\x3d"icon-checkmark"\x3e\x3c/i\x3e\x3cspan\x3e\u6309Ctrl+Enter\u53d1\u9001\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm w-60 btn-primary j_btn-send"\x3e\u53d1\u9001\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cspan id\x3d"limitTip" class\x3d"limit-tip c-999 fr mr-10"\x3e\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"channel-member-top-clone" class\x3d"hide"\x3e\x3cli id\x3d"" class\x3d"usercard-toggle"\x3e\x3cimg data-toggle\x3d"tooltip" data-placement\x3d"top" data-original-title\x3d"" src\x3d""\x3e\x3cp class\x3d"j_name ellipsis"\x3e\x3c/p\x3e\x3c/li\x3e\x3c/div\x3e\x3cdiv id\x3d"chat-message-clone" class\x3d"chat-message hide"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" class\x3d"usercard-toggle" style\x3d"cursor:pointer;"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-content"\x3e\x3cdiv class\x3d"name usercard-toggle" style\x3d"cursor:pointer;"\x3e\x3c/div\x3e\x3cdiv class\x3d"bubble break"\x3e\u5185\u5bb9\x3c/div\x3e\x3cdiv class\x3d"chat-time"\x3e\x3ci class\x3d"icon-time mr-3"\x3e\x3c/i\x3e\x3ctime\x3e17:32:28\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"date-divider date-line-clone hide"\x3e\x3cdiv class\x3d"line"\x3e\x3c/div\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-mini-bar"\x3e\x3cdiv class\x3d"smwx-mini-list-trigger"\x3e\x3ci class\x3d"icon-comments"\x3e\x3c/i\x3e\u4f01\u4e1a\u5fae\u4fe1\x3cspan class\x3d"smwx-msg-number"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"smwx-mini-chat-trigger hide"\x3e\x3cspan class\x3d"smwx-mini-text-pre"\x3e\u6b63\u5728\u4e0e\x3c/span\x3e\x3cspan class\x3d"smwx-mini-name" \x3e\x3c/span\x3e\x3cspan class\x3d"smwx-mini-text-next"\x3e\u7684\u804a\u5929\u4e2d\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"minichat.pasteimage":'\x3cdiv id\x3d"pasteimg" class\x3d"pasteimg-modal modal fade form-horizontal"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u53d1\u9001\u56fe\u7247\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"paste-img ta-c"\x3e\x3cimg src\x3d"" style\x3d"vertical-align: middle;" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer ta-c"\x3e\x3ca id\x3d"testoiu" class\x3d"btn btn-sm btn-success w-60"\x3e\u53d1\u9001\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"wechat.firm":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-wechatAPP"\x3e\x3c/i\x3e\x3cspan\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"hint hint-danger hide"\x3e\u82e5\u60a8\u56e2\u961f\u8fd8\u6ca1\u6709\u4f01\u4e1a\u53f7\uff0c\x3ca href\x3d"https://qy.weixin.qq.com" class\x3d"bold" target\x3d"_blank"\x3e\u8bf7\u70b9\u51fb\u8fd9\u91cc\x3c/a\x3e\u5148\u5230\u817e\u8baf\u5fae\u4fe1\u4f01\u4e1a\u53f7\u5b98\u7f51\u8fdb\u884c\u6ce8\u518c\u3002\x3ca href\x3d"https://qy.weixin.qq.com" class\x3d"bold" target\x3d"_blank"\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\u6ce8\u518c |\x3c/a\x3e\x26nbsp;\x3c%if(isAdmin){%\x3e\x3ca href\x3d"http://qydev.weixin.qq.com/wiki/mp/introduce.html?from\x3dgroupmessage\x26isappinstalled\x3d0" class\x3d"bold" target\x3d"_blank"\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\u529f\u80fd\u4ecb\u7ecd\x3c/a\x3e\x3c/span\x3e\x3c%}else{%\x3e\x3cspan class\x3d"hint hint-danger hide"\x3e\u60a8\u8fd8\u4e0d\u662f\u7ba1\u7406\u5458\uff0c\u6240\u4ee5\u6682\u4e0d\u80fd\u505a\u4ee5\u4e0b\u7684\u6388\u6743\u64cd\u4f5c\uff0c\u8bf7\u7ba1\u7406\u5458\u6765\u4f7f\u7528\u6388\u6743\uff01\x3c/span\x3e\x3c%}%\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-access"\x3e\x3cdiv class\x3d"j_wechatAppScroll scrollwrapper" marginbottom\x3d"185"\x3e\x3cdiv class\x3d"wechatAPP-mod"\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u6388\u6743\u6258\u7ba1\u5e94\u7528\x3cspan class\x3d"hint"\x3e\u60a8\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u7684\u5e94\u7528\u6388\u6743\u6258\u7ba1\u5230\u60a8\u5efa\u7acb\u7684\u5fae\u4fe1\u4f01\u4e1a\u53f7\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u60a8\u7684\u56e2\u961f\u6210\u5458\u76f4\u63a5\u901a\u8fc7\u4f01\u4e1a\u53f7\u5373\u53ef\u4f7f\u7528eteams\u4e2d\u7684\u529f\u80fd\x3c/span\x3e\x3c/h3\x3e\x3cul class\x3d"wechatAPP-mod-list"\x3e\x3cli class\x3d"j_task"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_task.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u4efb\u52a1\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_blog"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_blog.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u65e5\u62a5\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_goal"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_goal.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u9879\u76ee\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_docl"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_doc.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u6587\u6863\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_flow"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_workflow.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5ba1\u6279\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_placard"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_notice.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u516c\u544a\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_report"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_report.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u62a5\u544a\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_schedule"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_calendar.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u65e5\u7a0b\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_crm"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_crm.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5ba2\u6237\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_org"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_org.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u56e2\u961f\u4eba\u5458\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"j_globalsearch"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_search.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u5168\u5c40\u641c\u7d22\x3cp\x3e\x3c/li\x3e\x3cli class\x3d"j_timecard"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_sign.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"j_auth add" href\x3d"/auth/url" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u8003\u52e4\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-guide"\x3e\x3cdiv class\x3d"j_guideTab guide-tab ta-c"\x3e\x3cdiv class\x3d"btn-group"\x3e\x3ca class\x3d"btn btn-success"\x3e\u4f01\u4e1a\u53f7\u6388\u6743\u5e2e\u52a9\x3c/a\x3e\x3ca class\x3d"btn"\x3e\u7528\u6237\u4f7f\u7528\u6307\u5bfc\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_wechatTabCon"\x3e\x3cdiv class\x3d"wechatAPP-guide-pic-con"\x3e\x3cp class\x3d"guide-tip ta-c"\x3e\u4e86\u89e3\u4ee5\u4e0b\x3cspan class\x3d"c-success"\x3e\u4f7f\u7528\u79d8\u7c4d\x3c/span\x3e\uff0c\u80fd\u591f\u5e2e\u52a9\u60a8\u5feb\u901f\u6388\u6743\u6210\u529f\x3c/p\x3e\x3cdiv class\x3d"guide-pic-slide" id\x3d"guidePicSlide_1"\x3e\x3cdiv class\x3d"slide-con"\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_1.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_1.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_2.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_2.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_3.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_3.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_4.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_4.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_5.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_5.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_6.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_6.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_7.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_7.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_8.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_8.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_9.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_9.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_10.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_10.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_11.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_11.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_12.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_12.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group1" href\x3d"/static/img/wechatAPP/guide_pic_13.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_pic_13.png"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-guide-pic-con" style\x3d"display:none"\x3e\x3cp class\x3d"guide-tip ta-c"\x3e\u4e86\u89e3\u4ee5\u4e0b\x3cspan class\x3d"c-success"\x3e\u4f7f\u7528\u79d8\u7c4d\x3c/span\x3e\uff0c\u80fd\u591f\u5e2e\u52a9\u60a8\u5feb\u901f\u6388\u6743\u6210\u529f\x3c/p\x3e\x3cdiv class\x3d"guide-pic-slide" id\x3d"guidePicSlide_2"\x3e\x3cdiv class\x3d"slide-con"\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_1.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_1.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_2.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_2.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_3.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_3.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_4.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_4.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_5.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_5.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_6.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_6.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_7.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_7.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_8.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_8.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_9.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_9.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_10.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_10.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_11.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_11.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_12.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_12.png"/\x3e\x3c/a\x3e\x3ca class\x3d"slide-item" rel\x3d"group2" href\x3d"/static/img/wechatAPP/guide_use_13.png"\x3e\x3cimg src\x3d"/static/img/wechatAPP/guide_use_13.png"/\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-contact"\x3e\x3c%if(isAdmin){%\x3e\x3ca class\x3d"sync-btn"\x3e\u540c\u6b65\x3c/a\x3e\x3c%}%\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u672a\u540c\u6b65\u4eba\u5458\x3c/h3\x3e\x3cdiv class\x3d"wechat-noresult hide"\x3e\u65e0\u672a\u540c\u6b65\u4eba\u5458\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3ca id\x3d"wechatAuth" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatApp-cont-list"\x3e\x3cdiv class\x3d"j_wechatAppConList" marginbottom\x3d"40"\x3e\x3cul class\x3d"clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"search.result":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"keywords hide"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-search"\x3e\x3c/i\x3e\u641c\u7d22: \x3cinput type\x3d"text" results\x3d"s" name\x3d"keywords" class\x3d"search-keywords form-control placeholder-sm" id\x3d"middlePageSearch" placeholder\x3d"\u5168\u5c40\u641c\u7d22"\x3e\x3c/div\x3e\x3cdiv class\x3d"pt-5"\x3e\x3ci class\x3d"icon-help" title\x3d\'\u5168\u5c40\u641c\u7d22\u652f\u6301\u591a\u4e2a\u5173\u952e\u8bcd\u7684\u641c\u7d22,\u591a\u5173\u952e\u8bcd\u641c\u7d22\u89c4\u5219\u4e3a\uff1a\u5982\u9700\u641c\u7d22\u7ed3\u679c\u540c\u65f6\u5305\u542b\u51e0\u4e2a\u5173\u952e\u8bcd,\u5219\u5728\u5173\u952e\u8bcd\u4e4b\u95f4\u52a0\u4e0a\u201c+\u201d\uff1b\u5982\u9700\u641c\u7d22\u7ed3\u679c\u53ea\u8981\u5305\u542b\u5176\u4e2d\u4e00\u4e2a\u5173\u952e\u8bcd\uff0c\u5219\u5728\u5173\u952e\u8bcd\u4e4b\u95f4\u52a0\u4e0a\u7a7a\u683c\uff1b\u5f53\u641c\u7d22\u5185\u5bb9\u4e2d\u7a7a\u683c\u4e0e\u52a0\u53f7\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u53ea\u6709\u52a0\u53f7\u751f\u6548\'data-toggle\x3d"tooltip" data-placement\x3d"bottom" data-template\x3d\'\x3cdiv class\x3d"tooltip i-tooltip" role\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow i-tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner i-tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e\'\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"g-search-content"\x3e\x3cdiv class\x3d"p-20"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell g-search-left j_center" id\x3d"j_searchcenter"\x3e\x3cdiv class\x3d"g-search-title"\x3e\u641c\u7d22\u5230\u7684\u5185\u5bb9\x3c/div\x3e\x3cdiv id\x3d"search-group" class\x3d"toolkit-bar"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"divider sn toolkit-item toolkit-item-sn"\x3e\x3ci id\x3d"check-all" class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active"\x3e\x3ca class\x3d"router j_search-group task filterSlip_js " data-module\x3d"task" href\x3d"\x3c%\x3durl%\x3e/task"\x3e\u4efb\u52a1(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group document filterSlip_js" data-module\x3d"document" href\x3d"\x3c%\x3durl%\x3e/document"\x3e\u6587\u6863(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group customer filterSlip_js" data-module\x3d"customer" href\x3d"\x3c%\x3durl%\x3e/customer"\x3e\u5ba2\u6237(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group saleChance filterSlip_js" data-module\x3d"saleChance"  href\x3d"\x3c%\x3durl%\x3e/saleChance"\x3e\u5546\u673a(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group production filterSlip_js" data-module\x3d"production"  href\x3d"\x3c%\x3durl%\x3e/production"\x3e\u4ea7\u54c1(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group  workflow filterSlip_js" data-module\x3d"workflow" href\x3d"\x3c%\x3durl%\x3e/workflow"\x3e\u5ba1\u6279(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group  mainline filterSlip_js" data-module\x3d"mainline" href\x3d"\x3c%\x3durl%\x3e/mainline"\x3e\u9879\u76ee(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group  contact filterSlip_js" data-module\x3d"contact"  href\x3d"\x3c%\x3durl%\x3e/contact"\x3e\u4eba\u5458(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca class\x3d"router j_search-group  calendar filterSlip_js" data-module\x3d"calendar"  href\x3d"\x3c%\x3durl%\x3e/calendar"\x3e\u65e5\u7a0b(\x3ci\x3e0\x3c/i\x3e)\x3c/a\x3e\x3cli class\x3d"toolkit-item fr last"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm  dropdown-toggle"\x3e\x3ci class\x3d"icon-th-list glyphicon"\x3e\x3c/i\x3e\u6279\u91cf \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"search-watchs"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli\x3e \x3ca class\x3d"search-share typeahead-search" data-entity\x3d"employee" data-multi\x3d"true" style\x3d"width:60px"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"search-result" class\x3d"j_gsearchScr scrollwrapper"\x3e\x3cdiv\x3e\x3cul id\x3d"search-result-list" class\x3d"e-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"resultlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u76f8\u5173\u6570\u636e\x3c/div\x3e\x3cdiv class\x3d"hide common-more j_resultmore m-10"\x3e\u52a0\u8f7d\u66f4\u591a...\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"result-clone" class\x3d"j_entityslider-toggle result-li router filterSlip_js"\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"module"\x3e\x3c/span\x3e\x3cspan class\x3d"type"\x3e\x3c/span\x3e\x3cdiv class\x3d"title filterSlip_js"\x3e\x3cdiv class\x3d"text ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish hide"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share  selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell g-search-right"\x3e\x3cdiv class\x3d"g-search-title"\x3e\u641c\u7d22\u5230\u7684\u53cd\u9988\x3c/div\x3e\x3cdiv id\x3d"j_searchfeed"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"search.tagview":'\x3cdiv id\x3d"taglist" class\x3d"taglist clearfix"\x3e\x3cdiv class\x3d"tag-title"\x3e\u6211\u7684\u6807\u7b7e\x3c/div\x3e\x3cdiv id\x3d"tags-mine" class\x3d"scrollwrapper tag-container j_tagH" \x3e\x3cdiv id\x3d"tags-mine-list" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c% if(admin) { %\x3e\x3cdiv id\x3d"ctaglist" class\x3d"taglist taglist-public clearfix"\x3e\x3cdiv class\x3d"tag-title"\x3e\u516c\u5171\u6807\u7b7e\x3c/div\x3e\x3cdiv id\x3d"ctags-mine" class\x3d"scrollwrapper tag-container" \x3e\x3cdiv id\x3d"ctags-mine-list" class\x3d"entity-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_large hide"\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c%}%\x3e\x3cspan id\x3d"tag-mine-colon" class\x3d"hide tag tag-mine entity-item" \x3e\x3ca class\x3d"router j_edit"\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"tags-more hide" id\x3d"tmore"\x3e\u66f4\u591a...\x3c/span\x3e',
"search.searchpage":'\x3cdiv id\x3d"main" class\x3d"main j_main"\x3e\x3c/div\x3e',"feed.result":'\x3cdiv class\x3d"message-center-wrapper"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"hide title j_newitem_title"\x3e\x3ci class\x3d"graph graph-newitem"\x3e\x3c/i class\x3d"unread"\x3e\u672a\u8bfb\u4e8b\u9879\x3c/div\x3e\x3cdiv class\x3d"hide title j_newcomment_title"\x3e\x3ci class\x3d"graph graph-newcomment"\x3e\x3c/i\x3e\u4e8b\u9879\u7684\u65b0\u53cd\u9988\x3c/div\x3e\x3cdiv class\x3d"hide title j_newfinish_title"\x3e\x3ci class\x3d"graph graph-newfinish"\x3e\x3c/i\x3e\u65b0\u5b8c\u6210\u4e8b\u9879\x3c/div\x3e\x3cdiv class\x3d"hide title j_atme_title"\x3e\x3ci class\x3d"graph graph-at"\x3e\x3c/i\x3e@\u6211\u7684\u65b0\u53cd\u9988\x3c/div\x3e\x3cul id\x3d"left-toolkit" class\x3d"toolkit-list fl"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"e-selectui dropdown dropdown-menu-toggle w-100"\x3e\x3ca class\x3d"selectui-result dropdown-toggle j_module_feed w-110" style\x3d"padding-right: 9px;"\x3e\u5168\u90e8 \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_detail_ul w-110" style\x3d"display: none;"\x3e\x3cli class\x3d"j_all hide" module\x3d"all"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline" module\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_task" module\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_document" module\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_customer" module\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_workflow" module\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_workreport" module\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_share" module\x3d"share"\x3e\x3ca\x3e\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_agenda" module\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_saleChance" module\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_production" module\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_formdatareport" module\x3d"formdatareport"\x3e\x3ca\x3e\u6570\u636e\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"j_search" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul id\x3d"right-toolkit" class\x3d"toolkit-list fr"\x3e\x3cli class\x3d"toolkit-item dropdown-arrow mr-0 fr" \x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"j_all_read"\x3e\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm j_page_read btn-primary"\x3e\u5f53\u9875\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"hide message-center-switch e-switcher  j_feed_option"\x3e\x3ca id\x3d"j_read" class\x3d"j_read"\x3e\u5df2\u8bfb\x3c/a\x3e\x3ca id\x3d"j_unread" class\x3d"active j_unread"\x3e\u672a\u8bfb\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"message-main"\x3e\x3cdiv class\x3d"message-list-view j_messlistScr mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"j_matters"\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cdiv class\x3d"j_center"\x3e\x3cdiv id\x3d"search-result" class\x3d"nodata-holder"\x3e\x3cdiv id\x3d"resultlist-loading" class\x3d"loading-super m-20"\x3e\x3cspan\x3e\u6570\u636e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_no-result hide"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6ca1\u6709\u53ef\u663e\u793a\u7684\u5185\u5bb9 !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u6d88\u606f\uff0c\u8ba9\u60a8\u53ca\u65f6\u63a5\u6536\u5e76\u5904\u7406\u4e8b\u9879\uff0c\u63d0\u9ad8\u5185\u90e8\u5de5\u4f5c\u6548\u7387 !\x3c/p\x3e\x3c/div\x3e\x3cdiv\x3e\x3cul id\x3d"search-result-list" class\x3d"message-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-more mh-20 mb-15"\x3e\u52a0\u8f7d\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"result-clone" class\x3d"message-item clearfix j_message_read hide" \x3e\x3cem class\x3d"status"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3cimg class\x3d"avatar usercard-toggle" style\x3d"cursor:pointer;" src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3cdiv class\x3d"message-box"\x3e\x3cdiv class\x3d"hd mb-5"\x3e\x3ca class\x3d"user bold c-grey usercard-toggle"\x3e\x3c/a\x3e\x3cdiv class\x3d"event ds-i ml-5"\x3e\x3cspan class\x3d"text"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\u4e8b\u9879\u540d\u79f0\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"content mb-5"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\u4e8b\u9879\u540d\u79f0\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctime class\x3d"fs-12 c-999 date"\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"message-sidebar"\x3e\x3c/div\x3e\x3c/div\x3e',
"feedback.module":'\x3cdiv id\x3d"feedback" class\x3d"main-hd toolkit-bar"\x3e\x3cul class\x3d"j_nav module toolkit-list"\x3e\x3cli class\x3d"unread active j_toolkit-item toolkit-item toolkit-item-tab"\x3e\x3ca\x3e\u672a\u8bfb\u53cd\u9988(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"atme j_toolkit-item toolkit-item toolkit-item-tab"\x3e\x3ca\x3e@\u6211\u7684\u53cd\u9988(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"others j_toolkit-item toolkit-item toolkit-item-tab"\x3e\x3ca\x3e\u975e\u672c\u4eba\u53cd\u9988(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"reply j_toolkit-item toolkit-item toolkit-item-tab" \x3e\x3ca\x3e\u56de\u590d\u6211\u7684(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli id\x3d"feedback-more nodata-holder" class\x3d"toolkit-item toolkit-item-tab dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli class\x3d"charger j_toolkit-item"\x3e\x3ca\x3e\u6211\u8d1f\u8d23\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"participants hide j_toolkit-item"\x3e\x3ca\x3e\u6211\u53c2\u4e0e\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"creator j_toolkit-item"\x3e\x3ca\x3e\u6211\u521b\u5efa\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"watch j_toolkit-item"\x3e\x3ca\x3e\u5173\u6ce8\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"subordinatemodule hide j_toolkit-item"\x3e\x3ca\x3e\u4e0b\u5c5e\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"share j_toolkit-item"\x3e\x3ca\x3e\u5171\u4eab\x3cspan class\x3d"feedback-module"\x3e\x3c/span\x3e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"my j_toolkit-item"\x3e\x3ca\x3e\u672c\u4eba\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"subordinate j_toolkit-item"\x3e\x3ca\x3e\u4e0b\u5c5e\u7684\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"toolkit-list j_nav other pull-left"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item task"\x3e\x3ca\x3e\u4efb\u52a1(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item document hide"\x3e\x3ca\x3e\u6587\u6863(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item customer hide"\x3e\x3ca\x3e\u5ba2\u6237(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item saleChance"\x3e\x3ca\x3e\u5546\u673a(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item production"\x3e\x3ca\x3e\u4ea7\u54c1(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item workflow"\x3e\x3ca\x3e\u5ba1\u6279(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item mainline"\x3e\x3ca\x3e\u9879\u76ee(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item calendar"\x3e\x3ca\x3e\u65e5\u7a0b(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item blog hide"\x3e\x3ca\x3e\u65e5\u62a5(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab j_toolkit-item unreadother hide"\x3e\x3ca\x3e\u672a\u8bfb\u53cd\u9988(\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_mainscroll scrollwrapper"\x3e\x3cdiv id\x3d"feedback-container" class\x3d"feedback-view" style\x3d"min-height:500px;"\x3e\x3cdiv id\x3d"feedback-target-clone-unread" class\x3d"feedback-group hide"\x3e\x3cdiv class\x3d"group-head"\x3e\x3cdiv class\x3d"title"\x3e\x3cspan class\x3d"module-name"\x3e\x3c/span\x3e\x3cspan class\x3d"name"\x3e\x3ca\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cem class\x3d"status unread"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-list"\x3e\x3cdiv class\x3d"bd"\x3e\x3cdiv class\x3d"comment-wrapper"\x3e\x3cul class\x3d"target-feedbacks feedback-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_feedback_subordinate feedback-center-switch-warp hide"\x3e\x3cdiv class\x3d"feedback-center-switch e-switcher"\x3e\x3ca class\x3d"j_subordinate j_subordinate_all"\x3e\u5168\u90e8\x3c/a\x3e\x3ca class\x3d"j_subordinate active" data-type\x3d"senior"\x3e\u76f4\u63a5\u4e0b\u5c5e\x3c/a\x3e\x3ca class\x3d"j_subordinate" data-type\x3d"othersenior"\x3e\u95f4\u63a5\u4e0b\u5c5e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"toolkit-item" style\x3d"float:right;"\x3e\x3cdiv class\x3d"btn-group dropdown" id\x3d"task-subordinate-filter" data-toggle\x3d"#subordinate-filter-dropdown"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u6211\u7684\u4e0b\u5c5e \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-filter border-dropdown dropdown-div dropdown-menu-right"\x3e\x3cdiv id\x3d"subordinate-filter-dropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"feedback-target-clone-other" class\x3d"feedback-box hide"\x3e\x3cdiv class\x3d"target-feedbacks feedback-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"feedbackList-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_nocontent hide nodata-holder mt-70"\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-more nodata-holder common-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"entityModal" class\x3d"taskcalendar-modal modal fade" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"entityModalLabel" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton class\x3d"btn" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u5173\u95ed\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli id\x3d"feedback-unread-clone" class\x3d"feedback-item feedback-box hide"\x3e\x3cdiv class\x3d"j_commentor avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"hd"\x3e\x3cdiv class\x3d"commentor"\x3e\x3ca class\x3d"usercard-toggle"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-content content"\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-attachment entity-container attachment" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cdiv class\x3d"parent-comment-body hide"\x3e\x3ca class\x3d"parent-username usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"parent-content ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cspan class\x3d"comment-coord hide"\x3e\x3ci class\x3d"icon-map-marker" title\x3d"\u5730\u7406\u4f4d\u7f6e"\x3e\x3c/i\x3e\x3cspan class\x3d"comment-address gps-address"\x3e\x3c/span\x3e\x3ca class\x3d"comment-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"ft clearfix"\x3e\x3cspan class\x3d"comment-date time"\x3e\x3c/span\x3e\x3cdiv class\x3d"actions"\x3e\x3ca class\x3d"comment-comment"\x3e\x3ci class\x3d"icon-chat-3"\x3e\x3c/i\x3e\u56de\u590d\x3c/a\x3e\x3ca class\x3d"transmit"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u8f6c\u4efb\u52a1\x3c/a\x3e\x3ca class\x3d"readed" title\x3d"\u70b9\u51fb\u6807\u8bb0\u4e3a\u5df2\u9605"\x3e\u5df2\u9605\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cdiv id\x3d"feedback-other-clone" class\x3d"feedback-target-box feedback-item feedback-box hide"\x3e\x3cdiv class\x3d"j_commentor avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"hd"\x3e\x3cspan class\x3d"commentor"\x3e\x3ca class\x3d"name usercard-toggle"\x3e\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"event"\x3e\x3cspan class\x3d"module-name"\x3e\x3c/span\x3e\x3cspan class\x3d"name"\x3e\x3ca\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-content content"\x3e\x3c/div\x3e\x3cdiv class\x3d"feedback-attachment entity-container attachment" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cdiv class\x3d"parent-comment-body hide"\x3e\x3ca class\x3d"parent-username usercard-toggle"\x3e\x3c/a\x3e\x3cspan class\x3d"parent-content ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cspan class\x3d"comment-coord hide"\x3e\x3ci class\x3d"icon-map-marker" title\x3d"\u5730\u7406\u4f4d\u7f6e"\x3e\x3c/i\x3e\x3cspan class\x3d"comment-address gps-address"\x3e\x3c/span\x3e\x3ca class\x3d"comment-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"ft clearfix"\x3e\x3cspan class\x3d"comment-date time"\x3e\x3c/span\x3e\x3cdiv class\x3d"actions"\x3e\x3ca class\x3d"comment-comment"\x3e\x3ci class\x3d"icon-chat-3"\x3e\x3c/i\x3e\u56de\u590d\x3c/a\x3e\x3ca class\x3d"transmit"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u8f6c\u4efb\u52a1\x3c/a\x3e\x3ca class\x3d"readed" title\x3d"\u70b9\u51fb\u6807\u8bb0\u4e3a\u5df2\u9605"\x3e\u5df2\u9605\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_feed_workflow" class\x3d"hide"\x3e\x3cdiv\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u5ba1\u6279\u610f\u89c1\u53ca\u8bc4\u8bba\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_feed_document" class\x3d"hide"\x3e\x3cdiv\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65e0\u6587\u6863\u7684\u8bc4\u8bba\u53ca\u53cd\u9988\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_feed_task" class\x3d"hide"\x3e\x3cdiv\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u4efb\u52a1\u7684\u8bc4\u8bba\u53ca\u53cd\u9988\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_feed_customer" class\x3d"hide"\x3e\x3cdiv\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u5ba2\u6237\u7684\u8bc4\u8bba\u53ca\u53cd\u9988\u54e6\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"at-comment-part" class\x3d"controls hide" style\x3d"position: absolute; left: 35px; top: 28px;"\x3e\x3c/div\x3e\x3cdiv id\x3d"at-commentreplay-part" class\x3d"controls hide" style\x3d"position: absolute; left: 45px; top: 235px;"\x3e\x3c/div\x3e',
"calendar.calendarpage":'\x3cdiv class\x3d"module-view module-agenda-view"\x3e\x3cdiv id\x3d"calendar-title" class\x3d"center-title"\x3e\x3c/div\x3e\x3cdiv id\x3d"calendar-panel" class\x3d"calendar-panel"\x3e\x3c/div\x3e\x3cdiv id\x3d"employee-layer" class\x3d"employee-layer text-center"\x3e\x3c/div\x3e\x3c/div\x3e',"calendar.calendar":'\x3cdiv class\x3d"calendar-loading loading-big loading-big-fixed hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"agenda-who"\x3e\x3cspan\x3e\u65e5\u7a0b\u5b89\u6392\x3c/span\x3e\x3c/span\x3e\x3ca id\x3d"newAgenda" class\x3d"btn btn-sm btn-success agenda-create-btn"\x3e\x3ci class\x3d"icon-plus-thin icoinline"\x3e\x3c/i\x3e\u5b89\u6392\u65e5\u7a0b\x3c/a\x3e\x3cdiv id\x3d"calendar" class\x3d"agenda-calendar"\x3e\x3c/div\x3e',
"calendar.edit":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u65e5\u7a0b\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul class\x3d"j_button_ul"\x3e\x3cli class\x3d"hide"\x3e\x3ca id\x3d"deleteAgenda"  data-toggle\x3d"tooltip" data-placement\x3d"top" class\x3d"acl-hide"\x3e\x3ci class\x3d"icon-trash"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"hide"\x3e\x3ca id\x3d"toTask" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-calendar-empty"\x3e\x3c/i\x3e\u8f6c\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cdiv class\x3d"hide entitybox-toggle convert-to-task" data-id\x3d"" data-module\x3d"task"\x3e\x3c/div\x3e\x3cli\x3e\x3ca id\x3d"edit_event" data-toggle\x3d"tooltip" data-placement\x3d"top" class\x3d"acl-hide"\x3e\x3ci class\x3d"icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"agenda-wrapper" class\x3d"detail-content entity-info scrollwrapper agenda-wrapper" marginbottom\x3d"20"\x3e\x3cdiv id\x3d"agenda-container" class\x3d"agenda-container"\x3e\x3cdiv class\x3d"detail-summary"\x3e\x3cdiv class\x3d"summary-avatar j_summary-avatar usercard-toggle" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"summary-title"\x3e\x3ctextarea id\x3d"title" class\x3d"j_title acl-disabled smart-title" v-maxlength\x3d"100" name\x3d"title" placeholder\x3d"\u8bf7\u8f93\u5165\u65b0\u7684\u65e5\u7a0b\u5b89\u6392\u6807\u9898"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_recommend_block"\x3e\x3cdiv id\x3d"agenda-startDate" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-path"\x3e\x3c/i\x3e\u8d77\u59cb\u65f6\u95f4:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"start" type\x3d"text" class\x3d"form-control textinput datetimepicker w-150 acl-disabled" \x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"agenda-endDate" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-flag"\x3e\x3c/i\x3e\u7ed3\u675f\u65f6\u95f4:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput id\x3d"end" type\x3d"text" class\x3d"form-control textinput datetimepicker w-150 acl-disabled" \x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"agenda-preiod"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"isAllday" class\x3d"acl-disabled"/\x3e\u5168\u5929\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" id\x3d"isRepeat" class\x3d"acl-disabled"\x3e\u91cd\u590d\x3c/label\x3e\x3c/div\x3e\x3cdiv id\x3d"repeatSetting" class\x3d"agenda-period-content detail-block j_recommend_block hide"\x3e\x3cem class\x3d"arrow-s"\x3e\x3c/em\x3e\x3cem class\x3d"arrow-b"\x3e\x3c/em\x3e\x3cdiv class\x3d"period-item"\x3e\x3clabel class\x3d"label"\x3e\u91cd\u590d:\x3c/label\x3e\x3cdiv class\x3d"content"\x3e\x3cselect class\x3d"form-control acl-disabled" id\x3d"repeatType"\x3e\x3coption value\x3d"everyday" selected\x3d"selected"\x3e\u6bcf\u5929\x3c/option\x3e\x3coption value\x3d"everyWeek"\x3e\u6bcf\u5468\x3c/option\x3e\x3coption value\x3d"everyMonth"\x3e\u6bcf\u6708\x3c/option\x3e\x3coption value\x3d"everyYear"\x3e\u6bcf\u5e74\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"label"\x3e\u9891\u7387:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cinput type\x3d"text" value\x3d"1" size\x3d"10" id\x3d"frequency" class\x3d"form-control input-num acl-disabled"/\x3e\x3cspan id\x3d"unit"\x3e\u5929\x3c/span\x3e\x3cspan id\x3d"weekRepeatDate" class\x3d"weekgroup hide"\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"sunday" class\x3d"acl-disabled"\x3e\u5468\u65e5\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"monday" class\x3d"acl-disabled"\x3e\u5468\u4e00\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"tuesday" class\x3d"acl-disabled"\x3e\u5468\u4e8c\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"wednesday" class\x3d"acl-disabled"\x3e\u5468\u4e09\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"thursday" class\x3d"acl-disabled"\x3e\u5468\u56db\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"friday" class\x3d"acl-disabled"\x3e\u5468\u4e94\x3c/label\x3e\x3clabel class\x3d"checkbox-inline"\x3e\x3cinput type\x3d"checkbox" name\x3d"repeatItem" value\x3d"saturday" class\x3d"acl-disabled"\x3e\u5468\u516d\x3c/label\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"period-item"\x3e\x3cdiv class\x3d"label"\x3e\u7ed3\u675f:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cselect id\x3d"endRepeatType" class\x3d"form-control acl-disabled"\x3e\x3coption value\x3d"never" selected\x3d"selected"\x3e\u6c38\u4e0d\x3c/option\x3e\x3coption value\x3d"number"\x3e\u6b21\u6570\x3c/option\x3e\x3coption value\x3d"date"\x3e\u65e5\u671f\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3cspan class\x3d"hide" id\x3d"overCountEdit"\x3e\x3cdiv class\x3d"label"\x3e\u53d1\u751f:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cinput id\x3d"repeatCount" value\x3d"1" type\x3d"text" class\x3d"form-control input-num acl-disabled"\x3e\u6b21\u540e\x3c/div\x3e\x3c/span\x3e\x3cspan class\x3d"hide" id\x3d"overTimeEdit"\x3e\x3cinput id\x3d"endRepeatTime" type\x3d"text" class\x3d"form-control datetimepicker acl-disabled" format\x3d"yyyy-mm-dd hh:ii" minview\x3d"day"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"period-item"\x3e\x3cdiv class\x3d"label"\x3e\u7ed3\u679c:\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cspan id\x3d"repeatReaultEdit"\x3e\u661f\u671f\u4e00\uff0c\u661f\u671f\u4e8c\uff0c\u661f\u671f\u4e09\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block entity-info j_detailCommands"\x3e\x3cdiv id\x3d"calendar-participants" class\x3d"control-group acl-w-container"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"agenda-remind" icon\x3d"#i-remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16-place"\x3e\x3c/i\x3e\u5730\u3000\u3000\u70b9:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" id\x3d"place" class\x3d"form-control form-control-block textinput acl-disabled"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\x3cspan class\x3d"graph graph-16-word"\x3e\x3c/span\x3e\u65e5\u7a0b\u8be6\u60c5:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea id\x3d"detail" class\x3d"form-control form-control-block textinput acl-disabled"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\x3ci class\x3d"graph graph-16 graph-16-lock"\x3e\x3c/i\x3e\u516c\u5f00\u7a0b\u5ea6:\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cselect id\x3d"visibleType" class\x3d"form-control acl-disabled"\x3e\x3coption value\x3d"normal" selected\x3d"selected"\x3e\u6b63\u5e38(\u4e0a\u7ea7\u53ef\u89c1)\x3c/option\x3e\x3coption value\x3d"self"\x3e\u4ec5\u81ea\u5df1\u53ef\u89c1\x3c/option\x3e\x3coption value\x3d"all"\x3e\u516c\u5f00\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance hide" id\x3d"agenda-relevance-task" icon\x3d"#i-relevance-task"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance hide" id\x3d"agenda-relevance-mainline" icon\x3d"#i-mainline"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance hide" id\x3d"agenda-relevance-doc" icon\x3d"#i-relevance-doc"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance hide" id\x3d"agenda-relevance-crm" icon\x3d"#i-relevance-crm"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group entity-relevance hide" id\x3d"agenda-relevance-flow" icon\x3d"#i-relevance-flow"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"agenda-relevance-ctag" icon\x3d"#i-ctag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"agenda-relevance-tag" icon\x3d"#i-tag"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide" id\x3d"agenda-relevance-attachment" icon\x3d"#i-attach"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-block j_detailhandle detail-handle-wrap clearfix links-control-group"\x3e\x3cdiv class\x3d"detail-handles"\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-task" for\x3d"#agenda-relevance-task"\x3e\x3ci class\x3d"graph graph-16 graph-16-task"\x3e\x3c/i\x3e\u5173\u8054\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-mainline" for\x3d"#agenda-relevance-mainline"\x3e\x3ci class\x3d"graph graph-16 graph-16-pie"\x3e\x3c/i\x3e\u5173\u8054\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-ctag" for\x3d"#agenda-relevance-ctag"\x3e\x3ci class\x3d"graph graph-16 graph-16-commonlabel"\x3e\x3c/i\x3e\u516c\u5171\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-tag" for\x3d"#agenda-relevance-tag"\x3e\x3ci class\x3d"graph graph-16 graph-16-label"\x3e\x3c/i\x3e\u6211\u7684\u6807\u7b7e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-doc" for\x3d"#agenda-relevance-doc"\x3e\x3ci class\x3d"graph graph-16 graph-16-document"\x3e\x3c/i\x3e\u5173\u8054\u6587\u6863\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-crm" for\x3d"#agenda-relevance-crm"\x3e\x3ci class\x3d"graph graph-16 graph-16-customer"\x3e\x3c/i\x3e\u5173\u8054\u5ba2\u6237\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-relevance-flow" for\x3d"#agenda-relevance-flow"\x3e\x3ci class\x3d"graph graph-16 graph-16-workflow"\x3e\x3c/i\x3e\u5173\u8054\u5ba1\u6279\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-attach" for\x3d"#agenda-relevance-attachment"\x3e\x3ci class\x3d"graph graph-16 graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"handle-item"\x3e\x3ca id\x3d"i-remind" for\x3d"#agenda-remind"\x3e\x3ci class\x3d"graph graph-16 graph-16-remind"\x3e\x3c/i\x3e\u63d0\u9192\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"calendar.detail":'\x3cdiv class\x3d"module-detail-view"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u65e5\u7a0b\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli\x3e\x3ca title\x3d"\u5173\u95ed" id\x3d"btn-close" class\x3d"detail-slide-close j_btn_close"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"agendaInfo-wrapper" class\x3d"scrollwrapper agenda-wrapper"\x3e\x3cdiv class\x3d"agenda-container entity-info"\x3e\x3cdiv class\x3d"detail-block j_recommend_block"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65e5\u7a0b\u540d\u79f0:\x3c/label\x3e\x3cdiv id\x3d"title" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"agenda-startDate" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8d77\u59cb\u65f6\u95f4:\x3c/label\x3e\x3cdiv id\x3d"start" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"agenda-endDate" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7ed3\u675f\u65f6\u95f4:\x3c/label\x3e\x3cdiv id\x3d"end" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u662f\u5426\u5168\u5929:\x3c/label\x3e\x3cdiv id\x3d"isAllday" class\x3d"controls-text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u662f\u5426\u91cd\u590d:\x3c/label\x3e\x3cdiv id\x3d"isRepeat" class\x3d"controls-text"\x3e\x3c/div\x3e\x3cdiv id\x3d"repeat" class\x3d"controls controls-textonly hide"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u53c2\u4e0e\u4eba:\x3c/label\x3e\x3cdiv id\x3d"participants" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u5730\u70b9:\x3c/label\x3e\x3cdiv id\x3d"place" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65e5\u7a0b\u8be6\u60c5:\x3c/label\x3e\x3cdiv id\x3d"detail" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u516c\u5f00\u7a0b\u5ea6:\x3c/label\x3e\x3cdiv id\x3d"visibleType" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"calendar-creator" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u521b\u5efa\u4eba:\x3c/label\x3e\x3cdiv id\x3d"creator" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"calendar-createTime" class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u521b\u5efa\u65f6\u95f4:\x3c/label\x3e\x3cdiv id\x3d"createTime" class\x3d"controls controls-textonly"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mod-btns mt-15"\x3e\x3cinput type\x3d"button" class\x3d"btn btn-primary" id\x3d"toTask" value\x3d"\u8f6c\u4efb\u52a1"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.stat":'\x3cdiv id\x3d"formstat" class\x3d"wformst-panel"\x3e\x3cdiv id\x3d"formStatContent" class\x3d"wform-stat-content ebox1 scrollwrapper" marginbottom\x3d"10"\x3e\x3cdiv id\x3d"formDatas" class\x3d"formFieldDatas"\x3e\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cul class\x3d"toolkit-list trashbin-tool"\x3e\x3cdiv class\x3d"input-group fr"\x3e\x3ca id\x3d"initAdvanceSearch" class\x3d"btn btn-sm btn-primary"\x3e\u9ad8\u7ea7\u641c\u7d22 \x3ci class\x3d"icon-angle-down cs-p"\x3e\x3c/i\x3e \x3c/a\x3e\x3c/div\x3e\x3cli class\x3d"fr toolkit-item mr-5"\x3e\x3ca id\x3d"delete_formdata" class\x3d"btn btn-sm btn-danger"\x3e\x3ci class\x3d"icon-trash glyphicon"\x3e\x3c/i\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item mr-5"\x3e\x3ca id\x3d"export_formdata" class\x3d"btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-file-excel glyphicon"\x3e\x3c/i\x3e \u5bfc\u51fa\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"fr toolkit-item mr-5 last"\x3e\x3ca id\x3d"columnField" class\x3d"btn btn-sm btn-primary flow_search"\x3e\u8bbe\u7f6e\u8868\u5934\x3c/a\x3e\x3c/li\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_advanceSearch m-20"\x3e\x3c/div\x3e\x3cdiv id\x3d"statbody"\x3e\x3cdiv class\x3d"j_formstarScr wform-stat-tb ph-20"\x3e\x3ctable id\x3d"stat_table" class\x3d"table table-bordered"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ctfoot class\x3d"hide bg-f0"\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/tfoot\x3e\x3c/table\x3e\x3cdiv class\x3d"j_form_empty hide form_empty"\x3e\u6682\u65e0\u6570\u636e\uff01\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"more_data" class\x3d"common-more hide mh-20 mt-0"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.column":'\x3cdiv id\x3d"formcolumn" class\x3d"hide modal fade wform-column-content" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u8bbe\u7f6e\u7edf\u8ba1\u5217\u5934\x3c/h5\x3e\x3c/div\x3e\x3cdiv  class\x3d"modal-body"\x3e\x3cp class\x3d"wform-tip pv-10 mb-15"\x3e\u4e0b\u65b9\u5b57\u6bb5\u4e3a\u5f53\u524d\u8868\u5355\u6240\u6709\u5b57\u6bb5(\u5305\u542b\u5df2\u5220\u9664\u8fc7\u7684\u5b57\u6bb5)\uff0c\u62d6\u62fd\u5b57\u6bb5\u53ef\u4ee5\u8fdb\u884c\u6392\u5e8f\u7edf\u8ba1\u5217\u8868\uff0c\u4ee5\u52fe\u9009\u7684\u5b57\u6bb5\u4e3a\u5f53\u524d\u7edf\u8ba1\u8868\u4e2d\u663e\u793a\u5b57\u6bb5\u3002\x3c/p\x3e\x3cul id\x3d"columnFileds" class\x3d"wform-column-list"\x3e\x3c/ul\x3e\x3cdiv id\x3d"columnFiledsClone" class\x3d"hide"\x3e\x3cli class\x3d"checkbox"\x3e\x3clabel\x3e\x3cspan class\x3d"j_sort sn"\x3e\x3c/span\x3e\x3cinput class\x3d"j_column" type\x3d"checkbox" name\x3d"column"/\x3e\x3cspan class\x3d"j_filedName"\x3e\x3c/span\x3e\x3cspan class\x3d"tip j_bewrite"\x3e\x3c/span\x3e\x3c/label\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3clabel class\x3d"checkbox-inline  mt-5"\x3e\x3cinput id\x3d"selectAll" type\x3d"checkbox"\x3e\u5168\u9009\x3c/label\x3e\x3ca class\x3d"btn btn-sm fr" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca id\x3d"saveColumn" class\x3d"btn btn-sm btn-primary fr mr-10"\x3e\u4fdd\u5b58\x3c/a\x3e\x3ca id\x3d"saveDefaultColumn" istmp\x3d"istmp" class\x3d"btn btn-sm btn-primary fr mr-10"\x3e\u4fdd\u5b58\u4e3a\u6a21\u677f\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.search":'\x3cdiv class\x3d"formstat-search-wrap clearfix j_formstat-search sch-wrapper"\x3e\x3cdiv id\x3d"search-group-list" class\x3d"sch-group-wrapper"\x3e\x3cdiv class\x3d"sch-group"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"flowName"\x3e\u5ba1\u6279\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"flowSubmitTime"\x3e\u5ba1\u6279\u63d0\u4ea4\u65f6\u95f4\x3c/option\x3e\x3coption key\x3d"flowStatus"\x3e\u5ba1\u6279\u72b6\u6001\x3c/option\x3e\x3coption key\x3d"flowOperator"\x3e\u5ba1\u6279\u63d0\u4ea4\u4eba\x3c/option\x3e\x3coption key\x3d"flowOperatorDept"\x3e\u63d0\u4ea4\u4eba\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mb-10 j_btnAddItem"\x3e\x3ca id\x3d"btnAddItem" class\x3d"j_addCondition"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u6dfb\u52a0\u641c\u7d22\u6761\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sch-group"\x3e\x3ca id\x3d"btnSearch" class\x3d"btn btn-sm w-100 btn-success j_search-submit"\x3e\x3ci class\x3d"glyphicon icon-search"\x3e\x3c/i\x3e \u641c\u7d22\x3c/a\x3e\x3ca id\x3d"btnSearchClose" class\x3d"btn btn-sm w-100 ml-5 j_search-close"\x3e\x3ci class\x3d"glyphicon icon-angle-up"\x3e\x3c/i\x3e\u6536\u8d77\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"form-search-clone" class\x3d"sch-group hide"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"flowName"\x3e\u5ba1\u6279\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"flowSubmitTime"\x3e\u5ba1\u6279\u63d0\u4ea4\u65f6\u95f4\x3c/option\x3e\x3coption key\x3d"flowStatus"\x3e\u5ba1\u6279\u72b6\u6001\x3c/option\x3e\x3coption key\x3d"flowOperator"\x3e\u5ba1\u6279\u63d0\u4ea4\u4eba\x3c/option\x3e\x3coption key\x3d"flowOperatorDept"\x3e\u63d0\u4ea4\u4eba\u90e8\u95e8\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-name-clone" class\x3d"fl controls hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-submitTime-clone" class\x3d"hide"\x3e\x3cspan class\x3d"sch-item-period j_datetime"\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"startTime" id\x3d"startTime"\x3e\x3cspan class\x3d"spline"\x3e-\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"endTime" id\x3d"endTime"\x3e\x3c/span\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-status-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cselect class\x3d"form-control j_flowStatusList"\x3e\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e\x3coption id\x3d"finish"\x3e\u5df2\u7ed3\u675f\x3c/option\x3e\x3coption id\x3d"notFinish"\x3e\u5ba1\u6279\u4e2d\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"j_selected sch-item entity-container"\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-operator-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_flowoptcondition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sch-item"\x3e\x3cdiv class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-flow-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"flow-operatordept-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_flowoptdeptcondition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sch-item"\x3e\x3cdiv class\x3d"j_optdeptcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u90e8\u95e8\u540d\u79f0" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-flow-department" data-entity\x3d"department"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"department" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u90e8\u95e8" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-pencil"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.basesearch":'\x3cdiv class\x3d"formstat-search-wrap clearfix j_formstat-search sch-wrapper"\x3e\x3cdiv id\x3d"search-group-list" class\x3d"sch-group-wrapper"\x3e\x3cdiv class\x3d"sch-group"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"name"\x3e\u4e0a\u62a5\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"operator"\x3e\u63d0\u4ea4\u4eba\x3c/option\x3e\x3coption key\x3d"createTime"\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/option\x3e\x3coption key\x3d"type"\x3e\u7c7b\u578b\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mb-10 j_btnAddItem"\x3e\x3ca id\x3d"btnAddItem" class\x3d"j_addCondition"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u6dfb\u52a0\u641c\u7d22\u6761\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sch-group"\x3e\x3ca id\x3d"btnSearch" class\x3d"btn btn-sm w-100 btn-success j_search-submit"\x3e\x3ci class\x3d"glyphicon icon-search"\x3e\x3c/i\x3e \u641c\u7d22\x3c/a\x3e\x3ca id\x3d"btnSearchClose" class\x3d"btn btn-sm w-100 j_search-close ml-5"\x3e\x3ci class\x3d"glyphicon icon-angle-up"\x3e\x3c/i\x3e\u6536\u8d77\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"form-search-clone" class\x3d"sch-group hide"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"name"\x3e\u4e0a\u62a5\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"operator"\x3e\u63d0\u4ea4\u4eba\x3c/option\x3e\x3coption key\x3d"createTime"\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/option\x3e\x3coption key\x3d"type"\x3e\u7c7b\u578b\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3cdiv class\x3d"sch-group-opt"\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"name-clone" class\x3d"fl controls hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"createTime-clone" class\x3d"hide"\x3e\x3cspan class\x3d"sch-item-period j_datetime"\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"startTime" id\x3d"startTime"\x3e\x3cspan class\x3d"spline"\x3e-\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"endTime" id\x3d"endTime"\x3e\x3c/span\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"type-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cselect class\x3d"form-control j_multipleSelect"\x3e\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e\x3coption id\x3d"biaoge"\x3e\u5916\u90e8\u5206\u53d1\x3c/option\x3e\x3coption id\x3d"formdatareport"\x3e\u6570\u636e\u4e0a\u62a5\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"j_selected sch-item entity-container"\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"operator-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_flowoptcondition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sch-item"\x3e\x3cdiv class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-flow-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.searchfortask":'\x3cdiv class\x3d"formstat-search-wrap clearfix j_formstat-search sch-wrapper"\x3e\x3cdiv id\x3d"search-group-list" class\x3d"sch-group-wrapper"\x3e\x3cdiv class\x3d"sch-group"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"name"\x3e\u4efb\u52a1\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"content"\x3e\u4efb\u52a1\u63cf\u8ff0\x3c/option\x3e\x3coption key\x3d"manager"\x3e\u8d1f\u8d23\u4eba\x3c/option\x3e\x3coption key\x3d"priority"\x3e\u7d27\u6025\u7a0b\u5ea6\x3c/option\x3e\x3coption key\x3d"duedate"\x3e\u5230\u671f\u65e5\x3c/option\x3e\x3coption key\x3d"type"\x3e\u662f\u5426\u5b8c\u6210\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mb-10 j_btnAddItem"\x3e\x3ca id\x3d"btnAddItem" class\x3d"j_addCondition"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u6dfb\u52a0\u641c\u7d22\u6761\u4ef6\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"sch-group"\x3e\x3ca id\x3d"btnSearch" class\x3d"btn btn-sm w-100 btn-success j_search-submit"\x3e\x3ci class\x3d"glyphicon icon-search"\x3e\x3c/i\x3e \u641c\u7d22\x3c/a\x3e\x3ca id\x3d"btnSearchClose" class\x3d"btn btn-sm w-100 j_search-close ml-5"\x3e\x3ci class\x3d"glyphicon icon-angle-up"\x3e\x3c/i\x3e\u6536\u8d77\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"form-search-clone" class\x3d"sch-group hide"\x3e\x3cdiv class\x3d"sch-item j_formField-select"\x3e\x3cselect class\x3d"form-control"\x3e\x3coption key\x3d"name"\x3e\u4efb\u52a1\u540d\u79f0\x3c/option\x3e\x3coption key\x3d"content"\x3e\u4efb\u52a1\u63cf\u8ff0\x3c/option\x3e\x3coption key\x3d"manager"\x3e\u8d1f\u8d23\u4eba\x3c/option\x3e\x3coption key\x3d"priority"\x3e\u7d27\u6025\u7a0b\u5ea6\x3c/option\x3e\x3coption key\x3d"duedate"\x3e\u5230\u671f\u65e5\x3c/option\x3e\x3coption key\x3d"type"\x3e\u662f\u5426\u5b8c\u6210\x3c/option\x3e\x3c/select\x3e\uff1a\x3c/div\x3e\x3cdiv class\x3d"fl j_formField-condition controls"\x3e\x3cselect id\x3d"selOperate" class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3cdiv class\x3d"sch-group-opt"\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"name-clone" class\x3d"fl controls hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"content-clone" class\x3d"fl controls hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"like"\x3e\u5305\u542b\x3c/option\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cinput class\x3d"form-control sch-item" type\x3d"text" value\x3d""\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"manager-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_flowoptcondition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"sch-item"\x3e\x3cdiv class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"typeahead-flow-employee" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"priority-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cselect class\x3d"form-control j_multipleSelect"\x3e\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e\x3coption id\x3d"normal"\x3e\u6b63\u5e38\x3c/option\x3e\x3coption id\x3d"high"\x3e\u7d27\u6025\x3c/option\x3e\x3coption id\x3d"urgency"\x3e\u975e\u5e38\u7d27\u6025\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"j_selected sch-item entity-container"\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"duedate-clone" class\x3d"hide"\x3e\x3cspan class\x3d"sch-item-period j_datetime"\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"startTime" id\x3d"startTime"\x3e\x3cspan class\x3d"spline"\x3e-\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"form-control datepicker textinput" name\x3d"endTime" id\x3d"endTime"\x3e\x3c/span\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"type-clone" class\x3d"hide"\x3e\x3cselect class\x3d"form-control sch-item j_condition"\x3e\x3coption value\x3d"eq"\x3e\u7b49\u4e8e\x3c/option\x3e\x3coption value\x3d"neq"\x3e\u4e0d\u7b49\u4e8e\x3c/option\x3e\x3c/select\x3e\x3cselect class\x3d"form-control j_multipleSelect"\x3e\x3coption\x3e\u8bf7\u9009\u62e9\x3c/option\x3e\x3coption id\x3d"finished"\x3e\u5df2\u5b8c\u6210\x3c/option\x3e\x3coption id\x3d"todo"\x3e\u8fdb\u884c\u4e2d\x3c/option\x3e\x3c/select\x3e\x3cdiv class\x3d"j_selected sch-item entity-container"\x3e\x3c/div\x3e\x3ca class\x3d"j_deletesearch dele" title\x3d"\u5220\u9664\u6b64\u641c\u7d22\u9879"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.baseformstattab":'\x3cdiv class\x3d"eform-stat-content"\x3e\x3cinput type\x3d"hidden" id\x3d"back_report"\x3e\x3cdiv id\x3d"formName" class\x3d"title"\x3e\x3c/div\x3e\x3cdiv class\x3d"toolkit toolkit-lg toolkit-bar clearfix"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active"\x3e\x3ca id\x3d\'data-stat\'\x3e\x3ci class\x3d"icon-th"\x3e\x3c/i\x3e\u6570\u636e\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"data-trend"\x3e\x3ci class\x3d"icon-stats"\x3e\x3c/i\x3e\u6536\u96c6\u8d8b\u52bf\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"field-stat"\x3e\x3ci class\x3d"icon-chart-pie"\x3e\x3c/i\x3e\u6570\u636e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"report-stat"\x3e\x3ci class\x3d"icon-columns"\x3e\x3c/i\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"insidecollect-log"\x3e\x3ci class\x3d"icon-insert-template"\x3e\x3c/i\x3e\u5185\u90e8\u6536\u96c6\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab"\x3e\x3ca id\x3d"submit-log"\x3e\x3ci class\x3d"icon-libreoffice"\x3e\x3c/i\x3e\u63d0\u4ea4\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d\'scrollwrapper details\' id\x3d\'js-formstat\'\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formstatchart":'\x3cdiv id\x3d"formstatchartview"\x3e\x3cdiv class\x3d"bg-white js_taskreportScr scrollwrapper"\x3e\x3cdiv class\x3d"p-10"\x3e\x3cdiv class\x3d"taskstat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-data-btn"\x3e\x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"ebox1 p-10"\x3e\x3cdiv id\x3d"day-chart" class\x3d"h-400"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formcollectchart":'\x3cdiv class\x3d"modal fade eform-collect-dialog" id\x3d"formcollectchartview"  tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e\x3ch4 class\x3d"modal-title"\x3e\u6536\u96c6\u8d8b\u52bf\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body js_taskreportScr" height\x3d"640"\x3e\x3cdiv class\x3d"p-10"\x3e\x3cdiv class\x3d"taskstat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-data-btn"\x3e\x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"ebox1 p-10"\x3e\x3cdiv id\x3d"day-chart" class\x3d"h-400"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"submit-log"\x3e\x3ctable class\x3d"table table-bordered table-hover table-striped nomg" id\x3d"formlog-table"\x3e\x3cthead\x3e\x3ctr\x3e\x3ctd class\x3d"text-center" style\x3d"width:60px;"\x3e\u5e8f\u53f7\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:200px;"\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:120px;"\x3e\u6240\u7528\u65f6\u95f4(\u79d2)\x3c/td\x3e\x3ctd class\x3d"text-center"\x3eIP\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:120px;"\x3e\u6765\u6e90\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:80px;"\x3e\u8be6\u7ec6\x3c/td\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr style\x3d"display:none;"\x3e\x3ctd id\x3d"index" class\x3d"text-center"\x3e1\x3c/td\x3e\x3ctd id\x3d"createTime" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"spentTime" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"ip" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"source" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"query" class\x3d"text-center"\x3e\x3ca target\x3d"_blank"\x3e\u67e5\u770b\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered pull-right"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formfieldstat":'\x3cdiv id\x3d"formfieldstat" class\x3d"formfieldstat-panel eform-data-panel"\x3e\x3cdiv id\x3d"formfieldStatContent" class\x3d"eform-data-content j_formfieldstat"\x3e\x3cdiv id\x3d"formFieldDatas" class\x3d"formFieldDatas"\x3e\x3cdiv class\x3d"eformst-tools clearfix mb-10"\x3e\x3cdiv class\x3d"formstat-noresult j_form_empty hide form_empty"\x3e\x3ca\x3e\u65e0\u6570\u636e\uff01\x3c/a\x3e\x3c/div\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"input-group"\x3e\x3ca id\x3d"initFieldAdvanceSearch" class\x3d"btn btn-sm btn-primary"\x3e\u9ad8\u7ea7\u641c\u7d22 \x3ci class\x3d"icon-angle-down cs-p"\x3e\x3c/i\x3e \x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_advanceSearch advanceSearch"\x3e\x3ch5\x3e\u7edf\u8ba1\u5b57\u6bb5\x3c/h5\x3e\x3cul class\x3d\'searchfields j_searchfields\'\x3e\x3cli style\x3d"display: none;"\x3e\x3cinput data-field\x3d\'\' type\x3d\'checkbox\' checked\x3d\'checked\'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"eformst-tools clearfix mb-10 formstat-uphide"\x3e\x3cul\x3e\x3cli\x3e\x3ca id\x3d\'packup\' class\x3d"btn btn-sm btn-default"\x3e\x3ci class\x3d"icon-angle-up glyphicon"\x3e\x3c/i\x3e\u6536\u8d77\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"fieldstatbody" class\x3d"scrollwrapper fieldstatbody"\x3e\x3cdiv class\x3d\'js_formfield eform-field-tab ph-10\'\x3e\x3cdiv id\x3d\'numberchartstat\' class\x3d\'w-full h-200\' style\x3d"width:auto!important;"\x3e\x3c/div\x3e\x3cdiv id\x3d\'numdatatrendstat\' class\x3d\'w-full h-200\' style\x3d"width:auto!important;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.statselectview":"\x3cdiv class\x3d'panel panel-default'\x3e\x3cdiv class\x3d'panel-heading'\x3e\x3c%\x3dnumber%\x3e\u3001\x3c%\x3d title %\x3e\x3c%\x3d titletip%\x3e\x3cdiv class\x3d'stat-ways'\x3e\x3cspan class\x3d'viewitem bar' view-item\x3d'baritem'\x3e\x3ci class\x3d\"graph  graph-bar\"\x3e\x3c/i\x3e\x26nbsp;\x26nbsp;\u67f1\u72b6\u56fe\x3c/span\x3e\x3cspan class\x3d'viewitem pie' view-item\x3d'pieitem'\x3e\x3ci class\x3d\"graph  graph-pie\"\x3e\x3c/i\x3e\x26nbsp;\x26nbsp;\u997c\u56fe\x3c/span\x3e\x3cspan class\x3d'viewitem tableitem' view-item\x3d'tableitem'\x3e\x3ci class\x3d\"graph  graph-table\"\x3e\x3c/i\x3e\x26nbsp;\x26nbsp;\u8868\u683c\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d\"panel-body\"\x3e\x3ctable class\x3d'table table-bordered' id\x3d\"tableview\"\x3e\x3ccolgroup\x3e\x3ccol width\x3d'40%'\x3e\x3ccol width\x3d'30%'\x3e\x3ccol width\x3d'30%'\x3e\x3c/colgroup\x3e\x3cthead\x3e\x3cth\x3e\u9009\u9879\x3c/th\x3e\x3cth\x3e\u767e\u5206\u6bd4\x3c/th\x3e\x3cth\x3e\u7968\u6570\x3c/th\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr style\x3d\"display: none;\"\x3e\x3ctd class\x3d\"j_content\"\x3e\x3c/td\x3e\x3ctd class\x3d'bartd'\x3e\x3cdiv class\x3d'prograssbar j_prograssbar'\x3e\x3cspan class\x3d'percentage j_percentage'\x3e\x3c/span\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d\"j_votes\"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd class\x3d'totalcount'\x3e\u603b\u8ba1\x3c/td\x3e\x3ctd\x3e\x3c%\x3dtotalvotes%\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d'barview'\x3e\x3c/div\x3e\x3cdiv class\x3d'pieview'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
"formstat.stattextview":"\x3cdiv class\x3d'panel panel-default'\x3e\x3cdiv class\x3d'panel-heading'\x3e\x3c%\x3dnumber%\x3e\u3001\x3c%\x3d title %\x3e\x3c/div\x3e\x3cdiv class\x3d\"panel-body\"\x3e\x3ca class\x3d'search-detail' field-id\x3d'\x3c%\x3dfieldId%\x3e' component-key\x3d'\x3c%\x3dcomponentkey%\x3e'\x3e \u67e5\u770b\u5217\u8868 \x3c/a\x3e\x3c/div\x3e\x3c/div\x3e","formstat.fielddetaillist":'\x3cdiv id\x3d"formfield-detail" class\x3d"mainlinebox modal fade form-horizontal eform-field-detail entity-info" tabindex\x3d"-1" role\x3d"dialog" aria-hidden\x3d"true" \x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e  \x3ca id\x3d"close-botton" class\x3d"close"\x3e\u00d7\x3c/a\x3e \x3ch5 class\x3d"modal-title"\x3e\u660e\u7ec6\u4fe1\u606f\x3c/h5\x3e \t\x3c/div\x3e\x3cdiv id\x3d"formfield-detail-div" class\x3d"formfielddetail modal-body form-horizontal scrollwrapper"\x3e\x3cdiv class\x3d\'field-datas\'\x3e\x3ctable id\x3d"field_table" class\x3d"table table-bordered"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e\x3cdiv\x3e\x3cspan\x3e\x3c%\x3dtitle%\x3e\x3c/span\x3e\x3cspan class\x3d\'totalnumber\'\x3e\x3c/span\x3e\x3c/div\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv id\x3d"fieldmore_data" class\x3d"common-more mt-5"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_no-result no-result hide" style\x3d"border: none;"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formreportview":'\x3cdiv id\x3d"formfieldstat" class\x3d"formfieldstat-panel eform-data-panel clearfix bg-white"\x3e\x3cdiv id\x3d"formReportContent" class\x3d"eform-report-content scrollwrapper"\x3e\x3cdiv id\x3d"formReportDatas" class\x3d"mr-10"\x3e\x3cdiv id\x3d"reportstatbody"\x3e\x3cdiv class\x3d\'js_report\'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"eform-report-view"\x3e\x3cul class\x3d"eform-report-list clearfix js_companyformlist"\x3e\x3cli class\x3d"js_formitemsli" formtype\x3d"company" style\x3d"display:none"\x3e\x3cdiv class\x3d"js_formListBox"\x3e\x3ch4 id\x3d"title" class\x3d"ellipsis" skiptype\x3d"edit"\x3e\x3c/h4\x3e\x3cdiv class\x3d"info"\x3e\x3cp class\x3d"operator"\x3e\u521b\u5efa\u4eba\uff1a\x3c/p\x3e\x3cp class\x3d"createTime"\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_btn-group"\x3e\x3ca class\x3d"btn btn-sm reportpreview" previewurl\x3d\'\'\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm reportedit" reporturl\x3d\'\'\x3e\u7f16\u8f91\x3c/a\x3e\x3ca class\x3d"btn btn-sm reportdel" formId\x3d\'\'\x3e\u5220\u9664\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"report-create" class\x3d"list-add"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3cp\x3e\u6dfb\u52a0\u62a5\u544a\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e',
"formstat.formreportnew":'\x3cdiv id\x3d"build-newreport" class\x3d"newform-modal modal fade form-horizontal entity-info"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u65b0\u5efa\u62a5\u544a\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body js_forminfo"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u62a5\u544a\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput name\x3d"form-name" id\x3d"form-name" class\x3d"form-control w-full" type\x3d"text" maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u62a5\u544a\u63cf\u8ff0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea id\x3d"form-describe" class\x3d"form-control w-full" maxlength\x3d"1000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv style\x3d"padding: 8px;"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"form-btn-save" class\x3d"btn btn-sm btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e \x3ca id\x3d"form-btn-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formstatdatatab":'\x3cdiv class\x3d"eform-sidebar j_form_goalSlideObj"\x3e\x3cdiv class\x3d"eform-sidebar-content"\x3e\x3cdiv class\x3d"hd j_form_list_head"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3clable\x3e\u8868\u5355\u7ba1\u7406\x3c/lable\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search search-right fr"\x3e\x3cinput class\x3d"form-control js_searchkeyword" type\x3d"text" name\x3d"searchsearch"\x3e\x3ci class\x3d"icon-search j_form_search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper j_formstattabScr"\x3e\x3cdiv class\x3d"eform-box j_form_list"\x3e\x3c/div\x3e\x3cdiv class\x3d"no-result hide j_no_result"\x3e\u6682\u65e0\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdl id\x3d"j_form_item" class\x3d"eform-item j_form_item hide router" href\x3d""\x3e\x3cdt\x3e\x3cspan class\x3d"serial"\x3e1\x3c/span\x3e\x3c/dt\x3e\x3cdd\x3e\x3cspan class\x3d"j_title title" title\x3d""\x3e\x3c/span\x3e\x3cspan class\x3d"fr badge num j_number"\x3e\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e',
"formstat.formstatdatatable":'\x3cdiv class\x3d"eform-stat-view"\x3e\x3cdiv class\x3d"j_form_tab"\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-right-wrapper j_formstat eui-scroll"\x3e\x3cdiv class\x3d"eform-header clearfix"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli\x3e\x3cdiv class\x3d"eform-slider graph j_form_goalSlideCtrl" data-open\x3d"true"\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3cspan class\x3d"j_form_name"\x3e\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_form_router"\x3e\x3cli class\x3d"router active" href\x3d"" type\x3d"formstat"\x3e\x3ca\x3e\u6570\u636e\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"statfield"\x3e\x3ca\x3e\u6570\u636e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"statreport"\x3e\x3ca\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-success"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown report-ul"\x3e\x3cli id\x3d"export_formdata" \x3e\x3ca\x3e\u5bfc\u51fa\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre j_entityslider-toggle" id\x3d"write_report"data-module\x3d"writeform" skiptype\x3d"edit"  data-id\x3d""userid\x3d""  form-creator\x3d"" form-creatorname\x3d"" deptname\x3d""\x3e\x3ca class\x3d"btn btn-success btn-sm dropdown-toggle"\x3e\u586b\u5199\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr js_shareForm"\x3e\x3ca class\x3d"btn btn-sm"\x3e\u5916\u90e8\u5206\u53d1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item j_form_set_btn fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u8868\u5355\u8bbe\u7f6e\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul id\x3d"view-state" class\x3d"dropdown-menu dropdown-menu-right border-dropdown j_form_set"\x3e\x3ca class\x3d"typeahead-search hide j_employee" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3c/a\x3e\x3cli class\x3d"j_insideNotice"\x3e\x3ca\x3e\u5185\u90e8\u901a\u77e5\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'reportConf\'\x3e\u5185\u90e8\u5b9a\u65f6\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'continueWrite\'\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'authConfig\'\x3e\u8868\u5355\u6743\u9650\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown-line"\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'useflow\'\x3e\u4f7f\u7528\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown-line"\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'editform\'\x3e\u7f16\u8f91\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'copyform\'\x3e\u590d\u5236\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"dropdown-line"\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'dataTrend\'\x3e\u6570\u636e\u6536\u96c6\u8d8b\u52bf\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-target\x3d\'insidCollect\'\x3e\u5185\u90e8\u6536\u96c6\u65e5\u5fd7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr j_tagLi tagli" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"top"  data-original-title\x3d"\u6211\u7684\u8868\u5355\u5206\u7c7b"\x3e\x3cdiv class\x3d"dropdown"\x3e\x3ca class\x3d"btn btn-sm j_tag"\x3e\x3ci class\x3d"icon-tag"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"j_tagcontainer border-dropdown tagcontainer"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr j_columnField" title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"top"  data-original-title\x3d"\u8bbe\u7f6e\u8868\u5934\u663e\u793a"\x3e\x3ca class\x3d"btn btn-sm"\x3e\x3ci class\x3d"icon-list-ul"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3cdiv class\x3d"btn-group dropdown-menu-toggle"\x3e\x3cdiv class\x3d"input-group w-150 input-group-hasicon"\x3e\x3cinput type\x3d"text" style\x3d"color: #999999;" placeholder\x3d"\u641c\u7d22\u540d\u79f0" class\x3d"j_keyword_input form-control placeholder-sm pr-25 ds-b"\x3e\x3ca style\x3d"right: 30px; text-decoration: none;" class\x3d"j_form_keyword form-control-feedback cs-p c-grey"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3cspan class\x3d"input-group-btn"\x3e\x3ca data-toggle-panel\x3d"js_searchContainer" class\x3d"btn btn-sm j_togglepane" id\x3d"initAdvanceSearch" title\x3d"\u9ad8\u7ea7\u641c\u7d22"\x3e\x3ci class\x3d"cs-p icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"j_advanceSearch advance-search"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"details eform-content j_eformstatScr scrollwrapper" id\x3d"formStatContent"\x3e\x3cdiv class\x3d"details p-20" id\x3d"js-formstat"\x3e\x3cdiv id\x3d"formDatas" class\x3d"formFieldDatas form-datas"\x3e\x3cdiv id\x3d"statbody"\x3e\x3cdiv class\x3d"j_formstarScr wform-stat-tb"\x3e\x3ctable id\x3d"stat_table" class\x3d"table table-bordered"\x3e\x3cthead\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ctfoot class\x3d"hide bg-f0"\x3e\x3ctr\x3e\x3c/tr\x3e\x3c/tfoot\x3e\x3c/table\x3e\x3cdiv class\x3d"j_form_empty hide form_empty formstat-noresult"\x3e\u6682\u65e0\u6570\u636e\uff01\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"more_data" class\x3d"common-more hide mt-0"\x3e\x3ca\x3e\u52a0\u8f7d\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formmanageDialog-container"\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formstatdatafield":'\x3cdiv id\x3d"formfieldstat" class\x3d"formfieldstat-panel eform-data-panel"\x3e\x3cdiv id\x3d"formfieldStatContent" class\x3d"eform-data-content j_formfieldstat"\x3e\x3cdiv id\x3d"formFieldDatas" class\x3d"formFieldDatas"\x3e\x3cdiv class\x3d"eformst-tools clearfix mb-10"\x3e\x3cdiv class\x3d"j_form_empty hide form_empty"\x3e\x3ca\x3e\u65e0\u6570\u636e\uff01\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"fieldstatbody" class\x3d"fieldstatbody"\x3e\x3cdiv id\x3d"detailBarType" class\x3d"btn-group mainline-bartype mb-10"\x3e\x3ca value\x3d"member" class\x3d"btn active"\x3e\u5e74\x3c/a\x3e\x3ca value\x3d"date" class\x3d"btn"\x3e\u6708\x3c/a\x3e\x3ca value\x3d"group" class\x3d"btn"\x3e\u65e5\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d\'js_formfield eform-field-tab\'\x3e\x3cdiv id\x3d\'numdatatrendstat\' class\x3d\'w-full h-200\' style\x3d"width:auto!important;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formstat.formstatfield":'\x3cdiv class\x3d"eform-stat-view"\x3e\x3cdiv class\x3d"j_form_tab"\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-right-wrapper j_formstat j_eformstatScr scrollwrapper"\x3e\x3cdiv class\x3d"eform-header clearfix"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli\x3e\x3cdiv class\x3d"eform-slider graph j_form_goalSlideCtrl" data-open\x3d"true"\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3cspan class\x3d"j_form_name"\x3e\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_form_router"\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"formstat"\x3e\x3ca\x3e\u6570\u636e\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router active" href\x3d"" type\x3d"statfield"\x3e\x3ca\x3e\u6570\u636e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"statreport"\x3e\x3ca\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"table-tray eform-stat-view j_goalSlideObj sidebar-in"\x3e\x3cdiv class\x3d"tray-cell eform-content j_formstat"\x3e\x3cdiv id\x3d"formfieldstat" class\x3d"formfieldstat-panel eform-data-panel"\x3e\x3cdiv id\x3d"formfieldStatContent" class\x3d"eform-data-content j_formfieldstat"\x3e\x3cdiv id\x3d"formFieldDatas" class\x3d"formFieldDatas"\x3e\x3cdiv class\x3d"eformst-tools clearfix mb-10"\x3e\x3cdiv class\x3d"j_form_empty hide form_empty formstat-noresult"\x3e\x3ca\x3e\u65e0\u6570\u636e\uff01\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"hide j_advance_search"\x3e\x3cli\x3e\x3cdiv class\x3d"input-group"\x3e\x3ca id\x3d"initFieldAdvanceSearch" class\x3d"btn btn-sm btn-primary"\x3e\u9ad8\u7ea7\u641c\u7d22 \x3ci class\x3d"icon-angle-down cs-p"\x3e\x3c/i\x3e \x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_advanceSearch advanceSearch"\x3e\x3ch5\x3e\u7edf\u8ba1\u5b57\u6bb5\x3c/h5\x3e\x3cul class\x3d\'searchfields j_searchfields\'\x3e\x3cli style\x3d"display: none;"\x3e\x3cinput data-field\x3d\'\' type\x3d\'checkbox\' checked\x3d\'checked\'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"eformst-tools clearfix mb-10 formstat-uphide"\x3e\x3cul\x3e\x3cli\x3e\x3ca id\x3d\'packup\' class\x3d"btn btn-sm btn-default"\x3e\x3ci class\x3d"icon-angle-up glyphicon"\x3e\x3c/i\x3e\u6536\u8d77\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"fieldstatbody" class\x3d"scrollwrapper fieldstatbody"\x3e\x3cdiv class\x3d\'js_formfield eform-field-tab ph-10\'\x3e\x3cdiv id\x3d\'numberchartstat\' class\x3d\'w-full h-200\' style\x3d"width:auto!important;"\x3e\x3c/div\x3e\x3cdiv id\x3d\'numdatatrendstat\' class\x3d\'w-full h-200\' style\x3d"width:auto!important;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdl id\x3d"j_form_item" class\x3d"eform-item j_form_item hide"\x3e\x3cdt\x3e\x3cspan class\x3d"serial"\x3e1\x3c/span\x3e\x3c/dt\x3e\x3cdd\x3e\x3cspan class\x3d"j_title" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top" \x3e\x3c/span\x3e\x3cspan class\x3d"fr badge ml-10 j_number"\x3e\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e',
"formstat.formstatreport":'\x3cdiv class\x3d"eform-stat-view j_form_stat"\x3e\x3cdiv class\x3d"j_form_tab"\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-right-wrapper j_formstat j_eformstatScr scrollwrapper"\x3e\x3cdiv class\x3d"eform-header clearfix"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli\x3e\x3cdiv class\x3d"eform-slider graph j_form_goalSlideCtrl" data-open\x3d"true"\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3cspan class\x3d"j_form_name"\x3e\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_form_router"\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"formstat"\x3e\x3ca\x3e\u6570\u636e\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router" href\x3d"" type\x3d"statfield"\x3e\x3ca\x3e\u6570\u636e\u7edf\u8ba1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router active" href\x3d"" type\x3d"statreport"\x3e\x3ca\x3e\u81ea\u5b9a\u4e49\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formfieldstat" class\x3d"formfieldstat-panel eform-data-panel clearfix bg-white"\x3e\x3cdiv id\x3d"formReportContent" class\x3d"eform-report-content scrollwrapper"\x3e\x3cdiv id\x3d"formReportDatas" class\x3d"mr-10"\x3e\x3cdiv id\x3d"reportstatbody"\x3e\x3cdiv class\x3d\'js_report\'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formitems" class\x3d"eform-report-view"\x3e\x3cul class\x3d"eform-report-list clearfix js_companyformlist"\x3e\x3cli class\x3d"js_formitemsli" formtype\x3d"company" style\x3d"display:none"\x3e\x3cdiv class\x3d"js_formListBox"\x3e\x3ch4 id\x3d"title" class\x3d"ellipsis" skiptype\x3d"edit"\x3e\x3c/h4\x3e\x3cdiv class\x3d"info"\x3e\x3cp class\x3d"operator"\x3e\u521b\u5efa\u4eba\uff1a\x3c/p\x3e\x3cp class\x3d"createTime"\x3e\u521b\u5efa\u65f6\u95f4\uff1a\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group js_btn-group"\x3e\x3ca class\x3d"btn btn-sm reportpreview" previewurl\x3d\'\'\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-sm reportedit" reporturl\x3d\'\'\x3e\u7f16\u8f91\x3c/a\x3e\x3ca class\x3d"btn btn-sm reportdel" formId\x3d\'\'\x3e\u5220\u9664\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"report-create" class\x3d"list-add"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3cp\x3e\u6dfb\u52a0\u62a5\u544a\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e',
"form.cloud":'\x3cdiv class\x3d"eform-cloud-main j_formcloudmain scrollwrapper"\x3e\x3cdiv class\x3d"table-tray scrollwrapper" \x3e\x3cdiv class\x3d"tray-cell main-content"\x3e\x3cdiv class\x3d"eform-cloud-content"\x3e\x3cdiv class\x3d"title"\x3e\u7b5b\u9009\u6761\u4ef6\x3c/div\x3e\x3cul class\x3d"item formcloud-sub j_formlabel" data-max-height\x3d"200"\x3e\x3c/ul\x3e\x3cul class\x3d"item"\x3e\x3cli class\x3d"item-line j_labelmore"\x3e\x3cspan\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"item-nobd"\x3e\x3cli class\x3d"result j_formresult"\x3e\x3cdl\x3e\x3cdt\x3e\u5df2\u9009\u6761\u4ef6\uff1a\x3c/dt\x3e\x3cdd class\x3d"item-no"\x3e\x3ca\x3e\u6682\u65f6\u6ca1\u6709\u9009\u62e9\u8fc7\u6ee4\u6761\u4ef6\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-cloud-tb"\x3e\x3cdiv class\x3d"tool j_toolkit"\x3e\x3ca  data-order\x3d"default" class\x3d"current" href\x3d"#"\x3e\u7efc\u5408\u6392\u5e8f\x3c/a\x3e\x3ca data-order\x3d"comment" href\x3d"#" class\x3d""\x3e\u8bc4\u8bba\x3c/a\x3e\x3ca data-order\x3d"hot" href\x3d"#"\x3e\u4eba\u6c14\x3c/a\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"formsearch-keywords" class\x3d"form-control" type\x3d"text"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e \x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"list j_formlist"\x3e\x3cdiv class\x3d"j_table"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_no-result no-result hide" style\x3d"border: none;"\x3e\u65e0\u6570\u636e\x3c/div\x3e\x3cdiv class\x3d"form-more common-more text-center"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell main-sidebar"\x3e\x3cdiv class\x3d"main-sidebar-bd"\x3e\x3cdiv class\x3d"navs-wrap eform-cloud-sidebar j_hotform-wrap"\x3e\x3cp class\x3d"hot-title text-center"\x3e\u70ed\u95e8\u8868\u5355\x3c/p\x3e\x3cdiv class\x3d"hotform-list" style\x3d"display: none;"\x3e\x3ca class\x3d"hotform-card" href\x3d"#" target\x3d\'_blank\'\x3e\x3cdiv class\x3d"catalog-logo"\x3e\x3cimg src\x3d"images/demo-v3/formcloudview/1.png"/\x3e\x3c/div\x3e\x3cp title\x3d"\u7269\u54c1\u7533\u9886\u5355" class\x3d"text-center j_formname word-limit"\x3e\u7269\u54c1\u7533\u9886\u5355\x3c/p\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"form.cloud.label":'\x3c%_.each(data, function(label1){if(label1.child.length \x3d\x3d 0) return;%\x3e\x3cli class\x3d"formcloud-select-list"\x3e\x3cdl\x3e\x3cdt\x3e\x3c%\x3dlabel1.name%\x3e\uff1a\x3c/dt\x3e\x3c%_.each(label1.child,function(label2){%\x3e\x3cdd\x3e\x3ca href\x3d"#" data-label-id\x3d"\x3c%\x3dlabel2.id%\x3e"\x3e\x3c%\x3dlabel2.name%\x3e\x3c/a\x3e\x3c/dd\x3e\x3c%});%\x3e\x3c/dl\x3e\x3c/li\x3e\x3c%});%\x3e',"form.cloud.list":'\x3c%_.each(data,function(form){%\x3e\x3cdiv class\x3d"eform-cloud-item" data-form-id\x3d"\x3c%\x3dform.id%\x3e"\x3e\x3ca class\x3d"item-title word-limit" data-operate\x3d"preview"\x3e\x3c%\x3dform.name%\x3e\x3c/a\x3e\x3cp class\x3d"item-info"\x3e\x3c%\x3dDate.create(form.createTime).format("{yyyy}-{MM}-{dd}")%\x3e  |  \u67e5\u770b\x3c%\x3dform.viewCount%\x3e\u6b21\x3c/p\x3e\x3cp class\x3d"item-desc"\x3e\x3c/p\x3e\x3cdiv class\x3d"dlcnt" title\x3d"\u4f7f\u7528\x3c%\x3dform.copyCount%\x3e\u6b21"\x3e\x3cspan class\x3d"use"\x3e\u4f7f\u7528\x3c/span\x3e\x3cspan class\x3d"countnum"\x3e\x3c%\x3dform.copyCount%\x3e\x3c/span\x3e\u6b21\x3c/div\x3e\x3cdiv class\x3d"opbtns btn-group"\x3e\x3ca class\x3d"btn btn-default op-preview" href\x3d"#" data-operate\x3d"preview"\x3e\x3ci class\x3d"icon-eye"\x3e\x3c/i\x3e\u9884\u89c8\x3c/a\x3e\x3ca class\x3d"btn btn-default op-use" href\x3d"#" data-operate\x3d"copy"\x3e\x3ci class\x3d"icon-write"\x3e\x3c/i\x3e\u4f7f\u7528\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c%});%\x3e',
"formmanage.formpage":'\x3caside class\x3d"aside"\x3e\x3cul class\x3d"menu-group"\x3e\x3cli\x3e\x3cdiv id\x3d"formmanages-type"  class\x3d"menu-head"\x3e\x3ci class\x3d"menu-icon icon-list"\x3e\x3c/i\x3e\u8868\u5355\u7ba1\u7406\x3c/div\x3e\x3cul id\x3d"menu-group-sub" class\x3d"menu-group-sub"\x3e\x3cli class\x3d"filterType router watch" data-title\x3d"\u9879\u76ee" href\x3d"/formmanages/\x3c%\x3duserId%\x3e/watch" data-entity\x3d"formmanage"\x3e\x3ca\x3e\x3cspan class\x3d"j_type-name"\x3e\u8868\u5355\u76d1\u63a7\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router tag" id\x3d"unread" data-title\x3d"\u6807\u7b7e\u7ba1\u7406" data-entity\x3d"unRead"\x3e\x3ca\x3e\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3cspan class\x3d"j_type-name"\x3e\u6807\u7b7e\u7ba1\u7406\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"filterType router lib" id\x3d"newComment" data-title\x3d"\u8868\u5355\u5e93\u7ba1\u7406" data-entity\x3d"newComment" \x3e\x3ca\x3e \x3cspan id\x3d"newcomment" class\x3d"fr badge"\x3e\x3c/span\x3e\x3cspan class\x3d"j_type-name"\x3e\u8868\u5355\u5e93\u7ba1\u7406\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/aside\x3e\x3cdiv id\x3d"main" class\x3d"main"\x3e\x3c/div\x3e\x3cdiv id\x3d"formdistribute-container"\x3e\x3c/div\x3e',
"formmanage.formwatchpage":'\x3cdiv class\x3d"j_formwatch_scroll" id\x3d"formwatch-page"\x3e\x3cdiv class\x3d"toolkit toolkit-lg toolkit-bar clearfix hide"\x3e\x3cul class\x3d"toolkit-list fl js_formtab"\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab active" id\x3d"tab-formwatchlist"\x3e\x3ca\x3e\x3ci class\x3d"icon-tree glyphicon"\x3e\x3c/i\x3e\u8868\u5355\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item toolkit-item-tab" id\x3d"tab-formwatchchart"\x3e\x3ca id\x3d"my-forms"\x3e\x3ci class\x3d"icon-user glyphicon"\x3e\x3c/i\x3e\u8d8b\u52bf\u56fe\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formwatch-container"\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formwatchlist":'\x3cdiv id\x3d"formwatch-list" class\x3d"scrollwrapper"\x3e\x3cdiv class\x3d"main-hd center-pane mb-20"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item divider sn"\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"formwatch-order" class\x3d"btn btn-sm  dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"DESC"\x3e\u6309\u521b\u5efa\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"fill_count" data-direction\x3d"DESC"\x3e\u6309\u63d0\u4ea4\u6570\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" type\x3d"text" id\x3d"formsearch-keywords" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr last"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm  dropdown-toggle"\x3e\x3ci class\x3d"icon-th-list glyphicon"\x3e\x3c/i\x3e\u6279\u91cf \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"watch-enable j_batch"\x3e\u6279\u91cf\u542f\u7528\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"watch-disable j_batch"\x3e\u6279\u91cf\u7981\u7528\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"ph-20"\x3e\x3ctable class\x3d"table table-bordered table-striped eform-watch-tab bg-f8" id\x3d"form-list"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth class\x3d"text-center" style\x3d"width:60px;"\x3e\x3ci id\x3d"check-all" class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/th\x3e\x3cth class\x3d"text-center"\x3e\u6807\u9898\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:120px;"\x3e\u7528\u6237\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:120px;"\x3e\u67e5\u770b\u6570\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:120px;"\x3e\u53e6\u5b58\u6570\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:120px;"\x3e\u63d0\u4ea4\u6570\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:180px;"\x3e\u521b\u5efa\u65f6\u95f4\x3c/th\x3e\x3cth class\x3d"text-center" style\x3d"width:120px;"\x3e\u72b6\u6001\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr class\x3d"hide"\x3e\x3cth scope\x3d"row" class\x3d"index text-center" data-id\x3d""\x3e\x3cspan class\x3d"sn"\x3e1\x3c/span\x3e\x3cspan class\x3d"checkbox hide"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/th\x3e\x3ctd class\x3d"name"\x3e\x3c/td\x3e\x3ctd class\x3d"user text-center"\x3e\x3c/td\x3e\x3ctd class\x3d"viewCount text-center"\x3e\x3c/td\x3e\x3ctd class\x3d"copyCount text-center"\x3e\x3c/td\x3e\x3ctd class\x3d"submit-counts text-center"\x3e\x3c/td\x3e\x3ctd class\x3d"createTime text-center"\x3e\x3c/td\x3e\x3ctd class\x3d"status text-center"\x3e\x3cspan class\x3d"tzCheckBox e-range e-range-xs" title\x3d"\u542f\u7528\u8868\u5355"\x3e\x3cspan class\x3d"tzCBContent"\x3e\x3c/span\x3e\x3cspan class\x3d"tzCBPart"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered clearfix hide"\x3e\x3cul class\x3d"pagination fl mt-0 mb-40"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"fromwatchlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cstyle\x3e.selected .sn{display:none;}#form-list .checkbox{margin:0;}.icon-checkbox-unchecked,.icon-checkbox-checked{cursor: pointer;}\x3c/style\x3e',
"formmanage.formwatchchart":'\x3cdiv id\x3d"formwatchchartview" class\x3d"formwatchreport scrollwrapper"\x3e\x3cdiv class\x3d"main-hd noshadow"\x3e\x3cdiv class\x3d"title"\x3e\u8868\u5355\u65b0\u5efa\u8d8b\u52bf\u7edf\u8ba1\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bg-white js_taskreportScr scrollwrapper"\x3e\x3cdiv class\x3d"pv-10 ph-20"\x3e\x3cdiv class\x3d"eform-watch-main form-horizontal"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn btn-default" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u7edf\u8ba1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card p-10"\x3e\x3cdiv id\x3d"day-chart" class\x3d"h-400"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formdistribute":'\x3cdiv class\x3d"modal fade" id\x3d"distributeModal" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"myModalLabel" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-dialog eform-distribute-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3cspan class\x3d"modal-title" id\x3d"myModalLabel"\x3e\x3cspan class\x3d"modal-title-iconborder"\x3e\x3ci class\x3d"icon-share2"\x3e\x3c/i\x3e\x3c/span\x3e\x3ch4\x3e\u8868\u5355\u5206\u53d1\x3c/h4\x3e\x3c/span\x3e\x3cspan class\x3d"modal-description"\x3e\u60a8\u53ef\u4ee5\u628a\x3cspan class\x3d"j_sharetitle"\x3e\x3c/span\x3e\u7528\u4ee5\u4e0b\u65b9\u5f0f\u5206\u4eab\u8868\u5355\uff0c\u8ba9\u66f4\u591a\u4eba\u53c2\u4e0e\u3002\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"form"\x3e\x3cdiv class\x3d"modal-copylink"\x3e\x3cinput id\x3d"copy-text" type\x3d"text" class\x3d"form-control" readonly\x3d"readonly"\x3e\x3cbutton id\x3d"copy-btn" class\x3d"btn btn-success j_invite_link" data-entity\x3d""\x3e\u590d\u5236\u94fe\u63a5\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"formshare-div"\x3e\x3cdiv id\x3d"qrcode" class\x3d"qrcode"\x3e\x3c/div\x3e\x3cdiv class\x3d"qrcode-description"\x3e\u626b\u7801\u5373\u5206\u4eab\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"baidushare j_share"\x3e\x3cspan class\x3d"j_mshare"\x3e\x3cspan class\x3d"baidu-mshare graph"\x3e\x3c/span\x3e\x3clabel\x3e\u4e00\u952e\u5206\u4eab\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"j_qzone"\x3e\x3cspan class\x3d"baidu-qzone graph"\x3e\x3c/span\x3e\x3clabel\x3eQQ\u7a7a\u95f4\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"j_tsina"\x3e\x3cspan class\x3d"baidu-tsina graph"\x3e\x3c/span\x3e\x3clabel\x3e\u65b0\u6d6a\u5fae\u535a\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"j_tqq"\x3e\x3cspan class\x3d"baidu-tqq graph"\x3e\x3c/span\x3e\x3clabel\x3e\u817e\u8baf\u5fae\u535a\x3c/label\x3e\x3c/span\x3e\x3cspan class\x3d"j_douban"\x3e\x3cspan class\x3d"baidu-douban graph"\x3e\x3c/span\x3e\x3clabel\x3e\u8c46\u74e3\u7f51\x3c/label\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cstyle\x3e.j_share span{cursor: pointer;}\x3c/style\x3e',
"formmanage.select":'\x3cdiv class\x3d"modal fade eform-selct-content" id\x3d"formselect"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content" style\x3d"width:700px;min-height:400px;"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e\x3ch4 class\x3d"modal-title"\x3e\u6dfb\u52a0\u5173\u8054\u8868\u5355\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"toolkit center-pane"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"formsearch-keywords" class\x3d"form-control" type\x3d"text"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e \x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3ctable class\x3d"table table-bordered table-hover association-form table-striped formselect-table" id\x3d"select-form-list"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth class\x3d"text-center" style\x3d"width:60px;"\x3e\x3ci class\x3d"icon-checkbox icon-checkbox-unchecked" id\x3d"form-check-all"\x3e\x3c/i\x3e\x3c/th\x3e\x3cth class\x3d"text-center"\x3e\u6807\u9898\x3c/th\x3e\x3cth class\x3d"text-center"\x3e\u6240\u5c5e\u7c7b\u522b\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr style\x3d"display:none;"\x3e\x3cth id\x3d"index" data-id\x3d"" class\x3d"text-center af-textcenter index"\x3e\x3cspan class\x3d"sn"\x3e1\x3c/span\x3e\x3cspan class\x3d"checkbox hide"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/th\x3e\x3ctd id\x3d"title"\x3e\x3c/td\x3e\x3ctd id\x3d"includeLabels"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered hide pull-right"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-default fr" data-dismiss\x3d"modal" style\x3d"margin-left:10px;"\x3e\u5173\u95ed\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary fr" id\x3d"btnSave"\x3e\u786e\u8ba4\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formlabelpage":'\x3cdiv class\x3d"main main-narrow j_main"\x3e\x3cdiv class\x3d"col-tb eform-cloudmanage"\x3e\x3cdiv class\x3d"col-3 j_depa depa" id\x3d"col-cell"\x3e\x3cdiv class\x3d"toolkit-bar toolkit-btxt"\x3e\x3cul class\x3d"fl"\x3e\x3cli class\x3d"active"\x3e\x3ca id\x3d"formlabel-all" class\x3d"org-users"\x3e\u6240\u6709\u7c7b\u522b\x3c/a\x3e\x3ca class\x3d"org-add" id\x3d"add-root"\x3e\uff0b\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"form-tree" class\x3d"org-tree scrollwrapper bg-white"  style\x3d"overflow-y:auto;"\x3e\x3cdiv id\x3d"form-tree-list" class\x3d"ftl"\x3e\x3cdiv id\x3d"list-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"form-table-list" class\x3d"col-9 j_user table-list scrollwrapper"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formlabellist":'\x3cdiv id\x3d"employee-container"\x3e\x3cul class\x3d"employee-list users-list"\x3e\x3cdiv id\x3d"list-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cdiv class\x3d"common-more hide"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"formLabelListClone" class\x3d"hide tab-box"\x3e\x3cinput type\x3d"hidden" id\x3d"formlabelid" /\x3e\x3cdiv class\x3d"toolkit-bar"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item divider sn"\x3e\x3cli class\x3d"toolkit-item "\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"form-order" class\x3d"btn btn-sm  dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"DESC"\x3e\u6309\u521b\u5efa\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"copy_Count" data-direction\x3d"DESC"\x3e\u6309\u53e6\u5b58\u6570\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" type\x3d"text" id\x3d"formsearch-keywords" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3cli class\x3d"toolkit-item fr hide"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"btn btn-sm btn-square dropdown-toggle"\x3e\x3ci class\x3d"icon-th-list glyphicon"\x3e\x3c/i\x3e\u6279\u91cf \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"enable j_batch"\x3e\u6279\u91cf\u542f\u7528\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"disable j_batch"\x3e\u6279\u91cf\u7981\u7528\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"delete" id\x3d"js_deletelink"\x3e\u6279\u91cf\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3ca class\x3d"j_goal-item-add btn btn-primary btn-sm j_clearAll"\x3e\x3ci class\x3d"icon-minus-thin glyphicon"\x3e\x3c/i\x3e\u6e05\u7a7a\u6240\u6709\u5173\u8054\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3ca class\x3d"j_goal-item-add btn btn-success btn-sm js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr"\x3e\x3ca class\x3d"j_goal-item-add btn btn-warning btn-sm js_addLinkForm" data-toggle\x3d"modal"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5173\u8054\u73b0\u6709\u8868\u5355\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"eform-clone-tab p-20"\x3e\x3ctable class\x3d"table table-bordered bg-white table-widthfixed" id\x3d"formLabelClone"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth id\x3d"index" class\x3d"text-center index ellipsis"\x3e\u5e8f\u53f7\x3c/th\x3e\x3ctd id\x3d"title" class\x3d"text-center title ellipsis"\x3e\u6807\u9898\x3c/td\x3e\x3ctd id\x3d"type" class\x3d"text-center type ellipsis"\x3e\u6240\u5c5e\u7c7b\u522b\x3c/td\x3e\x3ctd id\x3d"createTime" class\x3d"text-center createTime ellipsis"\x3e\u521b\u5efa\u65f6\u95f4\x3c/td\x3e\x3ctd id\x3d"showNum" class\x3d"text-center showNum ellipsis"\x3e\u67e5\u770b\u6570\x3c/td\x3e\x3ctd id\x3d"saveNum" class\x3d"text-center saveNum ellipsis"\x3e\u53e6\u5b58\u6570\x3c/td\x3e\x3ctd id\x3d"status" class\x3d"text-center status ellipsis"\x3e\u72b6\u6001\x3c/td\x3e\x3ctd id\x3d"operation" class\x3d"text-center operation"\x3e\u64cd\u4f5c\x3c/td\x3e\x3ctd class\x3d"text-center ellipsis"\x3e\u63a8\u8350\x3c/td\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr style\x3d"display:none;" class\x3d"list-box"\x3e\x3cth id\x3d"index" class\x3d"index text-center"\x3e\x3cspan class\x3d"sn"\x3e1\x3c/span\x3e\x3cspan class\x3d"checkbox hide"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/th\x3e\x3ctd id\x3d"title" class\x3d"title ellipsis"\x3e\u6807\u9898\x3c/td\x3e\x3ctd  id\x3d"includeLabels" class\x3d"includeLabels ellipsis"\x3e\x3c/td\x3e\x3ctd id\x3d"createTime" class\x3d"text-center createTime ellipsis"\x3e\u521b\u5efa\u65f6\u95f4\x3c/td\x3e\x3ctd id\x3d"showNum" class\x3d"text-center showNum ellipsis"\x3e\u67e5\u770b\u6570\x3c/td\x3e\x3ctd id\x3d"saveNum" class\x3d"text-center saveNum ellipsis"\x3e\u53e6\u5b58\u6570\x3c/td\x3e\x3ctd id\x3d"status" class\x3d"text-center status ellipsis"\x3e\x3cspan class\x3d"tzCheckBox e-range e-range-xs" title\x3d"\u542f\u7528\u8868\u5355"\x3e\x3cspan class\x3d"tzCBContent"\x3e\x3c/span\x3e\x3cspan class\x3d"tzCBPart"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd id\x3d"operation" class\x3d"text-center operation"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"form-operation" class\x3d"btn btn-sm  dropdown-toggle"\x3e\u64cd\u4f5c  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"j_operationType" data-operatype\x3d"edit"\x3e\u7f16\u8f91\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_operationType"  data-operatype\x3d"delete"\x3e\u5220\u9664\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_operationType"  data-operatype\x3d"deletelink"\x3e\u5220\u9664\u5173\u8054\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_operationType"  data-operatype\x3d"rename"\x3e\u91cd\u547d\u540d\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd id\x3d"recommend" class\x3d"text-center recommend ellipsis"\x3e\x3cspan title\x3d"\u63a8\u8350" class\x3d"j_formRecommend"\x3e\x3ci class\x3d"j_star"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered hide pull-right"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"formselect_Container"\x3e\x3c/div\x3e',
"formmanage.formlabeledit":'\x3cdiv class\x3d"toolkit-bar toolkit-btxt"\x3e\x3cul\x3e\x3cli\x3e\x3ca  id\x3d"operType"\x3e\u7f16\u8f91\u7c7b\u522b\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"formlabel-info" class\x3d"form-horizontal entity-info bg-white formlabel-info hide"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7c7b\u522b\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"formlabel-id" name\x3d"formLabel.id" value\x3d"" data-old\x3d""/\x3e\x3cinput type\x3d"text" class\x3d"form-control" id\x3d"formlabel-name" name\x3d"formLabel.name" placeholder\x3d"\u7c7b\u522b\u540d\u79f0"  /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u7c7b\u522b\u5e8f\u53f7\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"text" class\x3d"form-control medium" id\x3d"formlabel-sort" name\x3d"formLabel.sort" placeholder\x3d"\u7c7b\u522b\u5e8f\u53f7" value\x3d"0" data-old\x3d"0" maxlength\x3d"4" componentKey\x3d"NumberComponent" /\x3e\x3cspan style\x3d"margin-left:10px;color:red;"\x3e\u6ce8:\u540c\u4e00\u7ea7\u7684\u7c7b\u522b\u6309\u5e8f\u53f7\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group mark" id\x3d"formlabel-root"\x3e\x3clabel class\x3d"control-label"\x3e\u4e0a\u7ea7\u7c7b\u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput type\x3d"hidden" id\x3d"formlabel-parent" name\x3d"formLabel.parent.id" /\x3e\x3cinput type\x3d"hidden" id\x3d"parent-rank"  /\x3e\x3cdiv class\x3d"entity-container" id\x3d"formlabelSelector"\x3e\x3ca data-value\x3d""\x3e\x3c/a\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput id\x3d"typeahead-formlabel" type\x3d"text" class\x3d"control-input form-control typeahead search" data-entity\x3d"formLabel" placeholder\x3d"\u8f93\u5165"/\x3e\x3ca class\x3d"btn typeahead-search" data-entity\x3d"formLabel"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"control-btn btn btn-sm" title\x3d"\u4fee\u6539\u7c7b\u522b"\x3e\x3ca class\x3d"icon-pencil" \x3e\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formloglist":'\x3cdiv id\x3d"oneform-log" class\x3d"wformst-panel"\x3e\x3cdiv id\x3d"oneformlog-Content" class\x3d"wform-stat-content ebox1 scrollwrapper" marginbottom\x3d"10"\x3e\x3cdiv id\x3d"oneformlog-Datas" class\x3d"formFieldDatas eform-log-div"\x3e\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item divider sn"\x3e\x3cli class\x3d"toolkit-item " style\x3d"width: 100px;"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca id\x3d"form-order" class\x3d"btn btn-sm  dropdown-toggle"\x3e\u6392\u5e8f  \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"create_time" data-direction\x3d"DESC"\x3e\u6309\u63d0\u4ea4\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"orderType" data-entity\x3d"spent_time" data-direction\x3d"DESC"\x3e\u6309\u6240\u7528\u65f6\u95f4\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"fr hide"\x3e\x3ca class\x3d"btn btn-primary  btn-sm"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e\u5bfc\u51fa\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"taskstat-cdts form-horizontal"\x3e\x3cdiv class\x3d"control-group nomg"\x3e\x3clabel class\x3d"control-label"\x3e\u63d0\u4ea4\u65f6\u95f4\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls" style\x3d"margin-left:0px;"\x3e\x3cdiv class\x3d"j_time btn-group btn-group-sm btn-group mr-10 fl" \x3e\x3ca class\x3d"btn btn-default" data\x3d"thisWeek"\x3e\u672c\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"last2weeks"\x3e\u8fd1\u4e24\u5468\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"thisMonth"\x3e\u672c\u6708\x3c/a\x3e\x3ca class\x3d"btn" data\x3d"lastMonth"\x3e\u4e0a\u6708\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"timebox fl"\x3e\x3cinput id\x3d"begin-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e-\x3cinput id\x3d"end-date" type\x3d"text" class\x3d"form-control datepicker" minView\x3d"month" maxView\x3d"year" format\x3d"yyyy-mm-dd"\x3e\x3c/input\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"fr"\x3e \x3ca id\x3d"load" class\x3d"btn btn-sm btn-primary"\x3e\u641c\u7d22\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3ctable class\x3d"table table-bordered table-hover table-striped nomg" id\x3d"formlog-table"\x3e\x3cthead\x3e\x3ctr\x3e\x3ctd class\x3d"text-center" style\x3d"width:60px;"\x3e\u5e8f\u53f7\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:200px;"\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:120px;"\x3e\u6240\u7528\u65f6\u95f4(\u79d2)\x3c/td\x3e\x3ctd class\x3d"text-center"\x3eIP\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:120px;"\x3e\u6765\u6e90\x3c/td\x3e\x3ctd class\x3d"text-center" style\x3d"width:80px;"\x3e\u8be6\u7ec6\x3c/td\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr style\x3d"display:none;"\x3e\x3ctd id\x3d"index" class\x3d"text-center"\x3e1\x3c/td\x3e\x3ctd id\x3d"createTime" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"spentTime" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"ip" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"source" class\x3d"text-center"\x3e\x3c/td\x3e\x3ctd id\x3d"query" class\x3d"text-center"\x3e\x3ca target\x3d"_blank"\x3e\u67e5\u770b\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3cdiv class\x3d"pagination-centered pull-right"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first disabled page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre disabled page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next disabled page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last disabled page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formcollectloglist":'\x3cdiv id\x3d"collect-log" class\x3d"wformst-panel"\x3e\x3cdiv id\x3d"collectlog-Content" class\x3d"wform-stat-content ebox1 scrollwrapper" marginbottom\x3d"10"\x3e\x3cdiv id\x3d"collectlog-Datas" class\x3d"formFieldDatas"\x3e\x3cdiv class\x3d"main-hd mb-20"\x3e\x3cul  class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u53d1\u9001\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"sendStartTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e - \x3cinput id\x3d"sendEndTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli id\x3d"sendersDiv" class\x3d"toolkit-item"\x3e\x3cspan class\x3d"fl"\x3e\u53d1\u9001\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"senders" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"fr"\x3e\x3ca id\x3d"search" class\x3d"btn-search btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-search glyphicon"\x3e\x3c/i\x3e\u641c\u7d22\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogContent" class\x3d"bg-white eform-collect-tab ph-10"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item number j_number"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item opertor j_tuname"\x3e\u53d1\u9001\u4eba\x3c/div\x3e\x3cdiv class\x3d"item send_count j_tuname"\x3e\u53d1\u9001\u4eba\u6570\x3c/div\x3e\x3cdiv class\x3d"item success_failure j_success_failure"\x3e\u6210\u529f/\u5931\u8d25\x3c/div\x3e\x3cdiv class\x3d"item send_time j_ttime"\x3e\u53d1\u9001\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item detail"\x3e\u8be6\u60c5\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"hide j_collectlog_empty collectlog_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv class\x3d"j_trashbinListScrMod"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_loglist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogClone" class\x3d"hide collectlogClone scrollwrapper j_collectlogClone"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"item number j_number"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item opertor j_opertor"\x3e\u53d1\u9001\u4eba\x3c/div\x3e\x3cdiv class\x3d"item send_count j_send_count"\x3e\u53d1\u9001\u4eba\u6570\x3c/div\x3e\x3cdiv class\x3d"item success_failure j_success_failure"\x3e\u6210\u529f/\u5931\u8d25\x3c/div\x3e\x3cdiv class\x3d"item send_time j_send_time"\x3e\u53d1\u9001\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item detail"\x3e\x3ca class\x3d"j_detail" collectId\x3d"" target\x3d"_blank"\x3e\u3010\u67e5\u770b\u660e\u7ec6\u3011\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogDetailContent" class\x3d"bg-white hide eform-collect-ul"\x3e\x3cul class\x3d"detailContentClone eform-collect-ul bg-white"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item j_accepter" userId\x3d"" style\x3d"width:473px"\x3e\u63a5\u6536\u4eba\x3c/div\x3e\x3cdiv class\x3d"item j_success_status" style\x3d"width:476px"\x3e\u6210\u529f\u72b6\u6001\x3c/div\x3e\x3c/li\x3e\x3cdiv\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_logdetaillist" class\x3d"logdetaillist-ul"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cli class\x3d"common-more mt-0 hide"\x3e\x3ca id\x3d"collectlog-more"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogdetailClone" class\x3d"hide collectlogdetailClone"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"item j_accepter" style\x3d"width:473px"\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_success_status send-success" style\x3d"width:300px"\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_send_again hide send-again " style\x3d"width:193px"\x3e\x3ca target\x3d"_blank"\x3e\u3010\u91cd\u65b0\u53d1\u9001\u3011\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_page_set pagination-centered pull-right ph-10"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"formmanage.formincollectlog":'\x3cdiv class\x3d"modal fade eform-collect-dialog" id\x3d"formcollectlog-dialog"  tabindex\x3d"-1"\x3e\x3cdiv class\x3d"modal-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-label\x3d"Close"\x3e\x3cspan aria-hidden\x3d"true"\x3e\x26times;\x3c/span\x3e\x3c/button\x3e\x3ch4 class\x3d"modal-title"\x3e\u6536\u96c6\u65e5\u5fd7\u5217\u8868\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"mb-20"\x3e\x3cul  class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cspan\x3e\u53d1\u9001\u65f6\u95f4\uff1a\x3c/span\x3e\x3cinput id\x3d"sendStartTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e - \x3cinput id\x3d"sendEndTime" class\x3d"datepicker form-control" type\x3d"text" format\x3d"yyyy-mm-dd" startview\x3d"month" maxview\x3d"decade" minview\x3d"month"\x3e\x3c/li\x3e\x3cli id\x3d"sendersDiv" class\x3d"toolkit-item"\x3e\x3cspan class\x3d"fl"\x3e\u53d1\u9001\u4eba\uff1a\x3c/span\x3e\x3cspan class\x3d"j_optcontainer"\x3e\x3cdiv class\x3d"j_selected entity-container"\x3e\x3c/div\x3e\x3cspan class\x3d"typeahead-wrapper hide"\x3e\x3cinput type\x3d"text" placeholder\x3d"\u8f93\u5165\u59d3\u540d" class\x3d"control-input form-control typeahead search" id\x3d"senders" data-entity\x3d"employee"\x3e\x3ca data-multi\x3d"true" data-entity\x3d"employee" class\x3d"btn typeahead-search"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan title\x3d"\u9009\u62e9\u4eba\u5458" class\x3d"control-btn btn btn-sm"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"fr"\x3e\x3ca id\x3d"search" class\x3d"btn-search btn btn-sm btn-success router"\x3e\x3ci class\x3d"icon-search glyphicon"\x3e\x3c/i\x3e\u641c\u7d22\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogContent" class\x3d"bg-white eform-collect-tab"\x3e\x3cul class\x3d"trash-bin-ul trash-border-ul"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item j_number" style\x3d"width:150px"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item j_tuname" style\x3d"width:150px"\x3e\u53d1\u9001\u4eba\x3c/div\x3e\x3cdiv class\x3d"item j_tuname" style\x3d"width:173px"\x3e\u53d1\u9001\u4eba\u6570\x3c/div\x3e\x3cdiv class\x3d"item j_success_failure" style\x3d"width:150px"\x3e\u6210\u529f/\u5931\u8d25\x3c/div\x3e\x3cdiv class\x3d"item j_ttime" style\x3d"width:150px"\x3e\u53d1\u9001\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item "\x3e\u8be6\u60c5\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"hide j_collectlog_empty collectlog_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cdiv class\x3d"j_trashbinListScrMod" height\x3d"340"\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_loglist"\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogClone" class\x3d"hide collectlogClone scrollwrapper j_collectlogClone"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"item j_number" style\x3d"width:150px"\x3e\u5e8f\u53f7\x3c/div\x3e\x3cdiv class\x3d"item j_opertor" style\x3d"width:150px"\x3e\u53d1\u9001\u4eba\x3c/div\x3e\x3cdiv class\x3d"item j_send_count" style\x3d"width:173px"\x3e\u53d1\u9001\u4eba\u6570\x3c/div\x3e\x3cdiv class\x3d"item j_success_failure" style\x3d"width:150px"\x3e\u6210\u529f/\u5931\u8d25\x3c/div\x3e\x3cdiv class\x3d"item j_send_time" style\x3d"width:150px"\x3e\u53d1\u9001\u65f6\u95f4 \x3c/div\x3e\x3cdiv class\x3d"item" style\x3d"width:176px"\x3e\x3ca class\x3d"j_detail" collectId\x3d"" target\x3d"_blank"\x3e\u3010\u67e5\u770b\u660e\u7ec6\u3011\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogDetailContent" class\x3d"bg-white hide eform-collect-ul"\x3e\x3cul class\x3d"detailContentClone eform-collect-ul bg-white"\x3e\x3cli class\x3d"list-tit bold"\x3e\x3cdiv class\x3d"item j_accepter" userId\x3d"" style\x3d"width:473px"\x3e\u63a5\u6536\u4eba\x3c/div\x3e\x3cdiv class\x3d"item j_success_status" style\x3d"width:476px"\x3e\u6210\u529f\u72b6\u6001\x3c/div\x3e\x3c/li\x3e\x3cdiv\x3e\x3cli class\x3d"list-sub"\x3e\x3cul class\x3d"j_logdetaillist" class\x3d"logdetaillist-ul"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"list-more hide j_empty"\x3e\u6682\u65e0\u6570\u636e...\x3c/li\x3e\x3cli class\x3d"common-more mt-0 hide"\x3e\x3ca id\x3d"collectlog-more"\x3e\u52a0\u8f7d\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv id\x3d"collectlogdetailClone" class\x3d"hide collectlogdetailClone"\x3e\x3cul\x3e\x3cli\x3e\x3cdiv class\x3d"item j_accepter" style\x3d"width:473px"\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_success_status send-success" style\x3d"width:300px"\x3e\x3c/div\x3e\x3cdiv class\x3d"item j_send_again hide send-again " style\x3d"width:193px"\x3e\x3ca target\x3d"_blank"\x3e\u3010\u91cd\u65b0\u53d1\u9001\u3011\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_page_set pagination-centered pull-right"\x3e\x3cul class\x3d"pagination"\x3e\x3cli class\x3d"page-first page-buttons"\x3e\x3ca title\x3d"\u7b2c\u4e00\u9875"\x3e\u9996\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-pre page-buttons"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\u4e0a\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"active"\x3e\x3ca\x3e1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-next page-buttons"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\u4e0b\u4e00\u9875\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"page-last page-buttons"\x3e\x3ca title\x3d"\u6700\u540e\u9875"\x3e\u5c3e\u9875\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"baidu.share":'\x3cdiv class\x3d"bdsharebuttonbox"\x3e\x3ca class\x3d"bds_mshare" data-cmd\x3d"mshare"\x3e\x3c/a\x3e\x3ca class\x3d"bds_qzone" data-cmd\x3d"qzone" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"bds_tsina" data-cmd\x3d"tsina"\x3e\x3c/a\x3e\x3ca class\x3d"bds_tqq" data-cmd\x3d"tqq"\x3e\x3c/a\x3e\x3ca class\x3d"bds_douban" data-cmd\x3d"douban"\x3e\x3c/a\x3e\x3ca class\x3d"bds_count" data-cmd\x3d"count"\x3e\x3c/a\x3e\x3c/div\x3e',"profile.page":'\x3cdiv id\x3d"profileContainer" class\x3d"module-view"\x3e\x3caside class\x3d"aside"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-cog"\x3e\x3c/i\x3e\u4e2a\u4eba\u8bbe\u7f6e\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"router j_profile" href\x3d"/profile/\x3c%\x3duserId%\x3e"\x3e\x3ca class\x3d"link-item"\x3e\u4e2a\u4eba\u8d44\u6599\x3c/a\x3e\x3c/li\x3e\x3c%if(isSelf){%\x3e\x3cli class\x3d"router j_avatar" href\x3d"/profile/\x3c%\x3duserId%\x3e/avatar"\x3e\x3ca class\x3d"link-item"\x3e\u5934\u50cf\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"pwd-toggle link-item"\x3e\u4fee\u6539\u5bc6\u7801\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_serviceNumber" href\x3d"/profile/\x3c%\x3duserId%\x3e/serviceNumber" \x3e\x3ca class\x3d"link-item"\x3e\u6d88\u606f\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_custmenu" href\x3d"/profile/\x3c%\x3duserId%\x3e/custmenu"\x3e\x3ca class\x3d"link-item"\x3e\u5e94\u7528\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_protalsetting" href\x3d"/profile/\x3c%\x3duserId%\x3e/protalsetting"\x3e\x3ca class\x3d"link-item"\x3e\u9996\u9875\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_applytenants" href\x3d"/profile/\x3c%\x3duserId%\x3e/applytenants"\x3e\x3ca class\x3d"link-item"\x3e\u7533\u8bf7\u52a0\u5165\u56e2\u961f\u5217\u8868\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/aside\x3e\x3cdiv class\x3d"main main-narrow j_main"\x3e\x3c% if(type \x3d\x3d "profile"){%\x3e\x3cdiv class\x3d"j_con"\x3e\x3c/div\x3e\x3c% } else{ %\x3e\x3cdiv class\x3d"j_con"\x3e\x3c/div\x3e\x3c% }%\x3e\x3c/div\x3e\x3c/div\x3e',
"system.page":'\x3cdiv id\x3d"systemContainer"\x3e\x3caside class\x3d"aside"\x3e\x3cdiv class\x3d"scrollwrapper aside-nav-scroll"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon graph-16-thin-cog1"\x3e\x3c/i\x3e\u7cfb\u7edf\u8bbe\u7f6e\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"j_info"\x3e\x3ca class\x3d"link-item router" href\x3d"/info"\x3e\u7cfb\u7edf\u4fe1\u606f\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_wechat"\x3e\x3ca class\x3d"link-item router" href\x3d"/info/wechat"\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_wechatservice"\x3e\x3ca class\x3d"link-item router" href\x3d"/info/wechatservice"\x3e\u5fae\u4fe1\u670d\u52a1\u53f7\x3c/a\x3e\x3c/li\x3e\x3c%if(isAdmin){%\x3e\x3cli class\x3d"j_systemremind"\x3e\x3ca class\x3d"link-item router" href\x3d"/info/systemremind"\x3e\u7cfb\u7edf\u63d0\u9192\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_integration hide"\x3e\x3ca class\x3d"link-item router hide" href\x3d"/info/integration"\x3e\u7b2c\u4e09\u65b9\u96c6\u6210\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/aside\x3e\x3cdiv class\x3d"main j_main j_con"\x3e\x3c/div\x3e\x3c/div\x3e',
"system.systemremind":'\x3cdiv id\x3d"systemremind"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-remind"\x3e\x3c/i\x3e\u7cfb\u7edf\u63d0\u9192\u8bbe\u7f6e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"layout-hastips message-set-view"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"swicth-set-list card mb-20"\x3e\x3cdiv class\x3d"list-title bold"\x3e\u62a5\u544a\u63d0\u9192\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr weekreport_remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u5468\u62a5\u544a\u63d0\u9192\x3c/span\x3e\x3c/div\x3e\x3cspan\x3e\u63d0\u9192\u65f6\u95f4\uff1a\x3c/span\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"7"\x3e \u5468\u4e00\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"6"\x3e \u5468\u4e8c\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"5"\x3e \u5468\u4e09\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"4"\x3e \u5468\u56db\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"3"\x3e \u5468\u4e94\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"2"\x3e \u5468\u516d\x3c/label\x3e\x3clabel class\x3d"radio-inline"\x3e\x3cinput type\x3d"radio" name\x3d"weekreport_day" class\x3d"weekreport_day" value\x3d"1"\x3e \u5468\u65e5\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr monthreport_remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u6708\u5ea6\u62a5\u544a\u63d0\u9192\x3c/span\x3e\x3c/div\x3e\x3cspan\x3e\u63d0\u9192\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan\x3e\u5012\u6570\u7b2c\x3c/span\x3e\x3cinput class\x3d"earlytime monthreport form-control"/\x3e\x3cspan\x3e\u5929 \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr seasonreport_remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u5b63\u5ea6\u62a5\u544a\u63d0\u9192\x3c/span\x3e\x3c/div\x3e\x3cspan\x3e\u63d0\u9192\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan\x3e\u5012\u6570\u7b2c\x3c/span\x3e\x3cinput class\x3d"earlytime seasonreport form-control"/\x3e\x3cspan\x3e\u5929 \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr halfYearreport_remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u5e74\u4e2d\u62a5\u544a\u63d0\u9192\x3c/span\x3e\x3c/div\x3e\x3cspan\x3e\u63d0\u9192\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan\x3e\u5012\u6570\u7b2c\x3c/span\x3e\x3cinput class\x3d"earlytime halfYearreport form-control"/\x3e\x3cspan\x3e\u5929 \x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-item"\x3e\x3cdiv class\x3d"e-range fr yearreport_remind"\x3e\x3c/div\x3e\x3cdiv class\x3d"set-list-col1"\x3e\x3cspan\x3e\u662f\u5426\u5f00\u542f\u5e74\u5ea6\u62a5\u544a\u63d0\u9192\x3c/span\x3e\x3c/div\x3e\x3cspan\x3e\u63d0\u9192\u65f6\u95f4\uff1a\x3c/span\x3e\x3cspan\x3e\u5012\u6570\u7b2c\x3c/span\x3e\x3cinput class\x3d"earlytime yearreport form-control"/\x3e\x3cspan\x3e\u5929 \x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tray-cell tray-tips"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u5f00\u542f\u586b\u5199\u62a5\u544a\u7684\u63d0\u9192\uff1b\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7c7b\u578b\u62a5\u544a\u7684\u63d0\u9192\u65f6\u95f4 \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"concerns.page":'\x3cdiv id\x3d"concernsContainer" class\x3d"module-view"\x3e\x3caside class\x3d"aside"\x3e\x3cul class\x3d"menu-group aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon \x3c%\x3dicon%\x3e"\x3e\x3c/i\x3e\x3c%\x3dtitle%\x3e\x3c/div\x3e\x3cul id\x3d"search-group" class\x3d"menu-group-sub sub-nav"\x3e\x3cli class\x3d"router j_all" href\x3d"/feed/\x3c%\x3dtype%\x3e/all" data-module\x3d"all"\x3e\x3ca class\x3d"link-item"\x3e\u5168\u90e8\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_task" href\x3d"/feed/\x3c%\x3dtype%\x3e/task" data-module\x3d"task"\x3e\x3ca class\x3d"link-item"\x3e\u4efb\u52a1\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_document" href\x3d"/feed/\x3c%\x3dtype%\x3e/document" data-module\x3d"document"\x3e\x3ca class\x3d"link-item"\x3e\u6587\u6863\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_customer" href\x3d"/feed/\x3c%\x3dtype%\x3e/customer" data-module\x3d"customer"\x3e\x3ca class\x3d"link-item"\x3e\u5ba2\u6237\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_saleChance" href\x3d"/feed/\x3c%\x3dtype%\x3e/saleChance" data-module\x3d"saleChance"\x3e\x3ca class\x3d"link-item"\x3e\u5546\u673a\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_production" href\x3d"/feed/\x3c%\x3dtype%\x3e/production" data-module\x3d"production"\x3e\x3ca class\x3d"link-item"\x3e\u4ea7\u54c1\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_workflow" href\x3d"/feed/\x3c%\x3dtype%\x3e/workflow" data-module\x3d"workflow"\x3e\x3ca class\x3d"link-item"\x3e\u5ba1\u6279\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_mainline" href\x3d"/feed/\x3c%\x3dtype%\x3e/mainline" data-module\x3d"mainline"\x3e\x3ca class\x3d"link-item"\x3e\u9879\u76ee\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_formdatareport" href\x3d"/feed/\x3c%\x3dtype%\x3e/formdatareport" data-module\x3d"formdatareport"\x3e\x3ca class\x3d"link-item"\x3e\u6570\u636e\u4e0a\u62a5\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/aside\x3e\x3cdiv class\x3d"main"\x3e\x3cdiv class\x3d"main-hd"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn" style\x3d"margin-left:6px;"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph \x3c%\x3dlistIcon%\x3e"\x3e\x3c/i\x3e\x3c%\x3dtitle%\x3e\x3c/div\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"j_search" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"main-hd main-hd-fixed j_batchEl hide"\x3e\x3cul class\x3d"toolkit-list"\x3e\x3cli class\x3d"toolkit-item toolkit-item-sn" style\x3d"margin-left:6px;"\x3e\x3ci class\x3d"icon-checkbox-unchecked j_check-all"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"search-watchs btn btn-sm"\x3e\u6279\u91cf\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"search-watchs-cancle btn btn-sm"\x3e\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3ca class\x3d"search-share btn btn-sm" data-entity\x3d"employee" data-multi\x3d"true"\x3e\u6279\u91cf\u5171\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput id\x3d"j_search" class\x3d"form-control" type\x3d"text" placeholder\x3d"\u641c\u7d22"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"j_messlistScr mCus-mh100 scrollwrapper"\x3e\x3cdiv class\x3d"layout-hastips"\x3e\x3cdiv class\x3d"table-tray"\x3e\x3cdiv class\x3d"tray-cell"\x3e\x3cdiv class\x3d"j_center"\x3e\x3cdiv id\x3d"resultlist-loading" class\x3d"loading-super m-20"\x3e\x3cspan\x3e\u6570\u636e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"nodata-holder mt-50 j_no-result hide"\x3e\x3cdiv\x3e\x3c%if(type \x3d\x3d "watched"){%\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65e0\u5173\u6ce8\u4e8b\u9879 !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u8981\u505a\u7684\u4e8b\u60c5\u592a\u591a\u5566\uff0c\u53cd\u800c\u91cd\u8981\u7684\u4e8b\u60c5\u88ab\u6df9\u6ca1\u4e86\uff0c\u600e\u4e48\u529e\uff1f\u901a\u8fc7\u5173\u6ce8\u4e8b\u9879\uff0c\u8ba9\u4f60\u81ea\u7531 \x3cbr\x3e \u638c\u63e1\uff0c\u7b2c\u4e00\u65f6\u95f4\u63a8\u8fdb\u91cd\u8981\u4e8b\u60c5 \uff01\x3c/p\x3e\x3cp class\x3d"large"\x3e\u5982\u4f55\u5173\u6ce8\u4e8b\u9879 \uff1f \x3cbr\x3e \u5728\u4e8b\u9879\u8be6\u60c5\u4e2d\u5c31\u53ef\u4ee5\u5173\u6ce8\u4e8b\u9879\u54e6 \uff01\x3c/p\x3e\x3c%}%\x3e\x3c%if(type \x3d\x3d "unfinish"){%\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e\x3c%if(module \x3d\x3d "all"){%\x3e\x3cp class\x3d"large"\x3e\u6682\u65e0\u672a\u5b8c\u6210\u4e8b\u9879 !\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"flowform" data-id\x3d"new" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"mainline" data-id\x3d"new" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c%}%\x3e\x3c%if(module \x3d\x3d "task"){%\x3e\x3ch4\x3e\u6682\u65e0\u672a\u5b8c\u6210\u7684\u4efb\u52a1 !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u53ef\u968f\u65f6\u53cd\u9988\u5de5\u4f5c\u4efb\u52a1\u548c\u6709\u6548\u8ddf\u8e2a\uff0c\u4e5f\u53ef\u4ee5\u968f\u65f6\u4e3a\u5176\u4ed6\u540c\u4e8b\u5206\u6d3e\u4efb\u52a1\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"task" data-id\x3d"today" id\x3d"newTask"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/div\x3e\x3c%}%\x3e\x3c%if(module \x3d\x3d "workflow"){%\x3e\x3ch4\x3e\u6682\u65e0\u672a\u5b8c\u6210\u7684\u5ba1\u6279 !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u5c06\u516c\u53f8\u65e5\u5e38\u884c\u653f\u7ba1\u7406\u3001\u4e1a\u52a1\u5ba1\u6279\u6d41\u7a0b\uff0c\u5168\u90e8\u7535\u5b50\u5316\u3001\u5b9e\u73b0\u65e0\u7eb8\u5316\uff0c\u901a\u8fc7\u79fb\u52a8\u5ba1\u6279\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5185\u90e8\u6548\u7387\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"flowform" data-id\x3d"new" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/div\x3e\x3c%}%\x3e\x3c%if(module \x3d\x3d "mainline"){%\x3e\x3ch4\x3e\u6682\u65e0\u672a\u5b8c\u6210\u7684\u9879\u76ee !\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u6253\u7834\u533a\u57df\u5730\u7406\u4f4d\u7f6e\u3001\u90e8\u5206\u7684\u804c\u80fd\u9650\u5236\uff0c\u53ea\u8981\u662f\u6709\u4e2a\u5171\u540c\u7684\u9879\u76ee\uff0c\x3cbr/\x3e\u5c31\u53ef\u4ee5\u5373\u65f6\u7684\u5efa\u7acb\u57fa\u4e8e\u5171\u540c\u9879\u76ee\u7684\u9879\u76ee\u534f\u4f5c\uff0c\u6309\u7167\u9879\u76ee\u8ba1\u5212\u5feb\u901f\u63a8\u8fdb\u9879\u76ee\u7684\u6267\u884c\uff0c\u968f\u65f6\u968f\u5730\u53cd\u9988\u9879\u76ee\u8fdb\u5c55\u60c5\u51b5\uff01\x3c/p\x3e\x3cdiv class\x3d"btn-div"\x3e\x3ca class\x3d"btn btn-success btn-sm j_entityslider-toggle" data-module\x3d"mainline" data-id\x3d"new" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c%}%\x3e\x3c%if(module \x3d\x3d "formdatareport"){%\x3e\x3cp class\x3d"large"\x3e\u6682\u65e0\u672a\u5b8c\u6210\u7684\u6570\u636e\u4e0a\u62a5 !\x3c/p\x3e\x3c%}%\x3e\x3c%}%\x3e\x3c/div\x3e\x3c/div\x3e\x3cul id\x3d"search-result-list" class\x3d"e-list hide"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"hide common-more"\x3e\u52a0\u8f7d\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"concernsHelp" class\x3d"tray-cell tray-tips"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"result-clone" class\x3d"hide"\x3e\x3cli\x3e\x3cspan class\x3d"sn"\x3e\x3c/span\x3e\x3cspan class\x3d"checkbox"\x3e\x3ci class\x3d"icon-checkbox-unchecked"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title title j_entityslider-toggle"\x3e\x3cdiv class\x3d"text"\x3eeteams2015\u5e74\u4e03\u6708\u5f00\u53d1\u8ba1\u5212\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count" style\x3d"display:none;"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3c/span\x3e\x3cspan class\x3d"finish hide"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\u6807\u8bb0\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share selector-toggle"  data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e\x3c/div\x3e',
"concerns.help":'\x3cdiv id\x3d"concernsPage-tips" class\x3d"hide"\x3e\x3cdiv class\x3d"j_unfinish"\x3e\x3cdiv class\x3d"j_tip_all j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5168\u90e8\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6570\u636e\u4e0a\u62a5\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879 \x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u60a8\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_task j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u4efb\u52a1\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u4efb\u52a1\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_document j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u6587\u6863\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u6587\u6863\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_customer j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5ba2\u6237\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u5ba2\u6237\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_workflow j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5ba1\u6279\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u5ba1\u6279\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_mainline j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u9879\u76ee\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u9879\u76ee\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_formdatareport j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u6570\u636e\u4e0a\u62a5\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u6570\u636e\u4e0a\u62a5\u6a21\u5757\u4e2d\u7684\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u6dfb\u52a0\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_watched"\x3e\x3cdiv class\x3d"j_tip_all j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5168\u90e8\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u53ca\u5ba2\u6237\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879 \x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u60a8\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_task j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u4efb\u52a1\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u4efb\u52a1\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_document j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u6587\u6863\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u6587\u6863\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_customer j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5ba2\u6237\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u5ba2\u6237\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_saleChance j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5546\u673a\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u5546\u673a\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_production j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u4ea7\u54c1\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u4ea7\u54c1\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_workflow j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5ba1\u6279\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u5ba1\u6279\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_tip_mainline j_tip hide"\x3e\x3cdiv class\x3d"panel panel-alpha"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body fs-12"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u9879\u76ee\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a  \x3c/p\x3e\x3cp class\x3d"e-row"\x3e1. \u9879\u76ee\u6a21\u5757\u4e2d\u7684\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2. \u4f60\u53ef\u4ee5\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6216\u5171\u4eab\uff0c\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u4e8b\u9879\u6216\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u5168\u9009\u201d \x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"feed.page":'\x3cdiv id\x3d"feedsContainer" class\x3d"module-view module-message-view"\x3e\x3caside class\x3d"aside"\x3e\x3cul class\x3d"aside-nav"\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-bell"\x3e\x3c/i\x3e\u901a\u7528\u6d88\u606f\x3c/div\x3e\x3cul class\x3d"j_menu-group-sub sub-nav"\x3e\x3cli class\x3d"j_wechat"\x3e\x3ca class\x3d"router link-item j_wechat" href\x3d"/messages/wechat"\x3e\u804a\u5929\u6d88\u606f\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_remind" mcType\x3d"6"\x3e\x3ca class\x3d"router link-item j_remind" href\x3d"/messages/remind"\x3e\u63d0\u9192\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_follow" mcType\x3d"1"\x3e\x3ca class\x3d"router link-item j_follow" href\x3d"/messages/follow" \x3e\u5173\u6ce8\u7533\u8bf7\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_shareJoin" mcType\x3d"13"\x3e\x3ca class\x3d"router link-item j_shareJoin" href\x3d"/messages/shareJoin"\x3e\u5171\u4eab\u7533\u8bf7\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c%if(isAdmin){%\x3e\x3cli class\x3d"j_applyJoin" mcType\x3d"2"\x3e\x3ca class\x3d"router link-item j_applyJoin" href\x3d"/messages/applyJoin"\x3e\u52a0\u5165\u7533\u8bf7\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c%if(hasOpenSeaAdmin){%\x3e\x3cli class\x3d"j_applyReceive" mcType\x3d"14"\x3e\x3ca class\x3d"router link-item j_applyReceive" href\x3d"/messages/applyReceive"\x3e\u9886\u53d6\u7533\u8bf7\x3cspan class\x3d"fr badge count"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"link-item"\x3e\x3ci class\x3d"item-icon icon-bell"\x3e\x3c/i\x3e\u4e8b\u9879\u6d88\u606f\x3c/div\x3e\x3cul class\x3d"sub-nav"\x3e\x3cli class\x3d"j_newitem" mcType\x3d"3"\x3e\x3ca class\x3d"router link-item j_newitem" href\x3d"/feed/newitem/all"\x3e\u672a\u8bfb\u4e8b\u9879\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_newcomment" mcType\x3d"5"\x3e\x3ca class\x3d"router link-item j_newcomment" href\x3d"/feed/newcomment/all"\x3e\u4e8b\u9879\u7684\u65b0\u53cd\u9988\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_newfinish" mcType\x3d"4"\x3e\x3ca class\x3d"router link-item j_newfinish" href\x3d"/feed/newfinish/all"\x3e\u65b0\u5b8c\u6210\u4e8b\u9879\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_atme" mcType\x3d"12"\x3e\x3ca class\x3d"router link-item j_atme" href\x3d"/feed/atme/all"\x3e@\u6211\u7684\u65b0\u53cd\u9988\x3cspan class\x3d"fr badge"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/aside\x3e\x3cdiv class\x3d"main j_main"\x3e\x3c/div\x3e\x3c/div\x3e',
"feed.messageshelp":'\x3cdiv id\x3d"messagesHelp"\x3e\x3cdiv id\x3d"remind_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u63d0\u9192\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u65b0\u7528\u6237\u52a0\u5165\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u65e5\u7a0b\u7b49\u4e8b\u9879\u50ac\u529e\u53ca\u63d0\u9192\u4fe1\u606f\x3c/p\x3e\x3cp class\x3d"e-row"\x3e3\u3001\u5ba1\u6279\u7ed3\u675f\u63d0\u9192\u6d88\u606f\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"applyJoin_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u52a0\u5165\u7533\u8bf7\u6d88\u606f\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u65b0\u7528\u6237\u53d1\u9001\u7684\u7533\u8bf7\u52a0\u5165\u6d88\u606f\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u7528\u6237\u52a0\u5165\u7533\u8bf7\u5904\u7406\u7ed3\u679c\x3c/p\x3e\x3cp class\x3d"e-row"\x3e3\u3001\u7ba1\u7406\u5458\u53ef\u4ee5\u6279\u51c6\u6216\u8005\u62d2\u7edd\u7533\u8bf7\u8005\u7684\u52a0\u5165\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"shareJoin_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5171\u4eab\u7533\u8bf7 \u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u5176\u4ed6\u540c\u4e8b\u5bf9\u4efb\u52a1\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u5ba1\u6279\u3001\u9879\u76ee\u3001\u6570\u636e\u4e0a\u62a5\u7b49\u4e8b\u9879\u7684\u67e5\u770b\u6743\u9650\u7684\u7533\u8bf7\uff0c\u60a8\u53ef\u4ee5\u540c\u610f\u7533\u8bf7\uff0c\u7533\u8bf7\u8005\u5c31\u4f1a\u6709\u67e5\u770b\u8be5\u4e8b\u9879\u7684\u6743\u9650\u3001\u4f46\u662f\u4e0d\u4f1a\u83b7\u53d6\u7f16\u8f91\u7684\u6743\u9650\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u4e00\u65e6\u7533\u8bf7\u8005\u83b7\u53d6\u4e86\u5171\u4eab\u6743\u9650\u3001\u4ed6\u8fd8\u53ef\u4ee5\u628a\u8be5\u4e8b\u9879\u5171\u4eab\u7ed9\u5176\u4ed6\u4eba\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"applyReceive_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u9886\u53d6\u7533\u8bf7 \u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u5176\u4ed6\u540c\u4e8b\u5bf9\u516c\u6d77\u5ba2\u6237\u7684\u9886\u53d6\u7533\u8bf7\uff0c\u60a8\u53ef\u4ee5\u540c\u610f\u7533\u8bf7\uff0c\u7533\u8bf7\u8005\u5c31\u4f1a\u6210\u4e3a\u516c\u6d77\u5ba2\u6237\u7684\u5ba2\u6237\u7ecf\u7406\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"follow_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u5173\u6ce8\u7533\u8bf7\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u67e5\u770b\u5176\u4ed6\u540c\u4e8b\u5bf9\u60a8\u53d1\u51fa\u7684\u5173\u6ce8\u7533\u8bf7\u8bf7\u6c42\uff0c\u4ee5\u53ca\u5173\u6ce8\u8bf7\u6c42\u5904\u7406\u7ed3\u679c\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u60a8\u53ef\u4ee5\u540c\u610f\u6216\u8005\u62d2\u7edd\u4ed6\u7684\u5173\u6ce8\u7533\u8bf7\uff0c\u5f53\u60a8\u540c\u610f\u4e86\u8be5\u8bf7\u6c42\u540e\u3001\u7533\u8bf7\u8005\u5c31\u53ef\u4ee5\u67e5\u770b\u5230\u60a8\u7684\u5de5\u4f5c\u65e5\u62a5\uff0c\u6765\u4e86\u89e3\u60a8\u7684\u5de5\u4f5c\u60c5\u51b5\uff0c\u4f46\u662f\u5173\u6ce8\u8005\u4e0d\u4f1a\u67e5\u770b\u5230\u60a8\u7684\u4efb\u52a1\u3001\u5ba2\u6237\u3001\u5ba1\u6279\u3001\u9879\u76ee\u3001\u62a5\u544a\u3001\u6587\u6863\u3001\u6570\u636e\u4e0a\u62a5\u7b49\u4fe1\u606f\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"newitem_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u672a\u8bfb\u4e8b\u9879\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u7684\u672a\u8bfb\u4e8b\u9879\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u5df2\u67e5\u770b\u7684\u201c\u672a\u8bfb\u4e8b\u9879\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"newcomment_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u53ca\u8bc4\u8bba\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u5df2\u67e5\u770b\u7684\u201c\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"newfinish_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728\u65b0\u5b8c\u6210\u4e8b\u9879\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u65b0\u5b8c\u6210\u7684\u4e8b\u9879\u6d88\u606f\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u60a8\u67e5\u770b\u8fc7\u7684\u201c\u65b0\u5b8c\u6210\u4e8b\u9879\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"atme_help" class\x3d"p-10"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u5c0f\u63d0\u793a\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\u5728@\u6211\u7684\u65b0\u53cd\u9988\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/p\x3e\x3cp class\x3d"e-row"\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u4e8b\u9879\u7684\u53cd\u9988\u53ca\u8bc4\u8bba\u4e2d\u6709@\u6211\u7684 (\u63d0\u5230\u6211\u7684)\u6d88\u606f\x3c/p\x3e\x3cp class\x3d"e-row"\x3e2\u3001\u60a8\u67e5\u770b\u8fc7\u7684\u201c@\u6211\u7684\u65b0\u53cd\u9988\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"panel-heading"\x3e\x3cdiv class\x3d"panel-title"\x3e\u7cfb\u7edf\u5e2e\u52a9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-body"\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/228"\x3e1\u3001eteams\u6743\u9650\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/229"\x3e2\u3001\u5982\u4f55\u8bbe\u7f6e\u6210\u5458\u7684\u4e0a\u7ea7\u548c\u90e8\u95e8\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/474"\x3e3\u3001\u54ea\u4e9b\u6d88\u606f\u4f1a\u6709\u63a8\u9001\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/243"\x3e4\u3001\u5173\u6ce8\u4e0b\u5c5e\u4e0e\u5173\u6ce8\u540c\u4e8b\u6709\u4ec0\u4e48\u533a\u522b\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"e-row"\x3e\x3ca class\x3d"c-grey" target\x3d"_blank" href\x3d"http://www.eteams.cn/help/242"\x3e5\u3001\u4ec0\u4e48\u662f\u4e2a\u4eba\u4e8b\u9879\u63d0\u793a\u4ee5\u53ca\u5305\u62ec\u54ea\u4e9b\u677f\u5757\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"component.top":'\x3cheader id\x3d"navigation" class\x3d"navigation"\x3e\x3cdiv id\x3d"user-panel" class\x3d"user-panel dropdown dropdown-menu-toggle fl"\x3e\x3cdiv class\x3d"user-avatar fl router" href\x3d"/"\x3e\x3cimg class\x3d"j_user-currentAvatar" src\x3d"\x3c%\x3dTEAMS.service.base%\x3eimages/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d\'user-menu top-user-menu\'\x3e\x3ca class\x3d"dropdown-toggle ds-ib-w router j_user_menu_portal" href\x3d"/portal" data-url\x3d"/portal"\x3e\x3cp class\x3d\'user-person \x3c%\x3dsiblingsTenants.length \x3c\x3d 1 ? "single" : ""%\x3e\'\x3e\x3cspan class\x3d"user-name ellipsis"\x3e\x3c%\x3dcurrentUser.username%\x3e\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3cspan class\x3d"user-nameof hide"\x3e\u7684\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d\'user-team ellipsis \x3c%\x3dsiblingsTenants.length \x3c\x3d 1 ? "hide" : ""%\x3e\' title\x3d"\x3c%\x3dcurrentTenant.tenantName%\x3e"\x3e\x3c%\x3dcurrentTenant.tenantName%\x3e\x3c/p\x3e\x3c/a\x3e\x3cdiv id\x3d"j_dropUser" class\x3d"dropdown-user dropdown-div dropdown-shadow clearfix"\x3e\x3cdiv class\x3d\'clearfix teampanel \x3c%\x3dsiblingsTenants.length \x3c\x3d 1 ? "hide" : ""%\x3e\'\x3e\x3cdiv class\x3d\'teams-swich fl j_teams-swich \x3c%\x3dsiblingsTenants.length \x3c\x3d 1 ? "hide" : ""%\x3e\'\x3e\x3cspan class\x3d"txt fl"\x3e\u5207\u6362\u56e2\u961f\uff1a\x3c/span\x3e\x3cdiv class\x3d"e-selectui dropdown fl dropdown-menu-toggle dropdown-gettext"\x3e\x3ca class\x3d"selectui-result dropdown-toggle ellipsis"\x3e\x3c%\x3dcurrentTenant.tenantName%\x3e\x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown eui-scroll"\x3e\x3c%_.each(siblingsTenants, function(tenant){%\x3e\x3cli class\x3d\'\x3c%\x3dtenant.isCurrent ? "active" : "" %\x3e\' data-employee-id\x3d"\x3c%\x3dtenant.employeeId%\x3e"\x3e\x3ca\x3e\x3c%\x3dtenant.tenantName%\x3e\x3c/a\x3e\x3c/li\x3e\x3c%});%\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"fr btn btn-sm a-team btn-primary  j_joinOrCreate_dropdown"\x3e\u521b\u5efa\u6216\u52a0\u5165\u56e2\u961f\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cdiv class\x3d"mypanel fl"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg class\x3d"j_user-avatar" src\x3d"\x3c%\x3dTEAMS.service.base%\x3eimages/avatar.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"myoption"\x3e\x3ca class\x3d"btn btn-sm btn-block on j_to-myspace hide router" href\x3d"/"\x3e\u8fd4\u56de\u6211\u7684\u5de5\u4f5c\u7a7a\u95f4\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-block j_clickhide router" href\x3d"/feed/unfinish/all"\x3e\u672a\u5b8c\u6210\u4e8b\u9879\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-block j_clickhide router" href\x3d"/feed/watched/all"\x3e\u5173\u6ce8\u4e8b\u9879\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-block j_clickhide router" href\x3d"/tag/privacy/list"\x3e\u6807\u7b7e\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-block j_clickhide router" href\x3d"/profile"\x3e\u4e2a\u4eba\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"otherspanel fl"\x3e\x3cdiv class\x3d"hint"\x3e\u5728\u6b64\u60a8\u53ef\u4ee5\u5207\u6362\u5230\u5173\u6ce8\u7684\u4eba\u6216\u4e0b\u5c5e\u7684\u5de5\u4f5c\u7a7a\u95f4\x3cdiv class\x3d"user-space-search"\x3e\x3cinput id\x3d"user-search" class\x3d"form-control placeholder-sm" type\x3d"text" placeholder\x3d"\u4eba\u5458\u641c\u7d22"\x3e\x3ca id\x3d"user-search-icon" class\x3d"search-btn"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"user-tab js_userTab clearfix"\x3e\x3cli class\x3d"router  j_user_follow j_clickhide" href\x3d"/users/myfollow" data-items\x3d"user_follow"\x3e\x3ca\x3e\u6211\u5173\u6ce8\u7684\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_user_mysub j_clickhide j_top_mysubordinates" href\x3d"/users/myfollow/\x3c%\x3dcurrentUser.id%\x3e/subordinate" data-items\x3d"user_mysub"\x3e\x3ca\x3e\u6211\u7684\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"router j_user_org j_clickhide" href\x3d"/organization" data-items\x3d"user_org"\x3e\x3ca\x3e\u56e2\u961f\u6210\u5458\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"user-list-container j_userlistScroll clearfix"\x3e\x3cul id\x3d"user_follow" class\x3d"user-list clearfix"\x3e\x3c/ul\x3e\x3cul id\x3d"user_mysub" class\x3d"user-list clearfix hide"\x3e\x3c/ul\x3e\x3cul id\x3d"user_org" class\x3d"user-list clearfix hide"\x3e\x3c/ul\x3e\x3cdiv id\x3d"user_followbtn" class\x3d"user-follow-btns"\x3e\x3ca class\x3d"btn btn-sm j_clickhide j_addFollow w-80 mr-10"\x3e\u52a0\u5173\u6ce8\x3c/a\x3e\x3ca class\x3d"btn btn-sm j_clickhide w-80 router" href\x3d"/users/myfollow"\x3e\u66f4\u591a\u5173\u6ce8\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"user-list-container clearfix j_user-search-container hide"\x3e\x3cul id\x3d"search-result" class\x3d"user-list clearfix"\x3e\x3c/ul\x3e\x3cdiv class\x3d"j_noSearchResult hide"\x3e\x3cp align\x3d"center"\x3e\u65e0\u641c\u7d22\u7ed3\u679c!\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"useroption clearfix"\x3e\x3ca class\x3d"btn btn-sm btn-primary j_clickhide router" href\x3d"/organization"\x3e\u56e2\u961f\u6210\u5458\u8bbe\u7f6e\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-danger invite-toggle"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"base-nav j_basenav" id\x3d"j_navwrap"\x3e\x3cul class\x3d"nav-ul j_nav_ul"\x3e\x3cli id\x3d"j_message" class\x3d"nav-homeli j_homeli dropdown dropdown-menu-toggle j_messageCount"\x3e\x3ca class\x3d"router" href\x3d"/portal" data-url\x3d"/portal"\x3e\x3ci class\x3d"graph graph-home"\x3e\x3c/i\x3e\x3cem class\x3d"message-count animated bounce j_point"\x3e\x3c/em\x3e\x3c/a\x3e\x3cul id\x3d"j_dropMessage" class\x3d"dropdown-menu dropdown-menu-left"\x3e\x3cli\x3e\x3ca class\x3d"router j_unreadblog" href\x3d"/blog/\x3c%\x3dcurrentUser.id%\x3e/unread"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph1"\x3e\x3c/em\x3e\u672a\u8bfb\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_newitem" href\x3d"/portal/newitem"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph2"\x3e\x3c/em\x3e\u672a\u8bfb\u4e8b\u9879\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_newcomment" href\x3d"/portal/newcomment"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph3"\x3e\x3c/em\x3e\u4e8b\u9879\u7684\u65b0\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_newfinish" href\x3d"/portal/newfinish"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph4"\x3e\x3c/em\x3e\u65b0\u5b8c\u6210\u4e8b\u9879\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_atme" href\x3d"/portal/atme"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph5"\x3e\x3c/em\x3e@\u6211\u7684\u65b0\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_wechat" href\x3d"/messages/wechat"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph6"\x3e\x3c/em\x3e\u804a\u5929\u6d88\u606f\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_remind" href\x3d"/portal/remind"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph7"\x3e\x3c/em\x3e\u63d0\u9192\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router j_follow" href\x3d"/portal/follow"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph8"\x3e\x3c/em\x3e\u5173\u6ce8\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c%if(isAdmin){%\x3e\x3cli\x3e\x3ca class\x3d"router j_applyJoin" href\x3d"/portal/applyJoin"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph9"\x3e\x3c/em\x3e\u52a0\u5165\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3cli\x3e\x3ca class\x3d"router j_shareJoin" href\x3d"/portal/shareJoin"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph10"\x3e\x3c/em\x3e\u5171\u4eab\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c%if(hasOpenSeaAdmin){%\x3e\x3cli\x3e\x3ca class\x3d"router j_applyReceive" href\x3d"/portal/applyReceive"\x3e\x3cspan class\x3d"fr badge ml-10"\x3e\x3c/span\x3e\x3cem class\x3d"graph graph2"\x3e\x3c/em\x3e\u9886\u53d6\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3c%}%\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"nav-blogli j_blog_NoAuthority hide"\x3e\x3ca class\x3d"router" href\x3d"/blog" data-url\x3d"/blog"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u62a5\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cdiv class\x3d"nav-autolis j_baseautolis"\x3e\x3c% for(var i\x3d0;i\x3ccustshowmenus.length;i++) {%\x3e\x3c%\x3d custshowmenus[i]%\x3e\x3c% } %\x3e\x3c/div\x3e\x3cli class\x3d"j_activeli"\x3e\x3c/li\x3e\x3cli id\x3d"more-menu" class\x3d"more-li dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\u66f4\u591a\u5e94\u7528\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"sub-cate dropdown-menu j_pageActive"\x3e\x3cdiv class\x3d"group"\x3e\x3cdl\x3e\x3cdt\x3e\u6c47\u62a5\x3c/dt\x3e\x3cdd\x3e\x3ca class\x3d"router j_modnav-blog" href\x3d"/blog" data-url\x3d"/blog"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u62a5\x3c/span\x3e\x3cspan\x3e\u5de5\u4f5c\u65e5\u62a5\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-workreport" href\x3d"/workreport" data-url\x3d"/workreport"\x3e\x3ci class\x3d"graph graph-report"\x3e\x3c/i\x3e\x3cspan\x3e\u62a5\u544a\x3c/span\x3e\x3cspan\x3e\u8ba1\u5212\u62a5\u544a\x3c/span\x3e\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl\x3e\x3cdt\x3eCRM\x3c/dt\x3e\x3cdd\x3e\x3ca class\x3d"router j_modnav-customers" href\x3d"/crms/customer" data-url\x3d"/crms/customer"\x3e\x3ci class\x3d"graph graph-crm"\x3e\x3c/i\x3e\x3cspan\x3e\u5ba2\u6237\x3c/span\x3e\x3cspan\x3e\u5ba2\u6237\u5e93\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-contacts" href\x3d"/crms/contact" data-url\x3d"/crms/contact"\x3e\x3ci class\x3d"graph graph-contact"\x3e\x3c/i\x3e\x3cspan\x3e\u8054\u7cfb\u4eba\x3c/span\x3e\x3cspan\x3e\u5ba2\u6237\u8054\u7cfb\u4eba\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-saleChances" href\x3d"/crms/saleChance" data-url\x3d"/crms/saleChance"\x3e\x3ci class\x3d"graph graph-salechance"\x3e\x3c/i\x3e\x3cspan\x3e\u5546\u673a\x3c/span\x3e\x3cspan\x3e\u5546\u673a\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-production" href\x3d"/crms/production" data-url\x3d"/crms/production"\x3e\x3ci class\x3d"graph graph-production"\x3e\x3c/i\x3e\x3cspan\x3e\u4ea7\u54c1\x3c/span\x3e\x3cspan\x3e\u4ea7\u54c1\u5e93\x3c/span\x3e\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv class\x3d"group"\x3e\x3cdl\x3e\x3cdt\x3e\u534f\u4f5c\x3c/dt\x3e\x3cdd\x3e\x3ca class\x3d"router j_modnav-mainline" href\x3d"/mainlines" data-url\x3d"/mainlines"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\x3cspan\x3e\u9879\u76ee\x3c/span\x3e\x3cspan\x3e\u76ee\u6807\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-task" href\x3d"/tasks" data-url\x3d"/tasks"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan\x3e\u4efb\u52a1\x3c/span\x3e\x3cspan\x3e\u4efb\u52a1\u534f\u4f5c\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-calendar" href\x3d"/calendar" data-url\x3d"/calendar"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u7a0b\x3c/span\x3e\x3cspan\x3e\u65e5\u7a0b\u5b89\u6392\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-document" href\x3d"/documents" data-url\x3d"/documents"\x3e\x3ci class\x3d"graph graph-doc"\x3e\x3c/i\x3e\x3cspan\x3e\u6587\u6863\x3c/span\x3e\x3cspan\x3e\u77e5\u8bc6\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdl\x3e\x3cdt\x3e\u5ba1\u6279\x3c/dt\x3e\x3cdd\x3e\x3ca class\x3d"router j_modnav-workflow" href\x3d"/workflows" data-url\x3d"/workflows"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\x3cspan\x3e\u5ba1\u6279\x3c/span\x3e\x3cspan\x3e\u5ba1\u6279\u6d41\u7a0b\x3c/span\x3e\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv class\x3d"group"\x3e\x3cdl\x3e\x3cdt\x3e\u5176\u4ed6\x3c/dt\x3e\x3cdd\x3e\x3ca class\x3d"router j_modnav-report" href\x3d"/report/taskstatistics" data-url\x3d"/report/taskstatistics"\x3e\x3ci class\x3d"graph graph-stat"\x3e\x3c/i\x3e\x3cspan\x3e\u7edf\u8ba1\x3c/span\x3e\x3cspan\x3e\u7edf\u8ba1\u62a5\u8868\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-wechat" href\x3d"/info/wechat" data-url\x3d"/info/wechat"\x3e\x3ci class\x3d"graph graph-enterprise"\x3e\x3c/i\x3e\x3cspan\x3e\u4f01\u4e1a\u53f7\x3c/span\x3e\x3cspan\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-wechatservice" href\x3d"/info/wechatservice" data-url\x3d"/info/wechatservice"\x3e\x3ci class\x3d"graph graph-wechatservice"\x3e\x3c/i\x3e\x3cspan\x3e\u670d\u52a1\u53f7\x3c/span\x3e\x3cspan\x3e\u5fae\u4fe1\u670d\u52a1\u53f7\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"router j_modnav-form" href\x3d"/forms" data-url\x3d"/forms"\x3e\x3ci class\x3d"graph graph-formstat"\x3e\x3c/i\x3e\x3cspan\x3e\u8868\u5355\x3c/span\x3e\x3cspan\x3e\u4e1a\u52a1\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv class\x3d"base-nav-opt"\x3e\x3ca id\x3d"top_menuset" data-id\x3d"new" data-module\x3d"custmenu" class\x3d"router entitybox-toggle"\x3e\x3ci class\x3d"icon-cog mr-10"\x3e\x3c/i\x3e\u8bbe\u7f6e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"quick-menu fr"\x3e\x3cul class\x3d"nav nav-pills"\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle quick-create-menu" id\x3d"j_quickBuild"\x3e\x3ca\x3e\x3ci class\x3d"graph graph-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right"\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-target\x3d"#blog-textarea" data-module\x3d"blog" class\x3d"entitybox-toggle"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\u5199\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"today" data-module\x3d"task" data-value\x3d"today" data-target\x3d"#task-title" class\x3d"entitybox-toggle" id\x3d"task-create-fast"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-target\x3d"#title" data-module\x3d"agenda" class\x3d"entitybox-toggle"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u5b89\u6392\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-module\x3d"document" data-value\x3d"new" class\x3d"" id\x3d"document-create-fast"\x3e\x3ci class\x3d"graph graph-doc"\x3e\x3c/i\x3e\u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-module\x3d"workflow" data-value\x3d"new" class\x3d"entitybox-toggle" id\x3d"workflow-create-fast"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-module\x3d"mainline" data-value\x3d"new" class\x3d"" id\x3d"mainline-create-fast"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-module\x3d"customer" data-value\x3d"new" data-target\x3d"#customer-name" class\x3d"entitybox-toggle" id\x3d"customer-create-fast"\x3e\x3ci class\x3d"graph graph-crm"\x3e\x3c/i\x3e\u65b0\u5efa\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"0" data-module\x3d"contact" data-value\x3d"new" class\x3d"entitybox-toggle" id\x3d"contact-create-fast"\x3e\x3ci class\x3d"graph graph-linkman"\x3e\x3c/i\x3e\u65b0\u5efa\u8054\u7cfb\u4eba\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca data-id\x3d"new" data-target\x3d"#title" data-module\x3d"record" class\x3d"" id\x3d"contactRecord-create-fast"\x3e\x3ci class\x3d"graph graph-record"\x3e\x3c/i\x3e\u5ba2\u6237\u8054\u7cfb\u8bb0\u5f55\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli\x3e\x3cdiv class\x3d"search-box"\x3e\x3cinput id\x3d"searchTop" type\x3d"text" class\x3d"placeholder-sm" placeholder\x3d"\u5168\u5c40\u641c\u7d22"\x3e\x3ca id\x3d"searchTopIcon" class\x3d"search-btn"\x3e\x3ci class\x3d"icon-search"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"popover-toggle"\x3e\x3ca\x3e\x3ci class\x3d"graph graph-qq"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"popover popover-bottom"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"popover-content"\x3e\x3cstrong class\x3d"fs-14"\x3e\u5b98\u65b9\u7fa4\x3c/strong\x3e\x3cp class\x3d"mv-5"\x3e196945930\x3c/p\x3e\x3ca target\x3d"_blank" href\x3d"http://jq.qq.com/?_wv\x3d1027\x26k\x3d24sGyfN" class\x3d"btn btn-sm btn-block btn-info"\x3e\u52a0\u5165\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle eteams-quick"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\x3ci class\x3d"graph graph-eteams"\x3e\x3c/i\x3e\x3ci\tclass\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"client-toggle"\x3e\u5ba2\u6237\u7aef\u4e0b\u8f7d\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"wechat-toggle"\x3e\x3ca\x3e\u5fae\u4fe1\u53f7\x3c/a\x3e\x3cdiv class\x3d"popover popover-left"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"popover-content"\x3e\x3cstrong class\x3d"fs-14"\x3e\u5fae\u4fe1\u53f7\x3c/strong\x3e\x3cp class\x3d"mb-5"\x3e\u626b\u63cf\u4e8c\u7ef4\u7801\u5173\u6ce8\u6211\u4eec\x3c/p\x3e\x3cimg src\x3d"images/eteams_wechat.png"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"invite-toggle" type\x3d"modal"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"inviteNewTeam-toggle" type\x3d"modal"\x3e\u63a8\u8350\u7ed9\u597d\u53cb\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"j_joinOrCreate"\x3e\u521b\u5efa\u6216\u52a0\u5165\u56e2\u961f\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/profile"\x3e\u4e2a\u4eba\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/organization"\x3e\u56e2\u961f\u6210\u5458\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/info"\x3e\u7cfb\u7edf\u8bbe\u7f6e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"http://www.eteams.cn/help" target\x3d"_blank" id\x3d"help"\x3e\u5e2e\u52a9\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"advise-toggle"\x3e\u610f\u89c1\u53cd\u9988\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"router" href\x3d"/versioninfo"\x3e\u7cfb\u7edf\u66f4\u65b0\u52a8\u6001\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"http://www.eteams.cn/product.html" target\x3d"_blank"\x3e\u4ea7\u54c1\u4ecb\u7ecd\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"logout"\x3e\u9000\u51fa\u7cfb\u7edf\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"alert alert-danger notice-overlayer hide" id\x3d"module_notice"\x3e\x3ca class\x3d"close"\x3e\u00d7\x3c/a\x3e\x3cstrong class\x3d"mr-5"\x3e\u63d0\u793a:\x3c/strong\x3e\x3cspan\x3e"\u60a8\u7684\u56e2\u961f\u4fe1\u606f\u8fd8\u672a\u5b8c\u5584,\u70b9\u51fb"\x3ca class\x3d"router" href\x3d"/info"\x3e\u8fdb\u5165\u5b8c\u5584\u4fe1\u606f\x3c/a\x3e"\u9875\u9762"\x3c/sapn\x3e\x3c/div\x3e\x3c/header\x3e\x3cdiv id\x3d"cloneDiv" class\x3d"hide"\x3e\x3cli class\x3d"user-item j_clickhide j_userItems"\x3e\x3ca class\x3d"fl router"\x3e\x3cimg class\x3d"avatar"\x3e\x3cem class\x3d"ellipsis"\x3e\x3c/em\x3e\x3c/a\x3e\x3c/li\x3e\x3ca title\x3d"\u5fae\u4fe1" class\x3d"j_userItemsWechat fr wechat-toggle icon-comments"\x3e\x3c/a\x3e\x3c/div\x3e',
"integration.integration":'\x3cdiv class\x3d"main-hd"\x3e\x3cdiv class\x3d"title"\x3e\x3ci class\x3d"graph graph-wechat"\x3e\x3c/i\x3e\x3cspan\x3e\u5fae\u4fe1\u4f01\u4e1a\u53f7\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"wechatAPP-access"\x3e\x3cdiv class\x3d"j_wechatAppScroll scrollwrapper" marginbottom\x3d"40"\x3e\x3cdiv class\x3d"wechatAPP-mod"\x3e\x3ch3 class\x3d"wechatAPP-mod-hd"\x3e\u6388\u6743\u6258\u7ba1\u5e94\u7528\x3cspan class\x3d"hint"\x3e\u60a8\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u7684\u5e94\u7528\u96c6\u6210\u5230eteams\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u60a8\u7684\u56e2\u961f\u6210\u5458\u76f4\u63a5\u4f7f\u7528\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684\u76f8\u5173\u529f\u80fd\x3c/span\x3e\x3c/h3\x3e\x3cul class\x3d"wechatAPP-mod-list"\x3e\x3cli class\x3d"j_task"\x3e\x3cdiv class\x3d"j_mod-thumb mod-thumb"\x3e\x3cimg src\x3d"/static/img/icon/wechat/mod_task.png"\x3e\x3cdiv class\x3d"status"\x3e\u5df2\u6dfb\u52a0\x3c/div\x3e\x3ca class\x3d"add" href\x3d"http://test3.goukuai.cn/autologin/eteam" target\x3d"_blank"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cp class\x3d"title"\x3e\u591f\u5feb\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"biaoge.formnew":'\x3cdiv id\x3d"build-newform" class\x3d"newform-modal modal fade form-horizontal entity-info"\x3e\x3cdiv class\x3d"modal-dialog eform-new-dialog"\x3e\x3cdiv class\x3d"modal-content"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\u00d7\x3c/button\x3e\x3ch5 class\x3d"modal-title"\x3e\u65b0\u5efa\u8868\u5355\x3c/h5\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body js_forminfo"\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u540d\u79f0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput name\x3d"form-name" id\x3d"form-name" class\x3d"form-control w-full" type\x3d"text" maxlength\x3d"50"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u63cf\u8ff0\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea id\x3d"form-describe" class\x3d"form-control w-full" maxlength\x3d"1000"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u7c7b\u522b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls js_formowner"\x3e\x3clabel class\x3d"radio-inline js_company_label"\x3e \x3cinput type\x3d"radio" value\x3d"company" name\x3d"ownership" id\x3d"company"\x3e\u56e2\u961f\u8868\u5355\x3c/label\x3e \x3clabel class\x3d"radio-inline js_personal_label"\x3e \x3cinput type\x3d"radio" value\x3d"personal" name\x3d"ownership" id\x3d"personal"\x3e\u6211\u7684\u8868\u5355\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3clabel class\x3d"control-label"\x3e\u8868\u5355\u5206\u7c7b\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls js_formcategory"\x3e\x3cselect class\x3d"js_company_select"\x3e\x3c/select\x3e\x3cselect class\x3d"js_personal_select"\x3e\x3c/select\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group hide j_asCompany"\x3e\x3clabel class\x3d"control-label"\x3e\u4f5c\u4e3a\u56e2\u961f\u8868\u5355\uff1a\x3c/label\x3e\x3cdiv class\x3d"controls"\x3e\x3cinput name\x3d"asCompany-form" type\x3d"checkbox" id\x3d"as-company" class\x3d"mt-10" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv style\x3d"padding: 8px;"\x3e\x3cdiv class\x3d"controls"\x3e\x3ca id\x3d"biaoge-form-btn-save" class\x3d"btn btn-sm btn-primary"\x3e\u4fdd\u5b58\x3c/a\x3e \x3ca id\x3d"form-btn-cancel" class\x3d"btn btn-sm"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"biaoge.form":'\x3cdiv class\x3d"form-preview module-detail-view biaogeform-content"\x3e\x3cdiv class\x3d"detail-header"\x3e\x3cdiv class\x3d"detail-brand"\x3e\x3ci class\x3d"graph graph-from"\x3e\x3c/i\x3e\x3cspan class\x3d"j_form_title"\x3e\u586b\u5199\u8868\u5355\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"detail-actions"\x3e\x3cul\x3e\x3cli id\x3d"form-save" class\x3d"iconlabel btn-save j_action"\x3e\x3ca\x3e\x3ci class\x3d"glyphicon icon-save"\x3e\x3c/i\x3e\u4fdd\u5b58\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_btn_close detail-slide-close"\x3e\x3ca\x3e\u00d7\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollwrapper j_formContainer"\x3e\x3cdiv class\x3d"js-biaoge-form form-view"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.mainline":'\x3cdiv class\x3d"j_portal_mainline j_portal-col i-box i-goal \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"1"\x3e\x3cdiv class\x3d"j_portal-col-head i-box-head"\x3e\x3cul class\x3d"j_portal-col-nav i-box-nav"\x3e\x3cli class\x3d"mainline-tab"\x3e\x3ca class\x3d"active mine" data-type\x3d"mine"   data-module\x3d"mainline"\x3e\u6211\u7684\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"mainline-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates"  data-module\x3d"mainline"\x3e\u4e0b\u5c5e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cdiv id\x3d"mainline-list" class\x3d"j_e-list i-goal-list"\x3e\x3cdiv id\x3d"mainline-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result" id\x3d"j_portal-goal-add"\x3e\u65e0\u9879\u76ee\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"sub-mainline-list" class\x3d"j_e-list i-goal-list hide"\x3e\x3cdiv id\x3d"sub-mainline-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"hide no-result"\x3e\u4e0b\u5c5e\u65e0\u9879\u76ee\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-moredata hide" id\x3d"mainline-more-button"\x3e\u66f4\u591a\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca id\x3d"mainline-create" class\x3d"btn btn-sm j_portal-goal-add"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u6dfb\u52a0\u9879\u76ee\x3c/a\x3e\x3ca id\x3d"mainline-more" class\x3d"btn btn-sm router" href\x3d"/mainlines"\x3e\u66f4\u591a\u9879\u76ee\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.task":'\x3cdiv class\x3d"j_portal_task i-box i-task j_portal-col i-task \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"2"\x3e\x3cdiv class\x3d"i-box-head j_portal-col-head"\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"j_portal-col-nav i-box-nav"\x3e\x3cli class\x3d"task-tab"\x3e\x3ca class\x3d"mine"  data-type\x3d"mine"  data-module\x3d"task"\x3e\u4eca\u660e\u5230\u671f\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"task-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates"  data-module\x3d"task"\x3e\u4e0b\u5c5e\u4eca\u5929\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cdiv id\x3d"task-list"\x3e\x3cul class\x3d"e-list j_e-list  j_task-list" id\x3d"today-task-list" group\x3d"today" \x3e\x3cdiv data-group\x3d"today" class\x3d"notask"\x3e\u4eca\u5929\u8fd8\u6ca1\u6709\u4e8b\u9879\u5b89\u6392\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u4e0b\u9762\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u6dfb\u52a0\u65b0\u4e8b\u9879\x3c/div\x3e\x3cdiv id\x3d"today-task-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cdiv class\x3d"hide i-task-caption"\x3e\x3ca id\x3d"task-today-more"\x3e\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"i-task-caption"\x3e\u660e\u5929\u4efb\u52a1\x3c/div\x3e\x3cul id\x3d"tomorrow-task-list" group\x3d"tomorrow" class\x3d"j_e-list j_task-list  e-list"\x3e\x3cdiv data-group\x3d"tomorrow"  class\x3d"notask hide"\x3e\u660e\u5929\u8fd8\u6ca1\u6709\u4e8b\u9879\u5b89\u6392\uff0c\u70b9\u51fb\u8fd9\u91cc\u6216\u4e0b\u9762\u7684\u201c\x3cb class\x3d"group-add"\x3e+\x3c/b\x3e\u201d\u6dfb\u52a0\u65b0\u4e8b\u9879\x3c/div\x3e\x3cdiv id\x3d"tomorrow-task-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cdiv class\x3d"hide i-task-caption"\x3e\x3ca id\x3d"task-tomorrow-more"\x3e\u66f4\u591a\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"sub-task-list" class\x3d"hide"\x3e\x3cul id\x3d"sub-today-task-list" class\x3d"j_e-list  j_task-list e-list"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u4e0b\u5c5e\u65e0\u4eca\u5929\u4efb\u52a1\x3c/div\x3e\x3cdiv id\x3d"sub-today-task-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca class\x3d"btn btn-sm" id\x3d"task-create"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u5b89\u6392\u4efb\u52a1\x3c/a\x3e\x3ca class\x3d"btn btn-sm router" id\x3d"task-more" href\x3d"/tasks"\x3e\u8fdb\u5165\u4efb\u52a1\u534f\u4f5c\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.blog":'\x3cdiv class\x3d"j_portal_blog j_portal-col portal-col \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"3"\x3e\x3cdiv class\x3d"j_portal-col-head portal-col-head portal-col-head-hasicon"\x3e\x3cspan class\x3d"portal-col-icon blog"\x3e\x3ci\x3e\x3c/i\x3e\x3c/span\x3e\x3cul class\x3d"j_portal-col-nav portal-col-nav"\x3e\x3cli class\x3d"blog-tab"\x3e\x3ca  data-type\x3d"unRead" data-module\x3d"blog" class\x3d"active unRead"\x3e\u672a\u8bfb\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"blog-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates"  data-module\x3d"blog" \x3e\u4e0b\u5c5e\u6628\u65e5\u5de5\u4f5c\u6210\u6548\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3ca class\x3d"j_btn-remove btn-remove pull-right hide" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-refresh btn-refresh pull-right hide"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv id\x3d"blog-list" class\x3d"j_e-list portal-col-body"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u672a\u8bfb\u65e5\u62a5\x3c/div\x3e\x3cdiv id\x3d"blog-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"sub-blog-list" class\x3d"j_e-list portal-col-body  hide"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u4e0b\u5c5e\u5de5\u4f5c\u6210\u6548\x3c/div\x3e\x3cdiv id\x3d"sub-blog-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide blogs-more"\x3e\u52a0\u8f7d\u66f4\u591a\u2026\x3c/div\x3e\x3cdiv class\x3d"portal-col-foot"\x3e\x3cdiv class\x3d"portal-option-btns text-center"\x3e\x3ca class\x3d"btn btn-sm" id\x3d"blog-create" \x3e\x3ci class\x3d"icon-edit glyphicon"\x3e\x3c/i\x3e\u5199\u65e5\u62a5\x3c/a\x3e\x3ca  class\x3d"router btn btn-sm" href\x3d"" id\x3d"other-blog"\x3e\u8fdb\u5165\u4ed6\u4eba\u65e5\u62a5\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.createblog":'\x3cdiv id\x3d"placard-createblog" class\x3d"j_portal_createblog j_portal-col portal-col \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"3"\x3e\x3cdiv class\x3d"i-box i-placard placard"\x3e\x3cdiv class\x3d"i-box-head j_portal-col-head"\x3e\x3cul class\x3d"j_portal-col-nav i-box-nav"\x3e\x3cli\x3e\x3ca class\x3d"active cs-m"\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-remove"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cdiv class\x3d"placard-edit"\x3e\x3ctextarea id\x3d"createblog-textarea" name\x3d"placard.content" class\x3d"autosize portal-notice-content createblog-textarea" maxlength\x3d"1000" placeholder\x3d"\u8bb0\u5f55\u4e00\u4e0b\u60a8\u4eca\u5929\u7684\u5de5\u4f5c\u6210\u679c\u548c\u5fc3\u5f97\u5427......"\x3e\x3c/textarea\x3e\x3cspan class\x3d"j_tools ds-ib dynamic-tools"\x3e\x3ca class\x3d"post-upload fs-14 fl c-999"  id\x3d"j_createblog_attach" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"fr mr-20"\x3e\x3cspan class\x3d"j_createblog_tip ds-ib mr-20 c-999 f-12 hide placard-tip"\x3e\x3cspan class\x3d"j_createblog_length_tips post-tip fr"\x3e\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57\x3c/span\x3e\x3c/span\x3e\x3ca id\x3d"btn-createblog" data-type\x3d"blog" class\x3d"placard-submit btn btn-lake btn-sm"\x3e\u53d1\u5e03\x3c/a\x3e\x3c/span\x3e\x3cdiv id\x3d"createblog-all-attachments" class\x3d"clearfix control-group ph-20 pv-5 nomg hide" icon\x3d"#i-feedback-flow"\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"createblog-attachments" class\x3d"entity-container entity-attach-wrap clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.notice":'\x3cdiv id\x3d"placard-comtainer" class\x3d"j_portal_notice j_portal-col portal-col portal-notice \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"4"\x3e\x3cdiv class\x3d"portal-col-head"\x3e\x3ch3\x3e\u516c\u544a\x3c/h3\x3e\x3ca class\x3d"j_btn-remove btn-remove pull-right hide" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"portal-col-body"\x3e\x3cdiv class\x3d"guide-div portal-guide"\x3e\x3cdiv class\x3d"portal-guide-content text-center"\x3e\u6682\u65e0\u516c\u544a\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"portcard" class\x3d"portal-notice-content hide"\x3e\u4e3a\u8d2f\u5f7b\u5e02\u653f\u5e9c\u5b89\u5168\u5de5\u4f5c\u4f1a\u8bae\u7cbe\u795e\uff0c\u7814\u7a76\u843d\u5b9e\u6211\u56e2\u961f\u5b89\u5168\u751f\u4ea7\u4e8b\u5b9c\uff0c\u603b\u56e2\u961f\u51b3\u5b9a\u53ec\u5f002014\u5e74\u5ea6\u5b89\u5168\u751f\u4ea7\u5de5\u4f5c\u4f1a\u8bae\u62a5\u5230\u5730\u70b9\uff1a\u7b2c\u4e8c\u62db\u5f85\u6240301\u53f7\u623f\u95f4\uff0c\u8054\u7cfb\u4eba\uff1a\u8d75\u7231\u56fd\u3002\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.workflow":'\x3cdiv class\x3d"j_portal_workflow j_portal-col i-box i-crm \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"5"\x3e\x3cdiv class\x3d"j_portal-col-head i-box-head"\x3e\x3cul class\x3d"j_portal-col-nav i-box-nav"\x3e\x3cli  class\x3d"workflow-tab"\x3e\x3ca  data-type\x3d"mine"  data-module\x3d"workflow"  class\x3d"active mine"\x3e\u6211\u7684\u5f85\u529e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli  class\x3d"workflow-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates" data-module\x3d"workflow"  \x3e\u4e0b\u5c5e\u5f85\u529e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cul id\x3d"workflow-list" class\x3d"j_e-list e-list"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u5f85\u529e\u5ba1\u6279\x3c/div\x3e\x3cdiv id\x3d"workflow-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cul id\x3d"sub-workflow-list" class\x3d"j_e-list e-list hide"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u4e0b\u5c5e\u5f85\u529e\u5ba1\u6279\x3c/div\x3e\x3cdiv id\x3d"sub-workflow-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-moredata hide" id\x3d"workflow-more-button"\x3e\u66f4\u591a\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca id\x3d"workflow-create" class\x3d"btn btn-sm" \x3e\x3ci class\x3d"icon-upload-alt glyphicon"\x3e\x3c/i\x3e \u63d0\u4ea4\u7533\u8bf7\x3c/a\x3e\x3ca class\x3d"btn btn-sm router" href\x3d"/workflows"\x3e\u8fdb\u5165\u5ba1\u6279\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.calendar":'\x3cdiv class\x3d"j_portal_calendar j_portal-col i-box i-agenda \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"6"\x3e\x3cdiv class\x3d"j_portal-col-head i-box-head"\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh" type\x3d"calendar"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3ch3 class\x3d"i-box-title"\x3e\u65e5\u7a0b\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cdiv id\x3d"calendar-datatime" class\x3d"i-box-timepicker"\x3e\x3c/div\x3e\x3cul id\x3d"calendar-list" class\x3d"j_e-list e-list i-agenda-list"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u65e5\u7a0b\u6570\u636e(\u53cc\u51fb\u65e5\u671f\u6570\u5b57\u5b89\u6392\u65e5\u7a0b)\x3c/div\x3e\x3cdiv id\x3d"calendar-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cul id\x3d"sub-calendar-list" class\x3d"j_e-list e-list e-list  hide"\x3e\x3cdiv class\x3d"hide no-result"\x3e\u65e0\u4e0b\u5c5e\u65e5\u7a0b\x3c/div\x3e\x3cdiv id\x3d"sub-calendar-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca id\x3d"calendar-create" class\x3d"btn btn-sm"\x3e\x3ci class\x3d"icon-calendar"\x3e\x3c/i\x3e \u5b89\u6392\u65e5\u7a0b\x3c/a\x3e\x3ca class\x3d"btn btn-sm router" href\x3d"/calendar"\x3e\u8fdb\u5165\u65e5\u7a0b\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.customer":'\x3cdiv class\x3d"j_portal_customer i-box i-crm j_portal-col \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"7"\x3e\x3cdiv class\x3d"i-box-head j_portal-col-head"\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"i-box-nav j_portal-col-nav"\x3e\x3cli class\x3d"customer-tab" title\x3d"\u672a\u8bfb\u548c\u672a\u8bfb\u53cd\u9988\u7684\u5ba2\u6237"\x3e\x3ca data-type\x3d"update"  data-module\x3d"customer" class\x3d"active update"\x3e\u6709\u66f4\u65b0\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"customer-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates" data-module\x3d"customer"\x3e\u4e0b\u5c5e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cul id\x3d"customer-list" class\x3d"j_e-list e-list"\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u66f4\u65b0\u5ba2\u6237\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"customer-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cul id\x3d"sub-customer-list" class\x3d"j_e-list e-list e-list hide"\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u4e0b\u5c5e\u5ba2\u6237\u6570\u636e\t\x3c/div\x3e\x3cdiv id\x3d"sub-customer-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca class\x3d"btn btn-sm" id\x3d"customer-create" data-type\x3d"customer-create"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e \u65b0\u5efa\u5ba2\u6237\x3c/a\x3e\x3ca class\x3d"btn btn-sm router" href\x3d"/crms/customer" data-type\x3d"customer-more"\x3e\u8fdb\u5165\u5ba2\u6237\u5e93\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.document":'\x3cdiv class\x3d"j_portal_document i-box i-doc j_portal-col \x3c% if(isShow !\x3d\x3d \'1\'){%\x3ehide\x3c%} %\x3e" data-id\x3d"8"\x3e\x3cdiv class\x3d"i-box-head j_portal-col-head"\x3e\x3cdiv class\x3d"i-box-action"\x3e\x3ca class\x3d"j_btn-refresh"\x3e\x3ci class\x3d"icon-refresh"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_btn-remove" title\x3d"\u9690\u85cf\u5143\u7d20"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca class\x3d"j_iboxSlide"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cul class\x3d"i-box-nav j_portal-col-nav"\x3e\x3cli title\x3d"\u672a\u8bfb\u548c\u672a\u8bfb\u53cd\u9988\u7684\u6587\u6863" class\x3d"document-tab"\x3e\x3ca data-type\x3d"update"  data-module\x3d"document"  class\x3d"update"\x3e\u6709\u66f4\u65b0\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"document-tab"\x3e\x3ca data-type\x3d"subordinates" class\x3d"subordinates" data-module\x3d"document"\x3e\u4e0b\u5c5e\u6587\u6863\u5e93\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-content"\x3e\x3cul id\x3d"document-list" class\x3d"j_e-list e-list doc-list"\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u66f4\u65b0\u6587\u6863\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"document-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3cul id\x3d"sub-document-list" class\x3d"j_e-list e-list e-list doc-list  hide"\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u4e0b\u5c5e\u6587\u6863\u6570\u636e\x3c/div\x3e\x3cdiv id\x3d"sub-document-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"i-box-moredata hide" id\x3d"document-more-button"\x3e\u66f4\u591a\x3c/div\x3e\x3cdiv class\x3d"i-box-footer"\x3e\x3cdiv class\x3d"i-box-footer-btns"\x3e\x3ca class\x3d"btn btn-sm" id\x3d"document-create" data-type\x3d"document-create"\x3e\x3ci class\x3d"icon-upload-alt glyphicon"\x3e\x3c/i\x3e \u4e0a\u4f20\u6587\u4ef6\x3c/a\x3e\x3ca class\x3d"btn btn-sm router" href\x3d"/documents" data-type\x3d"document-more"\x3e\u8fdb\u5165\u6587\u6863\u5e93\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.dyncpublish":'\x3cdiv class\x3d"i-post j_focusEl j_content_area"\x3e\x3cdiv class\x3d"i-post-input j_post" id\x3d"j_dync-area"\x3e\x3ctextarea class\x3d"j_postsize j_post_share j_at_area" id\x3d"share-textarea" isoffsetpx\x3d\'true\' data-offsetpx\x3d\'-4\' data-left\x3d"-10" data-top\x3d"-6" data-type\x3d"share" placeholder\x3d"\u5206\u4eab\u5de5\u4f5c\u6216\u884c\u4e1a\u7b49\u76f8\u5173\u9886\u57df\u7684\u5916\u754c\u52a8\u6001\u6216\u53c2\u8003\u4fe1\u606f......"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"i-post-handle" id\x3d"j_post-area"\x3e\x3cdiv class\x3d"clearfix handle-row j_post-row"\x3e\x3cdiv id\x3d"dync-post-right"\x3e\x3ca class\x3d"post-submit btn btn-info fr" id\x3d"btn-dync" data-type\x3d"share"\x3e\u53d1\u5e03 \x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_share_area fr"\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle post-scope" id\x3d"visibleType" data-type\x3d"all"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\x3cspan class\x3d"j_share_area_text"\x3e\u516c\u5f00\x3c/span\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown" style\x3d"display: none;"\x3e\x3cli data-type\x3d"all"\x3e\x3ca\x3e\u516c\u5f00\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"sup"\x3e\x3ca\x3e\u4e0a\u7ea7\u53ef\u89c1\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"department"\x3e\x3ca\x3e\u672c\u90e8\u95e8\u53ef\u89c1\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog_tip hide"\x3e\x3cspan class\x3d"j_blog_length_tips post-tip fr"\x3e\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"j_feedback_area fl mr-20 hide"\x3e\x3cdiv class\x3d"j_links-dropdown dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"a-feed" id\x3d"i-dync-feedback"\x3e\x3ci class\x3d"icon-link"\x3e\x3c/i\x3e\u5173\u8054 \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"relevance-module-task" for\x3d"#dync-feedback-task" data-entity\x3d"task"\x3e\u76f8\u5173\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"relevance-module-task" for\x3d"#dync-feedback-doc" data-entity\x3d"document"\x3e\u76f8\u5173\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"relevance-module-task" for\x3d"#dync-feedback-crm" data-entity\x3d"customer"\x3e\u76f8\u5173\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca class\x3d"relevance-module-task" for\x3d"#dync-feedback-flow" data-entity\x3d"workflow"\x3e\u76f8\u5173\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/span\x3e\x3ca class\x3d"post-upload fs-14 fl"  id\x3d"dync-post-attach" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_detailCommands i-post-handle-extend clearfix module-detail-view entity-info"\x3e\x3cdiv id\x3d"dync-feedback-task" data-module\x3d"task" class\x3d"clearfix entity-relevance control-group j_feedback hide" icon\x3d"#i-feedback-task"\x3e\x3c/div\x3e\x3cdiv id\x3d"dync-feedback-doc" data-module\x3d"document" class\x3d"clearfix entity-relevance control-group j_feedback hide" icon\x3d"#i-feedback-task"\x3e\x3c/div\x3e\x3cdiv id\x3d"dync-feedback-crm" data-module\x3d"customer" class\x3d"clearfix entity-relevance control-group j_feedback hide" icon\x3d"#i-feedback-task"\x3e\x3c/div\x3e\x3cdiv id\x3d"dync-feedback-flow" data-module\x3d"workflow" class\x3d"clearfix entity-relevance control-group j_feedback hide" icon\x3d"#i-feedback-task"\x3e\x3c/div\x3e\x3cdiv id\x3d"all-attachments" class\x3d"clearfix control-group hide" icon\x3d"#i-feedback-flow"\x3e\x3cdiv class\x3d"j_att_title control-label"\x3e\x3ci class\x3d"graph graph-16-attach"\x3e\x3c/i\x3e\u9644\u4ef6:\x3c/div\x3e\x3cdiv class\x3d"controls"\x3e\x3cdiv id\x3d"dync-attachments" class\x3d"entity-container clearfix" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.newportal":'\x3cdiv class\x3d"i-view"\x3e\x3cdiv class\x3d"i-content"\x3e\x3cdiv class\x3d"i-main-col"\x3e\x3cdiv class\x3d"i-communicate table-tray clearfix"\x3e\x3cdiv id\x3d"j_communi-menu" class\x3d"i-communicate-side tray-cell"\x3e\x3c/div\x3e\x3cdiv id\x3d"j_communi-main" class\x3d"i-communicate-main tray-cell"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-side-col"\x3e\x3cdiv id\x3d"j_mini-modules" class\x3d"scrollwrapper"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdl id\x3d"mainline-clone"  class\x3d"entitybox-toggle j_mainline_item" data-module\x3d"mainline" data-id\x3d""\x3e\x3cdt class\x3d"percent"\x3e\x3c/dt\x3e\x3cdd class\x3d"title"\x3e\x3cp class\x3d"j_name ellipsis"\x3e\x3c/p\x3e\x3cspan class\x3d"user leader ellipsis"\x3e\x3c/span\x3e\x3c/dd\x3e\x3cdd class\x3d"j_shortcut option"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5173\u95ed\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cli id\x3d"task-clone" class\x3d"j_task-item entitybox-toggle" data-module\x3d"task" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"text j_name ellipsis" data-module\x3d"task"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"finish"\x3e\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"task-create-clone"\x3e\x3cdiv class\x3d"title"\x3e\x3cinput type\x3d"text" class\x3d"title" placeholder\x3d"\u4e00\u53e5\u8bdd\u63cf\u8ff0\u4efb\u52a1..." maxlength\x3d"100"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cdl id\x3d"blog-clone" class\x3d"j_portal-blog-item portal-blog-item clearfix"\x3e\x3cdt class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png"\x3e\x3c/dt\x3e\x3cdd class\x3d"blog-box"\x3e\x3cdiv class\x3d"blog-header"\x3e\x3cspan\x3e\x3ca class\x3d"user  ellipsis usercard-toggle "\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"time"\x3e\x3c/span\x3e\x3cspan class\x3d"new hide"\x3eNEW\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-body blog-body"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/base/upload/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-coord blog-coord hide"\x3e\x3ci class\x3d"icon-map-marker" title\x3d"\u5730\u7406\u4f4d\u7f6e"\x3e\x3c/i\x3e\x3cspan class\x3d"blog-address gps-address"\x3e\x3c/span\x3e\x3ca class\x3d"blog-map-toggle gps-map hide"\x3e\u5730\u56fe\u5c55\u793a\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_blog-detail blog-detail"\x3e\x3cp class\x3d"j_mainline-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_task-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_customer-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_document-count "\x3e\x3c/p\x3e\x3cp class\x3d"j_workflow-count "\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"ta-r italic c-999"\x3e\x3cspan class\x3d"create-time"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cli id\x3d"customer-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"customer" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis "\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true" \x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"document-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"document" data-id\x3d""\x3e\x3cspan class\x3d"doc-icon"\x3e\x3ci\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name ellipsis text"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true" \x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"workflow-clone" class\x3d"j_portal_item entitybox-toggle" data-module\x3d"workflow" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"comment-count"\x3e\x3c/span\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shortcut"\x3e\x3cspan class\x3d"watch"\x3e\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/span\x3e\x3cspan class\x3d"share" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e \u5171\u4eab\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3cli id\x3d"calendar-clone" class\x3d"j_agenda-entity" data-module\x3d"agenda" data-id\x3d""\x3e\x3cdiv class\x3d"title"\x3e\x3cdiv class\x3d"j_name text ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3cspan class\x3d"user ellipsis"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"portal.communimenu":'\x3cdiv class\x3d"i-timer"\x3e\x3ca class\x3d"checkin-btn tran-bg fr j_check_inOrOut"\x3e\u7b7e\u5230\x3c/a\x3e\x3ctime\x3e\x3cp class\x3d"hour" id\x3d"j_timeHour"\x3e00:00:00\x3c/p\x3e\x3cp class\x3d"date" id\x3d"j_timeYear"\x3e1900/1/1\x3c/p\x3e\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"j_dynamic-all i-dynamic-checkall active j_menu-item"\x3e\u56e2\u961f\u5de5\u4f5c\u52a8\u6001\x3c/div\x3e\x3cdiv class\x3d"i-member-wrapper"\x3e\x3cdiv class\x3d"i-member-head"\x3e\x3cdiv class\x3d"tab j_memberTab"\x3e\x3ca class\x3d"active" data-show\x3d"#memberlist-wrapper"\x3e\x3ci class\x3d"graph" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u6d88\u606f"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca data-show\x3d"#member-book"\x3e\x3ci class\x3d"graph" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u901a\u8baf\u5f55"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca data-show\x3d"#memberSch"\x3e\x3ci class\x3d"graph" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u67e5\u627e\u4eba\u5458"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_memberlist-wrapper scrollwrapper" marginbottom\x3d"10"\x3e\x3cdiv class\x3d"i-member-body"\x3e\x3cdiv id\x3d"memberSch" class\x3d"i-member-book search-input hide"\x3e\x3cdiv class\x3d"membersch-input"\x3e\x3cinput id\x3d"j_memberSchInput" type\x3d"text" class\x3d"form-control form-control-block" placeholder\x3d"\u641c\u7d22"/\x3e\x3c/div\x3e\x3cdiv id\x3d"j_memberSch_list" class\x3d"member-book"\x3e\x3cdl class\x3d"j_mesSchList_dl"\x3e\x3c/dl\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u76f8\u5173\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"memberlist-wrapper"\x3e\x3cdiv class\x3d"i-member-list j_member-list"\x3e\x3cdiv class\x3d"j_mesDiv j_mesFixed"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_mesDiv j_mesRecent"\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_recent_more i-member-more hide"\x3e\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-member-guide hide"\x3e\x3ca class\x3d"btn btn-sm btn-block btn-success"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\x3ca class\x3d"btn btn-sm btn-block btn-info"\x3e\u53d1\u8d77\u804a\u5929\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"member-book" class\x3d"i-member-book hide"\x3e\x3cdiv class\x3d"member-book j_memberbookScr"\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_member_more i-member-more hide" pageNo\x3d"2"\x3e\u66f4\u591a...\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"j_mesRecentlyClone" class\x3d"list-item j_menu-item"\x3e\x3ctime\x3e\x3c/time\x3e\x3cdiv class\x3d"count"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_avatar avatar"\x3e\x3c/div\x3e\x3cdiv class\x3d"info"\x3e\x3cp class\x3d"j_name name ellipsis"\x3e\x3c/p\x3e\x3cdiv class\x3d"j_info msg-text ellipsis"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_mesSearchClone" class\x3d"list-item j_menu-item"\x3e\x3cdiv class\x3d"j_avatar avatar"\x3e\x3c/div\x3e\x3cspan class\x3d"j_name name ellipsis"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"j_memberGroupClone"\x3e\x3cdl id\x3d"list-history#"\x3e\x3cdt\x3e#\x3c/dt\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv id\x3d"j_memberItemClone"\x3e\x3cdd class\x3d"j_member_item j_menu-item" data-entity\x3d"employee" data-chat-type\x3d"singleChat"\x3e\x3cdiv class\x3d"j_avatar avatar cs-p"\x3e\x3cimg src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"j_name name ellipsis"\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/div\x3e\x3cdiv id\x3d"j_allMemberServiceClone"\x3e\x3cdl id\x3d"j_allEmployeeService" class\x3d"system" title\x3d"eteams\u670d\u52a1\u53f7"\x3e\x3cdt\x3e\u7cfb\u7edf\x3c/dt\x3e\x3cdd class\x3d"j_member_item j_menu-item" data-service-no\x3d"true" data-entity\x3d"employee" data-chat-type\x3d"singleChat"\x3e\x3cdiv class\x3d"j_avatar avatar"\x3e\x3cimg src\x3d"images/service.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_name name ellipsis"\x3eeteams\u670d\u52a1\u53f7\x3c/div\x3e\x3c/dd\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv id\x3d"j_employGroupClone"\x3e\x3cdl class\x3d"j_employ_group group"\x3e\x3cdt\x3e\u7fa4\u7ec4\x3ci class\x3d"icon-angle-right"\x3e\x3c/i\x3e\x3c/dt\x3e\x3cdiv class\x3d\'j_groupInviteTip tip hide\'\x3e\u60a8\u8fd8\u6ca1\u6709\u52a0\u5165\u6216\u521b\u5efa\u8fc7\u7fa4\u7ec4\uff0c\u82e5\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5728\u4e0e\u540c\u4e8b\u7684\u5bf9\u8bdd\u754c\u9762\u76f4\u63a5\u6dfb\u52a0\u6210\u5458\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5efa\u7acb\u65b0\u7fa4\u7ec4\x3c/div\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3c/dl\x3e\x3c/div\x3e\x3cdiv id\x3d"j_groupClone"\x3e\x3cdd class\x3d"j_group_item j_menu-item" data-entity\x3d"channel" data-chat-type\x3d"groupChat"\x3e\x3cdiv class\x3d"j_avatar avatar"\x3e\x3cimg src\x3d"images/group.png"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_name name ellipsis"\x3e\x3c/div\x3e\x3c/dd\x3e\x3c/div\x3e\x3cdiv id\x3d"j_oneEmpPanelClone" class\x3d"smwx-invite-tip text-center c-999 fs-12"\x3e\u56e2\u961f\u4eba\u5458\u5c11\uff0c\u8bf7\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u534f\u4f5c\u5427\uff01\x3cdiv class\x3d"mt-10"\x3e\x3ca class\x3d"invite-toggle btn btn-danger btn-sm"\x3e\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.communicontent":'\x3cdiv id\x3d"j_communi-content" class\x3d"i-message-channel"\x3e\x3cdiv id\x3d"j_dyna" class\x3d"j_channel_hd channel-hd dyna-hd"\x3e\x3cdiv class\x3d"j_avatar cover"\x3e\x3cimg src\x3d"images/service.png"/\x3e\x3c/div\x3e\x3cp class\x3d"j_name title ellipis"\x3e\u56e2\u961f\u5de5\u4f5c\u52a8\u6001\x3c/p\x3e\x3cul class\x3d"nav j_dynamicTab"\x3e\x3cli class\x3d"active" data-filter-type\x3d"workAll"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"blog"\x3e\x3ca\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"nav-child hide j_dynamicTab-more"\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"j_dynamicTab-sub dropdown-menu border-dropdown"\x3e\x3cli class\x3d"active" data-filter-type\x3d"workAll"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"blog"\x3e\x3ca\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"nav j_shareTab hide"\x3e\x3cli class\x3d"active" data-filter-type\x3d"share"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareAtme"\x3e\x3ca\x3e@\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareReplay"\x3e\x3ca\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"likeme"\x3e\x3ca\x3e\u8d5e\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mine"\x3e\x3ca\x3e\u6211\u7684\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cul class\x3d"nav-child hide j_shareTab-more"\x3e\x3cli class\x3d"dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle"\x3e\u66f4\u591a\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"j_shareTab-sub dropdown-menu border-dropdown"\x3e\x3cli class\x3d"active" data-filter-type\x3d"share"\x3e\x3ca\x3e\u6240\u6709\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareAtme"\x3e\x3ca\x3e@\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"shareReplay"\x3e\x3ca\x3e\u8bc4\u8bba\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"likeme"\x3e\x3ca\x3e\u8d5e\u6211\u7684\x3c/a\x3e\x3c/li\x3e\x3cli data-filter-type\x3d"mine"\x3e\x3ca\x3e\u6211\u7684\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"toollist-box"\x3e\x3cul class\x3d"toolkit-list fr teamwork-list"\x3e\x3cli class\x3d"toolkit-item search search-right"\x3e\x3cinput id\x3d"j_dyna_searchinput" class\x3d"form-control" type\x3d"text"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle w-120 dropdown-gettext"\x3e\x3ca class\x3d"selectui-result dropdown-toggle"\x3e\u5168\u56e2\u961f\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"j_dyna-range dropdown-menu border-dropdown w-120" style\x3d"display: none;"\x3e\x3cli class\x3d"j_company hide" data-range\x3d"company"\x3e\x3ca\x3e\u5168\u56e2\u961f\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_watched hide" data-range\x3d"watched"\x3e\x3ca\x3e\u5173\u6ce8\u7684\u540c\u4e8b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_superiors hide" data-range\x3d"superiors"\x3e\x3ca\x3e\u6211\u4e0a\u7ea7\u7684\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_directSubordinates hide" data-range\x3d"directSubordinates"\x3e\x3ca\x3e\u76f4\u63a5\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_subordinates hide" data-range\x3d"subordinates"\x3e\x3ca\x3e\u6240\u6709\u4e0b\u5c5e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_department" data-range\x3d"department"\x3e\x3ca\x3e\u672c\u90e8\u95e8\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle j_dropdownMenuToggle"\x3e\x3ca class\x3d"btn btn-sm dropdown-toggle"\x3e\u65e5\u671f\x3ciclass\x3d"icon-caret-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cdiv class\x3d"dropdown-menu border-dropdown dropdown-menu-right j_dropDownMenu"\x3e\x3cdiv id\x3d"dyna-datepicker" class\x3d"inline"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"j_tip toolkit-item"\x3e\x3ci class\x3d"icon-help" data-toggle\x3d"tooltip" data-placement\x3d"bottom" title\x3d"\u5de5\u4f5c\u52a8\u6001\u6743\u9650\u8bf4\u660e\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u4e0b\u5c5e\u53ca\u53c2\u4e0e\u4e8b\u9879\u7684\u5de5\u4f5c\u52a8\u6001\u53ca\u5176\u5177\u4f53\u5185\u5bb9\uff1b\u975e\u4e0b\u5c5e\u7684\u5de5\u4f5c\u52a8\u6001\u5c5e\u4e8e\u65e0\u6743\u9650\u8303\u56f4\uff0c\u4ec5\u80fd\u4e86\u89e3\u5230TA\u7684\u5de5\u4f5c\u52a8\u4f5c"data-template\x3d"\x3cdiv class\x3d\'tooltip i-tooltip\' role\x3d\'tooltip\'\x3e\x3cdiv class\x3d\'tooltip-arrow i-tooltip-arrow\'\x3e\x3c/div\x3e\x3cdiv class\x3d\'tooltip-inner i-tooltip-inner\'\x3e\x3c/div\x3e\x3c/div\x3e"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_message" class\x3d"j_channel_hd message-hd channel-hd hide"\x3e\x3cdiv class\x3d"j_messageImg graph brand"\x3e\x3c/div\x3e\x3cp class\x3d"j_name title ellipis"\x3e\x3c/p\x3e\x3cul class\x3d"nav j_dynamicTab"\x3e\x3cli class\x3d"j_unread active" isRead\x3d"false"\x3e\x3ca\x3e\u672a\u8bfb\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_read" isRead\x3d"true"\x3e\x3ca\x3e\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"toollist-box"\x3e\x3cul class\x3d"j_toolList toolkit-list"\x3e\x3cli class\x3d"j_searchtool toolkit-item search search-right"\x3e\x3cinput id\x3d"j_mes_searchinput" class\x3d"form-control" type\x3d"text" name\x3d"searchsearch"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3cli class\x3d"j_moduletool toolkit-item"\x3e\x3cdiv class\x3d"dropdown dropdown-menu-toggle w-110 dropdown-gettext"\x3e\x3ca class\x3d"selectui-result dropdown-toggle j_module_feed"\x3e\u5168\u90e8\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu border-dropdown j_detail_ul w-110" style\x3d"display: none;"\x3e\x3cli class\x3d"j_all hide" data-module\x3d"all" default\x3d"true"\x3e\x3ca\x3e\u5168\u90e8\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_mainline" data-module\x3d"mainline"\x3e\x3ca\x3e\u9879\u76ee\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_task" data-module\x3d"task"\x3e\x3ca\x3e\u4efb\u52a1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_document" data-module\x3d"document"\x3e\x3ca\x3e\u6587\u6863\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_customer" data-module\x3d"customer"\x3e\x3ca\x3e\u5ba2\u6237\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_workflow" data-module\x3d"workflow"\x3e\x3ca\x3e\u5ba1\u6279\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_workreport" data-module\x3d"workreport"\x3e\x3ca\x3e\u62a5\u544a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_share" data-module\x3d"share"\x3e\x3ca\x3e\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_agenda" data-module\x3d"calendar"\x3e\x3ca\x3e\u65e5\u7a0b\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_saleChance" data-module\x3d"saleChance"\x3e\x3ca\x3e\u5546\u673a\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_production" data-module\x3d"production"\x3e\x3ca\x3e\u4ea7\u54c1\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_formdatareport" data-module\x3d"formdatareport"\x3e\x3ca\x3e\u6570\u636e\u4e0a\u62a5\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"j_markallread toolkit-item dropdown-arrow-pre"\x3e\x3ca class\x3d"j_page_read btn btn-sm btn-primary"\x3e\u5f53\u9875\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_markallread toolkit-item dropdown-arrow"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown"\x3e\x3cli\x3e\x3ca class\x3d"j_all_read"\x3e\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"j_tip toolkit-item hide"\x3e\x3ci class\x3d"icon-help" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"bottom" title\x3d""data-template\x3d"\x3cdiv class\x3d\'tooltip i-tooltip\' role\x3d\'tooltip\'\x3e\x3cdiv class\x3d\'tooltip-arrow i-tooltip-arrow\'\x3e\x3c/div\x3e\x3cdiv class\x3d\'tooltip-inner i-tooltip-inner\'\x3e\x3c/div\x3e\x3c/div\x3e"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_employee" class\x3d"j_channel_hd channel-hd i-chat-group-hd hide"\x3e\x3cdiv class\x3d"j_avatar cover"\x3e\x3cimg src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-name"\x3e\x3cdiv class\x3d"j_name chat-name-input disabled" contenteditable\x3d"false"\x3e\x3c/div\x3e\x3cdiv class\x3d"a-addmember j_members"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"nav j_dynamicTab"\x3e\x3cli class\x3d"j_titleChat active" data-type\x3d"chat"\x3e\x3ca\x3e\u804a\u5929\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_titleworkDyna" data-type\x3d"dyna" data-sub-type\x3d"workAll"\x3e\x3ca\x3e\u5de5\u4f5c\u52a8\u6001\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_titleShare" data-type\x3d"dyna" data-sub-type\x3d"share"\x3e\x3ca\x3e\u5206\u4eab\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_titleBlog hide" data-type\x3d"dyna" data-sub-type\x3d"blog"\x3e\x3ca\x3e\u65e5\u62a5\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_titleWorkSpace hide" data-type\x3d"workspace"\x3e\x3ca\x3e\u8fdb\u5165\u5176\u5de5\u4f5c\u7a7a\u95f4\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"toollist-box"\x3e\x3cul class\x3d"toolkit-list hide"\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" type\x3d"text" name\x3d"searchsearch"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"addmember-layer j_membersLayer"\x3e\x3cdiv class\x3d"inner"\x3e\x3cul class\x3d"j_membersUls"\x3e\x3cli id\x3d"j_memberAddCLone" class\x3d"j_addLi add"\x3e\x3ca title\x3d"\u6dfb\u52a0\u6210\u5458" class\x3d"j_add_member selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_channel" class\x3d"j_channel_hd channel-hd i-chat-group-hd hide"\x3e\x3cdiv class\x3d"j_avatar cover"\x3e\x3cimg src\x3d"images/group.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-name"\x3e\x3cdiv contenteditable\x3d"true" class\x3d"j_nameDiv chat-name-input disabled"\x3e\x3c/div\x3e\x3cdiv class\x3d"a-addmember j_members"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"quit-channel j_quit-channel" title\x3d"\u9000\u51fa\u7fa4\u7ec4"\x3e\x3ci class\x3d"icon-logout"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"nav j_dynamicTab"\x3e\x3cli class\x3d"active" data-type\x3d"chat"\x3e\x3ca\x3e\u804a\u5929\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"toollist-box"\x3e\x3cul class\x3d"toolkit-list hide"\x3e\x3cli class\x3d"toolkit-item search"\x3e\x3cinput class\x3d"form-control" type\x3d"text" name\x3d"searchsearch"\x3e\x3ci class\x3d"icon-search" title\x3d"\u641c\u7d22"\x3e\x3c/i\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"addmember-layer j_membersLayer"\x3e\x3cdiv class\x3d"inner"\x3e\x3cul class\x3d"j_membersUls"\x3e\x3cli class\x3d"j_addLi add"\x3e\x3ca title\x3d"\u6dfb\u52a0\u6210\u5458" class\x3d"j_add_member selector-toggle" data-entity\x3d"employee" data-multi\x3d"true"\x3e\x3ci class\x3d"icon-plus-thin"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_communi-body" class\x3d"channel-bd"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_communicate-holder" class\x3d"i-communicate-holder hide"\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"text c-999"\x3e\u6b22\u8fce\u4f7f\u7528\u4e00\u7ad9\u5f0f\u7684\u56e2\u961f\u534f\u4f5c\u548c\u6c9f\u901a\u5e73\u53f0\x3cbr\x3e\u76ee\u524d\u60a8\u56e2\u961f\u4e2d\u53ea\u6709\u60a8\u4e00\u4eba\uff0c\u8bf7\x3ca class\x3d"invite-toggle" type\x3d"modal"\x3e\u9080\u8bf7\u52a0\u5165\x3c/a\x3e\u66f4\u591a\u7684\u540c\u4e8b\u4e00\u8d77\u534f\u4f5c\u5427\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cli id\x3d"j_memberCLone" class\x3d"usercard-toggle cs-p"\x3e\x3cimg title\x3d"" src\x3d"images/avatar.png"\x3e\x3c/li\x3e\x3c/div\x3e',
"portal.minimodule":'\x3cdiv class\x3d"i-side-col-inner"\x3e\x3cdiv class\x3d"i-tile clearfix j_tag_div"\x3e\x3cdiv id\x3d"j_unfinish" class\x3d"i-tile-item ds-ib-w tran-bg unfinish j_title_item" data-href\x3d"/feed/unfinish/all"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u672a\u5b8c\u6210\u4e8b\u9879\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_watched" class\x3d"i-tile-item ds-ib-w tran-bg follow j_title_item" data-href\x3d"/feed/watched/all"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u5173\u6ce8\u4e8b\u9879\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_privacy" class\x3d"i-tile-item ds-ib-w tran-bg tags j_title_item" data-href\x3d"/tag/privacy/list"\x3e\x3ci class\x3d"graph"\x3e\x3c/i\x3e\x3cdiv class\x3d"content"\x3e\x3cp class\x3d"count"\x3e\x3c/p\x3e\x3cp\x3e\u6807\u7b7e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-mini-modules j_portal-sortable" id\x3d"modules-section" data-id\x3d"3"\x3e\x3c/div\x3e\x3cdiv class\x3d"i-mini-mouules-add clearfix"\x3e\x3ca class\x3d"j_add_module entitybox-toggle" data-id\x3d"new" data-module\x3d"portalsetting" \x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u6dfb\u52a0\u9996\u9875\u5feb\u901f\u5165\u53e3\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.msgchannel":'\x3cdiv id\x3d"i-message-view" class\x3d"i-message-channel"\x3e\x3cdiv class\x3d"channel-bd j_hasMesInfo"\x3e\x3cdiv class\x3d"j_msglist-wrapper message-list-view scrollwrapper"\x3e\x3cdiv class\x3d"j_meslist message-list"\x3e\x3c/div\x3e\x3cdiv class\x3d"loading_small hide"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"j_mesmore common-more hide"\x3e\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"no-result hide"\x3e\u65e0\u76f8\u5173\u6570\u636e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"guide-div" class\x3d"nodata-holder mt-70 j_noMesInfo hide"\x3e\x3cdiv\x3e\x3ci class\x3d"ico message"\x3e\x3c/i\x3e\x3ch4\x3e\u6682\u65f6\u6ca1\u6709\u6d88\u606f\u54e6\uff01\x3c/h4\x3e\x3cp class\x3d"small"\x3e\u6d88\u606f\uff0c\u8ba9\u60a8\u53ca\u65f6\u63a5\u6536\u5e76\u5904\u7406\u4e8b\u9879\uff0c\u63d0\u9ad8\u5185\u90e8\u5de5\u4f5c\u6548\u7387\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"j_mesItemBoxClone" class\x3d"message-item j_mesitem"\x3e\x3cem class\x3d"j_status status"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3cimg class\x3d"j_avatar avatar usercard-toggle cs-p" src\x3d"images/avatar.png"\x3e\x3cdiv class\x3d"message-box"\x3e\x3cdiv class\x3d"hd mb-5"\x3e\x3ca class\x3d"j_user user bold c-grey usercard-toggle cs-p"\x3e\x3c/a\x3e\x3cdiv class\x3d"j_event event ds-i ml-5"\x3e\x3cspan class\x3d"text"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\u4e8b\u9879\u540d\u79f0\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_content content mb-5"\x3e\x3ca class\x3d"j_entityslider-toggle"\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"j_time"\x3e\x3ctime class\x3d"fs-12 c-999 date"\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_mesNormalBoxClone" class\x3d"message-item clearfix j_mesitem"\x3e\x3cem class\x3d"j_status status"\x3e\x3ci class\x3d"icon-envelope-alt"\x3e\x3c/i\x3e\x3c/em\x3e\x3cimg class\x3d"j_avatar avatar usercard-toggle cs-p hide" src\x3d"images/avatar.png"/\x3e\x3cdiv class\x3d"j_mesBox message-box"\x3e\x3cdiv class\x3d"hd mb-5"\x3e\x3ca class\x3d"j_user user bold c-grey usercard-toggle"\x3e\x3c/a\x3e\x3cdiv class\x3d"j_event event ds-i ml-5"\x3e\x3cspan class\x3d"j_text text"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\x3c/a\x3e\x3c/span\x3e\x3cspan id\x3d"j_optbtn" class\x3d\'ml-10 ds-ibm hide\'\x3e\x3ca class\x3d\'btn btn-xs btn-success w-50\'\x3e\u63a5\u53d7\x3c/a\x3e\x3ca class\x3d\'btn btn-xs btn-danger w-50 ml-10\'\x3e\u62d2\u7edd\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"j_content content mb-5"\x3e\x3ca class\x3d\'router j_entityslider-toggle hide\' data-id\x3d\'\' data-module\x3d\'\'\x3e\u4e8b\u9879\u540d\u79f0\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e\x3ctime class\x3d"fs-12 c-999 date j_date"\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.dynachannel":'\x3cdiv id\x3d"j_all-dynamic" class\x3d"scrollwrapper mCus-mh100"\x3e\x3cdiv class\x3d"i-dynamic-post clearfix" id\x3d"j_dynamic-post"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_dyna-card-list i-dynamic-card-view"\x3e\x3c/div\x3e\x3cdiv class\x3d"j_card-loading i-dynamic-loading mh-20 mb-20"\x3e\x3cspan\x3e\u6570\u636e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_loadedAll hide"\x3e\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210\x3c/div\x3e\x3cdiv class\x3d"common-nodata j_nodata hide"\x3e\u6ca1\u6709\u53ef\u663e\u793a\u7684\u5185\u5bb9\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"blog-atta-image-clone" class\x3d"js_blog_atta_image hide"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"dynamic-card" class\x3d"i-dynamic-card j_dyna-card"\x3e\x3cdiv class\x3d"avatar j_avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"card-detail"\x3e\x3cdiv class\x3d"info ellipsis"\x3e\x3ca class\x3d"usercard-toggle bold c-666 j_name"\x3e\x3c/a\x3e\x3cspan class\x3d"event j_event"\x3e\x3c/span\x3e\x3cspan class\x3d"j_new new hide"\x3eNEW\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"text j_content"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogallfiles"\x3e\x3cdiv class\x3d"js_blogfiles entity-container attachment" data-url\x3d"/blog/deleteAttachments/{id}.json"\x3e\x3c/div\x3e\x3cdiv class\x3d"js_blogimgs"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"status"\x3e\x3cdiv class\x3d"opt fr j_opt"\x3e\x3cspan class\x3d"a-feedback j_feedback"\x3e\x3cspan class\x3d"j_tip_feedback"\x3e\u8bc4\u8bba\x3c/span\x3e(\x3cem\x3e0\x3c/em\x3e)\x3ci class\x3d"arr"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan class\x3d"j_like j_a-like"\x3e\x3cspan class\x3d"j_praise"\x3e\x3ci class\x3d"graph arr"\x3e\x3c/i\x3e\x3ci class\x3d"icon-thumbs-up"\x3e\x3c/i\x3e(\x3cem\x3e0\x3c/em\x3e)\x3c/span\x3e\x3cdiv class\x3d"like-pop j_like-pop"\x3e\x3cul class\x3d"like-avatars j_like-avatars"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e\x3ctime\x3e1900-01-01 00:00:00\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"i-like-wrapper j_more-wrapper hide"\x3e\x3cul class\x3d"like-avatars j_like-wrapper"\x3e\x3c/ul\x3e\x3cdiv class\x3d"like-pager j_like-pager"\x3e\x3cul class\x3d"pagination pagination-sm"\x3e\x3cli class\x3d"disabled j_last_page j_change_page"\x3e\x3ca title\x3d"\u4e0a\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-left"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"j_next_page j_change_page"\x3e\x3ca title\x3d"\u4e0b\u4e00\u9875"\x3e\x3ci class\x3d" icon-chevron-right"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"card-feed hide"\x3e\x3cdiv class\x3d"feed-post clearfix"\x3e\x3cdiv class\x3d"avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-input-wrap j_feedWrap"\x3e\x3cdiv class\x3d"feed-input j_feedInput"\x3e\x3ctextarea class\x3d"form-control form-block j_feedAuto" placeholder\x3d"\u8bc4\u8bba..." style\x3d"overflow: hidden; word-wrap: break-word; resize: none; height: 40px;"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"j_feedBtn feed-btn"\x3e\x3ca class\x3d"send btn btn-xs fr btn-info"\x3e\u63d0\u4ea4\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cul class\x3d"feed-list j_feed-list hide"\x3e\x3c/ul\x3e\x3cdiv class\x3d"loading_small hide j_loading"\x3e\x3cspan\x3e\u52a0\u8f7d\u4e2d...\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"common-more nomg hide j_more"\x3e\u52a0\u8f7d\u66f4\u591a\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cli id\x3d"dyna-feed-item" class\x3d"list-item j_dyna-feed-item"\x3e\x3cdiv class\x3d"avatar usercard-toggle"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"hd"\x3e\x3ca class\x3d"name usercard-toggle"\x3e\u5eb7\u6653\u9e3d\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content"\x3eabcdefg\u6d4b\u8bd5\x3c/div\x3e\x3cdiv class\x3d"comment-attachment entity-container attachment clearfix" undeleteable\x3d"true"\x3e\x3c/div\x3e\x3cspan class\x3d"parent-comment-body hide"\x3e\u56de\u590d\x3ca class\x3d"parent-username router usercard-toggle" title\x3d"\u6d4b\u8bd5\u53f7" userid\x3d"1553409649410197073" style\x3d"display: inline;"\x3e@\u6d4b\u8bd5\u53f7: \x3c/a\x3e\x3cspan class\x3d"parent-content ellipsis" title\x3d"\u6d4b\u8bd5\u4e0a\u4f20\u590d\u4f4d\u952e"\x3e\u6d4b\u8bd5\u4e0a\u4f20\u590d\u4f4d\u952e\x3c/span\x3e\x3c/span\x3e\x3cdiv class\x3d"ft"\x3e\x3cdiv class\x3d"action fr"\x3e\x3cspan class\x3d"j_item-feedback"\x3e\u56de\u590d\x3c/span\x3e\x3c/div\x3e\x3ctime\x3e1900-01-01 00:00:00\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-post clearfix hide"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/div\x3e\x3cdiv class\x3d"feed-input-wrap j_feedWrap"\x3e\x3cdiv class\x3d"feed-input j_feedInput"\x3e\x3ctextarea class\x3d"form-control form-block j_feedAuto" placeholder\x3d"\u56de\u590d" style\x3d"overflow: hidden; word-wrap: break-word; resize: none; height: 40px;"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"j_feedBtn feed-btn"\x3e\x3ca class\x3d"send btn btn-xs fr btn-info"\x3e\u56de\u590d\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/li\x3e\x3c/div\x3e',
"portal.chatchannel":'\x3cdiv class\x3d"i-chat-view"\x3e\x3cdiv class\x3d"chat-push hide"\x3e\x3cdiv class\x3d"item"\x3e\x3ci\x3e\x26laquo;\x3c/i\x3e0\u6761@\u6211\u7684\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3ci\x3e\x26laquo;\x3c/i\x3e0\u6761\u65b0\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d"item"\x3e\x3ci\x3e\x26laquo;\x3c/i\x3e0\u6761\u6a21\u5757\u6d88\u606f\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-message-list j_chatpostScr scrollwrapper" marginbottom\x3d"178"\x3e\x3cdiv id\x3d"chatMessageList"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-editor"\x3e\x3cdiv class\x3d"tool-bar j_portalchat_tool"\x3e\x3cdiv class\x3d"a-tools fl"\x3e\x3ca id\x3d"chat-image-mini" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u8bf7\u9009\u62e9\u56fe\u7247" class\x3d"a-pic"\x3e\x3ci class\x3d"icon-image2"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca id\x3d"chat-attachment" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"\u8bf7\u9009\u62e9\u9644\u4ef6" class\x3d"a-attach"\x3e\x3ci class\x3d"icon-paperclip"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e\x3ca id\x3d"chat-history" class\x3d"a-his fr"\x3e\x3ci class\x3d"icon-history icoinline"\x3e\x3c/i\x3e\u804a\u5929\u8bb0\u5f55\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3ctextarea id\x3d"j_message-textarea" class\x3d"area"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"action-bar j_actionbar"\x3e\x3cdiv class\x3d"fl"\x3e\x3cspan class\x3d"j_key-tip key-tip c-666"\x3e\x3ci class\x3d"icon-exclamation-sign icoinline"\x3e\x3c/i\x3e\u6309Ctrl+Enter\u952e\u53d1\u9001\x3c/span\x3e\x3c/div\x3e\x3cul class\x3d"toolkit-list send-btns fr"\x3e\x3cli class\x3d"toolkit-item dropdown-arrow fr"\x3e\x3cdiv class\x3d"btn-group dropdown dropdown-menu-toggle"\x3e\x3ca class\x3d"dropdown-toggle btn btn-sm btn-primary"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/a\x3e\x3cul class\x3d"dropdown-menu dropdown-menu-right border-dropdown j_sendType_menu"\x3e\x3cli data-type\x3d"Enter"\x3e\x3ca class\x3d"sendType"\x3e\x3ci class\x3d"icon-checkmark"\x3e\x3c/i\x3e\x3cspan\x3e\u6309Enter\u53d1\u9001\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3cli data-type\x3d"CtrlEnter" class\x3d"active"\x3e\x3ca class\x3d"sendType"\x3e\x3ci class\x3d"icon-checkmark"\x3e\x3c/i\x3e\x3cspan\x3e\u6309Ctrl+Enter\u53d1\u9001\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/li\x3e\x3cli class\x3d"toolkit-item fr mr-0 dropdown-arrow-pre"\x3e\x3ca class\x3d"btn btn-sm w-60 btn-primary j_btn-send"\x3e\u53d1\u9001\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cspan id\x3d"limitTip" class\x3d"limit-tip c-999 fr mr-10"\x3e\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"hide"\x3e\x3cdiv id\x3d"j_chatBox_clone" class\x3d"chat-message"\x3e\x3cdiv class\x3d"avatar cs-p"\x3e\x3cimg class\x3d"usercard-toggle" src\x3d"images/avatar.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-content"\x3e\x3cdiv class\x3d"j_name name usercard-toggle cs-p"\x3e\x3c/div\x3e\x3cdiv class\x3d"bubble"\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-time"\x3e\x3ci class\x3d"icon-time mr-3"\x3e\x3c/i\x3e\x3ctime\x3e\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"j_dataLineClone" class\x3d"date-divider"\x3e\x3cdiv class\x3d"line"\x3e\x3c/div\x3e\x3cspan\x3e2015-10-12\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"j_addGroupClone" class\x3d"chat-system-hint"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"j_exitGroupClone" class\x3d"chat-system-hint"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"j_noSpeakGroupClone" class\x3d"chat-system-hint"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-message right"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-content"\x3e\x3cdiv class\x3d"name usercard-toggle"\x3e\x3c/div\x3e\x3cdiv class\x3d"bubble bubble-transmit"\x3e\x3cdiv class\x3d"clearfix"\x3e\x3cdiv class\x3d"cover"\x3e\x3cimg src\x3d"/static/img/mobile/chat/notice.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"info"\x3e\x3cp class\x3d"title"\x3e\u4e00\u7ad9\u5f0f\u7684\u56e2\u961f\u534f\u4f5c\u4e91\u5e73\u53f0\x3c/p\x3e\x3cp class\x3d"desc"\x3e\u968f\u65f6\u968f\u5730\u7684\u4e0e\u56e2\u961f\u6210\u5458\u5171\u540c\u63a8\u8fdb\u76ee\u6807\u6210\u679c\u3001\u4e86\u89e3\u6bcf\u4eba\u6bcf\u4e8b\u8fc7\u7a0b\u3001\u805a\u7126\u6bcf\u5929\u7684\u4e8b,\u8ddf\u8e2a\u6267\u884c\u8fc7\u7a0b\u3001\u8bb0\u5f55\u6210\u957f\u70b9\u6ef4\u3001\u56e2\u961f\u5b9e\u65f6\u5206\u4eab\u3001\u6241\u5e73\u5316\u901a\u529b\u534f\u4f5c\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"extra"\x3e\x3cspan class\x3d"italic fl"\x3e\u8f6c\u53d1\x3c/span\x3e\x3cspan class\x3d"fr"\x3e\u67e5\u770b\u8be6\u60c5\x3ci\x3e\x26gt;\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-time"\x3e\x3ci class\x3d"icon-time"\x3e\x3c/i\x3e\x3ctime\x3e14:25:48\x3c/time\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-source hide"\x3eeteams\u5b98\u7f51\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-message"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-content"\x3e\x3cdiv class\x3d"name usercard-toggle"\x3e\u5218\u66fc\x3c/div\x3e\x3cdiv class\x3d"bubble bubble-records"\x3e\x3cdiv class\x3d"info"\x3e\x3cdiv class\x3d"graph task"\x3e\x3c/div\x3e\x3cdiv class\x3d"title"\x3e\u90e8\u5206\u6d88\u606f\u63d0\u9192\u4f8b\u5982\u672a\u8bfb\u4e8b\u9879\u3001\u65b0\u5b8c\u6210\u4e8b\u9879\u3001\u672a\u8bfb\u53cd\u9988\uff0c\u53ef\u4ee5\u91c7\u7528\u5982\u5173\u6ce8\u7533\u8bf7\u4e00\u6837\u7684\u63d0\u793a\u8bed\u65b9\u5f0f\u90e8\u5206\u6d88\u606f\u63d0\u9192\u4f8b\u5982\u672a\u8bfb\u4e8b\u9879\u3001\u65b0\u5b8c\u6210\u4e8b\u9879\u3001\u672a\u8bfb\u53cd\u9988\uff0c\u53ef\u4ee5\u91c7\u7528\u5982\u5173\u6ce8\u7533\u8bf7\u4e00\u6837\u7684\u63d0\u793a\u8bed\u65b9\u5f0f\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"extra"\x3e\x3cspan class\x3d"italic fl"\x3e\u4efb\u52a1\x3c/span\x3e\x3cspan class\x3d"fr"\x3e\u67e5\u770b\u8be6\u60c5\x3ci\x3e\x26gt;\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-time"\x3e\x3ci class\x3d"icon-time"\x3e\x3c/i\x3e\x3ctime\x3e14:25:48\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-message right"\x3e\x3cdiv class\x3d"avatar"\x3e\x3cimg src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-content"\x3e\x3cdiv class\x3d"name usercard-toggle"\x3e\x3c/div\x3e\x3cdiv class\x3d"bubble bubble-records"\x3e\x3cdiv class\x3d"info"\x3e\x3cdiv class\x3d"graph flow"\x3e\x3c/div\x3e\x3cdiv class\x3d"title"\x3e\u8bf7\u5927\u5bb6\u6bcf\u5929\u591a\u7528\u6211\u4eec\u81ea\u5df1\u7684\u7cfb\u7edf\u5e76\u53ca\u65f6\u67e5\u9605\u6d88\u606f\u548c\u5904\u7406\u6389\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"extra"\x3e\x3cspan class\x3d"italic fl"\x3e\u6d41\u7a0b\x3c/span\x3e\x3cspan class\x3d"fr"\x3e\u67e5\u770b\u8be6\u60c5\x3ci\x3e\x26gt;\x3c/i\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"chat-time"\x3e\x3ci class\x3d"icon-time"\x3e\x3c/i\x3e\x3ctime\x3e14:25:48\x3c/time\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
"portal.chatdoc":'\x3cdiv id\x3d"i-groupchat-file"\x3e\x3cdiv class\x3d"card p-20 m-20 bold c-666 fs-16 ta-c"\x3e\u7fa4\u804a-\u6587\u4ef6\u5185\u5bb9\u5f85\u5b9a\x3c/div\x3e\x3c/div\x3e'}});
define("teams/component/atmeview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.$input=e.$input;this.clickHandler=e.clickHandler;this.remote=e.remote||"/search/suggestion.json";this.el="#atdiv";this.hiddenHtml='\x3cdiv id\x3d"autoTalkBox" style\x3d"z-index:-2000;top:$top$px;left:$left$px;width:$width$px;height:$height$px;position:absolute;scroll-top:$SCTOP$px;overflow:hidden;overflow-y:auto;visibility:hidden;word-break:break-all;word-wrap:break-word;*letter-spacing:0.6px;"\x3e\x3cspan id\x3d"autoTalkText"\x3e\x3c/span\x3e\x3c/div\x3e';this.positionHTML=
'\x3cspan id\x3d"autoUserTipsPosition"\x3e\x26nbsp;123\x3c/span\x3e'},render:function(){var e=this.$input[0].getBoundingClientRect(),c=this.$input[0].offsetWidth,b=this.$input[0].offsetHeight,a=this.hiddenHtml.slice();$("body").append(a);$("#autoTalkBox").css({top:e.top,left:e.left,width:c,height:b,SCTOP:"0"});this.delegateEvents()},delegateEvents:function(){var e=this,c=$(e.el),b=e.$input;$(window).off("resize.at").on("resize.at",function(a){if(null!=$("#autoTalkText")[0]){var d;try{d=e.$input[0].getBoundingClientRect()}catch(g){return}a=
e.$input[0].offsetWidth;var l=e.$input[0].offsetHeight;$("#autoTalkBox").css({top:d.top,left:d.left,width:a,height:l,SCTOP:"0"});d=e.getCursorPosition(b);if(!d)return e.hide();d=b.val().slice(0,d);$("#autoTalkText")[0].innerHTML=d.slice(0,d.length).replace(/\n/g,"\x3cbr/\x3e").replace(/\s/g,"\x26nbsp;")+e.positionHTML;d=$("#autoUserTipsPosition")[0].getBoundingClientRect();a=window.navigator.userAgent.toLowerCase();/msie 9\.0/i.test(a)?(document.getElementById("atdiv").style.top=d.top+1+"px",document.getElementById("atdiv").style.left=
d.left-5+"px"):c.css({top:d.top+1+"px",left:d.left-5+"px"})}});b.off("focusin.at").on("focusin.at",function(a,b){b||($("[id\x3datdiv]").each(function(){$(this).remove()}),$("[id\x3dautoTalkBox]").each(function(a){$(this).remove()}),$("body").append('\x3cdiv id\x3d"atdiv" class\x3d"controls hide" style\x3d"position: absolute;z-index:9999;"\x3e'+f.template("component.typeahead")+"\x3c/div\x3e"))});b.off("click.at").on("click.at",function(a){b.trigger("keyup.at")});b.off("keydown.at").on("keydown.at",
function(a){var b=(a||window.event).keyCode;if((38==b||40==b)&&c.find("#typeahead-div p").hasClass("employee"))return e.preventEvent(a),!1;13==b&&c.find("#typeahead-div p").hasClass("active")&&e.preventEvent(a)});$("body").not(b).not(c).off("click.at").on("click.at",function(a){e.hide()});b.off("keyup.at").on("keyup.at",function(a){var d=e.$input[0].getBoundingClientRect();d&&$("#autoTalkBox").css({top:d.top});a=(a||window.event).keyCode;if(13==a)c.find("#typeahead-div p.active").trigger("click.at");
else if(27==a)e.hide();else if(38==a)a=c.find("#typeahead-div p.active"),1>a.length?c.find("#typeahead-div p").last().addClass("active"):(a.removeClass("active"),(0<a.prev().length?a.prev():c.find("#typeahead-div p").last()).addClass("active"));else if(40==a)a=c.find("#typeahead-div p.active"),1>a.length?c.find("#typeahead-div p").first().addClass("active"):(a.removeClass("active"),(0<a.next().length?a.next():c.find("#typeahead-div p").first()).addClass("active"));else{d=e.getCursorPosition(b);if(!d)return e.hide();
a=b.val().slice(0,d);$("#autoTalkText")[0].innerHTML=a.slice(0,a.length).replace(/\n/g,"\x3cbr/\x3e").replace(/\s/g,"\x26nbsp;")+e.positionHTML;var g=a.slice(-a.length);g.match(/(\w+)?@(\w+)$|@$/);if(g&&-1!=g.indexOf("@")&&$.trim(g.substr(-1))){if(-1==g.substr(g.lastIndexOf("@"),d).indexOf(" ")){d=g.substr(g.lastIndexOf("@"));e.search($.trim(d.replace("@","")));c.removeClass("hide");var d=$("#autoUserTipsPosition")[0].getBoundingClientRect(),g=window.navigator.userAgent.toLowerCase(),l=b.data("left")||
0,f=b.data("top")||0,k=0;"true"==b.attr("isoffsetpx")&&(a=a.split("\n").length,1<a&&(k=b.data("offsetpx")||0,1<=g.indexOf("firefox")&&0!=k&&(k+=1),k*=a-1));/msie 9\.0/i.test(g)?(document.getElementById("atdiv").style.top=d.top+1+f+k+"px",document.getElementById("atdiv").style.left=d.left-5+l+"px"):c.css({top:d.top+1+f+k+"px",left:d.left-5+l+"px"})}c.removeClass("hide")}else return e.hide()}});c.off("click.at","#typeahead-div p").on("click.at","#typeahead-div p",function(a){var d=$(this).data("obj");
if(e.clickHandler)e.clickHandler(d,b);else{var g=e.getCursorPosition(b);a=e.$input.data("userData");var l=d.id,d=d.name,f=d+" ",k=e.$input.val(),r=0,p="",s="";if(k&&(p=k.substr(0,g))){for(var r=p.length,s=p.split("@"),h="",p=0;p<s.length;p++)h=0==p?h+s[p]:p!=s.length-1?h+"@"+s[p]:h+"@";s=h+f+k.substr(g)}g={userId:l,userName:d,atIndex:r};if(a)for(p=0;p<a.length;p++)r<=a[p].atIndex&&(l=a[p].atIndex+("@"+d+" ").length,console.log(l),a[p].atIndex=l);else a=[];a.push(g);e.$input.val("").focus().val(s);
e.$input.data("userData",a);e.$input.focus();$("body").find(c).addClass("hide");e.hide()}})},preventEvent:function(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1;e.stopPropagation()},getCursorPosition:function(e){if(document.selection&&document.selection.length){e.focus();var c=null,c=document.selection.createRange(),b=c.duplicate();b.moveToElementText(e[0]);b.setEndPoint("EndToEnd",c);e[0].selectionStart=b.text.length-c.text.length;e[0].selectionEnd=e[0].selectionStart+c.text.length}return e[0].selectionStart},
search:function(e){var c=this,b=$(c.el);this.suggestion=e;this.entity="employee";b.find("#typeahead-div .loading_small").addClass("employee").show();var a=c.remote,d={};2<escape(e).length&&(d.keywords="%"+e);d.searchType="employee";$.ajax({type:"get",url:a,dataType:"json",data:d,success:function(a){a=a.employees;b.find("#typeahead-div .loading_small").hide();10<a.length&&a.push({id:"all",name:e,module:"all"});c.loadList(a)}})},loadList:function(e){var c=$(this.el);c.find("#typeahead-div #searchList").empty();
suggestion=this.suggestion;entity=this.entity;if(e){if(suggestion&&2<escape(suggestion).length)for(var b=0,a=e.length;b<a;b++){var d=e[b];if((d.name||d.username)==suggestion)break}b=0;for(a=e.length;b<a;b++){d=e[b];d.createTime=Date.create(d.createTime).format("{yyyy}-{MM}-{dd}");d.name=d.name.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace("/[\r\n]/g"," ");var g=f.template("suggestion."+entity,d),g=$($.trim(g));g.data("obj",d);d.avatar&&d.avatar.p5&&g.find(".avatar").attr("src","/base/download/"+
d.avatar.p5);c.find("#typeahead-div #searchList").append(g)}this.show()}},hide:function(){var e=$(this.el);e.find("#typeahead-div p").remove();e.find("#typeahead-div").hide();e.addClass("hide")},show:function(){var e=$(this.el);e.find("#typeahead-div").show();e.removeClass("hide")},resetPostion:function(){var e=$(this.el);$target=this.$input;var c=$target.offset().top,b=$target.offset().left;e.css({left:b+"px",top:c+"px"})},remove:function(){}});m.exports=h});
define("teams/component/shareview",["teams/utils","teams/component/typeahead","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/sharemodel");h=Backbone.View.extend({partEl:"",shareEl:"",initialize:function(b){this.parentEl=b.parentEl;this.partEl=this.parentEl+" "+b.partContainer;this.shareEl=this.parentEl+" "+b.shareContainer;this.entityId=b.entityId;this.serverPath=b.serverPath;this._module=b.module;this.model=new c({entityIds:this.entityId,
module:this._module,serverPath:this.serverPath});b.partContainer&&$(this.partEl).html(f.template("share.simpleshare",{panel:"participants"}));$(this.shareEl).html(f.template("share.simpleshare",{panel:"share"}));"calendar"==this._module&&($(this.shareEl).find(".control-label").html('\x3ci class\x3d"graph graph-16-mans"\x3e\x3c/i\x3e\u53c2\u4e0e\u4eba\u5458:'),$(this.shareEl).find("#editShare").addClass("acl-hide"))},delegateEvents:function(){var b=this;$(b.shareEl).off("click",".j_more_show").on("click ",
".j_more_show",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(b.shareEl+" #"+d).children(".j_entity_item").show()});$(b.partEl).off("click",".j_more_show").on("click ",".j_more_show",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(b.partEl+" #"+d).children(".j_entity_item").show()});$(b.shareEl).off("click",".j_more_hide").on("click ",".j_more_hide",
function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.shareEl+" #"+d).find(".j_entity_item:lt(5)").show();$(b.shareEl+" #"+d).find(".j_entity_item:gt(4)").hide()});$(b.partEl).off("click",".j_more_hide").on("click ",".j_more_hide",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.partEl+" #"+d).find(".j_entity_item:lt(5)").show();$(b.partEl+
" #"+d).find(".j_entity_item:gt(4)").hide()});$(b.shareEl).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))});$(b.partEl).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))});$(b.shareEl).find("#share-select").change(function(){val=$(this).val();"secLevel"==val?($(".sharetype-dept").addClass("hide"),$(".sharetype-user").addClass("hide"),b.save(val,[{id:0}],
"sharer")):"department"==val?($(".sharetype-dept").removeClass("hide"),$(".sharetype-user").addClass("hide")):"user"==val&&($(".sharetype-dept").addClass("hide"),$(".sharetype-user").removeClass("hide"))});e([{el:b.shareEl+" .sharetype-dept input",callback:function(a){b.save("department",[a],"sharer")}},{el:b.shareEl+" .sharetype-user input",callback:function(a){b.save("user",a,"sharer");if(a)if(0<a.length)for(var d=0,c=a.length;d<c;d++)b.renderTypeheadCallback("#shareentrys",a[d]);else b.renderTypeheadCallback("#shareentrys",
a)}}]);this.partEl&&e({el:b.partEl+" #typeahead-participants",callback:function(a){b.save("user",a,"participants");if(a)if(0<a.length)for(var d=0,c=a.length;d<c;d++)b.renderTypeheadCallback("#participants",a[d]);else b.renderTypeheadCallback("#participants",a)}})},deleteEvent:function(b){var a=this,d=b.prevAll("a").attr("id"),c=b.prevAll("a").attr("data-value"),e=b.parents(".entity-container"),n=e.attr("data-url");if(n&&c){var k=b.parent(),r=e.data("param")||{};r._method="delete";var p=a.serverPath||
"";b=function(b){b&&$.ajax({type:"POST",dataType:"json",data:r,url:p+n.replace("{id}",c),success:function(b){k.remove();e.trigger("removeEntity",b);$("#stream").trigger("insertStream",b.streams||b.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");a.callbacks&&a.callbacks.unlink&&a.callbacks.unlink(c,b.streams||b.stream)}})};e.attr("data-noConfirm")?b(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",b)}else b.parent().hasClass("tag")||(b.parent(".entity-item").remove(),
e.trigger("removeEntity",d))},renderTypeheadCallback:function(b,a){var d=a.avatar&&a.avatar.p5&&"/base/download/"+a.avatar.p5||"images/avatar.png",c="\x3cimg class\x3d'avatar' src\x3d'"+d+"' /\x3e";$(b).find("#"+a.id+" img").attr("src")?$(b).find("#"+a.id+" img").attr("src",d):$(b).find("#"+a.id).prepend($(c))},render:function(b,a){var d=this.model,c=this;c.entityId&&(a?d.query(function(a){c.createShareEntryLink(a.shareEntrys);c.shareEntrys=a.shareEntrys}):(c.shareEntrys=b,c.createShareEntryLink(b)));
c.renderMoreType("#participants");c.renderMoreType("#shareentrys")},renderMoreType:function(b){if(b){var a=$(this.parentEl).find(b).children(),d=a.length;if(5<d){for(var c=5;c<d;c++)$(a[c]).hide();$(this.parentEl).find(b).find(".j_more_btn").remove();a=b&&1<b.length&&b.substr(1)||"";a='\x3cspan class\x3d"j_more_btn"\x3e\x3cspan class\x3d"j_more_show" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_more_hide hide" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u6536\u8d77\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e';
$(this.parentEl).find(b).append(a)}}},save:function(b,a,d){var c=this,e=this.model;if(a&&!$.isEmptyObject(a))if(1==$(this.shareEl).find("#shareentrys #0").length)f.notify("\u5df2\u5171\u4eab\u7ed9\u6240\u6709\u4eba,\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0");else{var n="";a=$.isArray(a)?a:[a];for(var k=[],r=0;r<a.length;r++){var p=a[r];if("sharer"==d){if(c.hasUser(p.id,$(c.shareEl).find("#shareentrys")))continue}else if("participants"==d&&c.hasUser(p.id,$(c.partEl)))continue;n+=p.id+",";k.push({sid:p.id,
name:p.name,shareType:d})}n=n.substring(0,n.length-1);e.sids=n;e.entryType=b;e.shareType=d;c.shareEntrys||(c.shareEntrys=[]);c.entityId?e.saveAll(function(a){c.createShareEntryLink(a.shareEntrys);c.shareEntrys.add(a.shareEntrys);"sharer"==d&&(a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5df2\u6dfb\u52a0\u5171\u4eab\u4eba"));"participants"==d&&(a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5df2\u6dfb\u52a0\u53c2\u4e0e\u4eba"));$(c.parentEl).find("#stream").trigger("insertStream",
a.streams);$(c.parentEl).find("#readinfo").trigger("insertReadInfo",[c.entityId,c.shareEntrys])}):(c.createShareEntryLink(k),c.shareEntrys.push(k))}},createShareEntryLink:function(b){if(b)for(var a=0;a<b.length;a++){var d=b[a],c=d.shareType,e="";if("sharer"==c){0==d.sid&&$(this.shareEl).find("#shareentrys").empty();if(this.hasUser(d.sid,$(this.shareEl).find("#shareentrys")))continue;$(this.shareEl).removeClass("hide");$(this.parentEl).find($(this.shareEl).attr("icon")).addClass("hide");e="#shareentrys";
$(this.parentEl).find($(this.shareEl).attr("icon")).parent().addClass("hide")}else if("participants"==c){if(this.hasUser(d.sid,$(this.partEl)))continue;$(this.partEl).removeClass("hide");e="#participants";$(this.parentEl).find($(this.partEl).attr("icon")).parent().addClass("hide")}d.id||(d.id=d.sid,$(this.parentEl).find(e).attr("data-url",""));c='\x3cspan class\x3d"entity-item j_entity_item"\x3e \x3ca class\x3d"usercard-toggle" id\x3d"'+d.sid+'" data-value\x3d"'+d.id+'" userId\x3d"'+d.sid+'"\x3e\x3cspan class\x3d"j_shareEntry_name"\x3e'+
d.name+"\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e";0<$(this.parentEl).find(e+" .j_more_btn").length&&""!=e?$(this.parentEl).find(e+" .j_more_btn").before(c):$(this.parentEl).find(e).append(c);this.renderShareEmpImg(d,$(this.parentEl).find(e))}},renderShareEmpImg:function(b,a){if(b.shareEmp){var d=b.shareEmp,d="\x3cimg class\x3d'avatar' src\x3d'"+(d.avatar&&d.avatar.p5&&"/base/download/"+d.avatar.p5||"images/avatar.png")+"' /\x3e";a.find("#"+b.sid).prepend($(d))}else a.find("#"+b.sid+" .j_shareEntry_name").removeClass("hide")},
findEmployeeId:function(){var b="";if(this.shareEntrys)for(var a=0;a<this.shareEntrys.length;a++)b+=this.shareEntrys[a].sid+",";return b},getLinkIds:function(){var b=[];$(this.shareEl).find(".entity-item").each(function(){b.push($(this).find("a").attr("data-value"))});return b},hasUser:function(b,a){var d=!1;a.find("a").each(function(){var a=$(this).attr("userid");parseInt(a)==parseInt(b)&&(d=!0)});return d}});m.exports=h});
define("teams/component/sharemodel",function(h,q,m){h=Backbone.Model.extend({id:1,entityId:1,entityIds:"",sids:"",shareType:"sharer",original:!1,initialize:function(f){this.entityId=f.entityId;this.entityIds=f.entityIds;this.serverPath=f.serverPath?f.serverPath:"";this._module=f.module},save:function(f){$.ajax({type:"post",url:this.serverPath+"/share/editUser.json",dataType:"json",data:{sids:this.sids,entityIds:this.entityIds,entryType:this.entryType,module:this._module,shareType:this.shareType},
success:function(e){f&&f(e)}})},saveAll:function(f){$.ajax({type:"post",url:this.serverPath+"/share/addUser.json",dataType:"json",data:{sids:this.sids,entityIds:this.entityIds,entryType:this.entryType,module:this._module,shareType:this.shareType},success:function(e){f&&f(e)}})},saveAllSearch:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:this.serverPath+"/share/addUser.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveShareAll:function(f,e){$.ajax({type:"post",
url:this.serverPath+"/share/shareAll.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},getProcess:function(f,e){$.ajax({type:"post",url:this.serverPath+"/share/getBatchShareProcess.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},query:function(f){$.ajax({type:"get",url:this.serverPath+"/share/"+this.entityId+".json",dataType:"json",success:function(e){f&&f(e)}})},querySuperior:function(f,e){$.ajax({type:"get",url:"/users/superiors.json",data:{userIds:f.join(",")},dataType:"json",
success:function(c){e(c)}})}});m.exports=h});
define("teams/component/batchselector",["teams/utils","teams/component/typeahead","teams/component/shareallmultiselect","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/component/shareallmultiselect"),c=h("teams/component/sharemodel");h=Backbone.View.extend({initialize:function(b){this.module=b.module;this.entityIdArr=b.entityIdArr;this.serverPath=b.serverPath;this.el="#batchselectormodal";$("body").append(f.template("component.batchselector"));
this.model=new c({entityIds:this.entityIdArr,module:this._module,serverPath:this.serverPath});this.multiSelectView=new e({module:b.module,shareContainer:"#editShare",parentEl:this.el,addBack:this.addBack,removeBack:this.removeBack,groupContainer:"#shareentrys",depContainer:"#shareentrys",userContainer:"#shareentrys"})},delegateEvents:function(){var b=this;$(b.el).off("click.batchselect","#btn-save").on("click.batchselect","#btn-save",function(){b.save()});$(b.el).off("click.batchselect","#btn-cancle").on("click.batchselect",
"#btn-cancle",function(){b.remove()})},render:function(){$("#batchselectormodal").modal("toggle");this.multiSelectView.render()},addBack:function(b,a){$(this.parentEl).find("#js_usersCount").html($(this.parentEl).find("#shareentrys .entity-item").length)},removeBack:function(b){b.parent().remove();$(this.parentEl).find("#js_usersCount").html($(this.parentEl).find("#shareentrys .entity-item").length)},save:function(){if(0==$(this.el).find("#shareentrys .entity-item").length)f.notify("\u8bf7\u9009\u62e9\u5171\u4eab\u8005!");
else{var b={},a=this.multiSelectView.getUserIds(),d=this.multiSelectView.getDepartmentIds(),c=this.multiSelectView.getGroupIds();0<$(this.el).find("#shareentrys .entity-item .all").length&&(b.entryType="all");b.shareType="sharer";b.module=this.module;b.entityIds=this.entityIdArr;b.sids=a;b.departmentIds=d;b.groupIds=c;$(this.el).find("#btn-cancle").click();$("body").append(f.template("component.processbar"));$(this.el).off("click.batchselect","#processModalClose").on("click.batchselect","#processModalClose",
function(){$("#processModal").remove()});this.processBar();this.model.saveShareAll(b,this.saveBack)}},saveBack:function(b){clearInterval(window.processBarTimer);$("#processModal").remove();b.msg?f.notify(b.msg):f.notify("\u6279\u91cf\u5171\u4eab\u5b8c\u6210!")},processBar:function(){var b={},a=this;window.processBarTimer=window.setInterval(function(){a.model.getProcess(b,a.updateProcess)},1E3)},updateProcess:function(b){var a=b.map.now/b.map.count;$("#processModal").find("#processNum").css("width",
100*a.toFixed(2)+"%");$("#processModal").find("#processNum").html(b.map.now+"/"+b.map.count);if(1<=a||!b.map.count)clearInterval(window.processBarTimer),$("#processModal").remove()},remove:function(){$(this.el);$(this.el).off(".batchselect");this.multiSelectView&&(this.multiSelectView.remove(),this.multiSelectView=null);this.typeahead&&(this.typeahead.remove(),this.typeahead=null);this.ShareModel&&(this.ShareModel.remove(),this.ShareModel=null);$(this.el).empty();$(this.el).remove()}});m.exports=
h});
define("teams/component/watchmodel",function(h,q,m){h=Backbone.Model.extend({watch:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/watch/addAll.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},watchDelete:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/watch/deleteAll.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},watchOne:function(f,e){$.ajax({type:"post",dataType:"json",url:"/watch/"+f.id+".json",
data:f,success:function(c){e&&e(c)}})}});m.exports=h});define("teams/component/remindmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},sendRemind:function(f,e){$.ajax({type:"get",url:"/remind/send.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/entityremindmodel",function(h,q,m){h=Backbone.Model.extend({id:1,initialize:function(f){this.entityId=f.entityId;this.serverPath=f.serverPath?f.serverPath:"";this._module=f._module},loadEntityRemind:function(f){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:this.serverPath+"/entityremind.json",dataType:"json",data:{entityId:this.entityId,module:this._module},success:function(e){f&&f(e)}})},cancelRemind:function(f){$.ajax({type:"post",url:this.serverPath+
"/entityremind/cancelRemind.json",dataType:"json",data:{entityId:this.entityId,module:this._module},success:function(e){f&&f(e)}})},saveAllUsers:function(f,e,c,b,a,d){$.ajax({type:"post",url:this.serverPath+"/entityremind/saveAllUsers.json",dataType:"json",data:{entityId:this.entityId,module:this._module,creater:f,participants:e,primary:c,entityRemindTime:b,entityRemindType:a},success:function(a){d&&d(a)}})}});m.exports=h});
define("teams/component/streammodel",function(h,q,m){h=Backbone.Model.extend({page:{pageNo:1,pageSize:5},initialize:function(f){this.targetId=f.targetId;this.serverPath=f.serverPath||""},query:function(f){var e=this;$.ajax({type:"get",url:this.serverPath+"/stream/"+e.targetId+".json",dataType:"json",data:{pageNo:this.page.pageNo,pageSize:this.page.pageSize},success:function(c){e.page=c.page;f&&f(c)}})},findNewStream:function(f){$.ajax({type:"get",url:this.serverPath+"/stream/findNewStream.json",dataType:"json",
data:{id:this.targetId},success:function(e){f&&f(e)}})},readAll:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:this.serverPath+"/stream/readAll.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/shareoutmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},getShareOut:function(f,e){$.ajax({type:"get",url:"/shareout/queryShareout.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteByTarget:function(f,e){$.ajax({type:"get",url:"/shareout/deleteBytarget.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/usercard",["teams/component/usersummaryview"],function(h,q,m){var f=h("teams/component/usersummaryview");h=Backbone.View.extend({el:"#usercard",initialize:function(e){this.userId=e.userId;this.targetEl=e.targetEl;$("body").append('\x3cdiv id\x3d"usercard" class\x3d"usercard panel border-dropdown"\x3e\x3c/div\x3e')},delegateEvents:function(){var e=this;$("body").on("click.usercard",function(c){e.remove()});$("body").on("keyup.usercard",function(c){27==c.which&&e.remove()});
$("#usercard").on("click.usercard",".close",function(c){e.remove()});$("#usercard").on("click.usercard",function(c){var b=$(c.target);b.hasClass("router")||b.parent().hasClass("router")||b.hasClass("locus-toggle")||b.hasClass("upload-toggle")||b.hasClass("pwd-toggle")||c.stopPropagation()});$("#usercard").draggable({handle:".j_panel-head",containment:"parent"})},render:function(){var e=1*$(this.targetEl).height()+5,e=$(this.targetEl).offset().top+Math.max(e,25),c=$(this.targetEl).offset().left,b=
{};c+450>$(window).width()?b.right="5px":b.left=c+"px";e+461>$(window).height()&&461<e&&(e=$(this.targetEl).offset().top-461);b.top=e+"px";$("#usercard").css(b);this.usersummaryView=new f({userId:this.userId,container:"#usercard",hideVisit:!0,chardMode:!0});this.usersummaryView.render();$("#usercard").find(".j_panel-head").css("cursor","move")},remove:function(){this.usersummaryView&&(this.usersummaryView.remove(),this.usersummaryView=null);$("body").off(".usercard");$("#usercard").off(".usercard");
$("#usercard").remove()}});m.exports=h});
define("teams/component/inviteview",["teams/utils","teams/component/invitemodel","teams/component/validation"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/invitemodel"),c=h("teams/component/validation");h=Backbone.View.extend({initialize:function(b){this.username=b.username;this.$targetEl=b.$targetEl;this.callback=b.callback;this.el=b.container||"#user-invite";this.container=b.container||"body";this.type=b.type;this.inviteModel=new e;$(this.container).append(f.template("component.invite"))},delegateEvents:function(){var b=
this;$("#invite-modal").on("hidden.bs.modal",function(){b.remove()});$(b.el).on("click.invite","#invite-submit",function(a){var d=$(this),g=$(b.el).find('input[id\x3d"inputUsername"]');a=g.val();var e=g.attr("placeholder");a==e&&(a="");var n=$(b.el).find('input[id\x3d"inputEmail"]'),e=n.val(),k=n.attr("placeholder");e==k&&(e="");if(e&&!c.formValidateImm($(b.el).find(".form-invite")))return!1;""==e?f.notify("\u8bf7\u8f93\u5165\u5fc5\u586b\u9879"):(d.attr("disabled","true"),k={},k["inviteInfo.invitee"]=
a,k["inviteInfo.contact"]=e,b.inviteModel.saveInvite(k,function(a){d.removeAttr("disabled");a.inviteInfo&&""!=a.inviteInfo&&(a=a.inviteInfo,"success"==a.msgType?null==a.id?(f.notify(a.message),n.val(""),b.clearValue(g)):(f.notify("\u5df2\u9080\u8bf7 "+a.invitee+" \u52a0\u5165eteams"),b.callback&&b.callback(a),b.type&&(n.val(""),b.clearValue(g)),b.remove()):(f.notify(a.message),n.val(""),b.clearValue(g)))}))});$(b.el).on("click.invite","#invite-cancel",function(a){b.remove()});$(b.el).on("click.invite",
function(a){a.stopPropagation()});"inline"!=this.type&&($("body").on("click.invite",function(a){b.remove()}),$("body").on("keydown.invite",function(a){27==a.which&&b.remove()}))},render:function(){var b=this.$targetEl.offset().top+28,a=this.$targetEl.offset().left;a+240>$(window).width()&&(a-=220);$(this.el).css("left",a+"px").css("top",b+"px").css("z-index",2E3);$(this.el).find("input[name\x3d'username']").val(this.username).focus()},clearValue:function(b){b.val("");b.focus()},remove:function(){this.type||
($("body").off(".invite"),$(this.el).off(".invite"),$(this.el).remove())}});m.exports=h});
define("teams/component/readinfoview",["teams/utils","teams/component/streammodel","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/streammodel"),c=h("teams/component/sharemodel");h=Backbone.View.extend({el:"",initialize:function(b){this.container=b.container;this.el=(this.parentEl=b.parentEl)?this.parentEl+" "+this.container:this.container;this.targetId=b.targetId;this.model=new e({targetId:this.targetId});this.unreadModel=new c({entityId:this.targetId});
this.target=b.target;$(this.el).html(f.template("base.readinfo"))},delegateEvents:function(){var b=this;$(b.el).off("insertReadInfo").on("insertReadInfo","#readinfo",function(a,d,c){b.render()});$(b.el).off("updateReadInfo").on("updateReadInfo","#readinfo",function(a){b.render()})},render:function(){var b=this;$.ajax({type:"get",url:"/stream/readinfo.json",dataType:"json",data:{id:b.targetId,module:b.module},success:function(a){var d=a.empRead,c=$(b.el).find(".read-container");c.empty();for(var e=
0;e<d.length;e++){var f=d[e],k=$('\x3cdiv class\x3d"readinfo-box"\x3e\x3ca class\x3d"usercard-toggle ellipsis"\x3e\x3c/a\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan style\x3d"color:#666666"\x3e\x3c/span\x3e\x3c/div\x3e');k.find("a").html(f.name);k.find("a").attr("userId",f.id);k.find("a").next("span").html("\u5df2\u67e5\u9605");k.find("span:eq(1)").html(Date.create(f.activeDate).format("{yyyy}-{MM}-{dd} {24hr}:{mm}:{ss}"));c.append(k)}a=a.empUnread;for(e=0;e<a.length;e++)f=a[e],k=$('\x3cdiv class\x3d"readinfo-box"\x3e\x3ca class\x3d"usercard-toggle ellipsis"\x3e\x3c/a\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan style\x3d"color:#666666"\x3e\x3c/span\x3e\x3c/div\x3e'),
k.find("a").html(f.name),k.find("a").attr("userId",f.id),k.find("span:eq(0)").addClass("unread").html("\u672a\u67e5\u9605"),c.append(k)}})},renderUsers:function(b){for(var a=0,d=b.length;a<d;a++)this.renderUser(b[a])},renderUser:function(b){var a=$(this.el).find(".read-container"),d=a.find("a[userId\x3d'"+b.userId+"']");d&&d.length||(d=$('\x3cdiv class\x3d"readinfo-box"\x3e\x3ca class\x3d"usercard-toggle ellipsis"\x3e\x3c/a\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan style\x3d"color:#666666"\x3e\x3c/span\x3e\x3c/div\x3e'),
d.find("a").html(b.name),d.find("a").attr("userId",b.userId),b.readTime?(d.find("a").next("span").html("\u5df2\u67e5\u9605"),d.find("span:eq(1)").html(b.readTime)):d.find("span:eq(0)").addClass("unread").html("\u672a\u67e5\u9605"),0<a.find("a[userId\x3d'"+b.userId+"']").length||a.append(d))},remove:function(){}});m.exports=h});
define("teams/component/formlabelselector",["teams/component/template","teams/formmanage/formlabeltreeview"],function(h,q,m){var f=h("teams/component/template"),e=h("teams/formmanage/formlabeltreeview");window.FormLabelSelector=Backbone.View.extend({initialize:function(c){this.$el=c=c.$el;this.entity=c.attr("data-entity");this.module=c.attr("module");this.multi=c.attr("data-multi");this.winEl="#selector-"+this.entity;c=f["selector."+this.entity];$("body").append(c)},delegateEvents:function(){var c=
this,b=$(c.winEl);$("body").on("keydown.label-win",function(a){27==a.which&&b.modal("hide")});b.on("hidden.bs.modal",function(){c.remove()})},open:function(){$(this.winEl).modal("toggle");this._loadDepartment()},close:function(){$(this.winEl).modal("hide")},_loadDepartment:function(){var c=this;c.treeView=new e({el:"#selector-label-tree",hasUrl:!1,editable:!1,readonly:!0,noUrl:!0});c.treeView.render(null,function(){$("#selector-label-tree").on("click.label-win",".treenode",function(b){b.preventDefault();
b=$(this).data("node");c.close();c.$el.trigger("confirmHandler",{objs:b})})})},remove:function(){var c=$(this.winEl);$("#selector-label-tree").off(".label-win");c.remove();this.treeView&&(this.treeView.remove(),this.treeView=null)}});m.exports=window.FormLabelSelector});
define("teams/component/entityslider","teams/utils teams/task/taskview teams/report/statisticstasklistview teams/mainline/mainlinetasksview teams/doc/documentview teams/workflow/flowview teams/workflow/flowstartview teams/mainline/mainlineview teams/workreport/workreportcontentview teams/profile/profileview teams/form/biaogeformview teams/calendar/agenda teams/calendar/agendainfo teams/form/formdatareportview teams/form/writeformview teams/workflow/flowstatlistview".split(" "),function(h,q,m){h("teams/utils");
var f=h("teams/task/taskview"),e=h("teams/report/statisticstasklistview"),c=h("teams/mainline/mainlinetasksview"),b=h("teams/doc/documentview"),a=h("teams/workflow/flowview"),d=h("teams/workflow/flowstartview"),g=h("teams/mainline/mainlineview"),l=h("teams/workreport/workreportcontentview"),n=h("teams/profile/profileview"),k=h("teams/form/biaogeformview"),r=h("teams/calendar/agenda");h("teams/calendar/agendainfo");var p=h("teams/form/formdatareportview"),s=h("teams/form/writeformview"),u=h("teams/workflow/flowstatlistview");
q=Backbone.View.extend({initialize:function(a){this.idList=a.idList;this.id=a.id;this.formId=a.formId;this.module=a.module;this.userId=a.userId;this.renderType=a.renderType;this.slideCallback=a.slideCallback;this.page=a.page;this.formData=a.formData;this.tolink=a.tolink||!1;this.mainlineId=a.mainlineId;this.userName=a.userName;this.barType=a.barType;this.dataName=a.dataName;this.seriesName=a.seriesName;this.group=a.group;this.checkDate=a.checkDate;this.flowStatParam=a.flowStatParam},delegateEvents:function(){},
render:function(){var w=this,v=this.idList,x=this.id,y=this.slideCallback,z=this.mainlineId,A=this.userName,B=this.barType,m=this.dataName,D=this.seriesName,C=this.group,F=this.checkDate;switch(this.module){case "task":this.stretchView=new f({id:x,container:"#entitySlider",page:this.page,closable:!0,changeEvent:this.slideCallback?this.slideCallback.changeEvent:null});break;case "statisticsTaskList":this.stretchView=new e({checkDate:this.checkDate,barType:this.barType,idList:this.idList,container:"#entitySlider",
closable:!0});break;case "document":this.stretchView=new b({id:x,container:"#entitySlider",closable:!0,page:this.page,tolink:this.tolink});break;case "customer":v=h;this.stretchView=new (v("crm/customer/CustomerView"))({customerId:x,el:"#entitySlider",userId:TEAMS.currentUser.id,closable:!0,page:this.page,slideCallback:y,callbacks:{afterDel:function(a){w.page&&w.page.trigger("remove",a)},afterCreateByName:function(a){},afterUpdateField:function(a,b,d){"name"==b&&w.page&&w.page.trigger("changeTitle",
{id:a,title:d})},afterChangeWatch:function(a,b){w.page&&w.page.trigger("changeWatch",{id:a,watched:b})}}});break;case "saleChance":v=h;this.stretchView=new (v("crm/salechance/SaleChanceView"))({saleChanceId:x,el:"#entitySlider",userId:TEAMS.currentUser.id,closable:!0,page:this.page,entityslider:!0,slideCallback:y,callbacks:{afterDel:function(a){w.page&&w.page.trigger("remove",a)},afterCreateByName:function(a){},afterUpdateField:function(a,b,d){"name"==b&&w.page&&w.page.trigger("changeTitle",{id:a,
title:d})},afterChangeWatch:function(a,b){w.page&&w.page.trigger("changeWatch",{id:a,watched:b})}}});break;case "production":v=h;this.stretchView=new (v("crm/production/ProductionView"))({productionId:x,el:"#entitySlider",userId:TEAMS.currentUser.id,closable:!0,page:this.page,entityslider:!0,slideCallback:y,callbacks:{afterDel:function(a){w.page&&w.page.trigger("remove",a)},afterCreateByName:function(a){},afterUpdateField:function(a,b,d){"name"==b&&w.page&&w.page.trigger("changeTitle",{id:a,title:d})},
afterChangeWatch:function(a,b){w.page&&w.page.trigger("changeWatch",{id:saleChanceId,watched:b})}}});break;case "workflow":this.stretchView=new a({requestId:x,container:"#entitySlider",page:this.page,closable:!0,renderType:this.renderType});break;case "flowform":this.stretchView=new d({requestId:x,userId:TEAMS.currentUser.id,container:"#entitySlider",page:this.page,closable:!0});break;case "newflow":this.stretchView=new a({userId:TEAMS.currentUser.id,formId:x,container:"#entitySlider",page:this.page,
closable:!0});break;case "biaogeform":this.stretchView=new k({userId:TEAMS.currentUser.id,formId:x,dataId:x,container:"#entitySlider",renderType:this.renderType,page:this.page});break;case "mainline":this.stretchView=new g({id:x,container:"#entitySlider",page:this.page,tolink:this.tolink});break;case "mainlineTaskList":this.stretchView=new c({idList:v,id:x,group:C,checkDate:F,mainlineId:z,dataName:m,seriesName:D,userName:A,barType:B,container:"#entitySlider",page:this.page,closable:!0});break;case "workreport":this.stretchView=
new l({id:x,container:"#entitySlider",isStat:!0,hideBlog:!0});break;case "profile":this.stretchView=new n({container:"#entitySlider",userId:x,closable:!0});break;case "agenda":x=w.options;y=x.detail?x.userId:TEAMS.currentUser.id;void 0==x.allDay&&(x.allDay=!0);x.start||(A=new Date,v=A.getFullYear(),z=A.getMonth(),z+=1,z=10>z?"0"+z:z,A=A.getDate(),B=A+1,B=v+"-"+z+"-"+(10>B?"0"+B:B),x.start=Date.create(v+"-"+z+"-"+(10>A?"0"+A:A)).getTime(),x.end=Date.create(B).getTime());"new"==x.id&&(x.id=null);x.callback=
this.slideCallback?this.slideCallback.afterOperate:null;x.changeEvent=this.slideCallback?this.slideCallback.changeEvent:null;x.callbacks=this.slideCallback?this.slideCallback:null;this.stretchView=new r({container:"#entitySlider",userId:y,allDay:x.allDay,start:x.start,end:x.end,entityId:x.id,fromTargetId:x.fromTargetId,fromModule:x.fromModule,fromTargetName:x.fromTargetName,page:this.page,callback:x.callback,changeEvent:x.changeEvent,callbacks:x.callbacks});break;case "formdatareport":this.stretchView=
new p({id:x,userId:TEAMS.currentUser.id,formData:w.formData,container:"#entitySlider",closable:!0,page:this.page});break;case "mainlineview":this.stretchView=new g({id:w.id,container:"#entitySlider",page:this.page,tolink:!0});break;case "writeform":this.stretchView=new s({userId:TEAMS.currentUser.id,formId:x,dataId:x,container:"#entitySlider",page:this.page});break;case "flowstat":this.stretchView=new u({container:"#entitySlider",flowStatParam:w.flowStatParam})}$("#entitySlider").hasClass("in")||
$("#entitySlider").addClass("in");this.stretchView.render()},remove:function(){this.stretchView&&(this.stretchView.remove(),this.stretchView=null)}});m.exports=q});
define("teams/component/inviteNewTeamView",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.userId=e.userId||TEAMS.currentUser.userId;this.parentEl=e.parentEl||"";this.el="#invite_new_team";ZeroClipboard.config({swfPath:"js/clipboard.swf",activeClass:"zeroclipboard-is-active"});$("body").append(f.template("component.inviteNewTeam"));$("#inviteteamModal").modal()},delegateEvents:function(){var e=this;$(e.el);$("#inviteteamModal").on("hidden.bs.modal.InviteNewTeam",
function(){e.remove()});$("#inviteteamModalClose").on("click.InviteNewTeam",function(){$("#inviteteamModal").modal("hide")})},render:function(){$(this.el);this.buildUrl();this.bulidInviteTeams()},buildUrl:function(){var e=this,c={};c.userId=TEAMS.currentUser.userId;$.ajax({url:"/remote/invite/getcode",type:"post",dataType:"json",data:c,success:function(b){$("#invite_new_team .userName").html(TEAMS.currentUser.name);$("#invite_new_team .inviteUrl").html(b.shortUrl);$("#invite_new_team .inviteCode").html(b.inviteCode);
window.clipboardData?($("body").on("click.InviteNewTeam","#invite_new_team #copyBtn-invitecode",function(){window.clipboardData.setData("text",b.inviteCode);f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")}),$("body").on("click.InviteNewTeam","#invite_new_team #copyBtn-link",function(){window.clipboardData.setData("text","\u4e00\u7ad9\u5f0f\u7684\u56e2\u961f\u534f\u4f5c\u5e73\u53f0eteams,\u63d0\u5347\u4e86\u6211\u4eec\u56e2\u961f\u7684\u6548\u7387\u548c\u7ecf\u8425\u6210\u679c\uff0c\u5f88\u591a\u670b\u53cb\u4e5f\u90fd\u7528\uff0c\u63a8\u8350\u7ed9\u4f60\u4eec\u56e2\u961f\u4e5f\u8bd5\u8bd5\u3002"+
$("#invite_new_team .inviteUrl").html());f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")})):(e.copyBtnBind($("#invite_new_team #copyBtn-invitecode"),b.inviteCode),e.copyBtnBind($("#invite_new_team #copyBtn-link"),"\u4e00\u7ad9\u5f0f\u7684\u56e2\u961f\u534f\u4f5c\u5e73\u53f0eteams,\u63d0\u5347\u4e86\u6211\u4eec\u56e2\u961f\u7684\u6548\u7387\u548c\u7ecf\u8425\u6210\u679c\uff0c\u5f88\u591a\u670b\u53cb\u4e5f\u90fd\u7528\uff0c\u63a8\u8350\u7ed9\u4f60\u4eec\u56e2\u961f\u4e5f\u8bd5\u8bd5\u3002"+
$("#invite_new_team .inviteUrl").html()))}})},bulidInviteTeams:function(){var e={};e.userId=TEAMS.currentUser.userId;$.ajax({url:"/tenant/findInviteTeams.json",type:"post",dataType:"json",data:e,success:function(c){if(null==c||0==c.length)$("#noneTeams").show();else{$("#inviteTeamsWrap").show();for(var b in c){var a=c[b],d=$("#tenantItemClone").clone().removeAttr("id");d.removeClass("cloneTr");d.find(".j_num").text(parseInt(b)+1);d.find(".j_tenantName").text(a.tenantName);d.find(".j_contact").text(a.contact);
d.find(".j_usedLicense").text(a.usedLicense+"\u4e2a\u7528\u6237");d.find(".j_status").text(a.status);$("#inviteTeamsList").append(d)}$("#inviteTeamsList").attr("auto-scroll","yes");f.layout("#inviteTeamsList",[{gotoTopButton:!1}])}}})},copyBtnBind:function(e,c){var b=new ZeroClipboard(e);b.on("ready",function(){b.on("copy",function(a){a.clipboardData.setData("text/plain",c)});b.on("aftercopy",function(a){f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")});b.on("error",function(a){f.notify(a.messsage)})})},
remove:function(){$("#inviteteamModal").off(".bs.modal");$("#inviteteamModal").remove();$("#inviteteamModal").off(".InviteNewTeam");$("body").off(".InviteNewTeam")}});m.exports=h});
define("teams/component/feedbackmodel",function(h,q,m){h=Backbone.Model.extend({pageNo:1,pageSize:10,module:"task",method:"unread",userId:"",load:function(f,e){this.module=f.module;f.method&&(this.method=f.method);f.userId&&(this.userId=f.userId);f.pageNo=this.pageNo;f.pageSize=this.pageSize;var c="unreadall"==f.method?"/feed/"+this.method+".json":"/comment/"+this.method+".json";""==f.subordinateType&&(f.subordinateType=null);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:c,
dataType:"json",data:JSON.stringify(f),success:function(b){e&&e(b)}})},readed:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/comment/readed.json",dataType:"json",async:!1,data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/trashbinlogview",["teams/utils","teams/component/typeahead","teams/component/trashbinmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/trashbinmodel");h=Backbone.View.extend({initialize:function(b){this.el="#trashbinlog-entityBox";this.userId=b.userId?b.userId:TEAMS.currentUser.id;this.module=b.module;$("body").append(f.template("component.trashbinlog",{userId:this.userId}));this.model=new c(b)},delegateEvents:function(){var b=
this,a=$(this.el);a.on("hidden.bs.modal",function(a){b.remove()});f.datepicker({el:b.el+" #deleteStartTimeLog",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#deleteStartTimeLog"),e=$(b.el).find("#deleteEndTimeLog");e.val()&&a>e.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),c.val("")):c.val(a)}});f.datepicker({el:b.el+" #deleteEndTimeLog",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=
$(b.el).find("#deleteStartTimeLog"),e=$(b.el).find("#deleteEndTimeLog");c.val()&&a<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),e.val("")):e.val(a)}});e({el:b.el+" #deletorsDivLog #deletors",callback:function(d){if(d&&!$.isEmptyObject(d)){var c=a.find("#deletorsDivLog .j_selected");b.renderTypeheader(c,d)}}});a.on("click.TrashBinLogView","#search_log",function(d){a.find("#trashbinlogContent .j_trashlist").html("");b.renderTable(1)});a.on("keyup.TrashBinLogView",
"#js_name_log",function(b){13==(b?b:window.event?window.event:null).keyCode&&a.find("#search_log").trigger("click")});a.on("click.TrashBinLogView","#more_data_log",function(a){a=$(this).data("page");b.renderTable(a.nextPage)})},render:function(){this.renderTable(1);$(this.el).modal("show")},renderTable:function(b){var a=this,d=$(a.el),c={};c.pageNo=b;var e=d.find("#js_name_log").val(),n=d.find("#deleteStartTimeLog").val(),k=d.find("#deleteEndTimeLog").val(),r=[];d.find("#deletorsDivLog .j_optcontainer .j_selected span a").each(function(){var a=
$(this).attr("id");r.push(a)});c.name=$.trim(e);c.startTime=$.trim(n);c.endTime=$.trim(k);c.userIds=r;c.module=a.module;a.model.queryTrashLog(c,function(c){var g=c.pageLog;c=g.result;var e=d.find("#trashbinlogContent .j_trashlist");1==b&&(e.empty(),null==c||0==c.length?d.find("#trashbinlogContent .j_empty").show():d.find("#trashbinlogContent .j_empty").hide());g&&g.hasNext?($(a.el+" #more_data_log").show(),$(a.el+" #more_data_log").data("page",g)):$(a.el+" #more_data_log").hide();if(null!=c)for(g=
0;g<c.length;g++){var l=d.find("#trashbinlogClone li").clone(),k=c[g],n=k.entityId;if(null==e.find("#"+n).get(0)){l.attr("entityId",n);l.find(".j_Del").val(n);l.find(".j_tfname").text(k.name);l.find(".j_tfname").attr("data-id",n);l.find(".j_tfname").attr("data-module",a.module);l.find(".j_tuname").text(null!=k.operator?k.operator.username:"\u65e0");n=Date.create(k.createTime);l.find(".j_ttime").text(n.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));switch(k.operType){case "create":l.find(".j_tdel").text("\u5220\u9664\u5230\u56de\u6536\u7ad9");
break;case "delete":l.find(".j_tdel").text("\u5220\u9664");break;case "recover":l.find(".j_tdel").text("\u8fd8\u539f")}e.append(l)}}d.find(a.el+" .j_trashbinListScr").attr("auto-scroll","yes").css("height","420px");f.layout(a.el+" .j_trashbinListScr")})},renderTypeheader:function(b,a){if(a.length)for(var d=0;d<a.length;d++){var c=a[d],e=c.name,f=c.id;if(e&&f){var k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&
(k=null)});b.append(k)}}else e=a.name,f=a.id,e&&f&&(k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&(k=null)}),b.append(k))},remove:function(){var b=$(this.el);b.off(".TrashBinLogView");b.remove()}});m.exports=h});
define("teams/component/agenda",["teams/utils","teams/component/typeahead","teams/mainline/mainlinemodel","teams/mainline/mainlinelinkmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/mainline/mainlinemodel"),b=h("teams/mainline/mainlinelinkmodel");h=Backbone.View.extend({tpl:'\x3ca class\x3d"entitybox-toggle" data-value\x3d"\x3c%\x3did%\x3e" data-module\x3d"agenda" data-id\x3d"\x3c%\x3did%\x3e"\x3e\x3c%\x3dname%\x3e\x3c/a\x3e',initialize:function(a){this.container=
a.container;this.el=(this.parentEl=a.parentEl)?this.parentEl+" "+this.container:this.container;this.objectId=a.objectId;this.callbacks=a.callbacks;this._module=a.module;this._targetModule="calendar";this._moduleLabel=a.moduleLabel||"\u5173\u3000\u8054:";this._moduleDisplay=a.moduleDisplay||!1;this._iModelTitle=a.iModelTitle||"\u6dfb\u52a0\u5173\u8054";"calendar"==this._targetModule?$(this.el).html(f.template("component.relevance",{targetModule:"agenda",module:this._module,moduleLabel:this._moduleLabel,
iModelTitle:this._iModelTitle})):$(this.el).html(f.template("component.relevance",{targetModule:this._targetModule,module:this._module,moduleLabel:this._moduleLabel,iModelTitle:this._iModelTitle}));this.model=new c({module:this._module,id:this.objectId});this.mainlinelinkmodel=new b;$(this.el).find(".entity-container").attr("data-url","/mainline/unlinkAgenda/{id}/"+this.objectId+".json")},delegateEvents:function(){var a=this,b=$(this.el),c=b.find(".control-label i");this._targetModule?c.removeClass().addClass("graph graph-16-"+
a._targetModule):c.removeClass().addClass("graph graph-16-link");b.off("newRelevance","#relevance").on("newRelevance","#relevance",function(b,d){a.createRelevanceBox(d)});b.off("entitySelected",".entity-toggle").on("entitySelected",".entity-toggle",function(b){if(a.isEmptyTarget())for(var d=1;d<arguments.length;d++){var c=arguments[d];if(!a.findSeleted(c.id)){var g={};g.id=c.id;g.targetModule=c.module;g.name=c.name;a.createRelevanceBox(g)}}else{c="";for(d=1;d<arguments.length;d++)c+=arguments[d].id+
",";c&&0<c.length&&a.model.linkAgenda(c,a.objectId,!0,function(b){var d=b.streams;if(d&&!(0>=d.length)){f.notify("\u5173\u8054\u6210\u529f");for(var c=0;c<d.length;c++)$("#stream").trigger("insertStream",d[c]);b=b.agendas;$(a.el).find(".entity-container").empty();for(c=0;c<b.length;c++)a.createRelevanceBox(b[c]);a.callbacks&&a.callbacks.link&&a.callbacks.link(mainlineIds,d,!0)}})}});e({el:a.el+" #typeahead-relevance",callback:function(b){a.newRelevance(b)}});b.on("click.relevance",".relevance-module",
function(c){$(a.el+" .dropdown-menu li").removeClass("active");$(this).parent().addClass("active");b.find(".typeahead-search").attr("module",$(this).attr("data-entity"));a.changePlaceholder($(this).attr("data-entity"))});b.on("remove.relevance",".entitybox-toggle",function(a){$(this).parent(".entity-item").remove()});b.off("click",".entity-item .close").on("click ",".entity-item .close",function(b){b.stopPropagation();b=$(this).prevAll("a").attr("id");var d=$(this).prevAll("a").attr("data-value"),
c=$(this).parents(".entity-container"),g=c.attr("data-url");if(g&&d){var e=$(this).parent(),s=c.data("param")||{};s._method="delete";f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(b){b&&$.ajax({type:"POST",dataType:"json",data:s,url:g.replace("{id}",d),success:function(b){e.remove();c.trigger("removeEntity",b);$("#stream").trigger("insertStream",b.streams||b.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");a.callbacks&&a.callbacks.unlink&&
a.callbacks.unlink(b.mainlines,b.streams||b.stream)}})})}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),c.trigger("removeEntity",b))});b.off("click",".j_more_show").on("click ",".j_more_show",function(b){b.stopPropagation();b=$(this);b.data("type");b.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(a.el+" #relevance").children(".j_entity_item").show()});b.off("click",".j_more_hide").on("click ",".j_more_hide",function(b){b.stopPropagation();b=$(this);
b.data("type");b.addClass("hide").siblings(".j_more_show").removeClass("hide");$(a.el+" #relevance").find(".j_entity_item:lt(5)").show();$(a.el+" #relevance").find(".j_entity_item:gt(4)").hide()})},render:function(a){if(a){for(var b=0,c=a.length;b<c;b++){var e=a[b];"calendar"==e.targetModule&&(e.targetModule="agenda");this.createRelevanceBox(e)}0<a.length&&($(this.el).removeClass("hide"),$(this.parentEl).find($(this.el).attr("icon")).parent().addClass("hide"));this.renderMoreType(a)}},renderMoreType:function(a){if(a&&
0!=a.length&&5<a.length){a=a.length;for(var b=$(this.el+" #relevance").children("span"),c=5;c<a;c++)$(b[c]).hide();$(this.el+" #relevance").find(".j_more_btn").remove();a=this.container&&1<this.container.length&&this.container.substr(1)||$(this.el).attr("id");a='\x3cspan class\x3d"j_more_btn"\x3e\x3cspan class\x3d"j_more_show" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_more_hide hide" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u6536\u8d77\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e';
$(this.el+" #relevance").append(a)}},changePlaceholder:function(a){$(this.el).find("#typeahead-relevance").attr("placeholder","\u8f93\u5165"+this.getModuleName(a))},createRelevanceBox:function(a){if(a){var b=_.template(this.tpl,a),c="";this._moduleDisplay&&(c="\x3cb\x3e["+this.getModuleName(a.targetModule)+"]\x3c/b\x3e");b='\x3cspan id\x3d"'+a.id+'" class\x3d"entity-item j_entity_item"\x3e'+c+""+b+"\x3c/span\x3e";0<$(this.el).find("#relevance .j_more_btn").length?$(this.el).find("#relevance .j_more_btn").before($(b)):
$(this.el).find(".entity-container").append($(b));$(this.el).removeClass("hide");$(this.parentEl).find($(this.el).attr("icon")).addClass("hide");this.createEntityObject(a)}},createEntityObject:function(a){var b={};b.id=a.id;b.name=a.name;$(this.el).find(".entity-container").find("#"+a.id).data("object",b)},findSeleted:function(a){return 1==$(this.el+" .relevance-container #"+a).size()?!0:!1},newRelevance:function(a){var b=this,c=b.model;b.findSeleted(a.id)?f.notify("\u5173\u8054\u5df2\u7ecf\u5b58\u5728"):
b.objectId?b.objectId==a.id?f.notify("\u65e0\u6cd5\u5173\u8054\u81ea\u5df1"):c.linkAgenda(a.id,b.objectId,!1,function(a){var c=a.streams;if(c&&!(0>=c.length)){f.notify("\u5173\u8054\u6210\u529f");for(var g=0;g<c.length;g++)$("#stream").trigger("insertStream",c[g]);a=a.agendas;for(g=0;g<a.length;g++)b.createRelevanceBox(a[g]);b.callbacks&&b.callbacks.link&&b.callbacks.link(mainlineIds,c,!0)}}):(c={},c.id=a.id,c.name=a.name,c.targetModule=a.module,b.createRelevanceBox(c))},getModuleName:function(a){switch(a){case "document":return"\u6587\u6863";
case "workflow":return"\u5ba1\u6279";case "customer":return"\u5ba2\u6237";case "task":return"\u4efb\u52a1";case "mainline":return"\u9879\u76ee";case "calendar":return"\u65e5\u7a0b"}},changeModule:function(a){$(this.el+" .typeahead-search").attr("module",a)},isEmptyTarget:function(){return this.objectId&&""!=$.trim(this.objectId)&&"new"!=$.trim(this.objectId)?!1:!0},remove:function(){}});m.exports=h});
define("teams/component/tagselector",["teams/utils","teams/component/template","teams/component/tagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/template"),c=h("teams/component/tagmodel");h=Backbone.View.extend({initialize:function(b){this.el="#selector-tag";this.privacy=b.privacy;this.keywords="";this.model=new c(b);this.$el=b.$el;b=e["selector.tag"];$("body").append(b)},delegateEvents:function(){var b=this,a=$("#selector-tag");a.off("click",".j_tag_selector").on("click",".j_tag_selector",
function(){var a=$(this).find("a");a.hasClass("checked")?a.removeClass("checked"):a.addClass("checked")});a.on("click",".tag-cancel",function(){a.find(".j_tag_selector a").removeClass("checked");a.modal("hide")});a.off("keydown","input").on("keydown","input",function(b){13==(b?b:window.event?window.event:null).keyCode&&a.find(".j_tagSearch").trigger("click")});a.off("click",".j_tagSearch").on("click",".j_tagSearch",function(){b.keywords=$.trim(a.find("input").val());a.find("#tag-selector-list").empty();
b.render()});a.off("click",".tag-ok").on("click",".tag-ok",function(){var d=[],c=$(this),e=b.$el.parent().siblings(".entity-container");b.model.targetId=e.attr("target-id");b.model._module=e.attr("module");a.find("#tag-selector-list").find("span a.checked").each(function(a,b){var c=$(b).attr("data-entity");d.push(c)});if(0==d.length)f.notify("\u8bf7\u9009\u62e9\u9700\u8981\u5173\u8054\u7684\u6807\u7b7e");else{var n=d.join(","),k=c.data("flag"),r=$(this).attr("type");k||b.model.links(n,r,function(b){f.notify("\u5173\u8054\u6210\u529f");
a.modal("hide");c.data("flag",!0);var d=b.tags;e.empty();if(b&&d&&0<d.length)for(b=0;b<d.length;b++){var k=d[b],n=k.privacy?"/tag/privacy/"+k.id:"/tag/common/"+k.id,r=$("#tagItemClone").clone();r.removeAttr("id");r.removeClass("hide");r.find("a").attr({href:n,"data-value":k.id}).text(k.name);e.append(r)}c.data("flag",!1)})}})},render:function(){var b=this;this.model.loadSelectTag(b.privacy,b.keywords,function(a){if((a=a.tags)&&0<a.length){$(".tag-ok").attr("type",a[0].privacy);for(var d=0;d<a.length;d++){var c=
a[d],e=$("#tsClone").clone();e.removeAttr("id");e.removeClass("hide");b.$el.parents(".tag-controls").find(".entity-item a").each(function(a,b){$(b).attr("data-value")==c.id&&e.find("a").addClass("checked")});e.find("a").attr({"data-entity":c.id,title:c.name}).html(c.name);$("#tag-selector-list").append(e)}}0==$("#tag-selector-list span").size()&&$("#tag-selector-list").append("\u6ca1\u6709\u6807\u7b7e\u6570\u636e")})},open:function(){var b=$(this.el);b.modal("toggle");b.find("#tag-selector-list").empty();
this.render()},remove:function(){$("#selector-tag").modal("hide");$("#selector-tag").off(".entityselector");$("#selector-tag").remove()}});m.exports=h});
define("teams/component/positionselector",["teams/component/template","teams/org/treeview"],function(h,q,m){var f=h("teams/component/template"),e=h("teams/org/treeview");window.DepartmentSelector=Backbone.View.extend({initialize:function(c){this.$el=c=c.$el;this.entity=c.attr("data-entity");this.module=c.attr("module");this.multi=c.attr("data-multi");this.winEl="#selector-"+this.entity;c=f["selector."+this.entity];$("body").append(c)},delegateEvents:function(){var c=this,b=$(c.winEl);$("body").on("keydown.depart-win",
function(a){27==a.which&&b.modal("hide")});b.on("hidden.bs.modal",function(){c.remove()})},open:function(){$(this.winEl).modal("toggle");this._loadPosition()},close:function(){$(this.winEl).modal("hide")},_loadPosition:function(){var c=this;c.treeView=new e({el:"#selector-org-tree",hasUrl:!1,editable:!1,readonly:!0,noUrl:!0,type:"position"});c.treeView.render(null,function(){$("#selector-org-tree").on("click.depart-win",".treenode",function(b){b.preventDefault();b=$(this).data("node");c.close();c.$el.trigger("confirmHandler",
{objs:b})})})},remove:function(){var c=$(this.winEl);$("#selector-org-tree").off(".depart-win");c.remove();this.treeView&&(this.treeView.remove(),this.treeView=null)}});m.exports=window.DepartmentSelector});
define("teams/component/usersummaryview",["teams/utils","teams/component/usersummarymodel","teams/component/visitview","teams/org/followmodel","teams/base/avatarview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/usersummarymodel"),c=h("teams/component/visitview"),b=h("teams/org/followmodel");h("teams/base/avatarview");h=Backbone.View.extend({initialize:function(a){this.el=a.container;this.userId=a.userId;this.hideVisit=a.hideVisit;this.chardMode=a.chardMode;this.userId||(this.userId=
TEAMS.currentUser.id);this.isMe=this.userId==TEAMS.currentUser.id;this.model=new e;this.followModel=new b;$(this.el).html(f.template("base.usersummary"));a.rightViewCtrl||$(this.el).find(".j_rightViewCtrl").remove();this.initTpl()},delegateEvents:function(){var a=this,b=a.followModel,c=this.model;$(a.el).on("click.usersummary",".j_btn-follow-add",function(c){b.follow(a.userId,TEAMS.currentUser.id,function(b){a.rendFollow(b);"approved"==b?f.notify("\u6dfb\u52a0\u5173\u6ce8\u6210\u529f"):f.notify("\u5173\u6ce8\u7533\u8bf7\u5df2\u53d1\u9001")})});
$(a.el).on("click.usersummary",".j_btn-unfollow-cancle",function(){a.followModel.unfollow(a.userId,TEAMS.currentUser.id,function(b){a.rendFollow(b.relation);f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8")})});$(a.el).on("click.usersummary",".j_followEach li",function(){var b=$(this).attr("module");b&&(a.isMe?c.loadSummary(TEAMS.currentUser.id,a.userId,b,"1",function(a){"0"==a.url?f.notify("\u60a8\u6ca1\u6709\u6743\u9650\u67e5\u770b\u8be5\u5185\u5bb9"):(ROUTER.navigate(a.url,{trigger:!0}),$("body").click())}):
c.loadSummary(TEAMS.currentUser.id,a.userId,b,"0",function(a){"0"==a.url?f.notify("\u60a8\u6ca1\u6709\u6743\u9650\u67e5\u770b\u8be5\u5185\u5bb9"):(ROUTER.navigate(a.url,{trigger:!0}),$("body").click())}))});$(a.el).on("click.usersummary",".j_moreProfile",function(){$(this).data("open")?($(this).prev(".profile-detail").slideUp(200),$(this).html('\u66f4\u591a  \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e'),$(this).data("open",!1)):($(this).prev(".profile-detail").slideDown(200),$(this).html('\u6536\u8d77  \x3ci class\x3d"icon-angle-up"\x3e\x3c/i\x3e'),
$(this).data("open",!0))});$(a.el).on("click.usersummary",".j_avatart",function(){a.isMe&&$("body").find("a.upload-toggle").trigger("click")})},render:function(){var a=this,b=this.model;$(a.el).find("#userSummary-info").addClass("hide");$(a.el).find("#userSummary-loading").removeClass("hide");b.loadProfile(a.userId,function(b){if(b.user){var d=b.user,e=b.userRelation,k=b.profileCounts;console.log(b);var f=TEAMS.currentUser.admin,p=null==d.lastLoginTime?"\u672a\u767b\u5f55":Date.create(d.lastLoginTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}");
a.rendFollow(e.type);var s="images/avatar.png";null!=d.avatar&&null!=d.avatar.p2&&(s="/base/download/"+d.avatar.p2);$(a.el).find(".avatar-info .avatar img").attr("src",s);$(a.el).find(".profile-label").html(d.username);$(a.el).find(".profile-info .name").html(d.username);a.username=d.username;d.sex&&$(a.el).find(".profile-info .sex").html("female"==d.sex?"\u5973":"\u7537");d.department&&$(a.el).find(".profile-info .department").html(d.department.name);$(a.el).find(".profile-detail .email").html(d.email);
$(a.el).find(".j_profilemobile").html(d.mobile).attr("title",d.mobile);$(a.el).find(".js_profiledetail .telephone").html(d.telephone).attr("title",d.telephone);d.superior&&$(a.el).find(".js_profiledetail .superior").html(d.superior.username);d.rank&&(s="","boss"==d.rank&&(s="\u9886\u5bfc"),"manager"==d.rank&&(s="\u7ecf\u7406"),"user"==d.rank&&(s="\u804c\u5458"),$(a.el).find(".js_profiledetail .rank").html(s));d.status&&(s="","normal"==d.status&&(s="\u5728\u804c"),"unavailable"==d.status&&(s="\u79bb\u804c",
$(a.el).find(".follow-btns").remove()),"locked"==d.status&&(s="\u9501\u5b9a"),$(a.el).find(".js_profiledetail .status").html(s));d.admin&&$(a.el).find(".js_profiledetail .role").html("\u7cfb\u7edf\u7ba1\u7406\u5458").attr("title","\u7cfb\u7edf\u7ba1\u7406\u5458");$(a.el).find(".btn-attendance").attr("user-id",d.id);$(a.el).find(".btn-attendance").attr("user-name",d.username);(d.subordinate||e&&"approved"==e.type)&&$(a.el).find(".btn-attendance").removeClass("hide");$(a.el).find(".login-info .last-login").html(p);
$(a.el).find(".login-info .login-count").html(d.loginCount);$(a.el).find(".statistic .followCount i").html(k.followCount);0==k.followCount&&$(a.el).find(".statistic .followCount").hide();$(a.el).find(".statistic .fansCount i").html(k.fansCount);0==k.fansCount&&$(a.el).find(".statistic .fansCount").hide();$(a.el).find(".statistic .subordinateCount i").html(k.subordinateCount);0==k.subordinateCount&&$(a.el).find(".statistic .subordinateCount").hide();$(a.el).find(".statistic .taskCount i").html(k.taskCount);
0==k.taskCount&&$(a.el).find(".statistic .taskCount").hide();$(a.el).find(".statistic .mainlineCount i").html(k.mainlineCount);0==k.mainlineCount&&$(a.el).find(".statistic .mainlineCount").hide();$(a.el).find(".statistic .blogCount i").html(k.blogCount);0==k.blogCount&&$(a.el).find(".statistic .blogCount").hide();$(a.el).find(".statistic .documentCount i").html(k.documentCount);0==k.documentCount&&$(a.el).find(".statistic .documentCount").hide();$(a.el).find(".statistic .customerCount i").html(k.customerCount);
0==k.customerCount&&$(a.el).find(".statistic .customerCount").hide();$(a.el).find(".statistic .flowCount i").html(k.flowCount);0==k.flowCount&&$(a.el).find(".statistic .flowCount").hide();$(a.el).find(".statistic .reportCount i").html(k.reportCount);0==k.reportCount&&$(a.el).find(".statistic .reportCount").hide();$(a.el).find(".statistic .saleChanceCount i").html(k.saleChanceCount);0==k.saleChanceCount&&$(a.el).find(".statistic .saleChanceCount").hide();$(a.el).find(".statistic .productionCount i").html(k.productionCount);
0==k.productionCount&&$(a.el).find(".statistic .productionCount").hide();a.isMe?($(a.el).find(".statistic .followCount").attr("title","\u6211\u5173\u6ce8\u7684\u4eba"),$(a.el).find(".statistic .fansCount").attr("title","\u5173\u6ce8\u6211\u7684\u4eba"),$(a.el).find(".statistic .subordinateCount").attr("title","\u6211\u7684\u4e0b\u5c5e"),$(a.el).find(".statistic .taskCount").attr("title","\u6211\u7684\u4efb\u52a1"),$(a.el).find(".statistic .mainlineCount").attr("title","\u6211\u7684\u9879\u76ee"),
$(a.el).find(".statistic .blogCount").attr("title","\u6211\u7684\u65e5\u62a5"),$(a.el).find(".statistic .documentCount").attr("title","\u6211\u4e0a\u4f20\u7684\u6587\u6863"),$(a.el).find(".statistic .customerCount").attr("title","\u6211\u8d1f\u8d23\u7684\u5ba2\u6237"),$(a.el).find(".statistic .flowCount").attr("title","\u6211\u63d0\u4ea4\u7684\u5ba1\u6279"),$(a.el).find(".statistic .reportCount").attr("title","\u6211\u521b\u5efa\u7684\u62a5\u544a"),$(a.el).find(".statistic .saleChanceCount").attr("title",
"\u6211\u8d1f\u8d23\u7684\u5546\u673a"),$(a.el).find(".statistic .productionCount").attr("title","\u6211\u8d1f\u8d23\u7684\u4ea7\u54c1"),$(a.el).find(".profile-update").removeClass("hide").attr("href","/profile/"+a.userId),$(a.el).find(".change-password").removeClass("hide"),$(a.el).find(".upload-toggle").removeClass("hide"),$(a.el).find(".btn-attendance").removeClass("hide")):($(a.el).find(".statistic .followCount").attr("title","\u4ed6\u5173\u6ce8\u7684\u4eba"),$(a.el).find(".statistic .fansCount").attr("title",
"\u5173\u6ce8\u4ed6\u7684\u4eba"),$(a.el).find(".statistic .subordinateCount").attr("title","\u4ed6\u7684\u4e0b\u5c5e"),$(a.el).find(".statistic .taskCount").attr("title","\u4ed6\u7684\u4efb\u52a1"),$(a.el).find(".statistic .mainlineCount").attr("title","\u4ed6\u7684\u9879\u76ee"),$(a.el).find(".statistic .blogCount").attr("title","\u4ed6\u7684\u65e5\u62a5"),$(a.el).find(".statistic .documentCount").attr("title","\u4ed6\u4e0a\u4f20\u7684\u6587\u6863"),$(a.el).find(".statistic .customerCount").attr("title",
"\u4ed6\u8d1f\u8d23\u7684\u5ba2\u6237"),$(a.el).find(".statistic .flowCount").attr("title","\u4ed6\u63d0\u4ea4\u7684\u5ba1\u6279"),$(a.el).find(".statistic .reportCount").attr("title","\u4ed6\u521b\u5efa\u7684\u62a5\u544a"),$(a.el).find(".statistic .saleChanceCount").attr("title","\u4ed6\u8d1f\u8d23\u7684\u5546\u673a"),$(a.el).find(".statistic .productionCount").attr("title","\u4ed6\u8d1f\u8d23\u7684\u4ea7\u54c1"),d.status&&"normal"==d.status&&$(a.el).find(".btn-wechat").removeClass("hide").addClass("wechat-toggle").data("employee",
d));f&&$(a.el).find(".profile-update").removeClass("hide").attr("href","/profile/"+a.userId);a.hideVisit||(this.visitView=new c({userId:d.id,container:"#visitInfo"}),this.visitView.render(b.myVisitors,b.beVisited));$(a.el).find("#userSummary-loading").addClass("hide");$(a.el).find("#userSummary-info").removeClass("hide")}else $(a.el).find("#userSummary-loading").addClass("hide")})},rendFollow:function(a){this.isMe?$(this.el).find(".follow-btns").remove():($(this.el).find(".follow-btns span").addClass("hide"),
$(this.el).find(".follow-btns .btn").addClass("hide"),$(this.el).find(".follow-btns ."+a).removeClass("hide"),$(this.el).find(".follow-btns .btn-wechat").removeClass("hide"))},initTpl:function(){var a=$(this.el);"#blog-right"==this.el?a.find(".j_panel-head").remove():a.parents("#noauthority").addClass("usercard")},remove:function(){$("#usercard").remove();$(this.el).off(".usersummary");this.followModel=null}});m.exports=h});
define("teams/component/customsearch",["teams/utils","teams/component/typeaheadview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeaheadview");h=Backbone.Model.extend({defaults:function(){return{defineId:"name",defineOperateType:"string",operateValue:"LIKE",defineValueType:"input",value:""}}});var c=new (Backbone.Collection.extend({model:h,url:"/customers/searchTemplate.json?id\x3d",comparator:"order"})),b=Backbone.View.extend({tagName:"DIV",templateStr:f.template("CustomSearch.item"),
events:{"click .destroy":"delClick","change select#selName":"nameChange","change select#selOperate":"operateChange","change input#textValue":"valueChange","keypress input#textValue":"valueKeyPress","focusin input.typeahead":"typeaheadClick","click .entity-item\x3e.close":"typeaheadCloseClick","confirmHandler .typeahead-search":"typeaheadSearchConfirmHandler"},initialize:function(a){this.itemDefines=a.itemDefines;this.itemDefalut=a.itemDefalut;this.searchView=a.searchView;this.listenTo(this.model,
"destroy",this.remove)},render:function(){var a=_.template(this.templateStr,{itemDefines:this.itemDefines,searchItem:this.model.toJSON()});this.$el.html(a);this.bindEventAfterRender();this.selNameObj=this.$("#selName");this.selOperateObj=this.$("#selOperate");this.txtValueObj=this.$("#textValue");return this},bindEventAfterRender:function(){this.$(".datepicker").each(function(){f.datepicker({el:$(this),callback:function(a){}})})},delClick:function(){this.model.destroy()},nameChange:function(){var a=
this.selNameObj.val(),b=_.find(this.itemDefines,function(b){return b.defineId==a});b.value="";this.model.set(b);this.render()},operateChange:function(){var a=this.selOperateObj.val();this.model.set({operateValue:a})},typeaHeadClickHander:function(a){var b=this.model.get("value");""==b&&(b=[]);"undefined"==typeof _.find(b,function(b){return b.id==a.id})&&(b.push({id:a.id,name:a.name}),this.model.set({value:b}));this.render()},typeaheadClick:function(a){a=$(a.target);var b=a.attr("typeaheadRemote"),
c=this;(new e({$el:a,clickHandler:function(a){c.typeaHeadClickHander({id:a.id,name:a.name})},remote:b})).render()},typeaheadSearchConfirmHandler:function(a,b){this.typeaHeadClickHander({id:b.objs.userId,name:b.objs.username})},typeaheadCloseClick:function(a){a=$(a.target).parents(".entity-item").index();this.model.get("value").splice(a,1);this.render()},valueChange:function(a){a=$(a.target);a=$.trim(a.val());this.model.set({value:a})},valueKeyPress:function(a){13==a.keyCode&&($(a.target).trigger("change"),
this.searchView.doSearch())}});h=Backbone.View.extend({templateStr:f.template("CustomSearch.view"),events:{"click #btnAddItem":"addItemToDatas","click #btnSaveTpl":"doSaveTpl","click #btnSearch":"doSearch"},initialize:function(a){this.itemDefines=a.searchDefines.itemDefines;this.itemDefalut=a.searchDefines.itemDefalut;this.searchId=a.searchDefines.id;this.searchUrl=a.searchDefines.searchUrl;this.callback=a.callback;this.callbackThis=a.callbackThis;this.pageNo=1;this.listenTo(c,"add",this.addItem);
this.render();c.url+=this.searchId;c.fetch()},render:function(){var a=_.template(this.templateStr,{});this.$el.html(a)},addItemToDatas:function(){var a=c.create(this.itemDefalut);c.push(a)},addItem:function(a){a=new b({model:a,itemDefines:this.itemDefines,itemDefalut:this.itemDefalut,searchView:this});this.$("#divCustomSearchItemContainer").append(a.render().$el)},doSaveTpl:function(){},nextPage:function(){this.doSearch(null,!0)},doSearch:function(a,b){1==b?this.pageNo++:this.pageNo=1;var g=this;
g.callbackThis.showLoadding();$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:this.searchUrl,dataType:"json",data:JSON.stringify({pageNo:g.pageNo,pageSize:"25",conditions:c.toJSON()}),success:function(a){g.callback&&g.callback.call(g.callbackThis,a)}})}});m.exports=h});
define("teams/component/entitybox","teams/utils teams/task/taskview teams/doc/documentview teams/workflow/flowview teams/workflow/flowsequenceview teams/profile/quittransferview teams/workflow/flowstartview teams/mainline/mainlineview teams/workflow/sernumruleview teams/blog/blogpostview teams/calendar/agenda teams/calendar/agendainfo teams/blog/weeklyblog teams/base/custmenuview teams/base/portalsettingview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskview"),c=h("teams/doc/documentview"),
b=h("teams/workflow/flowview"),a=h("teams/workflow/flowsequenceview"),d=h("teams/profile/quittransferview"),g=h("teams/workflow/flowstartview"),l=h("teams/mainline/mainlineview"),n=h("teams/workflow/sernumruleview"),k=h("teams/blog/blogpostview"),r=h("teams/calendar/agenda"),p=h("teams/calendar/agendainfo"),s=h("teams/blog/weeklyblog"),u=h("teams/base/custmenuview"),w=h("teams/base/portalsettingview");q=Backbone.View.extend({el:"#entitybox",initialize:function(a){this.target=a.target;this.entityId=
a.entityId;this.entityModule=a.entityModule;this.entityValue=a.entityValue;this.extProperties=a.extProperties;this.callbacks=a.callbacks;this.page=a.page;this.autoHeight=a.autoHeight;1>$("#entitybox").length?$("body").append(f.template("base.entitybox")):$("#entitybox").trigger("destroy")},delegateEvents:function(){var a=this;$("#entitybox").on("hidden.bs.modal.EntityBox",function(){a.remove()});this.autoHeight&&$("#entitybox").addClass("autoheight");$("#entitybox").on("shown.bs.modal.EntityBox",
function(b){a.scroller&&($("#entitybox #entitybox-container").find(a.scroller).hasClass("mCustomScrollbar")||f.layout(a.scroller,[{gotoTopButton:!1,bottomBlank:a.hasBlank}]),$("#entitybox #entitybox-container").find(a.scroller).height(465).mCustomScrollbar("update"));$(window).trigger("resize");a.callbacks&&a.callbacks.afterOpen&&a.callbacks.afterOpen()});$("#entitybox").on("remove.EntityBox","#btn-linkdomain",function(a){$("#entitybox").modal("hide")});$("#entitybox").on("remove.EntityBox","#btn-delete, #pass-submit, #back-submit,#add-step-confirm",
function(b){$("#entitybox").modal("hide");a.target.attr("need-delete")&&"no"==a.target.attr("need-delete")||"task-create-fast"!=$(a.target).attr("id")&&a.target.trigger("remove")});$("#entitybox").on("click.EntityBox",".btn-back",function(a){$("#entitybox").modal("hide");a.stopPropagation()});$("#entitybox").on("click.EntityBox",".entitybox-toggle",function(a){});$("#entitybox").on("shown",function(b){a.callbacks&&a.callbacks.afterOpen&&a.callbacks.afterOpen()});$("#entitybox").on("destroy",function(b){a.entityView&&
(a.entityView.remove(),a.entityView=null);$("#entitybox").off(".EntityBox")});$("#entitybox").off("click.EntityBox").on("click.EntityBox",function(b){if(b.target==b.currentTarget&&("customer"==a.entityModule||"contact"==a.entityModule)){var d=$("#entitybox #comment-textarea");0<d.size()&&0<d.val().replace(d.attr("placeholder"),"").trim().length&&(b.currentTarget=void 0,f.confirm("\u5b58\u5728\u672a\u63d0\u4ea4\u7684\u8054\u7cfb\u8bb0\u5f55\uff0c\u786e\u8ba4\u5173\u95ed\uff1f",function(a){a?$("#entitybox .modal-header .close").click():
setTimeout(function(){$("#entitybox #comment-textarea").focus()},500)}))}});$("#entitybox").off("keydown.EntityBox").on("keydown.EntityBox",function(a){27==a.which&&(window.formJsonStr&&$("body .form-view_js").get(0)&&window.formPlugin?(a=formPlugin.submitAssembleForm({parentEl:$("body .form-view_js")}),JSON.stringify(a.formData.dataDetails)!=window.formJsonStr?f.confirm("\u786e\u5b9a\u653e\u5f03\u586b\u5199\u8868\u5355\u5417\uff1f\u653e\u5f03\u540e\u6570\u636e\u5c06\u4e0d\u4f1a\u88ab\u4fdd\u5b58\uff01",
function(a){a&&$("#entitybox").modal("hide")}):$("#entitybox").modal("hide")):$("#entitybox").modal("hide"))})},render:function(){var f=this,x=this.entityId,y="";f.scroller="";f.hasBlank=!0;switch(this.entityModule){case "task":y="\x3ch5 class\x3d'modal-title'\x3e\u4efb\u52a1\u4fe1\u606f\x3c/h5\x3e";this.entityView=new e({id:x,container:"#entitybox-container",callback:this.callbacks?this.callbacks.afterCreate:null,page:f.page});f.scroller="#task-wrapper";break;case "document":y="\x3ch5 class\x3d'modal-title'\x3e\u6587\u6863\u4fe1\u606f\x3c/h5\x3e";
this.entityView=new c({id:x,container:"#entitybox-container",page:f.page});f.scroller="#document-container";break;case "customer":var y="\x3ch5 class\x3d'modal-title'\x3e\u5ba2\u6237\u4fe1\u606f\x3c/h5\x3e",z=h;this.entityView=new (z("crm/customer/CustomerView"))({customerId:x,userId:TEAMS.currentUser.id,el:"#entitybox-container",callbacks:{afterDel:function(a){f.page&&f.page.trigger("remove",a)},afterCreateByName:function(a){},afterUpdateField:function(a,b,d){},afterChangeWatch:function(a,b){f.page&&
f.page.trigger("changeWatch",{id:a,watched:b})}}});f.scroller="#customer-container";break;case "contact":var y="\x3ch5 class\x3d'modal-title' \x3e\u8054\u7cfb\u4eba\u4fe1\u606f\x3c/h5\x3e",z=h,A=z("crm/contact/ContactDetailView"),z=$.extend({id:x,userId:TEAMS.currentUser.id,el:"#entitybox-container",flag:"fast",inEntityBox:!0},this.extProperties);this.entityView=new A(z);f.scroller="#contact-container";break;case "saleChance":y="\x3ch5 class\x3d'modal-title' \x3e\u5546\u673a\x3c/h5\x3e";z=h;A=z("crm/salechance/SaleChanceView");
z=$.extend({saleChanceId:x,userId:TEAMS.currentUser.id,el:"#entitybox-container",flag:"fast",inEntityBox:!0},this.extProperties);this.entityView=new A(z);f.scroller="#saleChance-container";break;case "production":y="\x3ch5 class\x3d'modal-title' \x3e\u4ea7\u54c1\x3c/h5\x3e";z=h;A=z("crm/production/ProductionView");z=$.extend({productionId:x,userId:TEAMS.currentUser.id,el:"#entitybox-container",flag:"fast",inEntityBox:!0},this.extProperties);this.entityView=new A(z);f.scroller="#production-container";
break;case "workflow":y="\x3ch5 class\x3d'modal-title'\x3e\u5ba1\u6279\u4fe1\u606f\x3c/h5\x3e";isNaN(parseInt(x))?this.entityView=new g({requestId:x,userId:TEAMS.currentUser.id,container:"#entitybox-container",callback:function(){f.close()},page:f.page,closable:!1}):this.entityView=new b({requestId:x,container:"#entitybox-container",page:this.page,callback:function(){f.close()},page:f.page,closable:!1});break;case "mainline":y="\x3ch5 class\x3d'modal-title'\x3e\u9879\u76ee\u4fe1\u606f\x3c/h5\x3e";
this.entityView=new l({id:x,container:"#entitybox-container",callback:function(){f.close()},page:f.page});f.scroller="#mainline-container";break;case "blog":y="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u62a5\u4fe1\u606f\x3c/h5\x3e";this.entityView=new k({container:"#entitybox-container",isEntityBox:!0,callback:function(){f.close()},page:f.page});f.scroller="#blog-post-fast";break;case "agenda":z=f.options;if(z.detail){y="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u7a0b\u8be6\u60c5\x3c/h5\x3e";z.container=
"#entitybox-container";z.callback=this.callbacks?this.callbacks.afterOperate:null;this.entityView=new p(z);f.scroller="#agendaInfo-wrapper";break}y="\x3ch5 class\x3d'modal-title'\x3e\u65e5\u7a0b\x3c/h5\x3e";void 0==z.allDay&&(z.allDay=!0);if(!z.start){var B=new Date,x=B.getFullYear(),A=B.getMonth(),A=A+1,A=10>A?"0"+A:A,B=B.getDate(),m=B+1,m=x+"-"+A+"-"+(10>m?"0"+m:m);z.start=Date.create(x+"-"+A+"-"+(10>B?"0"+B:B)).getTime();z.end=Date.create(m).getTime()}"new"==z.entityId&&(z.entityId=null);z.container=
"#entitybox-container";z.callback=this.callbacks?this.callbacks.afterOperate:null;z.userId=TEAMS.currentUser.id;this.entityView=new r(z);f.scroller="#agenda-wrapper";break;case "weeklyblog":y="\x3ch5 class\x3d'modal-title'\x3e\u672c\u5468\u5de5\u4f5c\u65e5\u62a5\x3c/h5\x3e";z=f.options;z.container="#entitybox-container";z.callback=this.callbacks?this.callbacks.afterOperate:null;this.entityView=new s({container:"#entitybox-container",userId:this.entityId,date:this.entityValue,callback:function(){f.close()}});
f.scroller="#blogs-wrapper";break;case "flowSequence":y="\x3ch5 class\x3d'modal-title'\x3e\u56fa\u5b9a\u5ba1\u6279\x3c/h5\x3e";z=f.options;"new"==z.entityId&&(z.entityId=null);z.container="#entitybox-container";z.callback=this.callbacks?this.callbacks.afterOperate:null;this.entityView=new a(z);f.scroller="#fasten-container";break;case "custmenu":z=f.options;"new"==z.entityId&&(z.entityId=null);z.userId=TEAMS.currentUser.id;z.container="#entitybox-container";this.entityView=new u(z);break;case "portalsetting":z=
f.options;"new"==z.entityId&&(z.entityId=null);z.userId=TEAMS.currentUser.id;z.container="#entitybox-container";this.entityView=new w(z);break;case "quitTransfer":y="\x3ch5 class\x3d'modal-title'\x3e\u79bb\u804c\u4ea4\u63a5\x3c/h5\x3e";z=f.options;"new"==z.entityId&&(z.entityId=null);z.container="#entitybox-container";z.userId=x;z.userName=this.entityValue;z.callback=this.callbacks?this.callbacks.afterOperate:null;this.entityView=new d(z);break;case "serNumRule":this.entityView=new n({container:"#entitybox-container",
formId:x,callback:function(){f.close()}})}"weeklyblog"==this.entityModule&&($(".modal-header").removeClass("hide"),$("#entitybox").find(".modal-header h5").remove(),$("#entitybox").find(".modal-header").append(y));"workflow"==this.entityModule?$("#entitybox").modal({keyboard:!1}):$("#entitybox").modal();this.entityView.render();"blog"==this.entityModule&&($("#entitybox-container").find(".j_postsize").focus(),$("#entitybox-container").find(".j_blog-post").addClass("active"))},close:function(){$("#entitybox").modal("hide")},
remove:function(){this.entityView&&(this.entityView.remove(),this.entityView=null);$("#entitybox").off(".EntityBox");$("#entitybox").off(".bs.modal");$("#entitybox").remove()}});m.exports=q});
define("teams/component/userslider",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.pageNO=1;this.el="#member-layer";this.userId=e.userId?e.userId:TEAMS.currentUser.id;this._module=e.module;this.dataType=e.dataType;this.pageKey=this._module+"#"+this.userId;this.isFind=!1;$("#member-layer").html(f.template("component.userslider"));f.layout("#memebers-wrapper")},delegateEvents:function(){var e=this,c=$(e.el);c.on("click.UserSlider","li.more",
function(){e.pageNO++;e.renderOthers(!0)});c.on("keydown.UserSlider","#membersearch-keywords",function(b){if(13===b.keyCode){e.pageNO=1;e.isFind=!0;b=c.find("#members li:first");c.find("#members").empty();c.find("#members").prepend(b);b=c.find("#membersearch-keywords").val();var a="";switch(e.dataType){case "all":a="/users.json";break;case "subordinate":a=""==$.trim(b)?"/users/workreportSubordinates/"+e.userId+".json?allSubordinate\x3dfalse":"/users/workreportSubordinates/"+e.userId+".json"}e.fetchData(a,
b)}});c.on("click.UserSlider",".j_user p",function(b){b=$(this).parent();b.find(".j_expend");b.find("#avatar").attr("user-id");b=b.find("#avatar").attr("url");ROUTER.navigate(b,{trigger:!0});void 0==$(this).parent().attr("parent_id")&&$(this).parent().find(".j_expend").trigger("click")});c.on("click.UserSlider",".j_expend",function(b){b=$(this).parent();var a=$(this),d=b.find("#avatar").attr("user-id"),c="/users/directSubordinates/"+d+".json";a.hasClass("caret")&&(a.hasClass("caret-up")?(a.removeClass("caret-up"),
e.removeSubs(b,d)):(e.existSubs(b,d)||e.fetchData(c,null,b,d),a.addClass("caret-up")))})},render:function(){$(this.el);this.buildUser(TEAMS.currentUser);this.renderOthers(!1)},removeAllSub:function(e,c){var b=$(this.el);$.ajax({type:"get",url:c,dataType:"json",success:function(a){if(a&&a.subordinates)for(var d=0;d<a.subordinates.length;d++)b.find("li[dele_id\x3d'"+a.subordinates[d].id+"']").remove()}})},removeSubs:function(e,c){$(this.el).find("li[parent_id\x3d'"+c+"']").each(function(b){$(this).addClass("hide")})},
existSubs:function(e,c){var b=$(this.el);return b.find("li[parent_id\x3d'"+c+"']")&&0<b.find("li[parent_id\x3d'"+c+"']").size()?(b.find("li[parent_id\x3d'"+c+"']").each(function(a){$(this).removeClass("hide")}),!0):!1},renderOthers:function(e){var c=$(this.el),b=c.find("#membersearch-keywords").val(),c=c.find("#membersearch-keywords").attr("placeholder");b==c&&(b=null);switch(this.dataType){case "all":url="/users.json";$("#listTitle").text("\u6240\u6709\u6210\u5458");break;case "subordinate":url=
"/users/workreportSubordinates/"+this.userId+".json?allSubordinate\x3d"+e,$("#listTitle").text("\u6211\u7684\u4e0b\u5c5e")}this.fetchData(url,b)},fetchData:function(e,c,b,a){var d=this,g=$(this.el);$.ajax({type:"get",url:e,dataType:"json",data:{pageNo:d.pageNO,pageSize:10,userName:c},success:function(c){var e=[],k=[],e=c.page||[],k=e.result||[];"subordinate"==d.dataType&&(k=c.subordinates?c.subordinates:e.result||[]);g.find(".more").remove();for(c=0;c<k.length;c++){var f=k[c];f&&f.id!=TEAMS.currentUser.id&&
d.buildUser(f,b,a)}e&&e.hasNext&&g.find("#members").append('\x3cli class\x3d"more"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/li\x3e')}})},buildUser:function(e,c,b){var a=$(this.el),d=e.username,g=e.id,l=$("#userClone").clone(),f=e.avatar?"/base/download/"+e.avatar.p3:"images/avatar.png";"subordinate"==this.dataType?(l.find("li").attr("dele_id",e.id),e.subordinate&&l.find(".j_expend").addClass("caret"),b&&l.find("li").attr("parent_id",b),g==TEAMS.currentUser.id?(l.find(".j_user").removeClass("j_user"),
l.find("#avatar").attr("href","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).find("img").attr("src",f),l.find("#name").attr("href","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).text(d)):(l.find("#avatar").attr("url","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).find("img").attr("src",f),l.find("#name").attr("url","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).text(d))):(l.find(".j_user").removeClass("j_user"),l.find(".j_expend").remove(),
l.find("#avatar").attr("href","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).find("img").attr("src",f),l.find("#name").attr("href","/"+this._module+"/"+g).attr("user-id",g).attr("user-name",d).text(d));c?$(c).after(l.html()):a.find("#members").append(l.html())},remove:function(){$(this.el).off(".UserSlider")}});m.exports=h});
define("teams/component/shareallview",["teams/utils","teams/component/typeahead","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/sharemodel");h=Backbone.View.extend({partEl:"",shareEl:"",initialize:function(b){this.parentEl=b.parentEl;this.partEl=this.parentEl+" "+b.partContainer;this.shareEl=this.parentEl+" "+b.shareContainer;this.entityId=b.entityId;this.serverPath=b.serverPath;this._module=b.module;this.model=new c({entityIds:this.entityId,
module:this._module,serverPath:this.serverPath});b.partContainer&&$(this.partEl).html(f.template("share.simpleshare",{panel:"participants"}));$(this.shareEl).html(f.template("share.shareall",{panel:"share"}));"mainline"==this._module||"task"==this._module||"workreport"==this._module?$(this.shareEl).find("#share-select").addClass("hide"):"saleChance"!=this._module&&"production"!=this._module||$(this.shareEl).find('#share-select option[value\x3d"group"]').remove()},delegateEvents:function(){var b=this;
$(b.shareEl).off("click",".j_more_show").on("click ",".j_more_show",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(b.shareEl+" #"+d).children(".j_entity_item").show()});$(b.partEl).off("click",".j_more_show").on("click ",".j_more_show",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(b.partEl+" #"+d).children(".j_entity_item").show()});$(b.shareEl).off("click",
".j_more_hide").on("click ",".j_more_hide",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.shareEl+" #"+d).find(".j_entity_item:lt(5)").show();$(b.shareEl+" #"+d).find(".j_entity_item:gt(4)").hide()});$(b.partEl).off("click",".j_more_hide").on("click ",".j_more_hide",function(a){a.stopPropagation();a=$(this);var d=a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.partEl+" #"+d).find(".j_entity_item:lt(5)").show();
$(b.partEl+" #"+d).find(".j_entity_item:gt(4)").hide()});$(b.shareEl).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))});$(b.partEl).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))});$(b.shareEl).find("#share-select").change(function(){val=$(this).val();"all"==val?($(".sharetype-dept").addClass("hide"),$(".sharetype-group").addClass("hide"),$(".sharetype-user").removeClass("hide"),
$(b.shareEl).find("#editShare").removeClass("hide"),$(b.shareEl).find(".typeahead-wrapper").addClass("hide"),$(this).val("user"),b.save(val,[{id:0}],"sharer")):"group"==val?($(".sharetype-dept").addClass("hide"),$(".sharetype-group").removeClass("hide"),$(".sharetype-user").addClass("hide")):"department"==val?($(".sharetype-dept").removeClass("hide"),$(".sharetype-group").addClass("hide"),$(".sharetype-user").addClass("hide")):"user"==val&&($(".sharetype-group").addClass("hide"),$(".sharetype-dept").addClass("hide"),
$(".sharetype-user").removeClass("hide"))});e([{el:b.shareEl+" .sharetype-group input",callback:function(a){b.save("group",[a],"sharer")}},{el:b.shareEl+" .sharetype-dept input",callback:function(a){b.save("department",[a],"sharer")}},{el:b.shareEl+" .sharetype-user input",callback:function(a){b.save("user",a,"sharer")}}]);this.partEl&&e({el:b.partEl+" #typeahead-participants",callback:function(a){b.save("user",a,"participants")}})},deleteEvent:function(b){var a=this,d=b.prevAll("a").attr("id"),c=
b.prevAll("a").attr("data-value"),e=b.parents(".entity-container"),n=e.attr("data-url");if(n&&c){var k=b.parent(),r=e.data("param")||{};r._method="delete";var p=a.serverPath||"";b=function(b){b&&$.ajax({type:"POST",dataType:"json",data:r,url:p+n.replace("{id}",c),success:function(b){k.remove();e.trigger("removeEntity",b);$("#stream").trigger("insertStream",b.streams||b.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");a.callbacks&&a.callbacks.unlink&&a.callbacks.unlink(c,
b.streams||b.stream)}})};e.attr("data-noConfirm")?b(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",b)}else b.parent().hasClass("tag")||(b.parent(".entity-item").remove(),e.trigger("removeEntity",d))},render:function(b,a){var d=this.model,c=this;c.entityId&&(a?d.query(function(a){c.createShareEntryLink(a.shareEntrys);c.shareEntrys=a.shareEntrys}):(c.shareEntrys=b,c.createShareEntryLink(b)));c.renderMoreType("#participants");c.renderMoreType("#shareentrys")},renderMoreType:function(b){if(b){var a=
$(this.parentEl).find(b).children(),d=a.length;$(this.parentEl+" "+b+" .j_more_show");if(5<d){for(var c=5;c<d;c++)$(a[c]).hide();$(this.parentEl).find(b).find(".j_more_btn").remove();a=b&&1<b.length&&b.substr(1)||"";$(this.parentEl).find(b).append('\x3cspan class\x3d"j_more_btn"\x3e\x3cspan class\x3d"j_more_show" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_more_hide hide" data-type\x3d"'+a+'"\x3e\x3ca\x3e\u6536\u8d77\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e')}}},
save:function(b,a,d){var c=this,e=this.model;if(a&&!$.isEmptyObject(a)){if("sharer"==d){if("all"==b&&0<$(this.shareEl).find("#shareentrys a[userid\x3d0]").length){f.notify("\u5df2\u5171\u4eab\u7ed9\u6240\u6709\u4eba,\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0");return}if("department"==b&&0<$(this.shareEl).find("#shareentrys a[userid\x3d"+a[0].id+"]").length){f.notify("\u5df2\u5171\u4eab\u7ed9\u8be5\u90e8\u95e8,\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0");return}if("user"==b&&0<$(this.shareEl).find("#shareentrys a[userid\x3d"+
a.id+"]").length){f.notify("\u5df2\u5b58\u5728\u5171\u4eab\u4eba,\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0");return}}var n="";a=$.isArray(a)?a:[a];for(var k=[],r=0;r<a.length;r++){var p=a[r];if("sharer"==d){if(c.hasUser(p.id,$(c.shareEl).find("#shareentrys")))continue}else if("participants"==d&&c.hasUser(p.id,$(c.partEl)))continue;n+=p.id+",";k.push({sid:p.id,name:p.name,shareType:d})}n=n.substring(0,n.length-1);e.sids=n;e.entryType=b;e.shareType=d;c.shareEntrys||(c.shareEntrys=[]);c.entityId?("all"==
b&&f.notify("\u5171\u4eab\u7ed9\u6240\u6709\u4eba\u65f6\uff0c\u64cd\u4f5c\u65f6\u95f4\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85..."),e.saveAll(function(a){a.msg?f.notify(a.msg):(c.createShareEntryLink(a.shareEntrys),c.shareEntrys.add(a.shareEntrys),"sharer"==d&&(a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5df2\u6dfb\u52a0\u5171\u4eab\u4eba")),"participants"==d&&(a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5df2\u6dfb\u52a0\u53c2\u4e0e\u4eba")),$(c.parentEl).find("#stream").trigger("insertStream",
a.streams),$(c.parentEl).find("#readinfo").trigger("insertReadInfo",[c.entityId,c.shareEntrys]))})):(c.createShareEntryLink(k),c.shareEntrys.push(k))}},createShareEntryLink:function(b){if(b)for(var a=0;a<b.length;a++){var d=b[a],c=d.shareType,e="",f="usercard-toggle";if("sharer"==c){0==d.sid?(d.name="\u6240\u6709\u4eba",f=""):"department"==d.entryType?f="":"group"==d.entryType&&(""==d.name&&(d.name="\u672a\u547d\u540d(\u7fa4\u7ec4)"),f="");if(this.hasUser(d.sid,$(this.shareEl).find("#shareentrys")))continue;
$(this.shareEl).removeClass("hide");$(this.parentEl).find($(this.shareEl).attr("icon")).parent().addClass("hide");e="#shareentrys"}else if("participants"==c){if(this.hasUser(d.sid,$(this.partEl)))continue;$(this.partEl).removeClass("hide");e="#participants";$(this.parentEl).find($(this.partEl).attr("icon")).parent().addClass("hide")}d.id||(d.id=d.sid,$(this.parentEl).find(e).attr("data-url",""));c='\x3cspan class\x3d"entity-item j_entity_item"\x3e \x3ca class\x3d"'+f+'" id\x3d"'+d.sid+'" data-value\x3d"'+
d.id+'" userId\x3d"'+d.sid+'""\x3e\x3cspan class\x3d"j_shareEntry_name hide"\x3e'+d.name+"\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e";0<$(this.parentEl).find(e+" .j_more_btn").length&&""!=e?$(this.parentEl).find(e+" .j_more_btn").before(c):$(this.parentEl).find(e).append(c);this.renderShareEmpImg(d,$(this.parentEl).find(e))}},renderShareEmpImg:function(b,a){var d="";"mainline"==this._module||"task"==this._module||"workreport"==this._module?b.shareEmp&&(d=b.shareEmp,d="\x3cimg class\x3d'avatar' src\x3d'"+
(d.avatar&&d.avatar.p5&&"/base/download/"+d.avatar.p5||"images/avatar.png")+"' /\x3e",a.find("#"+b.sid).prepend($(d))):"user"==b.entryType&&(d=b.avatar?"\x3cimg class\x3d'avatar' src\x3d'/base/download/"+b.avatar.p5+"' /\x3e":"\x3cimg class\x3d'avatar' src\x3d'images/avatar.png' /\x3e",a.find("#"+b.sid).prepend($(d)));a.find("#"+b.sid+" .j_shareEntry_name").removeClass("hide")},findEmployeeId:function(){var b="";if(this.shareEntrys)for(var a=0;a<this.shareEntrys.length;a++)b+=this.shareEntrys[a].sid+
",";return b},getLinkIds:function(){var b=[];$(this.shareEl).find(".entity-item").each(function(){b.push($(this).find("a").attr("data-value"))});return b},hasUser:function(b,a){var d=!1;a.find("a").each(function(){var a=$(this).attr("userid");parseInt(a)==parseInt(b)&&(d=!0)});return d}});m.exports=h});
define("teams/component/departmentselector",["teams/component/template","teams/org/treeview"],function(h,q,m){var f=h("teams/component/template"),e=h("teams/org/treeview");window.DepartmentSelector=Backbone.View.extend({initialize:function(c){this.$el=c=c.$el;this.entity=c.attr("data-entity");this.module=c.attr("module");this.multi=c.attr("data-multi");this.winEl="#selector-"+this.entity;c=f["selector."+this.entity];$("body").append(c)},delegateEvents:function(){var c=this,b=$(c.winEl);$("body").on("keydown.depart-win",
function(a){27==a.which&&b.modal("hide")});b.on("hidden.bs.modal",function(){c.remove()})},open:function(){$(this.winEl).modal("toggle");this._loadDepartment()},close:function(){$(this.winEl).modal("hide")},_loadDepartment:function(){var c=this;c.treeView=new e({el:"#selector-org-tree",hasUrl:!1,editable:!1,readonly:!0,noUrl:!0});c.treeView.render(null,function(){$("#selector-org-tree").on("click.depart-win",".treenode",function(b){b.preventDefault();b=$(this).data("node");c.close();c.$el.trigger("confirmHandler",
{objs:b})})})},remove:function(){var c=$(this.winEl);$("#selector-org-tree").off(".depart-win");c.remove();this.treeView&&(this.treeView.remove(),this.treeView=null)}});m.exports=window.DepartmentSelector});
define("teams/component/extendview","teams/utils teams/component/streamview teams/component/commentview teams/component/readinfoview teams/component/typeahead teams/component/formdatalogview teams/crm/CrmService".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/streamview"),c=h("teams/component/commentview"),b=h("teams/component/readinfoview"),a=h("teams/component/typeahead"),d=h("teams/component/formdatalogview"),g=h("teams/crm/CrmService");h=Backbone.View.extend({initialize:function(a){this.container=
a.container;this.el=(this.parentEl=a.parentEl)?this.parentEl+" "+this.container:this.container;this.targetId=a.targetId;this.subtargetId=a.subtargetId||"";this.serverPath=a.serverPath;this._module=a.module;"formdatareport"==this._module?($(this.el).html(f.template("base.extend")),$(this.el+" #formDataLog").removeClass("hide")):$(this.el).append(f.template("base.extend"));$(this.el).find(".extend-panel-toggle ."+this._module).removeClass("hide");$(this.el).off(".extend");"mainline"==this._module&&
$(this.el+" .extend-otherblog").removeClass("hide");"workflow"==this._module&&$(this.el+" #formDataLog").removeClass("hide");this.crmService=new g},delegateEvents:function(){var b=this,d=$(b.el);d.on("click.extend",".extend-panel-toggle:not(.active)",function(a){a=$(".extend-panel-toggle.active");a.removeClass("active");a=a.attr("data-panel");$(this).addClass("active");var c=$(this).attr("data-panel");b.initView(c);d.find("#"+a+"-panel").fadeOut(200,function(){d.find("#"+c+"-panel").fadeIn(200);"comment"==
c&&d.find("#comment-textarea").focus()})});d.on("click.extend","#comments-filter .btn-filter",function(a){if($(this).hasClass("open")){$(this).removeClass("open");var d=$(this).attr("data-toggle");(a=$(this).data("showTimer"))&&clearTimeout(a);$(this).removeData("showTimer");$(d).slideUp(10)}else $(this).addClass("open"),$(b.el+" #check-"+b._module).removeClass("hide"),d=$(this).attr("data-toggle"),a=setTimeout(function(){$(d).slideDown("fast")},10),$(this).data("showTimer",a)});a({el:b.el+" #other-employee input",
callback:function(a){if(a&&!$.isEmptyObject(a)){a=$.isArray(a)?a:[a];for(var d=0;d<a.length;d++){var c=a[d];0==$(b.el+" #commentor-list #"+c.id).size()&&$(b.el+" #commentor-list").append("\x3cspan id\x3d"+c.id+" class\x3d'entity-item'\x3e\x3ca data-value\x3d"+c.id+"\x3e"+c.name+"\x3c/a\x3e\x3cbutton type\x3d'button' class\x3d'close hide' title\x3d'\u5220\u9664'\x3e\u00d7\x3c/button\x3e\x26nbsp;\x3c/span\x3e")}a=$(b.el+" #check-"+b._module);b.commentView&&(b.commentView.model.pageNo=1,b.commentView.searchByIds(a))}}});
d.on("click.commentView","#comment-filter  .close",function(a){$(this).parent().remove();a=$(b.el+" #check-"+b._module);b.commentView&&(b.commentView.model.pageNo=1,b.commentView.searchByIds(a))});d.on("click.commentView","#comment-filter input[type\x3d'checkbox']",function(a){a=$(this).parents(".check");b.commentView&&(b.commentView.model.pageNo=1,b.commentView.searchByIds(a))})},initView:function(a){if(this.targetId){var g=this;switch(a){case "stream":g.streamView||(g.streamView=new e({container:"#stream-panel",
parentEl:g.parentEl,targetId:g.targetId,serverPath:g.serverPath}),g.streamView.render());break;case "comment":g.commentView||("customer"==g._module?g.crmService.findPropertyByTypeAndKey("visittype",function(a){a.status="success";g.commentView=new c({targetId:g.targetId,subtargetId:g.subtargetId,module:g._module,parentEl:g.parentEl,container:"#comment-panel",serverPath:g.serverPath,contactTypes:a.data});g.commentView.render();$("#comment-visittype ul").html('\x3cli\x3e\x3ca  class\x3d"current" value\x3d""\x3e\u8054\u7cfb\u7c7b\u578b\x3c/a\x3e\x3c/li\x3e');
for(var b=0;b<a.data.length;b++)$("#comment-visittype ul").append('\x3cli\x3e\x3ca title\x3d"'+a.data[b].name+'" value\x3d"'+a.data[b].markValue+'"\x3e'+f.getStrLength(a.data[b].name,5,"...")+"\x3c/a\x3e\x3c/li\x3e");$(g.el).find("#comment-contact").addClass("hide");$("#contactDetail").trigger("commentLoaded.ContactDetail")}):(g.commentView=new c({targetId:g.targetId,subtargetId:g.subtargetId,module:g._module,parentEl:g.parentEl,container:"#comment-panel",serverPath:g.serverPath}),g.commentView.render()));
break;case "unread":g.readinfoView||(g.readinfoView=new b({targetId:g.targetId,module:g._module,parentEl:g.parentEl,container:"#unread-panel",target:g.target,userId:g.userId,serverPath:g.serverPath}));g.readinfoView.render();break;case "formDataLog":g.formDataLogView||(g.formDataLogView=new d({formDataId:g.formDataId,parentEl:g.parentEl,container:"#formDataLog-panel"}),g.formDataLogView.render())}}},render:function(a){this.target=a;this.initView("comment");$(this.el).find("#comment-panel").fadeIn(200)},
insertOneComment:function(a){this.commentView.insertOneComment(a)},remove:function(){$(this.el).off(".extend");this.commentView&&(this.commentView.remove(),this.commentView=null)}});m.exports=h});
define("teams/component/trashbinmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.pageSize=10},queryTrash:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/trashbin/queryTrash.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},queryTrashLog:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/trashbin/queryTrashLog.json",dataType:"json",
data:JSON.stringify(f),success:function(c){e&&e(c)}})},recover:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/trashbin/recover.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},thorougDestroy:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/trashbin/thorougDestroy.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/attachment",["teams/utils","teams/base/preview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/base/preview");h=Backbone.View.extend({el:"",targetId:"",initialize:function(c){this.container=c.container;this.el=(this.parentEl=c.parentEl)?this.parentEl+" "+this.container:this.container;this.callback=c.callback;this.targetId=c.targetId;this._module=c.module;this.readonly=c.readonly;this.callbacks=c.callbacks;$(this.el).html(f.template("component.attachment"))},delegateEvents:function(){var c=
this,b=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:c.el,browse_button:c.el+" #pickFiles",drop_element:c.el+" #upload-wrap",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?refId\x3d"+c.targetId+"\x26module\x3d"+c._module+"\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});b.init();b.bind("FilesAdded",function(a,b){$.each(b,function(a,b){$(c.el).find(".entity-container").append(f.template("base.newattachment",
b))});a.refresh();a.start();$(c.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})});b.bind("UploadProgress",function(a,b){$("#"+b.id+" i").html(b.percent+"%")});b.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});
b.bind("FileUploaded",function(a,b,g){a=jQuery.parseJSON(g.response);g=a.fileObj;c.callback&&c.callback(a);c.callbacks&&c.callbacks.link&&c.callbacks.link(g,a.stream);$(c.container).trigger("FileUploaded",g);f.notify("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f");$("#"+b.id).parent().replaceWith(f.template("base.attachment",g));$("#stream").trigger("insertStream",a.stream);$("#"+g.id).children().addClass("remoteDownload").data("dlid",g.id);(new e({container:$("body"),afterJqObj:$("#"+g.id).children(),fileObj:g})).render()});
$("#upload-wrap").addClass(b.runtime);$(this.el).on("addAttachment",function(a){"html5"==b.runtime&&(a=document.getElementById(b.id+"_html5"))&&!a.disabled&&a.click()});$(this.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();a=$(this).prevAll("a").attr("id");var b=$(this).prevAll("a").attr("data-value"),g=$(this).parents(".entity-container"),e=g.attr("data-url");if(e&&b){var n=$(this).parent(),k=g.data("param")||{};k._method="delete";f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",
function(a){a&&$.ajax({type:"POST",dataType:"json",data:k,url:e.replace("{id}",b),success:function(a){n.remove();g.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");c.callbacks&&c.callbacks.unlink&&c.callbacks.unlink(a.fileObj,a.stream)}})})}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),g.trigger("removeEntity",a))})},render:function(c){this.readonly&&
($(this.el+" #upload-wrap").remove(),$(this.el).find(".entity-container").removeAttr("data-url").attr("undeletable",!0));if(c){var b=$(this.el).find(".entity-container");b.data("param",{refId:this.targetId});for(var a=0,d=c.length;a<d;a++){var g=c[a];b.append(f.template("base.attachment",g));b.find("#"+g.id).children().addClass("remoteDownload").data("dlid",g.id);(new e({container:b,afterJqObj:b.find("#"+g.id).children(),fileObj:g})).render()}0<c.length&&($(this.el).slideDown(300),$(this.parentEl).find($(this.el).attr("icon")).parent().addClass("hide"));
$(this.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}},getLinkIds:function(){var c=[];$(this.el).find(".entity-item").each(function(){c.push($(this).find("a").attr("data-value"))});return c},remove:function(){this.undelegateEvents();this.uploader&&(this.uploader.destroy(),this.uploader=null)}});m.exports=h});
define("teams/component/permissionview",["teams/utils"],function(h,q,m){h("teams/utils");h=Backbone.View.extend({initialize:function(f){this.module=f.module;this.el=f.container;this.rank=TEAMS.currentUser.rank},render:function(f){this.permission=f;this.renderPermission()},renderPermission:function(){$(this.el);this.controlPage(this.permission)},controlPage:function(f){var e=$(this.el),c=this.module;switch(f){case 1:this.readControl(e,c);break;case 3:e.find(".acl-w-container .control-btn").addClass("hide");
e.find(".acl-w-container .entity-container").attr("undeletable",!0);e.find(".acl-w-hide").addClass("hide");e.find(".acl-w-container-disabled").find("input,textarea").attr("disabled",!0);break;case 7:e.find(".acl-p-hide").addClass("hide");break;case 31:break;default:this.readControl(e,c)}},readControl:function(f,e){f.find(".acl-disabled").prop("disabled",!0);f.find(".acl-hide").addClass("hide");f.find(".entity-container").attr("undeletable",!0);f.find("#tags.entity-container").removeAttr("undeletable");
f.find(".acl-r-container-disabled").find("input,textarea").attr("disabled",!0);f.find(".acl-w-container-disabled").find("input,textarea").prop("disabled",!0);f.find(".links-control-group").find("a:not(#i-share)").parent().addClass("hide");this.canTag("#i-tag")},canTag:function(f){$("div[icon\x3d'#i-ctag']").find(".btn-sm").remove();$("div[icon\x3d'#i-ctag']").find(".entity-container").attr("undeletable",!0);$("div[icon\x3d'"+f+"']").hasClass("hide")?$(f).parent().removeClass("hide"):$(f).parent().addClass("hide")},
renderLock:function(f){var e=$(this.el);f?e.find("#task-lock").removeClass("hide"):e.find("#task-lock").addClass("hide")}});m.exports=h});
define("teams/component/formdatalogmodel",function(h,q,m){h=Backbone.Model.extend({page:{pageNo:1},initialize:function(f){this.formDataId=f.formDataId},findFormDataLogs:function(f){var e=this;$.ajax({type:"post",url:"/formdatalog/findFormDataLogs.json",dataType:"json",data:{pageNo:this.page.pageNo,formDataId:this.formDataId},success:function(c){e.page=c.page;f&&f(c)}})}});m.exports=h});
define("teams/component/wechat",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({el:"#body",initialize:function(e){this.obj=e.obj;this.obj.attr("targetId")&&(this.targetId=this.obj.attr("targetId"));this.obj.attr("userId")&&(this.userId=this.obj.attr("userId"));this.obj.attr("module")&&(this.module=this.obj.attr("module"))},render:function(e){$("body").append(f.template("component.wechat"));e=e?e:window.event;var c=e.pageX||e.clientX+document.body.scroolLeft;e=e.pageY||
e.clientY+document.body.scrollTop;e+145>$(window).height()&&(e=e-145-30);c+300>$(window).width()&&(c-=320);$("#wechat-div").css("left",c+"px");$("#wechat-div").css("top",e+20+"px");this.htmlEvents()},htmlEvents:function(){var e=this;$("body").on("click.wechat",function(c){e.remove()});$(this.obj).on("click.wechat",function(){e.remove()});$("#wechat-div").on("click.wechat",function(c){c.stopPropagation()});$("#wechat-div").off("click.wechat","#wechat-submit").on("click.wechat","#wechat-submit",function(){0<
$("#wechat-textarea").val().length?e.userId&&e.userId!=TEAMS.currentUser.id?e.send():e.targetId&&e.module&&e.sendChannel():f.notify("\u8f93\u5165\u5fae\u4fe1\u6d88\u606f")});$("#wechat-div").off("click.wechat","#wechat-cancle").on("click.wechat","#wechat-cancle",function(){e.remove()})},send:function(){var e={};e.message=$("#wechat-textarea").val();e.userId=this.userId;$.ajax({type:"get",url:"/chatmessage/wechatSend.json",dataType:"json",data:e,success:function(c){f.notify(c.logMessage);$("#wechat-textarea").val("")}})},
sendChannel:function(){var e="",c=!0;$("#"+this.module).find("input[type\x3d'checkbox']:checked").each(function(){e+=$(this).val()+",";c=!0});if(c){var b={chatType:"channel"};b.message=$("#wechat-textarea").val();b.checkStr=e;b.objId=this.targetId;b.module=this.module;$.ajax({type:"get",url:"/chatmessage/wechatSend.json",dataType:"json",data:b,success:function(a){f.notify(a.logMessage);$("#wechat-textarea").val("")}})}},remove:function(){$("#wechat-div").off(".wechat");$(this.obj).off(".wechat");
$("body").off(".wechat");$("#wechat-div").remove()}});m.exports=h});
define("teams/component/relevanceview",["teams/utils","teams/component/relevancemodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/relevancemodel"),c=h("teams/component/typeahead");h=Backbone.View.extend({tpl:'\x3ca class\x3d"entitybox-toggle" data-value\x3d"\x3c%\x3dtargetId%\x3e" data-module\x3d"\x3c%\x3dtargetModule%\x3e" data-id\x3d"\x3c%\x3dtargetId%\x3e"\x3e\x3c%\x3d_.escape(targetName||name)%\x3e\x3c/a\x3e',initialize:function(b){this.container=
b.container;this.el=(this.parentEl=b.parentEl)?this.parentEl+" "+this.container:this.container;this.objectId=b.objectId;this.callbacks=b.callbacks;this._module=b.module;this._targetModule=b.targetModule;this._moduleLabel=b.moduleLabel||"\u5173\u3000\u8054:";this._moduleDisplay=b.moduleDisplay||!1;this._iModelTitle=b.iModelTitle||"\u6dfb\u52a0\u5173\u8054";"calendar"==this._targetModule?$(this.el).html(f.template("component.relevance",{targetModule:"agenda",module:this._module,moduleLabel:this._moduleLabel,
iModelTitle:this._iModelTitle})):$(this.el).html(f.template("component.relevance",{targetModule:this._targetModule,module:this._module,moduleLabel:this._moduleLabel,iModelTitle:this._iModelTitle}));this.model=new e;$(this.el).find(".entity-container").attr("data-url","/relevance/delete/"+this.objectId+"/{id}.json")},delegateEvents:function(){var b=this,a=$(this.el),d=a.find(".control-label i");this._targetModule?d.removeClass().addClass("graph graph-16-"+b._targetModule):d.removeClass().addClass("graph graph-16-link");
a.off("newRelevance","#relevance").on("newRelevance","#relevance",function(a,d){b.createRelevanceBox(d)});a.off("entitySelected",".entity-toggle").on("entitySelected",".entity-toggle",function(a){if(b.isEmptyTarget())for(var d=1;d<arguments.length;d++){var c=arguments[d];if(!b.findSeleted(c.id)){var e={};e.targetId=c.id;e.targetModule=c.module;e.targetName=c.name;b.createRelevanceBox(e)}}else{c="";for(d=1;d<arguments.length;d++)if(e=arguments[d],!b.findSeleted(e.id))var r=e.name,r=r+(e.serNum?e.serNum:
""),c=c+('{"objectId":"'+b.objectId+'", "objectModule":"'+b._module+'", "targetId":"'+e.id+'", "targetModule":"'+b._targetModule+'", "targetName":"'+r+'"},');c&&(c=c.substring(0,c.length-1),b.model.newRelevanceByList('{"relevances":['+c+"]}",function(a){var d=a.streams;if(d&&!(0>=d.length)){f.notify("\u5173\u8054\u6210\u529f");for(var c=0;c<d.length;c++)$("#stream").trigger("insertStream",d[c]);a=a.relevances;for(c=0;c<a.length;c++)b.createRelevanceBox(a[c]);b.callbacks&&b.callbacks.link&&b.callbacks.link(a,
d,!0)}}))}});c({el:b.el+" #typeahead-relevance",callback:function(a){b.newRelevance(a)}});a.on("click.relevance",".relevance-module",function(d){$(b.el+" .dropdown-menu li").removeClass("active");$(this).parent().addClass("active");a.find(".typeahead-search").attr("module",$(this).attr("data-entity"));b.changePlaceholder($(this).attr("data-entity"))});a.on("remove.relevance",".entitybox-toggle",function(a){$(this).parent(".entity-item").remove()});a.off("click",".entity-item .close").on("click ",
".entity-item .close",function(a){a.stopPropagation();a=$(this).prevAll("a").attr("id");var d=$(this).prevAll("a").attr("data-value"),c=$(this).parents(".entity-container"),e=c.attr("data-url");if(e&&d){var r=$(this).parent(),p=c.data("param")||{};p._method="delete";f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(a){a&&$.ajax({type:"POST",dataType:"json",data:p,url:e.replace("{id}",d),success:function(a){r.remove();c.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||
a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");b.callbacks&&b.callbacks.unlink&&b.callbacks.unlink(a.relevance,a.streams||a.stream)}})})}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),c.trigger("removeEntity",a))});a.off("click",".j_more_show").on("click ",".j_more_show",function(a){a.stopPropagation();a=$(this);a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");$(b.el+" #relevance").children(".j_entity_item").show()});
a.off("click",".j_more_hide").on("click ",".j_more_hide",function(a){a.stopPropagation();a=$(this);a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.el+" #relevance").find(".j_entity_item:lt(5)").show();$(b.el+" #relevance").find(".j_entity_item:gt(4)").hide()})},render:function(b){if(b){for(var a=0,d=b.length;a<d;a++){var c=b[a];"calendar"==c.targetModule&&(c.targetModule="agenda");this.createRelevanceBox(c)}this.renderMoreType(b)}},renderMoreType:function(b){if(b&&
0!=b.length&&5<b.length){b=b.length;for(var a=$(this.el+" #relevance").children("span"),d=5;d<b;d++)$(a[d]).hide();$(this.el+" #relevance").find(".j_more_btn").remove();b=this.container&&1<this.container.length&&this.container.substr(1)||$(this.el).attr("id");b='\x3cspan class\x3d"j_more_btn"\x3e\x3cspan class\x3d"j_more_show" data-type\x3d"'+b+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_more_hide hide" data-type\x3d"'+b+'"\x3e\x3ca\x3e\u6536\u8d77\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e';
$(this.el+" #relevance").append(b)}},changePlaceholder:function(b){$(this.el).find("#typeahead-relevance").attr("placeholder","\u8f93\u5165"+this.getModuleName(b))},createRelevanceBox:function(b){if(b){"calendar"==b.targetModule&&(b.targetModule="agenda");var a=_.template(this.tpl,b),d="";this._moduleDisplay&&(d="\x3cb\x3e["+this.getModuleName(b.targetModule)+"]\x3c/b\x3e");a='\x3cspan id\x3d"'+b.targetId+'" class\x3d"entity-item j_entity_item"\x3e'+d+""+a+"\x3c/span\x3e";0<$(this.el).find("#relevance .j_more_btn").length?
$(this.el).find("#relevance .j_more_btn").before($(a)):$(this.el).find(".entity-container").append($(a));$(this.el).removeClass("hide");$(this.parentEl).find($(this.el).attr("icon")).addClass("hide");this.createEntityObject(b)}},createEntityObject:function(b){var a={};a.id=b.targetId;a.name=b.targetName;$(this.el).find(".entity-container").find("#"+b.targetId).data("object",a)},findSeleted:function(b){return 1==$(this.el+" .relevance-container #"+b).size()?!0:!1},newRelevance:function(b){var a=this,
d=a.model;d.objectId=a.objectId;d.objectModule=a._module;d.targetId=b.id;d.targetModule=b.module;d.targetName=b.name;a.findSeleted(b.id)?f.notify("\u5173\u8054\u5df2\u7ecf\u5b58\u5728"):a.objectId?a.objectId==b.id?f.notify("\u65e0\u6cd5\u5173\u8054\u81ea\u5df1"):d.newRelevance(function(d){var c=d.relevance;c&&(c.targetName=b.name,a.createRelevanceBox(c),f.notify("\u5173\u8054\u6210\u529f"),$("#stream").trigger("insertStream",d.stream),a.callbacks&&a.callbacks.link&&a.callbacks.link(c,d.stream,!1))}):
(d={},d.targetId=b.id,d.targetName=b.name,d.targetModule=b.module,a.createRelevanceBox(d))},getModuleName:function(b){switch(b){case "document":return"\u6587\u6863";case "workflow":return"\u5ba1\u6279";case "customer":return"\u5ba2\u6237";case "task":return"\u4efb\u52a1";case "mainline":return"\u9879\u76ee";case "calendar":return"\u65e5\u7a0b"}},changeModule:function(b){$(this.el+" .typeahead-search").attr("module",b)},isEmptyTarget:function(){return this.objectId&&""!=$.trim(this.objectId)&&"new"!=
$.trim(this.objectId)?!1:!0},remove:function(){}});m.exports=h});
define("teams/component/commentreplay","teams/face/emojiarea teams/utils teams/component/atmeview teams/component/commentmodel teams/component/validation teams/component/userselector".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/component/atmeview"),b=h("teams/component/commentmodel"),a=h("teams/component/validation");h("teams/component/userselector");h=Backbone.View.extend({el:"",boxContainer:".comment-box",commentObj:"",initialize:function(a){f($);this.el=
a.container;this.targetId=a.targetId;this.subtargetId=a.subtargetId;this.serverPath=a.serverPath;this._module=a.module;a.boxContainer&&(this.boxContainer=a.boxContainer);$(this.el).append(e.template("base.commentreplay"));this.model=new b({module:this._module,targetId:this.targetId,serverPath:this.serverPath});this.cachedata={};this.atmeview=new c({$input:$("#at-comment-content")})},delegateEvents:function(){var b=this,c=this.model;$(b.el).off("confirmHandler",".commentreplay-share").on("confirmHandler",
".commentreplay-share",function(a,b){var d=b.objs;d&&!$.isEmptyObject(d)&&$(this).parent().find(".transmit-parent-commenter").html("@"+d.username+":  ").attr("data-entity",d.id)});$(b.el).off("click.datePicker",".transmitDuedate").on("click.datePicker",".transmitDuedate",function(){$(this).datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,minView:"month",showMeridian:!1,initialDate:new Date});$(this).datetimepicker("show");$(this).off("click.datePicker")}).on("changeDate",
function(a){});$(b.el).on("focus.commentreplay",".comment-comment-content",function(){var a=$(this).parents(".replay-box");b.atmeview.$input=a.find(".comment-comment-content");b.atmeview.render()});$(b.el).off("click.commentreplay",".btn-replay").on("click.commentreplay",".btn-replay",function(){$(".btn-replay").attr("disabled","disabled");if(!a.formValidate($(this).parents(".replay-box")))return!1;var f=$(this).parents(b.boxContainer),n=$(this).parents(".replay-box"),k=n.find(".comment-comment-content").val(),
r=n.find(".comment-comment-content").data("userData");if(k){var p=[],s=[],h=k;if(r)for(var w=0;w<r.length;w++)if(-1!=k.indexOf(r[w].userName)){var v="@"+r[w].userName+" ";if(-1!=k.indexOf(v)){p.push(r[w].userId);var x=h.indexOf(v)+1;x==r[w].atIndex?s.push(r[w].userId+"-"+r[w].atIndex):s.push(r[w].userId+"-"+x)}for(var k=k.replace(v," "),x="",y=0;y<v.length;y++)x+="X";h=h.replace(v,x)}k&&(k=k.replace(/^\n+/g,""));c.content=k;c.parent=f.attr("id");c.attachments=[];c.targetId=b.targetId;c.contactid=
b.subtargetId||"";p&&(c.userIds=p);s&&(c.userIdIndex=s);c.save(function(a){$(".btn-replay").removeAttr("disabled");n.find(".comment-comment-content").val("");n.find(".comment-comment-content").blur();n.hide();var c=a.comment;b.commentObj?b.commentObj.trigger("insertComment",c):$(b.el).trigger("insertComment",c);c=c.parent;c.commentCount&&0<c.commentCount&&(f.find(".comment-comment-count").html("("+c.commentCount+")"),n.find(".commentComment-bottom").show(),n.find(".commentComment-count").html(c.commentCount),
n.find(".commentComment-commented").hide(),n.find(".commentComment-history-extend").show(),n.find(".commentComment-history-collapse").hide());$("#stream").trigger("insertStream",a.stream)})}else $(".btn-replay").removeAttr("disabled"),e.notify("\u8bf7\u8f93\u5165\u56de\u590d"),n.find(".comment-comment-content").focus()});$(b.el).on("click.commentreplay",".replay-cancel",function(){$(this).parents(".replay-box").hide()});$(b.el).on("click.commentreplay",".commentComment-history-extend",function(){var a=
$(this).parents(b.boxContainer),e=$(this).parents(".replay-box");e.data("commentCommentPageNo",1);e.find(".commentComment-history-extend").hide();e.find(".commentComment-history-collapse").show();e.find(".commentComment-commented-more").hide();a={"comment.parent.id":a.attr("id"),pageNo:e.data("commentCommentPageNo"),pageSize:e.data("commentCommentPageSize")};c.commentCommented(a,function(a){var c=a.page.result;c&&1<=c.length&&(e.find(".commentComment-commented .comment-commented-box").remove(),e.find(".commentComment-commented").show(),
a.page.totalPages>parseInt(e.data("commentCommentPageNo"))&&(e.find(".commentComment-commented-more").show(),e.data("commentCommentPageNo",parseInt(e.data("commentCommentPageNo"))+1)));for(a=0;a<c.length;a++)b.createCommentCommentedBox(c[a],e)})});$(b.el).on("click.commentreplay",".commentComment-history-collapse",function(){var a=$(this).parents(".replay-box");a.find(".commentComment-commented").hide();a.find(".commentComment-history-extend").show();a.find(".commentComment-history-collapse").hide()});
$(b.el).on("click.commentreplay",".commentComment-commented-more",function(){var a=$(this).parents(b.boxContainer),e=$(this).parents(".replay-box"),a={id:a.attr("id"),pageNo:e.data("commentCommentPageNo"),pageSize:e.data("commentCommentPageSize")};c.commentCommented(a,function(a){var c=a.page.result;a.page.totalPages<=parseInt(e.data("commentCommentPageNo"))&&e.find(".commentComment-commented-more").addClass("dn");e.data("commentCommentPageNo",parseInt(e.data("commentCommentPageNo"))+1);for(a=0;a<
c.length;a++)b.createCommentCommentedBox(c[a],e)})});$(b.el).on("keydown.commentreplay",".comment-comment-content",function(a){a.ctrlKey&&13==a.keyCode&&$(this).parents(".replay-box").find(".btn-replay").click()});$(b.el).on("click.commentreplay",".transmit-btn",function(){if(!a.formValidate($(this).parents(".transmit-box")))return!1;var f=$(this).parents(b.boxContainer),n=$(this).parents(".transmit-box"),k=n.find(".transmit-parent-commenter").attr("data-entity"),r=n.find(".transmit-content").val();
""==r&&(r=n.find(".transmit-content").attr("placeholder"));if(r&&0!=r.length){n.hide();var p=!1;r&&100<r.length&&(r=r.substring(0,100),p=!0);var s=n.find(".transmitDuedate").val(),s=s?Date.create(s):Date.create(TEAMS.nowTime),h=n.find(".transmit-parent-content").html(),k={"task.manager.id":k,"task.name":r,"task.content":h,"task.dueDate":s.format("{yyyy}-{MM}-{dd}"),"task.transmit.id":f.attr("id"),"task.transmit.targetId":b.targetId,group:null};c.newTask(k,function(a){var b=a.task.transmit;n.find(".transmit-content").val("");
n.find(".transmit-content").blur();b&&b.transmitCount&&0<b.transmitCount&&f.find(".comment-transmit-count").html("("+b.transmitCount+")");n.find(".transmit-bottom").show();b&&b.transmitCount&&n.find(".transmit-count").html(b.transmitCount);n.find(".transmit-transmited").hide();n.find(".transmit-history-extend").show();n.find(".transmit-history-collapse").hide();p?e.notify("\u5df2\u8f6c\u53d1\u4efb\u52a1\u534f\u4f5c,\u8bc4\u8bba\u5b57\u6570\u8d85100,\u4efb\u52a1\u6807\u9898\u81ea\u52a8\u622a\u53d6\u524d100\u5b57"):
e.notify("\u5df2\u8f6c\u53d1\u4efb\u52a1\u534f\u4f5c");$("#stream").trigger("insertStream",a.stream);$("#relevance").trigger("newRelevance",a.relevance)})}else e.notify("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a")});$(b.el).on("click.commentreplay",".transmit-cancel",function(){$(this).parents(".transmit-box").hide()});$(b.el).on("click.commentreplay",".transmit-history-extend",function(){var a=$(this).parents(b.boxContainer),e=$(this).parents(".transmit-box");e.data("transmitedPageNo",1);e.find(".transmit-history-extend").hide();
e.find(".transmit-history-collapse").show();e.find(".transmit-transmited-more").hide();a={id:a.attr("id"),pageNo:e.data("transmitedPageNo"),pageSize:e.data("transmitedPageSize")};c.transmited(a,function(a){var c=a.page.result;c&&1<=c.length&&(e.find(".transmit-transmited .transmited-box").remove(),e.find(".transmit-transmited").show(),a.page.totalPages>parseInt(e.data("transmitedPageNo"))&&(e.find(".transmit-transmited-more").show(),e.data("transmitedPageNo",parseInt(e.data("transmitedPageNo"))+1)));
for(a=0;a<c.length;a++)b.createTransmitedBox(c[a],e)})});$(b.el).on("click.commentreplay",".transmit-history-collapse",function(){var a=$(this).parents(".transmit-box");a.find(".transmit-transmited").hide();a.find(".transmit-history-extend").show();a.find(".transmit-history-collapse").hide()});$(b.el).on("click.commentreplay",".transmit-transmited-more",function(){var a=$(this).parents(b.boxContainer),e=$(this).parents(".transmit-box"),a={id:a.attr("id"),pageNo:e.data("transmitedPageNo"),pageSize:e.data("transmitedPageSize")};
c.transmited(a,function(a){var c=a.page.result;a.page.totalPages<=parseInt(e.data("transmitedPageNo"))&&e.find(".transmit-transmited-more").hide();e.data("transmitedPageNo",parseInt(e.data("transmitedPageNo"))+1);for(a=0;a<c.length;a++)b.createTransmitedBox(c[a],e)})});$(b.el).on("keydown.commentreplay",".transmit-content",function(a){a.ctrlKey&&13==a.keyCode&&$(this).parents(".transmit-box").find(".transmit-btn").click()})},undelegateEvents:function(){$(this.el).off("click.datePicker",".transmitDuedate");
$(this.el).off(".commentreplay")},showReplay:function(a,b,c){var e=this.model,f=a.parents(this.boxContainer).children(".replay-box");0==f.find(".commentreplay-emoji").length&&f.find("#at-comment-content").emojiarea({wysiwyg:!1,emojiHeight:-225,emojiLeft:-70,buttonClass:"commentreplay-emoji",buttonRoot:"#"+f.parents(".feedback-item").attr("id"),buttonChild:".comment-comment-btn-div"});if(f.is(":hidden")){f.next().hide();f.show();var r=a.offset().top;if($(window).height()-r<f.height()){var r=a.parents(".comment-box"),
p=r.attr("id");r.find("#commentScrollPosition").attr("id",p+"commentScrollPosition");setTimeout(function(){a.parents(".scrollwrapper").mCustomScrollbar("update");a.parents(".scrollwrapper").mCustomScrollbar("scrollTo","#"+p+"commentScrollPosition")},300)}}else f.hide();var r=a.parents(this.boxContainer).find(".comment-user").attr("userid")?a.parents(this.boxContainer).find(".comment-user").attr("userid"):a.parents(this.boxContainer).find(".commentor").find(".usercard-toggle").attr("userid"),s=a.parents(this.boxContainer).find(".comment-user").html()?
a.parents(this.boxContainer).find(".comment-user").html():a.parents(this.boxContainer).find(".commentor").find(".usercard-toggle").html(),h=f.find("#at-comment-content"),w=h.val();w?h.val("").focus().val(w):(h.val("").focus().val(""),h=[],w={},w.userId=r,w.userName=s,w.date=(new Date).getTime(),w.atIndex=1,h.push(w),f.find(".comment-comment-content").data("userData",h));this.atmeview.$input=f.find(".comment-comment-content");this.atmeview.render();f.find(".comment-comment-content").autosize().focus();
b&&(this._module=e._module=b);c&&(this.targetId=e.targetId=c)},showTransmit:function(a,b,c){var e=this.model,f=a.parents(this.boxContainer).children(".transmit-box");if(f.is(":hidden")){f.prev().hide();f.show();var r=a.offset().top;if($(window).height()-r<f.height()){var r=a.parents(".comment-box"),p=r.attr("id");r.find("#transmitScrollPosition").attr("id",p+"transmitScrollPosition");setTimeout(function(){a.parents(".scrollwrapper").mCustomScrollbar("update");a.parents(".scrollwrapper").mCustomScrollbar("scrollTo",
"#"+p+"transmitScrollPosition")},300)}}else f.hide();(r=f.find(".transmit-parent-content").text())&&(r=r.replace(/^\n+/g,""));var s=/[,|;|\uff0c|\uff1b|\u3002| |\n]/.exec(r);s&&(r=r.substring(0,s.index));r&&100<r.length&&(r=r.substring(0,100));f.find(".transmit-content").html(r);f.find(".transmit-content").autosize().focus();b&&(this._module=e._module=b);c&&(this.targetId=e.targetId=c)},appendReplay:function(a,b){var c=$(this.el).find("#comment-comment-clone").clone(!0);c.removeAttr("id");a.commentor&&
c.find(".comment-comment-username").attr("userId",a.commentor.id).html("@"+a.commentor.username+": ");a.commentCount&&0<a.commentCount&&(c.find(".commentComment-count").html(a.commentCount),c.find(".commentComment-bottom").show());c.data("commentCommentPageSize",10);c.hide();b.append(c)},createCommentCommentedBox:function(a,b){var c=$("#comment-commented-clone").clone(!0);c.attr("id",parseInt(Math.random()*Math.random()*1E6)+"commentCommented");a.commentor&&c.find(".comment-commented-user").attr("href",
"/home/"+a.commentor.id).html(a.commentor.username);a.addTime&&c.find(".comment-commented-cal").html(Date.create(a.addTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));c.find(".comment-commented-content").html($.faceConvert(e.convert2Html(a.content)));c.show();b.find(".commentComment-commented-more").before(c)},appendTransmit:function(a,b){var c=$(this.el).find("#transmit-clone").clone(!0);c.removeAttr("id");c.find(".transmit-parent-commenter").html("@"+TEAMS.currentUser.username+":  ").attr("data-entity",
TEAMS.currentUser.id);c.find(".transmit-parent-content").text(a.content?a.content:"");a.transmitCount&&0<a.transmitCount&&(c.find(".transmit-count").html(a.transmitCount),c.find(".transmit-bottom").show());c.data("transmitedPageSize",10);c.hide();b.append(c)},createTransmitedBox:function(a,b){var c=$(this.el).find("#transmited-clone").clone(!0);c.removeAttr("id");a.creator&&c.find(".transmited-user").attr("href","/home/"+a.creator.id).html(a.creator.username);a.createTime&&c.find(".transmited-cal").html(Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
var e='\x3ca class\x3d"entitybox-toggle" data-module\x3d"task" data-id\x3d"'+a.id+'"\x3e'+a.name+"\x3c/a\x3e";c.find(".transmited-content").html(e);c.show();b.find(".transmit-transmited-more").before(c)},remove:function(){this.undelegateEvents();$(this.el+" .transmit-content").trigger("autosize.destroy");$(this.el+" .comment-comment-content").trigger("autosize.destroy")}});m.exports=h});
define("teams/component/spectacularsview",["teams/utils","teams/task/taskmodel","teams/component/watchmodel","teams/component/sharemodel","teams/component/entityselector"],function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel"),c=h("teams/component/watchmodel"),b=h("teams/component/sharemodel"),a=h("teams/component/entityselector");h=Backbone.View.extend({initialize:function(a){this.el=a.container||"#j_panel_view";this.userId=a.userId||TEAMS.currentUser.id;this.objectId=a.objectId;this.parentView=
a.parentView;this.module=a.module||"task";this.$el=$(this.el);$(this.el).html(f.template("component.spectaculars"));this.taskmodel=new e({id:""});this.watchModel=new c;this.shareModel=new b({entityId:"",module:""})},delegateEvents:function(){var a=this,b=$(this.el);b.on("click.Spectaculars",".share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?(new UserSelector({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});b.off("confirmHandler",".share").on("confirmHandler",
".share",function(b,c){var g=c.objs;if(g&&!$.isEmptyObject(g)){g=$.isArray(g)?g:[g];a.sids="";for(var e=0;e<g.length;e++)a.sids+=g[e].id+",";g=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=g;a.shareModel._module=$(this).attr("module");a.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});b.on("click.Spectaculars",".watch",function(b){b.stopPropagation();$(this);b={};var c=$(this);b.module=c.attr("module");
b.id=c.attr("targetId");"true"==c.attr("watched")?(b._method="DELETE",a.watchModel.watchOne(b,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");c.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8\x3c/a\x3e');c.attr("watched","false")})):(b._method="PUT",a.watchModel.watchOne(b,function(a){f.notify("\u5173\u6ce8\u6210\u529f");c.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8');c.attr("watched","true")}))});b.on("click.Spectaculars",".finish",function(b){b.stopPropagation();
var c=$(this);if($(this).attr("targetId")&&$(this).attr("status")&&!c.data("post")){var g="finished"==c.attr("status")?"todo":"finished",e=c.attr("targetId");c.data("post",!0);a.taskmodel.changeProperty(e,"status",g,function(b){c.data("post",!1);b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(c.parents(".j_puzzle_li"),g,!0),(b=a.subView)&&b.id&&b.id==e&&b.changeStatus(g))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});
b.on("click.Spectaculars",".j_create_task",function(a){a=$(this);var b=a.parents("#entry-puzzles-con");b.find(".j_entry_poster").addClass("hide");b.find(".j_create_task").removeClass("hide");a.addClass("hide").prev().removeClass("hide");a.parents(".j_puzzle_footer").find(".j_name_input").focus()});b.on("keyup.Spectaculars",".j_name_input",function(a){13===a.keyCode&&$(this).siblings(".j_btn_create").find(".j_btn_success").trigger("click")});b.on("keydown.Spectaculars",".j_name_input",function(a){13===
a.keyCode&&a.preventDefault()});b.on("click.Spectaculars",".j_btn_create\x3ea",function(b){b=$(this);var c=b.data("type"),g=b.parents(".j_puzzle-item");"cancel"==c?(g.find(".j_name_input").val(""),g.find(".j_entry_poster").addClass("hide").end().find(".j_create_task").removeClass("hide")):b.attr("disabled")||(b.attr("disabled",!0),c=g.find(".j_name_input").val(),""==$.trim(c)?(f.notify("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),b.attr("disabled",!1)):100<$.trim(c).length?(f.notify("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7100\u5b57"),
b.attr("disabled",!1)):a.createItem(g))})},createItem:function(a){switch(this.module){case "task":this.createNewTask(a)}},createNewTask:function(a){if(a){var b=this,c=a.find(".j_name_input").val(),e=a.attr("id")?a.attr("id"):null,k={content:""};k.name=$.trim(c);b.taskmodel.stageTask(k,b.objectId,"j_puzzle_no_stage"==e?"":e,function(c){var e=$(b.el+" #j_puzzle_task_clone").clone().attr("id",a.attr("id"));c=b.renderOneDomain(e,c.task);a.find(".j_puzzle_items .j_puzzle_noitem").after(c);a.find(".j_puzzle_items .j_puzzle_noitem").addClass("hide");
a.find(".j_entry_poster").addClass("hide").end().find(".j_create_task").removeClass("hide");b.rebuildSN(a.find(".j_puzzle_items"));b.updateStageCount(0,a.get(0));a.find(".j_btn_success").attr("disabled",!1);a.find(".j_name_input").val("").focus();f.notify("\u5b89\u6392\u4efb\u52a1\u6210\u529f")})}},permissionEvents:function(){var b=this,c=$("#mainContainer");c.off("click.mainlinelink",".j_relevance-stage").on("click.mainlinelink",".j_relevance-stage",function(c){c.stopPropagation();c=$(this);var g=
c.parents(".j_puzzle-item"),e=[];1==g.size()&&g.find(".j_puzzle_items li").not(".j_puzzle_noitem").each(function(){$(this).attr("id")&&e.push($(this).data("object"))});b.entitySelector=new a({targetEl:g,keyword:"",module:c.attr("module"),mainlineModule:c.attr("module"),seletedList:e});b.entitySelector.render()});c.off("entitySelected",".j_puzzle-item").on("entitySelected",".j_puzzle-item",function(a){var c=$(this),g=c.find(".j_puzzle_items");g.find(".j_puzzle_noitem").clone();var e="",p="",s=[],h=
[],w=arguments;_.each(g.find("li").not(".j_puzzle_noitem"),function(a){$(a).attr("id")&&h.push($(a).attr("id"))});for(var v=1;v<arguments.length;v++){var x=arguments[v];s.push(x.id);-1==$.inArray(x.id,h)&&(e+=x.id+",")}for(v=0;v<h.length;v++)-1==$.inArray(h[v],s)&&g.find("li#"+h[v]).remove();b.rebuildSN(g);b.updateStageCount(0,c.get(0));v=0;for(x=h.length;v<x;v++)-1==$.inArray(h[v],s)&&(p+=h[v]+",",g.find("#"+h[v]).remove());s={};s.id=b.parentView.id;s.ids=e;s.oldIds=p;s.module="task";s.stageId=c.attr("id")||
"";b.parentView.mainlinelinkmodel.saveRelevanceTask(s,function(a){var e=a.relevanceTaskList,l=!0;if(!a.actionMsg)if(0==a.relevanceFlag)f.notify("\u8be5\u4efb\u52a1\u5df2\u7ecf\u5173\u8054");else{for(a=1;a<w.length;a++){for(var p=w[a],r=0;r<e.length;r++)if(p.id!=e[r].id)l=!0;else{l=!1;break}1==l&&0==g.find("li#"+p.id).length&&(l=$(b.el+" #j_puzzle_task_clone").clone().removeAttr("id").attr("id",p.id),l=b.renderOneDomain(l,p),g.append(l));l=!0}b.rebuildSN(g);b.updateStageCount(0,c.get(0));f.notify("\u5173\u8054\u6210\u529f!")}})});
c.off("click.mainlinelink",".j_task-stage").on("click.mainlinelink",".j_task-stage",function(a){a=$(this).parents(".j_puzzle-item");a.find(".j_entry_poster").hasClass("hide")?a.find(".j_create_task").trigger("click"):a.find(".j_entry_poster").addClass("hide").end().find(".j_create_task").removeClass("hide")});c.off("click.mainlinelink",".j_edit-stage").on("click.mainlinelink",".j_edit-stage",function(a){$(this).parents(".j_puzzle-item").find(".j_stage_name").trigger("click")});c.off("click.Spectaculars",
".j_puzzle-item .j_stage_name").on("click.Spectaculars",".j_puzzle-item .j_stage_name",function(a){a=$(this).parents(".j_puzzle-item");1==a.find(".j_stage_name_input").size()&&($(this).addClass("hide"),a.find(".j_stage_name_input").show().val($(this).text()).focus())});c.off("blur.Spectaculars",".j_stage_name_input").on("blur.Spectaculars",".j_stage_name_input",function(a){a=$(this);var b=a.parent();a.data("id")?1==b.find(".j_stage_name").size()&&(a.hide(),b.find(".j_stage_name").removeClass("hide")):
$(this).val()&&0!=$.trim($(this).val()).length||$("#newstageId").remove()});c.off("keydown.Spectaculars",".j_stage_name_input").on("keydown.Spectaculars",".j_stage_name_input",function(a){var b=a.keyCode;a=$(this);var d=a.data("id"),c=a.parents(".j_puzzle-item");27==b&&(d?(b=a.data("name"),a.val(b)):c.remove())});c.off("change.Spectaculars",".j_stage_name_input").on("change.Spectaculars",".j_stage_name_input",function(a){b.createStage($(this))});c.off("click.Spectaculars",".j_puzzle-item .j_delete-stage").on("click.Spectaculars",
".j_puzzle-item .j_delete-stage",function(a){var c=$(this).parents(".j_puzzle-item"),g=c.attr("id");g?f.confirm("\u5220\u9664\u5206\u7ec4\u540e\uff0c\u8be5\u5206\u7ec4\u7684\u4efb\u52a1\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u65e0\u5206\u7ec4\u4efb\u52a1\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u5206\u7ec4\uff1f",function(a){a&&b.parentView.mainlinelinkmodel.deleteStage(b.parentView.id,g,function(a){a=$("#j_puzzle_no_stage");a.find(".j_puzzle_items").prepend(c.find(".j_puzzle_items").children('li:not(".j_puzzle_noitem")'));
var g=a.find(".j_puzzle_items").children('li:not(".j_puzzle_noitem")');0<g.length&&a.find(".j_puzzle_items .j_puzzle_noitem").addClass("hide");for(var e=0;e<g.length;e++){var f=$(g[e]).find(".j_title").text(),k=$(g[e]).find(".j_title").attr("title");f||$(g[e]).find(".j_title").text(k)}c.remove();b.rebuildSN(a.find(".j_puzzle_items"));b.updateStageCount(0,a.get(0))})}):c.remove()});c.on("focusout.Spectaculars",".j_puzzle-item .j_stage_name",function(a){a.stopPropagation();b.createStage($(this))});
c.off("mousewheel.Spectaculars","#entry-puzzles-con").on("mousewheel.Spectaculars","#entry-puzzles-con",function(a){$("#entry-puzzles-con");var b=$(a.target).parents(".puzzle-content");0<b.length&&0<b.find(".mCSB_dragger").height()||(0<a.originalEvent.deltaY?$("#entry-puzzles-con")[0].scrollLeft+=100:$("#entry-puzzles-con")[0].scrollLeft-=100)})},rebuildSN:function(a){for(var b=a.children('.j_puzzle_li:not(".j_puzzle_noitem")'),c=0;c<b.length;c++)$(b[c]).find(".sn").text(c+1);0<b.length&&a.find("li.j_puzzle_noitem").addClass("hide")},
updateStagesCount:function(){var a=this.$el.find(".j_puzzle-item[id]:visible");$.each(a,this.updateStageCount)},updateStageCount:function(a,b){if(b){var c=$(b),e=c.find(".j_puzzle-header .j_stage_count"),f=c.find(".j_puzzle_items").children("[id]").size();f?(e.text("("+f+")"),c.find(".j_puzzle_noitem").addClass("hide")):(e.html(null),c.find(".j_puzzle_noitem").removeClass("hide"))}},createStage:function(a){var b=this,c=a.data("id"),e=a.parent(),k=b.parentView,r=k.mainlinelinkmodel;if(c){var p=$.trim(a.val()),
s=a.data("name");p&&0<p.length?s!=p&&r.updateStage(k.id,c,p,function(b){b.message?f.notify(b.message):(f.notify("\u5206\u7ec4\u4fee\u6539\u6210\u529f"),a.data("name",p),e.find(".j_stage_name").removeClass("hide").text(p).attr("title",p))}):(a.text(s),f.notify("\u5206\u7ec4\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"))}else(p=$.trim(a.val()))&&0<p.length?r.createStage(k.id,p,function(c){c.message?f.notify(c.message):(f.notify("\u5206\u7ec4\u521b\u5efa\u6210\u529f"),a.hide(),a.data("id",c.stage.id).data("name",
c.stage.name),a.parents(".j_puzzle-item").attr("id",c.stage.id),e.find(".j_stage_name_new").removeClass("hide").addClass("j_stage_name").removeClass("j_stage_name_new").text(p),b.initSortable())}):f.notify("\u5206\u7ec4\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a")},renderPanelNewStage:function(){$("#j_panel_view #j_puzzles_stage #newstageId").removeClass("hide");if(1==$("#j_panel_view #j_puzzles_stage #newstageId").size())$("#j_panel_view #j_puzzles_stage #newstageId").find(".j_stage_name_input").show().focus();
else{var a=$("#j_puzzle_item_clone").clone().attr({id:"newstageId",module:"task"});a.find(".j_puzzle_items .j_puzzle_noitem").removeClass("hide");a.find(".j_scrollwrapper").addClass("j_scrollwrapper-0");a.find(".j_stage_name").addClass("hide").addClass("j_stage_name_new").removeClass("j_stage_name");a.find(".j_relevance-stage").attr("module","task");a.find(".j_add_item").text("\u5b89\u6392\u4efb\u52a1");$("#j_panel_view #j_puzzles_stage").prepend(a);$("#j_panel_view #j_puzzles_stage #newstageId").find(".j_stage_name_input").show();
f.layout(".j_scrollwrapper-0",[{scrollInertia:500,mouseWheel:{enable:!0,axis:"y",preventDefault:!0,deltaFactor:"auto",normalizeDelta:!0,invert:!1,disableOver:["select","option","keygen","datalist","textarea"]},gotoTopButton:!1}]);$("#j_panel_view #j_puzzles_stage #newstageId").find(".j_scrollwrapper-0").trigger("resize");setTimeout(function(){$("#j_panel_view #j_puzzles_stage #newstageId").find(".j_stage_name_input").focus()},500)}},dragPenl:function(a,b){var c=$("#j_puzzles_stage").parents("#entry-puzzles-con");
c.width();c.offset();c.find(".mCSB_container").eq(0).width();var e=!0;b.item.on("mousedown",function(){e=!0});$(document).on("mouseup",function(){e=!1});var f=[];$(document).on("mousemove.Spectaculars",function(a){if(e&&(a=a.clientX,!(a+10<$(window).width()||220<a+10))){var b="";0<f.length&&(a>f[0]?b="right":a!=f[0]&&(b="left"));1>f.length?f.push(Array(a)):f[0]=a;"right"==b?$("#entry-puzzles-con")[0].scrollLeft+=Math.abs(a-f[0]):"left"==b&&($("#entry-puzzles-con")[0].scrollLeft-=Math.abs(a-f[0]))}})},
render:function(a){if(a){for(var b=this,c=0,e=a.length;c<e;c++)b.renderGroups(a[c],c+1);$("#j_search_result_no").addClass("hide");$("#entry-puzzles-con").trigger("resize");b.initPermission?($("#create-stage").removeClass("hide"),b.initSortable(),$("#j_puzzles_stage").sortable({handle:".j_puzzle-title",cancel:"#j_puzzle_no_stage",revert:!0,cursor:"move",appendTo:"#entry-puzzles-con",helper:"clone",opacity:.9,placeholder:"puzzle-item-holder",update:function(a,b){b.item.data("update",!0)},change:function(a,
d){b.dragPenl(a,d)},stop:function(a,d){d.item.find(".j_scrollwrapper").trigger("resize");if(d.item.data("update")){d.item.data("update",!1);for(var c=$("#j_panel_view #j_puzzles_stage").children(":not('#j_puzzle_no_stage')"),e='{"mainlineId":"'+b.parentView.id+'","stages":[',l=0;l<c.length-1;l++)var n=$(c[l]).attr("id"),e=e+('{"id":"'+n+'","sort":"'+(l+1)+'"},');e+='{"id":"'+$(c[c.length-1]).attr("id")+'","sort":"'+c.length+'"}]}';b.parentView.mainlinelinkmodel.switchStageSort(e,function(a){f.notify("\u6392\u5e8f\u6210\u529f")})}}}).disableSelection()):
($("#create-stage").addClass("hide"),$("#j_search_result .j_mark, #j_search_result_no .j_mark").addClass("hide"),$("#j_search_result .j_goal-category-head").css("cursor","default"));b.updateStagesCount()}},renderGroups:function(a,b){if(a){var c=this.module;this.initPermission=a.permission;var e=a.domains;if(e){var k=$(this.el).find("#j_puzzle_item_clone").clone().removeAttr("id").attr("module",c);k.find(".j_scrollwrapper").addClass("j_scrollwrapper-"+b);k.find(".j_relevance-stage").attr("module",
c);var r=$(this.el).find("#j_puzzles_stage");a.id?(k.attr("id",a.id),k.find(".j_stage_name_input").val(a.name).data("name",a.name).data("id",a.id).hide()):(r=$(this.el).find("#j_puzzles_no_stage"),k.attr("id","j_puzzle_no_stage").find(".j_puzzle-header").removeClass("cs-m"),k.find(".j_edit_category_option").remove(),k.find(".j_stage_name_input").remove());a.permission?this.permissionEvents():(k.find(".j_puzzle_footer").hide(),k.find(".j_edit_category_option").remove(),k.find(".j_stage_name_input").remove());
this.renderModuleName(c,k);k.find(".j_stage_name").text(a.name).data("name",a.name).data("id",a.id).attr("title",a.name);if(0<e.length)for(var c=0,p=e.length;c<p;c++){var s=e[c],h=$(this.el+" #j_puzzle_task_clone").clone().attr("id",s.id),h=this.renderOneDomain(h,s),s=c+1;h.find(".sn").text(s);k.find(".j_puzzle_items").append(h)}else k.find(".j_puzzle_items .j_puzzle_noitem").removeClass("hide");k.find(".j_name_input").autosize();r.append(k);f.layout(".j_scrollwrapper-"+b,[{scrollInertia:500,mouseWheel:{enable:!0,
axis:"y",preventDefault:!0,deltaFactor:"auto",normalizeDelta:!0,invert:!1,disableOver:["select","option","keygen","datalist","textarea"]},gotoTopButton:!1}])}}},renderModuleName:function(a,b){switch(a){case "task":b.find(".j_puzzle_footer .j_add_item").text("\u5b89\u6392\u4efb\u52a1");break;default:b.find(".j_puzzle_footer .j_add_item").text("\u65b0\u5efa\u4e8b\u9879")}},renderOneDomain:function(a,b){var c=b.manager,e=b.module;b.id?a.attr({id:b.id}):a.attr({id:"spec-no-stage"});a.attr("data-module",
e);b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched","false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module",b.module);b.name&&a.find(".j_title").text(b.name).attr({"data-id":b.id,"data-module":e,title:b.name});b.unread&&a.addClass("unread");b.newConment&&a.addClass("newComment");b.finished&&a.find(".j_title").addClass("finished-line");1!==b.permission&&
(a.find(".share").addClass("selector-toggle").attr({"data-entity":"employee","data-multi":"true",module:e,targetId:b.id}),a.find(".finish").attr("targetId",b.id),3===b.permission&&b.locked&&a.find(".finish").removeAttr("targetId"));if(c){e="";c.username&&(e=c.username);a.find(".j_who img").attr("title",e);var f="images/avatar.png";c.avatar&&(f=c.avatar.p5&&"/base/download/"+c.avatar.p5);a.find(".j_who").children("img").attr({src:f,title:e,userid:c.id})}0!=b.commentCount?a.find(".j_commentcount").text(b.commentCount):
a.find(".j_commentcount").text("").siblings().addClass("hide");this.renderDifference(a,b);this.createEntityObject(a,b);return a},createEntityObject:function(a,b){var c={};c.id=b.id;c.name=b.name;a.data("object",c)},renderDifference:function(a,b){switch(b.module){case "task":this.renderTaskOnly(a,b)}},renderTaskOnly:function(a,b){"urgency"==b.priority?a.find(".j_mark .j_importance").removeClass("hide").text("\u975e\u5e38\u7d27\u6025").addClass("urgency"):"high"==b.priority&&a.find(".j_mark .j_importance").removeClass("hide").text("\u7d27\u6025").addClass("high");
this.renderStatus(a,b.finished?"finished":"todo",!0);b.dueDate?a.find(".j_date_span i").removeClass("hide").end().find(".j_date").text(Date.create(b.dueDate).format("{MM}-{dd}")):a.find(".j_date_span i").addClass("hide")},changePanelWatch:function(a,b){var c=$("#j_panel_view #"+a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),
c.find(".watch").attr("watched","false"))},changePanelStatus:function(a,b){var c=$("#j_panel_view #"+a);this.renderStatus(c,b,!0)},removePanel:function(a){a=$(this.el+" #"+a.id);var b=a.parent();a.remove();this.rebuildSN(b);this.updateStageCount(0,b.parents(".j_puzzle-item").get(0))},changePanelName:function(a){if(a.id){var b=this.$el.find(".j_puzzle_items  #"+a.id);a.title&&b.find(".j_title").text(a.title).attr("title",a.title)}},changePanelDuedate:function(a){if(a&&a.id){var b=this.$el.find(".j_puzzle_items  #"+
a.id).find(".j_date_span .j_date").text();this.$el.find(".j_puzzle_items  #"+a.id).find(".j_date_span i").removeClass("hide");b=a.dueDate?Date.create(a.dueDate).format("{MM}-{dd}"):b;this.$el.find(".j_puzzle_items  #"+a.id).find(".j_date_span .j_date").html(b)}},changePanelManager:function(a){if(a&&a.id){var b=this.$el.find(".j_puzzle_items  #"+a.id);if(a.manager){var c=a.manager.username?a.manager.username:b.find(".j_who img").attr("data-original-title");b.find(".j_who img").attr("data-original-title",
c);c="images/avatar.png";c=a.manager.avatar&&a.manager.avatar.p5&&"/base/download/"+a.manager.avatar.p5;0<b.find(".j_who img").length&&b.find(".j_who img").attr("src",c)}}},highLight:function(a){$(this.el).find(".j_puzzle_li").removeClass("active");$(this.el).find(".j_puzzle_li#"+a).addClass("active")},beforeOpenTarget:function(a){this.highLight(a)},renderStatus:function(a,b,c){"finished"==b?(a.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),
a.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),c&&a.find(".j_finish_line").addClass("finished-line")):(a.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),a.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),c&&a.find(".j_finish_line").removeClass("finished-line"))},
initSortable:function(){var a=this;$(this.el);$("#j_panel_view .j_puzzle_items").sortable({handle:"div.j_title",appendTo:"#entry-puzzles-con",connectWith:"#j_panel_view .j_puzzle_items",placeholder:"puzzle-item-placeholder",cursor:"move",helper:"clone",cancel:".readOnly",update:function(b,c){a.rebuildSN($(this));c.item.data("update",!0)},change:function(b,c){a.dragPenl(b,c)},start:function(a,b){},receive:function(a,b){b.item.data("receive",!0);var d=$(this).parents(".j_puzzle-item").attr("id");b.item.data("stageId",
d)},stop:function(b,c){$(this);var e=c.item.attr("id");if(e){var k=a.parentView.id;if(c.item.data("update")&&(c.item.data("update",!1),c.item.data("receive"))){c.item.data("receive",!1);var r=c.item.data("stageId");a.parentView.mainlinelinkmodel.switchTaskToStage(k,e,r,function(b){a.updateStagesCount();f.notify("\u62d6\u52a8\u5206\u7ec4\u6210\u529f")})}}}}).disableSelection()},remove:function(){$(this.el).off(".Spectaculars")}});m.exports=h});
define("teams/component/userselector",["teams/utils","teams/org/departmenttreeview","teams/org/userview","teams/org/groupmodel","teams/component/template"],function(h,q,m){var f=h("teams/utils"),e=h("teams/org/departmenttreeview"),c=h("teams/org/userview"),b=h("teams/org/groupmodel"),a=h("teams/component/template");window.UserSelector=Backbone.View.extend({initialize:function(d){this.$target=d=d.$target;this.isMulti=!1;this.entity=d.attr("data-entity");this.module=d.attr("module");this.multi=d.attr("data-multi");
this.el="#selector-employee";d=a["selector."+this.entity];$("body").append(d);$("#all-org-users").html(f.template("org.departmenttree"));$("#all-group-users").html(f.template("org.user"));$(this.el).find(".j_selectedUsersScr").css("max-height","70px");f.layout(this.el+" .j_selectedUsersScr");this.isMulti=this.multi?!0:!1;this.departmentTreeView=new e({id:"",type:"user",readonly:!0,noUrl:!0,height:310,el:"#all-org-users"});this.userView=new c({id:"",operation:"user",editable:!1,isMulti:this.isMulti,
height:280,el:"#userSelector-multi #all-group-users",removeSlider:!0,target:this.$target});this.groupModel=new b},delegateEvents:function(){var a=this,b=$(a.el);$("body").on("keydown.user-win",function(a){27==a.which&&b.modal("hide")});b.on("hidden.bs.modal",function(){a.remove()});b.on("click.user-win","#org-tree-list a",function(){var b=$(this).parent().attr("id");a.userView.id=b;a.userView.editable=!1;a.userView.isMulti=a.isMulti;a.userView.userOrg="";a.userView.operation="";a.userView.el="#userSelector-multi #all-group-users";
a.userView.render(a.getAllChecked());$("#org-user-info").addClass("hide");$("#group-user-info").addClass("hide")});b.on("click.user-win","#org-group-list a",function(){var b=$(this).attr("id");a.userView.id=b;a.userView.editable=!1;a.userView.isMulti=a.isMulti;a.userView.userOrg="searchgroup";a.userView.operation="search";a.userView.el="#userSelector-multi #all-group-users";a.userView.render(a.getAllChecked());$("#org-user-info").addClass("hide");$("#group-user-info").addClass("hide")});b.on("addUser.user-win",
"#all-group-users",function(b,c){var g=$("\x3ca\x3e "+c.username+" \x3c/a\x3e");g.attr("id",c.id);g.data("user",c);0==$("#userSelector-multi .selected-users #"+c.id).size()&&$("#userSelector-multi .selected-users").prepend(g);a.haveCheckedUser()});b.on("deleteUser.user-win","#all-group-users",function(b,c){$("#userSelector-multi .selected-users #"+c.id).remove();a.haveCheckedUser()});b.on("addAllUser.user-win","#all-group-users",function(b,c){for(var g=0;g<c.length;g++){var e=c[g];if(!a.isExistUser(e)){var f=
$("\x3ca\x3e "+e.username+" \x3c/a\x3e");f.attr("id",e.id);f.data("user",e);$("#userSelector-multi .selected-users").prepend(f)}}a.haveCheckedUser()});b.on("deleteAllUser.user-win","#all-group-users",function(b,c){for(var g=0;g<c.length;g++)$("#userSelector-multi .selected-users #"+c[g].id).remove();a.haveCheckedUser()});if(!a.isMulti)b.on("click.user-win","#employee-container li",function(b){if(b=$(this).data("user"))a.close(),b.sourceId=$(this).attr("id"),a.$target.trigger("confirmHandler",{objs:b})});
b.on("click.user-win",".j_user_ok",function(){var b=[];$("#userSelector-multi .selected-users\x3ea").each(function(){var a=$(this).data("user");b.push(a)});a.$target.trigger("confirmHandler",{objs:b});a.close()});b.on("click.user-win",".j_user_cancel",function(){a.close()});b.on("click.user-win","#addUserToGroupButton",function(a){var b=[];$("#userSelector-multi .selected-users\x3ea").each(function(){var a=$(this).data("user");b.push(a)});0<b.length?($(this).addClass("hide"),$("#add-group-input-text").show(),
$("#addConfirmButton").removeClass("hide"),$("#addCancelButton").removeClass("hide"),$("#add-group-input-text").focus()):f.notify("\u8bf7\u9009\u62e9\u7fa4\u7ec4\u6210\u5458")});b.on("click.user-win","#addConfirmButton",function(b){b=$("#add-group-input-text").val();if(""==$.trim(b))f.notify("\u8bf7\u8f93\u5165\u7fa4\u7ec4\u540d\u79f0"),$("#add-group-input-text").focus();else if(20<$.trim(b).length)f.notify("\u7fa4\u7ec4\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26"),$("#add-group-input-text").focus();
else{var c={},g="";$("#userSelector-multi .selected-users\x3ea").each(function(){g+=$(this).attr("id")+","});c["group.name"]=$.trim(b);c.employeeId=TEAMS.currentUser.id;c.ids=g;a.groupModel.saveGroupAddEmployee(c,function(a){$("#add-group-input-text").val("");$("#add-group-input-text").hide();$("#addUserToGroupButton").removeClass("hide");$("#addConfirmButton").addClass("hide");$("#addCancelButton").addClass("hide");f.notify("\u6dfb\u52a0\u6210\u529f");$("#group-users").trigger("click")})}});b.on("click.user-win",
"#addCancelButton",function(a){$("#add-group-input-text").hide();$("#addUserToGroupButton").removeClass("hide");$("#addConfirmButton").addClass("hide");$("#addCancelButton").addClass("hide")})},open:function(){var a=$(this.el);a.modal("toggle");this._openEmpMulti();"flow"==this.module?a.find("#modalLabel-employee").html("\u9009\u62e9\u529e\u7406\u4eba"):a.find("#modalLabel-employee").html("\u4eba\u5458\u9009\u62e9")},close:function(){$(this.el).modal("hide")},_openEmpMulti:function(){$(this.el);$("#userSelector-multi").removeClass("hide");
$("#add-group-input-text").hide();this.departmentTreeView.render();this.userView.render();this.isMulti?$(".selector-btns .j_user_ok").removeClass("hide"):($("#userSelector-multi .user-selector-header").addClass("hide"),$("#userSelector-multi .user-wrapper").addClass("hide"));$("#dept-user-invite").addClass("hide");$(this.el).find("#add-dept-group").addClass("hide");$("#org-user-info").addClass("hide");$("#group-user-info").addClass("hide");$("#control-hide").addClass("hide")},haveCheckedUser:function(){this.isChecked()?
"none"==$("#add-group-input-text").css("display")&&$("#addUserToGroupButton").removeClass("hide"):$("#addUserToGroupButton").addClass("hide")},isExistUser:function(a){var b=!1;$("#userSelector-multi .selected-users\x3ea").each(function(){var c=$(this).data("user");a.id==c.id&&(b=!0)});return b},isChecked:function(){var a=[],a=this.getAllChecked();return 0<a.length?!0:!1},getAllChecked:function(){var a=[];$("#userSelector-multi .selected-users\x3ea").each(function(){var b=$(this).data("user");a.push(b)});
return a},remove:function(){var a=$(this.el);a.off(".user-win");a.remove()}});m.exports=window.UserSelector});
define("teams/component/tagmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:"1",pageSize:"25",initialize:function(f){this.targetId=f.targetId;this._module=f.module},show:function(f,e){$.ajax({type:"get",url:"/tag/"+f+".json",dataType:"json",success:function(c){e&&e(c)}})},query:function(f){$.ajax({type:"get",url:"/tag.json",dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize},success:function(e){f&&f(e)}})},find:function(f){$.ajax({type:"get",url:"/tag/find/"+this.targetId+
".json",dataType:"json",data:{},success:function(e){f&&f(e)}})},link:function(f,e){$.ajax({type:"post",url:"/tag/link.json",dataType:"json",data:{id:f.id,privacy:f.privacy,targetId:this.targetId,module:this._module},success:function(c){e&&e(c)}})},links:function(f,e,c){$.ajax({type:"post",url:"/tag/link.json",dataType:"json",data:{ids:f,targetId:this.targetId,privacy:e,module:this._module},success:function(b){c&&c(b)}})},create:function(f,e){$.ajax({type:"post",url:"/tag.json",dataType:"json",data:{"tag.name":f.name,
"tag.privacy":f.privacy,targetId:this.targetId,module:this._module},success:function(c){e&&e(c)}})},loadTags:function(f,e,c,b){var a=!1,d=!1;"all"!=f?a="privacy"==f?!0:!1:d=!0;$.ajax({type:"get",url:"/tag/loadTags.json",dataType:"json",data:{pageNo:1,pageSize:10,privacy:a,createTime:c,all:d,keywords:e},success:function(a){b&&b(a)}})},loadSelectTag:function(f,e,c){$.ajax({type:"get",url:"/tag/loadTags.json",dataType:"json",data:{pageNo:1,pageSize:500,privacy:f,keywords:e},success:function(b){c&&c(b)}})},
update:function(f,e,c,b){$.ajax({type:"post",url:"/tag/"+f+".json",dataType:"json",data:{newName:e,privacy:c,_method:"put"},success:function(a){b&&b(a)}})},deleteTag:function(f,e){$.ajax({type:"POST",url:"/tag/"+f+".json",dataType:"json",data:{_method:"DELETE"},success:function(c){e&&e(c)}})},loadRecentTag:function(f){$.ajax({type:"get",url:"/search/suggestion.json",dataType:"json",data:{allTag:!0,searchType:"tag"},success:function(e){e=e.tags;f&&f(e)}})}});m.exports=h});
define("teams/component/remindcardview",["teams/utils","teams/component/usersummarymodel","teams/component/visitview","teams/org/followmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/usersummarymodel");h("teams/component/visitview");h("teams/org/followmodel");h=Backbone.View.extend({initialize:function(e){this.el=e.container;this.userId=e.userId;this.hideVisit=e.hideVisit;this.chardMode=e.chardMode;this.userId||(this.userId=TEAMS.currentUser.id);this.isMe=this.userId==TEAMS.currentUser.id;
$(this.el).html(f.template("base.remindcard"));e.rightViewCtrl||$(this.el).find(".j_rightViewCtrl").remove()},delegateEvents:function(){$(this.el).off("click.remindCardDiv","#remind-submit").on("click.remindCardDiv","#remind-submit",function(){f.alert("\u63d0\u4ea4",null)});$(this.el).off("click.remindCardDiv","#remind-cancle").on("click.remindCardDiv","#remind-cancle",function(){f.alert("\u53d6\u6d88",null)})},render:function(){},remove:function(){$("#remindcard").remove();$(this.el).off(".remindcardDiv");
this.followModel=null}});m.exports=h});
define("teams/component/visitview",["teams/utils","teams/component/visitmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/visitmodel");h=Backbone.View.extend({pageSize:"10",initialize:function(c){this.model=new e;this.container=c.container;this.userId=c.userId||TEAMS.currentUser.id;$(this.container).html(f.template("component.visit"))},render:function(c,b){this.renderMyVisitors(c);this.renderBeVisited(b)},renderMyVisitors:function(c){if(c&&c.result){var b=c.result;b.length&&$(this.container).find("#myVisitors").empty();
for(var a=0;a<b.length;a++)this.createVisitBox(b[a],"myVisitors");this.pages($(this.container),"myVisitors",c)}},renderBeVisited:function(c){if(c&&c.result){var b=c.result;b.length&&$(this.container).find("#beVisited").empty();for(var a=0;a<b.length;a++)this.createVisitBox(b[a],"beVisited");this.pages($(this.container),"beVisited",c)}},createVisitBox:function(c,b){var a=$(this.container).find("#visitor-clone").clone(!0).removeClass("hide"),d="myVisitors"==b?c.visitor:c.beVisited;if(d&&d.username){a.attr("id",
c.id);var g="images/avatar.png";null!=d.avatar&&null!=d.avatar.p3&&(g="/base/download/"+d.avatar.p3);a.find(".avatar img").attr("src",g);a.find(".avatar").attr("userId",d.id);a.find(".name").html(d.username);a.find(".name").attr("userId",d.id);a.find(".avatar-right span").html(c.formatVisitTime);$(this.container).find("#"+b).append(a)}},pages:function(c,b,a){c.find(".div_"+b).data("pageNo",a.pageNo);c.find("#btn_"+b+"_pre").removeAttr("class").addClass("pre-disable");c.find("#btn_"+b+"_next").removeAttr("class").addClass("next-disable");
0<a.totalCount&&("myVisitors"==b&&c.find(".div_"+b).removeClass("hide"),a.hasNext&&c.find("#btn_"+b+"_next").removeClass("next-disable").addClass("next"),a.hasPre&&c.find("#btn_"+b+"_pre").removeClass("pre-disable").addClass("pre"))},delegateEvents:function(){var c=this,b=c.model;$(c.container).on("click",'#btn_beVisited_pre[class\x3d"pre"]',function(){var a=$(c.container).find(".div_beVisited").data("pageNo");1<parseInt(a)&&(a=parseInt(a)-1);b.load({id:c.userId,visitType:"beVisited",pageNo:a,pageSize:c.pageSize},
function(a){c.renderBeVisited(a.beVisited)})});$(c.container).on("click",'#btn_beVisited_next[class\x3d"next"]',function(){var a=$(c.container).find(".div_beVisited").data("pageNo"),a=parseInt(a)+1;b.load({id:c.userId,visitType:"beVisited",pageNo:a,pageSize:c.pageSize},function(a){c.renderBeVisited(a.beVisited)})});$(c.container).on("click",'#btn_myVisitors_pre[class\x3d"pre"]',function(){var a=$(c.container).find(".div_myVisitors").data("pageNo");1<parseInt(a)&&(a=parseInt(a)-1);b.load({id:c.userId,
visitType:"myVisitors",pageNo:a,pageSize:c.pageSize},function(a){c.renderMyVisitors(a.myVisitors)})});$(c.container).on("click",'#btn_myVisitors_next[class\x3d"next"]',function(){var a=$(c.container).find(".div_myVisitors").data("pageNo"),a=parseInt(a)+1;b.load({id:c.userId,visitType:"myVisitors",pageNo:a,pageSize:c.pageSize},function(a){c.renderMyVisitors(a.myVisitors)})});$(c.container).on("mouseenter",".j_visitorTab a",function(){var a=$(this),b;a.hasClass("current")||(clearTimeout(b),b=setTimeout(function(){var b=
a.index();a.addClass("current").siblings().removeClass("current");$(".j_visitorTab").next(".visitor-list").find("ul").eq(b).removeClass("hide").siblings().addClass("hide")},100))})}});m.exports=h});
define("teams/component/addteamview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.userId=e.userId||TEAMS.currentUser.id;this.parentEl=e.parentEl||"";this.el="#j_join_team";$("body").append(f.template("component.addteam"));$("#jointeamModal").modal()},delegateEvents:function(){var e=this,c=$(e.el);$("#jointeamModal").on("hidden.bs.modal.AddTeam",function(){e.remove()});c.off("click.AddTeam","#create-link").on("click.AddTeam","#create-link",
function(b){c.find(".j_create_btn").trigger("click")});c.off("click.AddTeam",".j_create_btn").on("click.AddTeam",".j_create_btn",function(b){var a=$(this);b=a.parents(".j_create_btn_area");a=a.attr("icon");$(a).removeClass("hide").siblings(".j_siblings_area").addClass("hide");$(a).find(".j_tenant_name").focus();b.addClass("hide");b.siblings().removeClass("hide")});c.off("click.AddTeam","#finish-team-btn").on("click.AddTeam","#finish-team-btn",function(b){var a=$(this);if(!a.attr("disabled"))if(a.attr("disabled",
!0),b=a.parents("#j_create_area").find(".j_tenant_name").val(),""==$.trim(b))f.notify("\u8bf7\u8f93\u5165\u56e2\u961f\u540d\u79f0"),a.attr("disabled",!1);else if(101<=$.trim(b).length)f.notify("\u56e2\u961f\u540d\u79f0\u81f3\u591a100\u4e2a\u5b57\u7b26"),a.attr("disabled",!1);else if(4>$.trim(b).length)f.notify("\u56e2\u961f\u540d\u79f0\u81f3\u5c114\u4e2a\u5b57\u7b26"),a.attr("disabled",!1);else if(/^[\u4e00-\u9fa5aa-zA-Z\d\(\)\uFF08\uFF09]+$/.exec($.trim(b))){var d={};d.tenantName=b;a.parents("#j_join_team").find(".j_but_area .j_apply_btn").attr("disabled",
!0);a.parents("#j_join_team").find(".j_loading_tip").removeClass("hide");$.ajax({url:"/addteam/createTenant.json",type:"get",dataType:"json",data:d,success:function(b){a.attr("disabled",!1);a.parents("#j_join_team").find(".j_but_area .j_apply_btn").attr("disabled",!1);b.message?f.notify(b.message):(f.notify("\u521b\u5efa\u6210\u529f"),console.log(b.newEmpId),window.location.href=TEAMS.passportUrl+"/changeTenant?employeeId\x3d"+b.newEmpId)}})}else f.notify("\u8bf7\u8f93\u5165\u4ee5\u4e2d\u6587\u3001\u82f1\u6587\u3001\u6570\u5b57\u6216\u62ec\u53f7\u7ec4\u5408\u7684\u56e2\u961f\u540d\u79f0"),
a.attr("disabled",!1)});c.off("click.AddTeam",".j_apply_btn").on("click.AddTeam",".j_apply_btn",function(b){var a=$(this);b=a.parents(".j_apply_btn_area");a=a.attr("icon");$(a).removeClass("hide").siblings(".j_siblings_area").addClass("hide");b.addClass("hide");b.siblings().removeClass("hide");$("#search-team-keywords").val("").focus();$("#j_apply_area .j_search_result_title").addClass("hide");$("#result-choose").addClass("hide");$("#search-result").addClass("hide");$("#search-result .j_search-list").empty();
$("#j_create_area .j_tenant_name").val("");$("#j_create_area .j_mobile").val("");$("#j_create_area .j_email").val("")});c.off("click.AddTeam",".j_join_apply_btn").on("click.AddTeam",".j_join_apply_btn",function(b){var a=$(this);if(!a.attr("disabled")){a.attr("disabled",!0);var d=a.parents(".j_tenant_li");b={tenantKey:d.data("tenantKey")};$.ajax({url:"/addteam/saveApply.json",type:"get",dataType:"json",data:b,success:function(b){a.attr("disabled",!1);b.message?"login"==b.message?(f.notify("\u52a0\u5165\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u754c\u9762"),
d.find(".j_options_btn").addClass("hide")):f.notify(b.message):(f.notify("\u7533\u8bf7\u52a0\u5165\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u7ba1\u7406\u5458\u786e\u8ba4\uff01"),d.find(".j_options_btn").addClass("hide").end().find(".j_options_cancel").removeClass("hide"))}})}});$("#search-team-keywords").on("keyup",function(b){13==(b?b:window.event?window.event:null).keyCode&&c.find("#search-team-btn").trigger("click")});c.off("click.AddTeam","#search-team-btn").on("click.AddTeam","#search-team-btn",function(b){b=
$(this).parents(".j_search_area").find("#search-team-keywords");keywords=$.trim(b.val());e.validateTenantName(keywords)&&($("#result-choose").removeClass("hide"),$("#documentlist-loading").removeClass("hide"),$("#search-result").addClass("hide"),$("#search-result .j_search-list").empty(),$.ajax({url:"/addteam/queryTenant.json",type:"get",dataType:"json",data:{keywords:keywords},success:function(a){$("#documentlist-loading").addClass("hide");$("#company-search-error").text("");var b=a.tenantList;if(b&&
1<=b.length)if($("#search-result").removeClass("hide"),$("#j_apply_area .j_search_result_title").removeClass("hide"),b=e.filterJoinedTenant(b),!b||0>=b.length)$("#search-result").addClass("hide"),$("#j_apply_area .j_search_result_title").addClass("hide"),$("#result-choose,#no-result").removeClass("hide"),$("#exists-result").addClass("hide");else{for(var c=6<b.length?6:b.length,f=0;f<c;f++){var n=b[f],k=$("#j_tenant_clone").clone().removeAttr("id");k.find(".sn").html(f+1);k.find(".j_name").html(n.tenantName);
k.find(".j_whoBuild").html(n.contact);k.data("tenantKey",n.tenantKey);k.attr("id",n.id);$("#search-result .j_search-list").append(k);a.applyInvite&&(-1!=$.inArray(n.tenantKey.toLocaleUpperCase()+"\x3dapply",a.applyInvite)?k.find(".j_options_btn").addClass("hide").end().find(".j_options_cancel").removeClass("hide"):-1!=$.inArray(n.tenantKey.toLocaleUpperCase()+"\x3dinvite",a.applyInvite)&&k.find(".j_options_btn").addClass("hide").end().find(".j_options_acceptorrefuse").removeClass("hide"))}$("#result-choose,#exists-result").removeClass("hide");
$("#no-result").addClass("hide")}else $("#search-result").addClass("hide"),$("#j_apply_area .j_search_result_title").addClass("hide"),$("#result-choose,#no-result").removeClass("hide"),$("#exists-result").addClass("hide")}}))});c.off("click.AddTeam",".j_cancel_apply_btn").on("click.AddTeam",".j_cancel_apply_btn",function(b){var a=$(this);if(!a.attr("disabled")){a.attr("disabled",!0);var d=a.parents(".j_tenant_li");b=d.data("tenantKey");$.ajax({url:"/addteam/cancleApply.json",type:"get",dataType:"json",
data:{tenantKey:b},success:function(b){a.attr("disabled",!1);var c=b.modifyStatus;"success"==c?(f.notify("\u53d6\u6d88\u7533\u8bf7\u6210\u529f"),d.find(".j_options_btn").addClass("hide").end().find(".j_options_join").removeClass("hide")):"failure"==c?f.notify("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u8d26\u53f7\u4fe1\u606f\u53ca\u7ba1\u7406\u5458\u662f\u5426\u5df2\u5904\u7406\u4e86\u4f60\u7684\u52a0\u5165\u7533\u8bf7"):b.message&&f.notify(b.message)}})}});c.off("click.AddTeam",".j_accept_apply_btn").on("click.AddTeam",
".j_accept_apply_btn",function(b){var a=$(this);if(!a.attr("disabled")){a.attr("disabled",!0);var d=a.parents(".j_tenant_li");b=d.data("tenantKey");var c={};c.tenantKey=b;$.ajax({url:"/addteam/acceptInvite.json",type:"get",dataType:"json",data:c,success:function(b){a.attr("disabled",!1);b.message?f.notify(b.message):(f.notify("\u63a5\u53d7\u9080\u8bf7\u6210\u529f"),d.find(".j_options_btn").addClass("hide"))}})}});c.off("click.AddTeam",".j_refuse_apply_btn").on("click.AddTeam",".j_refuse_apply_btn",
function(b){var a=$(this);if(!a.attr("disabled")){a.attr("disabled",!0);var d=a.parents(".j_tenant_li");b=d.data("tenantKey");var c={};c.tenantKey=b;$.ajax({url:"/addteam/refuseInvite.json",type:"get",dataType:"json",data:c,success:function(b){a.attr("disabled",!1);"success"==b.modifyStatus?(f.notify("\u62d2\u7edd\u9080\u8bf7\u6210\u529f"),d.find(".j_options_btn").addClass("hide").end().find(".j_options_join").removeClass("hide")):b.message&&f.notify(b.message)}})}})},filterJoinedTenant:function(e){var c=
[];if(e&&!(0>=e.length)){for(var b=TEAMS.siblingsTenants,a=0,d=e.length;a<d;a++){for(var g=e[a],f=g.tenantKey,n=!1,k=0,r=b.length;k<r;k++)if(joinedTenant=b[k],f==joinedTenant.tenantKey){n=!0;break}n||c.push(g)}return c}},validateTenantName:function(e){e=$.trim(e);if(!e||0>=e.length)return f.notify("\u56e2\u961f\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),!1;$("#company-search-error").text("");return/^[\u4e00-\u9fa5aa-zA-Z\d\(\)\uFF08\uFF09]+$/.exec(e)?101<=e.length?($("#keywords").focus(),f.notify("\u56e2\u961f\u540d\u79f0\u6700\u5927\u957f\u5ea6\u4e3a100"),
!1):!0:($("#keywords").focus(),f.notify("\u8bf7\u8f93\u5165\u4ee5\u4e2d\u6587\u3001\u82f1\u6587\u3001\u6570\u5b57\u6216\u62ec\u53f7\u7ec4\u5408\u7684\u56e2\u961f\u540d\u79f0"),!1)},render:function(){$(this.el)},remove:function(){$("#jointeamModal").off(".bs.modal");$("#jointeamModal").remove();$("#jointeamModal").off(".AddTeam")}});m.exports=h});
define("teams/component/chatHistoryView",["teams/face/emojiarea","teams/utils","teams/component/chatHistoryModel","teams/wechat/ChatService"],function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/component/chatHistoryModel"),b=h("teams/wechat/ChatService");h=Backbone.View.extend({userId:"",channelId:"",chatType:"",channelName:"",pageNo:1,totalPages:1,initialize:function(a){this.el="#chat-histroy-modal";this.model=new c;this.userId=a.userId?a.userId:"";this.channelId=a.channelId?
a.channelId:"";this.chatType=a.chatType||"chatType";$("body #chat-histroy-modal").remove();$("body").append(e.template("component.chatHistory"));ZeroClipboard.config({swfPath:"js/clipboard.swf",activeClass:"zeroclipboard-is-active"});this.chatService=new b},delegateEvents:function(){var a=this;$("#chat-histroy-modal").on("hidden.bs.modal",function(){a.remove()});$(a.el).on("click.chatHistory",".page-first",function(){$(this).hasClass("disabled")||(a.disableButton(!0),e.gotoTop(".j_chat-history"),
a.pageNo=1,a.loadHistory(a.pageNo))});$(a.el).on("click.chatHistory",".page-pre",function(){$(this).hasClass("disabled")||(a.disableButton(!0),e.gotoTop(".j_chat-history"),a.pageNo-=1,a.loadHistory(a.pageNo))});$(a.el).on("click.chatHistory",".page-next",function(){$(this).hasClass("disabled")||(a.disableButton(!0),e.gotoTop(".j_chat-history"),a.pageNo+=1,a.loadHistory(a.pageNo))});$(a.el).on("click.chatHistory",".page-last",function(){$(this).hasClass("disabled")||(a.disableButton(!0),e.gotoTop(".j_chat-history"),
a.pageNo=a.totalPages,a.loadHistory(a.pageNo))});$("body").on("keydown.chatHistory",function(b){27==b.which&&a.close()})},render:function(){$(this.el).modal("toggle");this.loadHistory(1);e.layout(".j_chat-history")},close:function(){$("#chat-histroy-modal").modal("hide")},createChatHistoryBox:function(a){if(null!=a&&0!=a.length)for(var b=$(this.el).find("#chat-daybox-clone").find(".chat-history-list").clone(),c,e=0;e<a.length;e++){var f=a[e],k=f.postTime;c=!1;if(e!=a.length-1){nextChat=a[e+1];var r=
this.confirmDate(f.postTime),p=this.confirmDate(nextChat.postTime);r==p&&(c=!0)}f=this.createChatBoxByChat(f);b.prepend(f);c||(this.addChatBox(b,k),b=$(this.el).find("#chat-daybox-clone").find(".chat-history-list").clone())}},loadHistory:function(a){var b=this,c=this.model;a&&(c.pageNo=a);b.pageNo=a;var f=null,n=null,k=null;"channel"==this.chatType?(f="channel",k=this.channelId):(f="employee",n=this.userId);this.chatService.getHistoricalChatMessages(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,
f,n,k,a,10,function(a){if(0!=a.actionMsg.code)e.notify(a.actionMsg.message);else if(a=a.data,1>a.totalPages){$(b.el).find(".chat-history-view").html("\u65e0\u5386\u53f2\u6d88\u606f\u3002");var f=$(b.el).find(".pagination");f.hasClass("hide")||f.addClass("hide")}else{var k=a.result,l=a.pageNo+"/"+a.totalPages;b.totalPages=a.totalPages;$(b.el).find(".pagination").removeClass("hide");f=$(b.el).find(".pagination .active a");f.html(l);$("#chat-histroy-modal .chat-history-view").empty();b.changeButton(a.pageNo,
a.totalPages);b.createChatHistoryBox_new(k);c.readed(b.userId,TEAMS.currentUser.id,b.channelId,b.chatType)}})},createChatHistoryBox_new:function(a){if(null!=a&&0!=a.length)for(var b=$(this.el).find("#chat-daybox-clone").find(".chat-history-list").clone(),c,e=0;e<a.length;e++){var f=a[e],k=f.sendTime;c=!1;if(e!=a.length-1){nextChat=a[e+1];var r=this.confirmDate(f.sendTime),p=this.confirmDate(nextChat.sendTime);r==p&&(c=!0)}f=this.createChatBoxByChat_new(f);b.prepend(f);c||(this.addChatBox(b,k),b=$(this.el).find("#chat-daybox-clone").find(".chat-history-list").clone())}},
createChatBoxByChat_new:function(a){var b=a.id,c=a.senderEmployeeId,l=a.senderName,n=a.sendTime,k=$(this.el).find("#chat-box-clone").clone();TEAMS.currentUser.id!=c&&k.removeClass("mine");k.removeClass("hide");k.attr("id",b);k.find(".info").attr("id",c);k.find(".info").find("span").html(l);k.find(".info").find("time").html(Date.create(n).format("{HH}:{mm}:{ss}"));b=k.find(".content");if(a.relModule){c=a.message;switch(a.relModule){case "task":c="[\u4efb\u52a1]"+c;break;case "document":c="[\u6587\u6863]"+
c;break;case "customer":c="[\u5ba2\u6237]"+c;break;case "workflow":c="[\u5ba1\u6279]"+c;break;case "mainline":c="[\u9879\u76ee]"+c}b.html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+a.relEntityId+"' data-module\x3d'"+a.relModule+"' data-id\x3d'"+a.relEntityId+"'\x3e"+c+"\x3c/a\x3e")}else a.message?(f($),b.html($.faceConvert(e.initMessage(a.message)))):a.relImageId?(b.html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+a.relChatImage.sourceImageId+"' data-artZoom-source\x3d'/base/download/"+
a.relChatImage.sourceImageId+"' src\x3d'/base/download/"+a.relChatImage.smallImageId+"' \x3e"),b.find(".artZoom").artZoom()):a.relVoiceId?b.html("\x3cspan\x3e\x3ca data-value\x3d"+a.relVoiceId+"\x3e"+a.relVoiceName+"\x3c/a\x3e"):a.relAttachmentId&&b.html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.relAttachmentId+"?download\x3dtrue' data-value\x3d"+a.relAttachmentId+"\x3e"+a.relAttachmentName+"\x3c/a\x3e");return k},changeButton:function(a,b){1==b?($(this.el).find(".pagination .page-first").addClass("disabled"),
$(this.el).find(".pagination .page-pre").addClass("disabled"),$(this.el).find(".pagination .page-last").addClass("disabled"),$(this.el).find(".pagination .page-next").addClass("disabled")):1==a?($(this.el).find(".pagination .page-first").addClass("disabled"),$(this.el).find(".pagination .page-pre").addClass("disabled"),$(this.el).find(".pagination .page-last").removeClass("disabled"),$(this.el).find(".pagination .page-next").removeClass("disabled")):b==a?($(this.el).find(".pagination .page-last").addClass("disabled"),
$(this.el).find(".pagination .page-next").addClass("disabled"),$(this.el).find(".pagination .page-first").removeClass("disabled"),$(this.el).find(".pagination .page-pre").removeClass("disabled")):($(this.el).find(".pagination .page-first").removeClass("disabled"),$(this.el).find(".pagination .page-pre").removeClass("disabled"),$(this.el).find(".pagination .page-last").removeClass("disabled"),$(this.el).find(".pagination .page-next").removeClass("disabled"))},disableButton:function(a){a?($(this.el).find(".pagination .page-first").addClass("disabled"),
$(this.el).find(".pagination .page-pre").addClass("disabled"),$(this.el).find(".pagination .page-last").addClass("disabled"),$(this.el).find(".pagination .page-next").addClass("disabled")):($(this.el).find(".pagination .page-first").removeClass("disabled"),$(this.el).find(".pagination .page-pre").removeClass("disabled"),$(this.el).find(".pagination .page-last").removeClass("disabled"),$(this.el).find(".pagination .page-next").removeClass("disabled"))},confirmDate:function(a){a=Date.create(a);a.format("{MM}-{dd}");
var b=a.format("{yyyy}-{MM}-{dd}");a.is("today")?b="\u4eca\u5929":a.is("yesterday")&&(b="\u6628\u5929");return b},addChatBox:function(a,b){var c=this.confirmDate(b),e=$(this.el).find("#chat-daybox-clone").clone();e.removeClass("hide");e.attr("id",c);e.find(".date").find("time").html(c);e.find(".chat-history-list").html(a.children());$(this.el).find(".chat-history-view").prepend(e)},createChatBoxByChat:function(a){var b=a.id,c=a.sender.id,f=a.sender.username,n=a.postTime,k=$(this.el).find("#chat-box-clone").clone();
TEAMS.currentUser.id!=c&&k.removeClass("mine");k.removeClass("hide");k.attr("id",b);k.find(".info").attr("id",c);k.find(".info").find("span").html(f);k.find(".info").find("time").html(Date.create(n).format("{HH}:{mm}:{ss}"));b=k.find(".content");if(a.link){c=a.message;switch(a.module){case "task":c="[\u4efb\u52a1]"+c;break;case "document":c="[\u6587\u6863]"+c;break;case "customer":c="[\u5ba2\u6237]"+c;break;case "workflow":c="[\u5ba1\u6279]"+c;break;case "mainline":c="[\u9879\u76ee]"+c}b.html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+
a.link+"' data-module\x3d'"+a.module+"' data-id\x3d'"+a.link+"'\x3e"+c+"\x3c/a\x3e")}else a.message?b.html(e.initMessage(a.message)):a.chatImage?(b.html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+a.chatImage.imageUrl+"' data-artZoom-source\x3d'/base/download/"+a.chatImage.imageUrl+"' src\x3d'/base/download/"+a.chatImage.smallUrl+"' \x3e"),b.find(".artZoom").artZoom()):a.voice?b.html("\x3cspan\x3e\x3ca data-value\x3d"+a.voice.id+"\x3e"+a.voice.name+"\x3c/a\x3e"):a.attachment&&
b.html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.attachment.id+"?download\x3dtrue' data-value\x3d"+a.attachment.id+"\x3e"+a.attachment.name+"\x3c/a\x3e");return k},remove:function(){$(this.el).off(".chatHistory")}});m.exports=h});
define("teams/component/timeline",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.seasonArr=["\u7b2c\u4e00\u5b63\u5ea6","\u5e74\u4e2d","\u7b2c\u4e09\u5b63\u5ea6","\u5e74\u5ea6"];this.userId=e.userId;this.year=e.year;this.type=e.type;this.serialNumber=e.serialNumber;this.el=e.container;this.parentEl=e.parentEl;$(this.el).html(f.template("component.timeline"))},delegateEvents:function(){var e=this,c=$(this.el);c.on("click.timeline",".j_timetree_spread",
function(){var b=$(this).parent();if(!b.hasClass("active")){c.find(".reports-timetree .active").removeClass("active");b.addClass("active");var a=b.next(".timetree-weeklist");a.is(":hidden")&&a.slideDown("fast");a=b.parent().siblings(".timetree-month").find(".timetree-weeklist");a.is(":visible")&&a.slideUp("fast");b=b.parent().data("month");a=$(".reports-selectyear #curYear").data("year");ROUTER.navigate("/workreport/"+e.userId+"/"+a+"/month/"+b,{trigger:!0});$(".reports-panel").data({type:"month",
year:a,serialNumber:b})}});c.on("click.timeline",".dropdown-menu a",function(b){$(this).parents(".dropdown-menu").slideUp(100);$(this).parents(".dropdown-menu-toggle").removeData("showTimer");b=$(this).text();c.find(".reports-selectyear #curYear").text(b).data("year",b);e.genTimeLineByYear(b);ROUTER.navigate("/workreport/"+e.userId+"/"+b+"/week/1",{trigger:!0})});c.on("click.timeline",".season",function(b){b=$(this);if(!b.hasClass("active")){c.find(".reports-timetree .active").removeClass("active");
b.addClass("active");var a=c.find(".reports-timetree .timetree-month").find(".timetree-weeklist");a.is(":visible")&&a.slideUp("fast");b=b.data("serialNumber");a=$(".reports-selectyear #curYear").data("year");2==b?(ROUTER.navigate("/workreport/"+e.userId+"/"+a+"/halfYear",{trigger:!0}),$(".reports-panel").data({type:"halfYear",year:a})):4==b?(ROUTER.navigate("/workreport/"+e.userId+"/"+a+"/year",{trigger:!0}),$(".reports-panel").data({type:"year",year:a})):(ROUTER.navigate("/workreport/"+e.userId+
"/"+a+"/season/"+b,{trigger:!0}),$(".reports-panel").data({type:"season",year:a,serialNumber:b}))}});c.on("click.timeline",".j_week",function(b){var a=$(this);a.hasClass("active")||(c.find(".reports-timetree .active").removeClass("active"),a.addClass("active"),b=$(".reports-selectyear #curYear").data("year"),a=a.data("week"),ROUTER.navigate("/workreport/"+e.userId+"/"+b+"/week/"+a,{trigger:!0}),$(".reports-panel").data({type:"week",year:b,serialNumber:a}))})},render:function(){$(this.el);this.renderTimeLine();
f.layout("#timeline");$("#myReport").addClass("router").attr("href","/workreport/"+this.userId)},renderTimeLine:function(){this.genYearSelect();this.genTimeLineByYear(this.year,this.type,this.serialNumber)},genYearSelect:function(e){var c=$(this.el),b=parseInt(Date.create((TEAMS.blogUser||TEAMS.currentUser).activeDate).getFullYear()),a=f.getWeekDate(new Date(TEAMS.nowTime)).year;e=e||a;c.find(".reports-selectyear #curYear").text(e).data("year",e);for(c=c.find(".dropdown-menu").html("");b<=a;b++)c.append("\x3cli\x3e\x3ca\x3e"+
b+"\x3c/a\x3e\x3c/li\x3e")},genTimeLineByYear:function(e,c,b){e?c?b||(b=1):(c="week",b=1):(b=f.getWeekDate(new Date(TEAMS.nowTime)),e=b.year,c="week",b=b.week);for(var a,d=$(".reports-timetree").html(""),g=(new Date(e,0,1)).endOfISOWeek(),l=1,n=0,k=0;g.getFullYear()==e;){var r=g.getMonth()+1,p=Math.floor(r/3);r!=n&&(a=$("#month").clone().removeAttr("id"),a.data("month",r).find("strong").text(r),"month"==c&&r==b&&(a.find(".timetree-head").addClass("active"),a.find(".timetree-weeklist").removeClass("hide")),
d.append(a),n=r);r=$("#week").clone().removeAttr("id");r.data("week",l).find("span").text(l);"week"==c&&l==b&&(r.addClass("active"),a.find(".timetree-weeklist").removeClass("hide"));a.find(".timetree-weeklist").append(r);p!=k&&(k=$("#season").clone().removeAttr("id"),k.data("serial-number",p),k.find(".time-text").text(this.seasonArr[p-1]),2==p&&"halfYear"==c?k.addClass("active"):4==p?(k.find(".time-text").text(e+"\u5e74\u5ea6"),"year"==c&&k.addClass("active")):"season"==c&&p==b&&k.addClass("active"),
d.append(k),k=p);l++;g.addDays(7)}},update:function(e,c,b,a,d){this.userId=e;this.year=c;this.type=b;this.serialNumber=a;this.isMyReport=d;this.genYearSelect(c)},remove:function(){$(this.el).off(".timeline")}});m.exports=h});
define("teams/component/mainline",["teams/utils","teams/component/typeahead","teams/mainline/mainlinemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/mainline/mainlinemodel");h=Backbone.View.extend({targetId:"",tpl:'\x3cspan id\x3d"\x3c%\x3did%\x3e" class\x3d"entity-item j_entity_item"\x3e\x3ca class\x3d"entitybox-toggle" data-value\x3d"\x3c%\x3did%\x3e" data-module\x3d"mainline" data-id\x3d"\x3c%\x3did%\x3e" data-value\x3d"\x3c%\x3did%\x3e"\x3e\x3c%\x3dname%\x3e\x3c/a\x3e\x3c/span\x3e',initialize:function(b){this.container=
b.container;this.parentEl=b.parentEl;this.callbacks=b.callbacks;this.el=this.parentEl?this.parentEl+" "+this.container:this.container;this.targetId=b.targetId;this._module=b.module;this.model=new c({module:this._module,targetId:this.targetId});$(this.el).html(f.template("component.mainline"))},delegateEvents:function(){var b=this,a=this.model;$(b.el).off(".ml");$(b.el).off("click",".entity-item .close").on("click.ml",".entity-item .close",function(a){a.stopPropagation();a=$(this).prevAll("a").attr("id");
var c=$(this).prevAll("a").attr("data-value"),e=$(this).parents(".entity-container"),n=e.attr("data-url");if(n&&c){var k=$(this).parent(),r=e.data("param")||{};r._method="delete";a=function(a){a&&$.ajax({type:"POST",dataType:"json",data:r,url:n.replace("{id}",c),success:function(a){k.remove();e.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");b.callbacks&&b.callbacks.unlink&&b.callbacks.unlink(c,
a.streams||a.stream)}})};e.attr("data-noConfirm")?a(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",a)}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),e.trigger("removeEntity",a))});$(b.el).off("entitySelected.ml",".entity-toggle").on("entitySelected.ml",".entity-toggle",function(a){if(b.isEmptyTarget()){$(b.el).find(".entity-container").empty();for(var c=0;c<arguments.length;c++)b.renderMainline(arguments[c])}else{for(var e="",c=1;c<arguments.length;c++)e+=
arguments[c].id+",";e&&0<e.length&&b.model.link(e,!0,function(a){var d=a.streams;if(d&&!(0>=d.length)){f.notify("\u5173\u8054\u9879\u76ee\u6210\u529f");for(var c=0;c<d.length;c++)$("#stream").trigger("insertStream",d[c]);a=a.mainlines;$(b.el).find(".entity-container").empty();for(c=0;c<a.length;c++)b.renderMainline(a[c]);b.callbacks&&b.callbacks.link&&b.callbacks.link(e,d,!0)}})}});e({el:b.el+" #typeahead-mainline",module:"mainline",callback:function(a){"new"==a.id?b.create(a):b.link(a)}});$(b.el).on("click.ml",
".entity-item a.name",function(d){d.preventDefault();var c=$(this).attr("data-value");d={id:c};var e=$(this).attr("href");a.isGranted(d,function(a){if(a.granted)ROUTER.navigate(e,{trigger:!0});else return $(b.parentEl).html(f.template("base.nopermission",{msg:{message:"\u6ca1\u6709\u67e5\u770b\u6743\u9650",code:"900"},module:"mainline",id:c})),!1})});$(b.el).off("click",".j_more_show").on("click ",".j_more_show",function(a){a.stopPropagation();a=$(this);var c=a.data("type");a.addClass("hide").siblings(".j_more_hide").removeClass("hide");
$(b.el+" #"+c).children(".j_entity_item").show()});$(b.el).off("click",".j_more_hide").on("click ",".j_more_hide",function(a){a.stopPropagation();a=$(this);var c=a.data("type");a.addClass("hide").siblings(".j_more_show").removeClass("hide");$(b.el+" #"+c).find(".j_entity_item:lt(5)").show();$(b.el+" #"+c).find(".j_entity_item:gt(4)").hide()})},create:function(b){var a=this,d=this.model;d.mainline=b;d.save(function(b){a.renderMainline(b.mainline);a.isEmptyTarget()?f.notify("\u9879\u76ee\u65b0\u5efa\u6210\u529f"):
($(a.parentEl+" #stream").trigger("insertStream",b.stream),f.notify("\u9879\u76ee\u6dfb\u52a0\u6210\u529f"));a.callbacks&&a.callbacks.link&&a.callbacks.link(b.mainline.id,b.stream)})},link:function(b){var a=this,d=this.model;b.id==a.targetId?f.notify("\u4e0d\u80fd\u6dfb\u52a0\u81ea\u5df1\u4e3a\u76f8\u5173\u9879\u76ee"):a.findSeleted(b.id)?f.notify("\u9879\u76ee\u5df2\u5b58\u5728"):a.isEmptyTarget()?a.renderMainline(b):d.link(b,!1,function(b){a.renderMainline(b.mainline);$(a.parentEl+" #stream").trigger("insertStream",
b.stream);f.notify("\u9879\u76ee\u6dfb\u52a0\u6210\u529f");a.callbacks&&a.callbacks.link&&a.callbacks.link(b.mainline.id,b.stream)})},render:function(b){var a=$(this.el).find(".entity-container");a.attr("data-url","/mainline/unlink/{id}/"+this.targetId+".json");a.data("param",{module:this._module});if(b){for(var a=0,d=b.length;a<d;a++)this.renderMainline(b[a]);0<b.length&&($(this.el).removeClass("hide"),$(this.parentEl).find($(this.el).attr("icon")).parent().addClass("hide"));this.renderMoreType(b)}},
renderMoreType:function(b){if(b&&0!=b.length&&5<b.length){b=b.length;for(var a=$(this.el+" #other-relevance-mainline").children("span"),d=5;d<b;d++)$(a[d]).hide();$(this.el+" #other-relevance-mainline").find(".j_more_btn").remove();$(this.el+" #other-relevance-mainline").append('\x3cspan class\x3d"j_more_btn"\x3e\x3cspan class\x3d"j_more_show" data-type\x3d"other-relevance-mainline"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"j_more_hide hide" data-type\x3d"other-relevance-mainline"\x3e\x3ca\x3e\u6536\u8d77\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e')}},
renderMainline:function(b){if(b&&b.id){var a=$(this.el).find(".entity-container");b.name=this.filterHtml(b.name);0<$(this.el).find("#other-relevance-mainline .j_more_btn").length?$(this.el).find("#other-relevance-mainline .j_more_btn").before(_.template(this.tpl,b)):a.append(_.template(this.tpl,b));a.find("#"+b.id).data("object",b)}},findSeleted:function(b){return 1==$(this.el+" .entity-container #"+b).size()?!0:!1},getLinkIds:function(){var b=[];$(this.el).find(".entity-item").each(function(){b.push($(this).find("a").attr("data-value"))});
return b},filterHtml:function(b){return b.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace("/[\r\n]/g"," ")},isEmptyTarget:function(){return this.targetId&&""!=$.trim(this.targetId)&&"new"!=$.trim(this.targetId)?!1:!0},remove:function(){$(this.el).off(".ml")}});m.exports=h});
define("teams/component/streamview",["teams/utils","teams/component/streammodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/streammodel");h=Backbone.View.extend({el:"",initialize:function(c){this.container=c.container;this.parentEl=c.parentEl;this.serverPath=c.serverPath;this.el=this.parentEl?this.parentEl+" "+this.container:this.container;this.targetId=c.targetId;this.model=new e({targetId:this.targetId,serverPath:this.serverPath});$(this.el).html(f.template("base.stream"))},delegateEvents:function(){var c=
this,b=this.model;$(this.el).on("click",".stream-more",function(){b.page.pageNo++;c.renderStreamPage()});$(this.el).off("insertStream").on("insertStream","#stream",function(a){for(var b=1;b<arguments.length;b++)c.renderStream(arguments[b])})},render:function(){this.renderStreamPage()},renderStreamPage:function(){var c=this,b=this.model;this.model.query(function(){if(b.page){for(var a=b.page.result,d=0,g=a.length;d<g;d++)c.renderStream(a[d],!0);b.page.hasNext?$(c.el).find(".stream-more").removeClass("hide"):
$(c.el).find(".stream-more").addClass("hide")}})},renderStream:function(c,b){var a=$(this.el).find(".stream-container"),d=$(this.el).find("#stream-clone").clone(!0);d.attr("id",c.id);c.optUser&&(d.find(".stream-user").html(c.optUser.username),d.find(".stream-user").attr("userId",c.optUser.id));d.removeClass("hide");b?a.append(d):a.prepend(d);var g=d.find(".stream-message");c.streamType&&"updateContent"==c.streamType.name?(g.html(c.formatedContent),d.find(".stream-body").height("auto"),25<d.find(".stream-body").height()&&
(d.find(".stream-detail").html(c.formatedContent),g.html("\u66f4\u65b0\u4e86\u4e8b\u9879\u5185\u5bb9\uff1a\x3ca class\x3d'stream-detail-show'\x3e\u67e5\u770b\u8be6\u7ec6\x3c/a\x3e\x3ca class\x3d'stream-detail-hide dn'\x3e\u9690\u85cf\x3c/a\x3e"),g.find(".stream-detail-show").unbind("click").click(function(){$(this).addClass("hide");d.find(".stream-detail").removeClass("hide");g.find(".stream-detail-hide").removeClass("hide")}),g.find(".stream-detail-hide").unbind("click").click(function(){$(this).addClass("hide");
d.find(".stream-detail").addClass("hide");g.find(".stream-detail-show").removeClass("hide")}))):(g.html(c.formatedContent),g.find(".stream-attachment").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("id",a);$(this).attr("href",crmContext.remoteDownloadUrl+"/remotedownload/"+a+"/"+ETEAMSID+"/true");var b=$(this).attr("docType"),d=$(this).html();"image"==b?($(this).after("\x3ca id\x3d'stream-preview-"+a+"' style\x3d'margin-left: 5px;' rel\x3d'0' title\x3d'"+d+"' class\x3d'document-preview-btn btn btn-xs btn-info' href\x3d''\x3e\u9884\u89c8\x3c/a\x3e"),
$(this).parent().find("#stream-preview-"+a).addClass("fancybox").attr("type","image").attr("href","/base/download/"+a),$(this).parent().find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})):"office"!=b&&"pdf"!=b&&"text"!=b||$(this).after("\x3ca data-value\x3d'"+a+"' style\x3d'margin-left: 5px;'  title\x3d'\u9884\u89c8' target\x3d'_blank' class\x3d'document-preview-btn btn btn-xs btn-info' href\x3d'/wopi/files/preview/allView?id\x3d"+
a+"'\x3e\u9884\u89c8\x3c/a\x3e")}),g.find(".stream-mainline").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("href","/mainline/link/"+a)}),g.find(".stream-tag").each(function(){var a=$(this).parent();a.html(a.text())}),g.find(".stream-task").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("href","/tasks/"+TEAMS.currentUser.id+"/"+a)}),g.find(".stream-document").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("href",
"/documents/"+TEAMS.currentUser.id+"/"+a)}),g.find(".stream-customer").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("href","/customers/"+TEAMS.currentUser.id+"/"+a)}),g.find(".stream-workflow").each(function(){var a=$(this).attr("href").replace("{href}","");$(this).attr("href","/workflows/"+TEAMS.currentUser.id+"/"+a)}));d.find(".stream-cal").html(Date.create(c.optTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))}});m.exports=h});
define("teams/component/typeaheadview",["teams/component/template","teams/utils","teams/component/inviteview"],function(h,q,m){var f=h("teams/component/template"),e=h("teams/utils");h("teams/component/inviteview");h=Backbone.View.extend({initialize:function(c){this.$input=c.$el;this.clickHandler=c.clickHandler;this.remote=c.remote||"/search/suggestion.json";this.resultHandler=c.resultHandler},render:function(){$("#typeahead-div").remove();this.$input.after(f["component.typeahead"]);this.show();this.htmlEvents()},
htmlEvents:function(){var c=this,b=this.$input;b.off("focus.tt").on("focus.tt",function(a){c.search($(this))});b.off("click.tt").on("click.tt",function(a){a.stopPropagation()});b.off("keyup.tt").on("keyup.tt",function(a){a=a.which;13==a?$("#typeahead-div p.active").trigger("click.tt"):27==a?c.hide():38==a?(a=$("#typeahead-div p.active"),1>a.length?$("#typeahead-div p").last().addClass("active"):(a.removeClass("active"),(0<a.prev().length?a.prev():$("#typeahead-div p").last()).addClass("active"))):
40==a?(a=$("#typeahead-div p.active"),1>a.length?$("#typeahead-div p").first().addClass("active"):(a.removeClass("active"),(0<a.next().length?a.next():$("#typeahead-div p").first()).addClass("active"))):c.search($(this))});$("body").off("click.tt","#typeahead-div p").on("click.tt","#typeahead-div p",function(a){a=$(this).data("obj");$(this).hasClass("invite-toggle")&&"new"==a.id||(15<b.val().length?(e.notify("\u5173\u952e\u5b57\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e15,\u8bf7\u91cd\u65b0\u8bbe\u7f6e"),
b.val("")):c.clickHandler(a,b));b.trigger("focusout","tt")});$("#typeahead-div").off("mouseenter .tt","p").on("mouseenter .tt","p",function(){$(this).addClass("active");$("#typeahead-div p.active").removeClass("active")})},search:function(c){var b=this,a=$.trim(c.val());a==c.attr("placeholder")&&(a="");var d=c.attr("data-entity");this.suggestion=a;this.entity=d;if("relevance"==d){var g=c.parent().find(".typeahead-search");"customer"==g.attr("module")?b.remote=TEAMS.service.crm+"/customer/suggestion.json":
"calendar"==g.attr("module")?b.remote="/agendas/suggestion.json":b.remote="/"+g.attr("module")+"s/suggestion.json"}this.privacy="1"==c.attr("privacy")?!0:!1;if(d){$("#typeahead-div .loading_small").addClass(d).show();var g=b.remote,e={};"formField"==d?"rank"==c.attr("data-type")?$.ajax({type:"post",url:"/base/employee/queryRank.json",dataType:"json",data:e,success:function(d){d=d.employeeRanks;$("#typeahead-div .loading_small").hide();10<d.length&&d.push({id:"all",name:a,module:"all"});b.loadList(d)}}):
(g="/formdatastat/findFiledOptions.json",c=$("#js_form_field_set").find("option:selected").attr("id"),e.fieldId=c,$.ajax({type:"get",url:g,dataType:"json",data:e,success:function(d){d=d.fieldOptions;$("#typeahead-div .loading_small").hide();10<d.length&&d.push({id:"all",name:a,module:"all"});b.loadList(d)}})):(e.keywords=a,e.searchType=d,"tag"==d&&(e.privacy=b.privacy,e.allTag=!1),$.ajax({type:"get",url:g,dataType:"json",data:e,success:function(c){c=c[d+"s"];$("#typeahead-div .loading_small").hide();
10<c.length&&c.push({id:"all",name:a,module:"all"});b.loadList(c)}}))}},loadList:function(c){var b="",a="",d="";this.resultHandler&&(b=this.resultHandler);$("#typeahead-div #searchList").empty();suggestion=this.suggestion;entity=this.entity;if("department"==entity)var g=this.$input[0].id,a=$("#"+g).parents("#user-container").find("#employee-department").find("a").attr("data-value");"position"==entity&&(g=this.$input[0].id,d=$("#"+g).parents("#user-container").find("#employee-position").find("a").attr("data-value"));
if(suggestion&&2<escape(suggestion).length){for(var e=!0,g=0,n=c.length;g<n;g++){var k=c[g];if((k.name||k.username)==suggestion){e=!1;break}}g=this.$input.data("showNew");"forceDisabled"==g&&(e=!1);e&&"department"!=entity&&"position"!=entity&&"group"!=entity&&"relevance"!=entity&&"formLabel"!=entity&&c.push({id:"new",name:suggestion,username:suggestion,privacy:this.privacy});"relevance"==entity&&0==c.length&&$("#typeahead-div #searchList").append('\x3cp class\x3d"relevance"\x3e\x3cspan\x3e\u65e0\u76f8\u5173\u8bb0\u5f55\x3c/span\x3e\x3c/p\x3e')}g=
0;for(n=c.length;g<n;g++)if("formField"==entity)k=c[g],k.name=k.name.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace("/[\r\n]/g"," "),e='\x3cp class\x3d"fieldOption" id\x3d"'+k.id+'"\x3e\x3cspan\x3e'+k.name+"\x3c/sapn\x3e\x3c/p\x3e",e=$($.trim(e)),e.data("obj",k),$("#typeahead-div #searchList").append(e);else if(k=c[g],""==b||k.id!=b)if(""==a||k.id!=a)if(""==d||k.id!=d){k.createTime=Date.create(k.createTime).format("{yyyy}-{MM}-{dd}");k.name=k.name.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace("/[\r\n]/g",
" ");"workflow"==k.module&&(k.name+=k.serNum?k.serNum:"");e=_.template(f["suggestion."+entity],k);e=$($.trim(e));e.data("obj",k);k.avatar&&k.avatar.p5&&e.find(".avatar").attr("src","/base/download/"+k.avatar.p5);if("relevance"==entity)switch(k.module){case "calendar":e.find(".icon-calendar").addClass("hide")}$("#typeahead-div #searchList").append(e)}e=!0;g=this.$input.data("showNew");"forceDisabled"==g&&(e=!1);e&&"employee"==entity&&2>=escape(suggestion).length&&$("#typeahead-div #searchList").append(f["suggestion.invite"]);
this.show()},hide:function(){$("#typeahead-div").hide()},show:function(){$("#typeahead-div").show()},resetPostion:function(){$target=this.$input;var c=$target.offset().top,b=$target.offset().left;$("#typeahead-div").css("left",b+"px");$("#typeahead-div").css("top",c+25+"px")},remove:function(){$("body").off(".tt");$("#typeahead-div").off(".tt");this.$input.off(".tt");$("#typeahead-div").remove()}});m.exports=h});
define("teams/component/invitemodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:0,pageSize:23,invite:{invitee:""},saveInvite:function(f,e){$.ajax({url:"/invite.json",type:"post",dataType:"json",data:f,beforeSend:function(){},success:function(c){e&&e(c)}})},saveInvites:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/invite/saves.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryInvitations:function(f){var e={};e.pageNo=this.pageNo;
e.pageSize=this.pageSize;e["inviteInfo.invitee"]=this.invite.invitee;$.ajax({url:"/invite.json",type:"get",dataType:"json",data:e,success:function(c){f&&f(c)}})},sendInvite:function(f,e){f&&$.ajax({type:"post",url:"/invite/sendInvite/"+f+".json",dataType:"json",success:function(c){e&&e(c)}})},delInvite:function(f,e){f&&$.ajax({type:"post",dataType:"json",data:{_method:"delete"},url:"/invite/"+f+".json",success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/event","teams/utils teams/component/locus teams/component/entityselector teams/component/wechat teams/component/usercard teams/component/remindcard teams/component/entitybox teams/component/remind teams/component/shareout teams/component/userselector teams/component/tagselector teams/component/formtagselector teams/component/departmentselector teams/component/groupselector teams/component/formlabelselector teams/tag/tagrecentview teams/core/relogin teams/component/positionselector".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/component/locus"),c=h("teams/component/entityselector");h("teams/component/wechat");var b=h("teams/component/usercard"),a=h("teams/component/remindcard"),d=h("teams/component/entitybox"),g=h("teams/component/remind"),l=h("teams/component/shareout"),n=h("teams/component/userselector"),k=h("teams/component/tagselector"),r=h("teams/component/formtagselector"),p=h("teams/component/departmentselector"),s=h("teams/component/groupselector"),u=h("teams/component/formlabelselector"),
w=h("teams/tag/tagrecentview"),v=h("teams/core/relogin"),x=h("teams/component/positionselector"),y={};m.exports={setLastPage:function(a){y=a},initEvent:function(){$.ajaxSetup({cache:!1});var h=this;$(document).ajaxComplete(function(a,b,d){a={};try{a=$.parseJSON(b.responseText)}catch(c){}h.relogin&&a.actionMsg&&-1==a.actionMsg.code?(h.relogin=!1,(new v({currentUser:TEAMS.currentUser})).render()):h.relogin=!0});$("body").on("click","table.j_stripedTable td:first-child",function(a){$(this).parent("tr").addClass("active").siblings().removeClass("active")});
$("body").on("mouseenter.dropdownmenu",".dropdown-menu-toggle",function(a){var b=$(this);$(this).hasClass("j_tag")&&(new w).render();b.addClass("open");a=null!=b.find(".dropdown-user").get(0)?setTimeout(function(){b.find(".dropdown-user").slideDown("fast")},300):null!=b.find(".dropdown-tag").get(0)?setTimeout(function(){b.find(".dropdown-tag").slideDown("fast")},300):setTimeout(function(){b.children(".dropdown-menu").slideDown("fast")},300);b.data("showTimer",a);$(this).hasClass("user-panel")&&(null==
$("body").find(".user-menu-backdrop").get(0)&&$("body").append('\x3cdiv class\x3d"user-menu-backdrop fade"\x3e\x3c/div\x3e'),a=setTimeout(function(){$("body").find(".user-menu-backdrop").addClass("in")},150),$(this).data("dropTimer",a))}).on("mouseleave.dropdownmenu",".dropdown-menu-toggle",function(a){a=$(this).data("showTimer");$(this).removeClass("open");a&&clearTimeout(a);$(this).removeData("showTimer");$(this).children(".dropdown-menu").slideUp(100);$(this).find(".dropdown-user,.dropdown-tag").slideUp(100);
$(this).hasClass("user-panel")&&(a=$(this).data("dropTimer"))&&(clearTimeout(a),$("body").find(".user-menu-backdrop").removeClass("in"),setTimeout(function(){$("body").find(".user-menu-backdrop").remove()},150),$(this).removeData("dropTimer"))});$("body").on("click.dropdownmenu",".dropdown-menu a",function(a){a=$(this).closest(".dropdown-menu-toggle");if(0<a.length){var b=a.data("mode");if(b&&"select"==b){var b=a.find(".title"),d=a.data("entity"),c=$(this).data("entity");d!=c&&(b.html($(this).html()),
a.data("entity",c),a.trigger("change"))}}a=$($(this).parents(".dropdown")[0]);a.hasClass("dropdown-gettext")&&(b=$(this).text(),a.find(".dropdown-toggle").html(b+' \x3ci class\x3d"icon-caret-down"\x3e\x3c/i\x3e'));$(this).closest(".dropdown-menu-toggle");$(this).closest(".dropdown-menu").slideUp(100)});$("body").off("mouseenter.typeahead",".typeahead-wrapper").on("mouseenter.typeahead",".typeahead-wrapper",function(a){$(this).data("enter",!0)}).off("mouseleave.typeahead",".typeahead-wrapper").on("mouseleave.typeahead",
".typeahead-wrapper",function(a){$(this).data("enter",!1)});$("body").off("click.controlbtn",".control-btn").on("click.controlbtn",".control-btn",function(a){a.stopPropagation();$(this).addClass("hide");$(this).siblings(".typeahead-wrapper").removeClass("hide");$(this).siblings(".typeahead-wrapper").find(".control-input").focus()});$("body").off("focusout.controlinput",".control-input").on("focusout.controlinput",".control-input",function(a,b){a.stopPropagation();var d=$(this).parents(".typeahead-wrapper");
d.data("enter")&&"tt"!=b||(d.addClass("hide"),d.siblings(".control-btn").removeClass("hide"),d.trigger("hide"))});$("body").off("click",".links-control-group a").on("click",".links-control-group a",function(a){$(this).addClass("hide");if(a=$(this).attr("for"))if("#task-subtask"==a){var b=$("#subtaskClone").clone();b.find(".title .text").replaceWith("\x3cinput type\x3d'text' style\x3d'border:none;background-color:transparent;width:450px;' class\x3d'title j_nameInput ellipsis new' value\x3d'' tabindex\x3d'-1' maxlength\x3d'100' /\x3e");
b.removeAttr("id");0<$("#entitybox-container #task-subtask").length?($("#entitybox-container #task-subtask").find(".task-list").append(b),$("#entitybox-container #task-subtask").removeClass("hide"),$("#entitybox-container #task-subtask").find(".j_nameInput").focus()):($("#entitySlider #task-subtask").find(".task-list").append(b),$(a).removeClass("hide"),$(a).find(".j_nameInput").focus())}else a=$(this).parents(".links-control-group").parent().find(a),a.removeClass("hide"),a.find(".control-btn").trigger("click"),
a.trigger("addAttachment")});$("body").on("click",".remind-toggle",function(a){if($(this).attr("userId")||$(this).attr("targetId")||$(this).attr("module"))(0==$(this).parents("#entitybox").size()?new g({obj:$(this),el:"body"}):new g({obj:$(this),el:"#entitybox"})).render(),0<$("#htmleditmodeEsc").length?$("body").find("#remind-div").css("z-index","1036"):null!=$(".modal-backdrop.fade.in").get(0)&&$("body").find("#remind-div").addClass("highIdex")});$("body").on("click",".shareout-toggle",function(a){$(this).attr("targetId")&&
$(this).attr("module")&&((0==$(this).parents("#entitybox").size()?new l({obj:$(this),el:"body"}):new l({obj:$(this),el:"#entitybox"})).render(),0<$("#htmleditmodeEsc").length?$("body").find("#shareout-div").css("z-index","1036"):null!=$(".modal-backdrop.fade.in").get(0)&&$("body").find("#shareout-div").addClass("highIdex"))});$("body").on("click",".agenda-toggle",function(a){if(($(this).attr("userId")||$(this).attr("targetId")||$(this).attr("module"))&&$(this).attr("targetId")&&$(this).attr("module")){a=
$(this).attr("targetId");var b=$(this).attr("module"),c=$(this).attr("entity-title"),g=new Date,e=g.getFullYear(),k=g.getMonth(),k=k+1,k=10>k?"0"+k:k,l=g.getDate(),g=l,l=l+1,g=e+"-"+k+"-"+(10>g?"0"+g:g),e=e+"-"+k+"-"+(10>l?"0"+l:l),g=Date.create(g).getTime(),e=Date.create(e).getTime(),n=new d({entityModule:"agenda",obj:$(this),entityId:"new",allDay:!0,start:g,end:e,fromTargetId:a,fromModule:b,fromTargetName:c,callbacks:{afterOpen:function(){$("#entitybox-container .j_title").focus()},afterOperate:function(){n.close();
f.notify("\u65e5\u7a0b\u521b\u5efa\u6210\u529f")}}});n.render()}});$("body").on("click",".entitybox-toggle",function(a){var b=$(this).attr("data-module");a=$(this).attr("data-id");var c=$(this).attr("data-target"),g=$(this).attr("data-value"),e=$(this).attr("userId"),f=$(this).data("style")?$(this).data("style").autoheight:!1,k=$(this).attr("data-type");if(b&&a){var l=new d({entityModule:b,entityId:a,entityValue:g,autoHeight:f,dataType:k,target:$(this),userId:e,callbacks:{afterOpen:function(){c&&
$("#entitybox-container "+c).focus()},afterOperate:function(){l.close();"agenda"==b&&(1==$("#portal-container #calendar-list").size()&&$("#portal-container #calendar-list").trigger("refresh"),$("#calendar").trigger("refetch"))}},page:y});l.render()}});$("body").on("click",".usercard-toggle",function(a){(a=$(this).attr("userId"))&&"10000"!=a&&(new b({targetEl:$(this),userId:a})).render()});$("body").on("click",".remindcard-toggle",function(b){(b=$(this).attr("data-id"))&&(new a({targetEl:$(this),userId:b})).render()});
$("body").on("click",".locus-toggle",function(a){a=$(this).attr("user-id");var b=$(this).attr("user-name");a&&(new e({userId:a,userName:b})).render()});$("body").on("click",".entity-toggle",function(a){a=$(this);var b=$(this).parents(".mainline-controls"),d=[],g=$(this).find("#js_customer-import-btn").attr("taskid");1==b.size()&&b.find(".entity-container .entity-item").each(function(){d.push($(this).data("object"))});b=a.prev("input");(new c({targetEl:a,keyword:b?b.val():"",currentTaskId:g,module:a.attr("module"),
type:a.attr("data-type"),seletedList:d})).render()});$("body").off("mouseenter",".entity-item").on("mouseenter",".entity-item",function(a){$(this).attr("undeletable")||$(this).parents(".entity-container").attr("undeletable")||$(this).find("a:first").after('\x3ca class\x3d"close" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e')});$("body").off("mouseleave",".entity-item").on("mouseleave ",".entity-item",function(a){$(this).find(".close").remove()});$("body").off("click",".entity-item .close").on("click ",
".entity-item .close",function(a){a=$(this).prevAll("a").attr("id");var b=$(this).prevAll("a").attr("data-value"),d=$(this).parents(".entity-container"),c=d.attr("data-url");if(c&&b){var g=$(this).parent(),e=d.data("param")||{};e._method="delete";a=function(a){a&&$.ajax({type:"POST",dataType:"json",data:e,url:c.replace("{id}",b),success:function(a){g.remove();d.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664")}})};
d.attr("data-noConfirm")?a(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",a)}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),d.trigger("removeEntity",a))});$("body").off("click",".j_btn_close").on("click ",".j_btn_close",function(a){a=$(this);window.formJsonStr=null;(a=a.parents("#entitybox"))&&0<a.length?a.find(".modal-header .close").click():$("body").trigger("slideClose")});$("body").off("triggerClose").on("triggerClose",function(a){var b=location.pathname;
a=location.hash;b=b.substring(0,b.lastIndexOf("/"));""==b&&""!=a&&(b="/"+a.substring(1,a.lastIndexOf("/")));ROUTER.navigate(b,{trigger:!0})});$("body").off("click",".j_center .e-list .checkbox").on("click",".j_center .e-list .checkbox",function(a){var b=!1;$(this).find("i").hasClass("icon-checkbox-checked")&&(b=!0);a.stopPropagation();$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).parent("li").toggleClass("selected");b?$(".main .j_check-all").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked"):
0==$(".j_center .e-list i.icon-checkbox-unchecked").size()&&$(".main .j_check-all").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked");$("body").trigger("batch")});$("body").off("click",".j_check-all").on("click",".j_check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$(this).parents(".main").find(".j_center span.checkbox").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).parent("li").removeClass("selected")}):
$(this).parents(".main").find(".j_center span.checkbox").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).parent("li").addClass("selected")});$(".main .j_check-all").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$("body").trigger("batch")});$("body").off("batch").on("batch",function(a){0<$(".main").find(".j_center .selected").size()?($("body").addClass("batch-open"),$(".j_batchEl").removeClass("hide")):
($("body").removeClass("batch-open"),$(".j_batchEl").addClass("hide"))});$("body").off("click",".typeahead-search,.selector-toggle").on("click",".typeahead-search,.selector-toggle",function(){var a=$(this);switch(a.attr("data-entity")){case "employee":(new n({$target:$(this)})).open();break;case "department":(new p({$el:$(this)})).open();break;case "position":(new x({$el:$(this)})).open();break;case "group":(new s({$el:$(this)})).open();break;case "formLabel":(new u({$el:$(this)})).open();break;case "tag":var b=
"1"==a.siblings("input").attr("privacy")?!0:!1;(new k({$el:$(this),privacy:b})).open();break;case "formtag":b="1"==a.siblings("input").attr("privacy")?!0:!1,(new r({$el:$(this),privacy:b,module:"biaoge"})).open()}a=a.parents(".typeahead-wrapper");0<a.length&&a.find(".control-input").trigger("focusout.controlinput","tt")});$("body").off("click",".btn-back,.btn-group .back").on("click",".btn-back,.btn-group .back",function(a){0<$(this).parents("#entitySlider").size()?$("body").trigger("slideClose"):
0<$(this).parents("#entitybox").size()?$("#entitybox").modal("hide"):history.back();return!1});$("body").off("click",".btn-feedback").on("click",".btn-feedback",function(){var a=$(this).parents("#entitybox");0==a.length&&(a=$("#entitySlider"));a.find(".extend-comment").hasClass("active")?a.find("#comment-textarea").focus():a.find(".extend-comment").trigger("click.extend");var b=a.find(".extend-panel").position().top;a.find(".scrollwrapper").mCustomScrollbar("scrollTo",b-100)});$("body").off("click",
".share-join").on("click",".share-join",function(){var a=$(this).attr("entityId"),b=$(this).attr("module");$.ajax({type:"post",dataType:"json",data:{entityId:a,module:b},url:"/blog-message/shareApply.json",success:function(a){f.notify("\u5171\u4eab\u7533\u8bf7\u5df2\u53d1\u9001")}})});$(window).on("resize",function(a){setTimeout(function(){$("body div.scrollwrapper").each(function(a){$(this).trigger("resizeSroll",a)})},100);if(0<$("body").find("#navigation .j_basenav").length){a=$("body").find("#navigation .j_basenav").offset().top||
0;for(var b=$("body").find("#navigation .j_baseautolis li"),d=0,c=b.length;d<c;d++)if($(b[d]).hasClass("active")){($(b[d]).offset().top||0)>a?$("#navigation .j_activeli").addClass("active").html($(b[d]).find("a").clone()||""):$("#navigation .j_activeli").empty();break}}});$("body").off("resizeSroll").on("resizeSroll","div.scrollwrapper",function(a){a=$(this);if(a.attr("horizontal")){var b=$(window).width(),d=a.offset().left;a.css("width",b-d)}else{b=a.attr("height");b||(b=a.attr("marginbottom")||
0,d=a.offset().top,b=$(window).height()-d-b);if(null!=a.parents("#entitybox").get(0))var c=a.parents("#entitybox").find(".modal-content"),d=c.height(),c=c.offset().top,d=$(window).height()-d-c,b=b-d;a.css("height",b)}a.mCustomScrollbar("update")});$("body").off("rViewSlide").on("rViewSlide",function(a){1439<$(window).width()?($(".j_sidebarPren").addClass("sidebar-in"),$(".j_sidebarCtrl").data("open",!0).addClass("on")):($(".j_sidebarPren").removeClass("sidebar-in"),$(".j_sidebarCtrl").data("open",
!1).removeClass("on"));setTimeout(function(){$(window).trigger("resize.customerTable")},400)});$("body").off("click",".j_sidebarCtrl").on("click",".j_sidebarCtrl",function(){$(this).data("open")?($(".j_sidebarPren").removeClass("sidebar-in"),$(this).data("open",!1).removeClass("on")):($(".j_sidebarPren").addClass("sidebar-in"),$(this).data("open",!0).addClass("on"));setTimeout(function(){$(window).trigger("resize.customerTable")},400)});setInterval(function(){$('[data-toggle\x3d"tooltip"]').tooltip({container:"body",
animation:!0,html:!0})},1E3);$("body").off("mouseenter","li.search").on("mouseenter","li.search",function(){var a=$(this).find("input");a.focus().addClass("on").attr("placeholder",a.next().attr("title"))});$("body").off("mouseleave","li.search").on("mouseleave","li.search",function(){var a=$(this).find("input");""==$.trim(a.val())&&a.removeAttr("placeholder").blur().removeClass("on")});$("body").off("blur","li.search input").on("blur","li.search input",function(){var a=$(this);""==$.trim(a.val())&&
a.removeAttr("placeholder").removeClass("on")});$("body").off("paste","textarea.smart-title").on("paste","textarea.smart-title",function(a){if((a=((a.originalEvent||a).clipboardData||window.clipboardData).getData("text"))&&(0<a.indexOf("\n")||0<a.indexOf("\r")))return a=a.replace(/[\n\r]/g,""),$(this).val($(this).val()+a),!1});$("body").click(function(a){a=$(a.target);0==a.closest(".j_form_goalSlideCtrl").length&&0==a.closest(".j_form_list_head").length&&$(".j_form_goalSlideObj").removeClass("sidebar-in")})}}});
define("teams/component/commentmodel",function(h,q,m){h=Backbone.Model.extend({pageSize:10,pageNo:1,content:"",userIds:[],userIdIndex:[],visittype:"",visitTypeName:"",contactid:"",attachments:[],initialize:function(f){this._module=f.module;this.targetId=f.targetId;this.serverPath=f.serverPath||"";this.userId=TEAMS.currentUser.id},pageQuery:function(f,e){$.ajax({type:"get",url:this.serverPath+"/comment/"+this.targetId+".json",dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize,subtargetId:f.subtargetId},
success:function(c){e&&e(c)}})},searchByIds:function(f,e){f.pageNo=this.pageNo;f.pageSize=this.pageSize;$.ajax({type:"get",url:this.serverPath+"/comment/searchByIds.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},save:function(f,e){var c="",c=e?e:this._module&&"customer"==this._module?{attachment:this.attachments.join(","),targetId:this.targetId,module:this._module,content:this.content,userIds:this.userIds.join(","),userIdIndex:this.userIdIndex.join(","),"parent.id":this.parent,visitType:this.visittype,
visitTypeName:this.visitTypeName,subtargetId:this.contactid}:{attachments:this.attachments.join(","),"comment.targetId":this.targetId,"comment.module":this._module,"comment.content":this.content,"comment.userIds":this.userIds.join(","),"comment.userIdIndex":this.userIdIndex.join(","),"comment.parent.id":this.parent,"comment.visitType":this.visittype,"comment.subtargetId":this.contactid};$.ajax({type:"post",url:this.serverPath+"/comment.json",dataType:"json",data:c,success:function(b){f&&f(b)}})},
commentCommented:function(f,e){$.ajax({type:"get",dataType:"json",url:this.serverPath+"/comment/commentCommented.json",data:f,success:function(c){e&&e(c)}})},newTask:function(f,e){$.ajax({type:"post",url:"/task/transmit.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},transmited:function(f,e){$.ajax({type:"get",dataType:"json",url:"/task/transmited.json",data:f,success:function(c){e&&e(c)}})},deleteById:function(f,e){$.ajax({type:"get",dataType:"json",url:this.serverPath+"/comment/deleteById.json",
data:{id:f},success:function(c){e&&e(c)}})},updateById:function(f,e,c,b,a,d){$.ajax({type:"get",dataType:"json",url:this.serverPath+"/comment/updateById.json",data:{id:f,content:e,oldUserIds:c.join(","),userIds:b.join(","),userIdIndex:a.join(",")},success:function(a){d&&d(a)}})}});m.exports=h});
define("teams/component/formdatalogview",["teams/utils","teams/component/formdatalogmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/formdatalogmodel");h=Backbone.View.extend({el:"",initialize:function(c){this.container=c.container;this.parentEl=c.parentEl;this.formDataId=c.formDataId;this.el=this.parentEl?this.parentEl+" "+this.container:this.container;this.model=new e({formDataId:this.formDataId});$(this.el).html(f.template("base.formdatalog"))},delegateEvents:function(){var c=
this,b=this.model;$(this.el).on("click",".stream-more",function(){b.page.pageNo++;c.renderDataLogPage()});$(this.el).off("insertStream").on("insertStream","#stream",function(a){for(var b=1;b<arguments.length;b++)c.renderDataLog(arguments[b])})},render:function(){this.renderDataLogPage()},renderDataLogPage:function(){var c=this,b=this.model;this.model.findFormDataLogs(function(){if(b.page){var a=b.page.result;if(a&&0<a.length)for(var d=0,g=a.length;d<g;d++)c.renderDataLog(a[d]);else $(c.el).find(".stream-container").html("\x26nbsp;\x26nbsp;\u6682\u65e0\u64cd\u4f5c\u65e5\u5fd7");
b.page.hasNext?$(c.el).find(".stream-more").removeClass("hide"):$(c.el).find(".stream-more").addClass("hide")}})},renderDataLog:function(c){var b=$(this.el).find(".stream-container"),a=$(this.el).find("#dataLog-clone").clone(!0);a.attr("id",c.id);c.operator&&(a.find(".stream-user").html(c.operator.username),a.find(".stream-user").attr("userId",c.operator.id));a.removeClass("hide");var d=a.find(".stream-message"),g="",g=c.content?"\u5c06"+c.fieldName+' \u3010\x3cdiv class\x3d"j_oldContent stream-formdata ellipsis" title\x3d"'+
c.content+'"\x3e'+c.content+'\x3c/div\x3e\u3011\u66f4\u65b0\u4e3a\u3010\x3cdiv class\x3d"j_newContent stream-formdata ellipsis" title\x3d"'+c.newContent+'"\x3e'+c.newContent+"\x3c/div\x3e\u3011":"\u5c06"+c.fieldName+' \u66f4\u65b0\u4e3a\u3010\x3cdiv class\x3d"j_newContent stream-formdata ellipsis" title\x3d"'+c.newContent+'"\x3e'+c.newContent+"\x3c/div\x3e\u3011";"ImageComponent"==c.componentKey&&(g='\u4e0a\u4f20\u4e86 \u3010\x3cdiv class\x3d"j_newContent stream-formdata ellipsis" title\x3d"'+c.newContent+
'"\x3e'+c.newContent+"\x3c/div\x3e\u3011");d.html(g);a.find(".stream-cal").html(Date.create(c.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));b.append(a)},remove:function(){$(this.el).off(".extend");this.commentView&&(this.commentView.remove(),this.commentView=null)}});m.exports=h});
define("teams/component/entityselector",["teams/utils","teams/component/template","teams/crm/CrmService"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/template"),c=h("teams/crm/CrmService");h=Backbone.View.extend({initialize:function(b){this.el="#selector-relevance";this.targetEl=b.targetEl;this.keyword=b.keyword;this._module=b.module;this.currentTaskId=b.currentTaskId;this.type=b.type;this.seletedList=b.seletedList;this.entity=$(this.targetEl).attr("data-entity");this.multi=$(this.targetEl).attr("data-multi");
this.type=b.type;if(0==$(this.el).size()){var a=e["selector.relevance"];$("body").append(a);if(b.module){a="";switch(b.module){case "task":a="subtask"==b.type?"\u5173\u8054\u5b50\u4efb\u52a1\u9009\u62e9":"\u5173\u8054\u4efb\u52a1\u9009\u62e9";break;case "document":a="\u5173\u8054\u6587\u6863\u9009\u62e9";break;case "customer":a="\u5173\u8054\u5ba2\u6237\u9009\u62e9";break;case "workflow":a="\u5173\u8054\u5ba1\u6279\u9009\u62e9";break;case "mainline":a="\u76f8\u5173\u9879\u76ee\u9009\u62e9";break;
case "agenda":a="\u5173\u8054\u65e5\u7a0b\u9009\u62e9"}$("#selector-relevance .modal-header h5").html(a)}$(this.el).find("#search-result").attr("height",332)}this.crmService=new c},delegateEvents:function(){var b=this,a=$("#selector-relevance");$("#selector-relevance").off(".entityselector");$("#selector-relevance").on("keyup.entityselector",".suggestion",function(a){13==a.keyCode&&$("#selector-relevance .relevance-search").trigger("click")});$("#selector-relevance").on("click.entityselector",".relevance-search",
function(a){$("#selector-relevance .suggestion").val();b.search()});$("#selector-relevance").on("click.entityselector",".relevance-ok",function(){var a=[];$("#selector-relevance .selected-relevances .selected-relevance").each(function(){var b=$(this).data("entity");a.push(b)});0<a.length?("subtask"==b.type?$(b.targetEl).trigger("subTaskSelected",a):$(b.targetEl).trigger("entitySelected",a),b.close()):f.notify("\u8bf7\u9009\u62e9\u5bf9\u8c61\uff0c\u53ef\u5148\u8f93\u5165\u5173\u952e\u5b57\u5e76\u6309\u56de\u8f66\u952e\u8fdb\u884c\u641c\u7d22\u3002")});
$("#selector-relevance").on("click.entityselector",".relevance-cancel",function(){b.close()});$("#selector-relevance").on("click.entityselector",".result-li",function(){var d=$(this);d.find(".checkbox i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");d.toggleClass("selected");var c=d.data("entity");d.hasClass("selected")?b.addSelected(c):a.find(".selected-relevances #"+c.id).remove()});$("#selector-relevance").on("click.entityselector",".page-first",function(){b.paging(1)});
$("#selector-relevance").on("click.entityselector",".page-pre:not(.disabled)",function(){var a=parseInt($("#selector-relevance .pagination").data("pageNo"))-1;b.paging(a)});$("#selector-relevance").on("click.entityselector",".page-next:not(.disabled)",function(){var a=parseInt($("#selector-relevance .pagination").data("pageNo"))+1;b.paging(a)});$("#selector-relevance .pagination .page-last").on("click.entityselector",function(){var a=parseInt($("#selector-relevance .pagination").data("totalPages"));
b.paging(a)});$("#selector-relevance").on("click.entityselector",".j_selected-relevances .close",function(a){a=$(this).parent();var b=a.attr("id");$("#selector-relevance .search-result ul #"+b+" checkbox").trigger("click");a.remove()});$("#selector-relevance").on("hidden.bs.modal.entityselector",function(){b.remove()})},render:function(){$("#selector-relevance .selected-relevances").empty();$("#selector-relevance").modal();$("#selector-relevance .suggestion").val(this.keyword);if(this.seletedList)for(var b=
0;b<this.seletedList.length;b++)this.addSelected(this.seletedList[b]);this.search()},close:function(){$("#selector-relevance").modal("hide")},addSelected:function(b){if(!(1<=$("#selector-relevance .selected-relevances #"+b.id).size())){var a=$("#selected-relevance-clone").clone(!0).attr("id",b.id);a.find(".j_name").data("entity",b);a.find(".j_name").attr("data-id",b.id);a.find(".j_name").attr("title",b.name).html(b.name);$("#selector-relevance .selected-relevances").append(a)}},renderLi:function(b,
a){var d=$("#selector-relevance #result-li-clone").clone();b.module=this._module;d.data("entity",b);d.attr("id",b.id);d.addClass(this._module);d.find(".sn").html(parseInt(a+1));d.find(".status i").addClass(this._module);if("workflow"==this._module){var c=b.name?b.name:"",e=b.serNum?b.serNum:"";d.find(".j_entity_name").attr("title",c+e).text(c+e)}else d.find(".j_entity_name").attr("title",b.name).text(b.name);b.createTime&&d.find(".date").html(Date.create(b.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
b.creator&&d.find(".user").html(b.creator.username);1<=$("#selector-relevance .selected-relevances #"+b.id).size()&&(d.addClass("selected"),d.find(".checkbox i").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked"));$("#selector-relevance .search-result ul").append(d)},paging:function(b){this.search(b)},search:function(b){var a=this;b=b||1;var d=$("#selector-relevance .suggestion").val(),c=$("#selector-relevance .suggestion").attr("placeholder"),e=$("#selector-relevance #search-result");
$("#selector-relevance #search-result ul").empty();e.hasClass("mCustomScrollbar")||(e.height(330),e.mCustomScrollbar({theme:"darkblue"}));d==c&&(d="");if("customer"==a._module)a.crmService.findCustomersByKeyword(TEAMS.currentUser.id,"all",d,b,20,function(d){var c={};b=parseInt(b);c.result=d.data;c.pageNo=b;c.pageSize=20;d=d.recordsTotal;c.totalCount=d;c.hasPre=1<=b-1;var g=parseInt(d/20);0<d%20&&g++;c.totalPages=g;c.hasNext=b+1<=g;a.renderList(c)});else{c={keywords:d,pageNo:b,loadCount:!0,pageSize:20,
"filter.type":"all"};c["filter.keywords"]=d;c["filter.flowFilter"]="todo";c["order.property"]="default";d="/"+a._module+"s/search.json";"task"==a._module&&"subtask"==a.type&&(c.currentTaskId=a.currentTaskId,d="/"+a._module+"s/findSubtask.json");if("mainline"==a._module||"tag"==a._module)d="/"+a._module+"/search.json";if("mainline"==a._module||"task"==a._module||"document"==a._module||"workflow"==a._module)c["filter.type"]="noShare";$.ajax({type:"get",url:d,dataType:"json",data:c,success:function(b){a.renderList(b.page)}})}},
renderList:function(b){$("#selector-relevance .pagination").data("pageNo",b.pageNo);$("#selector-relevance .pagination").data("totalPages",b.totalPages);b.hasPre?$("#selector-relevance").find(".page-pre").removeClass("disabled"):$("#selector-relevance").find(".page-pre").addClass("disabled");b.hasNext?$("#selector-relevance").find(".page-next").removeClass("disabled"):$("#selector-relevance").find(".page-next").addClass("disabled");$("#selector-relevance .active a").html("\u7b2c"+b.pageNo+"/"+b.totalPages+
"\u9875");for(var a=b.result,d=0;d<a.length;d++)this.renderLi(a[d],(b.pageNo-1)*b.pageSize+d);a.length||$("#selector-relevance #search-result ul").append('\x3cli class\x3d"result-li no-relevance-record"\x3e\u6ca1\u6709\u6570\u636e\uff0c\u8bf7\u8f93\u5165\u9002\u5f53\u7684\u5173\u952e\u5b57\u5e76\u6309\u56de\u8f66\u952e\u8fdb\u884c\u641c\u7d22\u3002\x3c/li\x3e')},remove:function(){$("#selector-relevance").modal("hide");$("#selector-relevance").off(".entityselector");$("#selector-relevance").remove()}});
m.exports=h});define("teams/component/visitmodel",function(h,q,m){h=Backbone.Model.extend({load:function(f,e){$.ajax({url:"/profile/visit.json",type:"get",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/groupselector",["teams/component/template"],function(h,q,m){var f=h("teams/component/template");window.GroupSelector=Backbone.View.extend({initialize:function(e){this.$el=e=e.$el;this.entity=e.attr("data-entity");this.module=e.attr("module");this.multi=e.attr("data-multi");this.winEl="#selector-"+this.entity;e=f["selector."+this.entity];$("body").append(e)},delegateEvents:function(){var e=this,c=$(e.winEl);$("body").on("keydown.group-win",function(b){27==b.which&&c.modal("hide")});
$("body").on("click.group-win",".groupclick",function(b){b.preventDefault();b=$(this).data("group");e.close();e.$el.trigger("confirmHandler",{objs:b})});c.on("hidden.bs.modal",function(){e.remove()})},open:function(){$(this.winEl).modal("toggle");this._loadGroup()},close:function(){$(this.winEl).modal("hide")},_loadGroup:function(){var e=this;$.ajax({type:"get",url:"/channel.json",dataType:"json",success:function(c){c=c.channels;for(var b=0;b<c.length;b++){var a=c[b],d=$(e.winEl).find("#selector-group-div #group-div-clone").clone();
d.attr("id",a.id);d.data("group",a);d.find(".sn-link").html(b+1);d.find(".j_entity_name").text(a.name);d.find(".date").text(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"):"");d.find(".user").text(a.creator.username);d.removeClass("hide");$(e.winEl).find("#selector-group-div .selector-group-ui").append(d)}}})},remove:function(){var e=$(this.winEl);$("#body").off(".group-win");e.remove()}});m.exports=window.GroupSelector});
define("teams/component/fileversionlist",["teams/utils","teams/component/attachment","teams/base/preview","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils");h("teams/component/attachment");var e=h("teams/base/preview"),c=h("teams/component/typeahead");h=Backbone.View.extend({initialize:function(b){this.fileObjId=b.fileObjId;this.fileEl=b.container;this.el="#fileVersionModal";$("body").append(f.template("component.fileversionlist"))},render:function(){$(this.el).modal("toggle");this.search(!0)},
search:function(b){var a=this,d=$(a.el),c={};c.pageNo=b;c.pageSize="10";c.id=a.fileObjId;var l=d.find("#describeSearch").val(),n=d.find("#createBeginTime").val(),k=d.find("#createEndTime").val(),r="";d.find("#creatorDiv .j_optcontainer .j_selected span a").each(function(){r+=$(this).attr("id")+","});c.name=$.trim(l);c.startTime=$.trim(n);c.endTime=$.trim(k);c.userIds=r;$.ajax({type:"post",url:"/base/upload/findVersionList.json",data:c,success:function(d){var c=d.page;d=c.result;var g=$(a.el),k=g.find("#content .j_versionlist");
1==b&&(k.empty(),null==d||0==d.length?g.find("#content .j_empty").show():g.find("#content .j_empty").hide());c&&c.hasNext?($(a.el+" #more_data").parent().show(),$(a.el+" #more_data").data("page",c)):$(a.el+" #more_data").parent().hide();if(null!=d)for(c=0;c<d.length;c++){var l=g.find("#contentClone li").clone(),n=d[c],r=n.id;l.find(".vs").html("V"+n.versionNumber);l.find(".describe").text(n.describe);l.find(".describe").attr("data-original-title",n.describe);l.find(".describe").attr("data-id",r);
l.find(".createUser").text(null!=n.creator?n.creator.username:"\u65e0");var h=Date.create(n.uploadTime);l.find(".createTime").text(h.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));l.find(".createTime").attr("title",h.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));l.find(".detail").attr("id",r);l.find(".detail").data("dlid",r);l.find(".restore").attr("id",r);k.append(l);(new e({container:$("body"),afterJqObj:l.find(".handle"),fileObj:n,previewType:"version"})).render();g.find("#document-preview-"+r).css("margin-right",
"0")}f.layout(a.el+" .j_versionListScr")}})},delegateEvents:function(){var b=this,a=$(this.el);$("body").off("click.version",".documentversioninfo-backdrop").on("click.version",".documentversioninfo-backdrop",function(){$(".documentversioninfo-backdrop").remove()});a.off("hidden.bs.modal").on("hidden.bs.modal",function(){b.remove()});$("body").off("click.version",".documentversion-modal-dialog").on("click.version",".documentversion-modal-dialog",function(a){a.stopPropagation()});$("body").off("click.version",
".restore").on("click.version",".restore",function(a){var c=$(this).attr("id");f.confirm("\u8fd8\u539f\u8be5\u7248\u672c\u5c06\u751f\u6210\u65b0\u7684\u7248\u672c\uff0c\u786e\u8ba4\u8fd8\u539f\u5417?",function(a){a&&(a={},a.id=c,$.ajax({type:"post",url:"/base/upload/restoreVersion.json",data:a,success:function(a){f.notify("\u7248\u672c\u8fd8\u539f\u6210\u529f\uff01");$(".fileVersionModal .close").click();$(".documentversioninfo-backdrop").remove();$(b.el).remove();$(".modal-backdrop").remove();$(b.fileEl).trigger("restoreVersion",
a)}}))})});a.on("click.version","#more_data",function(a){a=$(this).data("page");b.search(a.nextPage)});a.on("click.version","#search",function(d){a.find("#trashbinContent .j_trashlist").html("");b.search(1)});c({el:b.el+" #creator",callback:function(d){if(d&&!$.isEmptyObject(d)){var c=a.find("#creatorDiv .j_selected");b.renderTypeheader(c,d)}}});f.datepicker({el:b.el+" #createBeginTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#createBeginTime"),e=
$(b.el).find("#createEndTime");e.val()&&a>e.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),c.val("")):c.val(a)}});f.datepicker({el:b.el+" #createEndTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#createBeginTime"),e=$(b.el).find("#createEndTime");e.val()&&a<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),e.val("")):e.val(a)}})},renderTypeheader:function(b,a){if(a.length)for(var d=
0;d<a.length;d++){var c=a[d],e=c.name,f=c.id;if(e&&f){var k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&(k=null)});b.append(k)}}else e=a.name,f=a.id,e&&f&&(k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&(k=null)}),b.append(k))},remove:function(){$(this.el).remove();$(this.el).off(".version");
$("body").off(".version")}});m.exports=h});
define("teams/component/usersummarymodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},loadProfile:function(f,e){$.ajax({type:"get",url:"/profile/summary/"+f+".json",dataType:"json",success:function(c){e&&e(c)}})},holidays:function(f,e){$.ajax({type:"get",url:"/timecard.json",dataType:"json",data:{date:f},success:function(c){e&&e(c)}})},loadTimecards:function(f,e,c){$.ajax({type:"get",url:"/timecard/checks.json",dataType:"json",data:{employeeId:f,date:e},success:function(b){c&&
c(b)}})},loadSummary:function(f,e,c,b,a){$.ajax({type:"get",url:"/profile/loadSummary.json",dataType:"json",data:{currentuserId:f,employeeId:e,module:c,isMe:b},success:function(b){a&&a(b)}})}});m.exports=h});
define("teams/component/multiuserslider",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.pageNO=1;this.el="#employee-layer";this.userId=e.userId?e.userId:TEAMS.currentUser.id;this._module=e.module;this.dataType=e.dataType;this.pageKey=this._module+"#"+this.userId;this.isFind=!1;this.employeeIds=[];this.employeeIds.push(TEAMS.currentUser.id);$("#employee-layer").html(f.template("component.multiuserslider"));f.layout("#employees-wrapper")},
delegateEvents:function(){var e=this,c=$(e.el);c.on("click.UserSlider","li.more",function(){e.pageNO++;e.renderOthers(!0)});c.on("keydown.UserSlider","#employeesearch-keywords",function(b){if(13===b.keyCode){e.pageNO=1;e.isFind=!0;b=c.find("#employees li:first");c.find("#employees").empty();c.find("#employees").prepend(b);b=c.find("#employeesearch-keywords").val();var a="";switch(e.dataType){case "all":a="/users.json";break;case "subordinate":a=""==$.trim(b)?"/users/workreportSubordinates/"+e.userId+
".json?allSubordinate\x3dfalse":"/users/workreportSubordinates/"+e.userId+".json"}e.fetchData(a,b)}});c.on("click.UserSlider",".j_user p",function(b){b=$(this).parent();b.find(".j_expend");b.find("#avatar").attr("user-id");b=b.find("#avatar").attr("url");ROUTER.navigate(b,{trigger:!0});void 0==$(this).parent().attr("parent_id")&&$(this).parent().find(".j_expend").trigger("click")});c.on("click.UserSlider",".li_checkUser p",function(b){b=$(this).parent().find(".userCheckBox")[0];var a=$(b).attr("user-id");
b.checked?($(b).attr("checked",!1),e.employeeIds.remove(function(b){return b==a})):(e.employeeIds.push(a),$(b).prop("checked",!0));var d="";c.find(".moduleCheckBox").each(function(){this.checked&&(d=d+$(this).attr("module")+",")});Backbone.trigger("calendarpage.renderCalendarView",{employeeIds:e.employeeIds,showModules:d,from:"multiuserslider"})});c.on("click.UserSlider",".userCheckBox",function(b){var a=$(this).attr("user-id");this.checked?e.employeeIds.push(a):e.employeeIds.remove(function(b){return b==
a});var d="";c.find(".moduleCheckBox").each(function(){this.checked&&(d=d+$(this).attr("module")+",")});Backbone.trigger("calendarpage.renderCalendarView",{employeeIds:e.employeeIds,showModules:d,from:"multiuserslider"})});c.on("click.UserSlider",".moduleCheckBox",function(b){var a="";c.find(".moduleCheckBox").each(function(){this.checked&&(a=a+$(this).attr("module")+",")});Backbone.trigger("calendarpage.renderCalendarView",{employeeIds:e.employeeIds,showModules:a,from:"multiuserslider"})});c.on("click.UserSlider",
".j_expend",function(b){b=$(this).parent();var a=$(this),d=b.find("#avatar").attr("user-id"),c="/users/directSubordinates/"+d+".json";a.hasClass("caret")&&(a.hasClass("caret-up")?(a.removeClass("caret-up"),e.removeSubs(b,d)):(e.existSubs(b,d)||e.fetchData(c,null,b,d),a.addClass("caret-up")))})},render:function(){$(this.el);this.buildUser(TEAMS.currentUser);this.renderOthers(!1)},removeAllSub:function(e,c){var b=$(this.el);$.ajax({type:"get",url:c,dataType:"json",success:function(a){if(a&&a.subordinates)for(var d=
0;d<a.subordinates.length;d++)b.find("li[dele_id\x3d'"+a.subordinates[d].id+"']").remove()}})},removeSubs:function(e,c){$(this.el).find("li[parent_id\x3d'"+c+"']").each(function(b){$(this).addClass("hide")})},existSubs:function(e,c){var b=$(this.el);return b.find("li[parent_id\x3d'"+c+"']")&&0<b.find("li[parent_id\x3d'"+c+"']").size()?(b.find("li[parent_id\x3d'"+c+"']").each(function(a){$(this).removeClass("hide")}),!0):!1},renderOthers:function(e){var c=$(this.el).find("#employeesearch-keywords").val();
switch(this.dataType){case "all":url="/users.json";$("#listTitle").text("\u6240\u6709\u6210\u5458");break;case "subordinate":url="/users/workreportSubordinates/"+this.userId+".json?allSubordinate\x3d"+e,$("#listTitle").text("\u6211\u7684\u4e0b\u5c5e")}this.fetchData(url,c)},fetchData:function(e,c,b,a){var d=this,g=$(this.el);$.ajax({type:"get",url:e,dataType:"json",data:{pageNo:d.pageNO,pageSize:15,userName:c},success:function(c){var e=[],f=[],e=c.page||[],f=e.result||[];"subordinate"==d.dataType&&
(f=c.subordinates?c.subordinates:e.result||[]);g.find(".more").remove();for(c=0;c<f.length;c++){var r=f[c];r&&r.id!=TEAMS.currentUser.id&&d.buildUser(r,b,a)}e&&e.hasNext&&g.find("#employees").append('\x3cli class\x3d"more common-more nomg"\x3e\x3ca class\x3d"w-full text-center"\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/li\x3e')}})},buildUser:function(e,c,b){var a=$(this.el),d=e.username,g=e.id,f=$("#userClone").clone(),n=e.avatar?"/base/download/"+e.avatar.p3:"images/avatar.png";"subordinate"==
this.dataType?(f.find("li").attr("dele_id",e.id),e.subordinate&&f.find(".j_expend").addClass("caret"),b&&f.find("li").attr("parent_id",b),g==TEAMS.currentUser.id&&f.find(".j_user").removeClass("j_user")):(f.find(".j_user").removeClass("j_user"),f.find(".j_expend").remove());f.find("#avatar").attr("user-id",g).attr("user-name",d).find("img").attr("src",n);f.find("#name").attr("user-id",g).attr("user-name",d).text(d);f.find(".userCheckBox").attr("user-id",g);0<=$.inArray(e.id,this.employeeIds)&&(e=
f.find(".userCheckBox")[0],$(e).attr("checked","checked"));c?$(c).after(f.html()):a.find("#employees").append(f.html())},remove:function(){$(this.el).off(".UserSlider")}});m.exports=h});
define("teams/component/top","teams/utils teams/websocket/websockettitle teams/models/leftmodel teams/component/invitemodalview teams/minichat/newmessage teams/feed/eteamscounter teams/mainline/mainlinenew teams/doc/documentnewview teams/models/custmenumodel teams/crm/CrmService teams/component/addteamview teams/component/inviteNewTeamView".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/websocket/websockettitle"),c=h("teams/models/leftmodel"),b=h("teams/component/invitemodalview"),a=
h("teams/minichat/newmessage"),d=h("teams/feed/eteamscounter"),g=h("teams/mainline/mainlinenew"),l=h("teams/doc/documentnewview"),n=h("teams/models/custmenumodel"),k=h("teams/crm/CrmService"),r=h("teams/component/addteamview"),p=h("teams/component/inviteNewTeamView");q=Backbone.View.extend({initialize:function(b){this.model=new c;this.newmessage=new a;this.custmenumodel=new n;this.crmService=new k;TEAMS.currentUser.hasOpenSeaAdmin=!1;this.crmService.isShowMessage(function(a){0==a.actionMsg.code&&
(TEAMS.currentUser.hasOpenSeaAdmin=a.data)},null,!1);TEAMS.hasOpenSeaAdmin=TEAMS.currentUser.hasOpenSeaAdmin;TEAMS.custshowmenus=this.custmenumodel.getMenuElTpl(_.sortBy(_.filter(empMenusContext,function(a){return 1==a.menuStatus}),"orderIndex"));TEAMS.custhidemenus=this.custmenumodel.getMenuElTpl(_.sortBy(_.filter(empMenusContext,function(a){return 0==a.menuStatus}),"orderIndex"));TEAMS.isAdmin=TEAMS.currentUser.admin;$("#header").html(f.template("component.top",TEAMS));f.layout("#header #navigation .j_userlistScroll");
this.modifyCrmsPath();$(window).trigger("resize")},delegateEvents:function(){var a=this,b=this.model;$("#user-panel").off("mouseenter",".js_userTab li").on("mouseenter",".js_userTab li",function(b){var d=$(this);b=setTimeout(function(){var b=d.attr("data-items");$("#user_followbtn").hide();$("#user-panel .js_userTab li").removeClass("active");d.addClass("active");$("#user-panel .user-list").addClass("hide");"user_follow"==b&&($("#user_followbtn").show(),$("#user-panel #user_follow").removeClass("hide"),
!$("#user-panel #user_follow").hasClass("no-follow")&&0>=$("#user-panel #user_follow").children().length&&a.renderMyfollow(!0));"user_mysub"==b&&($("#user-panel #user_mysub").removeClass("hide"),0>=$("#user-panel #user_mysub").children().length&&a.renderSubordinate(!0));"user_org"==b&&($("#user-panel #user_org").removeClass("hide"),0>=$("#user-panel #user_org").children().length&&a.renderOrgMembers(!0))},300);d.data("timmer",b)}).on("mouseleave",".nav-tabs li",function(a){(a=$(this).data("timmer"))&&
clearTimeout(a)});$("body").off("mouseenter.dropdownmenu",".dropdown-menu-toggle").on("mouseenter.dropdownmenu",".dropdown-menu-toggle",function(b){!$("#user-panel #user_follow").hasClass("no-follow")&&0>=$("#user-panel #user_follow").children().length&&a.renderMyfollow(!0,!0);$("#j_dropUser .js_userTab").removeClass("hide");$("#j_dropUser .j_userlistScroll").removeClass("hide");$("#j_dropUser .j_user-search-container").addClass("hide")});$("#user-panel").on("click","li.more",function(d){switch($(this).attr("for")){case "user_follow":$(this).hide();
b.myfollowPage.pageNo++;a.renderMyfollow();break;case "user_mysub":$(this).hide();b.subordinatePage.pageNo++;a.renderSubordinate();break;case "user_org":$(this).hide();b.userPage.pageNo++;a.renderOrgMembers();break;case "search-result":d={},d.keywords=$(this).attr("kwords"),$(this).hide(),b.searchUserPage.pageNo++,a.renderSearch(d,!1)}});$("body").on("click",".j_addFollow",function(a){var b=$(this);b.data("addFollowCallback",function(){$("#follow-container").find("#follower-add").click();b.data("addFollowCallback",
null)});$("#follow-container").find("#follower-add").click();ROUTER.navigate("/users/myfollow",{trigger:!0})});$("body").on("click",".j_clickhide",function(a){$("#navigation #j_dropUser").hide()});$("#logout").on("click",function(a){f.confirm("\u786e\u5b9a\u8981\u9000\u51fa\u5417?",function(a){a&&(0<navigator.userAgent.indexOf("MSIE")&&(0<navigator.userAgent.indexOf("MSIE 6.0")||0<navigator.userAgent.indexOf("MSIE 7.0")||0<navigator.userAgent.indexOf("MSIE 8.0")||0<navigator.userAgent.indexOf("MSIE 9.0"))||
$.websocket.close(),window.location="/logout")})});$("body").on("mouseenter",".j_messageCount",function(){$(this).find(".message-count").removeClass("hint");e.clear()});$("body").on("keyup","#searchTop",function(a){var b=$.trim($(this).val()),b=b.replace(/\%/g,"");13==a.which&&b&&0<b.length&&(b=b.replace(/\\/g,"\\\\"),ROUTER.navigate("/search/keywords/"+b,{trigger:!0}));$("body").find("#middlePageSearch").val(b)});$("body").on("click","#searchTopIcon",function(a){a=$.trim($("#searchTop").val());(a=
a.replace(/\%/g,""))&&0<a.length&&(a=a.replace(/\\/g,"\\\\"),ROUTER.navigate("/search/keywords/"+$.trim(a),{trigger:!0}));$("#searchTop").val(a)});$("#left").off("refresh").on("refresh",function(a,b){var d=$("#statistic-panel .nav-tabs li.active");switch(b){case "latest":"latest"==d.attr("data-items")&&d.trigger("click");break;case "watched":"watched"==d.attr("data-items")&&d.trigger("click")}});$("body").on("click","#mainline-create-fast",function(b){a.mainlinenew=new g({parentEl:"body",userId:a.userId,
callback:function(b){a.mainlinenew.hide();ROUTER.app.lastPage&&("mainline"==ROUTER.app.lastPage.pageKey?ROUTER.app.lastPage.mainView.insertMainline(b):-1<ROUTER.app.lastPage.pageKey.indexOf("mainlinelinkpage#")&&ROUTER.app.lastPage.mainView.insertMainline(b))}});a.mainlinenew.render()});$("body").on("click","#document-create-fast",function(b){a.documentnewview=new l({userId:a.userId,callback:function(a){ROUTER.app.lastPage&&ROUTER.app.lastPage.pageKey=="documentpage#"+TEAMS.currentUser.id+"mine"&&
ROUTER.app.lastPage.mainView.insertDocument(a)}});a.documentnewview.render()});$("body").on("click",".j_joinOrCreate,.j_joinOrCreate_dropdown",function(a){(new r({userId:TEAMS.currentUser.id,parentEl:""})).render()});$("body").on("click",".inviteNewTeam-toggle",function(a){(new p({userId:TEAMS.currentUser.id})).render()});$("body").on("click","#module_notice a.close",function(a){$(this).parent().addClass("hide")});$("body").on("click","#module_notice span a",function(a){$("#module_notice a.close").trigger("click")});
$("body").on("click","#contactRecord-create-fast",function(b){b=h("crm/customer/remind/FastContactRecordView");a.fastContactRecordView=new b({callback:function(a){}});a.fastContactRecordView.render()});$("body").off("keyup","#user-search").on("keyup","#user-search",function(b){var d={},c=$.trim($(this).val()),c=c.replace(/\%/g,"");13==b.which&&c&&0<c.length&&($("#j_dropUser .js_userTab").addClass("hide"),$("#j_dropUser .j_userlistScroll").addClass("hide"),$("#j_dropUser .j_user-search-container").removeClass("hide"),
$("#j_dropUser #search-result").removeClass("hide"),$(".j_user-search-container #search-result").empty(),d.keywords=c.replace(/\\/g,"\\\\"),a.renderSearch(d,!0));if(""==c||0==c.length)$("#j_dropUser .js_userTab").removeClass("hide"),$("#j_dropUser .j_userlistScroll").removeClass("hide"),$("#j_dropUser .j_user-search-container").addClass("hide");$("#user-search").val(c)});$("body").off("click","#user-search-icon").on("click","#user-search-icon",function(b){b={};var d=$.trim($("#j_dropUser #user-search").val()),
d=d.replace(/\%/g,"");$("#j_dropUser .js_userTab").addClass("hide");$("#j_dropUser .j_userlistScroll").addClass("hide");$("#j_dropUser .j_user-search-container").removeClass("hide");$("#j_dropUser #search-result").removeClass("hide");$(".j_user-search-container #search-result").empty();b.keywords=d.replace(/\\/g,"\\\\");a.renderSearch(b,!0);$("#user-search").val(d)});$("body").off("click.top",".j_teams-swich ul.dropdown-menu li").on("click.top",".j_teams-swich ul.dropdown-menu li",function(){if(!$(this).hasClass("active")){var a=
$(this).data("employeeId");location.href=TEAMS.passportUrl+"/changeTenant?employeeId\x3d"+a}})},render:function(){var a=this,b=$.uuid(),c=navigator.userAgent,g=!1;if(0<c.indexOf("AppleWebKit")){for(var c=navigator.userAgent.split("/"),f=0;f<c.length;f++)0<c[f].indexOf("Safari")&&(c=c[f].split(" ")[0]);8>parseInt(c)&&(g=!0)}g||0<navigator.userAgent.indexOf("MSIE")&&(0<navigator.userAgent.indexOf("MSIE 6.0")||0<navigator.userAgent.indexOf("MSIE 7.0")||0<navigator.userAgent.indexOf("MSIE 8.0")||0<navigator.userAgent.indexOf("MSIE 9.0"))?
POLLING.register(d.bellCounter):$.websocket("/websocket/portal",a.userId?a.userId:TEAMS.currentUser.id,TEAMS.currentTenant.tenantKey,"protal",b,function(a){if(void 0!=a.chatMessageLog)$("body").trigger("chatPortalMessage",a),$("body").trigger("chatMessage",a),$("body").trigger("history",a);else if(void 0!=a.channel)"updateChannelName"==a.operateType?($("body").trigger("updateChannelName0",a),$("body").trigger("updateChannelName1",a),$("body").trigger("updateChannelName2",a)):"createChannel"==a.operateType?
$("body").trigger("createChannel0",a):"quitChannel"==a.operateType?$("body").trigger("quitChannel0",a):"addUsers"==a.operateType?$("body").trigger("addUsers0",a):"deleteChannel"==a.operateType&&$("body").trigger("deleteChannel",a);else if(void 0!=a.bellCount){var b=!1;$("body").trigger("mesPortalMessage",a);var c=a.bellCount;a=$("#navigation .j_messageCount a.j_unreadblog span").html();var g=$("#navigation .j_messageCount a.j_newitem span").html(),f=$("#navigation .j_messageCount a.j_newcomment span").html(),
k=$("#navigation .j_messageCount a.j_newfinish span").html(),l=$("#navigation .j_messageCount a.j_atme span").html();if(null==a||""==a)a=0;if(null==g||""==g)g=0;if(null==f||""==f)f=0;if(null==k||""==k)k=0;if(null==l||""==l)l=0;$("#navigation .j_messageCount a.j_wechat span").html();var n=$("#navigation .j_messageCount a.j_remind span").html(),p=$("#navigation .j_messageCount a.j_follow span").html(),r=$("#navigation .j_messageCount a.j_applyJoin span").html(),h=$("#navigation .j_messageCount a.j_shareJoin span").html();
if(null==n||""==n)n=0;if(null==p||""==p)p=0;if(null==r||""==r)r=0;if(null==h||""==h)h=0;$("#j_dropMessage li a span").html("");if(null!=c)for(var s=0;s<c.length;s++){var u=c[s],v=$("#j_dropMessage li a.j_"+u.type+" span");null!=v&&v.html(0==u.count?"":u.count);"wechat"==u.type&&(u=null==u.count?"":u.count,$(".aside-nav a.j_wechat span").html(u).data("count",u))}var c=$("#navigation .j_messageCount a.j_unreadblog span").html(),s=$("#navigation .j_messageCount a.j_newitem span").html(),u=$("#navigation .j_messageCount a.j_newcomment span").html(),
v=$("#navigation .j_messageCount a.j_newfinish span").html(),w=$("#navigation .j_messageCount a.j_atme span").html();if(null==c||""==c)c=0;if(null==s||""==s)s=0;if(null==u||""==u)u=0;if(null==v||""==v)v=0;if(null==w||""==w)w=0;var x=$("#navigation .j_messageCount a.j_wechat span").html(),m=$("#navigation .j_messageCount a.j_remind span").html(),q=$("#navigation .j_messageCount a.j_follow span").html(),I=$("#navigation .j_messageCount a.j_applyJoin span").html(),J=$("#navigation .j_messageCount a.j_shareJoin span").html();
if(null==x||""==x)x=0;if(null==m||""==m)m=0;if(null==q||""==q)q=0;if(null==I||""==I)I=0;if(null==J||""==J)J=0;c>a&&(b=!0);s>g&&(b=!0);u>f&&(b=!0);v>k&&(b=!0);w>l&&(b=!0);0<x?(b=!0,$(".smwx-msg-number").html("("+x+")").data("count",x),$(".smwx-mini-list-trigger").addClass("high-light")):($(".smwx-msg-number").html("").data("count",0),$(".smwx-mini-list-trigger").removeClass("high-light"));m>n&&(b=!0);q>p&&(b=!0);I>r&&(b=!0);J>h&&(b=!0);d.totaling();a=$("#navigation #j_message em.message-count").html();
e.needRemind()&&b&&null!=a&&""!=a?e.show():(null==a||""==a||$("#navigation #j_message em.message-count").hasClass("hide"))&&e.clear()}},function(){POLLING.register(d.bellCounter)});TEAMS.currentUser.hasAvatar&&$("#user-panel img").attr("src","/base/download/"+TEAMS.currentUser.avatar.p3);this.checkTime();TEAMS.currentUser.activeDate&&TEAMS.currentUser.lastLoginTime&&this.inviteModal();this.newmessage.render();a.loadMessage(d.bellCounter);TEAMS.noSubordinates?($(".j_top_mysubordinates").addClass("hide"),
$(".user-tab").addClass("nosub")):($(".j_top_mysubordinates").removeClass("hide"),$(".user-tab").removeClass("nosub"));setInterval(function(){a.processTimeout()},6E5)},renderMyfollow:function(a,b){var d=this,c=this.model;a&&(c.myfollowPage.pageNo=1);$("#user_followbtn").show();c.loadMyfollow(function(a){if(a=c.myfollowPage)1==c.myfollowPage.pageNo&&0>=a.result.length&&b?(1>$("#user_follow").children().length&&$("#user_follow").append('\x3cdiv class\x3d"ta-c" style\x3d"margin-top:60px"\x3e\x3cspan\x3e\u76ee\u524d\u6ca1\u6709\u5173\u6ce8\u4eba,\u60a8\u53ef\u4ee5\u70b9\u51fb\x3ca class\x3d"j_clickhide j_addFollow"\x3e\u52a0\u5173\u6ce8\x3c/a\x3e\u6dfb\u52a0\u5173\u6ce8\u4eba\uff01\x3c/span\x3e\x3c/div\x3e'),
$("#user-panel .user-list").addClass("hide"),$("#user-panel #user_org").removeClass("hide"),$("#user-panel .js_userTab li").removeClass("active"),$("#user-panel .js_userTab li.j_user_org").addClass("active"),0>=$("#user-panel #user_org").children().length&&d.renderOrgMembers(!0)):($("#user-panel .js_userTab li.j_user_follow").addClass("active"),d._renderUser(a,"user_follow"))})},renderSubordinate:function(a){var b=this,d=this.model;a&&(d.subordinatePage.pageNo=1);$("#user_followbtn").hide();d.loadSubordinate(function(a){1==
d.subordinatePage.pageNo&&0==d.subordinatePage.result.length?$("#user_mysub").append('\x3cdiv class\x3d"ta-c"\x3e\x3cspan\x3e\u76ee\u524d\u6ca1\u6709\u4e0b\u5c5e\uff01\x3c/span\x3e\x3c/div\x3e'):b._renderUser(d.subordinatePage,"user_mysub")})},renderOrgMembers:function(a){var b=this,d=this.model;a&&(d.userPage.pageNo=1);$("#user_followbtn").hide();d.loadOrgMembers(function(a){b._renderUser(d.userPage,"user_org");1==d.userPage.pageNo&&1==d.userPage.result.length?$("#user_org").append('\x3cdiv class\x3d"ta-c" style\x3d"margin-top:80px"\x3e\u56e2\u961f\u6210\u5458\u53ea\u6709\u60a8\u4e00\u4eba\uff0c\x3ca class\x3d"invite-toggle"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/a\x3e\u52a0\u5165\u534f\u4f5c\u5427\uff01\x3c/div\x3e'):
$("#user_org a.invite-toggle").parent().parent().remove()})},renderSearch:function(a,b){var d=this,c=this.model;b&&(c.searchUserPage.pageNo=1);$("#user_followbtn").addClass("hide");c.searchUserByKeywords(a,function(a){a=a.keywords;0==c.searchUserPage.result.length?$(".j_user-search-container .j_noSearchResult").removeClass("hide"):(d._renderUser(c.searchUserPage,"search-result",a),$(".j_user-search-container .j_noSearchResult").addClass("hide"))})},renderNavUrl:function(a,b){$(".j_basenav .j_blog_NoAuthority").addClass("hide");
a&&a!=TEAMS.currentUser.id?($("#navigation").addClass("navigation-themeB"),$(".j_hidetosub").addClass("hide"),$(".user-nameof").removeClass("hide"),$(".j_nav_ul a").each(function(b,d){var c=$(this).data("url");if(c){var g="",g=$(d).hasClass("j_modnav-customers")?TEAMS.menuCrmContext+"/customer?blogUser\x3did_"+a:$(d).hasClass("j_modnav-contacts")?TEAMS.menuCrmContext+"/contact?blogUser\x3did_"+a:$(d).hasClass("j_modnav-production")?TEAMS.menuCrmContext+"/production?blogUser\x3did_"+a:$(d).hasClass("j_modnav-saleChances")?
TEAMS.menuCrmContext+"/saleChance?blogUser\x3did_"+a:c+"/"+a;$(this).attr("href",g)}}),TEAMS.blogUser&&TEAMS.blogUser.id==a||$.ajax({url:"/base/employee/"+a+".json",type:"get",dataType:"json",async:!1,success:function(a){if(a.employee){var d=a.employee;$("#user-panel .user-name").html(d.username);$("#user-panel img.j_user-currentAvatar").attr("src",d.avatar?"/base/download/"+d.avatar.p3:"images/avatar.png");$("#user-panel img.j_user-avatar").attr("src",TEAMS.currentUser.avatar?"/base/download/"+
TEAMS.currentUser.avatar.p3:"images/avatar.png");$(".j_basenav .j_homeli").addClass("hide");$(".j_basenav #top_menuset").parent().addClass("hide");$(".j_baseautolis").addClass("hideli");a.employee&&a.employee.subordinate?($(".j_basenav #more-menu").show(),$(".j_pageActive .j_modnav-report").addClass("hide"),$(".j_pageActive .j_modnav-wechat").addClass("hide"),$(".j_pageActive .j_modnav-form").addClass("hide"),$(".j_pageActive .j_modnav-wechatservice").addClass("hide")):($(".j_pageActive .j_modnav-report").removeClass("hide"),
$(".j_pageActive .j_modnav-wechat").removeClass("hide"),$(".j_pageActive .j_modnav-form").removeClass("hide"),$(".j_pageActive .j_modnav-wechatservice").removeClass("hide"),$(".j_basenav #more-menu").hide());$(".j_pageActive .group dl").each(function(){var a=!0;$(this).find("a").each(function(){$(this).hasClass("hide")||(a=!1)});a?$(this).hide():$(this).show()});$(".j_to-myspace").removeClass("hide");TEAMS.blogUser=d;b&&b();$(window).trigger("resize")}}})):($(".j_hidetosub").removeClass("hide"),$(".user-nameof").addClass("hide"),
$("#navigation").removeClass("navigation-themeB"),$("#user-panel .user-name").html(TEAMS.currentUser.username),$("#user-panel img.j_user-currentAvatar").attr("src",TEAMS.currentUser.avatar?"/base/download/"+TEAMS.currentUser.avatar.p3:"images/avatar.png"),$(".j_nav_ul a").each(function(a){(a=$(this).data("url"))&&$(this).attr("href",a)}),$(".j_basenav #top_menuset").parent().removeClass("hide"),$(".j_pageActive, .j_pageActive a").removeClass("hide"),$(".j_basenav .j_blogli").addClass("hide"),
$(".j_basenav #more-menu").show(),$(".j_baseautolis").removeClass("hideli"),$(".j_to-myspace").addClass("hide"),$(".j_pageActive .group dl").each(function(){var a=!0;$(this).find("a").each(function(){$(this).hasClass("hide")||(a=!1)});a?$(this).hide():$(this).show()}),TEAMS.blogUser=null,b&&b(),$(".j_basenav .j_homeli").removeClass("hide"),$(".j_basenav .j_blogli").addClass("hide"),$(window).trigger("resize"))},modifyCrmsPath:function(){var a=$("#header").find("#menu-customers"),b=a.attr("href"),
d=a.attr("data-url");a.attr({href:TEAMS.menuCrmContext+b,"data-url":TEAMS.menuCrmContext+d})},checkTime:function(){var a=this;this.model.checkTime(function(b){a.checkIn=b.checkIn;a.checkIn?$(".j_check_inOrOut").attr("id","check-out").html("\u7b7e\u9000"):$(".j_check_inOrOut").attr("id","check-in").html("\u7b7e\u5230")})},inviteModal:function(){if(3>=TEAMS.currentTenant.usedLicense){var a=new b;$(a.el).find(".modal-title").html("\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u9a6c\u4e0a\u9080\u8bf7\u81ea\u5df1\u7684\u540c\u4e8b\u6765\u52a0\u5165\uff0c\u4e00\u8d77\u4f53\u9a8c\u4e91\u529e\u516c\u534f\u4f5c");
a.render()}},_renderUser:function(a,b,d){var c="#"+b;""==b&&(c="#user_org");if(a){for(var g=a.result||[],e=0;e<g.length;e++){var f=a.result[e];if(!(0<$(c).find("#"+f.id).length)){var k="images/avatar.png";null!=f.avatar&&(k="/base/download/"+f.avatar.p3);var l=$("#cloneDiv .j_userItems").clone();f.relation&&"approved"==f.relation||f.id==TEAMS.currentUser.id||f.subordinate||"user_mysub"==b?(l.attr("title",f.username),l.find("a").attr("href","/blog/"+f.id)):(l.attr("title",f.username),l.removeClass("j_clickhide"),
l.find("a").addClass("usercard-toggle"),l.find("a").attr("userId",f.id),l.find("a").removeClass("router"),l.find("a").attr("user-name",f.username));l.find("a img").attr("src",k);l.find("a em").html(f.username);f.id!=TEAMS.currentUser.id?(k=$("#cloneDiv .j_userItemsWechat").clone(),k.attr("id",f.id).data("employee",f),0<f.unReadChatCount&&(k.addClass("show"),k.removeClass("hide")),l.append(k)):l.find("a").attr("id",f.id);$(c).append(l)}}$(c).find(".more").remove();a.hasNext&&("#search-result"==c?$(c).append('\x3cli class\x3d"user-item more" kwords\x3d"'+
d+'" for \x3d "'+b+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/li\x3e'):$(c).append('\x3cli class\x3d"user-item more" for \x3d "'+b+'"\x3e\x3ca\x3e\u663e\u793a\u66f4\u591a...\x3c/a\x3e\x3c/li\x3e'))}},hideMyfollow:function(){$("#follow-panel li.follow").hide()},loadMessage:function(a){$.ajax({type:"get",global:!1,url:a.url,dataType:"json",data:a.param?a.param:{},success:function(b){b.actionMsg&&-1==b.actionMsg.code||a.callback&&a.callback(b)}})},processTimeout:function(){$.ajax({type:"get",
global:!1,url:"/global",dataType:"json",success:function(a){}})},remove:function(){this.model=null;this.fastContactRecordView&&(this.fastContactRecordView.remove(),this.fastContactRecordView=null)}});m.exports=q});
define("teams/component/chatHistoryModel",function(h,q,m){h=Backbone.Model.extend({pageSize:10,pageNo:1,initialize:function(f){},loadhistory:function(f,e,c,b,a){e||(e=TEAMS.currentUser.id);$.ajax({type:"get",url:"/chatmessage/history.json?t\x3d"+Math.random(),dataType:"json",data:{sender:f,receiver:e,pageNo:this.pageNo,pageSize:this.pageSize,channelId:c,chatType:b},success:function(b){a&&a(b)}})},readed:function(f,e,c,b,a){$.ajax({type:"get",url:"/chatmessage/readed.json",dataType:"json",data:{sender:f,
receiver:e,chatType:b,channelId:c},success:function(b){a&&a(b)}})}});m.exports=h});
define("teams/component/guideview",["teams/component/guidemodel"],function(h,q,m){var f=h("teams/component/guidemodel");h=Backbone.View.extend({initialize:function(e){this.module=e.module;this.el=e.parentEl;this.showFlag=e.showFlag;this.model=new f(e);this.initFlag=!0;this.targetEls=[]},delegateEvents:function(){var e=this;$("body").off("click",".tip-know").on("click",".tip-know",function(c){e.deleteConfig($(this).attr("id"),$(this).attr("for"),$(this).attr("guideType"))});$("body").on("click",".guide-invite",
function(c){c=$("body").find(".tip-know").attr("for");$(c).tooltipster("hide")})},getConfig:function(e){var c=null,b="guide."+this.module+"."+e;return c=TEAMS.userConfig.find(function(a){return a.configKey==b})},guideTip:function(e,c,b){var a=this,d=a.getConfig(e);d?d.configValue&&(0<=a.targetEls.indexOf(a.el+" "+c)?$(a.el).find(c).tooltipster("show"):(a.targetEls.push(a.el+" "+c),e=a.guideTitel(e,c,d.id),$(a.el).find(c).data("title",$(a.el).find(c).attr("title")),$(a.el).find(c).tooltipster({content:e,
contentAsHTML:!0,theme:"tooltipster-shadow",interactive:!0}),b&&("customer"==a.module&&$(a.el).find("#customer-share").removeClass("hide"),$(a.el).find(c).removeClass("hide"),$(a.el).find(c).show().tooltipster("show")),$(window).keypress(function(){$(a.targetEl).tooltipster("hide")}))):a.initFlag=!1},guideTitel:function(e,c,b){var a=3<TEAMS.currentTenant.usedLicense?!1:!0,d="";"task"==this.module?"manager"==e?d=a?'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u4efb\u52a1\u5206\u6d3e\u7ed9\u5176\u4ed6\u540c\u4e8b,\u4f46\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\x3ca class\x3d"invite-toggle guide-invite"\x3e\u9080\u8bf7\x3c/a\x3e\u4ed6\u4eec\u52a0\u5165\u4e00\u8d77\u534f\u4f5c......\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+
b+'" guideType\x3d"manager" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':'\x3cdiv class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u4efb\u52a1\u5206\u6d3e\u7ed9\u5176\u4ed6\u540c\u4e8b\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"manager" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':"participant"==e&&(d=a?
'\x3cdiv class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u6b64\u4efb\u52a1\u662f\u5426\u9700\u8981\u5176\u4ed6\u540c\u4e8b\u4e00\u8d77\u6765\u534f\u4f5c\uff0c\u60a8\u53ef\u4ee5\u5728\u8fd9\u91cc\u52a0\u5165\u4ed6\u4eec\u4e3a\u53c2\u4e0e\u4eba\u4e2d\u3002,\u4f46\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\x3ca class\x3d"invite-toggle guide-invite"\x3e\u9080\u8bf7\x3c/a\x3e\u4ed6\u4eec\u52a0\u5165\u4e00\u8d77\u534f\u4f5c......\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+
b+'" guideType\x3d"participant" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':'\x3cdiv class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u4efb\u52a1\u5206\u6d3e\u7ed9\u5176\u4ed6\u540c\u4e8b\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"participant" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'):"document"==this.module?
d=a?'\x3cdiv class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u6587\u6863\u5feb\u901f\u5171\u4eab\u7ed9\u5176\u4ed6\u540c\u4e8b,\u4f46\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\x3ca class\x3d"invite-toggle guide-invite"\x3e\u9080\u8bf7\x3c/a\x3e\u4ed6\u4eec\u52a0\u5165\u4e00\u8d77\u6587\u6863\u534f\u4f5c......\x3c/p\x3e \x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"share" for\x3d"'+
this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':'\x3cdiv class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u6587\u6863\u5feb\u901f\u5171\u4eab\u7ed9\u5176\u4ed6\u540c\u4e8b\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e \x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"share" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':"customer"==this.module?d=a?'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u5ba2\u6237\u5171\u4eab\u7ed9\u5176\u4ed6\u540c\u4e8b\uff0c\u4f46\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\x3ca class\x3d"invite-toggle guide-invite"\x3e\u9080\u8bf7\x3c/a\x3e\u4ed6\u4eec\u52a0\u5165\u4e00\u8d77\u5ba2\u6237\u534f\u4f5c......\x3c/p\x3e \x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+
b+'" guideType\x3d"share" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u5ba2\u6237\u5171\u4eab\u7ed9\u5176\u4ed6\u540c\u4e8b\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"share" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':"workflow"==this.module&&(d=
"createform"==e?'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u6b64\u60a8\u53ef\u4ee5\u5efa\u7acb\u60a8\u4e2a\u4eba\u5e38\u7528\u7684\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u5ba1\u6279\u4ea4\u7ed9\u76f8\u5e94\u7684\u540c\u4e8b\u8fdb\u884c\u5ba1\u6279\uff0c\u540c\u65f6\u7cfb\u7edf\u7ba1\u7406\u5458\u53ef\u4ee5\u628a\u60a8\u5efa\u7acb\u7684\u8868\u5355\u7eb3\u4e3a\u5185\u90e8\u7edf\u4e00\u89c4\u5b9a\u7684\u8868\u5355\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+
b+'" guideType\x3d"operator" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':"manageform"==e?'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u6b64\u60a8\u53ef\u4ee5\u7edf\u4e00\u8bbe\u5b9a\u548c\u7ba1\u7406\u56e2\u961f\u5185\u90e8\u89c4\u8303\u89c4\u5b9a\u7684\u8868\u683c\uff0c\u5e76\u8981\u6c42\u5404\u6210\u5458\u7edf\u4e00\u6765\u4f7f\u7528\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"operator" for\x3d"'+
this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':a?'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp class\x3d"filterSlip_js"\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u5ba1\u6279\u63d0\u4ea4\u7ed9\u540c\u4e8b\u5ba1\u6279\uff0c\u9ed8\u8ba4\u662f\u4e0a\u7ea7\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4fee\u6539\u3002\u4f46\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\x3ca class\x3d"invite-toggle guide-invite filterSlip_js"\x3e\u9080\u8bf7\x3c/a\x3e\u60a8\u7684\u4e0a\u7ea7\u6216\u540c\u4e8b\u52a0\u5165\u5e76\u63d0\u4ea4\u5ba1\u6279\u7ed9\u4ed6\u5ba1\u6279......\x3c/p\x3e\x3cdiv class\x3d"text-right filterSlip_js"\x3e \x3ca class\x3d"tip-know filterSlip_js" id\x3d"'+
b+'" guideType\x3d"operator" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':'\x3cdiv  class\x3d"tooltip-partner filterSlip_js"\x3e\x3cp\x3e\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u628a\u6b64\u5ba1\u6279\u63d0\u4ea4\u7ed9\u540c\u4e8b\u5ba1\u6279\uff0c\u9ed8\u8ba4\u662f\u4e0a\u7ea7\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4fee\u6539\u3002\x3c/p\x3e\x3cdiv class\x3d"text-right"\x3e\x3ca class\x3d"tip-know" id\x3d"'+b+'" guideType\x3d"operator" for\x3d"'+this.el+" "+c+'"\x3e\u6211\u77e5\u9053\u4e86\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
return d},deleteConfig:function(e,c,b){var a=this,d=this.model;d.id=e;d.deleteConfig(function(d){$(c).tooltipster("destroy");a.targetEls.remove(c);$(c).attr("title",$(c).data("title")?$(c).data("title"):"");TEAMS.userConfig.remove(function(d){return d.configKey=="guide."+a.module+"."+b})})},reposition:function(e){$(this.el).find(e).tooltipster("reposition")},hide:function(e){$(this.el).find(e).tooltipster("hide")},remove:function(){for(var e=0;e<this.targetEls.length;e++)$(this.targetEls[e]).tooltipster("destroy");
this.targetEls=[]}});m.exports=h});
define("teams/component/quickInviteView",["teams/utils","teams/component/invitemodel","teams/component/validation"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/invitemodel"),c=h("teams/component/validation");h=Backbone.View.extend({userName:"",initialize:function(b){this.el="#quick-invite-modal";this.inviteModel=new e;this.userName=b.userName?b.userName:"";$("body #quick-invite-modal").remove();$("body").append(f.template("component.quickInvite"));ZeroClipboard.config({swfPath:"js/clipboard.swf",
activeClass:"zeroclipboard-is-active"})},delegateEvents:function(){var b=this;$(b.el).on("click.quickInvite","#invite-submit",function(a){var d=$(this),g=$(b.el).find('input[id\x3d"inputUsername"]');a=g.val();var e=g.attr("placeholder");a==e&&(a="");var n=$(b.el).find('input[id\x3d"inputEmail"]'),e=n.val(),k=n.attr("placeholder");e==k&&(e="");if(e&&!c.formValidateImm($(b.el).find(".j_form-invite")))return!1;""==e?f.notify("\u8bf7\u8f93\u5165\u5fc5\u586b\u9879"):(d.attr("disabled","true"),k={},k["inviteInfo.invitee"]=
a,k["inviteInfo.contact"]=e,b.inviteModel.saveInvite(k,function(a){d.removeAttr("disabled");a.inviteInfo&&""!=a.inviteInfo&&(a=a.inviteInfo,"success"==a.msgType?(null==a.id?(f.notify(a.message),n.val(""),b.clearValue(g)):(f.notify("\u5df2\u9080\u8bf7 "+a.invitee+" \u52a0\u5165eteams"),b.callback&&b.callback(a),b.type&&(n.val(""),b.clearValue(g))),b.close(),b.remove()):(f.notify(a.message),n.val(""),b.clearValue(g)))}))});$(b.el).on("keydown.quickInvite",function(a){a.ctrlKey&&13==a.keyCode&&$(b.el).find("#invite-submit").trigger("click")});
$(b.el).on("click.quickInvite","#invite-cancel",function(a){b.close();b.remove()})},render:function(){$(this.el).modal("show");$(this.el).find("#inputUsername").val(this.userName);$(this.el).find("#inputUsername").text(this.userName)},focusInput:function(){$("#quick-invite-modal").find("#inputEmail").focus()},clearValue:function(b){b.val("");b.focus()},close:function(){$("#quick-invite-modal").modal("hide")},remove:function(){$(this.el).off(".quickInvite")}});m.exports=h});
define("teams/component/formtagselector",["teams/utils","teams/component/template","teams/component/formtagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/template"),c=h("teams/component/formtagmodel");h=Backbone.View.extend({initialize:function(b){this.el="#selector-tag";this.privacy=b.privacy;this.keywords="";this.model=new c(b);this.$el=b.$el;b=e["selector.formtag"];$("body").append(b)},delegateEvents:function(){var b=this,a=$("#selector-tag");a.off("click",".j_tag_selector").on("click",
".j_tag_selector",function(){var a=$(this).find("a");a.hasClass("checked")?a.removeClass("checked"):a.addClass("checked")});a.on("click",".tag-cancel",function(){a.find(".j_tag_selector a").removeClass("checked");a.modal("hide")});a.off("keydown","input").on("keydown","input",function(b){13==(b?b:window.event?window.event:null).keyCode&&a.find(".j_tagSearch").trigger("click")});a.off("click",".j_tagSearch").on("click",".j_tagSearch",function(){b.keywords=$.trim(a.find("input").val());a.find("#tag-selector-list").empty();
b.render()});a.off("click",".tag-ok").on("click",".tag-ok",function(){var d=[],c=$(this),e=b.$el.parent().siblings(".entity-container");b.model.targetId=e.attr("target-id");b.model._module=e.attr("module");var n=[];e.find(".entity-item a").each(function(){var a=$(this).attr("data-value");n.push(a)});a.find("#tag-selector-list").find("span a.checked").each(function(a,b){var c=$(b).attr("data-entity");d.push(c)});if(0==d.length)f.notify("\u8bf7\u9009\u62e9\u9700\u8981\u5173\u8054\u7684\u6807\u7b7e");
else{var k=d.join(","),r=n.join(",");c.data("flag")||b.model.links(k,r,function(b){f.notify("\u5173\u8054\u6210\u529f");a.modal("hide");c.data("flag",!0);var d=b.formtags;e.empty();if(b&&d&&0<d.length)for(b=0;b<d.length;b++){var k=d[b],n=$("#tagItemClone").clone();n.removeAttr("id");n.removeClass("hide");n.find("a").attr({"data-value":k.id}).text(k.name);e.append(n)}c.data("flag",!1)})}})},render:function(){var b=this;this.model.loadSelectTag(b.privacy,b.keywords,function(a){if((a=a.formtags)&&0<
a.length){$(".tag-ok").attr("type",a[0].privacy);for(var d=0;d<a.length;d++){var c=a[d],e=$("#tsClone").clone();e.removeAttr("id");e.removeClass("hide");b.$el.parents(".tag-controls").find(".entity-item a").each(function(a,b){$(b).attr("data-value")==c.id&&e.find("a").addClass("checked")});e.find("a").attr({"data-entity":c.id,title:c.name}).html(c.name);$("#tag-selector-list").append(e)}}0==$("#tag-selector-list span").size()&&$("#tag-selector-list").append("\u6ca1\u6709\u6807\u7b7e\u6570\u636e")})},
open:function(){var b=$(this.el);b.modal("toggle");b.find("#tag-selector-list").empty();this.render()},remove:function(){$("#selector-tag").modal("hide");$("#selector-tag").off(".entityselector");$("#selector-tag").remove()}});m.exports=h});
define("teams/component/filter",["teams/utils","teams/component/validation"],function(h,q,m){var f=h("teams/utils");h("teams/component/validation");h=Backbone.View.extend({initialize:function(e){this.managers=[];this.tags=[];this.mainlines=[];this.comments=[];this.searchs=[];this.status=[];this.formtypes=[];this.el=e.el;this.module=e.module;this.userId=e.userId;this.scroll=e.scroll;this.targetObj=e.targetObj;$(this.el).append(f.template("component.filter"))},delegateEvents:function(){var e=this,c=
$(this.el).find("#filter-div");c.off("click.filter",".filter-cancle").on("click.filter",".filter-cancle",function(b){e.resetArray();c.find(".employee-click").removeClass("checked");c.find(".comment-click").removeClass("checked");c.find(".tag-click").removeClass("checked");c.find(".mainline-click").removeClass("checked");c.find(".datepicker").val("");"formdatareport"===e.module?e.queryDefaultData("","formdatareport",function(a){e.renderDataList(a.employees,"employee");a=a.newForms;for(var b=$(e.el).find("#datareport\uff0dform-list").html(""),
c=0;c<a.length;c++){var f=a[c];b.append('\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+f.id+'" class\x3d"comment-click"\x3e'+f.name+"\x3c/a\x3e\x3c/span\x3e")}}):"subordinate"===e.module?e.queryDefaultData("subordinate",e.module,function(a){e.renderDataList(a.directsubordinates,"directsubordinate");e.renderDataList(a.indirectsubordinates,"indirectsubordinate")}):"biaoge"==e.module?e.queryDefaultData("",e.module,function(a){e.renderDataList(a.employees,"employee");$(e.el).find("#formtag-filter").html("");
a=a.formtags;for(var b=0;b<a.length;b++){var c=a[b],c='\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+c.id+'" class\x3d"tag-click"\x3e'+c.name+"\x3c/a\x3e\x3c/span\x3e";$(e.el).find("#formtag-filter").append(c)}}):e.queryDefaultData("",e.module,function(a){e.renderDataList(a.employees,"employee");e.renderDataList(a.tags,"tag");e.renderDataList(a.mainlines,"mainline")});$(".typehead").val("");e.triggerFilter()});c.off("click.filter",".filter-submit").on("click.filter",".filter-submit",
function(b){var a=[],d=b=!1,c=!1;if("formdatareport"===e.module)return e.targetObj.trigger("filter"),!0;$.each(e.$el.find("#due-time-filter input"),function(b,d){var c=$(d);c.val()&&a.push('"'+c.attr("name")+'" : "'+c.val()+'"')});e.managers&&0<e.managers.length&&(b='"primarys":'+JSON.stringify(e.managers));e.tags&&0<e.tags.length&&(d='"tags":'+JSON.stringify(e.tags));e.mainlines&&0<e.mainlines.length&&(c='"mainlines":'+JSON.stringify(e.mainlines));b&&a.push(b);d&&a.push(d);c&&a.push(c);"customer"==
e.module||"task"==e.module||"saleChance"==e.module||"production"==e.module?0<e.comments.length&&a.push('"commentType":"'+e.comments[0]+'"'):"document"==e.module?0<e.comments.length&&a.push('"docType":'+JSON.stringify(e.comments)):"workflow"==e.module&&0<e.comments.length&&a.push('"formIds":'+JSON.stringify(e.comments));e.targetObj.data("data-filter",a.join(","));e.targetObj.trigger("filter")});f.datepicker([{el:"input#due-time-begin",callback:function(b){e.setDueDate(b,"input#due-time-begin");e.triggerFilter()}},
{el:"input#due-time-end",callback:function(b){e.setDueDate(b,"input#due-time-end");e.triggerFilter()}}]);"biaoge"===e.module&&f.datepicker([{el:"input#formcreate-time-begin",callback:function(b){e.triggerFilter()}},{el:"input#formcreate-time-end",callback:function(b){e.triggerFilter()}}]);"formdatareport"===e.module&&f.datepicker([{el:"input#report-time-begin",callback:function(b){e.triggerFilter()}},{el:"input#report-time-end",callback:function(b){e.triggerFilter()}}]);c.off("click.filter",".employee-click").on("click.filter",
".employee-click",function(b){var a=$(this).attr("data-entity");$(this).hasClass("checked")?(e.managers.remove(function(b){return b==a}),$(this).removeClass("checked")):(e.managers.push(a),$(this).addClass("checked"));e.triggerFilter()});c.off("click.filter",".comment-click").on("click.filter",".comment-click",function(b){var a=$(this).attr("data-entity");"task"==e.module||"customer"==e.module||"saleChance"==e.module||"production"==e.module?$(this).hasClass("checked")?($(this).removeClass("checked"),
e.comments=[]):($(".comment-click").removeClass("checked"),$(this).addClass("checked"),e.comments=[],e.comments.push(a)):$(this).hasClass("checked")?($(this).removeClass("checked"),e.comments.remove(function(b){return b==a})):($(this).removeClass("checked"),$(this).addClass("checked"),e.comments.push(a));e.triggerFilter()});c.off("click.filter",".tag-click").on("click.filter",".tag-click",function(b){var a=$(this).attr("data-entity");$(this).hasClass("checked")?(e.tags.remove(function(b){return b==
a}),$(this).removeClass("checked")):(e.tags.push(a),$(this).addClass("checked"));e.triggerFilter()});c.off("click.filter",".status-click").on("click.filter",".status-click",function(b){var a=$(this).attr("data-entity");$(this).hasClass("checked")?(e.status.remove(function(b){return b==a}),$(this).removeClass("checked")):(e.status.push(a),$(this).addClass("checked"));e.triggerFilter()});c.off("click.filter",".formtype-click").on("click.filter",".formtype-click",function(b){var a=$(this).attr("data-entity");
$(this).hasClass("checked")?(e.formtypes.remove(function(b){return b==a}),$(this).removeClass("checked")):(e.formtypes.push(a),$(this).addClass("checked"));e.triggerFilter()});c.off("click.filter",".mainline-click").on("click.filter",".mainline-click",function(b){var a=$(this).attr("data-entity");$(this).hasClass("checked")?(e.mainlines.remove(function(b){return b==a}),$(this).removeClass("checked")):(e.mainlines.push(a),$(this).addClass("checked"));e.triggerFilter()});c.off("search.filter",".input").on("search.filter",
"input",function(b){b=$.trim($(this).val());var a=$(this).attr("data-entity");b&&0<b.length?e.searchData(b,a):(b="","subordinate"==e.module&&(b="subordinate"),e.queryDefaultData(b,e.module,function(b){if("employee"==a)e.renderDataList(b.employees,"employee");else if("tag"==a)e.renderDataList(b.tags,"tag");else if("mainline"==a)e.renderDataList(b.mainlines,"mainline");else if("subordinate"==e.module)e.renderDataList(b.directsubordinates,"directsubordinate"),e.renderDataList(b.indirectsubordinates,
"indirectsubordinate");else if("formtag"==a){$(e.el).find("#formtag-filter").html("");b=b.formtags;for(var c=0;c<b.length;c++){var f=b[c],f='\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+f.id+'" class\x3d"tag-click"\x3e'+f.name+"\x3c/a\x3e\x3c/span\x3e";$(e.el).find("#formtag-filter").append(f)}}}))});c.off("keyup.filter",".input").on("keyup.filter","input",function(b){13==(b?b:window.event?window.event:null).keyCode&&$(this).trigger("search")})},render:function(){var e=this;"mainline"==
e.module?($("#employee-type-"+e.module).removeClass("hide"),$(".comment-div").addClass("hide"),$(".mainline-div").addClass("hide")):"tag"==e.module?($("#employee-type-"+e.module).removeClass("hide"),$(".comment-div").addClass("hide"),$(".mainline-div").addClass("hide"),$(".tag-div").addClass("hide")):"blog"==e.module?($("#blog-group-tab").removeClass("hide"),$("#employee-type-"+e.module).removeClass("hide"),$("#mainline").addClass("hide"),$("#mainline-filter").addClass("hide"),$("#tag").addClass("hide"),
$("#tag-filter").addClass("hide"),$("#comment").addClass("hide")):"formmanage"==e.module?($(".comment-div").addClass("hide"),$(".mainline-div").addClass("hide"),$(".tag-div").addClass("hide"),$("#employee-filter").addClass("hide"),$("#employee-title").addClass("hide"),$(".formstatus-div").removeClass("hide"),$(".relatedstatus-div").removeClass("hide"),$("#btns").addClass("hide")):"formdatareport"==e.module?($(e.el).find("input[name\x3d'username']").addClass("hide"),$(e.el).find(".comment-div").addClass("hide"),
$(e.el).find(".mainline-div").addClass("hide"),$(e.el).find(".tag-div").addClass("hide"),$(e.el).find(".datareport-div").removeClass("hide"),$(e.el).find("#employee-type-formdatareport").removeClass("hide")):"subordinate"==e.module?($("#employee-type-direct"+e.module).parent().parent().removeClass("hide"),$("#employee-type-indirect"+e.module).parent().parent().removeClass("hide"),$("#employee-title").addClass("hide"),$("#mainline").addClass("hide"),$("#mainline-filter").addClass("hide"),$("#tag").addClass("hide"),
$("#tag-filter").addClass("hide"),$("#comment").addClass("hide")):"biaoge"==e.module?($("#employee-type-"+e.module).removeClass("hide"),$(".comment-div").addClass("hide"),$(".mainline-div").addClass("hide"),$(".tag-div").addClass("hide"),$(e.el).find("#formcreate-time").removeClass("hide"),$(e.el).find("#formcreate-time-filter").removeClass("hide"),$(e.el).find("#form-tag").removeClass("hide"),$(e.el).find(".j_formtag-input").removeClass("hide"),$(e.el).find("#formtag-filter").removeClass("hide"),
$(e.el).find("#formtag-filter").empty(),$(".form-status-div").removeClass("hide"),$(".formtype-div").removeClass("hide")):($(e.el).find("#comment-type-"+e.module).removeClass("hide"),$(e.el).find("#employee-type-"+e.module).removeClass("hide"),$(e.el).find("#comment-filter-"+e.module).removeClass("hide"));"task"===e.module?($(e.el).find("#due-time").removeClass("hide"),$(e.el).find("#due-time-filter").removeClass("hide")):($(e.el).find("#due-time").addClass("hide"),$(e.el).find("#due-time-filter").addClass("hide"));
var c="";"subordinate"==e.module&&(c="subordinate");e.queryDefaultData(c,e.module,function(b){if("blog"==e.module)e.renderDataList(b.employees,"employee");else if("formdatareport"==e.module){e.renderDataList(b.employees,"employee");var a=b.newForms;for(b=0;b<a.length;b++){var d=a[b],d='\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+d.id+'" class\x3d"comment-click"\x3e'+d.name+"\x3c/a\x3e\x3c/span\x3e";$(e.el).find("#datareport\uff0dform-list").append(d)}}else if("biaoge"==e.module)for(e.renderDataList(b.employees,
"employee"),$(e.el).find("#formtag-filter").html(""),a=b.formtags,b=0;b<a.length;b++)d=a[b],d='\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+d.id+'" class\x3d"tag-click"\x3e'+d.name+"\x3c/a\x3e\x3c/span\x3e",$(e.el).find("#formtag-filter").append(d);else if("subordinate"==e.module)e.renderDataList(b.directsubordinates,"directsubordinate"),e.renderDataList(b.indirectsubordinates,"indirectsubordinate");else if(e.renderDataList(b.employees,"employee"),e.renderDataList(b.tags,"tag"),e.renderDataList(b.mainlines,
"mainline"),"workflow"==e.module&&b.newForms){var a=b.newForms,c=5;5>a.length&&(c=a.length);for(b=0;b<c;b++)d=a[b],d='\x3cspan class\x3d"filter-item"\x3e\x3ca data-entity\x3d"'+d.id+'" class\x3d"comment-click"\x3e'+d.name+"\x3c/a\x3e\x3c/span\x3e",$(e.el).find("#comment-filter-workflow").append(d)}e.scroll&&($(e.el).css("max-height","500px").attr("auto-scroll","yes"),f.layout(e.el));$(e.el).find(".loading_large").hide();$(e.el).find("#info-div").show()})},queryDefaultData:function(e,c,b){$.ajax({type:"get",
url:"/search/filter.json",dataType:"json",data:{searchType:e,module:c},success:function(a){b&&b(a)}})},renderDataList:function(e,c){var b=30<e.length?30:e.length;$(this.el).find("#"+c+"-filter").html("");for(var a="",d="",g="",f="",n=0;n<b;n++){var k=e[n];if(0>a.indexOf(k.id)){a+=k.id+",";"tag"==c&&(d=k.privacy?"privacy-tag":"common-tag",g=k.privacy?"\u6211\u7684\u6807\u7b7e:":"\u516c\u5171\u6807\u7b7e:");var r=$('\x3cspan class\x3d"'+d+' filter-item"\x3e\x3ca\x3e\x3c/a\x3e\x3c/span\x3e'),f=k.name.replace(/</g,
"\x26lt").replace(/>/g,"\x26gt").replace("/[\r\n]/g"," ");r.find("a").html(f).attr("data-entity",k.id).attr("title",g+f);"indirectsubordinate"==c||"directsubordinate"==c?r.find("a").addClass("employee-click"):r.find("a").addClass(c+"-click");$(this.el).find("#"+c+"-filter").append(r)}}},resetArray:function(){this.mainlines.length=0;this.tags.length=0;this.managers.length=0;this.comments.length=0;this.searchs.length=0;this.status.length=0;this.formtypes.length=0;$(".filter-item .checked").each(function(){$(this).removeClass("checked")})},
searchData:function(e,c){this.resetArray();var b=this,a;0==e.length&&(b.searchs.length=0);"tag"==c&&(a=!0);b.arrayIndexOf(b.searchs,e)||(b.searchs.push(e),0<e.length&&$.ajax({type:"post",url:"/search/suggestion.json",dataType:"json",contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",data:{searchType:c,module:b.module,allTag:a,keywords:e},success:function(a){a=a[c+"s"];b.renderDataList(a,c);return a}}))},arrayIndexOf:function(e,c){if(e&&0<e.length){for(var b=0;b<e.length;b++)if(e[b]==
c)return!0;return!1}},triggerFilter:function(){$(this.el).find("#filter-div").find(".filter-submit").trigger("click.filter")},setDueDate:function(e,c){var b=e.date.format("{yyyy}-{MM}-{dd}");$(c).val(b)},remove:function(){$(this.el).find("#filter-div").off(".filter");this.managers&&(this.managers.length=0,this.managers=null);this.tags&&(this.tags.length=0,this.tags=null);this.searchs&&(this.searchs.length=0,this.searchs=null);this.comments&&(this.comments.length=0,this.comments=null);this.mainlines&&
(this.mainlines.length=0,this.mainlines=null);this.status&&(this.status.length=0,this.status=null);this.formtypes&&(this.formtypes.length=0,this.formtypes=null)}});m.exports=h});
define("teams/component/shareallmultiselect",["teams/utils","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h=Backbone.View.extend({shareEl:"",initialize:function(c){this.parentEl=c.parentEl;this.shareEl=this.parentEl+" "+c.shareContainer;this.entityId=c.entityId;this.serverPath=c.serverPath;this._module=c.module;this.groupContainer=c.groupContainer?c.groupContainer:"#group-share";this.depContainer=c.depContainer?c.depContainer:"#department-share";
this.userContainer=c.userContainer?c.userContainer:"#user-share";this.addBack=c.addBack;this.removeBack=c.removeBack;$(this.shareEl).html(f.template("share.shareall",{panel:"share"}))},delegateEvents:function(){var c=this;$(c.shareEl).off("click.shareallmultiselect",".entity-item .close").on("click.shareallmultiselect",".entity-item .close",function(b){b.stopPropagation();c.deleteEvent($(this))});$(c.shareEl).find("#share-select").change(function(){val=$(this).val();"all"==val?($(".sharetype-dept").addClass("hide"),
$(".sharetype-group").addClass("hide"),$(".sharetype-user").removeClass("hide"),$(c.shareEl).find("#editShare").removeClass("hide"),$(c.shareEl).find(".typeahead-wrapper").addClass("hide"),$(this).val("user"),c.createShareEntryLink("all"),c.addBack&&c.addBack("all")):"group"==val?($(".sharetype-dept").addClass("hide"),$(".sharetype-group").removeClass("hide"),$(".sharetype-user").addClass("hide")):"department"==val?($(".sharetype-dept").removeClass("hide"),$(".sharetype-group").addClass("hide"),$(".sharetype-user").addClass("hide")):
"user"==val&&($(".sharetype-dept").addClass("hide"),$(".sharetype-group").addClass("hide"),$(".sharetype-user").removeClass("hide"))});e([{el:c.shareEl+" .sharetype-group input",callback:function(b){c.createShareEntryLink("group",b);c.addBack&&c.addBack("group",[b])}},{el:c.shareEl+" .sharetype-dept input",callback:function(b){c.createShareEntryLink("department",b);c.addBack&&c.addBack("department",b)}},{el:c.shareEl+" .sharetype-user input",callback:function(b){c.createShareEntryLink("user",b);c.addBack&&
c.addBack("user",b)}}])},deleteEvent:function(c){this.removeBack&&this.removeBack(c)},render:function(){},createShareEntryLink:function(c,b){if(b){var a=[];b instanceof Array?a=b:a[0]=b;for(var d in a){var g=a[d],e="";"department"==c?e=this.depContainer:"group"==c?e=this.groupContainer:"user"==c&&(e=this.userContainer);this.hasUser(g.id,$(this.shareEl).find("#shareentrys"))||($(this.shareEl).removeClass("hide"),$(this.parentEl).find($(this.shareEl).attr("icon")).addClass("hide"),g='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"'+
c+'" data-value\x3d"'+g.id+'" userId\x3d"'+g.id+'"\x3e'+g.name+"\x3c/a\x3e\x3c/span\x3e",$(this.parentEl).find(e).append(g))}}else"all"!=c||0<$(this.parentEl).find(this.userContainer+" .entity-item .all").length||($(this.shareEl).removeClass("hide"),$(this.parentEl).find($(this.shareEl).attr("icon")).addClass("hide"),g='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"all" data-value\x3d"0" userId\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e',$(this.parentEl).find(this.userContainer).append(g))},
hasUser:function(c,b){var a=!1;b.find("a").each(function(){var b=$(this).attr("userid");parseInt(b)==parseInt(c)&&(a=!0)});return a},getUserIds:function(){var c="";$(this.parentEl).find(this.userContainer+" .user").each(function(){c+=$(this).data("value")+","});return c},getDepartmentIds:function(){var c="";$(this.parentEl).find(this.depContainer+" .department").each(function(){c+=$(this).data("value")+","});return c},getGroupIds:function(){var c="";$(this.parentEl).find(this.groupContainer+" .group").each(function(){c+=
$(this).data("value")+","});return c},remove:function(){$(this.el);$(this.el).off(".shareallmultiselect");this.typeahead&&(this.typeahead.remove(),this.typeahead=null);$(this.el).empty()}});m.exports=h});
define("teams/component/shareout",["teams/utils","teams/component/shareoutmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/shareoutmodel");h=Backbone.View.extend({el:"body",targetId:"",_module:"",otherIds:"",initialize:function(c){this.obj=c.obj;this.el=c.el?c.el:"body";this.targetId=this.obj.attr("targetId");this.module=this.obj.attr("module");this.model=new e;ZeroClipboard.config({swfPath:"js/clipboard.swf",activeClass:"zeroclipboard-is-active"})},render:function(){var c=
this.obj,b=$(this.el);0==b.find("#shareout-div").size()&&(b.append(f.template("component.shareout")),b=c.offset().top+40,c=c.offset().left,c+450>$(window).width()&&(c=$(window).width()-500),$("#shareout-div").css("left",c+"px").css("top",b+"px"),this.initEvents())},initEvents:function(){var c=this;$("#shareout-div").off(".shareout");$("#shareout-div").on("click.shareout","#btn-public",function(b){b.stopPropagation();c.copyBtnBind();c.publicShare()});$("#shareout-div").on("click.shareout","#btn-private",
function(b){b.stopPropagation();c.copyBtnBind();c.privateShare()});$("#shareout-div").on("mouseover.shareout","#shareout-textarea",function(b){b.stopPropagation();$(this).select()});$("body").on({"click.shareout":function(b){b=$(b.target);b.hasClass("control-btn")||0!=b.parents("#shareout-div").length||"shareout-div"==b.attr("id")||0!=b.parents("#selector-employee").length||b.hasClass("close")||b.attr("id")==c.obj.attr("id")||c.remove()},"keyup.shareout":function(b){27==b.which&&c.remove()}})},publicShare:function(){var c=
this,b={};b["shareOut.module"]=c.module;b["shareOut.targetId"]=c.targetId;b["shareOut.type"]="PUBLIC";c.model.getShareOut(b,function(a){$("#shareout-div #shareout-create").hide();$("#shareout-div #shareout-show").show();$("#shareout-div #shareout-textarea").val(TEAMS.service.base+"/remote/shareoutremote/select?id\x3d"+a.shareOut.id);$("#shareout-div #copyhref").attr("ctype","PUBLIC");$("#shareout-div #copyhref").html("\u590d\u5236\u94fe\u63a5");c.copyBtnBind()})},privateShare:function(){var c=this,
b={};b["shareOut.module"]=c.module;b["shareOut.targetId"]=c.targetId;b["shareOut.type"]="PRIVATE";c.model.getShareOut(b,function(a){$("#shareout-div #shareout-create").hide();$("#shareout-div #shareout-show").show();$("#shareout-div #shareout-textarea").val(TEAMS.service.base+"/remote/shareoutremote/select?id\x3d"+a.shareOut.id);$("#shareout-div #shareoutpwdDiv").show();$("#shareout-div #shareoutpwd").val(a.shareOut.pwd);$("#shareout-div #copyhref").html("\u590d\u5236\u94fe\u63a5\u53ca\u5bc6\u7801");
$("#shareout-div #copyhref").attr("ctype","PRIVATE");c.copyBtnBind()})},copyBtnBind:function(){var c=new ZeroClipboard($("#shareout-div #copyhref"));c.on("ready",function(){c.on("copy",function(b){"PRIVATE"==$("#shareout-div #copyhref").attr("ctype")?b.clipboardData.setData("text/plain","\u94fe\u63a5:"+$("#shareout-div #shareout-textarea").val()+" \u5bc6\u7801:"+$("#shareout-div #shareoutpwd").val()):"PUBLIC"==$("#shareout-div #copyhref").attr("ctype")&&b.clipboardData.setData("text/plain",$("#shareout-div #shareout-textarea").val())});
c.on("aftercopy",function(b){f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")});c.on("error",function(b){f.notify(b.messsage)})})},remove:function(){$("#shareout-div").off(".shareout");$(this.obj).off(".shareout");$("body").off(".shareout");$("#shareout-div").remove()}});m.exports=h});
define("teams/component/remindcard",["teams/component/remindcardview"],function(h,q,m){var f=h("teams/component/remindcardview");h=Backbone.View.extend({el:"#remindcard",initialize:function(e){this.userId=e.userId;this.targetEl=e.targetEl;$("body").append('\x3cdiv id\x3d"remindcard" class\x3d"remind panel border-dropdown"\x3e\x3c/div\x3e')},delegateEvents:function(){var e=this;$("body").on("click.remind",function(c){e.remove()});$("#remindcard").on("click.remind",function(c){var b=$(c.target);b.hasClass("router")||
b.parent().hasClass("router")||b.hasClass("locus-toggle")||b.hasClass("upload-toggle")||b.hasClass("pwd-toggle")||c.stopPropagation()})},render:function(){var e=1*$(this.targetEl).height()+5,e=$(this.targetEl).offset().top+Math.max(e,25),c=$(this.targetEl).offset().left,b={};c+450>$(window).width()?b.right="5px":b.left=c+"px";e+461>$(window).height()&&461<e&&(e=$(this.targetEl).offset().top-461);b.top=e+"px";$("#remindcard").css(b);this.remindcardView=new f({userId:this.userId,container:"#remindcard",
hideVisit:!0,chardMode:!0});this.remindcardView.render();$("#remindcard").find(".j_panel-head").css("cursor","move")},remove:function(){this.remindcardView&&(this.remindcardView.remove(),this.remindcardView=null);$("body").off(".remind");$("#remindcard").off(".remind");$("#remindcard").remove()}});m.exports=h});
define("teams/component/attachmentreup",["teams/utils","teams/base/preview","teams/component/attachment","teams/component/fileversionlist"],function(h,q,m){var f=h("teams/utils"),e=h("teams/base/preview");q=h("teams/component/attachment");var c=h("teams/component/fileversionlist");h=q.extend({delegateEvents:function(){var b=this,a=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:b.el,browse_button:b.el+" #pickFiles",drop_element:b.el+" #upload-wrap",max_file_size:"normal"==
TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?refId\x3d"+b.targetId+"\x26module\x3d"+b._module+"\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});a.init();a.bind("FilesAdded",function(a,c){$.each(c,function(a,d){$(b.el).find(".entity-container").append(f.template("base.newattachment",d))});a.refresh();a.start();$(b.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:
"")}})});a.bind("UploadProgress",function(a,b){$("#"+b.id+" i").html(b.percent+"%")});a.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});a.bind("FileUploaded",function(a,c,l){l=jQuery.parseJSON(l.response);a=l.fileObj;b.callback&&b.callback(l);b.callbacks&&b.callbacks.link&&b.callbacks.link(a,l.stream);$(b.container).trigger("FileUploaded",
a);f.notify("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f");$("#"+c.id).parent().replaceWith(f.template("base.attachment",a));$("#stream").trigger("insertStream",l.stream);c=$("#"+a.id).children();c.addClass("remoteDownload").data("dlid",a.id);c.attr({"data-toggle":"tooltip","data-placement":"top"});c.attr("data-original-title",a.name);b.addClientEdit(c,a);(new e({container:$("body"),afterJqObj:$("#"+a.id).children().last(),fileObj:a})).render();$("#"+a.id).append("\x3ca id\x3d'"+a.id+"_reupload' title\x3d'\u91cd\u65b0\u4e0a\u4f20' class\x3d'reupload acl-hide btn btn-xs btn-info'\x3e\u91cd\u65b0\u4e0a\u4f20\x3c/a\x3e");
$("#"+a.id).append("\x3ca id\x3d'"+a.id+"_history' title\x3d'\u5386\u53f2\u7248\u672c' class\x3d'history acl-hide btn btn-xs btn-info' data-id\x3d'"+a.id+"'\x3e\u5386\u53f2\u7248\u672c\x3c/a\x3e");b.reuploadButtonBind(a.id)});$("#upload-wrap").addClass(a.runtime);$(this.el).on("addAttachment",function(b){"html5"==a.runtime&&(b=document.getElementById(a.id+"_html5"))&&!b.disabled&&b.click()});$(this.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();
a=$(this).prevAll("a").attr("id");var c=$(this).prevAll("a").attr("data-value"),e=$(this).parents(".entity-container"),n=e.attr("data-url");if(n&&c){var k=$(this).parent(),r=e.data("param")||{};r._method="delete";f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(a){a&&$.ajax({type:"POST",dataType:"json",data:r,url:n.replace("{id}",c),success:function(a){k.remove();e.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");
f.notify("\u6570\u636e\u5df2\u5220\u9664");b.callbacks&&b.callbacks.unlink&&b.callbacks.unlink(a.fileObj,a.stream)}})})}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),e.trigger("removeEntity",a))});$(this.el).off("click",".history").on("click ",".history",function(a){a=$(this).data("id");this.fileVersion=new c({container:b.el,fileObjId:a});this.fileVersion.render()});$(this.el).on("restoreVersion",function(a,c){var l=c.fileObj,n=$(b.el).find("#"+l.id);n.after(f.template("base.attachment",
l));n.remove();var n=$(b.el).find(".entity-container"),k=$("#"+l.id).children();k.addClass("remoteDownload").data("dlid",l.id);k.attr({"data-toggle":"tooltip","data-placement":"top"});k.attr("data-original-title",l.name);b.addClientEdit(k,l);(new e({container:n,afterJqObj:n.find("#"+l.id).children().last(),fileObj:l})).render();n.find("#"+l.id).append("\x3ca id\x3d'"+l.id+"_reupload' title\x3d'\u91cd\u65b0\u4e0a\u4f20' class\x3d'reupload acl-hide btn btn-xs btn-info'\x3e\u91cd\u65b0\u4e0a\u4f20\x3c/a\x3e");
n.find("#"+l.id).append("\x3ca id\x3d'"+l.id+"_history' title\x3d'\u5386\u53f2\u7248\u672c' class\x3d'history acl-hide btn btn-xs btn-info' data-id\x3d'"+l.id+"'\x3e\u5386\u53f2\u7248\u672c\x3c/a\x3e");b.reuploadButtonBind(l.id);$("#stream").trigger("insertStream",c.stream)})},render:function(b){this.readonly&&($(this.el+" #upload-wrap").remove(),$(this.el).find(".entity-container").removeAttr("data-url").attr("undeletable",!0));if(b){var a=$(this.el).find(".entity-container");a.data("param",{refId:this.targetId});
for(var d=0,c=b.length;d<c;d++){var l=b[d];a.append(f.template("base.attachment",l));var n=$("#"+l.id).children();n.addClass("remoteDownload").data("dlid",l.id);n.attr({"data-toggle":"tooltip","data-placement":"top"});n.attr("data-original-title",l.name);this.addClientEdit(n,l);(new e({container:a,afterJqObj:a.find("#"+l.id).children().last(),fileObj:l})).render();a.find("#"+l.id).append("\x3ca id\x3d'"+l.id+"_reupload' title\x3d'\u91cd\u65b0\u4e0a\u4f20' class\x3d'reupload acl-hide btn btn-xs btn-info'\x3e\u91cd\u65b0\u4e0a\u4f20\x3c/a\x3e");
a.find("#"+l.id).append("\x3ca id\x3d'"+l.id+"_history' title\x3d'\u5386\u53f2\u7248\u672c' class\x3d'history acl-hide btn btn-xs btn-info' data-id\x3d'"+l.id+"'\x3e\u5386\u53f2\u7248\u672c\x3c/a\x3e");this.reuploadButtonBind(l.id)}0<b.length&&($(this.el).slideDown(300),$(this.parentEl).find($(this.el).attr("icon")).addClass("hide"));$(this.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}},
reuploadButtonBind:function(b){var a=this,d=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",container:a.el,browse_button:a.el+" #"+b+"_reupload",dragdrop:!1,drop_element:"",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload/reUpload.json?id\x3d"+b+"\x26refId\x3d"+a.targetId+"\x26module\x3d"+a._module+"\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});d.init();d.bind("FilesAdded",function(d,c){1<c.length?(f.notify("\u91cd\u65b0\u4e0a\u4f20\u53ea\u80fd\u9009\u62e9\u5355\u4e2a\u6587\u4ef6"),
$.each(c,function(a,b){d.removeFile(b)})):($.each(c,function(d,c){$(a.el).find("#"+b).after(f.template("base.newattachment",c))}),$(a.el).find("#"+b).remove(),d.refresh(),d.start(),$(a.el).find(".fancybox").fancybox({closeBtn:!0,afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}}))});d.bind("UploadProgress",function(a,b){$("#"+b.id+" i").html(b.percent+"%")});d.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+
a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});d.bind("FileUploaded",function(b,d,c){c=jQuery.parseJSON(c.response);b=c.fileObj;a.callback&&a.callback(c);a.callbacks&&a.callbacks.link&&a.callbacks.link(b,c.stream);$(a.container).trigger("FileUploaded",b);f.notify("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f");$("#"+d.id).parent().replaceWith(f.template("base.attachment",b));$("#stream").trigger("insertStream",c.stream);d=
$("#"+b.id).children();d.addClass("remoteDownload").data("dlid",b.id);d.attr({"data-toggle":"tooltip","data-placement":"top"});d.attr("data-original-title",b.name);a.addClientEdit(d,b);(new e({container:$("body"),afterJqObj:$("#"+b.id).children().last(),fileObj:b,previewType:"noCache"})).render();$("#"+b.id).append("\x3ca id\x3d'"+b.id+"_reupload' title\x3d'\u91cd\u65b0\u4e0a\u4f20' class\x3d'reupload acl-hide btn btn-xs btn-info'\x3e\u91cd\u65b0\u4e0a\u4f20\x3c/a\x3e");$("#"+b.id).append("\x3ca id\x3d'"+
b.id+"_history' title\x3d'\u5386\u53f2\u7248\u672c' class\x3d'history acl-hide btn btn-xs btn-info' data-id\x3d'"+b.id+"'\x3e\u5386\u53f2\u7248\u672c\x3c/a\x3e");a.reuploadButtonBind(b.id);f.notify("\u91cd\u65b0\u4e0a\u4f20\u6210\u529f!")});$("#upload-wrap").addClass(d.runtime);$(this.el).on("addAttachment",function(a){"html5"==d.runtime&&(a=document.getElementById(d.id+"_html5"))&&!a.disabled&&a.click()});$(this.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(b){b.stopPropagation();
b=$(this).prevAll("a").attr("id");var d=$(this).prevAll("a").attr("data-value"),c=$(this).parents(".entity-container"),e=c.attr("data-url");if(e&&d){var r=$(this).parent(),p=c.data("param")||{};p._method="delete";f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(b){b&&$.ajax({type:"POST",dataType:"json",data:p,url:e.replace("{id}",d),success:function(b){r.remove();c.trigger("removeEntity",b);$("#stream").trigger("insertStream",b.streams||b.stream);$("#readinfo").trigger("updateReadInfo");
f.notify("\u6570\u636e\u5df2\u5220\u9664");a.callbacks&&a.callbacks.unlink&&a.callbacks.unlink(b.fileObj,b.stream)}})})}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),c.trigger("removeEntity",b))})},addClientEdit:function(b,a){!window.IsEteamsClient||1!=window.IsEteamsClient()&&2!=window.IsEteamsClient()||"text"!=a.docType&&"office"!=a.docType||b.after("\x3ca title\x3d'\u76f4\u63a5\u7f16\u8f91' class\x3d'downloadEdit document-preview-btn btn btn-xs btn-info' href\x3d'"+
crmContext.remoteDownloadUrl+"/remotedownload/"+a.id+"/"+ETEAMSID+"/true?type\x3dedit\x26id\x3d"+a.id+"'\x3e\u76f4\u63a5\u7f16\u8f91\x3c/a\x3e")}});m.exports=h});
define("teams/component/trashbinview",["teams/utils","teams/component/trashbinmodel","teams/component/typeahead","teams/component/trashbinlogview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/trashbinmodel"),c=h("teams/component/typeahead"),b=h("teams/component/trashbinlogview");h=Backbone.View.extend({teams:{},initialize:function(a){this.isAdmin=TEAMS.currentUser.admin;this.parentEl=a.parentEl;this.model=new e;this.el=a.container;this.module=a.module;$(this.el).html(f.template("component.trashbin"))},
delegateEvents:function(){var a=this,d=$(this.el);$("body").on("click.TrashBinView",".goto-top",function(b){f.gotoTop(a.el+" .j_trashbinListScr")});f.datepicker({el:a.el+" #deleteStartTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var d=$(a.el).find("#deleteStartTime"),c=$(a.el).find("#deleteEndTime");c.val()&&b>c.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),d.val("")):d.val(b)}});f.datepicker({el:a.el+" #deleteEndTime",callback:function(b){b=
Date.create(b.date).format("{yyyy}-{MM}-{dd}");var d=$(a.el).find("#deleteStartTime"),c=$(a.el).find("#deleteEndTime");d.val()&&b<d.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),c.val("")):c.val(b)}});c({el:a.el+" #deletorsDiv #deletors",callback:function(b){if(b&&!$.isEmptyObject(b)){var c=d.find("#deletorsDiv .j_selected");a.renderTypeheader(c,b)}}});d.on("click.TrashBinView","#trashbinContent .j_DelAll",function(a){a=$(this).is(":checked");d.find("#trashbinContent .j_trashlist .j_Del").prop("checked",
a)});d.on("click.TrashBinView","#trashbinContent .j_thorougDestroy",function(b){var d=$(this).attr("entityId"),c=$(this).siblings(".j_loadin");f.confirm("\u5f7b\u5e95\u5220\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d,\u786e\u8ba4\u8981\u5220\u9664\u6570\u636e\u5417\uff1f",function(b){if(b){c.show();b={};var g=[];g.push(d);b.ids=g;b.module=a.module;a.model.thorougDestroy(b,function(b){c.hide();b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u5df2\u5f7b\u5e95\u5220\u9664"),a.renderAgain(d,1))})}})});
d.on("click.TrashBinView","#trashbinContent .j_restore",function(b,d){var c=$(this).attr("id"),e=$(this).siblings(".j_loadin");f.confirm("\u786e\u8ba4\u8981\u6062\u590d\u6570\u636e\u5417\uff1f",function(b){if(b){e.show();b={};var g=[];g.push(c);b.ids=g;b.module=a.module;a.model.recover(b,function(b){e.hide();b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u6570\u636e\u5df2\u6062\u590d"),a.renderAgain(c,1));d.slideClose&&$("body").trigger("slideClose")})}})});d.on("click.TrashBinView","#restoreAll",
function(b){var c={},e=[];d.find("#trashbinContent .j_trashlist input:checkbox:checked").each(function(a){a=$(this).val();e.push(a)});c.ids=e;c.module=a.module;0==e.length?f.notify("\u8bf7\u52fe\u9009\u6570\u636e\u540e\u8fd8\u539f"):f.confirm("\u786e\u8ba4\u8981\u6062\u590d\u6570\u636e\u5417\uff1f",function(b){b&&a.model.recover(c,function(b){b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u6570\u636e\u5df2\u6062\u590d"),a.renderAgain(e,e.length))})})});d.on("click.TrashBinView","#search",function(b){d.find("#trashbinContent .j_trashlist").html("");
a.renderTable(1)});d.on("click.TrashBinView","#js_table .js_trashbin_log",function(d){(new b({container:"#trashbinDialog-container",module:a.module})).render()});d.on("keyup.TrashBinView","#js_name",function(a){13==(a?a:window.event?window.event:null).keyCode&&d.find("#search").trigger("click")});d.on("click.TrashBinView","#more_data",function(b){b=$(this).data("page");a.renderTable(b.nextPage)});d.on("click.TrashBinView",".j_goalView li",function(b){b=$(this);var c=$(".j_center"),e=$(".j_center_form");
b.addClass("active").siblings().removeClass("active");var f=b.attr("data-status");"flow"==f&&(c.removeClass("hide"),e.addClass("hide"));"form"==f&&(c.addClass("hide"),e.removeClass("hide"),b.attr("activedata")||(b.attr("activedata","1"),d.find("#trashbinContent_form tbody").html(""),a.renderTable_form(1)))});d.on("click.TrashBinView",".js_formPreview",function(){var a=$(this).attr("data-id");window.open("/form/preview/"+a)});f.datepicker({el:a.el+" #deleteStartTime_form",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");
var d=$(a.el).find("#deleteStartTime_form"),c=$(a.el).find("#deleteEndTime_form");c.val()&&b>c.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),d.val("")):d.val(b)}});f.datepicker({el:a.el+" #deleteEndTime_form",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var d=$(a.el).find("#deleteStartTime_form"),c=$(a.el).find("#deleteEndTime_form");d.val()&&b<d.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),
c.val("")):c.val(b)}});c({el:a.el+" #deletorsDiv_form #deletors_form",callback:function(b){if(b&&!$.isEmptyObject(b)){var c=d.find("#deletorsDiv_form .j_selected");a.renderTypeheader(c,b)}}});d.on("click.TrashBinView","#trashbinContent_form .j_flowDelAll_form",function(a){a=$(this).is(":checked");d.find("#trashbinContent_form .j_trashlist .j_flowDel").prop("checked",a)});d.on("click.TrashBinView","#search_form",function(b){d.find("#trashbinContent_form .j_trashlist").html("");a.renderTable_form(1)});
d.on("click.TrashBinView",".js_form_trashbin_log",function(a){(new b({container:"#formDialog-container",module:"form"})).render()});d.on("keyup.TrashBinView","#flowName_form",function(a){13==(a?a:window.event?window.event:null).keyCode&&d.find("#search_form").trigger("click")});d.on("click.TrashBinView","#restoreAll_form",function(b){var c={},e=[];d.find("#trashbinContent_form .j_trashlist input:checkbox:checked").each(function(a){a=$(this).val();e.push(a)});c.ids=e;c.module="form";0==e.length?f.notify("\u8bf7\u52fe\u9009\u6570\u636e\u540e\u8fd8\u539f"):
f.confirm("\u786e\u8ba4\u8981\u6062\u590d\u6570\u636e\u5417\uff1f",function(b){b&&a.model.recover(c,function(b){b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u6570\u636e\u5df2\u6062\u590d"),a.renderAgain_form(e,e.length))})})});d.on("click.TrashBinView","#trashbinContent_form .j_restore",function(b,d){var c=$(this).attr("formid"),e=$(this).siblings(".j_loadin");f.confirm("\u786e\u8ba4\u8981\u6062\u590d\u6570\u636e\u5417\uff1f",function(b){if(b){e.show();b={};var d=[];d.push(c);b.ids=d;b.module=
"form";a.model.recover(b,function(b){e.hide();b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u6570\u636e\u5df2\u6062\u590d"),a.renderAgain_form(c,1))})}})});d.on("click.TrashBinView","#trashbinContent_form .j_thorougDestroy",function(b){var d=$(this).attr("formid"),c=$(this).siblings(".j_loadin");f.confirm("\u5f7b\u5e95\u5220\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d,\u786e\u8ba4\u8981\u5220\u9664\u6570\u636e\u5417\uff1f",function(b){if(b){c.show();b={};var e=[];e.push(d);b.ids=e;b.module=
"form";a.model.thorougDestroy(b,function(b){c.hide();b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u6570\u636e\u5df2\u5f7b\u5e95\u5220\u9664"),a.renderAgain_form(d,1))})}})});d.on("click.TrashBinView","#more_data_form",function(b){b=$(this).data("page");a.renderTable_form(b.nextPage)});d.on("click.TrashBinView",".js_notify",function(a){f.notify("\u8bf7\u8fd8\u539f\u540e\u518d\u67e5\u770b\u8be6\u60c5\uff01")})},render:function(){var a=$(this.el),b=a.find("#trashbinContent tbody"),c=a.find(".js_entity_module");
switch(this.module){case "workflow":c.attr("data-status","flow");break;case "form":c=a.find(".j_trashbintab");c.remove();a.find("#trashbinClone .j_tfname").removeClass("j_entityslider-toggle").addClass("js_formPreview");a=a.find("#deletorsDiv");this.isAdmin||a.remove();break;default:c=a.find(".j_trashbintab"),c.remove(),a.find("#trashbinClone .j_tfname").removeClass("j_entityslider-toggle").addClass("js_notify"),a=a.find("#deletorsDiv"),this.isAdmin||a.remove()}b.html("");this.renderTable(1)},renderTable:function(a){var b=
this,c=$(b.el),e={};e.pageNo=a;var n=c.find("#trashbin #js_name").val(),k=c.find("#trashbin #deleteStartTime").val(),r=c.find("#trashbin #deleteEndTime").val(),p=[];c.find("#trashbin #deletorsDiv .j_optcontainer .j_selected span a").each(function(){var a=$(this).attr("id");p.push(a)});e.name=$.trim(n);e.startTime=$.trim(k);e.endTime=$.trim(r);e.userIds=p;e.module=b.module;b.model.queryTrash(e,function(e){var k=e.page;e=k.result;var l=c.find("#trashbinContent .j_trashlist");1==a&&(l.empty(),null==
e||0==e.length?c.find("#trashbinContent .j_empty").show():c.find("#trashbinContent .j_empty").hide());k&&k.hasNext?($(b.el+" #more_data").show(),$(b.el+" #more_data").data("page",k)):$(b.el+" #more_data").hide();if(null!=e)for(k=0;k<e.length;k++){var n=c.find("#trashbinClone li").clone(),p=e[k],r=p.entityId;null==l.find("#"+r).get(0)&&(n.attr("entityId",r),n.find(".j_Del").val(r),n.find(".j_tfname").text(p.name),n.find(".j_tfname").attr("data-id",r),n.find(".j_tfname").attr("data-module",b.module),
n.find(".j_tuname").text(null!=p.operator?p.operator.username:"\u65e0"),p=Date.create(p.createTime),n.find(".j_ttime").text(p.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}")),n.find(".j_ttime").attr("title",p.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}")),b.isAdmin?n.find(".j_thorougDestroy").attr("entityId",r):n.find(".j_thorougDestroy").remove(),n.find(".j_restore").attr("id",r),l.append(n))}f.layout(b.el+" .j_center")})},renderTable_form:function(a){var b=this,c=$(b.el),e={};e.pageNo=a;var n=c.find("#trashbin #flowName_form").val(),
k=c.find("#trashbin #deleteStartTime_form").val(),r=c.find("#trashbin #deleteEndTime_form").val(),p=[];c.find("#trashbin #deletorsDiv_form .j_optcontainer_form .j_selected span a").each(function(){var a=$(this).attr("id");p.push(a)});e.name=$.trim(n);e.startTime=$.trim(k);e.endTime=$.trim(r);e.userIds=p;e.module="form";b.model.queryTrash(e,function(e){var k=e.page;e=k.result;var l=c.find("#trashbinContent_form .j_trashlist");1==a&&(l.empty(),null==e||0==e.length?c.find("#trashbinContent_form .j_empty_form").show():
c.find("#trashbinContent_form .j_empty_form").hide());k&&k.hasNext?($(b.el+" #more_data_form").show(),$(b.el+" #more_data_form").data("page",k)):$(b.el+" #more_data_form").hide();if(null!=e)for(k=0;k<e.length;k++){var n=c.find("#flowTrClone_form li").clone(),p=e[k],r=p.entityId;null==l.find("#"+r).get(0)&&(n.attr("id",r),n.find(".j_flowDel").val(r),n.find(".j_tfname").text(p.name),n.find(".j_tfname").attr("data-id",r),n.find(".j_tuname").text(null!=p.operator?p.operator.username:"\u65e0"),p=Date.create(p.createTime),
n.find(".j_ttime").text(p.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}")),n.find(".j_ttime").attr("title",p.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}")),b.isAdmin?n.find(".j_thorougDestroy").attr("formId",r):n.find(".j_thorougDestroy").remove(),n.find(".j_restore").attr("formId",r),l.append(n))}f.layout(b.el+" .j_center_form")})},renderTypeheader:function(a,b){if(b.length)for(var c=0;c<b.length;c++){var e=b[c],f=e.name,k=e.id;if(f&&k){var r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+k+"\x3e"+f+
"\x3c/a\x3e\x3c/span\x3e";a.find(".entity-item").each(function(a){k==$(this).find("a").attr("id")&&(r=null)});a.append(r)}}else f=b.name,k=b.id,f&&k&&(r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+k+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e",a.find(".entity-item").each(function(a){k==$(this).find("a").attr("id")&&(r=null)}),a.append(r))},renderAgain:function(a,b){var c=$(this.el),e=c.find("#trashbinContent .j_trashlist li");if(10>e.size()-b)this.renderTable(1);else if(1<b)c.find("#trashbinContent .j_trashlist input:checkbox:checked").each(function(a){$(this).parents(".j_trash").remove()});
else for(c=0;c<e.size();c++)if(a==$(e[c]).attr("entityId")){$(e[c]).remove();break}},renderAgain_form:function(a,b){var c=$(this.el),e=c.find("#trashbinContent_form .j_trashlist li");if(10>e.size()-b)this.renderTable_form(1);else if(1<b)c.find("#trashbinContent_form .j_trashlist input:checkbox:checked").each(function(a){$(this).parents(".j_trash").remove()});else for(c=0;c<e.size();c++)if(a==$(e[c]).attr("id")){$(e[c]).remove();break}},remove:function(){var a=$(this.el);a.off(".TrashBinView");a.find("#trashbin").remove()}});
m.exports=h});
define("teams/component/relevancemodel",function(h,q,m){h=Backbone.Model.extend({newRelevance:function(f){$.ajax({type:"post",url:"/relevance.json",dataType:"json",data:{"relevance.objectId":this.objectId,"relevance.objectModule":this.objectModule,"relevance.targetId":this.targetId,"relevance.targetModule":this.targetModule,"relevance.targetName":this.targetName},success:function(e){f&&f(e)}})},newSubTaskRelevanceByList:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",
url:"/relevance/createSubTaskRelevanceByList.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},newRelevanceByList:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/relevance/createByList.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/component/remind",["teams/utils","teams/component/typeahead","teams/workreport/workreportmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/workreport/workreportmodel");h=Backbone.View.extend({el:"body",targetId:"",_module:"",otherIds:"",initialize:function(b){this.obj=b.obj;this.el=b.el?b.el:"body";this.targetId=this.obj.attr("targetId");this.targetIds=this.obj.attr("targetIds");this._module=this.obj.attr("module");this.userId=this.obj.attr("data-id");
this.userName=this.obj.attr("username");this.type=this.obj.attr("type");this.number=this.obj.attr("number");this.activeYear=this.obj.attr("activeYear");this.currentYear=this.obj.attr("currentYear");this.choiceType=this.obj.attr("choiceType");this.departmentId=this.obj.attr("departmentId");this.model=new c},render:function(){var b=this.obj,a=$(this.el);if(0==a.find("#remind-div").size()){a.append(f.template("component.remind"));var a=b.offset().top+40,d=b.offset().left;d+450>$(window).width()&&(d=
$(window).width()-500);a+172>$(window).height()&&172<a&&(a=b.offset().top-172);$("#remind-div").css("left",d+"px").css("top",a+"px");$("#remind-div #"+this._module).removeClass("hide");"customer"==this._module?this.customer():"document"==this._module?this.document():"task"==this._module?this.task():"workflow"==this._module?this.workflow():"workreport"==this._module?this.workreport():"mainline"==this._module&&this.mainline();this.initEvents()}},initEvents:function(){var b=this;$("#remind-div").off(".remind");
e({el:"#other-employee input",callback:function(a){if(a&&!$.isEmptyObject(a)){a=$.isArray(a)?a:[a];for(var b=0;b<a.length;b++){var c=a[b];0==$("#remindlist #"+c.id).size()&&$("#remindlist").append("\x3cspan id\x3d"+c.id+" class\x3d'entity-item'\x3e\x3ca data-value\x3d"+c.id+"\x3e"+c.name+"\x3c/a\x3e\x3cbutton type\x3d'button' class\x3d'close hide' title\x3d'\u5220\u9664'\x3e\u00d7\x3c/button\x3e\x26nbsp;\x3c/span\x3e")}}}});e({el:"#workreport input",callback:function(a){if(a&&!$.isEmptyObject(a)){a=
$.isArray(a)?a:[a];for(var b=0;b<a.length;b++){var c=a[b];0==$("#workreportRemindlist #"+c.id).size()&&$("#workreportRemindlist").append("\x3cspan id\x3d"+c.id+" class\x3d'entity-item'\x3e\x3ca data-value\x3d"+c.id+"\x3e"+c.name+"\x3c/a\x3e\x3cbutton type\x3d'button' class\x3d'close hide' title\x3d'\u5220\u9664'\x3e\u00d7\x3c/button\x3e\x26nbsp;\x3c/span\x3e")}}}});$("#remind-div").on("click.remind","#remind-submit",function(a){a.stopPropagation();b.send()});$("#remind-div").on("click.remind","#remind-cancle",
function(a){a.stopPropagation();b.remove()});$("body").on({"click.remind":function(a){a=$(a.target);a.hasClass("control-btn")||0!=a.parents("#remind-div").length||"remind-div"==a.attr("id")||0!=a.parents("#selector-employee").length||a.hasClass("close")||b.remove()},"keyup.remind":function(a){27==a.which&&b.remove()}})},customer:function(){$("#remind-textarea").val("\u8fd9\u4e2a\u5ba2\u6237\u9700\u8981\u8054\u7cfb\u8ddf\u8fdb\u3002")},document:function(){$("#remind-textarea").val("\u8bf7\u770b\u4e00\u4e0b\u8fd9\u7bc7\u6587\u6863\u3002");
$("#remind-div").css("width","440px")},task:function(){$("#remind-textarea").val("\u8fd9\u4e2a\u4efb\u52a1\u9700\u8981\u6293\u7d27\u5904\u7406\u3002");$("#remind-div").css("width","440px")},workflow:function(){$("#remind-textarea").val("\u8bf7\u5e2e\u5fd9\u5c3d\u5feb\u5904\u7406\u4e00\u4e0b\u8fd9\u4e2a\u5ba1\u6279\uff0c\u8c22\u8c22\uff01");$("#remind-div").css("width","440px")},workreport:function(){$("#remind-div #other-employee").addClass("hide");void 0!==this.userId?parseInt(this.activeYear)<=
parseInt(this.currentYear)&&$("#workreportRemindlist").append("\x3cspan id\x3d"+this.userId+' class\x3d"entity-item"\x3e\x3ca data-value\x3d'+this.userId+"\x3e"+this.userName+"\x3c/a\x3e\x26nbsp;\x3c/span\x3e"):this.model.queryGoalUserlist(this.currentYear,this.type,this.choiceType,this.number,this.departmentId,function(b){b=b.employeeList;for(var a=0;a<b.length;a++){var d=b[a];$("#workreportRemindlist").append("\x3cspan id\x3d"+d.id+' class\x3d"entity-item"\x3e\x3ca data-value\x3d'+d.id+"\x3e"+d.username+
"\x3c/a\x3e\x26nbsp;\x3c/span\x3e")}});"week"==this.type&&$("#remind-textarea").val("\u8bf7\u63d0\u4ea4"+this.currentYear+"\u5e74\u7b2c"+this.number+"\u5468\u7684\u62a5\u544a\uff01");"month"==this.type&&$("#remind-textarea").val("\u8bf7\u63d0\u4ea4"+this.currentYear+"\u5e74\u7b2c"+this.number+"\u6708\u7684\u62a5\u544a\uff01");"season"==this.type&&$("#remind-textarea").val("\u8bf7\u63d0\u4ea4"+this.currentYear+"\u5e74\u7b2c"+this.number+"\u5b63\u5ea6\u7684\u62a5\u544a\uff01");"halfyear"==this.type&&
("2"==this.number?$("#remind-textarea").val("\u8bf7\u63d0\u4ea4"+this.currentYear+"\u5e74\u7ec8\u62a5\u544a\uff01"):$("#remind-textarea").val("\u8bf7\u63d0\u4ea4"+this.currentYear+"\u5e74\u4e2d\u62a5\u544a\uff01"))},mainline:function(){$("#remind-textarea").val("\u8bf7\u8ddf\u8e2a\u8fd9\u4e2a\u9879\u76ee,\u5e76\u7ed9\u51fa\u9002\u5f53\u7684\u8fdb\u5ea6\u53cd\u9988\u3002")},send:function(){var b=this,a="";$("#"+b._module).find("input[type\x3d'checkbox']:checked").each(function(){a+=$(this).val()+","});
var d={};d.checkStr=a;d.ids="workreport"!=b._module?b.getSeleted():b.getWorkReportSeleted();d.type=b._module;b.targetId?d.targetId="workreport"==b._module?null:b.targetId:d.targetIds="workreport"==b._module?null:b.targetIds;d.content=$("#remind-textarea").val();$.ajax({type:"post",url:"/remind/send.json",dataType:"json",data:d,success:function(a){f.notify("\u63d0\u9192\u6210\u529f");b.remove()}})},getWorkReportSeleted:function(){var b="",a=$("#workreportRemindlist").children();if(a&&0<a.length){for(var d=
0;d<a.length-1;d++)var c=$(a[d]),b=b+(c.attr("id")+",");a=$(a[a.length-1]);b+=a.attr("id")}return b},getSeleted:function(){var b="",a=$("#remindlist").children();if(a&&0<a.length){for(var d=0;d<a.length-1;d++)var c=$(a[d]),b=b+(c.attr("id")+",");a=$(a[a.length-1]);b+=a.attr("id")}return b},remove:function(){$("#remind-div").off(".remind");$(this.obj).off(".remind");$("body").off(".remind");$("#remind-div").remove()}});m.exports=h});
define("teams/component/locus",["teams/utils","teams/component/usersummarymodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/usersummarymodel");q=Backbone.View.extend({el:"#mapModal",initialize:function(c){this.userId=c.userId;this.userName=c.userName;this.month=c.month;this.month||(this.month=Date.create().format("{yyyy}-{MM}-{dd}"));this.model=new e;1>$("#mapModal").length&&($("body").append(f.template("base.locus")),f.layout(".timecard-info"))},delegateEvents:function(){var c=
this,b=$("#mapModal");b.on("click.mapModal",".timecard-info .timecard-li .CHECKIN",function(a){a=$(this);var b=a.data("longitude"),e=a.data("latitude");if(b&&e){b=new BMap.Point(b,e);c.map.centerAndZoom(b,16);e=new BMap.Marker(b);e.getIcon().setSize(new BMap.Size(30,35));c.map.addOverlay(e);var f=new BMap.Label(a.find(".address").text());f.setPosition(b);f.addEventListener("dblclick",function(a,b){f.hide()});c.map.addOverlay(f)}});b.on("click.mapModal",".timecard-info .timecard-li .CHECKOUT",function(a){a=
$(this);var b=a.data("longitude"),e=a.data("latitude");if(b&&e){b=new BMap.Point(b,e);c.map.centerAndZoom(b,16);e=new BMap.Marker(b);e.getIcon().setSize(new BMap.Size(30,35));c.map.addOverlay(e);var f=new BMap.Label(a.find(".address").text());f.setPosition(b);f.addEventListener("dblclick",function(a,b){f.hide()});c.map.addOverlay(f)}});f.datepicker({el:b.find("#map-month"),callback:function(a){c.loadByMonth(Date.create(a.date).format("{yyyy}-{MM}-{dd}"))}});b.on("shown.bs.modal.mapModal",function(){c.renderMap()});
b.on("hidden.bs.modal.mapModal",function(){c.remove()})},render:function(){var c=$("#mapModal");c.modal();c.find("#map-month").val(Date.create(this.month).format("{yyyy}-{MM}"));this.loadByMonth(this.month)},renderMap:function(){var c=this;window.HOST_TYPE="2";window.BMap_loadScriptTime=(new Date).getTime();h.async("https://api.map.baidu.com/getscript?v\x3d2.0\x26ak\x3dlZVLz80fXoVh3VVsN5ChL6bb\x26services\x3d\x26t\x3d"+TEAMS.version,function(){c.map||(c.map=new BMap.Map("baidumap-test"),c.map.enableScrollWheelZoom());
c.map.clearOverlays();setTimeout(function(){var b=new BMap.Point(121.481018,31.179276);c.map.centerAndZoom(b,16)},500)})},createTimecardLis:function(c){var b=$("#mapModal #timecard-list");b.empty();var a=Date.create(c).reset("date").isAfter("today"),d=Date.create(c).reset("date");for(c=Date.create(c).endOfMonth();d<=c&&(a||!d.isAfter("today"));){var e=$("#timecard-li-clone").clone().removeAttr("id").removeClass("hide");e.find(".time").html(d.format("{M}-{d}"));d.isWeekend()&&(e.addClass("holiday"),
e.find(".signout").addClass("hide"));d.isToday()&&(e.addClass("today"),e.find(".time").html(d.format("\u4eca\u5929")));d.isYesterday()&&(e.addClass("yesterday"),e.find(".time").html(d.format("\u6628\u5929")));e.addClass(d.format("{M}-{d}"));var f=e.find(".signin"),n=e.find(".signout");f.addClass("CHECKIN");n.addClass("CHECKOUT");b.prepend(e);d.addDays(1)}},loadByMonth:function(c){var b=this;b.map&&b.map.clearOverlays();$("#mapModal").find(".description").html(b.userName+"\u7684\u8003\u52e4\u8f68\u8ff9");
b.createTimecardLis(c);b.model.holidays(c,function(a){var d=a.configurations;if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];$("#mapModal").find(".timecard-info").data(f.configKey,f.configValue)}if(a=a.workdays)for(e=0;e<a.length;e++)d=a[e],f=$("#mapModal").find(".timecard-info").find("."+Date.create(d.workdayDate).format("{M}-{d}")),d.isholiday?f.addClass("holiday"):f.removeClass("holiday");$("#mapModal").find(".timecard-info .timecard-li").each(function(){var a=$(this);a.hasClass("holiday")?
($(a.find(".state")[0]).html("\u4f11\u606f\u65e5"),$(a.find(".state")[1]).html(""),a.find(".state").removeClass("miss"),a.find(".state").addClass("holiday")):(a.find(".signin").find(".state").html("\u672a\u7b7e\u5230"),a.find(".signout").find(".state").html("\u672a\u7b7e\u9000"))});b.model.loadTimecards(b.userId,c,function(a){if(a=a.timecards)for(var b=0;b<a.length;b++){var d=a[b];if(d.type){var c=Date.create(d.addTime),e=$("#mapModal").find(".timecard-info").find("."+c.format("{M}-{d}"));1==e.size()&&
-1==e.find(".time").text().indexOf(":")&&("CHECKIN"==d.type&&(e.find(" .CHECKIN .address").html(d.checkAddress).attr("title",d.checkAddress),e.find(" .CHECKIN").data("longitude",d.longitude),e.find(" .CHECKIN").data("latitude",d.latitude),e.find(" .CHECKIN .state").removeClass("miss"),e.find(" .CHECKIN .state").addClass("normal-checkin").html("\u5df2\u7b7e\u5230: "+c.format("{HH}:{mm}"))),"CHECKOUT"==d.type&&(e.find(" .CHECKOUT .address").html(d.checkAddress).attr("title",d.checkAddress),e.find(" .CHECKOUT").data("longitude",
d.longitude),e.find(" .CHECKOUT").data("latitude",d.latitude),e.find(" .CHECKOUT .state").removeClass("miss"),e.find(" .CHECKOUT .state").addClass("normal-checkout").html("\u5df2\u7b7e\u9000:"+c.format("{HH}:{mm}"))))}}})})},remove:function(){f.removeDatepicker($("#map-month"));$("#mapModal").off(".mapModal");$("#mapModal").remove();this.model=null}});m.exports=q});
define("teams/component/formtagmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:"1",pageSize:"2",initialize:function(f){this.targetId=f.targetId;this._module=f.module},queryMyFormTags:function(f,e){$.ajax({type:"get",url:"/formtag/queryMyFormTags.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},unlink:function(f,e){$.ajax({type:"post",url:"/formtag/unlink.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},link:function(f,e){$.ajax({type:"post",url:"/formtag/link.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},updateTag:function(f,e){$.ajax({type:"post",url:"/formtag/updateTag.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},create:function(f,e){$.ajax({type:"post",url:"/formtag.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteTag:function(f,e){$.ajax({type:"post",url:"/formtag/deleteTag.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryExistTags:function(f,e){$.ajax({type:"post",url:"/formtag/queryExistTags.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},links:function(f,e,c){$.ajax({type:"post",url:"/formtag/link.json",dataType:"json",data:{ids:f,targetId:this.targetId,oldTagIds:e,module:this._module},success:function(b){c&&c(b)}})},loadSelectTag:function(f,e,c){$.ajax({type:"get",url:"/formtag/loadTags.json",dataType:"json",data:{pageNo:1,pageSize:500,privacy:f,keywords:e},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/component/guidemodel",function(h,q,m){h=Backbone.Model.extend({flag:!1,id:"",initialize:function(f){this.module=f.module},deleteConfig:function(f){$.ajax({type:"POST",url:"/base/configuration/"+this.id+".json",dataType:"json",data:{_method:"DELETE"},success:function(e){f&&f(e)}})}});m.exports=h});
define("teams/component/validation",["teams/utils"],function(h,q,m){var f=h("teams/utils"),e={mobile:function(a){var b=!1;/^13\d{9}$/.test(a)&&(b=!0);/^14\d{9}$/.test(a)&&(b=!0);/^15\d{9}$/.test(a)&&(b=!0);/^18\d{9}$/.test(a)&&(b=!0);/^17\d{9}$/.test(a)&&(b=!0);return b},tel:function(a){return/(^(\d{7,8})$)|(^(\d{3,4})-(\d{7,8})$)|(^(\d{3,4})-(\d{7,8})-(\d{1,4})$)|(^(\d{7,8})-(\d{1,4})$)|(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/.exec(a)?!0:!1},name:function(a){return/^([\u2e80-\u9fff]+){2,}$|^([a-zA-Z]+[\s.]?){0,4}[a-zA-Z]+$/.exec(a)?
!0:!1},company:function(a){return/^([\u2e80-\u9fff]+){2,}$|^([a-zA-Z]+[\s.]?){0,}[a-zA-Z]+$/.exec(a)?!0:!1},teamName:function(a){return/^[\u4e00-\u9fa5aa-zA-Z\d\(\)\uFF08\uFF09]+$/.exec(a)?!0:!1},email:function(a){return/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/.exec(a)?
!0:!1},emailOrMobile:function(a){return-1!=a.indexOf("@")?this.email(a):this.mobile(a)},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.exec(a)?!0:!1},degit:function(a){return/^\d+$/.exec(a)?!0:!1},parseISO8601:function(a){var b=new Date(NaN),c=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/.exec(a);c&&(a=+c[2],b.setFullYear(c[1],a-1,c[3]),a!=b.getMonth()+1&&b.setTime(NaN));return b},date:function(a){return!/Invalid|NaN/.test(this.parseISO8601(a).toString())},dateTime:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2} (?:(?:0?|1)\d|2[0-3]):[0-5]\d$/.test(a)},
dateISO:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2} (?:(?:0?|1)\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(a)},code:function(a){return/^[0-9]\d{5}(?!\d)$/.test(a)},fax:function(a){return/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/.test(a)},url:function(a){return-1==a.indexOf(".")?!1:/^((https|http|ftp|rtsp|mms)?:\/\/)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((\/?)|(\/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+\/?)$/.test(a)}},
c={mobile:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u53f7\u7801",tel:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u56fa\u5b9a\u7535\u8bdd",name:"\u59d3\u540d\u8f93\u5165\u4e0d\u6b63\u786e",company:"\u56e2\u961f\u8f93\u5165\u4e0d\u6b63\u786e",teamName:"\u8bf7\u8f93\u5165\u4ee5\u4e2d\u6587\u3001\u82f1\u6587\u3001\u6570\u5b57\u6216\u62ec\u53f7\u7ec4\u5408\u7684\u56e2\u961f\u540d\u79f0",email:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e",degit:"\u53ea\u80fd\u4e3a\u6574\u578b",number:"\u53ea\u80fd\u4e3a\u7cbe\u5ea6\u4e24\u4f4d\u5c0f\u6570, \u5982:1.11",
date:"\u5fc5\u987b\u4e3a\u65e5\u671f\u683c\u5f0f, \u5982:2013-01-01",dateTime:"\u5fc5\u987b\u4e3a\u65e5\u671f\u65f6\u95f4\u683c\u5f0f, \u5982:2013-01-01 12:01",dateISO:"\u5fc5\u987b\u4e3a\u65e5\u671f\u65f6\u95f4\u683c\u5f0f, \u5982:2013-01-01 12:01:01",code:"\u90ae\u7f16\u53ea\u80fd\u4e3a6\u4f4d\u6570\u5b57",fax:"\u4f20\u771f\u683c\u5f0f\u4e0d\u6b63\u786e",url:"\u7f51\u5740\u4e0d\u6b63\u786e",emailOrMobile:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801"},b={validate:function(a){var d=
a.attr("v-required"),c=$.trim(a.val());a.removeClass("error");return d&&!c?(a.addClass("error"),!1):b.dataValidate(a)},formValidate:function(a){var d=!0;a.find("input,textarea").each(function(){var a=$(this);b.validate(a)||(d=!1)});return d},formValidateImm:function(a){var d=!0;a.find("input,textarea").each(function(){var a=$(this),c=a.attr("v-required"),e=$.trim(a.val()),k=a.attr("v-message-name");a.removeClass("error");if(c&&!e)return a.addClass("error"),k?f.notify("\u8bf7\u8f93\u5165"+k):f.notify("\u8bf7\u8f93\u5165\u5fc5\u586b\u9879"),
a.focus(),d=!1;if(!b.dataValidate(a))return a.focus(),d=!1});return d},formDataValidate:function(a){var d=!0;a.find("input,textarea").each(function(){var a=$(this);b.dataValidate(a)||(d=!1)});return d},dataValidate:function(a){var b=a.attr("v-name"),g=a.attr("v-maxlength"),l=a.attr("v-minlength"),n=a.attr("v-equalTo"),k=$.trim(a.val());a.removeClass("error");if($.trim(k)){if(l&&k&&k.length<l)return f.notify("\u6700\u5c0f\u957f\u5ea6\u4e3a"+l),a.addClass("error"),!1;if(g&&k&&k.length>g)return f.notify("\u6700\u5927\u957f\u5ea6\u4e3a"+
g),a.addClass("error"),!1;if(n&&$(n).val()!=a.val())return f.notify("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"),a.addClass("error"),!1;if($.isFunction(e[b])&&!e[b](k))return f.notify(c[b]),a.addClass("error"),!1}return!0},flowFormValidate:function(a){var d=!0;a.find("input,textarea").each(function(){var a=$(this);b.validate(a)||(d=!1)});if(d){var c=0;0<$("#flowList").length&&($("#flowList").find("input,textarea").each(function(){$(this).val()?d=!0:c++}),c==$("#flowList").find("input,textarea").length&&
(f.notify("\u660e\u7ec6\u81f3\u5c11\u586b\u5199\u4e00\u9879"),d=!1))}return d},emptyFormValidate:function(a){var b=!0;if(0<$("#flowList").length&&($("#flowList").find("input:enabled[type!\x3dhidden][type!\x3dradio],textarea").each(function(){if($(this).val())return b=!1}),1==b))return f.notify("\u8868\u5355\u660e\u7ec6\u81f3\u5c11\u6dfb\u52a0\u4e00\u9879"),b;a.find("input:enabled[type!\x3dhidden][type!\x3dradio],textarea").each(function(){if($(this).val())return b=!1});1==b&&f.notify("\u672a\u6dfb\u52a0\u6570\u636e,\u4e0d\u9700\u4fdd\u5b58");
return b},timeCompare:function(a,b){var c=a.data("date")||a.val(),e=b.data("date")||b.val(),f=Date.create(c),k=Date.create(e);return c&&e&&f>k?!1:!0},flowTimeCompare:function(a){var d=a.attr("name"),c=!b.timeCompare($("input[name\x3dSTART_TIME]"),$("input[name\x3dEND_TIME]"));if("START_TIME"==d){if(c)return a.val(""),f.notify("\u5f00\u59cb\u65f6\u95f4\u5fc5\u987b\u5c0f\u4e8e\u7ed3\u675f\u65f6\u95f4"),!1}else if("END_TIME"==d&&c)return a.val(""),f.notify("\u7ed3\u675f\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e\u5f00\u59cb\u65f6\u95f4"),
!1;return!0}};m.exports=b});
define("teams/component/invitemodalview",["teams/utils","teams/component/invitemodel","teams/component/validation"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/invitemodel"),c=h("teams/component/validation");h=Backbone.View.extend({initialize:function(b){this.el="#invite-modal";this.model=new e;$("body").append(f.template("component.inviteModal"));ZeroClipboard.config({swfPath:"js/clipboard.swf",activeClass:"zeroclipboard-is-active"})},delegateEvents:function(){var b=this;
$("#invite-modal").on("hidden.bs.modal",function(){b.remove()});$(b.el).on("click.inviteModal","#invite-m-submit",function(){for(var a=!1,d=1;5>=d;d++){var e=$(b.el).find('input[id\x3d"inputEmail'+d+'"]').val(),l=$(b.el).find('input[id\x3d"inputEmail'+d+'"]').attr("placeholder");if(e&&e!=l){a=!0;break}}if(!a)return f.notify("\u8bf7\u81f3\u5c11\u8f93\u5165\u4e00\u6761\u9080\u8bf7\u4fe1\u606f"),$(b.el).find('input[id\x3d"inputName1"]').focus(),!1;for(d=1;5>=d;d++)if(a=$(b.el).find('input[id\x3d"inputEmail'+
d+'"]'),e=a.val(),l=a.attr("placeholder"),e&&e!=l&&!c.formValidateImm($("#invite-modal .form-invite"+d)))return!1;e="";for(d=1;5>=d;d++){var n=$(b.el).find('input[id\x3d"inputName'+d+'"]'),k=$(b.el).find('input[id\x3d"inputEmail'+d+'"]'),a=$.trim(n.val()),l=$.trim(k.val()),n=n.attr("placeholder"),k=k.attr("placeholder");a==n&&(a="");l==k&&(l="");l&&""!=l&&(e+='{"inviteNo":'+d+',"invitee":"'+a+'","contact":"'+l+'"},')}e=e.substring(0,e.length-1);b.model.saveInvites('{"inviteInfos":['+e+"]}",function(a){a.inviteInfos&&
""!=a.inviteInfos&&b.inviteRemind(a.inviteInfos)})});$(b.el).on("click.inviteModal","#invite-m-continue",function(){$(b.el).find(".invite-inputs").removeClass("hide");$(b.el).find(".modal-remind").addClass("hide");$(b.el).find("#invite-m-submit").removeClass("hide");$(b.el).find("#invite-m-continue").addClass("hide");$(b.el).find("#invite-clear-btn").removeClass("hide").trigger("click")});$(b.el).on("click.inviteModal","#invite-m-cancel",function(){b.close()});$(b.el).on("click.inviteModal","#invite-clear-btn",
function(){$(b.el).find("input").val("");$(b.el).find(".icon1-ok").addClass("hide");$(b.el).find(".icon1-cancel").addClass("hide");$(b.el).find(".i-tips").addClass("hide")});if(window.clipboardData)$(b.el).on("click.inviteModal","a.j_invite_link",function(){window.clipboardData.setData("text",$(this).attr("data-entity"))});$(b.el).on("click.inviteModal",function(a){a.stopPropagation()});$("body").on("keydown.inviteModal",function(a){27==a.which&&b.close()})},render:function(){$(this.el).modal("toggle");
var b=$(this.el).find("a.j_invite_link");b.attr("data-entity",TEAMS.passportUrl+"/join?key\x3d"+TEAMS.currentTenant.tenantKey);window.clipboardData||this.copyLink(b)},copyLink:function(b){var a=new ZeroClipboard(b);a.on("ready",function(){a.on("copy",function(a){a.clipboardData.setData("text/plain",b.attr("data-entity"))});a.on("aftercopy",function(a){f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")});a.on("error",function(a){f.notify(a.messsage)})})},inviteRemind:function(b){var a=
$(this.el);a.find(".remind-list").empty();for(var c=0;c<b.length;c++){var e=a.find("#invite-remind-clone").clone().removeAttr("id"),f=b[c].msgType,n=b[c].invitee,k=b[c].contact;n||(n="xx");e.find(".invite-user").html(n);e.find(".invite-email").html(k);"success"==f?b[c].url&&(e.find(".j_url_tip").removeClass("hide"),e.find(".j_invite_url").text(b[c].url)):e.find(".tip-failure").removeClass("hide");e.find(".i-tips").removeClass("hide").html(b[c].message);a.find(".remind-list").append(e)}a.find(".invite-inputs").addClass("hide");
a.find(".modal-remind").removeClass("hide");a.find("#invite-m-submit").addClass("hide");a.find("#invite-m-continue").removeClass("hide");a.find("#invite-clear-btn").addClass("hide")},close:function(){$("#invite-modal").modal("hide")},remove:function(){$("body").off(".inviteModal");$(this.el).off(".inviteModal");$(this.el).remove()}});m.exports=h});
define("teams/component/tag",["teams/utils","teams/component/typeahead","teams/component/tagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/tagmodel");h=Backbone.View.extend({el:"",targetId:"",initialize:function(b){this.container=b.container;this.ccontainer=b.ccontainer;this.el=(this.parentEl=b.parentEl)?this.parentEl+" "+this.container:this.container;this.cel=this.parentEl?this.parentEl+" "+this.ccontainer:this.ccontainer;this.targetId=b.targetId;
this._module=b.module;this.callbacks=b.callbacks;$(this.el).html(f.template("component.tag",{panel:"tag"}));this.retpl($(this.el),!0);$(this.cel).html(f.template("component.tag",{panel:"ctag"}));this.retpl($(this.cel),!1);this.model=new c(b)},render:function(b){var a=$(this.el),c=$(this.cel);a.find(".entity-container").attr({"data-url":"/tag/unlink/{id}/"+this.targetId+".json","target-id":this.targetId,module:this._module});c.find(".entity-container").attr({"data-url":"/tag/unlink/{id}/"+this.targetId+
".json","target-id":this.targetId,module:this._module});if(b){var e=[],f=[],n=0,k=0;if("workflow"==this._module&&0<a.find(".entity-item").length)for(var r=0;r<b.length;r++){var p=b[r];if(p.privacy){var h=!0;a.find(".entity-item").each(function(){p.id==$(this).find("a").attr("data-value")&&(h=!1)});h&&e.push("\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router' title\x3d'\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879' href\x3d'/tag/privacy/"+p.id+"' data-value\x3d'"+p.id+
"'\x3e"+p.name+"\x3c/a\x3e\x3c/span\x3e")}}else if("workflow"==this._module&&0<c.find(".entity-item").length)for(r=0;r<b.length;r++)p=b[r],p.privacy||(h=!0,c.find(".entity-item").each(function(){p.id==$(this).find("a").attr("data-value")&&(h=!1)}),h&&f.push("\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router' title\x3d'\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879' href\x3d'/tag/common/"+p.id+"' data-value\x3d'"+p.id+"'\x3e"+p.name+"\x3c/a\x3e\x3c/span\x3e"));else for(r=
0;r<b.length;r++)p=b[r],p.privacy?(n++,e.push("\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router ' title\x3d'\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879' href\x3d'/tag/privacy/"+p.id+"' data-value\x3d'"+p.id+"'\x3e"+p.name+"\x3c/a\x3e\x3c/span\x3e")):(k++,f.push("\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router' title\x3d'\u70b9\u51fb\u8fdb\u5165\u6807\u7b7e\u7684\u76f8\u5173\u4e8b\u9879' href\x3d'/tag/common/"+p.id+"' data-value\x3d'"+p.id+"'\x3e"+p.name+"\x3c/a\x3e\x3c/span\x3e"));
a.find(".entity-container").append(e.join(""));c.find(".entity-container").append(f.join(""));0<n&&(a.removeClass("hide"),$(this.parentEl).find($(this.el).attr("icon")).parent().addClass("hide"));0<k&&(c.removeClass("hide"),$(this.parentEl).find($(this.cel).attr("icon")).parent().addClass("hide"))}},delegateEvents:function(){var b=this;$(b.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();a=$(this).prevAll("a").attr("id");var c=$(this).prevAll("a").attr("data-value"),
e=$(this).parents(".entity-container"),l=e.attr("data-url");if(l&&c){var n=$(this).parent(),k=e.data("param")||{};k._method="delete";a=function(a){a&&$.ajax({type:"POST",dataType:"json",data:k,url:l.replace("{id}",c),success:function(a){n.remove();e.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");b.callbacks&&b.callbacks.unlink&&b.callbacks.unlink(c,a.streams||a.stream)}})};e.attr("data-noConfirm")?
a(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",a)}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),e.trigger("removeEntity",a))});e({el:b.el+" #typeahead-tag",callback:function(a){"new"==a.id?b.create(a):b.link(a)}});e({el:b.cel+" #typeahead-tag",callback:function(a){"new"==a.id?b.create(a):b.link(a)}})},retpl:function(b,a){a?(b.find(".tag-controls").addClass("tag-controls-mine"),b.find(".j_tag_label").text("\u6211\u7684\u6807\u7b7e:"),b.find("#typeahead-tag").attr({placeholder:"\u8f93\u5165\u6211\u7684\u6807\u7b7e",
privacy:1})):(b.find(".tag-controls").addClass("tag-controls-public"),b.find(".j_tag_label").text("\u516c\u5171\u6807\u7b7e:"),b.find(".control-label i").removeClass().addClass("graph graph-16-commonlabel"),b.find("#typeahead-tag").attr({placeholder:"\u8f93\u5165\u516c\u5171\u6807\u7b7e",privacy:0}))},link:function(b){var a=this,c=this.model,e=!1,l=b.privacy?a.el:a.cel;$(l).find("#tags .entity-item a").each(function(){$(this).attr("data-value")==b.id&&(e=!0,f.notify("\u6807\u7b7e\u5df2\u5b58\u5728"))});
e||c.link(b,function(c){a.renderTag(l,b);$(a.parentEl+" #stream").trigger("insertStream",c.stream);a.callbacks&&a.callbacks.link&&a.callbacks.link(b.id,c.stream)})},create:function(b){var a=this,c=b.privacy?a.el:a.cel;this.model.create(b,function(b){var e=b.tag;a.renderTag(c,e);$(a.parentEl+" #stream").trigger("insertStream",b.stream);$("#left").trigger("refresh","tag");f.notify("\u6807\u7b7e\u521b\u5efa\u6210\u529f");a.callbacks&&a.callbacks.link&&a.callbacks.link(e.id,b.stream)})},renderTag:function(b,
a){var c="\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router' href\x3d'/tag/"+(a.privacy?"privacy":"common")+"/"+a.id+"' data-value\x3d'"+a.id+"'\x3e"+a.name+"\x3c/a\x3e\x3c/span\x3e";$(b).find(".entity-container").append(c)},getLinkIds:function(){var b=[];$(this.el).find(".entity-item").each(function(){b.push($(this).find("a").attr("data-value"))});return b}});m.exports=h});
define("teams/component/entityremindview",["teams/utils","teams/component/typeahead","teams/component/entityremindmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/component/entityremindmodel");h=Backbone.View.extend({initialize:function(c){this.parentEl=c.parentEl;this.container=c.container;this.entityId=c.entityId;this.serverPath=c.serverPath;this._module=c.module;this.el=this.parentEl?this.parentEl+" "+this.container:this.container;this.model=new e({entityId:this.entityId,
_module:this._module,serverPath:this.serverPath});$(this.el).html(f.template("component.entityremind",{panel:this._module}))},delegateEvents:function(){var c=this;$(c.el).off("click","#createRemind").on("click","#createRemind",function(b){b=$(this);c.checkSave(b)});$(c.el).off("click","#participantsRemind").on("click","#participantsRemind",function(b){b=$(this);c.checkSave(b)});$(c.el).off("click","#primaryRemind").on("click","#primaryRemind",function(b){b=$(this);c.checkSave(b)});$(c.el).off("change",
"#remindTime").on("change","#remindTime",function(){"cancel"==$(c.el).find("#remindTime").val()?$(c.el).find("#remindEntry").addClass("hide"):$(c.el).find("#remindEntry").removeClass("hide");c.checkSave()})},render:function(c,b){this.renderEntityRemind(c,b)},renderEntityRemind:function(c,b){c&&(this.entityRemindId=c.id,$(this.el).find("#remindEntry").removeClass("hide"),$(this.el).removeClass("hide"),$(this.parentEl).find($(this.el).attr("icon")).parent().addClass("hide"),$(this.parentEl).find(".j_detailCommands").removeClass("hide"));
c&&c.time&&c.type&&$(this.el).find("#remindTime").val(c.time+"_"+c.type);if(b)for(var a=0;a<b.length;a++)"create"==b[a].remind&&$(this.el).find("#createRemind").attr("checked","checked"),"participants"==b[a].remind&&$(this.el).find("#participantsRemind").attr("checked","checked"),"primary"==b[a].remind&&$(this.el).find("#primaryRemind").attr("checked","checked")},loadEntityRemind:function(){var c=this;this.model.loadEntityRemind(function(b){b&&(b.creater&&$(c.el).find("#createRemind").attr("checked",
"checked"),b.participants&&$(c.el).find("#participantsRemind").attr("checked","checked"),b.primary&&$(c.el).find("#primaryRemind").attr("checked","checked"),b.entityRemindTime&&b.entityRemindType&&$(c.el).find("#remindTime").val(b.entityRemindTime+"_"+b.entityRemindType),b.entityRemindId&&(c.entityRemindId=b.entityRemindId,$(c.el).find("#remindEntry").removeClass("hide"),$(c.el).removeClass("hide"),$(c.parentEl).find($(c.el).attr("icon")).parent().addClass("hide"),$(c.parentEl).find(".j_detailCommands").removeClass("hide")))})},
checkSave:function(c){var b=this,a=b.model,d=$(b.el).find("#createRemind"),e=$(b.el).find("#participantsRemind"),l=$(b.el).find("#primaryRemind"),n,k,r;d&&d.get(0)&&(n=d.get(0).checked?"create":null);e&&e.get(0)&&(k=e.get(0).checked?"participants":null);l&&l.get(0)&&(r=l.get(0).checked?"primary":null);d=$(b.el).find("#remindTime").val();"cancel"==d?b.entityRemindId&&a.cancelRemind(function(a){f.notify("\u4e8b\u9879\u63d0\u9192\u5df2\u53d6\u6d88");$(b.el).find("#remindTime").val("cancel");$(b.el).find("#remindEntry").addClass("hide");
b.entityRemindId=null}):(n||k||r)&&d?(e=d.split("_"),d=e[0],e=e[1],b.checkParam(d,e,c)&&a.saveAllUsers(n,k,r,d,e,function(a){if(a&&a.entityRemindId){b.entityRemindId=a.entityRemindId;var c;a=b._module;"calendar"==a?c=$(b.parentEl).find("#start").val():"task"==a?c=$(b.parentEl).find("#dueDate").val():"mainline"==a&&(c=$(b.parentEl).find("#endTime").val());c&&f.notify("\u4e8b\u9879\u63d0\u9192\u8bbe\u7f6e\u6210\u529f")}})):b.entityRemindId&&a.cancelRemind(function(a){f.notify("\u4e8b\u9879\u63d0\u9192\u5df2\u53d6\u6d88");
$(b.el).find("#remindTime").val("cancel");$(b.el).find("#remindEntry").addClass("hide");b.entityRemindId=null})},checkParam:function(c,b,a){var d=this._module;if(c){if(/^[1-9]+[0-9]*]*$/.test(c)){var e,l;"calendar"==d?e=$(this.parentEl).find("#start").val():"task"==d?e=$(this.parentEl).find("#dueDate").val():"mainline"==d&&(e=$(this.parentEl).find("#endTime").val());if(e)return c=parseInt("-"+c),e=Date.create(e),"minute"==b?l=Date.create(e.addMinutes(c)):"hour"==b?l=Date.create(e.addHours(c)):"day"==
b&&(l=Date.create(e.addDays(c))),l.isBefore(new Date)?(f.notify("\u63d0\u9192\u65e5\u671f\u4e0d\u53ef\u5728\u4eca\u5929\u4e4b\u524d"),a&&a.removeAttr("checked"),!1):!0;"calendar"==d?f.notify("\u8bf7\u8bbe\u7f6e\u65e5\u7a0b\u7684\u8d77\u59cb\u65f6\u95f4"):"task"==d?f.notify("\u8bf7\u8bbe\u7f6e\u4efb\u52a1\u7684\u5230\u671f\u65e5"):"mainline"==d?f.notify("\u8bf7\u8bbe\u7f6e\u9879\u76ee\u7684\u5230\u671f\u65e5"):f.notify("\u8bf7\u8bbe\u7f6e\u65e5\u671f");a&&a.removeAttr("checked");return!1}f.notify("\u63d0\u524d\u65f6\u95f4\u5fc5\u987b\u4e3a\u6b63\u6574\u6570");
return!1}f.notify("\u8bf7\u8f93\u5165\u63d0\u524d\u65f6\u95f4");a&&a.removeAttr("checked");return!1},remove:function(){}});m.exports=h});
define("teams/component/commentview","teams/face/emojiarea teams/utils teams/component/typeahead teams/component/atmeview teams/component/commentmodel teams/component/commentreplay teams/component/validation teams/base/preview".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils");h("teams/component/typeahead");var c=h("teams/component/atmeview"),b=h("teams/component/commentmodel"),a=h("teams/component/commentreplay"),d=h("teams/component/validation"),g=h("teams/base/preview");
h=Backbone.View.extend({initialize:function(d){this.container=d.container;this.el=(this.parentEl=d.parentEl)?this.parentEl+" "+this.container:this.container;this.showComment=d.showComment;this.hideInput=d.hideInput;this.pageComment=d.pageComment;this.subtargetId=d.subtargetId||"";this.serverPath=d.serverPath;this.targetId=d.targetId;this._module=d.module;$(this.el).html(e.template("base.comment"));this.hideInput&&$(this.el).find(".j_comment-input").addClass("hide");this.model=new b({module:this._module,
targetId:this.targetId,serverPath:this.serverPath});this.replay=new a({container:this.el,module:this._module,targetId:this.targetId,subtargetId:this.subtargetId,serverPath:this.serverPath});this.atmeview=new c({$input:$(this.el+" #comment-textarea")});f($);$(this.el+" #comment-textarea").emojiarea({buttonClass:"comment-emoji",emojiHeight:-210,emojiLeft:-70,buttonRoot:this.el+" .comment-option",buttonChild:".attachment-div"})},delegateEvents:function(){var a=this,b=this.model,g=$(a.el);void 0!=this.uploader&&
this.uploader.destroy();var f=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:a.el+" #comment-attach",container:a.el+" #attachment-div",max_file_size:"normal"==TEAMS.currentTenant.status?"50M":"20M",url:"/base/upload.json?refId\x3d"+a.targetId+"\x26module\x3d"+a._module+"\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.flash.swf"});f.init();f.bind("FilesAdded",function(a,b){$.each(b,function(a,b){g.find("#comment-attachments").append(e.template("base.newattachment",
b))});a.refresh();var c=g.find("#comment-textarea");c.val()&&c.val()!=c.attr("placeholder")||c.val("\u4e0a\u4f20\u4e86\u6587\u4ef6")});f.bind("UploadProgress",function(a,b){g.find("#"+b.id+" i").html(b.percent+"%")});f.bind("Error",function(a,b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});f.bind("FileUploaded",function(a,b,c){a=jQuery.parseJSON(c.response).fileObj;
g.find("#"+b.id+" i").html("100%");g.find("#"+b.id).attr({"data-value":a.id});g.find("#"+b.id).addClass("remoteDownload").data("dlid",a.id)});f.bind("UploadComplete",function(b,c){var d=[];g.find("#comment-attachments .entity-item a").each(function(a){a=$(this).attr("data-value");d.push(a)});var e=g.find("#comment-textarea").val(),f="",n="";try{f=g.find("#comment-visittype a.selectui-result").attr("data-value"),n=g.find("#comment-contact a.selectui-result").attr("data-value")}catch(r){}a.saveComment(e,
f,n,d)});g.on("removeEntity.commentView","#comment-attachments",function(a,b){var c=f.getFile(b);f.removeFile(c)});g.on("focus.commentView","#comment-textarea",function(){a.atmeview.render()});"customer"==a._module&&(g.on("click.commentView","#comment-visittype ul li a",function(){var a=$(this);g.find("#comment-visittype .selectui-result").html(a.html()+'\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e');g.find("#comment-visittype .selectui-result").attr("data-value",a.attr("value"));g.find("#comment-visittype .selectui-result").attr("data-name",
a.html())}),g.on("click.commentView","#comment-contact ul li a",function(){var a=$(this);g.find("#comment-contact .selectui-result").html(a.html()+'\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e');g.find("#comment-contact .selectui-result").attr("data-value",a.attr("value"));g.find("#comment-contact .selectui-result").attr("data-name",a.html())}),g.on("focus.commentView",".edit-content",function(){a.atmeEditView.render()}));g.on("click.commentView","#comment-submit:not([disabled])",function(){$("#comment-submit").attr("disabled",
!0);var b=(new Date).getTime(),c=$("#comment-submit").attr("ctime");if(c&&500>b-c)return $("#comment-submit").removeAttr("disabled"),!1;$("#comment-submit").attr("ctime",b);if(!d.formValidate($(this).parents(".comment-input")))return!1;if(!$(this).data("commited")){$(this).data("commited",!0);if(0<g.find("#comment-attachments .entity-item a").length)a.uploader.start();else{var b=g.find("#comment-textarea").val(),e=c="";try{c=g.find("#comment-visittype a.selectui-result").attr("data-value"),e=g.find("#comment-contact a.selectui-result").attr("data-value")}catch(f){}var n=
g.find("#comment-textarea").attr("placeholder");b==n&&(b="");a.saveComment(b,c,e)}$("#comment-submit").removeAttr("disabled");return!1}if(0<g.find("#comment-attachments .entity-item a").length)a.uploader.start();else{b=g.find("#comment-textarea").val();e=c="";try{c=g.find("#comment-visittype a.selectui-result").attr("data-value"),e=g.find("#comment-contact a.selectui-result").attr("data-value")}catch(r){}n=g.find("#comment-textarea").attr("placeholder");b==n&&(b="");a.saveComment(b,c,e)}});g.on("keydown.commentView",
"#comment-textarea",function(a){a.ctrlKey&&13==a.keyCode&&g.find("#comment-submit").click()});g.on("click.commentView",".comment-more",function(){b.pageNo++;var c=$(a.parentEl+" #check-"+a._module),d="";c.find("input[type\x3d'checkbox']:checked").each(function(){d+=$(this).val()+","});var e=a.getSeleted();0<d.length||0<e.length?a.searchByIds(c):a.randerCommentPage()});g.off("input propertychange","#comment-textarea").on("input propertychange","#comment-textarea",function(){var b=a._module+"#"+a.model.targetId,
c=$(this).val();TEAMS.ownCache[b]=c});g.on("click.commentView",".comment-opt.replay",function(){"customer"==a._module&&$(this).parents(".comment-box").find(".replay-box").is(":hidden")&&$(this).parents(".comment-box").find(".edit-div").remove();a.replay.showReplay($(this));0==$(this).parents(".comment-box").find(".commentreplay-emoji").length&&$(this).parents(".comment-box").find("#at-comment-content").emojiarea({wysiwyg:!1,emojiHeight:-225,emojiLeft:-70,buttonClass:"commentreplay-emoji",buttonRoot:"#"+
$(this).parents(".comment-box").attr("id"),buttonChild:".comment-comment-btn-div"})});g.on("click.commentView",".comment-opt.transmit",function(){"customer"==a._module&&$(this).parents(".comment-box").find(".transmit-box").is(":hidden")&&$(this).parents(".comment-box").find(".edit-div").remove();a.replay.showTransmit($(this))});g.on("insertComment.commentView",function(b,c){$(a.el).find(".comment-container").prepend(a.renderComment(c));"customer"==a._module&&$(a.el).find("#"+c.id).data("commentData",
c)});"customer"==a._module&&(g.on("click.commentView",".comment-opt.edit",function(){var b=$(this).closest(".comment-item"),d=b.data("commentData");b.attr("id");b.find(".replay-box").attr("style","display: none;");b.find(".transmit-box").attr("style","display: none;");var e=d.content;if(0>=b.find(".edit-div").size()){var g={};if(d.userData){var f=[];if(f=eval(d.userData))for(var k=0;k<f.length;k++)f[k]&&f[k].userIdIndex&&0!=f[k].userIdIndex&&(e=e.substring(0,f[k].userIdIndex-1)+"@"+f[k].userName+
e.substring(f[k].userIdIndex-1),g["@"+f[k].userName]="@"+f[k].userName)}for(k in g)e=e.replace(k,g[k]);b.find(".ft").after('\x3cdiv class\x3d"edit-div clearfix" style\x3d"background-color: #f2f2f2;padding: 5px 8px;"\x3e\x3cdiv class\x3d"content-div" style\x3d"margin-top: 10px;"\x3e\x3ctextarea rows\x3d"3" class\x3d"edit-content bluebox form-control" v-maxlength\x3d"2000" style\x3d"width:100%;overflow: hidden; word-wrap: break-word; resize: none; height: 35px;"\x3e'+e+'\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-div" style\x3d"margin-top: 3px;"\x3e\x3ca class\x3d"eidt-btn btn btn-sm" style\x3d"margin-right: 5px;"\x3e\u4fee\u6539\x3c/a\x3e\x3ca class\x3d"edit-cancel btn btn-sm" style\x3d"margin-right: 5px;"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.find(".edit-content").autosize();a.atmeEditView=new c({$input:b.find(".edit-content")})}else b.find(".edit-div").remove(),a.atmeEditView&&(a.atmeEditView.remove(),a.atmeEditView=null)}),g.on("click.commentView",".eidt-btn",function(){var b=$(this).closest(".comment-item");b.find(".comment-cal.time").html();b.find(".eidt-btn").attr("disabled","disabled");var c=b.attr("id"),d=b.find(".edit-content").val().trim(),g=d;if(d){var f=[],k=b.find(".edit-content").data("userData");k&&(f=k,f.concat());var n=
b.data("commentData").userData,n=eval(n),k=[];if(f&&n&&0<n.length)for(var r=0;r<n.length;r++){var h={};h.atIndex=n[r].userIdIndex;h.userId=n[r].userId;h.userName=n[r].userName;k.push(n[r].userId);f.push(h)}n=[];h=[];if(f)for(r=0;r<f.length;r++)if(-1!=d.indexOf(f[r].userName)){var m="@"+f[r].userName;if(-1!=d.indexOf(m)){n.push(f[r].userId);var E=g.indexOf(m)+1;E==f[r].atIndex?h.push(f[r].userId+"-"+f[r].atIndex):h.push(f[r].userId+"-"+E);d=d.replace(new RegExp(m,"gm"),"")}}a.model.updateById(c,d,
k,n,h,function(d){if("success"==d.status){e.notify("\u4fee\u6539\u6210\u529f");$(a.el).find("#"+c).data("commentData",d.comment);b.find(".edit-div").remove();a.atmeEditView&&(a.atmeEditView.remove(),a.atmeEditView=null);d=d.comment;var g=d.content,f={};if(d.userData){var k=[];if(k=eval(d.userData))for(var n=0;n<k.length;n++)k[n]&&k[n].userIdIndex&&0!=k[n].userIdIndex&&(g=g.substring(0,k[n].userIdIndex-1)+"@"+k[n].userName+g.substring(k[n].userIdIndex-1),f["@"+k[n].userName]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+
k[n].userId+"'\x3e@"+k[n].userName+"\x3c/a\x3e")}g=e.initMessage(g);for(n in f)g=g.replace(n,f[n]);b.find(".comment-body.content").html($.faceConvert(g))}else"timeOut"==d.status&&e.notify("\u8be5\u8bc4\u8bba\u521b\u5efa\u5df2\u8d85\u8fc710\u5206\u949f\uff0c\u4e0d\u80fd\u7f16\u8f91")})}else e.notify("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),b.find(".eidt-btn").removeAttr("disabled")}),g.on("click.commentView",".edit-cancel",function(){$(this).parents(".edit-div").remove()}))},searchByIds:function(a){var b=
this,c="";$(b.parentEl).find("input[type\x3d'checkbox']:checked").each(function(){c+=$(this).val()+","});a={};a.checkStr=c;a.userIds=b.getSeleted();a.module=b._module;a.targetId=b.targetId;b.model.searchByIds(a,function(a){if(a.page){for(var c=a.page.result,d=[],e=0,g=c.length;e<g;e++)d.push(b.renderComment(c[e]));1==a.page.pageNo&&$(b.el).find(".comment-container").empty();$(b.el).find(".comment-container").append(d.join(""));a.page.hasNext?$(b.el).find(".comment-more").removeClass("hide"):$(b.el).find(".comment-more").addClass("hide")}})},
getSeleted:function(){var a="",b=$(this.parentEl+" #commentor-list").children();if(b&&0<b.length){for(var c=0;c<b.length-1;c++)var d=$(b[c]),a=a+(d.attr("id")+",");b=$(b[b.length-1]);a+=b.attr("id")}return a},render:function(){this.renderCommentAvatar(TEAMS.currentUser,"p4",$(this.el).find(".j_comment_avatar"));$(this.el).find("#comment-textarea").val(TEAMS.ownCache&&TEAMS.ownCache[this._module+"#"+this.model.targetId]);$(this.el).find("#comment-submit").removeClass("hide");$(this.el).find("#comment-attach").removeClass("hide");
"customer"==this._module&&($(this.el).find("#comment-contact").removeClass("hide"),$(this.el).find("#comment-visittype").removeClass("hide"),$(this.el).find("#comment-textarea").attr("placeholder","\u8054\u7cfb\u8bb0\u5f55..."));$(this.el).find("#comment-textarea").autosize({append:"\n"});$(this.el+" #check-"+this._module).removeClass("hide");if(this.showComment){if(this.pageComment&&0<this.pageComment.result.length){for(var a=this.pageComment.result,b=[],c=0,d=a.length;c<d;c++)b.push(this.renderComment(a[c]));
$(this.el).find(".comment-container").append(b.join(""));this.pageComment.hasNext?$(this.el).find(".comment-more").removeClass("hide"):$(this.el).find(".comment-more").addClass("hide")}}else this.randerCommentPage();$(this.el).find(".selectBox_aa").on("click",function(a){if(0<this.className.indexOf("open")){var b=this;$(b.nextSibling).slideUp("fast",function(){$(b).removeClass("open")})}else $(this).addClass("open"),$(this.nextSibling).slideDown("fast");$(this).next().click(function(a){a=a.target;
"A"==a.tagName&&($(a.parentNode.previousSibling).html(a.innerHTML).attr("title",a.innerHTML),$(a).siblings().removeClass("current"),$(a).addClass("current"))});a.stopPropagation()})},renderCommentAvatar:function(a,b,c){if(a){var d="images/avatar.png";a.avatar&&(d=a.avatar[b]&&"/base/download/"+a.avatar[b]||"images/avatar.png");c.find("img").attr("src",d);c.find("img").parent().addClass("usercard-toggle");c.find("img").parent().attr("userid",a.id);a.username&&c.find("img").attr("title",
a.username)}},saveComment:function(a,b,c,d){var g=this,f=this.model,h=$(g.el).find("#comment-textarea").data("userData"),w=[],v=[],x=a;if(h)for(var y=0;y<h.length;y++)if(-1!=a.indexOf(h[y].userName)){var z="@"+h[y].userName+" ";if(-1!=a.indexOf(z)){w.push(h[y].userId);var A=x.indexOf(z)+1;A==h[y].atIndex?v.push(h[y].userId+"-"+h[y].atIndex):v.push(h[y].userId+"-"+A)}a=a.replace(z," ");for(var A="",m=0;m<z.length;m++)A+="X";x=x.replace(z,A)}a&&a.trim()||d?(f.content=a,f.attachments=d||[],f.userIds=
w,f.userIdIndex=v,f.visittype=b||"other",f.visitTypeName=$(g.el).find("#comment-visittype a.selectui-result").attr("data-name"),f.contactid=g.subtargetId||c||"",f.save(function(a){$(g.el).find("#comment-textarea").val("").trigger("autosize.resize");$(g.el).find("#comment-attachments").empty();$(g.el).find(".comment-container").prepend(g.renderComment(a.comment));"customer"==g._module&&$(g.el).find("#"+a.comment.id).data("commentData",a.comment);$(g.el).find(".visittype-combobox option:first").attr("selected",
"selected");$(g.el).find(".contact-combobox option:first").attr("selected","selected");g.insertStream(a.stream);g.addBlogCommentCount();delete TEAMS.ownCache[g._module+"#"+f.targetId];$("#comment-submit").removeAttr("disabled")})):(e.notify("\u8bf7\u586b\u5199\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\u3002"),$(g.el).find("#comment-textarea").val(""),$(g.el).find("#comment-textarea").focus(),$("#comment-submit").removeAttr("disabled"));$(g.el).find("#comment-textarea").data("userData","")},randerCommentPage:function(){var a=
this;this.model.pageQuery({subtargetId:a.subtargetId},function(b){if(b.page){var c=b.page.result;a.nowTimestamp=b.nowTimestamp;for(var d=[],e=0,g=c.length;e<g;e++){var f=c[e];d.push(a.renderComment(f))}$(a.el).find(".comment-container").append(d.join(""));if("customer"==a._module)for(e=0,g=c.length;e<g;e++)f=c[e],$(a.el).find("#"+f.id).data("commentData",f);b.page.hasNext?$(a.el).find(".comment-more").removeClass("hide"):$(a.el).find(".comment-more").addClass("hide");"customer"==a._module?($("#customer-wrap").trigger("commentLoaded.customerView"),
$("#contactDetail").trigger("commentLoaded.ContactDetail")):"production"==a._module&&$(".main").trigger("commentLoaded.Production")}})},insertOneComment:function(a){$(this.el).find(".comment-container").prepend(this.renderComment(a));$(this.el).find("#comment-textarea").val("")},renderComment:function(a){if(!a)return"";var b=a.commentor.username,c=a.content,d=a.addTime,f=a.client,h=$(this.el).find("#comment-clone").clone().removeAttr("id");h.attr("id",a.id);h.find(".comment-user").html(b);if("customer"==
this._module){for(var b=this.options.contactTypes,u="",w=0;w<b.length;w++)if(b[w].markValue==a.visitType){u="\u3010"+b[w].name+"\u3011";break}u&&h.find("#visit_explain").append(u);a.subtargetId&&h.find("#visit_explain").append("\u8054\u7cfb\u3010\x3ca id\x3d'"+a.subtargetId+"'class\x3d'js_contactInfo'\x3e"+a.targetName+"\x3c/a\x3e\u3011")}h.find(".comment-user").attr("userId",a.commentor.id);if(a.parent&&a.parent.commentor&&a.parent.commentor.username){h.find(".parent-comment-body").removeClass("hide");
h.find(".parent-username").html("\u56de\u590d@"+a.parent.commentor.username+": ").attr("title",a.parent.commentor.username).show();h.find(".parent-username").attr("userId",a.parent.commentor.id);u=a.parent.content;b={};if(a.parent.userData){var v=[];if(v=eval(a.parent.userData))for(w=0;w<v.length;w++)v[w]&&(v[w].userIdIndex&&0!=v[w].userIdIndex?(u=u.substring(0,v[w].userIdIndex-1)+"@"+v[w].userName+u.substring(v[w].userIdIndex-1),b["@"+v[w].userName+" "]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+
v[w].userId+"'\x3e@"+v[w].userName+" \x3c/a\x3e"):h.find("#show_at_comment").prepend("\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+v[w].userId+"'\x3e@"+v[w].userName+" \x3c/a\x3e"))}u=e.initMessage(u);for(w in b)u=u.replace(new RegExp(w,"gm"),b[w]);h.find(".parent-content").html($.faceConvert(u)).attr("title",a.parent.content)}h.find(".comment-user").data("commentorId",a.commentor.employeeId);b={};if(a.userData&&(u=[],u=eval(a.userData)))for(w=0;w<u.length;w++)u[w]&&(u[w].userIdIndex&&0!=
u[w].userIdIndex?(c=c.substring(0,u[w].userIdIndex-1)+"@"+u[w].userName+c.substring(u[w].userIdIndex-1),b["@"+u[w].userName+" "]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+u[w].userId+"'\x3e@"+u[w].userName+" \x3c/a\x3e"):h.find("#show_at_comment").prepend("\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+u[w].userId+"'\x3e@"+u[w].userName+" \x3c/a\x3e"));"mail"!=a.visitType&&(c=e.initMessage(c));for(w in b)c=c.replace(new RegExp(w,"gm"),b[w]);h.find(".comment-body").html($.faceConvert(c));
a.transmitCount&&0<a.transmitCount&&h.find(".comment-transmit-count").html("("+a.transmitCount+")");a.commentCount&&0<a.commentCount&&h.find(".comment-comment-count").html("("+a.commentCount+")");if(a.attachments){w=0;for(c=a.attachments.length;w<c;w++)b=a.attachments[w],h.find(".comment-attachment").append(e.template("base.attachment",b)),h.find("#"+b.id).children().addClass("remoteDownload").attr("data-dlid",b.id),(new g({container:h,afterJqObj:h.find("#"+b.id).children(),fileObj:b,rel:a.id})).render();
h.find(".comment-attachment").attr("undeletable",!0)}h.find(".comment-cal").html(Date.create(d).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));f&&"pc"!=f&&a.address&&""!=a.address&&(h.find(".comment-client").removeClass("hide").html("\u6765\u81ea "+a.client+"\u5ba2\u6237\u7aef"),h.find(".comment-coord").removeClass("hide"),h.find(".comment-address").html(a.address));this.renderCommentAvatar(a.commentor,"p4",h.find(".j_comment_clone_avatar"));"customer"==this._module&&this.compareTime(this.nowTimestamp,
Date.create(d).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))&&a.commentor.id==TEAMS.currentUser.id&&h.find(".actions").append('\x3ca class\x3d"comment-opt edit" title\x3d"\u5bf9\u672c\u6761\u8bc4\u8bba\u7684\u7f16\u8f91"\x3e\x3ci class\x3d"icon-chat-3"\x3e\x3c/i\x3e\u7f16\u8f91\x3c/a\x3e');this.replay&&(this.replay.appendReplay(a,h),this.replay.appendTransmit(a,h));return h.outerHTML()},insertStream:function(a){$(this.parentEl).find("#stream").trigger("insertStream",a)},newRelevance:function(a){$(this.parentEl).find("#relevance").trigger("newRelevance",
a)},addBlogCommentCount:function(){$(this.parentEl).find(".j_blogCommentPanel").trigger("addComment")},compareTime:function(a,b){b=b.replace(RegExp(":","g"),"-");b=b.replace(RegExp(" ","g"),"-");var c=b.split("-"),d=parseInt(c[0]),e=parseInt(c[1]),g=parseInt(c[2]),f=parseInt(c[3]),h=parseInt(c[4]),c=parseInt(c[5]),d=(new Date(d,e-1,g,f,h,c)).getTime();return a-6E5<=d?!0:!1},remove:function(){$(this.el).off(".commentView");$(this.el).find("#comment-textarea").trigger("autosize.destroy");this.uploader&&
(this.uploader.destroy(),this.uploader=null);this.replay&&(this.replay.remove(),this.replay=null);this.atmeview&&(this.atmeview.remove(),this.atmeview=null)}});m.exports=h});
define("teams/component/typeahead",["teams/component/typeaheadview"],function(h,q,m){var f=h("teams/component/typeaheadview");window.typeahead={defaults:{el:"input.typeahead",valueKey:"id",creatable:!0,callback:function(e){}},init:function(e){var c=[];$.isArray(e)?c=e:c.push(e);for(var b=0,a=c.length;b<a;b++){e=c[b];var d=$(e.el),g=e.callback,l=e.resultHandler;(function(a,b,c,d){a.off("focusin.tt").on("focusin.tt",function(e){(new f({$el:a,clickHandler:b,remote:c,resultHandler:d})).render()})})(d,
g,e.remote,l);var n=d.next(".typeahead-search");n&&0<n.size()&&(n.attr("data-entity",$(e.el).attr("data-entity")),n.attr("module",$(e.el).attr("module")),n.attr("data-multi",$(e.el).attr("data-multi")),function(a,b,c,d){c.off("confirmHandler").on("confirmHandler",function(c,d){b(d.objs,a)})}(d,g,n,l))}}};m.exports=function(e){window.typeahead.init(e)}});
define("teams/search/searchmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.pageNo=1;this.pageSize=25;this.searchBy.model=this},searchBy:{tag:function(f,e,c){var b=this.model;f.pageSize=b.pageSize;f.pageNo=b.pageNo;$.ajax({type:"get",url:"/search/tag/"+c+".json",dataType:"json",data:f,success:function(a){e&&e(a)}})},keywords:function(f,e,c){var b=this.model;f.pageSize=b.pageSize;f.pageNo=b.pageNo;f.keywords=c;f.searchParam=!0;$.ajax({type:"get",url:"/search.json",dataType:"json",
data:f,success:function(a){e&&e(a)}})}},updateStatus:function(f,e,c){var b={};b.status=f;b.ids=e;$.ajax({type:"get",url:"/task/updateStatus.json",dataType:"json",data:b,success:function(a){c&&c(a)}})}});m.exports=h});
define("teams/search/searchview","teams/utils teams/search/searchmodel teams/mainline/mainlineview teams/tag/tagview teams/component/sharemodel teams/component/watchmodel teams/component/remind teams/component/userselector teams/component/streammodel teams/views/feedbackview teams/org/followmodel".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/search/searchmodel");h("teams/mainline/mainlineview");h("teams/tag/tagview");var c=h("teams/component/sharemodel"),b=h("teams/component/watchmodel"),
a=h("teams/component/remind"),d=h("teams/component/userselector"),g=h("teams/component/streammodel"),l=h("teams/views/feedbackview"),n=h("teams/org/followmodel");h=Backbone.View.extend({initialize:function(a){this.type=a.type;this.el="#mainContainer .j_main";this.keywords=a.param;this._module=a.module||"all";this.objId=a.objId;this.model=new e;this.watchModel=new b;this.shareModel=new c({entityId:"",module:""});this.streamModel=new g({});this.followModel=new n;var d="/search/"+this.type;a.param&&
(d=d+"/"+a.param);a.url=d;$(this.el).html(f.template("search.result",a));$(this.el).find("."+this.type).removeClass("hide").find("h5").addClass("ellipsis")},delegateEvents:function(){var b=this,c=this.model,e=$(b.el);$("body").off("click.searchView",".goto-top").on("click.DocumentList",".goto-top",function(a){f.gotoTop(".j_gsearchScr")});e.on("click.searchView","#search-group .j_search-group",function(a){a=$(this).attr("data-module");b._module=a;$("#search-group .active").removeClass("active");$(this).parent().addClass("active");
$("#search-group").data("active",a);c.pageNo=1;b.renderSearch(!1)});e.on("keyup.searchView","#middlePageSearch",function(a){var b=$.trim($(this).val()),b=b.replace(/\%/g,"");13==a.which&&0<b.length&&(a.preventDefault(),ROUTER.navigate("/search/keywords/"+b,{trigger:!0}));$("#searchTop").val(b)});e.on("click.searchView","#check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$("#search-result-list span.checkbox").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");
$(this).parent("li").removeClass("selected")}):$("#search-result-list span.checkbox").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).parent("li").addClass("selected")});$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});e.on("click.searchView",".j_resultmore",function(a){c.pageNo++;b.renderSearch(!1);$("#check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")});e.on("keyup.searchView",
"#search-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&b.renderSearch(!0)});e.on("click.searchView","span.search .icon-search",function(a){b.renderSearch(!0)});e.on("click.searchView",".search-watchs",function(a){a=b.findSelectedLi();0<a.length?b.watchModel.watch("{"+a+"}",function(a){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");b.updateFastKey(a.domains,!0)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.searchView",".search-watchs-cancle",function(a){a=
b.findSelectedLi();0<a.length?b.watchModel.watchDelete("{"+a+"}",function(a){f.notify("\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6210\u529f");b.updateFastKey(a.domains,!1)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});$("body").off("click.searchView",".search-reminds").on("click",".search-reminds",function(c){var d=b.findSelectedLi();0<d.length?($(this).attr("domains",d),(new a({obj:$(this)})).render(c)):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.searchView",".search-read",
function(a){a=b.findSelectedLi();if(0<a.length){var c=$(this);b.streamModel.readAll("{"+a+"}",function(a){f.notify("\u6279\u91cf"+c.html()+"\u6210\u529f")})}else f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("confirmHandler.searchView",".search-share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";b.shareModel.sids=b.sids;d=b.findSelectedLiId();b.shareModel.entityIds=d;b.shareModel._module=b._module;b.shareModel.saveAll(function(a){a.addUserMessage?
f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});e.on("click.searchView",".search-share",function(a,c){a.stopPropagation();0<b.findSelectedLi().length?(new d({$target:$(this)})).open():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.searchView",".shortcut .watch",function(a,c){a.stopPropagation();var d={},e=$(this);d.module=e.attr("module");d.id=e.attr("targetId");var g=$(this).parents("li"),l=g.attr("id"),g=g.attr("data-module");"true"==
e.attr("watched")?"profile"==g?b.followModel.unfollow(l,TEAMS.currentUser.id,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");$(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');$(".watch").attr("watched","false")}):(d._method="DELETE",b.watchModel.watchOne(d,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");$(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');$(".watch").attr("watched","false");a=b.subView;a.id&&a.id==d.id&&
a.changeWatch(!1)})):"profile"==g?b.followModel.follow(l,TEAMS.currentUser.id,function(a){f.notify("\u5173\u6ce8\u7533\u8bf7\u53d1\u9001");e.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');e.attr("watched","true")}):(d._method="PUT",b.watchModel.watchOne(d,function(a){f.notify("\u5173\u6ce8\u6210\u529f");e.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');e.attr("watched","true");a=b.subView;a.id&&a.id==d.id&&a.changeWatch(!0)}))});e.on("click.searchView",
".shortcut .finish",function(a,d){a.stopPropagation();var e=$(this);if($(this).attr("targetId")&&$(this).attr("status")&&!e.data("post")){var g="finished"==e.attr("status")?"todo":"finished",l=e.attr("targetId");e.data("post",!0);c.updateStatus(g,l,function(a){e.data("post",!1);a.actionMsg&&a.actionMsg.message?f.notify(a.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),b.renderStatus(e.parents("li"),g,!0))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});e.off("confirmHandler.searchView",
".shortcut .share").on("confirmHandler.searchView",".shortcut .share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";var g=$(this).attr("targetId");b.shareModel.sids=b.sids;b.shareModel.entityIds=g;b.shareModel._module=$(this).attr("module");b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");var c=b.subView;c.id&&c.id==g&&c.addShare(a.shareEntrys)})}});
e.on("click.searchView",".shortcut .share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?(new d({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});e.on("click.SearchList",".shortcut .link",function(a,b){a.stopPropagation()})},findSelectedLiId:function(){var a="";$("#search-result .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parents("li").attr("id")+",")});return a},findSelectedLi:function(){var a=
"";$("#search-result .e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+='{"id":"'+$(this).parent("li").attr("id")+'","name":"'+$(this).parent("li").attr("title")+'","module":"'+$(this).attr("module")+'"},')});0<a.length&&(a='"domains":['+a+"]",a=a.replace(",]","]"));return a},updateFastKey:function(a,b){if(b)for(var c=0;c<a.length;c++){var d=$("#search-result #"+a[c].id);d.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');
d.find(".watch").attr("watched","true")}else for(c=0;c<a.length;c++)d=$("#search-result #"+a[c].id),d.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),d.find(".watch").attr("watched","false")},render:function(){this.model.pageNo=1;this.renderSearch(!0);this.keywords&&($("#keywords").val(this.keywords),$("#searchTop").val(this.keywords));this.renderFeedview();f.layout(this.el+" .j_gsearchScr")},renderFeedview:function(){var a=this.module,b=this.keywords;this.feedView=
a&&"tag"==a?new l({container:"#mainContainer #j_searchfeed",showtitle:"0",navs:[".document",".customer"],module:a,moduleName:"\u6b64\u6807\u7b7e\u4e0b\u76f8\u5173\u4e8b\u9879\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetId:this.param,keywords:b,targetModule:"tag",groupShow:"1"}):new l({container:"#mainContainer #j_searchfeed",showtitle:"0",navs:[".document",".customer"],module:a,moduleName:"\u641c\u7d22\u5230\u7684\u53cd\u9988\u8bc4\u8bba",type:"other",targetModule:"search",keywords:b,groupShow:"1"});
this.feedView.render()},renderSearch:function(a){var b=this,c=this.model,d=this.type,e=this._module;1==c.pageNo&&$("#search-result-list").empty();b.router="/search/"+d;b[d]&&(b.router+="/"+b[d]);var g={},f=$.trim($("#search-keywords").val()),l=$("#search-keywords").attr("placeholder");f==l&&(f="");g["filter.keywords"]=f;g.module=e;g.loadCount=a;0<$("#no-finished").size()&&$("#no-finished").hasClass("icon-checkbox-checked")&&("task"==e?g["filter.type"]="finished":"workflow"==e&&(g["filter.type"]="finished"));
$("#search-result .no-result, .j_resultmore").addClass("hide");$("#resultlist-loading").removeClass("hide");c.searchBy[d](g,function(c){b._module=c.module;b.setHeader(c[d]);a&&b.renderCount(c.count);var e=c.page.result;0==e.length?$(".no-result").removeClass("hide"):$(".no-result").addClass("hide");for(var g=0,f=e.length;g<f;g++)b.renderOne(e[g]);c.page.hasNext?$(".j_resultmore").removeClass("hide"):$(".j_resultmore").addClass("hide");c.tag&&($(".center-title .tag").find("a").html(c.tag.name),$(".center-title .tag").find("a").attr("title",
c.tag.name));$("#resultlist-loading").addClass("hide");b.highLight(b.objId);b.keywords&&$(b.el).find(".title").highlight(b.keywords)},b[d])},renderOne:function(a){var b=a.module,c=$("#result-clone").clone(),d=a.creator;if("tag"==b){router=a.privacy?"/tag/privacy/"+a.id:"/tag/common/"+a.id;c.attr({id:a.id});var e=c.find(".type");a.privacy?e.html("[\u6211\u7684\u6807\u7b7e]"):e.html("[\u516c\u5171\u6807\u7b7e]");c.find(".watch").addClass("hide");c.find(".share").addClass("hide");c.removeClass("j_entityslider-toggle");
$(".last").removeClass("hide")}else"contact"==b?(c.attr({id:a.id}),c.attr({"data-id":a.id,"data-module":"profile"}),TEAMS.currentUser.id==a.id&&c.find(".watch").addClass("hide"),"approved"==a.relation&&(a.watched=!0),c.find(".share").addClass("hide"),$(".last").addClass("hide")):"calendar"==b?(c.attr({id:a.id}),c.attr({"data-id":a.id,"data-module":"agenda"}),c.find(".watch").addClass("hide"),c.find(".share").addClass("hide"),$(".last").addClass("hide")):(c.attr({id:a.id}),c.attr({"data-id":a.id,"data-module":a.module}),
$(".last").removeClass("hide"));a.watched?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),c.find(".watch").attr("watched","true")):c.find(".watch").attr("watched","false");c.find(".watch").attr("targetId",a.id);c.find(".watch").attr("module",b);a.name&&c.find(".title").attr("title",a.name).find(".text").text(a.name);"task"==a.module?(c.find(".finish").removeClass("hide"),e=a.finished?"finished":"todo","newfinish"==this.type?this.renderStatus(c,e):this.renderStatus(c,
e,!0)):"mainline"==a.module?(c.find(".link").removeClass("hide"),c.find(".link").attr("href","/mainline/link/"+a.id)):"tag"==a.module?(c.find(".link").removeClass("hide"),c.find(".link").attr("href",router)):"workflow"==a.module&&a.finishTime&&this.renderStatus(c,"finished",!0);1==a.permission?(a.relationflag&&c.find(".finish").attr("targetId",a.id),a.relationflag&&a.locked&&c.find(".finish").removeAttr("targetId"),a.relationflag||c.find(".finish").removeAttr("targetId")):(c.find(".share").addClass("selector-toggle").attr("data-entity",
"employee").attr("data-multi","true").attr("module",b).attr("targetId",a.id),c.find(".finish").attr("targetId",a.id),1==a.locked&&3==a.permission&&c.find(".finish").removeAttr("targetId",a.id));"task"==a.module?c.find(".date").html(a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):""):"contact"==a.module?c.find(".date").html(a.department.name):c.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"):"");d&&d.name!=TEAMS.currentUser.username&&c.find(".user").html(d.name);
"contact"==a.module?c.find(".comment-count").html(a.email):0!=a.commentCount&&c.find(".comment-count").html("("+a.commentCount+")");a=$("#search-result-list");d=a.find("li").length;d++;c.find(".sn").html(d);c.find(".checkbox").attr("module",b);a.append(c)},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/\r\n|\n/g," ")},renderCount:function(a){$("#search-group").data("active")||$("#search-group").data("active",this._module);$("#search-group .active").removeClass("active");
$("#search-group a."+this._module).parent().addClass("active");0==a.allCount?($("#search-group .document i").html(0),$("#search-group .customer i").html(0),$("#search-group .mainline i").html(0),$("#search-group .task i").html(0),$("#search-group .workflow i").html(0),$("#search-group .tag i").html(0),$("#search-group .saleChance i").html(0),$("#search-group .calendar i").html(0),$("#search-group .production i").html(0)):(a.allCount==a.contact&&0<a.contact&&$(".last").addClass("hide"),0<a.task?($("#search-group .task i").html(a.task),
$("#search-group .task").parent().removeClass("hide")):$("#search-group .task i").html(0),0<a.contact?($("#search-group .contact i").html(a.contact),$("#search-group .contact").parent().removeClass("hide")):$("#search-group .contact i").html(0),0<a.document?($("#search-group .document i").html(a.document),$("#search-group .document").parent().removeClass("hide")):$("#search-group .document i").html(0),0<a.customer?($("#search-group .customer i").html(a.customer),$("#search-group .customer").parent().removeClass("hide")):
$("#search-group .customer i").html(0),0<a.workflow?($("#search-group .workflow i").html(a.workflow),$("#search-group .workflow").parent().removeClass("hide")):$("#search-group .workflow i").html(0),0<a.mainline?($("#search-group .mainline i").html(a.mainline),$("#search-group .mainline").css("display","block")):$("#search-group .mainline i").html(0),0<a.tag?($("#search-group .tag i").html(a.tag),$("#search-group .tag").css("display","block")):$("#search-group .tag i").html(0),0<a.saleChance?($("#search-group .saleChance i").html(a.saleChance),
$("#search-group .saleChance").css("display","block")):$("#search-group .saleChance i").html(0),0<a.production?($("#search-group .production i").html(a.production),$("#search-group .production").css("display","block")):$("#search-group .production i").html(0),0<a.calendar?($("#search-group .calendar i").html(a.calendar),$("#search-group .calendar").css("display","block")):$("#search-group .calendar i").html(0))},renderModule:function(a){this.model.pageNo=1;a&&a!=this._module&&(this._module=a,$("#search-group").data("active",
a),$("#search-group .active").removeClass("active"),$("#search-group ."+a).addClass("active"),this.renderSearch(!1))},beforeOpenTarget:function(a){this.highLight(a)},removeTarget:function(a){$("#"+a.targetId).remove();a=$("#search-group a.active i").text();a--;$("#search-group a.active i").html(a);a=$("#search-group li.active i").text();a--;$("#search-group li.active i").html(a);this.rebuildSN()},changeTitle:function(a,b){$("#"+a).find(".title").html(this.filterHtmlTag(b)).attr("title",b)},changeStatus:function(a,
b){var c=$("#search-result-list #"+a);this.renderStatus(c,b,!0)},renderStatus:function(a,b,c){"finished"==b||"close"==b?(a.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),a.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),c&&a.find(".title .text").addClass("finished-line")):(a.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),
a.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),c&&a.find(".title .text").removeClass("finished-line"))},changeDuedate:function(a){var b=$("#search-result-list #"+a.id);a=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(a)},changeWatch:function(a,b){var c=$("#search-result-list #"+a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),
c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),c.find(".watch").attr("watched","false"))},changeManager:function(a,b){a&&(a.username!=TEAMS.currentUser.username?$("#search-result-list #"+b+" .user").html(a.username):$("#search-result-list #"+b+" .user").html(""))},changeDuedate:function(a){var b=$("#search-result-list #"+a.id);a=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(a)},highLight:function(a){if(a){$("#search-result-list li.active").removeClass("active");
$("#search-result-list #"+a).addClass("active");var b=$("#search-result-list #"+a).find(".title").html();$("#search-result-list #"+a).find(".title").html("").focus().html(b)}},rebuildSN:function(){for(var a=$("#search-result-list").children(),b=0;b<a.length;b++)$(a[b]).find(".sn").html(b+1)},getNext:function(){var a=0,b=$("#search-result-list li.result-li");b.each(function(b){$(this).hasClass("active")&&(a=b)});if(1!=b.length)return b.length==a+1?$(b[a-1]):$(b[a+1])},getPrev:function(){var a=0,b=
$("#search-result-list li.result-li");b.each(function(b){$(this).hasClass("active")&&(a=b)});return $(b[a]).prev()},setHeader:function(a){a&&(a=a.name||a,$(this.el).find("."+this.type+" #middlePageSearch").attr("value",a),$("#searchTop").val(a))},remove:function(){this.stopListening();this.undelegateEvents();this.$el.off(".searchView");$("form.form-search").find("#keywords").val("");this.$el.remove()}});m.exports=h});
define("teams/calendar/agendainfo",["teams/utils","teams/task/taskmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel");h=Backbone.View.extend({initialize:function(c){this.el=c.container;this.id=c.entityId;this.userId=c.userId;this.callback=c.callback;this.taskModel=new e({id:null});$(this.el).html(f.template("calendar.detail"))},delegateEvents:function(){var c=this,b=$(c.el);b.on("click.CalendarEdit","#toTask",function(){var a={},d=$.trim(b.find("#title").text()),e=$.trim(b.find("#detail").text()),
l=Date.create(b.find("#end").text()),n=c.userId,k;a.name=d;var d=Date.create("today").getTime(),h=Date.create(l).getTime();h<=d?(h=d,k="today"):k=1==(h-d)/864E5?"tomorrow":"future";a.content=e;a.dueDate=l;a.manager={id:n};c.taskModel.create(a,k,function(a){f.notify("\u4efb\u52a1\u521b\u5efa\u6210\u529f");"today"!=k&&c.taskModel.changeProperty(a.task.id,"dueDate",Date.create(l).format("{yyyy}-{MM}-{dd}"));c.callback()})})},render:function(){var c=$(this.el);$.ajax({type:"get",url:"/agenda/"+this.id+
".json?user.id\x3d"+this.userId,dataType:"json",success:function(b){b=b.webAgenda;c.find("#title").text(b.title);b.content&&c.find("#detail").text(b.content);b.place&&c.find("#place").text(b.place);b.allDay?(c.find("#start").text(Date.create(b.start).format("{yyyy}-{MM}-{dd}")),b.end&&c.find("#end").text(Date.create(b.end-864E5).format("{yyyy}-{MM}-{dd}")),c.find("#isAllday").text("\u662f")):(c.find("#start").text(Date.create(b.start).format("{yyyy}-{MM}-{dd} {HH}:{mm}")),b.end&&c.find("#end").text(Date.create(b.end).format("{yyyy}-{MM}-{dd} {HH}:{mm}")),
c.find("#isAllday").text("\u5426"));b.repeat?(c.find("#isRepeat").text("\u662f "),c.find("#repeat").removeClass("hide"),c.find("#repeat").text(b.result)):(c.find("#isRepeat").text("\u5426"),c.find("#repeat").addClass("hide"));var a=b.creator;if(b.shareEntrys)for(var d=b.shareEntrys,e=0;e<d.length;e++)if(d[e].sid!=a.id){var f='\x3ca id\x3d"'+d[e].sid+'" class\x3d"usercard-toggle entity-item" userid\x3d"'+d[e].sid+'"\x3e\x3cspan class\x3d"j_shareEntry_name"\x3e'+d[e].name+"\x3c/span\x3e\x3c/a\x3e";
c.find("#participants").append(f);e!=d.length-1&&c.find("#participants").append("\x3cspan style\x3d'margin-left:5px'\x3e\x3c/span\x3e");d[e].shareEmp&&(f=d[e].shareEmp,f=f.avatar&&f.avatar.p5&&"/base/download/"+f.avatar.p5||"images/avatar.png",f="\x3cimg class\x3d'avatar' src\x3d'"+f+"' /\x3e",c.find("#"+d[e].sid).prepend($(f)))}"normal"==b.visibleType?c.find("#visibleType").text("\u6b63\u5e38(\u4e0a\u7ea7\u53ef\u89c1)"):"self"==b.visibleType?c.find("#visibleType").text("\u4ec5\u81ea\u5df1\u53ef\u89c1"):
"watcher"==b.visibleType?c.find("#visibleType").text("\u5173\u6ce8\u8005\u53ef\u89c1"):c.find("#visibleType").text("\u516c\u5f00");d='\x3ca id\x3d"'+a.id+'" class\x3d"usercard-toggle entity-item" userid\x3d"'+a.id+'"\x3e\x3cspan class\x3d"j_shareEntry_name"\x3e'+a.username+"\x3c/span\x3e\x3c/a\x3e";c.find("#creator").append(d);f=a&&a.avatar&&a.avatar.p5&&"/base/download/"+a.avatar.p5||"images/avatar.png";f="\x3cimg class\x3d'avatar' src\x3d'"+f+"' /\x3e";c.find("#creator #"+a.id).prepend($(f));
c.find("#createTime").text(Date.create(b.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}"))}})},remove:function(){$(this.el).find(".module-detail-view").remove()}});m.exports=h});
define("teams/calendar/calendarpage",["teams/core/page","teams/component/multiuserslider","teams/calendar/calendarview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/component/multiuserslider"),e=h("teams/calendar/calendarview");h=q.extend({initialize:function(c){this.userId=c.userId;this.pageKey="calendarpage";this.template="calendar.calendarpage";this.pageActive="calendar"},delegateEvents:function(){var c=this;Backbone.off("calendarpage.renderCalendarView").on("calendarpage.renderCalendarView",
function(b){c.renderCalendarView(b.employeeIds,b.showModules,b.from)})},render:function(){this.initLayout();(new f({userId:this.userId,module:"calendar",dataType:"all"})).render();this.renderSubview()},renderSubview:function(){this.subView=new e({userId:this.userId,container:"#calendar-panel"});this.subView.render()},renderCalendarView:function(c,b,a){this.subView&&(this.subView.employeeIds=c,this.subView.showModules=b,this.subView.requestFrom=a,this.subView.reloadView())},remove:function(){this.mainView&&
this.mainView.remove();this.subView&&this.subView.remove()}});m.exports=h});
define("teams/calendar/calendarview",["teams/utils","teams/component/entitybox","teams/component/entityslider","teams/calendar/agendainfo"],function(h,q,m){var f=h("teams/utils");h("teams/component/entitybox");var e=h("teams/component/entityslider");h("teams/calendar/agendainfo");q=Backbone.View.extend({initialize:function(c){this.el=c.container;this.userPageNO=1;this.userId=c.userId?c.userId:TEAMS.currentUser.id;$(this.el).html(f.template("calendar.calendar"));$("body").addClass("page-agenda")},
render:function(){var c=this;h.async("https://static.eteams.cn/js/fullcalendar.min.js",function(){c._render()})},_render:function(){var c=this,b=$(c.el);b.find("#calendar").fullCalendar({defaults:{lang:"zh"},header:{left:"prev,next today",center:"title",right:"agendaDay,agendaWeek,month"},selectable:!0,selectHelper:!0,weekNumbers:!0,weekNumberTitle:"\u5468\u6b21",weekNumberCalculation:function(a){a=new Date(a.format());return f.getWeekDate(a).week},events:function(a,b,e,f){e=[];var n="";if(c.requestFrom&&
"multiuserslider"==c.requestFrom){if(c.employeeIds)for(n=0;n<c.employeeIds.length;n++)e+=c.employeeIds[n]+",";n=c.showModules}else e=TEAMS.currentUser.id,n="task,calendar";$.ajax({url:"/calendar/calendarIndex.json?user.id\x3d"+c.userId,dataType:"json",type:"post",data:{start:a.toDate().getTime()-288E5,end:b.toDate().getTime()-288E5,employeeIds:e,showModules:n},success:function(a){for(var b=[],c=0;c<a.webAgendas.length;c++){var d=a.webAgendas[c],e="{yyyy}-{MM}-{dd} {HH}:{mm}";d.allDay&&(e="{yyyy}-{MM}-{dd}");
d.start=Date.create(d.start).format(e);d.end=Date.create(d.end).format(e);d.title="["+d.creator.name+"] "+d.title;d.className="agenda_event_class";b.push(d)}if(a.tasks)for(c=0;c<a.tasks.length;c++)e=d=a.tasks[c],e.title="["+d.manager.name+"] "+d.name,e.allDay=!0,e.start=Date.create(d.dueDate+288E5).format("{yyyy}-{MM}-{dd}"),e.end=Date.create(d.dueDate+288E5).format("{yyyy}-{MM}-{dd}"),e.editable=!1,e.className="task_event_class",e.permission=0,b.push(e);f(b)}})},select:function(a,b,e,f,n){c.doSelect(a,
b,e,f,n)},eventDrop:function(a,b,e,f,n,k,h,p){c.doEventDrop(a,b,e,f,n,k,h,p)},eventResize:function(a,b,e,f,n,k,h){c.doEventResize(a,b,e,f,n,k,h)},windowResize:function(a){f.layout("#j_content");"month"!=b.find("#calendar").fullCalendar("getView").name&&f.layout("#j_container")},eventClick:function(a,b){"task"==a.module?c.taskClick(a,b):c.agendaClick(a,b)},eventRender:function(a,b,c){b.find(".fc-event-inner").addClass("ellipsis");b.find(".fc-event-inner").attr("title",a.title)},eventAfterRender:function(a,
b,c){a.allDay&&"task"!=a.module&&b.find(".fc-event-inner").prepend("\x3cspan style\x3d'font-weight:bold'\x3e\u5168\u5929\x3c/span\x3e")},viewRender:function(a,c){if("agendaDay"==a.name){var e=a.start.date(),f=new Date,n=f.getDate(),k=f.getHours(),f=f.getMinutes();if(30>f)var k=b.find(".fc-slot"+2*k),h=$(k.children("td:eq(0)")).height(),f=f*h/30;else k=b.find(".fc-slot"+(2*k+1)),h=$(k.children("td:eq(0)")).height(),f=(f-30)*h/30;f='\x3cdiv class\x3d"fc-timeline-wrapper" style\x3d"margin-top:'+f+'px"\x3e\x3cdiv class\x3d"fc-timeline-dot"\x3e\x3c/div\x3e';
e==n&&(f+='\x3cdiv class\x3d"fc-timeline"\x3e\x3c/div\x3e');f+="\x3c/div\x3e";k.find(".fc-widget-content").children().eq(0).empty().append(f)}},loading:function(a,c){a?b.find(".calendar-loading").removeClass("hide"):("month"!=b.find("#calendar").fullCalendar("getView").name&&b.find("#j_container").mCustomScrollbar("scrollTo",".fc-slot16"),b.find(".calendar-loading").addClass("hide"))}});f.layout("#j_content")},delegateEvents:function(){var c=this,b=$(c.el);b.on("click.CalendarEdit",".fc-button",function(){f.destroyLayout("#j_content");
f.layout("#j_content");"month"!=b.find("#calendar").fullCalendar("getView").name&&f.layout("#j_container")});b.on("click.CalendarEdit","#newAgenda",function(){var a=new Date,d=a.getFullYear(),g=a.getMonth(),g=g+1,g=10>g?"0"+g:g,f=a.getDate(),a=f+1,f=d+"-"+g+"-"+(10>f?"0"+f:f),d=d+"-"+g+"-"+(10>a?"0"+a:a);c.entitySlider&&c.entitySlider.remove();d=new e({module:"agenda",id:"new",allDay:!0,start:Date.create(f).getTime(),end:Date.create(d).getTime(),page:c,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},
afterOperate:function(){$("#entitySlider").removeClass("in");b.find("#calendar").fullCalendar("refetchEvents")}}});d.render();c.entitySlider=d});b.on("refetch","#calendar",function(){$("#calendar").fullCalendar("refetchEvents")});this.on("afterAgendaCreate",function(a){c.afterAgendaCreate(a)})},doSelect:function(c,b,a,d,g){var f=$(this.el);a=d.name;"agendaWeek"==a||"agendaDay"==a?"00:00"==b.format("HH:mm")&&"00:00"==c.format("HH:mm")?(c=c.format("YYYY-MM-DD"),b=b.format("YYYY-MM-DD"),a=!0):(c=c.format("YYYY-MM-DD HH:mm"),
b=b.format("YYYY-MM-DD HH:mm"),a=!1):(c=c.format("YYYY-MM-DD"),b=b.format("YYYY-MM-DD"),a=!0);this.entitySlider&&this.entitySlider.remove();b=new e({module:"agenda",id:"new",allDay:a,start:Date.create(c).getTime(),end:Date.create(b).getTime(),page:this,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");f.find("#calendar").fullCalendar("refetchEvents")}}});b.render();this.entitySlider=b},doEventDrop:function(c,b,a,
d,e,f,n,k){var h=$(this.el);a={};a.years=b._data.years;a.months=b._data.months;a.days=b._data.days;a.hours=b._data.hours;a.minutes=b._data.minutes;b=JSON.stringify(a);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda/dragToChangeTime/"+c.id+".json",dataType:"json",data:'{"dayDelta":'+b+"}",success:function(a){h.parent("#calendar").fullCalendar("refetchEvents")}})},doEventResize:function(c,b,a,d,e,f,n){var k=$(this.el);a={};a.years=b._data.years;a.months=b._data.months;
a.days=b._data.days;a.hours=b._data.hours;a.minutes=b._data.minutes;b=JSON.stringify(a);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda/resizeToChangeTime/"+c.id+".json",dataType:"json",data:'{"dayDelta":'+b+"}",success:function(a){k.parent("#calendar").fullCalendar("refetchEvents")}})},afterAgendaCreate:function(c){var b=$(this.el);b.find("#calendar").fullCalendar("refetchEvents");this.entitySlider&&this.entitySlider.remove();var a=new e({module:"agenda",id:c,userId:this.userId,
slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},afterOperate:function(){$("#entitySlider").removeClass("in");b.find("#calendar").fullCalendar("refetchEvents")},changeEvent:function(a,e,f,n){f=b.find("#calendar").fullCalendar("clientEvents",c)[0];switch(a){case "title":f.title=e;b.find("#calendar").fullCalendar("updateEvent",f);break;case "start":b.find("#calendar").fullCalendar("refetchEvents");break;case "end":b.find("#calendar").fullCalendar("refetchEvents");break;case "allDay":b.find("#calendar").fullCalendar("refetchEvents");
break;case "repeatChange":b.find("#calendar").fullCalendar("refetchEvents")}}}});a.render();this.entitySlider=a},taskClick:function(c,b){var a=$(this.el);this.entitySlider&&this.entitySlider.remove();var d=new e({module:"task",id:c.id,userId:this.userId,page:this,slideCallback:{changeEvent:function(b,d){switch(b){case "title":c.title="["+c.manager.name+"] "+d;c.name=d;a.find("#calendar").fullCalendar("updateEvent",c);break;case "manager":c.manager.name=d;c.title="["+c.manager.name+"] "+c.name;a.find("#calendar").fullCalendar("updateEvent",
c);break;case "duedate":d?(c.start=Date.create(d+288E5).format("{yyyy}-{MM}-{dd}"),c.end=Date.create(d+288E5).format("{yyyy}-{MM}-{dd}"),a.find("#calendar").fullCalendar("updateEvent",c)):a.find("#calendar").fullCalendar("removeEvents",c.id)}}}});d.render();this.entitySlider=d},agendaClick:function(c,b){var a=$(this.el);if(31==c.permission){this.entitySlider&&this.entitySlider.remove();var d=new e({module:"agenda",id:c.id,userId:this.userId,page:this,slideCallback:{afterOpen:function(){$(".agenda-container #title").focus()},
afterOperate:function(){$("#entitySlider").removeClass("in");a.find("#calendar").fullCalendar("refetchEvents")},changeEvent:function(b,d,e,f){switch(b){case "title":c.title="["+c.creator.name+"] "+d;a.find("#calendar").fullCalendar("updateEvent",c);break;case "start":a.find("#calendar").fullCalendar("refetchEvents");break;case "end":a.find("#calendar").fullCalendar("refetchEvents");break;case "allDay":a.find("#calendar").fullCalendar("refetchEvents");break;case "repeatChange":a.find("#calendar").fullCalendar("refetchEvents")}}}});
d.render();this.entitySlider=d}else if(3==c.permission||1==c.permission||0==c.permission)this.entitySlider&&this.entitySlider.remove(),d=new e({module:"agenda",id:c.id,userId:this.userId,detail:!0,page:this,slideCallback:{afterOperate:function(){$("#entitySlider").removeClass("in")},changeEvent:function(b,d,e,f){switch(b){case "title":c.title=d;a.find("#calendar").fullCalendar("updateEvent",c);break;case "start":a.find("#calendar").fullCalendar("refetchEvents");break;case "end":a.find("#calendar").fullCalendar("refetchEvents");
break;case "allDay":a.find("#calendar").fullCalendar("refetchEvents");break;case "repeatChange":a.find("#calendar").fullCalendar("refetchEvents")}}}}),d.render(),this.entitySlider=d},reloadView:function(){$("#calendar").fullCalendar("refetchEvents")},remove:function(){$(this.el).off(".CalendarEdit");$(this.el).find("#calendar").fullCalendar("destroy");$("body").removeClass("page-agenda")}});m.exports=q});
define("teams/calendar/agenda","teams/utils teams/task/taskmodel teams/component/shareview teams/component/extendview teams/component/permissionview teams/component/relevanceview teams/component/mainline teams/component/tag teams/component/attachment teams/component/entityremindview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/task/taskmodel"),c=h("teams/component/shareview"),b=h("teams/component/extendview"),a=h("teams/component/permissionview"),d=h("teams/component/relevanceview"),
g=h("teams/component/mainline"),l=h("teams/component/tag"),n=h("teams/component/attachment"),k=h("teams/component/entityremindview");h=Backbone.View.extend({initialize:function(a){this.el=a.container;this.userId=a.userId;this.allDay=a.allDay;this.start=a.start;this.end=a.end;this.id=a.entityId;this.callback=a.callback;this.callbacks=a.callbacks;this.obj=a.obj;this.page=a.page;this.changeEvent=a.changeEvent;this.fromTargetId=a.fromTargetId;this.fromModule=a.fromModule;this.fromTargetName=a.fromTargetName;
this.lastWebAgenda={};$(this.el).html(f.template("calendar.edit"));f.layout(this.el+" #agenda-wrapper");this.shareView=new c({entityId:this.id,module:"calendar",shareContainer:"#calendar-participants",parentEl:this.el});this.taskModel=new e({id:null})},initComponent:function(){var e=this;this.shareView=new c({entityId:this.id,module:"calendar",shareContainer:"#calendar-participants",parentEl:this.el});this.extendView=new b({targetId:this.id,module:"calendar",container:"#agenda-container",parentEl:this.el});
this.permissionView=new a({module:"calendar",container:this.el});e.relevanceViews=[];_.each([{targetModule:"task",module:"calendar",container:"#agenda-relevance-task",moduleLabel:"\u5173\u8054\u4efb\u52a1:"},{targetModule:"document",module:"calendar",container:"#agenda-relevance-doc",moduleLabel:"\u5173\u8054\u6587\u6863:"},{targetModule:"customer",module:"calendar",container:"#agenda-relevance-crm",moduleLabel:"\u5173\u8054\u5ba2\u6237:"},{targetModule:"workflow",module:"calendar",container:"#agenda-relevance-flow",
moduleLabel:"\u5173\u8054\u5ba1\u6279:"}],function(a){this.relevanceView=new d({objectId:e.id,module:a.module,container:a.container,moduleLabel:a.moduleLabel,targetModule:a.targetModule,parentEl:e.el});e.relevanceViews.push(this.relevanceView)});this.mainline=new g({targetId:this.id,module:"calendar",container:"#agenda-relevance-mainline",parentEl:this.el});this.tag=new l({targetId:this.id,module:"calendar",container:"#agenda-relevance-tag",ccontainer:"#agenda-relevance-ctag",parentEl:this.el});this.attachment=
new n({targetId:this.id,module:"calendar",container:"#agenda-relevance-attachment",parentEl:this.el});this.entityremind=new k({entityId:this.id,module:"calendar",container:"#agenda-remind",parentEl:this.el})},delegateEvents:function(){var a=this,b=$(a.el);b.off("keydown.CalendarEdit","#title,#place").on("keydown.CalendarEdit","#title,#place",function(a){13===a.keyCode&&(b.find("#edit_event").trigger("click"),a.preventDefault())});b.off("click.CalendarEdit","#isRepeat").on("click.CalendarEdit","#isRepeat",
function(){$(this).get(0).checked?b.find("#repeatSetting").removeClass("hide"):b.find("#repeatSetting").addClass("hide");a.resetRepeatResult()});b.off("change.CalendarEdit","#endRepeatTime").on("change.CalendarEdit","#endRepeatTime",function(){a.resetRepeatResult()});b.off("change.CalendarEdit","#repeatType").on("change.CalendarEdit","#repeatType",function(){var c=$(this).val();"everyWeek"==c?(b.find("#weekRepeatDate").removeClass("hide"),c=Date.create(b.find("#start").val()).format("{Weekday}").toLowerCase(),
b.find("input[type\x3d'checkbox'][name\x3d'repeatItem'][value\x3d'"+c+"']").attr("checked","checked"),b.find("#unit").text("\u5468")):(b.find("#weekRepeatDate").addClass("hide"),"everyday"==c?b.find("#unit").text("\u5929"):"everyMonth"==c?b.find("#unit").text("\u6708"):"everyYear"==c&&b.find("#unit").text("\u5e74"));a.resetRepeatResult()});b.off("change.CalendarEdit","#endRepeatType").on("change.CalendarEdit","#endRepeatType",function(){var c=$(this).val();"never"==c?(b.find("#overCountEdit").addClass("hide"),
b.find("#overTimeEdit").addClass("hide")):"number"==c?(b.find("#overCountEdit").removeClass("hide"),b.find("#overTimeEdit").addClass("hide")):"date"==c&&(b.find("#overCountEdit").addClass("hide"),b.find("#overTimeEdit").removeClass("hide"),b.find("#endRepeatTime").val(b.find("#end").val()));a.resetRepeatResult()});b.off("blur.CalendarEdit","#frequency,#repeatCount").on("blur.CalendarEdit","#frequency,#repeatCount",function(){a.resetRepeatResult()});b.off("click.CalendarEdit","#weekRepeatDate input[type\x3dcheckbox][name\x3drepeatItem]").on("click.CalendarEdit",
"#weekRepeatDate input[type\x3dcheckbox][name\x3drepeatItem]",function(){a.resetRepeatResult()});b.off("click.CalendarEdit","#edit_event").on("click.CalendarEdit","#edit_event",function(){a.id?a.updateAgenda(a.id):a.addAgenda()});b.off("blur.CalendarEdit","#title").on("blur.CalendarEdit","#title",function(){a.id&&a.lastWebAgenda.title!=$(this).val()&&a.changeProperty(a.id,"title")});b.off("change.CalendarEdit","#start").on("change.CalendarEdit","#start",function(){a.id&&a.lastWebAgenda.start!=a.strToDate($(this).val()).getTime()&&
a.changeProperty(a.id,"startDate")});b.off("change.CalendarEdit","#end").on("change.CalendarEdit","#end",function(){a.id&&a.lastWebAgenda.end!=a.strToDate($(this).val()).getTime()&&a.changeProperty(a.id,"endDate")});b.off("blur.CalendarEdit","#place").on("blur.CalendarEdit","#place",function(){a.id&&a.lastWebAgenda.place!=$(this).val()&&a.changeProperty(a.id,"place")});b.off("blur.CalendarEdit","#detail").on("blur.CalendarEdit","#detail",function(){a.id&&a.lastWebAgenda.content!=$(this).val()&&a.changeProperty(a.id,
"content")});b.off("change.CalendarEdit","#visibleType").on("change.CalendarEdit","#visibleType",function(){a.id&&a.lastWebAgenda.visibleType!=$(this).val()&&a.changeProperty(a.id,"visibleType")});b.off("click.CalendarEdit","#deleteAgenda").on("click.CalendarEdit","#deleteAgenda",function(){f.confirm("\u662f\u5426\u786e\u8ba4\u5220\u9664\u65e5\u7a0b",function(b){b&&$.ajax({type:"post",url:"/agenda/"+a.id+".json",dataType:"json",data:{_method:"DELETE"},success:function(b){f.notify("\u5220\u9664\u6210\u529f");
a.page&&a.page.trigger("remove",a.id);a.callback&&a.callback();$("#entitySlider").removeClass("in");$("body").trigger("slideClose")}})})});b.off("click.CalendarEdit","#isAllday").on("click.CalendarEdit","#isAllday",function(){if("checked"==$(this).attr("checked")){$(this).removeAttr("checked");a.allDay=!1;var c=b.find("#start").val(),d=b.find("#start").data("date");-1==c.indexOf(":")&&(c=d?d:c+" 08:00",b.find("#start").val(c));d=b.find("#end").val();c=b.find("#end").data("date");-1==d.indexOf(":")&&
(d=c?c:d+" 18:00",b.find("#end").val(d))}else $(this).attr("checked","checked"),a.allDay=!0,c=b.find("#start").val(),b.find("#start").data("date",c),-1!=c.indexOf(":")&&(c=c.split(" ")[0],b.find("#start").val(c)),d=b.find("#end").val(),b.find("#end").data("date",d),-1!=d.indexOf(":")&&(d=c.split(" ")[0],b.find("#end").val(d));a.id&&a.changeProperty(a.id,"allDay")});b.off("click.CalendarEdit","#toTask").on("click.CalendarEdit","#toTask",function(){f.confirm("\u662f\u5426\u786e\u5b9a\u5c06\u8be5\u65e5\u7a0b\u8f6c\u4efb\u52a1\uff1f",
function(c){if(c){c={};var d=$.trim(b.find(".j_title").val()),e=$.trim(b.find("#detail").val()),g=Date.create(b.find("#end").val()),k=a.userId,l;c.name=d;var n=Date.create("today").getTime(),h=Date.create(g).getTime();h<=n?(h=n,l="today"):l=1==(h-n)/864E5?"tomorrow":"future";c.content=e;c.dueDate=g;c.manager={id:k};a.taskModel.createWithRelevance(c,l,a.id,"calendar",d,function(c){f.notify("\u65e5\u7a0b\u8f6c\u4efb\u52a1\u6210\u529f");"today"!=l&&a.taskModel.changeProperty(c.task.id,"dueDate",g.format("{yyyy}-{MM}-{dd}"));
var d=b.find(".convert-to-task");d&&(d.attr("data-id",c.task.id),d.click())})}})});b.off("click.CalendarEdit","#start").on("click.CalendarEdit","#start",function(){a.renderDatePicker($(this))});b.off("click.CalendarEdit","#end").on("click.CalendarEdit","#end",function(){a.renderDatePicker($(this))});b.off("keyup.CalendarEdit","#title").on("keyup.CalendarEdit","#title",function(b){13==b.which&&(b.preventDefault(),$(this).trigger("blur"));b=$(this).val();a.changeEvent&&a.changeEvent("title",b)});b.off("click.CalendarEdit",
".handle-item\x3ea").on("click.CalendarEdit",".handle-item\x3ea",function(c){c=$(this);var d=c.attr("data-link");c.parent().addClass("hide");"subtaskCon"!=d&&$(".j_detailCommands").removeClass("hide");"i-remind"==c[0].id&&"#agenda-remind"==$(c[0]).attr("for")&&(b.find("#start").val()||f.notify("\u8bf7\u8bbe\u7f6e\u65e5\u7a0b\u7684\u8d77\u59cb\u65f6\u95f4,\u5426\u5219\u8bbe\u7f6e\u7684\u63d0\u9192\u5c06\u65e0\u6cd5\u751f\u6548"));a.renderHandle()});f.datepicker({el:"#endRepeatTime",callback:function(b){(b=
b.date)||(b="");b instanceof Date&&(b=a.allDay?b.format("{yyyy}-{MM}-{dd}"):b.format("{yyyy}-{MM}-{dd} {HH}:{mm}"));$("#endRepeatTime").val(b)}})},renderHandle:function(){var a=!0,b=0;$(".j_detailhandle .handle-item").each(function(){$(this).hasClass("hide")?"i-subtask"==$(this).find("a").attr("id")&&b++:(a=!1,b++)});a&&$(".j_detailhandle").addClass("hide")},render:function(){var a=this,b=$(a.el);if(this.id)this.initComponent(),b.find("#edit_event").val("\u66f4\u65b0\u65e5\u7a0b"),$.ajax({type:"get",
url:"/agenda/"+this.id+".json?user.id\x3d"+a.userId,dataType:"json",success:function(c){a.data=c;c.entityRemind&&c.entityRemind.id&&b.find($(a.entityremind.el).attr("icon")).parent().addClass("hide");if(c.actionMsg&&c.actionMsg.message)return $(a.el).html(f.template("base.nopermission",{msg:c.actionMsg,module:"calendar",id:a.id})),$(a.el).find(".scrollwrapper").trigger("resizeSroll"),!1;var d=c.webAgenda;a.lastWebAgenda=c.webAgenda;b.find(".j_detailhandle").removeClass("hide");a.renderAgenda(d);null!=
a.extendView&&a.extendView.render(c.webAgenda)}});else{var c={};a.obj&&(c.title=a.obj.attr("entity-title"));c.start=this.start;c.end=this.end;c.allDay=a.allDay;a.renderAgenda(c);b.find(".j_extend").addClass("hide");b.find(".j_detailhandle").addClass("hide")}},renderAgenda:function(a){var b=$(this.el);if(a.id){b.find("#toTask").parent().removeClass("hide");b.find("#deleteAgenda").parent().removeClass("hide");b.find("#edit_event").parent().addClass("hide");var c=a.creator,d='\x3ca id\x3d"'+c.id+'" class\x3d"usercard-toggle" userid\x3d"'+
c.id+'"\x3e'+c.username+"\x3c/a\x3e";b.find("#creator").append(d);b.find("#calendar-creator").removeClass("hide");b.find("#calendar-createTime").removeClass("hide");b.find("#createTime").text(Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}"));c&&(d="images/avatar.png",c.avatar&&(d=c.avatar.p5&&"/base/download/"+c.avatar.p5),b.find(".j_summary-avatar").attr("userId",c.id),b.find(".j_summary-avatar").attr("data-original-title",Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}")+
" \u7531"+c.username+"\u521b\u5efa").children("img").attr("src",d))}b.find("#title").val(a.title).autosize();b.find("#detail").val(a.content).autosize();b.find("#place").val(a.place);a.allDay?(d="{yyyy}-{MM}-{dd}",b.find("#isAllday").attr("checked","checked"),this.allDay=!0,c=Date.create(a.end-864E5).format(d)):(d="{yyyy}-{MM}-{dd} {HH}:{mm}",b.find("#isAllday").removeAttr("checked"),this.allDay=!1,c=Date.create(a.end).format(d));d=Date.create(a.start).format(d);b.find("#start").val(d);b.find("#end").val(c);
if(a.repeat){b.find("#isRepeat").attr("checked","checked");b.find("#repeatSetting").removeClass("hide");b.find("#repeatType").val(a.repeatType);if("everyday"==a.repeatType)b.find("#unit").text("\u5929");else if("everyWeek"==a.repeatType){b.find("#unit").text("\u5468");b.find("#weekRepeatDate").removeClass("hide");c=Date.create(a.start).format("{Weekday}").toLowerCase();b.find("input[type\x3d'checkbox'][name\x3d'repeatItem'][value\x3d'"+c+"']").attr("checked","checked");var e=a.weekCycles;b.find("input[type\x3dcheckbox][name\x3drepeatItem]").each(function(a){a=
$(this).val();-1!=e.indexOf(a)&&$(this).attr("checked","checked")})}else"everyMonth"==a.repeatType?b.find("#unit").text("\u6708"):"everyYear"==a.repeatType&&b.find("#unit").text("\u5e74");b.find("#frequency").val(a.frequency);c=a.endRepeatType;b.find("#endRepeatType").val(c);"number"==c?(b.find("#overCountEdit").removeClass("hide"),b.find("#repeatCount").val(a.repeatCount)):"date"==c&&(b.find("#overTimeEdit").removeClass("hide"),d="{yyyy}-{MM}-{dd} {HH}:{mm}",b.find("#endRepeatTime").val(Date.create(a.endRepeatDate).format(d)));
this.resetRepeatResult()}else b.find("#isRepeat").removeAttr("checked");b.find("#visibleType").val(a.visibleType);a.shareEntrys&&this.shareView.render(a.shareEntrys);(a.permission||"0"==a.permission)&&this.permissionView.render(this.reducePermission(a));if(a.id){this.renderRelevanceInfos(a.relevances);if(null!=this.mainline)this.mainline.render(a.mainlines);else return;this.tag.render(a.tags);this.attachment.render(a.attachments);this.data&&this.entityremind.render(a.entityRemind,a.remindEntryList);
this.renderHandle()}b.find("#title").focus()},renderRelevanceInfos:function(a){var b=$(this.el),c=this.relevanceViews,d=[],e=[],g=[],f=[];_.each(a,function(a){var b=a.targetModule;"task"==b?d.push(a):"document"==b?e.push(a):"customer"==b?f.push(a):"workflow"==b&&g.push(a)});_.each(c,function(a){"task"==a._targetModule?(a.render(d),0<d.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):"document"==a._targetModule?(a.render(e),0<e.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):
"customer"==a._targetModule?(a.render(f),0<f.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):"workflow"==a._targetModule&&(a.render(g),0<g.length&&b.find($(a.el).attr("icon")).parent().addClass("hide"))})},reducePermission:function(a){return 3===a.permission?1:a.permission},addAgenda:function(){var a=this,b=$(a.el);if(a.checkParam()){var c=[];b.find("a.usercard-toggle").each(function(a){c.push($(this).attr("userid"))});var d=a.buildAgenda();a.obj&&(d.targetId=a.obj.attr("targetId"),
d.module=a.obj.attr("module"));var b=JSON.stringify(c),d=JSON.stringify(d),e="{";a.fromTargetId&&(e+='"fromTargetId":"'+a.fromTargetId+'",');a.fromModule&&(e+='"fromModule":"'+a.fromModule+'",');a.fromTargetName&&(e.fromTargetName=a.fromTargetName,e+='"fromTargetName":"'+a.fromTargetName+'",');e=e+('"shares":'+b+',"webAgenda":'+d)+"}";$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda.json",dataType:"json",data:e,success:function(b){f.notify("\u65b0\u5efa\u6210\u529f");
a.page&&a.page.el&&"#calendar-panel"==a.page.el?a.page.trigger("afterAgendaCreate",b.agenda.id):(a.id=b.agenda.id,a.render());a.fromTargetId&&"mainline"==a.fromModule&&a.callbacks.afterCreate(b)}})}},updateAgenda:function(a){var b=this;$(b.el);if(b.checkParam()){var c=b.buildAgenda(a),c=JSON.stringify(c);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda/"+a+".json?_method\x3dput",dataType:"json",data:'{"webAgenda":'+c+"}",success:function(a){b.callback()}})}},changeProperty:function(a,
b){var c=this,d=$(c.el);if(c.checkParam()&&a&&b){var e=c.buildAgenda(a),e=JSON.stringify(e);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/agenda/changeProperty/"+a+".json",dataType:"json",data:'{"propertyName":"'+b+'","webAgenda":'+e+"}",success:function(a){c.lastWebAgenda=a.webAgenda;f.notify("\u4fee\u6539\u6210\u529f");if(c.changeEvent)switch(b){case "repeatSetting":c.changeEvent("repeatChange");break;case "startDate":c.changeEvent("start",new Date(c.buildStartDate().getTime()+
288E5),new Date(c.buildEndDate().getTime()+288E5));break;case "endDate":c.changeEvent("end",new Date(c.buildStartDate().getTime()+288E5),new Date(c.buildEndDate().getTime()+288E5));break;case "allDay":c.changeEvent("allDay",d.find("#isAllday").get(0).checked,new Date(c.buildStartDate().getTime()+288E5),new Date(c.buildEndDate().getTime()+288E5))}}})}},checkParam:function(){var a=$(this.el),b=a.find("#title").val();if(null==b||""==b)return f.notify("\u8bf7\u8f93\u5165\u65e5\u7a0b\u540d\u79f0"),!1;
if(b&&100<$.trim(b).length)return f.notify("\u540d\u79f0\u6700\u5927\u957f\u5ea6\u4e0d\u8d85\u8fc7100\u5b57"),!1;var c=a.find("#start").val();if(null==c||""==c)return f.notify("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7684\u8d77\u59cb\u65f6\u95f4"),!1;b=a.find("#end").val();if(null==b||""==b)return f.notify("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7684\u7ed3\u675f\u65f6\u95f4"),!1;c=c.replace(/-/g,"/");b=b.replace(/-/g,"/");if(!(new Date(c)).isValid())return f.notify("\u8d77\u59cb\u65f6\u95f4\u683c\u5f0f\u4e0d\u6b63\u786e"),
!1;if(!(new Date(b)).isValid())return f.notify("\u7ed3\u675f\u65f6\u95f4\u683c\u5f0f\u4e0d\u6b63\u786e"),!1;c=new Date(c);b=new Date(b);if(this.allDay){if(c.getTime()>b.getTime())return f.notify("\u7ed3\u675f\u65f6\u95f4\u8981\u5927\u4e8e\u8d77\u59cb\u65f6\u95f4"),!1}else if(c.getTime()>=b.getTime())return f.notify("\u7ed3\u675f\u65f6\u95f4\u8981\u5927\u4e8e\u8d77\u59cb\u65f6\u95f4"),!1;if(a.find("#isRepeat").get(0).checked){b=/^[1-9]+[0-9]*]*$/;c=a.find("#frequency").val();if(!b.test(c))return f.notify("\u91cd\u590d\u9891\u7387\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),
!1;c=a.find("#repeatCount").val();if(!b.test(c))return f.notify("\u91cd\u590d\u6b21\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;if("everyWeek"==a.find("#repeatType").val()&&0==a.find("input[type\x3d'checkbox'][name\x3d'repeatItem']:checked").length)return f.notify("\u8bf7\u8bbe\u7f6e\u5468\u91cd\u590d\u6761\u4ef6"),!1}return(b=a.find("#place").val())&&50<$.trim(b).length?(f.notify("\u5730\u70b9\u6700\u5927\u957f\u5ea6\u4e0d\u8d85\u8fc750\u5b57"),!1):(a=a.find("#detail").val())&&500<$.trim(a).length?
(f.notify("\u8be6\u60c5\u6700\u5927\u957f\u5ea6\u4e0d\u8d85\u8fc7500\u5b57"),!1):!0},buildStartDate:function(){var a=$(this.el).find("#start").val();return Date.create(a)},buildEndDate:function(){var a=$(this.el).find("#end").val();0>a.indexOf(":")&&(a+=" 23:59");return Date.create(a)},buildAgenda:function(a){var b=$(this.el),c={};a&&(c.id=a);c.title=b.find("#title").val();a=this.buildStartDate();var d=this.buildEndDate();c.start=a.getTime();c.end=d.getTime();c.content=b.find("#detail").val();c.place=
b.find("#place").val();b.find("#isAllday").get(0).checked?c.allDay=!0:c.allDay=!1;c.visibleType=b.find("#visibleType").val();if(b.find("#isRepeat").get(0).checked){c.repeat=!0;c.repeatType=b.find("#repeatType").val();c.frequency=b.find("#frequency").val();var e="";b.find("input[type\x3dcheckbox][name\x3drepeatItem]:checked").each(function(a){var c=$(this).val();e+=c;a!=b.find("input[type\x3dcheckbox][name\x3drepeatItem]:checked").length-1&&(e+=",")});""!=e&&(c.weekCycles=e);d=b.find("#endRepeatType").val();
c.endRepeatType=d;"number"==d?c.repeatCount=b.find("#repeatCount").val():"date"==d&&(d=b.find("#endRepeatTime").val(),d=d.replace(/-/g,"/"),d=new Date(d),c.start=a.getTime(),c.endRepeatDate=d);c.result=b.find("#repeatReaultEdit").text()}else c.repeat=!1;return c},resetRepeatResult:function(){var a=$(this.el),b="";if(!a.find("#repeatSetting").hasClass("hide")){var c=a.find("#frequency").val(),d=a.find("#unit").text(),e=a.find("#endRepeatType").val(),b="\u6bcf "+c+" "+d;"everyWeek"==a.find("#repeatType").val()&&
a.find("input[type\x3dcheckbox][name\x3drepeatItem]:checked").each(function(c){var d=$(this).val();switch(d){case "sunday":d="\u661f\u671f\u65e5";break;case "monday":d="\u661f\u671f\u4e00";break;case "tuesday":d="\u661f\u671f\u4e8c";break;case "wednesday":d="\u661f\u671f\u4e09";break;case "thursday":d="\u661f\u671f\u56db";break;case "friday":d="\u661f\u671f\u4e94";break;case "saturday":d="\u661f\u671f\u516d"}b+=" ";b+=d;b=c!=a.find("input[type\x3dcheckbox][name\x3drepeatItem]:checked").length-1?b+
"\u3001":b+","});"never"==e?-1!=b.lastIndexOf(",")&&(b=b.substring(0,b.length-1)):"number"==e?(c=a.find("#repeatCount").val(),b+=" \u5171"+c+"\u6b21"):"date"==e&&(c=a.find("#endRepeatTime").val(),b+=" \u622a\u6b62\u5230"+c);a.find("#repeatReaultEdit").text(b)}b!=this.lastWebAgenda.result&&this.changeProperty(this.id,"repeatSetting")},renderDatePicker:function(a){var b=this;$(a).datetimepicker("hide");$(a).datetimepicker("remove");b.allDay?b.initDatePickerProperty(a,"yyyy-mm-dd","month","month"):b.initDatePickerProperty(a,
"yyyy-mm-dd hh:ii","month","day");$(a).datetimepicker("show");$(a).datetimepicker().on("changeDate",function(c){(c=c.date)||(c="");c instanceof Date&&(c=b.allDay?c.format("{yyyy}-{MM}-{dd}"):c.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),$(a).val(c))})},initDatePickerProperty:function(a,b,c,d){$(a).datetimepicker({format:b,language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,initialDate:new Date,startView:c,minView:d,maxView:"decade",pickerPosition:"bottom-right",showMeridian:!1})},strToDate:function(a){return eval("new Date("+
a.replace(/\d+(?=-[^-]+$)/,function(a){return parseInt(a,10)-1}).match(/\d+/g)+")")},undelegateEvents:function(){$(this.el).off(".CalendarEdit")},remove:function(){this.undelegateEvents();f.removeDatepicker("#start");f.removeDatepicker("#end");f.removeDatepicker("#endRepeatTime");var a=$(this.el);this.extendView&&(this.extendView.remove(),this.extendView=null);this.permissionView&&(this.permissionView.remove(),this.permissionView=null);this.relevanceViews&&(_.each(this.relevanceViews,function(a){a.remove()}),
this.relevanceViews=null);this.tag&&(this.tag.remove(),this.tag=null);this.mainline&&(this.mainline.remove(),this.mainline=null);this.attachment&&(this.attachment.remove(),this.attachment=null);this.entityremind&&(this.entityremind.remove(),this.entityremind=null);a.off(".CalendarEdit");a.find(".module-detail-view").remove()}});m.exports=h});
define("teams/follow/followpage",["teams/core/page","teams/org/followview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/org/followview");h=q.extend({initialize:function(e){this.userId=e.userId||TEAMS.currentUser.id;this.options=e;this.el="#mainContainer";this.pageKey=this.type=e.type||"myfollow";this.template="follow.page";this.isMe=this.userId==TEAMS.currentUser.id},render:function(){this.initLayout({userId:this.userId});this.options.el=this.el+" #follow_container .j_main .j_con";var e=
this.options.type||"myfollow";$(this.el).find(".aside-nav li.j_"+e).addClass("active");this.mainView=new f(this.options);this.mainView.render();this.renderType()},renderType:function(){var e=this.options.type||"myfollow";this.isMe?("myfollow"==e?$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u6211\u5173\u6ce8\u7684\u4eba"):"myfans"==e?$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u5173\u6ce8\u6211\u7684\u4eba"):
"subordinate"==e&&$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u6211\u7684\u4e0b\u5c5e"),$(this.el).find(".aside-nav li.j_myfollow").html('\x3ca class\x3d"link-item"\x3e\u6211\u5173\u6ce8\u7684\x3c/a\x3e'),$(this.el).find(".aside-nav li.j_myfans").html('\x3ca class\x3d"link-item"\x3e\u5173\u6ce8\u6211\u7684\x3c/a\x3e'),$(this.el).find(".aside-nav li.j_subordinate").html('\x3ca class\x3d"link-item"\x3e\u6211\u7684\u4e0b\u5c5e\x3c/a\x3e')):("myfollow"==
e?$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u4ed6\u5173\u6ce8\u7684\u4eba"):"myfans"==e?$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u5173\u6ce8\u4ed6\u7684\u4eba"):"subordinate"==e&&$(this.el).find("#followFansContainer h5").html("\x3ci class\x3d'imgcon img-follow'\x3e\x3c/i\x3e\u4ed6\u7684\u4e0b\u5c5e"),$(this.el).find(".aside-nav li.j_myfollow").html('\x3ca class\x3d"link-item"\x3e\u4ed6\u5173\u6ce8\u7684\x3c/a\x3e'),
$(this.el).find(".aside-nav li.j_myfans").html('\x3ca class\x3d"link-item"\x3e\u5173\u6ce8\u4ed6\u7684\x3c/a\x3e'),$(this.el).find(".aside-nav li.j_subordinate").html('\x3ca class\x3d"link-item"\x3e\u4ed6\u7684\u4e0b\u5c5e\x3c/a\x3e'),TEAMS.blogUser&&"female"==TEAMS.blogUser.sex&&($(this.el).find(".aside-nav li.j_myfollow").html('\x3ca class\x3d"link-item"\x3e\u5979\u5173\u6ce8\u7684\x3c/a\x3e'),$(this.el).find(".aside-nav li.j_myfans").html('\x3ca class\x3d"link-item"\x3e\u5173\u6ce8\u5979\u7684\x3c/a\x3e'),
$(this.el).find(".aside-nav li.j_subordinate").html('\x3ca class\x3d"link-item"\x3e\u5979\u7684\u4e0b\u5c5e\x3c/a\x3e')))}});m.exports=h});
define("teams/system/systemremindmodel",function(h,q,m){h=Backbone.Model.extend({id:1,initialize:function(f){},loadWorkreportRemind:function(f){var e=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:"/systemremind/"+e.id+".json",dataType:"json",data:{},success:function(c){for(var b=0;b<c.workreportReminds.length;b++){var a=c.workreportReminds[b];"week"==a.type?e.weekEarlytime=a.value:"month"==a.type?e.monthEarlytime=a.value:"season"==a.type?e.seasonEarlytime=a.value:"year"==
a.type?e.yearEarlytime=a.value:"halfYear"==a.type&&(e.halfYearEarlytime=a.value)}f&&f(c)}})},saveWorkreportRemind:function(f,e,c,b){var a=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:"/systemremind/saveWorkreportRemind.json",dataType:"json",data:{"workreportRemind.type":f,"workreportRemind.value":e,"workreportRemind.enabled":c},success:function(c){"week"==f?a.weekEarlytime=e:"month"==f?a.monthEarlytime=e:"season"==f?a.seasonEarlytime=e:"year"==f?a.yearEarlytime=e:"halfYear"==
f&&(a.halfYearEarlytime=e);b&&b(c)}})},testToday:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:"/systemremind/testToday.json",dataType:"json",data:{testToday:f},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/system/infoview",["teams/utils","teams/component/validation"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/validation");h=Backbone.View.extend({initialize:function(c){this.el=c.container||"#mainContainer";$(this.el).html(f.template("base.tenantinfo"))},delegateEvents:function(){var c=this;$("body").on("click.tenantInfo",".goto-top",function(b){f.gotoTop(".j_tenantinfoWrapScr")});$(c.el).on("click.tenantInfo","#btn-update",function(b){c.saveProperty($(this))})},render:function(){TEAMS.currentUser.admin&&
!TEAMS.currentTenant.dateUpdated&&$("#perfectInfo-msg").removeClass("hide");TEAMS.currentUser.admin&&$("#btn-update").removeClass("hide");this.queryTenantInfo(function(c){c=c.tenant;$("#tenantinfo").data("tenantInfo",c);TEAMS.currentUser.admin?($("#tenantinfo input.j_ti_check").removeClass("hide"),$("#tenantinfo span.j_ti_check").addClass("hide")):($("#tenantinfo input.j_ti_check").addClass("hide"),$("#tenantinfo span.j_ti_check").removeClass("hide"));$("#tenantinfo .j_tenantName").text(c.tenantName);
$("#tenantinfo .j_tenantName").val(c.tenantName);$("#tenantinfo .tenantKey").text(c.tenantKey);$("#tenantinfo .j_contact").text(c.contact);$("#tenantinfo .j_contact").val(c.contact);$("#tenantinfo .j_mobile").text(c.mobile);$("#tenantinfo .j_mobile").val(c.mobile);$("#tenantinfo .j_email").text(c.email);$("#tenantinfo .j_email").val(c.email);$("#tenantinfo .j_telephone").text(c.telephone);$("#tenantinfo .j_telephone").val(c.telephone);$("#tenantinfo .j_address").text(c.address);$("#tenantinfo .j_address").val(c.address);
$("#tenantinfo .maxLicense").text(c.usedLicense+"/"+c.maxLicense);var b="\u8bd5\u7528";switch(c.status){case "normal":b="\u6b63\u5e38";break;case "inarrears":b="\u6b20\u8d39";break;case "locked":b="\u9501\u5b9a"}$("#tenantinfo .status").text(b);$("#tenantinfo .dateCreated").text(Date.create(c.dateCreated).format("{yyyy}-{MM}-{dd}"));"probation"==c.status?($("#tenantinfo .dateExpired").parent().addClass("hide"),$("#tenantinfo .dateLeft").parent().addClass("hide")):(b=c.dayRemain,null!=b&&30>parseInt(b)&&
0<=parseInt(b)?($("#tenantinfo .dateExpired").html("\x3cfont color\x3d'red'\x3e"+Date.create(c.dateExpired).format("{yyyy}-{MM}-{dd}")+"\x3c/font\x3e"),$("#tenantinfo .dateLeft").html("\x3cfont color\x3d'red'\x3e"+b+"\u5929\x3c/font\x3e")):null!=b?($("#tenantinfo .dateExpired").text(Date.create(c.dateExpired).format("{yyyy}-{MM}-{dd}")),$("#tenantinfo .dateLeft").text(b+"\u5929")):($("#tenantinfo .dateExpired").text(""),$("#tenantinfo .dateLeft").text("")));b=new Number(c.usedSpace);b.toFixed(2)<
c.maxSpace?$("#tenantinfo .usedSpace").html("\x3cb\x3e"+b.toFixed(2)+"M\x3c/b\x3e  [\u6700\u5927\u7a7a\u95f4:"+c.maxSpace+"M]"):$("#tenantinfo .usedSpace").html("\x3cfont color\x3d'red'\x3e\x3cb\x3e"+b.toFixed(2)+"M\x3c/b\x3e\x3c/font\x3e  [\u6700\u5927\u7a7a\u95f4:"+c.maxSpace+"M]");c=new Number(100*b/c.maxSpace);$("#tenantinfo .progress-bar-info").css("width",c.toFixed(1)+"%")});f.layout(".j_tenantinfoWrapScr")},queryTenantInfo:function(c){$.ajax({url:"/info.json",type:"get",dataType:"json",success:function(b){c&&
c(b)}})},saveProperty:function(c){var b=$("#tenantinfo");if(!e.formValidateImm(b))return!1;b.data("tenantInfo");var a={};a["tenant.tenantName"]=$.trim(b.find('input[name\x3d"tenantName"]').val());a["tenant.contact"]=$.trim(b.find('input[name\x3d"contact"]').val());a["tenant.mobile"]=$.trim(b.find('input[name\x3d"mobile"]').val());a["tenant.email"]=$.trim(b.find('input[name\x3d"email"]').val());a["tenant.telephone"]=$.trim(b.find('input[name\x3d"telephone"]').val());a["tenant.address"]=$.trim(b.find('input[name\x3d"address"]').val());
c.attr("disabled","disabled");$.ajax({url:"/info/updateTenantInfo.json",type:"post",dataType:"json",data:a,success:function(a){c.removeAttr("disabled");if(a.message)return f.notify(a.message);$("#tenantinfo").data("tenantInfo",a.tenant);f.notify("\u4fee\u6539\u6210\u529f")}})},remove:function(){this.off()}});m.exports=h});
define("teams/system/systempage","teams/core/page teams/utils teams/system/infoview teams/base/versioninfoview teams/wechat/wechatauthview teams/wechat/wechatserviceview teams/integration/integrationview teams/system/systemremind".split(" "),function(h,q,m){q=h("teams/core/page");h("teams/utils");var f=h("teams/system/infoview"),e=h("teams/base/versioninfoview"),c=h("teams/wechat/wechatauthview"),b=h("teams/wechat/wechatserviceview"),a=h("teams/integration/integrationview"),d=h("teams/system/systemremind");
h=q.extend({initialize:function(a){this.isAdmin=TEAMS.currentUser.admin;this.pageActive=this.pageKey=a.pageKey;this.reloadPage=a.reloadPage;this.options=a;this.el="#mainContainer";this.template="system.page"},render:function(){this.initLayout({isAdmin:this.isAdmin});$(this.el).find(".aside-nav li.j_"+this.pageKey).addClass("active");$("#navigation").find("#menu-wechat").parent().removeClass("active");switch(this.pageKey){case "info":this.mainView=new f({container:this.el+" #systemContainer .j_main"});
this.mainView.render();break;case "versioninfo":this.mainView=new e(this.options);this.mainView.render();break;case "wechat":this.mainView=new c({container:this.el+" #systemContainer .j_main"});this.mainView.render();break;case "wechatservice":this.mainView=new b({container:this.el+" #systemContainer .j_main"});this.mainView.render();break;case "integration":this.mainView=new a({container:this.el+" #systemContainer .j_main"});this.mainView.render();break;case "systemremind":this.mainView=new d({container:this.el+
" #systemContainer .j_main"}),this.mainView.render()}}});m.exports=h});
define("teams/system/systemremind",["teams/utils","teams/system/systemremindmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/system/systemremindmodel");h=Backbone.View.extend({initialize:function(c){this.isAdmin=TEAMS.currentUser.admin;this.el=c.container;this.serverPath=c.serverPath;this.model=new e({serverPath:this.serverPath});$(this.el).html(f.template("system.systemremind",{isAdmin:this.isAdmin}))},delegateEvents:function(){var c=this,b=c.model,a=$(c.el);a.on("click.systemremindview",
".weekreport_day",function(c){if(c=a.find(".weekreport_remind").hasClass("open")){var e=$(":radio[name\x3d'weekreport_day']:checked").val();e!=b.weekEarlytime&&b.saveWorkreportRemind("week",e,c,function(){f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})}});a.on("blur.systemremindview",".earlytime",function(d){var e=$(this);d=$.trim(e.val());e.hasClass("monthreport")?(e=a.find(".monthreport_remind").hasClass("open"))&&c.checkWorkreportParam(d,"month")&&d!=b.monthEarlytime&&b.saveWorkreportRemind("month",
d,e,function(){f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")}):e.hasClass("seasonreport")?(e=a.find(".seasonreport_remind").hasClass("open"))&&c.checkWorkreportParam(d,"season")&&d!=b.seasonEarlytime&&b.saveWorkreportRemind("season",d,e,function(){f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")}):e.hasClass("yearreport")?(e=a.find(".yearreport_remind").hasClass("open"))&&c.checkWorkreportParam(d,"year")&&d!=b.yearEarlytime&&b.saveWorkreportRemind("year",d,e,function(){f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")}):
e.hasClass("halfYearreport")&&(e=a.find(".halfYearreport_remind").hasClass("open"))&&c.checkWorkreportParam(d,"halfYear")&&d!=b.halfYearEarlytime&&b.saveWorkreportRemind("halfYear",d,e,function(){f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})});a.on("click.systemremindview",".e-range",function(d){var e=$(this),l=e.hasClass("open");e.hasClass("weekreport_remind")?(d=$(":radio[name\x3d'weekreport_day']:checked").val(),(l||!l&&c.checkWorkreportParam(d,"week"))&&b.saveWorkreportRemind("week",
d,!l,function(){l?e.removeClass("open"):e.addClass("open");f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})):e.hasClass("monthreport_remind")?(d=a.find(".earlytime.monthreport").val(),(l||!l&&c.checkWorkreportParam(d,"month"))&&b.saveWorkreportRemind("month",d,!l,function(){l?e.removeClass("open"):e.addClass("open");f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})):e.hasClass("seasonreport_remind")?(d=a.find(".earlytime.seasonreport").val(),(l||!l&&c.checkWorkreportParam(d,
"season"))&&b.saveWorkreportRemind("season",d,!l,function(){l?e.removeClass("open"):e.addClass("open");f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})):e.hasClass("yearreport_remind")?(d=a.find(".earlytime.yearreport").val(),(l||!l&&c.checkWorkreportParam(d,"year"))&&b.saveWorkreportRemind("year",d,!l,function(){l?e.removeClass("open"):e.addClass("open");f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")})):e.hasClass("halfYearreport_remind")&&(d=a.find(".earlytime.halfYearreport").val(),
(l||!l&&c.checkWorkreportParam(d,"halfYear"))&&b.saveWorkreportRemind("halfYear",d,!l,function(){l?e.removeClass("open"):e.addClass("open");f.notify("\u8bbe\u7f6e\u62a5\u544a\u63d0\u9192\u6210\u529f")}))});a.off("click.systemremindview","#test-today").on("click.systemremindview","#test-today",function(){c.testToday($(this))});a.off("click.systemremindview","#test-submit").on("click.systemremindview","#test-submit",function(){var c=a.find("#test-today").val();c&&0<c.length?b.testToday(c+":00",function(){f.notify("\u65f6\u95f4\u8bbe\u7f6e\u6210\u529f")}):
f.notify("\u8bf7\u8bbe\u7f6e\u65f6\u95f4")})},testToday:function(c){$(c).datetimepicker("remove");this.initDatePickerProperty(c,"yyyy-mm-dd hh:ii","month","day");$(c).datetimepicker("show");$(c).datetimepicker().on("changeDate",function(b){(b=b.date)||(b="");b instanceof Date&&(b=b.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),$(c).val(b))})},initDatePickerProperty:function(c,b,a,d){$(c).datetimepicker({format:b,language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,initialDate:new Date,startView:a,
minView:d,maxView:"decade",pickerPosition:"bottom-right",showMeridian:!1})},render:function(){this.renderWorkreportRemind();this.testToday()},renderWorkreportRemind:function(){var c=this;c.model.loadWorkreportRemind(function(b){if(b=b.workreportReminds)for(var a=0;a<b.length;a++)"week"==b[a].type?b[a].enabled?($(":radio[name\x3dweekreport_day][value\x3d"+b[a].value+"]").attr("checked","true"),$(c.el).find(".weekreport_remind").addClass("open")):$(c.el).find(".weekreport_remind").removeClass("open"):
"month"==b[a].type?b[a].enabled?($(c.el).find(".earlytime.monthreport").val(b[a].value),$(c.el).find(".monthreport_remind").addClass("open")):$(c.el).find(".monthreport_remind").removeClass("open"):"season"==b[a].type?b[a].enabled?($(c.el).find(".earlytime.seasonreport").val(b[a].value),$(c.el).find(".seasonreport_remind").addClass("open")):$(c.el).find(".seasonreport_remind").removeClass("open"):"year"==b[a].type?b[a].enabled?($(c.el).find(".earlytime.yearreport").val(b[a].value),$(c.el).find(".yearreport_remind").addClass("open")):
$(c.el).find(".yearreport_remind").removeClass("open"):"halfYear"==b[a].type&&(b[a].enabled?($(c.el).find(".earlytime.halfYearreport").val(b[a].value),$(c.el).find(".halfYearreport_remind").addClass("open")):$(c.el).find(".halfYearreport_remind").removeClass("open"))})},checkWorkreportParam:function(c,b){if(c)if(/^[1-9]+[0-9]*]*$/.test(c)){if(3<c.length)return f.notify("\u5929\u6570\u8d85\u51fa\u8303\u56f4\uff0c\u8bf7\u8bbe\u7f6e\u4e3a1-15\u5929\u5185"),!1;var a=parseInt(c);if("month"==b&&15<a||"season"==
b&&15<a||"year"==b&&15<a||"halfYear"==b&&15<a)return f.notify("\u5929\u6570\u8d85\u51fa\u8303\u56f4\uff0c\u8bf7\u8bbe\u7f6e\u4e3a1-15\u5929\u5185"),!1}else return f.notify("\u5929\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;else return"week"==b?f.notify("\u8bf7\u9009\u62e9\u63d0\u9192\u65f6\u95f4"):f.notify("\u8bf7\u786e\u5b9a\u63d0\u9192\u65f6\u95f4"),!1;return!0},remove:function(){this.off()}});m.exports=h});
define("teams/minichat/newmessage","teams/face/emojiarea teams/utils teams/wechat/chatmodel teams/component/userselector teams/feed/eteamscounter teams/wechat/ChatService teams/minichat/pasteuploadfile teams/base/configmodel".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/wechat/chatmodel"),b=h("teams/component/userselector"),a=h("teams/feed/eteamscounter"),d=h("teams/wechat/ChatService"),g=h("teams/minichat/pasteuploadfile"),l=h("teams/base/configmodel");
h=Backbone.View.extend({el:"#smwx_box",searchTime:null,timer:null,chatDate:null,initialize:function(a){this.chatmodel=new c;this.el="#smwx_box";this.layoutFlag=!0;$("body").append(e.template("minichat.newmessage"));this.chatattachmentURL="/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID;this.chatService=new d;this.configmodel=new l;f($);$("#message-textarea").emojiarea({emojiHeight:-230,emojiLeft:-70,buttonClass:"chat-emoji",buttonParent:"#smwx_box .a-tools"})},delegateEvents:function(){var c=this,
d=$(this.el),f=c.chatmodel;(new $.pasteupload("#message-textarea")).on("pasteImage",function(a,b){var d=$(".smwx-chat-lf li.active").find("a"),e=d.attr("type"),d=d.attr("targetId"),g={};g.dataContentType=b.dataContentType;"channel"==e?g.channelId=d:g.receiver=d;g.base64Data=b.dataURL;$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",data:g,success:function(a){a=a.chatMessage;var b=$(".smwx-chat-lf li.active").find("a").attr("targetId");c.createChatBox(a,"right",$(".smwx-box .smwx-chat"),
b);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)}})}).on("pasteFile",function(a,b){var d=$(".smwx-chat-lf li.active").find("a"),e=d.attr("type"),d=d.attr("targetId"),f={};f.dataFileName=b.pataFileName;f.dataContentType=b.dataContentType;"channel"==e?f.channelId=d:f.receiver=d;f.base64Data=b.dataURL;b.dataContentType&&0<=b.dataContentType.indexOf("image")?(new g({dataURL:b.dataURL,uploadURL:"/base/chatattachment/paste.json",
uploadParam:f})).render():$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",data:f,success:function(a){a=a.chatMessage;var b=$(".smwx-chat-lf li.active").find("a").attr("targetId");c.createChatBox(a,"right",$(".smwx-box .smwx-chat"),b);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)}})});$(c.el).on("afterPaste.newmessage",function(a,b){var d=b.chatMessage,e=$(".smwx-chat-lf li.active").find("a").attr("targetId");
c.createChatBox(d,"right",$(".smwx-box .smwx-chat"),e);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)});$(".tab").on("click.newmessage","li a",function(a){$(".tab li a").removeClass("active");$(this).addClass("active");$(".smwx-box .j_members-more").addClass("hide");$(".smwx-box .j_recent_more").addClass("hide");a=$(this).attr("data-entity");var b=$(this).data("reload");c.renderByTab(a,b);$("#smwx-list-con").trigger("resizeSroll");
$("#smwx-list-con").mCustomScrollbar("update");$("#smwx-list-con").mCustomScrollbar("scrollTo","top")});$(".smwx-chat-lf").on("mouseover.newmessage","ul li",function(a){$(this).children(".smwx-chat-cur-close").show()});$(".smwx-chat-lf").on("mouseleave.newmessage","ul li",function(a){$(this).children(".smwx-chat-cur-close").hide()});$(".smwx-chat-lf").on("click.newmessage",".smwx-chat-cur-close",function(a){a=$(this).parents("li");var b=$(".smwx-chat-lf li.active").find("a").attr("targetId");if(a.hasClass("active")){var c=
a.next();1==c.find("a").size()?c.find("a").trigger("click"):(c=a.prev(),1==c.find("a").size()?c.find("a").trigger("click"):$(".smwx-mini-ctrl-close").trigger("click"))}a.remove();$("#message-list-div"+b).remove()});$(".smwx-chat-lf").on("click.newmessage","li a",function(a){$(".smwx-chat").show(function(){$("#smwx-chat-top").trigger("resizeSroll");$(this).data("show",!0)});if(!$(this).parents("li").hasClass("active")){a=$(".smwx-chat .chat-name").find(".j_memArr");a.hasClass("on")&&a.trigger("click");
a=$(this).attr("type");var b=$(this).attr("targetId");$(this).parents("li").removeClass("high-light");$("#smwx-list-search-result-all").find("#"+b).removeClass("high-light");$("#smwx-list-search-result-channel").find("#"+b).removeClass("high-light");$("#smwx-list-search-result-recent").find("#"+b).removeClass("high-light");$(c.el).find(".smwx-mini-chat-trigger").removeClass("high-light");$(".smwx-chat-scr-con li").removeClass("active");$(this).parents("li").addClass("active");$(".smwx-box .smwx-mini-bar .smwx-mini-name").html($(this).html()).data("targetId",
b).attr("id",b);if("channel"==a){var d="true";$(c.el).find("#history-chat").data("targetId",b);$(c.el).find("#history-chat").data("chatType","channel")}else d="false",$(c.el).find("#history-chat").data("targetId",b),$(c.el).find("#history-chat").data("chatType","employee");d='\x3cdiv class\x3d"chat-name-input disabled" type\x3d"text" data-entity\x3d"'+b+'" contenteditable\x3d'+d+"\x3e"+$(this).html()+'\x3c/div\x3e\x3cdiv class\x3d"a-addmember j_memArr"\x3e\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e';
"channel"==a&&(d+='\x3cdiv class\x3d"quit-channel" title\x3d"\u9000\u51fa\u7fa4\u7ec4"\x3e\x3ci class\x3d"icon-logout"\x3e\x3c/i\x3e\x3c/div\x3e');$(".smwx-chat .chat-name").html(d);$(".smwx-chat .chat-name").attr("chatType",a);"channel"==a?$(".smwx-chat .chat-face img").attr("src","images/group.png"):"chat"==a&&$(this).attr("p5")?$(".smwx-chat .chat-face img").attr("src","/base/download/"+$(this).attr("p5")):"chat"==a&&1E4==b?$(".smwx-chat .chat-face img").attr("src","images/service.png"):
$(".smwx-chat .chat-face img").attr("src","images/avatar.png");$(c.el).find("#message-textarea").val("").focus();c.renderHistoryMessage(a,b,!0)}});$(".smwx-list").on("click.newmessage","div.chat-member",function(b){b=$(this).find("span").data("type");var d=$(this).find("span").data("targetId");if(d!=TEAMS.currentUser.id){var g=$(this).find("span").data("p5")?$(this).find("span").data("p5"):"";if($(this).hasClass("high-light")){var f=$(c.el).find(".smwx-msg-number"),k=f.data("count")-1,k=0>
k?0:k;0==k?(f.parent().toggleClass("high-light"),f.empty()):f.html("("+k+")").data("count",k);$(this).removeClass("high-light");f=$("#smwx-list-con #smwx-list-search-result-recent .chat-member-list .high-light").length;$("#header #top #j_dropMessage .j_wechat span").html(0>=f?"":f);a.totaling()}f=$(this).find("span").html();k=$(c.el).find("#chat-left-list-clone").find("li").clone();0<$(".smwx-chat-lf").find("#"+d).size()?obj=$(".smwx-chat-lf").find("#"+d).parent():(k.find("li").attr("title",f),k.find("a").attr("id",
d),k.find("a").attr("p5",g),k.find("a").attr("type",b),k.find("a").attr("targetId",d),k.find("a").html(f),k.find("a").attr("id",d),obj=k,$(".smwx-chat-lf ul").append(obj),e.layout(".j_chatlistScr"));obj.find("a").trigger("click")}});$(c.el).on("blur.newmessage",".chat-name-input",function(a){var b=$(this).attr("data-entity");if($(this).text()&&0==$.trim($(this).text()).length)e.notify("\u8bf7\u8f93\u5165\u7fa4\u7ec4\u540d\u5b57");else if($(this).text()&&20<$(this).text().length)e.notify("\u7fa4\u7ec4\u540d\u5b57\u6700\u957f20\u4e2a\u5b57");
else{var c={};c.name=$(this).text();c.channelId=b;f.updateChannelName(c,function(a){e.notify("\u7fa4\u7ec4\u540d\u5b57\u4fee\u6539\u6210\u529f");$(".smwx-chat-lf li.active").find("a").html(c.name);1==$(".smwx-list-con").find("#"+b).size()&&$(".smwx-list-con").find("#"+b).find("span.name").html(c.name)})}});$(c.el).off("click.newmessage",".chat-name").on("keydown.newmessage",".chat-name-input",function(a){13==a.keyCode&&(a.preventDefault(),$(this).trigger("blur"))});$(c.el).on("click.newmessage",".chat-name",
function(a){var b=$(this);$(a.target).hasClass("quit-channel")||$(a.target).hasClass("icon-logout")||$(a.target).hasClass("chat-name-input")||($(this).find(".j_memArr").data("open")?($(this).find(".j_memArr").removeClass("on").data("open",!1),$(".j_memberLayer").slideUp("fast")):($(this).find(".j_memArr").addClass("on").data("open",!0),$(".j_memberLayer").slideDown("fast")),$("#channel-member-top").empty(),"channel"==b.parent().find(".chat-name").attr("chatType")&&(a=b.parent().find(".chat-name-input").attr("data-entity"),
c.renderChannelMember(a)))});$(c.el).on("click.newmessage",".quit-channel",function(a){var b=$(this).parent(".chat-name").children(".chat-name-input").attr("data-entity"),c=TEAMS.currentUser.id;e.confirm("\u786e\u8ba4\u9000\u51fa\u7fa4\u7ec4?",function(a){a&&$.ajax({type:"GET",url:"/channel/remove/"+b+"/"+c+".json",dataType:"json",data:{},success:function(a){a&&a.actionMsg?e.notify(a.actionMsg.message):(e.notify("\u9000\u51fa\u7fa4\u7ec4\u6210\u529f"),$("#smwx_box").find(".smwx-mini-ctrl-close").trigger("click"))}})})});
$(".smwx-box").off("click.newmessage",".j_members-more").on("click",".j_members-more",function(a){a=$(this);f.loadAllChatMembers(parseInt(a.attr("pageNo")),function(a){c.renderAllEmployee(a,!1)})});$(".smwx-box").off("click.newmessage",".j_recent_more").on("click",".j_recent_more",function(a){a=$(this).data("searchTime");f.loadRecentChatMembers(a,function(a){c.renderRecentList(a)})});$(".smwx-box").on("keyup.newmessage",".suggestion",function(a){13==a.keyCode?0<$.trim($(this).val()).length?(a={},
a.queryName=$(this).val(),f.queryChatsByName(a,function(a){$(".smwx-list-header").find(".tab").addClass("hide");$(c.el).find("#smwx-list-search-result-all").addClass("hide");$(c.el).find("#smwx-list-search-result-channel").addClass("hide");$(c.el).find("#smwx-list-search-result-recent").addClass("hide");$(c.el).find("#smwx-list-search-result-query").removeClass("hide");null!=a.chatsList&&0<a.chatsList.length?c.renderChatsByQuery(a.chatsList):($(c.el).find("#smwx-list-search-result-query .chat-member-list").empty(),
a=$(c.el).find("#all-employee-service").clone(),a.removeClass("hide"),$(c.el).find("#smwx-list-search-result-query .chat-member-list").append(a));$(".smwx-box .j_members-more").addClass("hide");$(".smwx-box .j_recent_more").addClass("hide")})):c.renderByTab("user",!0):8!=a.keyCode&&46!=a.keyCode||0!=$.trim($(this).val()).length||($(".smwx-list-header").find(".tab").removeClass("hide"),a=$(".tab").find(".active").attr("data-entity"),$(c.el).find("#smwx-list-search-result-query").addClass("hide"),c.renderByTab(a,
!0))});$(".smwx-box").on("click.newmessage",".icon-search",function(a){a=$(this).parent().find("input").val();if($.trim(a).length){var b={};b.queryName=a;f.queryChatsByName(b,function(a){$(".smwx-list-header").find(".tab").addClass("hide");$(c.el).find("#smwx-list-search-result-all").addClass("hide");$(c.el).find("#smwx-list-search-result-channel").addClass("hide");$(c.el).find("#smwx-list-search-result-recent").addClass("hide");$(c.el).find("#smwx-list-search-result-query").removeClass("hide");null!=
a.chatsList&&c.renderChatsByQuery(a.chatsList)})}else c.renderByTab("user",!0)});$(".smwx-chat").on("click.newmessage",".j_btn-send",function(){var a=$(".smwx-chat-lf li.active").find("a");a&&c.sendMessage($("#message-textarea"),a)});$(this.el).on("click.newmessage",".j_sendType_menu li",function(a){a=$(this);a.hasClass("active")||c.setEnterKey(a.data("type"),!0)});$("#message-textarea").on("keydown.newmessage",function(a){if("CtrlEnter"==(d.find(".j_sendType_menu").data("type")||"CtrlEnter")){if(a.ctrlKey&&
13==a.which)return d.find(".j_actionbar .j_btn-send").click(),!1}else if(13==a.which)if(a.ctrlKey)$(this).val($(this).val()+"\r\n");else return d.find(".j_actionbar .j_btn-send").click(),!1;a="";var b=$(this).val();1E3>=b.length?a="\u8fd8\u53ef\u4ee5\u8f93\u5165"+(1E3-b.length)+"\u5b57":1E3<b.length?a="\u5df2\u8d85\u51fa"+(b.length-1E3)+"\u5b57":""==b&&(a="\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57");$(c.el+" #limitTip").html(a)});$(c.el).on("click.newmessage",".smwx-mini-list-trigger",function(){$(".smwx-list").slideDown("fast",
function(){$(".smwx-list-tit-l").find("a.recent").trigger("click")});$(this).addClass("hide")});$(c.el).on("click.newmessage",".smwx-list-ctrl-size",function(){$(c.el).find(".smwx-mini-list-trigger").hasClass("hide")&&$(c.el).find(".smwx-mini-list-trigger").removeClass("hide");$(this).parents(".smwx-list").slideUp("fast")});$("body").on("click.newmessage",function(a){if(null==$(a.target).parents(".modal-dialog").get(0)&&null==$(a.target).parents(".j_chat_filterSlip_js").get(0)&&"\u8bf7\u8f93\u5165\u5fae\u4fe1\u6d88\u606f"!=
$(a.target).parents(".modal-dialog").find(".modal-body").text()){null==$(a.target).parents(".j_memberLayer").get(0)&&!$(a.target).hasClass("chat-name")&&null==$(a.target).parents(".chat-name").get(0)&&$(this).find(".j_memArr").data("open")&&($(this).find(".j_memArr").removeClass("on").data("open",!1),$(".j_memberLayer").slideUp("fast"));var b=$(a.target).parents("#smwx_box"),d=$(a.target).parents("div.fancybox-overlay"),e=$(a.target).parents("div.fancybox-wrap");0>=b.length&&0>=e.length&&0>=d.length&&
!$(a.target).hasClass("fancybox-close")&&!$(a.target).hasClass("smwx-chat-cur-close")&&!$(a.target).hasClass("j_btn_close")&&0< !$(a.target).parents(".wechatAPP-guide-pic-con").length&&0< !$(a.target).hasClass(".smwx-mini-list-trigger").length&&0< !$(a.target).parents("#pasteimg").length&&($(".smwx-list").slideUp("fast"),$(c.el).find(".smwx-list-ctrl-size").trigger("click.newmessage"),$(".smwx-chat").data("show")&&$(c.el).find(".smwx-mini-ctrl-size").trigger("click.newmessage"))}});$(c.el).on("click.newmessage",
".smwx-mini-chat-trigger",function(){$(".smwx-chat").slideDown("fast",function(){$(this).data("show",!0);$("#smwx-chat-top").trigger("resizeSroll");setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom");$(c.el).find("#message-textarea").val("").focus()},300)});$(this).removeClass("high-light")});$(c.el).on("click.newmessage",".smwx-mini-ctrl-size",function(){$(".smwx-chat").slideUp("fast",function(){$(this).data("show",!1)});
$(".smwx-mini-chat-trigger").removeClass("hide")});$(c.el).on("click.newmessage",".smwx-mini-ctrl-close",function(){$(".smwx-chat").hide(function(){$(this).data("show",!1)});$(".smwx-mini-chat-trigger").addClass("hide");$(c.el).find(".smwx-chat-lf ul").empty();$(c.el).find("#message-list-div").empty();$(c.el).find("#message-textarea").val("").focus();$(c.el).find(".word-count").addClass("hide");c.timer&&clearInterval(c.timer)});var l=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",
browse_button:".j_minichat_tool #chat-image-mini",max_file_size:"10mb",container:".j_minichat_tool",filters:[{title:"\u56fe\u7247",extensions:"JPG,PNG,JPEG,GIF,BMP"}],url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});l.init();l.bind("FilesAdded",function(a,b){if(5<b.length){e.notify("\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u4e0a\u4f205\u4e2a\u6587\u4ef6","\u6587\u4ef6\u4e2a\u6570\u8d85\u8fc7\u9650\u5236","error");for(var d=0;d<b.length;d++)a.removeFile(b[d])}else{a.refresh();
var g=$(".smwx-chat-lf li.active").find("a"),d=g.attr("type"),g=g.attr("targetId");a.settings.url="channel"==d?c.chatattachmentURL+"\x26type\x3dimage\x26channelId\x3d"+g:c.chatattachmentURL+"\x26receiver\x3d"+g+"\x26type\x3dimage";a.start()}});l.bind("UploadProgress",function(a,b){});l.bind("Error",function(a,b){-601==b.code?e.notify("\u53ea\u80fd\u4e0a\u4f20\u56fe\u7247","\u6587\u4ef6\u7c7b\u578b\u9519\u8bef","error"):-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6",
"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});l.bind("FileUploaded",function(a,b,c){jQuery.parseJSON(c.response);$(".smwx-chat-lf li.active").find("a").attr("targetId");setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)});l=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:".j_minichat_tool #chat-attachment",max_file_size:"10mb",container:".j_minichat_tool",
url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});l.init();l.bind("FilesAdded",function(a,b){if(5<b.length){e.notify("\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u4e0a\u4f205\u4e2a\u6587\u4ef6","\u6587\u4ef6\u4e2a\u6570\u8d85\u8fc7\u9650\u5236","error");for(var d=0;d<b.length;d++)a.removeFile(b[d])}else{a.refresh();var g=$(".smwx-chat-lf li.active").find("a"),d=g.attr("type"),g=g.attr("targetId");a.settings.url="channel"==d?c.chatattachmentURL+"\x26type\x3dattachment\x26channelId\x3d"+
g:c.chatattachmentURL+"\x26receiver\x3d"+g+"\x26type\x3dattachment";a.start()}});l.bind("UploadProgress",function(a,b){});l.bind("Error",function(a,b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});l.bind("FileUploaded",function(a,b,c){jQuery.parseJSON(c.response);$(".smwx-chat-lf li.active").find("a").attr("targetId");setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");
$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)});$(c.el).off("confirmHandler","#mini-new-channel").on("confirmHandler","#mini-new-channel",function(a,b){var d=b.objs;if(!(1>d.length)){for(var g={ids:""},k=0;k<d.length;k++){var l=d[k];g.ids+=l.id+";";c.addMemberPanel(l)}var h=$(".smwx-chat-lf li.active").find("a"),d=h.attr("type"),k=h.attr("targetId");"channel"==d?(g.channelId=k,f.addMember(g,function(a){e.notify("\u6dfb\u52a0\u6210\u529f");h.trigger("click")})):(0>g.ids.indexOf(k)&&
(g.ids+=k+";"),0>g.ids.indexOf(TEAMS.currentUser.id)&&(g.ids+=TEAMS.currentUser.id+";"),f.createChannel(g,function(a){a=$('\x3cli title\x3d"'+a.channel.name+'"\x3e\x3ca id\x3d"'+a.channel.id+'" p5\x3d""  type\x3d"channel" targetId\x3d"'+a.channel.id+'"\x3e'+a.channel.name+'\x3c/a\x3e\x3cspan class\x3d"smwx-chat-cur-close"\x3e\x3cem\x3e\x26times;\x3c/em\x3e\x3c/span\x3e\x3c/li\x3e');$(".smwx-chat-lf ul").append(a);a.find("a").trigger("click")}))}});$(c.el).on("click.newmessage","#mini-new-channel",
function(a,c){a.stopPropagation();(new b({$target:$(this)})).open()});$(c.el).find(".fancybox").fancybox({closeBtn:!0});$("body").off("chatMessage.websocket").on("chatMessage.websocket",function(a,b){c.websocket_chatMessage(b);c.websocket_recent(b)});$("body").off("updateChannelName0.websocket").on("updateChannelName0.websocket",function(a,b){c.websocket_updateChannelName(b)});$("body").off("createChannel0.websocket").on("createChannel0.websocket",function(a,b){c.websocket_createChannel(b)});$("body").off("quitChannel0.websocket").on("quitChannel0.websocket",
function(a,b){c.websocket_quitChannel(b)});$("body").off("addUsers0.websocket").on("addUsers0.websocket",function(a,b){c.websocket_addUsers(b)});$("body").off("deleteChannel.websocket").on("deleteChannel.websocket",function(a,b){c.websocket_deleteChannel(b)})},render:function(){this.renderRecent(!0,!0);$(".smwx-list-tit-l").find("a.recent").data("reload",!0);this.unreadTimer=setInterval(function(){},1E4);e.layout("#smwx-list-con");var a=_.find(TEAMS.userConfig,function(a){return"chat.enter.key"==
a.configKey});this.setEnterKey(a&&a.configValue)},setEnterKey:function(a,b){var c=$(this.el),d=a||"CtrlEnter",e="CtrlEnter"==d?"Ctrl+Enter":"Enter",c=c.find(".j_actionbar");c.find(".j_sendType_menu").data("type",d);c.find(".j_key-tip").html('\x3ci class\x3d"icon-exclamation-sign icoinline"\x3e\x3c/i\x3e\u6309'+e+"\u952e\u53d1\u9001");c.find('ul.j_sendType_menu li[data-type\x3d"'+d+'"]').addClass("active").siblings().removeClass("active");if(b){var g=!1;_.each(TEAMS.userConfig,function(a){"chat.enter.key"==
a.configKey&&(a.configValue=d,g=!0)});g||TEAMS.userConfig.push({configKey:"chat.enter.key",configValue:d});this.configmodel.saveConfig({configKey:"chat.enter.key",configValue:d})}},websocket_chatMessage:function(a){var b=this,c=!1,d="left",g=a.chatMessageLog.chatMessage;"channel"==g.chatType?(a=g.receiverChannelId,$("#smwx-list-search-result-channel").find("#"+a),g.senderEmployeeId==TEAMS.currentUser.id&&(d="right")):g.senderEmployeeId==TEAMS.currentUser.id?(d="right",a=g.receiverEmployeeId):(a=g.senderEmployeeId,
$("#smwx-list-search-result-all").find("#"+g.senderEmployeeId));b.createChatBox_new(g,d,$("#smwx_box .smwx-chat"),a);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom");$("#message-textarea").focus()},300);$(".smwx-chat-lf li.active").find("a").attr("targetId");var d=TEAMS.currentTenant.tenantKey,f=TEAMS.currentUser.id,l=$("#leftChatList").find(".j_leftChatOne#"+a+"").parent();0<l.length&&l.hasClass("active")&&(c=!0);0==$("#smwx_box #message-list-div"+
a).size()?g.senderEmployeeId!=f&&$("#smwx_box .smwx-mini-list-trigger").addClass("high-light"):g.senderEmployeeId!=f&&c?this.chatService.markRead(d,f,g.chatType,g.senderEmployeeId,g.receiverChannelId,function(a){0!=a.actionMsg.code?e.notify(a.actionMsg.message):b.updateUnreadNumber(a.data)}):g.senderEmployeeId==f||c||l.addClass("high-light")},websocket_recent:function(a){a=a.chatMessageLog.chatMessage;var b=$(this.el).find("#employee-clone").clone().removeAttr("id"),c=0;if("channel"==a.chatType){b.find("img").attr("src",
"images/group.png");var d=a.receiverName;if(void 0==d||0==d.trim().length)d="\u672a\u547d\u540d";b.find(".name").html(d).data("type","channel").data("targetId",a.receiverChannelId);b.attr("id",a.receiverChannelId);c=a.receiverChannelId}else{var e;a.senderEmployeeId==TEAMS.currentUser.id?(d=a.receiverEmployeeId,c=a.receiverAvatar,e=a.receiverName):(d=a.senderEmployeeId,c=a.senderAvatar,e=a.senderName);null!=c&&null!=c.p5&&(b.find("img").attr("src","/base/download/"+c.p5),b.find(".name").data("p5",
c.p5).attr("p5",c.p5));1E4==d.id&&b.find("img").attr("src","images/service.png");b.find(".name").html(e).data("type","chat").data("targetId",d);b.attr("id",d);c=d}d=!1;a.senderEmployeeId!=TEAMS.currentUser.id&&0==$("#smwx_box #message-list-div"+c).size()&&(d=!0);c=$("#smwx-list-search-result-recent").find("#"+c);if(0==c.length)b.removeClass("hide"),d&&b.addClass("high-light"),b.find("time").data("sendTime",a.sendTime),b.find("time").text(this.confirmDate(a.sendTime)),$("#smwx-list-search-result-recent .chat-member-list").prepend(b);
else{$(".smwx-chat-lf li.active").find("a").attr("targetId");d&&c.addClass("high-light");if("channel"==a.chatType){d=a.receiverName;if(void 0==d||0==d.trim().length)d="\u672a\u547d\u540d";c.find(".name").html(d)}c.find("time").data("sendTime",a.sendTime);c.find("time").text(this.confirmDate(a.sendTime))}},websocket_updateChannelName:function(a){var b=a.channel.id;a=a.channel.name;$("#smwx-list-search-result-recent #"+b+" .name").text(a);$("#smwx-list-search-result-channel #"+b+" .name").text(a);$(".smwx-chat-lf .smwx-chat-scr-con").find("#"+
b).text(a).parent().attr("title",a);$(".smwx-mini-bar").find("#"+b).text(a);$('.chat-name .chat-name-input[data-entity\x3d"'+b+'"]').text(a)},websocket_quitChannel:function(a){a.channel.member=a.members;var b=a.channel;-1<$.inArray(TEAMS.currentUser.id.toString(),a.handleIds)&&($("#smwx-list-search-result-recent").find("#"+b.id).remove(),$("#smwx-list-search-result-channel").find("#"+b.id).remove());$(".smwx-chat-lf li.active").find("a").attr("targetId")==b.id&&$.each(a.handleIds,function(){$("#channel-member-top li[userid\x3d'"+
this+"']").remove()})},websocket_deleteChannel:function(a){a=a.channel;$("#smwx-list-search-result-recent").find("#"+a.id).remove();$("#smwx-list-search-result-channel").find("#"+a.id).remove()},websocket_createChannel:function(a){a.channel.member=a.members;a=a.channel;var b=$(this.el).find("#channel-link-clone").clone();b.attr("id",a.id);a.name?b.find(".name").append(a.name).data("type","channel").data("targetId",a.id):b.find(".name").append("\u672a\u547d\u540d").data("type","channel").data("targetId",
a.id);var c=this.renderChannelMembers(a.member);b.attr("title",c);b.attr("id",a.id);b.removeClass("hide");$("#smwx-list-search-result-channel").append(b)},websocket_addUsers:function(a){a.channel.member=a.members;var b=a.channel,c=$(this.el).find("#channel-link-clone").clone();c.attr("id",b.id);b.name?c.find(".name").append(b.name).data("type","channel").data("targetId",b.id):c.find(".name").append("\u672a\u547d\u540d").data("type","channel").data("targetId",b.id);var d=this.renderChannelMembers(b.member);
c.attr("title",d);c.attr("id",b.id);c.removeClass("hide");d=$("#smwx-list-search-result-channel").find("#"+b.id);0<d.length&&d.remove();$("#smwx-list-search-result-channel").append(c);if($(".smwx-chat-lf li.active").find("a").attr("targetId")==b.id)for($("#channel-member-top li").detach(),a=a.channel.member,b=0;b<a.length;b++)this.addMemberPanel(a[b])},sendMessage:function(a,b){if(!(0<$("#pasteimg").length)){var c=this,d=b.attr("type"),g=b.attr("targetId"),f=a.val();if(f.isBlank())e.alert("\u8bf7\u8f93\u5165\u5fae\u4fe1\u6d88\u606f");
else if(1E3<f.length)e.notify("\u6700\u591a\u53d1\u90011000\u5b57");else{a.val("");var l=null,h=null,x=null;"channel"==d?(l="channel",x=g):(l="employee",h=g);this.chatService.sendMessage(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,l,h,x,f,function(a){var b=a.data;null==x?c.createChatBox_new(b,"right",$("#smwx_box .smwx-chat"),h):c.createChatBox_new(b,"right",$("#smwx_box .smwx-chat"),x);0!=a.actionMsg.code&&e.notify(a.actionMsg.message)})}}},listenMessage:function(a,b){if(!websocket_supported){var c=
this,d=this.chatmodel,e=a,g=null;"channel"==b&&(g=a,e=TEAMS.currentUser.id);var f=$("#message-list-div"+a).find("\x3ediv.left:last").find(".chat-time time").data("lastDate");f||(f=Date.create(new Date).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));d.newmessage(b,g,e,f,function(b){b=b.page.result;for(var d=0,e=b.length-1;0<=e;e--){var g=b[e];if(g.sender.id==TEAMS.currentUser.id){if(type="right",1==$("#smwx_box #message-list-div").find("#"+g.id).size())continue}else type="left",d++;c.createChatBox(g,type,
$(".smwx-box .smwx-chat"),a);g=c.confirmDate(g.postTime);$("#smwx-list-search-result-recent .chat-member-list div#"+a).find("time").attr("sendTime",g);$("#smwx-list-search-result-recent .chat-member-list div#"+a).find("time").html(g)}0<d&&!$(c.el).find(".smwx-mini-chat-trigger").hasClass("hide")&&$(c.el).find(".smwx-mini-chat-trigger").addClass("high-light");0<d&&setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300)})}},
renderHistoryMessage:function(a,b,c){var d=this;if(1==$(d.el).find("#message-list-div"+b).size())$("#message-list-div .chat-message-list").addClass("hide"),$(d.el).find("#message-list-div"+b).removeClass("hide"),$("#smwx-chat-top").trigger("resizeSroll"),$("#smwx-chat-top").mCustomScrollbar("update"),d.listenMessage(b,a),d.timer&&clearInterval(d.timer),d.timer=setInterval(function(){d.listenMessage(b,a)},1E4);else{$("#message-list-div .chat-message-list").addClass("hide");c=$("#message-list-div-clone").clone();
c.attr("id","message-list-div"+b);$("#message-list-div").append(c);var g=null,f=null,l=null;"channel"==a?(g="channel",l=b):(g="employee",f=b);this.chatService.getRecentChatMessages(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,g,f,l,1,10,function(c){if(0!=c.actionMsg.code)e.notify(c.actionMsg.message);else{var h=c.data;c=h.result;if(null!=c&&0<c.length)if(d.chatDate=null,5==h.pageSize)for(var r=c.length-1;0<=r;r--){var m=c[r],A=null,h=m.senderEmployeeId==TEAMS.currentUser.id?"right":"left";d.createChatBox_new(m,
h,$(".smwx-box .smwx-chat"),b);0!=r&&(A=c[r-1].sendTime);d.createDateLine(m.sendTime,A,b)}else for(r=c.length-1;0<=r;r--)m=c[r],h=m.senderEmployeeId==TEAMS.currentUser.id?"right":"left",d.createChatBox_new(m,h,$(".smwx-box .smwx-chat"),b),0!=r&&(A=c[r-1].sendTime),d.createDateLine(m.sendTime,A,b);d.layoutFlag&&(e.layout("#smwx-chat-top"),d.ayoutFlag=!1);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300);d.timer&&clearInterval(d.timer);
d.timer=setInterval(function(){d.listenMessage(b,a)},5E3);$(d.el).find(".fancybox").fancybox({closeBtn:!0});d.chatService.markRead(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,g,f,l,function(a){0!=a.actionMsg.code?e.notify(a.actionMsg.message):d.updateUnreadNumber(a.data)})}d.layoutFlag&&(e.layout("#smwx-chat-top"),d.ayoutFlag=!1);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo","bottom")},300);d.timer&&clearInterval(d.timer);
d.timer=setInterval(function(){d.listenMessage(b,a)},1E4);$(d.el).find(".fancybox").fancybox({closeBtn:!0})})}},createChatBox_new:function(a,b,c,d){if(1!=$("#message-list-div"+d).find("#"+a.id).size()){c=c.find("#chat-message-clone").clone(!0);c.attr("id",a.id);c.find(".name").attr("userId",a.senderEmployeeId);c.find("img").attr("userId",a.senderEmployeeId);1E4==a.senderEmployeeId?(c.find(".usercard-toggle").removeClass("usercard-toggle"),c.find("img").attr("src","images/service.png")):
(a.senderAvatar&&a.senderAvatar.p5?c.find("img").attr("src","/base/download/"+a.senderAvatar.p5):a.senderAvatar&&a.senderAvatar.p5&&(c.find("img").attr("src","/base/download/"+a.senderAvatar.p5),c.find("img").attr("userId",a.senderEmployeeId)),"right"!=b&&c.find(".name").html(a.senderName));if(a.relModule){var g=a.message;switch(a.relModule){case "task":g="[\u4efb\u52a1]"+g;break;case "document":g="[\u6587\u6863]"+g;break;case "customer":g="[\u5ba2\u6237]"+g;break;case "workflow":g="[\u5ba1\u6279]"+
g;break;case "mainline":g="[\u9879\u76ee]"+g}c.find(".bubble").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+a.relEntityId+"' data-module\x3d'"+a.relModule+"' data-id\x3d'"+a.relEntityId+"'\x3e"+g+"\x3c/a\x3e")}else a.relImageId?c.find(".bubble").html("\x3ca class\x3d'fancybox' type\x3d'image' href\x3d'/base/download/"+a.relChatImage.sourceImageId+"' \x3e\x3cimg    src\x3d'/base/download/"+a.relChatImage.smallImageId+"' \x3e\x3c/a\x3e"):a.relVoiceId?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+
a.relVoiceId+"?download\x3dtrue' data-value\x3d"+a.relVoiceId+"\x3e"+a.relVoiceName+"\x3c/a\x3e"):a.relAttachmentId?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.relAttachmentId+"?download\x3dtrue' data-value\x3d"+a.relAttachmentId+"\x3e"+a.relAttachmentName+"\x3c/a\x3e"):a.message&&c.find(".bubble").html($.faceConvert(e.initMessage(a.message)));g=Date.create(a.sendTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(a.sendTime).is("today")?c.find(".chat-time time").html(Date.create(a.sendTime).format("{HH}:{mm}:{ss}")).data("lastDate",
g):c.find(".chat-time time").html(g).data("lastDate",g);c.addClass(b);c.removeClass("hide");$(this.el).find("#message-list-div"+d).append(c);$("#smwx-chat-top").mCustomScrollbar("scrollTo",a.id)}},createChatBox:function(a,b,c,d){if(1!=$("#message-list-div"+d).find("#"+a.id).size()){c=c.find("#chat-message-clone").clone(!0);c.attr("id",a.id);c.find(".name").attr("userId",a.sender.id);c.find("img").attr("userId",a.sender.id);1E4==a.sender.id?(c.find(".usercard-toggle").removeClass("usercard-toggle"),
c.find("img").attr("src","images/service.png")):(null!=a.sender.avatar&&null!=a.sender.avatar.p5?c.find("img").attr("src","/base/download/"+a.sender.avatar.p5):null!=a.sender.avatar&&null!=a.sender.avatar.p5&&(c.find("img").attr("src","/base/download/"+a.sender.avatar.p5),c.find("img").attr("userId",a.sender.id)),"right"!=b&&c.find(".name").html(a.sender.username));if(a.link){var g=a.message;switch(a.module){case "task":g="[\u4efb\u52a1]"+g;break;case "document":g="[\u6587\u6863]"+g;break;
case "customer":g="[\u5ba2\u6237]"+g;break;case "workflow":g="[\u5ba1\u6279]"+g;break;case "mainline":g="[\u9879\u76ee]"+g}c.find(".bubble").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+a.link+"' data-module\x3d'"+a.module+"' data-id\x3d'"+a.link+"'\x3e"+g+"\x3c/a\x3e")}else a.chatImage?c.find(".bubble").html("\x3ca class\x3d'fancybox' type\x3d'image' href\x3d'/base/download/"+a.chatImage.imageUrl+"' \x3e\x3cimg    src\x3d'/base/download/"+a.chatImage.smallUrl+"' \x3e\x3c/a\x3e"):a.voice?
c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.voice.id+"?download\x3dtrue' data-value\x3d"+a.voice.id+"\x3e"+a.voice.name+"\x3c/a\x3e"):a.attachment?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.attachment.id+"?download\x3dtrue' data-value\x3d"+a.attachment.id+"\x3e"+a.attachment.name+"\x3c/a\x3e"):a.message&&c.find(".bubble").html($.faceConvert(e.initMessage(a.message)));g=Date.create(a.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(a.postTime).is("today")?
c.find(".chat-time time").html(Date.create(a.postTime).format("{HH}:{mm}:{ss}")).data("lastDate",g):c.find(".chat-time time").html(g).data("lastDate",g);c.addClass(b);c.removeClass("hide");$(this.el).find("#message-list-div"+d).append(c)}},createDateLine:function(a,b,c){a=this.confirmDate(a,!0);var d=null;null!=b&&(d=this.confirmDate(b,!0));d!=a&&(b=$(this.el).find(".date-line-clone").clone(),b.removeClass("date-line-clone"),b.removeClass("hide"),b.find("span").html(a),$(this.el).find("#message-list-div"+
c).append(b))},renderUser:function(a){var b=this;a=this.chatmodel;$(".smwx-box .loading_small").removeClass("hide");a.loadAllChatMembers(1,function(a){b.renderAllEmployee(a,!0);$(".smwx-box .loading_small").addClass("hide");$("#smwx-list-con").trigger("resizeSroll")})},renderAllEmployee:function(a,b){var c=$(this.el).find("#smwx-list-search-result-all");if(1==a.page.pageNo){c.empty();var d=$(this.el).find("#all-employee-service").clone();d.find("span.name").data("targetId","10000").data("type","chat");
d.removeClass("hide");c.prepend(d)}for(var d=a.page.result,e=0;e<d.length;e++){var g=d[e],f=$.trim(g.pinyin),l="",h="";f&&(l=f.substring(0,1).toLocaleUpperCase(),/[a-zA-Z]$/.test(l)||(l="degit"),l&&0==c.find("#list-history"+l).length?(h=$(this.el).find("#members-pinyin div").clone(),h.attr("id","list-history"+l),h.find("span").html(l),"degit"==l&&h.find("span").html("#")):h=$(this.el).find("#list-history"+l));f=$(this.el).find("#employee-clone").clone();f.attr("id",g.id);f.find("span.name").attr("title",
g.username).html(g.username).data("type","chat").data("targetId",g.id);g.avatar&&g.avatar.p5&&(f.find(".avatar img").attr("src","/base/download/"+g.avatar.p5),f.find("span.name").data("p5",g.avatar.p5));h.find(".chat-member-list").append(f);0==c.find("#list-history"+l).length&&c.append(h);$("#smwx_box #smwx-list-search-result-recent .chat-member[id\x3d"+g.id+"]").hasClass("high-light")&&0==$("#smwx_box #message-list-div"+g.id).size()&&f.addClass("high-light")}a.page.hasNext?$(".smwx-box .j_members-more").removeClass("hide"):
$(".smwx-box .j_members-more").addClass("hide");$(".smwx-box .j_members-more").attr("pageNo",a.page.pageNo+1);b&&1==a.page.pageNo&&3>=a.page.result.length&&c.append($("#invite-tip-clone").clone())},renderByTab:function(a,b){"user"==a?(this.renderUser(b),$(this.el).find("#smwx-list-search-result-all").removeClass("hide"),$(this.el).find("#smwx-list-search-result-channel").addClass("hide"),$(this.el).find("#smwx-list-search-result-recent").addClass("hide"),$(this).data("reload",!0)):"channel"==a?(this.renderChannel(b),
$(this.el).find("#smwx-list-search-result-all").addClass("hide"),$(this.el).find("#smwx-list-search-result-channel").removeClass("hide"),$(this.el).find("#smwx-list-search-result-recent").addClass("hide"),$(this).data("reload",!0)):"recent"==a&&(this.renderRecent(b),$(this.el).find("#smwx-list-search-result-all").addClass("hide"),$(this.el).find("#smwx-list-search-result-channel").addClass("hide"),$(this.el).find("#smwx-list-search-result-recent").removeClass("hide"),$(this).data("reload",!0))},renderChannel:function(a){var b=
this;a=this.chatmodel;$(".smwx-box .loading_small").removeClass("hide");a.loadAllChannel(TEAMS.currentUser.id,function(a){$("#smwx-list-search-result-channel").html("");$(".smwx-box .loading_small").addClass("hide");a=a.allChannel;for(var c=0;c<a.length;c++){var d=a[c],e=$(b.el).find("#channel-link-clone").clone();e.attr("id",d.id);d.name?e.find("span.name").append(d.name).data("type","channel").data("targetId",d.id):e.find("span.name").append("\u672a\u547d\u540d").data("type","channel").data("targetId",
d.id);var g=b.renderChannelMembers(d.member);e.attr("title",g);e.attr("id",d.id);e.removeClass("hide");$("#smwx-list-search-result-channel").append(e);$("#smwx_box #smwx-list-search-result-recent .chat-member[id\x3d"+d.id+"]").hasClass("high-light")&&0==$("#smwx_box #message-list-div"+d.id).size()&&e.addClass("high-light")}0==a.length&&$("#smwx-list-search-result-channel").append("\x3cdiv class\x3d'smwx-invite-tip text-center'\x3e\u60a8\u8fd8\u6ca1\u6709\u52a0\u5165\u6216\u521b\u5efa\u8fc7\u7fa4\u7ec4\uff0c\u82e5\u9700\u8981\uff0c\u60a8\u53ef\u4ee5\u5728\u4e0e\u540c\u4e8b\u7684\u5bf9\u8bdd\u754c\u9762\u76f4\u63a5\u6dfb\u52a0\u6210\u5458\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5efa\u7acb\u65b0\u7fa4\u7ec4\x3c/div\x3e")})},
renderChannelMembers:function(a){if(a){for(var b="",c=0;c<a.length-1;c++)b=b+a[c].username+",";return b+=a[a.length-1].username}},renderRecent:function(a,b){var c=this,d=this.chatmodel;$(".smwx-box .loading_small").removeClass("hide");d.loadRecentChatMembers(null,function(a){$("#smwx-list-search-result-recent .chat-member-list").html("");$(".smwx-box .loading_small").addClass("hide");if(0==$("#smwx-list-search-result-recent .chat-member-list").find("#10000").size()){var b=$(c.el).find("#employee-clone").clone();
b.attr("id",1E4);b.find(".name").html("eteams\u670d\u52a1\u53f7").data("targetId","10000").data("type","chat");b.removeClass("hide");b.find("img").attr("src","images/service.png");$("#smwx-list-search-result-recent .chat-member-list").prepend(b)}c.renderRecentList(a)});e.layout("#smwx-list-con")},renderRecentList:function(a){var b=a.data.result;if(b&&0!=b.length){var c=!1;for(i=0;i<b.length;i++){var d=b[i],e;if("channel"==d.chatType){e=$(this.el).find("#channel-link-clone").clone();e.find(".avatar img").attr("src",
"images/group.png");var g=d.targetName;if(void 0==g||0==g.trim().length)g="\u672a\u547d\u540d";e.find("span.name").html(g);e.find("span.name").data("type","channel").data("targetId",d.targetId)}else e=1E4==d.targetId?$("#smwx-list-search-result-recent .chat-member-list").find("#10000"):$(this.el).find("#employee-clone").clone(),null!=d.targetAvatar&&null!=d.targetAvatar.p5&&(e.find(".avatar img").attr("src","/base/download/"+d.targetAvatar.p5),e.find("span.name").data("p5",d.targetAvatar.p5).attr("p5",
d.targetAvatar.p5)),1E4==d.targetId&&e.find(".avatar img").attr("src","images/service.png"),e.find("span.name").html(d.targetName).data("type","chat").data("targetId",d.targetId);e.attr("id",d.targetId);g=this.confirmDate(d.updateTime);e.find("time").data("sendTime",d.updateTime);e.find("time").html(g);e.removeClass("hide");$("#smwx-list-search-result-recent .chat-member-list").append(e);0<d.unreadCount&&0==$("#smwx_box #message-list-div"+d.targetId).size()&&(e.addClass("high-light"),
c=!0)}a.data.hasNext?$(".smwx-box .j_recent_more").removeClass("hide"):$(".smwx-box .j_recent_more").addClass("hide");a=$("#smwx-list-search-result-recent .chat-member-list div.chat-member:last time").data("sendTime");$(".smwx-box .j_recent_more").data("searchTime",a);c&&$("#smwx_box .smwx-mini-list-trigger").addClass("high-light");this.updateUnreadNumber()}},openMessageBox:function(a){var b="";a.avatar&&a.avatar.p5&&(b=a.avatar.p5);var c=a.id,d=$("#smwx-list-search-result-recent #"+c);if(1==d.size()&&
d.hasClass("high-light")){var e=$(view.el).find(".smwx-msg-number"),g=e.data("count")-1,g=0>g?0:g;e.html("("+g+")").data("count",g);d.removeClass("high-light")}a=a.name;d={};1==$(".smwx-chat-lf").find("#"+c).size()?d=$(".smwx-chat-lf").find("#"+c).parent():(d=$('\x3cli title\x3d"'+a+'"\x3e\x3ca id\x3d"'+c+'" p5\x3d"'+b+'"  type\x3d"chat" targetId\x3d"'+c+'"\x3e'+a+'\x3c/a\x3e\x3cspan class\x3d"smwx-chat-cur-close"\x3e\x3cem\x3e\x26times;\x3c/em\x3e\x3c/span\x3e\x3c/li\x3e'),$(".smwx-chat-lf ul").append(d));
0<$("body").find("#noauthority").size()&&$("body").find("#noauthority").modal("hide");d.find("a").trigger("click")},remove:function(){$(this.el).off(".newmessage");$(".smwx-list-tit-l").off(".newmessage");$(".smwx-chat-lf").off(".newmessage");$(".smwx-list").off(".newmessage");$(".smwx-box").off(".newmessage");$("body").off(".newmessage");this.timer&&clearInterval(this.timer);this.unreadTimer&&clearInterval(this.unreadTimer)},renderChannelMember:function(a){var b=this;this.chatmodel.findMemberByChannel(a,
function(a){$("#channel-member-top li").detach();a=a.channel.member;for(var c=0;c<a.length;c++)b.addMemberPanel(a[c])});e.layout(".j_memberLayerScr")},addMemberPanel:function(a){var b=$("#channel-member-top-clone").find("li").clone();b.removeClass("hide");b.attr("userid",a.employeeId);b.find("img").attr("data-original-title",a.name);b.find("p").text(a.name);null!=a.avatar?b.find("img").attr("src","/base/download/"+a.avatar.p5):b.find("img").attr("src","images/avatar.png");0==$("#channel-member-top li[userid\x3d'"+
a.employeeId+"']").length&&$("#channel-member-top").append(b)},confirmDate:function(a,b){var c=Date.create(a),d=c.format("{MM}-{dd}"),e=c.format("{yyyy}-{MM}-{dd}");c.is("today")?(c=c.format("{HH}:{mm}"),e=null):c.is("yesterday")?e=c="\u6628\u5929":c=d;return b?e:c},renderChatsByQuery:function(a){$("#smwx-list-search-result-query .chat-member-list").empty();$(".smwx-box .loading_small").removeClass("hide");for(var b=a.length-1;0<=b;b--){var c=a[b],d;c.channel?(d=$(this.el).find("#channel-link-clone").clone(),
d.find(".avatar img").attr("src","images/group.png"),c.channel.name?d.find("span.name").html(c.channel.name):d.find("span.name").html("\u672a\u547d\u540d"),d.find("span.name").data("type","channel").data("targetId",c.channel.id),d.attr("id",c.channel.id)):(d=$(this.el).find("#employee-clone").clone(),c=c.receiver,null!=c.avatar&&null!=c.avatar.p5&&(d.find(".avatar img").attr("src","/base/download/"+c.avatar.p5),d.find("span.name").data("p5",c.avatar.p5).attr("p5",c.avatar.p5)),1E4==c.id&&
d.find(".avatar img").attr("src","images/service.png"),d.find("span.name").html(c.username).data("type","chat").data("targetId",c.id),d.attr("id",c.id));d.removeClass("hide");$("#smwx-list-search-result-query .chat-member-list").append(d)}$(".smwx-box .loading_small").addClass("hide")},openChatWindow:function(a,b){var c=a.id,d=a.name,e=$(this.el).find("#chat-left-list-clone").find("li").clone();0<$(".smwx-chat-lf").find("#"+c).size()?obj=$(".smwx-chat-lf").find("#"+c).parent():(e.find("li").attr("title",
d),e.find("a").attr("id",c),e.find("a").attr("type",b),e.find("a").attr("targetId",c),e.find("a").html(d),obj=e,$(".smwx-chat-lf ul").append(obj));obj.find("a").trigger("click")},updateUnreadNumber:function(a){void 0==a&&(a=$("#smwx-list-search-result-recent .high-light").size());0<a?$("#smwx_box .smwx-msg-number").data("count",a).text("("+a+")"):($("#smwx_box .smwx-msg-number").data("count",0).text(""),$("#smwx_box .smwx-mini-list-trigger").removeClass("high-light"))}});m.exports=h});
define("teams/minichat/pasteuploadfile",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({el:"",initialize:function(e){this.el="#pasteimg";this.dataURL=e.dataURL;this.uploadURL=e.uploadURL;this.uploadParam=e.uploadParam;$("body").append(f.template("minichat.pasteimage"))},delegateEvents:function(){var e=this,c=$(e.el);c.on("hidden.bs.modal",function(b){e.remove()});c.off("click.pasteuploadfile",".btn-sm").on("click.pasteuploadfile",".btn-sm",function(){f.notify("\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u7b49...");
$.ajax({type:"post",url:e.uploadURL,dataType:"json",data:e.uploadParam,success:function(b){$("body").find("#smwx_box").trigger("afterPaste.newmessage",b);f.notify("\u4e0a\u4f20\u6210\u529f\uff01")}});c.modal("hide")});$("body").off("keydown.pasteuploadfile").on("keydown.pasteuploadfile",function(b){b=event||window.event;27==b.keyCode&&$("#pasteimg").modal("hide")});$("body").off("keyup.pasteuploadfile").on("keyup.pasteuploadfile",function(b){13==(b||window.event).keyCode&&c.find(".btn-sm").trigger("click.pasteuploadfile")})},
preventEvent:function(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1;e.stopPropagation()},render:function(){var e=$(this.el);e.modal();e.find("img").attr("src",this.dataURL)},remove:function(){var e=$(this.el);e.off(".pasteuploadfile");e.remove()}});m.exports=h});
define("teams/chart/taskchart",["teams/utils","teams/component/filter"],function(h,q,m){var f=h("teams/utils");h("teams/component/filter");q=Backbone.View.extend({initialize:function(e){this.el=e.el;this.userId=TEAMS.currentUser.id;$(this.el).html(f.template("task.chart"))},delegateEvents:function(){var e=$(this.el),c=this;e.on("click.filter",".employee-click",function(){var b=$(this).parents("#empList"),a=$(this).attr("title");$(this).addClass("checked");c.userId=$(this).attr("userId");b.find('a[title!\x3d"'+
a+'"]').removeClass("checked");c.option.toolbox.feature.saveAsImage.name=a+"\u4eca\u5929\u7684\u4efb\u52a1\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]";c.userId?c.renderSubChart(!1):c.renderSubChart(!0);e.find("#name").text(a)});e.on("click.filter",".sub-caption .j_sub",function(){var b=$(this).find("i");b.hasClass("caret-right")?(e.find("#empList").show(),b.removeClass("caret-right")):(e.find("#empList").hide(),b.addClass("caret-right"))});$(window).resize(function(){c.resize()})},
render:function(){var e=this,c=$(e.el);e.option={tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c}"},legend:{orient:"horizontal",x:"center",y:"bottom",borderColor:"#CCC",borderWidth:1,data:[{name:"\u5ef6\u671f\u7684"},{name:"\u672a\u5b8c\u6210\u7684"},{name:"\u6709\u8fdb\u5c55\u7684"},{name:"\u5df2\u5b8c\u6210\u7684"}]},toolbox:{show:!0,feature:{restore:{show:!0},saveAsImage:{show:!0,name:""}}},series:[{name:"\u4efb\u52a1\u7edf\u8ba1",type:"pie",center:["50%","40%"],minAngle:20,startAngle:45,
radius:["40%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{c}"},labelLine:{show:!0,length:5}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"15",fontWeight:"bold"}}}},data:[{value:0,name:"\u672a\u5b8c\u6210\u7684"},{value:0,name:"\u6709\u8fdb\u5c55\u7684"},{value:0,name:"\u5ef6\u671f\u7684"},{value:0,name:"\u5df2\u5b8c\u6210\u7684"}]}]};e.load(!1,function(b){h.async("https://static.eteams.cn/js/echarts.min.js",function(){e.tc=echarts.init($("#taskchart")[0]);var a=e.option.series[0].data,
d=b.chartData;!d||0==d.todoCount&&0==d.feedCount&&0==d.dueCount&&0==d.finishedCount?(c.find("#taskchart").hide(),c.find("#j_me").show()):(a[0].value=d.todoCount,a[1].value=d.feedCount,a[2].value=d.dueCount,a[3].value=d.finishedCount,e.option.toolbox.feature.saveAsImage.name=TEAMS.currentUser.name+"\u4eca\u5929\u7684\u4efb\u52a1\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]",e.tc.setOption(e.option),$("#taskchart").show())})});e.option.toolbox.feature.saveAsImage.name="\u6240\u6709\u4e0b\u5c5e\u4eca\u5929\u7684\u4efb\u52a1\u7edf\u8ba1["+
Date.create().format("{yyyy}-{MM}-{dd}")+"]";e.renderSub()},resize:function(){this.tc&&this.tc.resize();this.tc1&&this.tc1.resize()},renderSub:function(){var e=$(this.el),c=this;$.ajax({type:"get",url:"/users/allsubordinate/"+this.userId+".json",dataType:"json",data:{allSubordinate:!1},success:function(b){if((b=b.subordinates)&&0<b.length){e.find("#sub").show();var a=e.find("#empList"),d=e.find("#empItem span").clone();d.find("a").attr({userId:null,title:"\u6240\u6709\u4e0b\u5c5e"}).text("\u6240\u6709\u4e0b\u5c5e").addClass("checked");
a.append(d);$(b).each(function(b,c){d=e.find("#empItem span").clone();d.find("a").attr({userId:c.id,title:c.name}).text(c.name);a.append(d)});c.renderSubChart(!0)}}})},renderSubChart:function(e){var c=this;e&&!c.userId&&(c.userId=TEAMS.currentUser.id);c.load(e,function(b){h.async("https://static.eteams.cn/js/echarts.min.js",function(){c.tc1=echarts.init($("#taskchart1")[0]);var a=c.option.series[0].data,d=b.chartData;d?(a[0].value=d.todoCount,a[1].value=d.feedCount,a[2].value=d.dueCount,a[3].value=
d.finishedCount,$("#taskchart1").show()):(f.notify("\u8be5\u4e0b\u5c5e\u5c1a\u65e0\u4efb\u52a1"),$("#taskchart1").hide());c.tc1.setOption(c.option);c.tc1.resize();c.tc1.restore()})})},load:function(e,c){$.ajax({type:"get",url:"/tasks/chartData.json",dataType:"json",data:{userId:this.userId,sub:e},success:function(b){c&&c(b)}})},remove:function(){view.tc&&(view.tc.clear(),view.tc.dispose());view.tc1&&(view.tc1.clear(),view.tc1.dispose())}});m.exports=q});
(function(h){h.fn.qrcode=function(q){function m(b){this.mode=a;this.data=b}function f(a,b){this.typeNumber=a;this.errorCorrectLevel=b;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function e(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function c(a,b){this.totalCount=a;this.dataCount=b}function b(){this.buffer=[];this.length=0}var a;m.prototype={getLength:function(){return this.data.length},
write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}};f.prototype={addData:function(a){this.dataList.push(new m(a));this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var e=c.getRSBlocks(a,this.errorCorrectLevel),g=new b,f=0,l=0;l<e.length;l++)f+=e[l].dataCount;
for(l=0;l<this.dataList.length;l++)e=this.dataList[l],g.put(e.mode,4),g.put(e.getLength(),d.getLengthInBits(e.mode,a)),e.write(g);if(g.getLengthInBits()<=8*f)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-
7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(a,b);7<=this.typeNumber&&this.setupTypeNumber(a);null==this.dataCache&&(this.dataCache=f.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=
0<=c&&6>=c&&(0==d||6==d)||0<=d&&6>=d&&(0==c||6==c)||2<=c&&4>=c&&2<=d&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var e=d.getLostPoint(this);if(0==c||a>e)a=e,b=c}return b},createMovieClip:function(a,b,c){a=a.createEmptyMovieClip(b,c);this.make();for(b=0;b<this.modules.length;b++){c=1*b;for(var d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}}return a},
setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=d.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var e=a[b],g=a[c];if(null==this.modules[e][g])for(var f=-2;2>=f;f++)for(var l=-2;2>=l;l++)this.modules[e+f][g+l]=-2==f||2==f||-2==l||2==l||0==f&&0==l?!0:!1}},setupTypeNumber:function(a){for(var b=
d.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var e=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=e}for(c=0;18>c;c++)e=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=e},setupTypeInfo:function(a,b){for(var c=d.getBCHTypeInfo(this.errorCorrectLevel<<3|b),e=0;15>e;e++){var g=!a&&1==(c>>e&1);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(e=0;15>e;e++)g=!a&&1==(c>>e&1),8>e?this.modules[8][this.moduleCount-
e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,e=this.moduleCount-1,g=7,f=0,l=this.moduleCount-1;0<l;l-=2)for(6==l&&l--;;){for(var h=0;2>h;h++)if(null==this.modules[e][l-h]){var x=!1;f<a.length&&(x=1==(a[f]>>>g&1));d.getMask(b,e,l-h)&&(x=!x);this.modules[e][l-h]=x;g--; -1==g&&(f++,g=7)}e+=c;if(0>e||this.moduleCount<=e){e-=c;c=-c;break}}}};f.PAD0=236;f.PAD1=17;f.createData=function(a,e,g){e=c.getRSBlocks(a,
e);for(var l=new b,h=0;h<g.length;h++){var u=g[h];l.put(u.mode,4);l.put(u.getLength(),d.getLengthInBits(u.mode,a));u.write(l)}for(h=a=0;h<e.length;h++)a+=e[h].dataCount;if(l.getLengthInBits()>8*a)throw Error("code length overflow. ("+l.getLengthInBits()+"\x3e"+8*a+")");for(l.getLengthInBits()+4<=8*a&&l.put(0,4);0!=l.getLengthInBits()%8;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*a);){l.put(f.PAD0,8);if(l.getLengthInBits()>=8*a)break;l.put(f.PAD1,8)}return f.createBytes(l,e)};f.createBytes=function(a,
b){for(var c=0,g=0,f=0,l=Array(b.length),h=Array(b.length),v=0;v<b.length;v++){var x=b[v].dataCount,y=b[v].totalCount-x,g=Math.max(g,x),f=Math.max(f,y);l[v]=Array(x);for(var m=0;m<l[v].length;m++)l[v][m]=255&a.buffer[m+c];c+=x;m=d.getErrorCorrectPolynomial(y);x=(new e(l[v],m.getLength()-1)).mod(m);h[v]=Array(m.getLength()-1);for(m=0;m<h[v].length;m++)y=m+x.getLength()-h[v].length,h[v][m]=0<=y?x.get(y):0}for(m=v=0;m<b.length;m++)v+=b[m].totalCount;c=Array(v);for(m=x=0;m<g;m++)for(v=0;v<b.length;v++)m<
l[v].length&&(c[x++]=l[v][m]);for(m=0;m<f;m++)for(v=0;v<b.length;v++)m<h[v].length&&(c[x++]=h[v][m]);return c};a=4;for(var d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,
126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=d.getBCHDigit(b)-d.getBCHDigit(d.G15);)b^=d.G15<<d.getBCHDigit(b)-d.getBCHDigit(d.G15);return(a<<10|b)^d.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;0<=
d.getBCHDigit(b)-d.getBCHDigit(d.G18);)b^=d.G18<<d.getBCHDigit(b)-d.getBCHDigit(d.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return d.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+
c)%2)%2;default:throw Error("bad maskPattern:"+a);}},getErrorCorrectPolynomial:function(a){for(var b=new e([1],0),c=0;c<a;c++)b=b.multiply(new e([1,g.gexp(c)],0));return b},getLengthInBits:function(b,c){if(1<=c&&10>c)switch(b){case 1:return 10;case 2:return 9;case a:return 8;case 8:return 8;default:throw Error("mode:"+b);}else if(27>c)switch(b){case 1:return 12;case 2:return 11;case a:return 16;case 8:return 10;default:throw Error("mode:"+b);}else if(41>c)switch(b){case 1:return 14;case 2:return 13;
case a:return 16;case 8:return 12;default:throw Error("mode:"+b);}else throw Error("type:"+c);},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d++)for(var e=0;e<b;e++){for(var g=0,f=a.isDark(d,e),l=-1;1>=l;l++)if(!(0>d+l||b<=d+l))for(var h=-1;1>=h;h++)0>e+h||b<=e+h||0==l&&0==h||f==a.isDark(d+l,e+h)&&g++;5<g&&(c+=3+g-5)}for(d=0;d<b-1;d++)for(e=0;e<b-1;e++)if(g=0,a.isDark(d,e)&&g++,a.isDark(d+1,e)&&g++,a.isDark(d,e+1)&&g++,a.isDark(d+1,e+1)&&g++,0==g||4==g)c+=3;for(d=0;d<b;d++)for(e=
0;e<b-6;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;e<b;e++)for(d=0;d<b-6;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=g=0;e<b;e++)for(d=0;d<b;d++)a.isDark(d,e)&&g++;a=Math.abs(100*g/b/b-50)/5;return c+10*a}},g={glog:function(a){if(1>a)throw Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=
255;for(;256<=a;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},l=0;8>l;l++)g.EXP_TABLE[l]=1<<l;for(l=8;256>l;l++)g.EXP_TABLE[l]=g.EXP_TABLE[l-4]^g.EXP_TABLE[l-5]^g.EXP_TABLE[l-6]^g.EXP_TABLE[l-8];for(l=0;255>l;l++)g.LOG_TABLE[g.EXP_TABLE[l]]=l;e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=
g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new e(b,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return(new e(c,0)).mod(a)}};c.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],
[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,
15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,
48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],
[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,
24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,
25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];c.getRSBlocks=function(a,b){var d=c.getRsBlockTable(a,b);if(void 0==d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var e=d.length/3,g=[],f=0;f<e;f++)for(var l=d[3*f+0],h=d[3*f+1],x=d[3*f+2],y=0;y<l;y++)g.push(new c(h,x));return g};c.getRsBlockTable=function(a,b){switch(b){case 1:return c.RS_BLOCK_TABLE[4*
(a-1)+0];case 0:return c.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return c.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return c.RS_BLOCK_TABLE[4*(a-1)+3]}};b.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;c<b;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0);a&&(this.buffer[b]|=128>>>this.length%8);this.length++}};"string"===typeof q&&
(q={text:q});q=h.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},q);return this.each(function(){var a;if("canvas"==q.render){a=new f(q.typeNumber,q.correctLevel);a.addData(q.text);a.make();var b=document.createElement("canvas");b.width=q.width;b.height=q.height;for(var c=b.getContext("2d"),d=q.width/a.getModuleCount(),e=q.height/a.getModuleCount(),g=0;g<a.getModuleCount();g++)for(var l=0;l<a.getModuleCount();l++){c.fillStyle=
a.isDark(g,l)?q.foreground:q.background;var v=Math.ceil((l+1)*d)-Math.floor(l*d),x=Math.ceil((g+1)*d)-Math.floor(g*d);c.fillRect(Math.round(l*d),Math.round(g*e),v,x)}}else for(a=new f(q.typeNumber,q.correctLevel),a.addData(q.text),a.make(),b=h("\x3ctable\x3e\x3c/table\x3e").css("width",q.width+"px").css("height",q.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",q.background),c=q.width/a.getModuleCount(),d=q.height/a.getModuleCount(),e=0;e<a.getModuleCount();e++)for(g=
h("\x3ctr\x3e\x3c/tr\x3e").css("height",d+"px").appendTo(b),l=0;l<a.getModuleCount();l++)h("\x3ctd\x3e\x3c/td\x3e").css("width",c+"px").css("background-color",a.isDark(e,l)?q.foreground:q.background).appendTo(g);jQuery(b).appendTo(this)})}})(jQuery);
define("teams/report/statisticstasklistview",["teams/utils","teams/report/statisticstasklistmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/report/statisticstasklistmodel");h=Backbone.View.extend({initialize:function(c){this.el=c.container;this.checkDate=c.checkDate;this.type=c.barType;this.idList=c.idList;this.model=new e({beginDate:this.checkDate.beginDate,endDate:this.checkDate.endDate,statisticsType:this.type,statisticians:this.idList});$(this.el).html(f.template("task.statisticstasklist"))},
delegateEvents:function(){var c=this,b=$(c.el);b.off("click.StatisticsTaskListView","#search").on("click.StatisticsTaskListView","#search",function(){var a=c.model,b=$("#taskName").val().trim();a.pageNo=1;$(".statistics_task_loading").removeClass("hide");a.singleStatisticsByDay(function(a){$(".statistics_task_loading").addClass("hide");c.renderTable(a)},b)});b.off("click.StatisticsTaskListView","#more_data").on("click.StatisticsTaskListView","#more_data",function(a){a=c.model;var b=$("#taskName").val().trim();
a.pageNo++;a.singleStatisticsByDay(function(a){c.renderTable(a)},b)});b.off("keyup.StatisticsTaskListView","#taskName").on("keyup.StatisticsTaskListView","#taskName",function(a){$(this);var b=c.model;a=a?a:window.event?window.event:null;var e=$("#taskName").val().trim();13==a.keyCode&&(b.pageNo=1,$(".statistics_task_loading").removeClass("hide"),b.singleStatisticsByDay(function(a){$(".statistics_task_loading").addClass("hide");c.renderTable(a)},e))})},render:function(){this.loadTasks()},loadTasks:function(){var c=
this,b=c.model;$(".statistics_task_loading").removeClass("hide");b.singleStatisticsByDay(function(a){$(".statistics_task_loading").addClass("hide");c.renderTable(a)})},renderTable:function(c){var b=$(this.el),a=c.page;c=a.result;var d=b.find("#js_customerTable_wrapper .j_trashlist");1==a.pageNo&&(d.empty(),null==c||0==c.length?b.find("#js_customerTable_wrapper .j_empty").show():b.find("#js_customerTable_wrapper .j_empty").hide());a&&a.hasNext?(b.find("#more_data").show(),b.find("#more_data").data("page",
a)):b.find("#more_data").hide();if(null!=c)for(a=0;a<c.length;a++){var e=b.find("#trashbinlogClone li").clone(),l=c[a];e.find(".task_name").text(l.name);e.find(".task_name").attr("data-id",l.id);e.find(".task_name").attr("data-module","task");e.find(".task_name").addClass("entitybox-toggle");e.find(".task_manager").text(l.manager.username);null==l.dueDate||void 0==l.dueDate?e.find(".due_date").text(""):e.find(".due_date").text(Date.create(l.dueDate).format("{yyyy}-{MM}-{dd}"));null==l.finishTime||
void 0==l.finishTime?e.find(".finish_date").text(""):e.find(".finish_date").text(Date.create(l.finishTime).format("{yyyy}-{MM}-{dd}"));if("created"==this.type||"doing"==this.type||"delayed"==this.type)b.find("#title_finish_time").addClass("hide"),e.find(".finish_date").addClass("hide");d.append(e)}f.layout(".j_trashbinListScr")},remove:function(){}});m.exports=h});
define("teams/report/blogreportview",["teams/utils","teams/report/blogreportmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/report/blogreportmodel");h=Backbone.View.extend({userId:null,viewMode:"1",initialize:function(c){c&&c.viewMode&&(this.viewMode=c.viewMode);this.el=c.el;this.model=new e},render:function(c,b){b||(b=Date.create());c||(c=TEAMS.currentUser.id);this.userId=c;var a="normal"==TEAMS.currentTenant.status?!0:!1;$(this.el).empty().append(f.template("blog.report",{vip:a}));$(this.el).find(".center-title").prepend(f.template("home.backbtn"));
f.layout(".j_report-data");$(this.el).find(".static-year").val(Date.create(b).getUTCFullYear());$(this.el).find(".static-month").removeClass("selected");$(this.el).find(".static-month:eq("+parseInt(Date.create(b).getUTCMonth())+")").addClass("selected");"1"==this.viewMode?this.loadReport(b,null):"2"==this.viewMode&&this.loadReport(b,"myfollow")},loadReport:function(c,b){var a=this,d=this.model;c||(c=Date.create());d.load(a.userId,Date.create(c).format("{yyyy}-{MM}-{dd}"),b,function(b){var d=b.blogList,
e=Date.create(b.from),f=Date.create(b.to),h=b.workdays,p=b.departmentList,s=b.type;b=b.userList;$(a.el).find("thead tr,tbody").empty();$(a.el).find("tbody td").removeData("count");$(a.el).find("thead tr").append('\x3cth class\x3d"username-th"\x3e\u59d3\u540d\x3c/th\x3e');for(var u=Date.create(e).reset(),e=0;u<=f;){var w=u.isWeekend()?" holiday":"";$(a.el).find("thead tr").append('\x3cth class\x3d"date-th'+w+'"\x3e'+u.format("{d}")+"\x3c/th\x3e");e++;u.addDays(1)}for(var v=0;v<h.length;v++)u=h[v],
f=parseInt(Date.create(u.workdayDate).format("{d}"))-1,f=$(a.el).find("thead .date-th:eq("+f+")"),u.holiday?f.addClass("holiday"):f.removeClass("holiday");for(v=0;v<b.length;v++)h=b[v],0>=$(a.el).find("tbody #report-data-"+h.id).size()&&a.createReportTr(h);for(v=0;v<d.length;v++)h=d[v],b=h.blog.blogTime,u=$(a.el).find("tbody #report-data-"+h.user.id),f=parseInt(Date.create(b).format("{d}")),f=u.find(".unfinished:eq("+(f-1)+")"),(u=f.data("count"))||(u=0),u=parseInt(u),u++,f.data("count",u),Date.create(b).format("{yyyy}-{MM}-{dd}")<
Date.create(h.blog.createTime).format("{yyyy}-{MM}-{dd}")&&f.data("later",!0);$(a.el).find("tbody .unfinished").each(function(){var a=$(this);a.hasClass("holiday")&&a.removeClass("unfinished");a.data("count")&&(a.removeClass("unfinished"),a.data("later")?a.addClass("later-finished"):a.addClass("finished"));a.html('\x3cspan class\x3d"'+a.attr("class")+'"\x3e\x3c/span\x3e')});$(a.el).find("thead tr").append('\x3cth class\x3d"count-th"\x3e\u603b\u6570\x3c/th\x3e');$(a.el).find("tbody tr").each(function(){var a=
$(this),b=0;a.find('td:not(".username-td")').each(function(){var a=$(this);a.data("count")&&(b+=a.data("count"))});a.append('\x3ctd class\x3d"count-td"\x3e'+b+"\x3c/td\x3e")});var x=0;$(a.el).find("tbody").append('\x3ctr id\x3d"count-tr"\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e');for(v=1;v<=e;v++){var y=0,w="";$(a.el).find("tbody tr").each(function(){var a=$(this).find("td:eq("+v+")");a.hasClass("holiday")&&(w=" holiday");a.data("count")&&(y+=a.data("count"),x+=a.data("count"))});y||(y="-");$(a.el).find("tbody #count-tr").append('\x3ctd class\x3d"count-td'+
w+'"\x3e'+y+"\x3c/td\x3e")}$(a.el).find("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+x+"\x3c/td\x3e");$(a.el).find(".static-time").html(Date.create(c).format("{yyyy} \u5e74 {M} \u6708"));$(a.el).find('.static-department option[value!\x3d""]').remove();for(v=0;v<p.length;v++)d=p[v],$(a.el).find(".static-department").append('\x3coption value\x3d"'+d.id+'"\x3e'+d.name+"\x3c/option\x3e");1==$(a.el).find('.static-department option[value\x3d"'+s+'"]').size()&&$(a.el).find(".static-department").val(s)})},
createReportTr:function(c){var b=this;$(b.el).find("tbody").append('\x3ctr id\x3d"report-data-'+c.id+'"\x3e\x3ctd class\x3d"username-td" title\x3d"'+c.username+'"\x3e\x3ca class\x3d"router usercard-toggle" userId\x3d"'+c.id+'"\x3e'+c.username+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e");$(b.el).find("thead .date-th").each(function(){var a=$(this).hasClass("holiday")?" holiday":"";$(b.el).find("tbody #report-data-"+c.id).append('\x3ctd class\x3d"unfinished'+a+'"\x3e\x3c/td\x3e')})},delegateEvents:function(){var c=
this;$("body").on("click.blogreport",".goto-top",function(b){f.gotoTop(".report-data")});$(c.el).on("change.blogreport",".static-year",function(){var b=parseInt($(this).val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0),a=a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?
a=null:""!=$(c.el).find(".static-department").val()&&(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.blogreport",".static-month",function(){var b=$(this);$(c.el).find(".static-month").removeClass("selected");b.addClass("selected");var b=parseInt($(c.el).find(".static-month").index(b)),a=parseInt($(c.el).find(".static-year").val()),b=Date.create(a,b,2,0,0),a=a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?
a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?a=null:""!=$(c.el).find(".static-department").val()&&(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.blogreport",".myself input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),
a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0);c.loadReport(b,null)}else b.prop("checked",!0)});$(c.el).on("click.blogreport",".myfollow input:checkbox",function(){var b=$(this);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),
b=Date.create(b,a,2,0,0);c.loadReport(b,"myfollow")}else b.prop("checked",!0)});$(c.el).on("click.blogreport",".mySubordinate input:checkbox",function(){var b=$(this);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,
a,2,0,0);c.loadReport(b,"mySubordinate")}else b.prop("checked",!0)});$(c.el).on("change.blogreport",".static-department",function(){var b=$(this);if(""==b.val())$(c.el).find(".myfollow input:checkbox").trigger("click");else{$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".myself input:checkbox").prop("checked",!1);var a=parseInt($(c.el).find(".static-year").val()),d=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),
a=Date.create(a,d,2,0,0);c.loadReport(a,b.val())}})},remove:function(){$(this.el).off(".blogreport");this.model=null}});m.exports=h});
define("teams/report/taskstatisticsview",["teams/utils","teams/component/typeahead","teams/component/shareview","teams/report/taskstatisticsmodel","teams/component/entityslider"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h("teams/component/shareview");var c=h("teams/report/taskstatisticsmodel"),b=h("teams/component/entityslider");q=Backbone.View.extend({initialize:function(a){var b=this.model=new c;this.listenTo(b,"sync:detailTable",this.renderDetailTable);this.listenTo(b,
"sync:subordinates",this.renderStatisticians);this.el=a.el;a=f.template("task.statistics");this.$el.html(a);this.initComponents()},initComponents:function(){var a=this,b=a.model;f.datepicker([{el:"#begin-date",callback:function(c){var e=c.date.format("{yyyy}-{MM}-{dd}");a.isBefore(e,b.endDate)?b.beginDate=e||b.beginDate:c.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(c){var e=
c.date.format("{yyyy}-{MM}-{dd}");a.isBefore(b.beginDate,e)?b.endDate=e||b.endDate:c.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);a.$el.find("#begin-date").val(b.beginDate);a.$el.find("#end-date").val(b.endDate);e({el:"#employees-list",callback:function(b){b&&a.updateStatisticians(b)}})},isBefore:function(a,b){if(a&&b){if(Date.create(a).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");
return!1}return!0},delegateEvents:function(){var a=this,c=a.model;$("body").on("click.taskreport",".goto-top",function(a){f.gotoTop(".js_taskreportScr")});a.$el.on("click.taskreport",".j_time a",function(b){switch($(b.target).attr("data")){case "thisWeek":c.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":c.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");c.endDate=
Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":c.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");c.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":c.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),c.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}a.$el.find("#begin-date").val(c.beginDate);a.$el.find("#end-date").val(c.endDate)});a.$el.on("click.taskreport",
"#load",function(){1>c.statisticians.length?f.notify("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u540d\u53c2\u4e0e\u4eba\u548c\u8d1f\u8d23\u4eba"):(a.loadDayChart(),a.loadFinishChart(),a.loadUrgencyChart(),c.loadDetailTable())});a.$el.off("click.taskreport","#statisticians-list span a").on("click.taskreport","#statisticians-list span a",function(b){a.refreshStatisticians(b);b.stopPropagation()});a.$el.off("click.taskreport","#statisticians .close").on("click.taskreport","#statisticians .close",function(b){b=
$(b.target).siblings().attr("data-id");a.$el.find('#statisticians-list a[data-id\x3d"'+b+'"]').removeClass("checked");-1<c.statisticians.indexOf(b)&&c.statisticians.remove(b)});a.$el.off("click.taskreport",".table_num_details").on("click.taskreport",".table_num_details",function(c){var d=$(this);c=d.attr("type");d=d.parent().parent().find("td:first-child").attr("userId");a.entitySlider&&a.entitySlider.remove();a.entitySlider=new b({module:"statisticsTaskList",checkDate:{beginDate:a.model.beginDate,
endDate:a.model.endDate},barType:c,idList:[d]});a.entitySlider.render()})},remove:function(){this.$el.off(".taskreport");this.dayChart&&($(window).off("resize",this.dayChart.resize),this.dayChart.dispose(),this.dayChart=null);this.finishChart&&($(window).off("resize",this.finishChart.resize),this.finishChart.dispose(),this.finishChart=null);this.urgencyChart&&($(window).off("resize",this.urgencyChart.resize),this.urgencyChart.dispose(),this.urgencyChart=null);this.stopListening();this.model=null},
render:function(a,b){var c=this,e=c.model;f.layout(".js_taskreportScr");h.async("https://static.eteams.cn/js/echarts.min.js",function(){c.initCharts();c.loadDayChart();c.loadFinishChart();c.loadUrgencyChart()});e.loadDetailTable();e.loadSubordinates()},dayChartBasicOption:{title:{text:"\u4efb\u52a1\u7edf\u8ba1"},tooltip:{trigger:"item"},legend:{textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"},data:["\u8fdb\u884c\u4e2d","\u5df2\u5b8c\u6210","\u65b0\u521b\u5efa"]},calculable:!0,toolbox:{show:!0,
feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:5,end:95},yAxis:[{type:"value"}],color:["#3AEC94","#48AAF0","#e2aad5"],noDataLoadingOption:{effect:"whirling",text:"\u6682\u65e0\u6570\u636e",textStyle:{fontSize:19,fontFamily:"Arial, Microsoft YaHei, Helvetica, sans-serif"}}},dayChart:null,finishChartBasicOption:{title:{text:"\u5b8c\u6210\u72b6\u51b5"},legend:{orient:"vertical",x:"left",y:"center",textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif",
color:"#333"},data:["\u5168\u90e8","\u5df2\u5b8c\u6210","\u8fdb\u884c\u4e2d"]},tooltip:{show:!0,formatter:"{c} | {d}%"},color:["#c29bfa","#48AAF0","#3AEC94"],noDataLoadingOption:{effect:"whirling",text:"\u6682\u65e0\u6570\u636e",textStyle:{fontSize:15,fontFamily:"Arial, Microsoft YaHei, Helvetica, sans-serif"}},series:[{name:"\u5b8c\u6210\u72b6\u51b5",type:"pie",radius:[0,50],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5df2\u5b8c\u6210",value:150},{name:"\u8fdb\u884c\u4e2d",
value:30}]},{name:"\u5b8c\u6210\u72b6\u51b5",type:"pie",radius:[65,75],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5168\u90e8",value:180}]}]},finishChart:null,urgencyChartBasicOption:{title:{text:"\u7d27\u6025\u7a0b\u5ea6"},legend:{orient:"vertical",x:"left",y:"center",textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif",color:"#333"},data:["\u5168\u90e8","\u6b63\u5e38","\u7d27\u6025","\u975e\u5e38\u7d27\u6025"]},tooltip:{show:!0,formatter:"{c} | {d}%"},color:["#c29bfa",
"#3DD333","#FAC36F","#F48686"],noDataLoadingOption:{effect:"whirling",text:"\u6682\u65e0\u6570\u636e",textStyle:{fontSize:15,fontFamily:"Arial, Microsoft YaHei, Helvetica, sans-serif"}},series:[{name:"\u7d27\u6025\u7a0b\u5ea6",type:"pie",radius:[0,50],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5168\u90e8",value:180},{name:"\u6b63\u5e38",value:150},{name:"\u7d27\u6025",value:30},{name:"\u975e\u5e38\u7d27\u6025",value:50}]},{name:"\u7d27\u6025\u7a0b\u5ea6",type:"pie",radius:[65,
75],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1}}},data:[{name:"\u5168\u90e8",value:180}]}]},ungercyChart:null,initCharts:function(){var a;a=this.dayChart=echarts.init(document.getElementById("day-chart"),"macarons");$(window).on("resize",a.resize);a=this.finishChart=echarts.init(document.getElementById("finish-chart"),"macarons");$(window).on("resize",a.resize);a=this.urgencyChart=echarts.init(document.getElementById("urgency-chart"),"macarons");$(window).on("resize",a.resize)},loadDayChart:function(){function a(a){var e=
a.seriesName;"\u65b0\u521b\u5efa"==e?e="created":"\u8fdb\u884c\u4e2d"==e?e="doing":"\u5df2\u5b8c\u6210"==e&&(e="finished");c.entitySlider&&c.entitySlider.remove();c.entitySlider=new b({module:"statisticsTaskList",checkDate:{beginDate:a.name,endDate:a.name},barType:e,idList:c.model.statisticians});c.entitySlider.render()}var c=this;if(c.dayChart){var e=c.dayChart,l=echarts.config;c.dayChart.un(l.EVENT.CLICK).on(l.EVENT.CLICK,a);e.showLoading({effect:"spin"});c.model.statisticsByDay(function(a){e.hideLoading();
a=_.extend(a,c.dayChartBasicOption);e.setOption(a,!0)})}else f.alert("\u672a\u627e\u5230\u56fe\u8868\u7ec4\u4ef6\uff0c\u8bf7\u786e\u8ba4\u9875\u9762\u52a0\u8f7d\u6b63\u786e")},loadFinishChart:function(){function a(a){a=a.name;"\u65b0\u521b\u5efa"==a?a="created":"\u8fdb\u884c\u4e2d"==a?a="doing":"\u5df2\u5b8c\u6210"==a?a="finished":"\u5168\u90e8"==a&&(a="all");c.entitySlider&&c.entitySlider.remove();c.entitySlider=new b({module:"statisticsTaskList",checkDate:{beginDate:c.model.beginDate,endDate:c.model.endDate},
barType:a,idList:c.model.statisticians});c.entitySlider.render()}var c=this;if(c.finishChart){var e=c.finishChart,l=echarts.config;c.finishChart.un(l.EVENT.CLICK).on(l.EVENT.CLICK,a);e.showLoading({effect:"spin"});c.model.statisticsByFinished(function(a){e.hideLoading();c.finishChartBasicOption.series[0].data=a.inner;c.finishChartBasicOption.series[1].data=a.outter;e.setOption(c.finishChartBasicOption,!0)})}else f.alert("\u5b8c\u6210\u60c5\u51b5\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},
loadUrgencyChart:function(){function a(a){a=a.name;"\u6b63\u5e38"==a?a="urgency_normal":"\u7d27\u6025"==a?a="urgency_high":"\u975e\u5e38\u7d27\u6025"==a?a="urgency_urgency":"\u5168\u90e8"==a&&(a="urgency_all");c.entitySlider&&c.entitySlider.remove();c.entitySlider=new b({module:"statisticsTaskList",checkDate:{beginDate:c.model.beginDate,endDate:c.model.endDate},barType:a,idList:c.model.statisticians});c.entitySlider.render()}var c=this;if(c.urgencyChart){var e=c.urgencyChart,l=echarts.config;c.urgencyChart.un(l.EVENT.CLICK).on(l.EVENT.CLICK,
a);e.showLoading({effect:"spin"});c.model.statisticsByUrgency(function(a){e.hideLoading();c.urgencyChartBasicOption.series[0].data=a.inner;c.urgencyChartBasicOption.series[1].data=a.outter;e.setOption(c.urgencyChartBasicOption,!0)})}else f.alert("\u7d27\u6025\u7a0b\u5ea6\u56fe\u8868\u672a\u80fd\u6b63\u5e38\u521d\u59cb\u5316")},renderDetailTable:function(a){function b(a){a.manageOrIn||(a.manageOrIn=0);a.percent||(a.percent=0);a.created||(a.created=0);a.doing||(a.doing=0);a.finished||(a.finished=0);
a.delayed||(a.delayed=0)}this.$el.find("#detail-table tbody tr").remove();if(a&&a.length){var c=this.$el.find("#row-template").html(),e=$(),c=_.template(c);a=a.filter(function(a){return a.created||a.manageOrIn});for(var f=0;f<a.length;f++){var k=a[f];b(k);k=c(k).trim();e=e.add(k)}this.$el.find("#detail-table tbody").append(e)}},renderStatisticians:function(a){var b=this.$el.find("#statistician-tmp").html(),c=_.template(b)({id:TEAMS.currentUser.id,username:TEAMS.currentUser.name}).trim();this.$el.find("#statisticians").append(c);
var b=$(),e=this.$el.find("#statistician-list-tmp").html(),e=_.template(e),c=e({id:TEAMS.currentUser.id,username:TEAMS.currentUser.name}).trim(),c=$(c);c.children("a").addClass("checked");for(var b=b.add(c),f=0;f<a.length;f++)c=e(a[f]).trim(),b=b.add(c);this.$el.find("#statisticians-list").append(b);TEAMS.currentUser.admin?this.$el.find("#statisticians-list").next().removeClass("hide").next().removeClass("hide"):this.$el.find("#statisticians-list").next().addClass("hide").next().addClass("hide")},
refreshStatisticians:function(a){var b=$(a.target);a=b.attr("data-id");b=b.text();this.updateStatisticians({id:a,username:b})},updateStatisticians:function(a){var b=this.model;$.isArray(a)||(a=[a]);for(var c=this.$el.find("#statisticians"),e=this.$el.find("#statistician-tmp").html().trim(),f=$(),k=0;k<a.length;k++){var h=a[k];0>b.statisticians.indexOf(h.id)&&(b.statisticians.add(h.id),this.$el.find("#statisticians-list").find('a[data-id\x3d"'+h.id+'"]').addClass("checked"),h=_.template(e)(h).trim(),
f=f.add(h))}0<f.size()&&c.append(f)}});m.exports=q});
define("teams/report/flowreportview",["teams/utils","teams/models/flowreportmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/flowreportmodel");h=Backbone.View.extend({userId:null,viewMode:"2",initialize:function(c){this.model=new e;this.el=c.el;this.userId=c.userId},render:function(c,b){b||(b=Date.create());this.userId=c=c||this.userId||TEAMS.currentUser.id;var a="normal"==TEAMS.currentTenant.status?!0:!1;$(this.el).empty().append(f.template("report.flow",{vip:a}));$(this.el).find(".center-title").prepend(f.template("home.backbtn"));
f.layout(".j_report-data");$(".j_flow_innerScr").mCustomScrollbar({axis:"x",scrollButtons:{enable:!0},mouseWheel:!1,theme:"darkblue",scrollbarPosition:"inside",advanced:{autoExpandHorizontalScroll:!0,updateOnBrowserResize:!0}});$(this.el).find(".static-year").val(Date.create(b).getUTCFullYear());$(this.el).find(".static-month").removeClass("selected");$(this.el).find(".static-month:eq("+parseInt(Date.create(b).getUTCMonth())+")").addClass("selected");this.loadReport(b,null)},loadReport:function(c,
b){var a=this,d=this.model;c||(c=Date.create());a.date=c;d.load(a.userId,Date.create(a.date).format("{yyyy}-{MM}-{dd}"),b,function(b){$(a.el).find("thead tr,tbody").empty();$(a.el).find("tbody td").removeData("count");$(a.el).find(".static-time").html(Date.create(a.date).format("{yyyy} \u5e74 {M} \u6708"));var c=b.flowReport,d=b.forms,e=b.departmentList;b=b.state;$(a.el).find('.static-department option[value!\x3d""]').remove();for(var f=0;f<e.length;f++){var h=e[f];$(a.el).find(".static-department").append('\x3coption title\x3d"'+
h.name+'" value\x3d"'+h.id+'"\x3e'+h.name+"\x3c/option\x3e")}1<=$(a.el).find('.static-department option[value\x3d"'+b+'"]').size()&&$(a.el).find(".static-department").val(b);$(a.el).find("thead tr").append('\x3cth class\x3d"username-th"\x3e\u59d3\u540d\x3c/th\x3e');e=d.length;for(f=0;f<e;f++){var s=d[f];$(a.el).find("thead tr").append('\x3cth id\x3d"'+s.id+'" class\x3d"date-th"\x3e'+s.name+"\x3c/th\x3e")}$(a.el).find("thead tr").append('\x3cth class\x3d"count-th"\x3e\u603b\u6570\x3c/th\x3e');0==c.length&&
$(a.el).find("tbody").append('\x3ctr\x3e\x3ctd colspan\x3d"'+(e+2)+'" \x3e\u6ca1\u6709\u6570\u636e\x3ctd\x3e\x3c/tr\x3e');for(f=0;f<c.length;f++){var u=c[f];$(a.el).find("tbody").append('\x3ctr id\x3d"report-data-'+u.id+'"\x3e\x3ctd class\x3d"username-td" title\x3d"'+u.USERNAME+'"\x3e\x3ca class\x3d"router usercard-toggle" userId\x3d"'+u.id+'"\x3e'+u.USERNAME+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e");b=$(a.el).find("tbody #report-data-"+u.id);for(var w=h=0;w<e;w++){var s=d[w],s=u[s.id],v=$("\x3ctd\x3e\x3cspan\x3e"+
s+"\x3c/span\x3e\x3c/td\x3e");v.data("count",s);1<=parseInt(s)&&(v.addClass("finished"),v.find("span").addClass("finished"));b.append(v);h+=parseInt(s)}u=$('\x3ctd class\x3d"count-td"\x3e\x3cspan\x3e'+h+"\x3c/span\x3e\x3c/td\x3e");u.data("count",h);1<=parseInt(h)&&(u.addClass("finished"),u.find("span").addClass("finished"));b.append(u)}if(2<=$(a.el).find("tbody tr").size())for($(a.el).find("tbody").append('\x3ctr id\x3d"count-tr" class\x3d"count-tr"\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e'),f=1;f<=e+
1;f++){var x=0;$(a.el).find("tbody tr").each(function(){var a=$(this).find("td:eq("+f+")");a.data("count")&&(x+=parseInt(a.data("count")))});c=$('\x3ctd class\x3d"count-td"\x3e\x3cspan\x3e'+x+"\x3c/span\x3e\x3c/td\x3e");1<=parseInt(x)&&(c.addClass("finished"),c.find("span").addClass("finished"));$(a.el).find("tbody #count-tr").append(c)}})},delegateEvents:function(){var c=this;$("body").on("click.flowreport",".goto-top",function(b){f.gotoTop(".report-data")});$(c.el).on("change.flowreport",".static-year",
function(){var b=parseInt($(this).val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0),a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?a=null:""!=$(c.el).find(".static-department").val()&&(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.flowreport",
".static-month",function(){var b=$(this);$(c.el).find(".static-month").removeClass("selected");b.addClass("selected");var b=parseInt($(c.el).find(".static-month").index(b)),a=parseInt($(c.el).find(".static-year").val()),b=Date.create(a,b,2,0,0),a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?a=null:""!=$(c.el).find(".static-department").val()&&
(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.flowreport",".myself input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0);c.loadReport(b,null)}else b.prop("checked",!0)});
$(c.el).on("click.flowreport",".myfollow input:checkbox",function(){var b=$(this);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0);c.loadReport(b,"myfollow")}else b.prop("checked",!0)});$(c.el).on("click.flowreport",
".mySubordinate input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0);c.loadReport(b,"mySubordinate")}else b.prop("checked",!0)});$(c.el).on("change.flowreport",".static-department",
function(){var b=$(this);if(""==b.val())$(c.el).find(".myfollow input:checkbox").trigger("click");else{$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);var a=parseInt($(c.el).find(".static-year").val()),d=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),a=Date.create(a,d,2,0,0);c.loadReport(a,b.val())}});$(c.el).on("click.flowreport",
"tbody td.finished",function(b){b.stopPropagation();$(c.el).find("#flow-list").hasClass("hide")||($(c.el).find("#flow-list").addClass("hide"),$("body").off("click.flowList"));$("body").on("click.flowList",function(){$("body").off("click.flowList");$(c.el).find("#flow-list").addClass("hide")});var a=$(this),d=b=null,e=null;if(a.hasClass("count-td")){var f=a.parents("tr");f.hasClass("count-tr")?(d=$(c.el).find("thead tr th:eq("+a.index()+")").attr("id"),d||($(c.el).find(".myfollow input:checkbox").prop("checked")?
e="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?e="mySubordinate":""!=$(c.el).find(".static-department").val()&&(e=$(c.el).find(".static-department").val()),b=c.userId)):b=f.attr("id").substring(12)}else f=a.parents("tr"),b=f.attr("id").substring(12),d=$(c.el).find("thead tr th:eq("+a.index()+")").attr("id");c.model.flows(b,d,c.date,e,function(b){b=b.flowRequests;$(c.el).find("#flow-list ul").find(".workflow").remove();for(var d=0;d<b.length;d++){var e=b[d],g=$(c.el).find("#flow-li").clone(!0);
g.removeAttr("id");g.attr("data-id",e.id);g.attr("data-value",e.id);g.find(".title").html(e.name);g.find(".content").html(e.creator.username);g.find(".time").html(Date.create(e.createTime).format("{yyyy}-{MM}-{dd}"));g.removeClass("hide");$(c.el).find("#flow-list ul").append(g)}$(c.el).find("#flow-list").removeClass("hide");$(c.el).find("#flow-list").css("top",a.find("span").offset().top-10-$(c.el).find("#flow-list").height()+"px").css("left",a.find("span").offset().left-200-$(c.el).find("#flow-list").width()+
"px")})})},remove:function(){$(this.el).off(".flowreport");this.model=null}});m.exports=h});
define("teams/report/workhourreportview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.pageNo=1;this.date=null;this.el=e.el},render:function(e,c){var b=$(this.el);c||(c=Date.create());e||(e=TEAMS.currentUser.id);this.userId=e;b.empty().append(f.template("report.workhour"));b.find(".center-title").prepend(f.template("home.backbtn"));f.layout(".j_report-data");b.find(".static-year").val(Date.create(c).getUTCFullYear());b.find(".static-month").removeClass("selected");
b.find(".static-month:eq("+parseInt(Date.create(c).getUTCMonth())+")").addClass("selected");this.loadReport(c,null)},loadReport:function(e,c){var b=this,a=$(b.el);e||(e=Date.create());a.find("#export").attr("href","/timecard/export.json?date\x3d"+Date.create(e).reset("date").format("{yyyy}-{MM}-{dd}")+"\x26departmentId\x3d"+c);b.load(Date.create(e).reset("date").format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),c,function(d){a.find("thead tr,tbody").empty();a.find("tbody td").removeData("count");a.find(".static-time").html(Date.create(e).format("{yyyy} \u5e74 {MM} \u6708"));
var g=d.departments;a.find('.static-department option[value!\x3d""]').remove();for(var f=0;f<g.length;f++){var h=g[f];a.find(".static-department").append('\x3coption title\x3d"'+h.name+'" value\x3d"'+h.id+'"\x3e'+h.name+"\x3c/option\x3e")}1<=a.find('.static-department option[value\x3d"'+c+'"]').size()&&a.find(".static-department").val(c);a.find("thead tr").append('\x3cth class\x3d"date-th"\x3e\u65e5\u671f\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u59d3\u540d\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u90e8\u95e8\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u7b7e\u5230\u65f6\u95f4\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u7b7e\u5230\u5730\u5740\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u7b7e\u9000\u65f6\u95f4\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u7b7e\u9000\u5730\u5740\x3c/th\x3e\x3cth class\x3d"date-th"\x3e\u5de5\u4f5c\u65f6\u957f\x3c/th\x3e');
a.find("tbody").append(b.renderReport(d));$(".report-data .mCSB_container").css("top","0px");b.date=d.date})},renderReport:function(e){var c=e.reportRS,b=[],a=0,d=0,d=a=0,g="",f="",h;for(h in c)for(var k=c[h],r=0;r<k.length;r++){var p=k[r],g=p.checkIn?Date.create(p.checkIn).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"00:00",f=p.checkOut?Date.create(p.checkOut).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"00:00";p.checkIn&&p.checkOut?0>p.checkOut-p.checkIn?a="00:00":(d=parseInt(p.checkOut-p.checkIn)%
864E5,a=Math.floor(d/36E5),d%=36E5,d=Math.floor(d/6E4),10>a&&(a="0"+a),10>d&&(d="0"+d),a=a+":"+d):a="00:00";p.ciaddress||(p.ciaddress="");p.coaddress||(p.coaddress="");0==r?b.push('\x3ctr\x3e\x3ctd rowspan\x3d"'+k.length+'" class\x3d"bg-white"\x3e'+Date.create(h).format("{yyyy}-{MM}-{dd}")+"\x3c/td\x3e\x3ctd\x3e"+p.employee+"\x3c/td\x3e\x3ctd\x3e"+p.department+"\x3c/td\x3e\x3ctd\x3e"+g+"\x3c/td\x3e\x3ctd\x3e"+p.ciaddress+"\x3c/td\x3e\x3ctd\x3e"+f+"\x3c/td\x3e\x3ctd\x3e"+p.coaddress+"\x3c/td\x3e\x3ctd\x3e"+
a+"\x3c/td\x3e\x3c/tr\x3e"):b.push("\x3ctr \x3e\x3ctd\x3e"+p.employee+"\x3c/td\x3e\x3ctd\x3e"+p.department+"\x3c/td\x3e\x3ctd\x3e"+g+"\x3c/td\x3e\x3ctd\x3e"+p.ciaddress+"\x3c/td\x3e\x3ctd\x3e"+f+"\x3c/td\x3e\x3ctd\x3e"+p.coaddress+"\x3c/td\x3e\x3ctd\x3e"+a+"\x3c/td\x3e\x3c/tr\x3e")}e.next&&1==this.pageNo&&b.push('\x3ctr id\x3d"more"\x3e\x3ctd colspan\x3d"8" class\x3d"cs-p"\x3e\u52a0\u8f7d\u66f4\u591a\x3c/td\x3e\x3c/tr\x3e');return b.join("")},delegateEvents:function(){var e=this,c=$(this.el);$("body").on("click.workhour",
".goto-top",function(b){f.gotoTop(".report-data")});c.on("change.workhour",".static-year",function(){e.pageNo=1;var b=parseInt($(this).val()),a=parseInt(c.find(".static-month").index(c.find(".static-month.selected"))),b=Date.create(b,a,2,0,0),a=null;""!=c.find(".static-department").val()&&(a=c.find(".static-department").val());e.loadReport(b,a)});c.on("click.workhour",".static-month",function(){e.pageNo=1;var b=$(this);c.find(".static-month").removeClass("selected");b.addClass("selected");var b=parseInt(c.find(".static-month").index(b)),
a=parseInt(c.find(".static-year").val()),b=Date.create(a,b,2,0,0),a=null;""!=c.find(".static-department").val()&&(a=c.find(".static-department").val());e.loadReport(b,a)});c.on("change.workhour",".static-department",function(){e.pageNo=1;var b=$(this);if(""==b.val())e.loadReport(a,null);else{var a=parseInt(c.find(".static-year").val()),d=parseInt(c.find(".static-month").index(c.find(".static-month.selected"))),a=Date.create(a,d,2,0,0);e.loadReport(a,b.val())}});c.on("click.workhour","#backTop",function(){$(".report-data .mCSB_container").css("top",
"0px");c.find("#backTop").addClass("hide")});c.on("click.workhour","#more",function(){parseInt(c.find(".static-year").val());parseInt(c.find(".static-month").index(c.find(".static-month.selected")));var b=null;""!=c.find(".static-department").val()&&(b=c.find(".static-department").val());e.renderMore(e.date,b)})},renderMore:function(e,c){var b=this,a=$(this.el);b.pageNo++;b.load(Date.create(e).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),c,function(c){b.date=c.date;var e=a.find("#more");$(b.renderReport(c)).insertBefore(e);
c.next||e.remove()})},load:function(e,c,b){$.ajax({type:"get",url:"/timecard/workhour.json",dataType:"json",data:{date:e,departmentId:c,pageNo:this.pageNo},success:function(a){b&&b(a)}})},remove:function(){$(this.el).off(".workhour");this.model=null}});m.exports=h});
define("teams/report/blogreportmodel",function(h,q,m){h=Backbone.Model.extend({load:function(f,e,c,b){$.ajax({type:"get",url:"/blog/report.json?a\x3d"+1E3*Math.random(),dataType:"json",data:{id:f,from:Date.create(e).reset("date").format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),to:Date.create(e).endOfMonth().format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),type:c},success:function(a){b&&b(a)}})}});m.exports=h});
define("teams/report/logdetailview",["teams/utils","teams/models/logmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/logmodel");h=Backbone.View.extend({userId:"",initialize:function(c){this.model=new e;c&&(this.userId=c.userId);this.el=c.el},render:function(c){c&&(this.userId=c);$(this.el).empty().append(f.template("log.detail"));this.loadData(1);f.layout("#logdetail");this.events()},loadData:function(c){var b=this,a=this.model;c&&(a.pageNo=c);a.loadDetail(b.userId,function(a){var c=
a.employee.username;$(b.el).find(".page-user").html(" "+c+"\u8be6\u7ec6\u767b\u5f55\u65e5\u5fd7");var e=a.page;$(b.el).find("#login-table tbody").empty();$(b.el).find(".active a").html("\u4ece\u672a\u767b\u5f55");$(b.el).find(".page-last").unbind("click");$(b.el).find(".page-buttons").addClass("disabled");if(!(0>=e.totalCount)){a=e.result;for(c=0;c<a.length;c++)b.createLogDetailTr(a[c],$(b.el).find("#login-table tbody"));$(b.el).find(".active a").html("\u7b2c"+e.pageNo+"/"+e.totalPages+"\u9875");
$(b.el).find(".page-last").click(function(){$(this).hasClass("disabled")||b.loadData(e.totalPages)});1!=e.totalPages&&(1==e.pageNo&&($(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")),e.pageNo==e.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled")),1!=e.pageNo&&e.pageNo!=e.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),
$(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")))}})},createLogDetailTr:function(c,b){var a=Date.create(c.loginTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");b.append("\x3ctr\x3e\x3ctd\x3e\x3ca class\x3d'router usercard-toggle' userId\x3d'"+c.empId+"'\x3e"+c.userName+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+a+"\x3c/td\x3e\x3c/tr\x3e")},events:function(){var c=this,b=this.model;$(c.el).find(".page-first").click(function(){$(this).hasClass("disabled")||
c.loadData(1)});$(c.el).find(".page-pre").click(function(){$(this).hasClass("disabled")||c.loadData(--b.pageNo)});$(c.el).find(".page-next").click(function(){$(this).hasClass("disabled")||c.loadData(++b.pageNo)});$("body").on("click.logdetail",".goto-top",function(a){f.gotoTop("#logdetail")})},remove:function(){}});m.exports=h});
define("teams/report/taskreportmodel",function(h,q,m){h=Backbone.Model.extend({load:function(f,e,c,b){$.ajax({type:"get",url:"/tasks/report.json?a\x3d"+1E3*Math.random(),dataType:"json",data:{id:f,from:Date.create(e).reset("date").format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),to:Date.create(e).endOfMonth().format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),type:c},success:function(a){b&&b(a)}})}});m.exports=h});
define("teams/report/timecard",["teams/utils","teams/views/calendarview","teams/report/timecarddetail"],function(h,q,m){var f=h("teams/utils"),e=h("teams/views/calendarview"),c=h("teams/report/timecarddetail");h=Backbone.View.extend({departmentId:null,type:null,initialize:function(b){this.el=b.el;$(this.el).empty().append(f.template("report.timecard"));$(this.el).attr("id","timecardReport");this.el=timecardReport;this.calendarView=new e({el:"#report-calendar",parent:this,containerHeight:"280px"});
this.calendarView.render();f.layout("#report-left")},delegateEvents:function(){var b=this;$("body").on("click.Timecard",".goto-top",function(a){f.gotoTop("#timecard-right");f.gotoTop("#report-left")});f.datepicker([{el:"#workTime1",callback:function(a){b.changeWorkTime($("#workTime1"))}},{el:"#workTime2",callback:function(a){b.changeWorkTime2($("#workTime2"))}}]);$(b.el).on("click.Timecard",".timecard-detail",function(){var a=$(this).attr("userId"),d=b.calendarView.getDays(!1);(new c({userId:a,workdays:d,
viewDate:b.calendarView.viewDate,workTime1:$("#workTime1").val(),workTime2:$("#workTime2").val()})).render()})},render:function(){var b=this;b.load(function(a){var c=TEAMS.globalConfig,e=c.find(function(a){return"workTime1"==a.configKey}),c=c.find(function(a){return"workTime2"==a.configKey});e&&$("#workTime1").val(e.configValue);c&&$("#workTime2").val(c.configValue);b.calendarView.loadHolidays(a.workdays);a=a.departments;for(e=0;e<a.length;e++)c=a[e],$(b.el).find(".static-department").append('\x3coption title\x3d"'+
c.name+'" value\x3d"'+c.id+'"\x3e'+c.name+"\x3c/option\x3e");f.layout("#timecard-right");b.events();$(b.el).find("#report-search").trigger("click")})},dateSelected:function(b){this.calendarView.changeHolidayStatus(b,null)},events:function(){var b=this;$(b.el).on("click.Timecard","#report-search",function(){var a=Date.create(b.calendarView.viewDate);b.search(a.format("{yyyy}-{MM}-{dd}"),null,b.type,function(a){$(b.el).find(".j_report-view tbody").empty();b.departmentId=a.departmentId;a=a.reports||
[];if(0==a.length)$(b.el).find(".j_report-view tbody").html('\x3ctr\x3e\x3ctd colspan\x3d"7" align\x3d"center"\x3e\u6ca1\u6709\u6570\u636e\x3c/td\x3e\x3c/tr\x3e');else{for(var c=0;c<a.length;c++){var e=a[c];$(b.el).find(".j_report-view tbody").append('\x3ctr\x3e\x3ctd\x3e\x3ca class\x3d"router usercard-toggle" userId\x3d"'+e.employeeId+'"\x3e'+e.employee+'\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d"color:blue;"\x3e'+e.checkin+"\x3c/td\x3e\x3ctd\x3e"+e.late+"\x3c/td\x3e\x3ctd\x3e"+e.leaveEarly+'\x3c/td\x3e\x3ctd style\x3d"color:red;"\x3e'+
e.absenteeism+"\x3c/td\x3e\x3ctd\x3e"+e.miss+'\x3c/td\x3e\x3ctd\x3e\x3ca userId\x3d"'+e.employeeId+'" class\x3d"timecard-detail"\x3e[\u67e5\u770b\u660e\u7ec6]\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e')}$(b.el).find(".j_report-view").show()}})});$(b.el).on("click.Timecard",".myself input:checkbox",function(){var a=$(this);$(b.el).find(".myfollow input:checkbox").prop("checked",!1);$(b.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(b.el).find(".static-department").val("");a.prop("checked")?(b.type=
null,$(b.el).find("#report-search").trigger("click")):a.prop("checked",!0)});$(b.el).on("click.Timecard",".myfollow input:checkbox",function(){var a=$(this);$(b.el).find(".myself input:checkbox").prop("checked",!1);$(b.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(b.el).find(".static-department").val("");a.prop("checked")?(b.type="myfollow",$(b.el).find("#report-search").trigger("click")):a.prop("checked",!0)});$(b.el).on("click.Timecard",".mySubordinate input:checkbox",function(){var a=
$(this);$(b.el).find(".myself input:checkbox").prop("checked",!1);$(b.el).find(".myfollow input:checkbox").prop("checked",!1);$(b.el).find(".static-department").val("");a.prop("checked")?(b.type="mySubordinate",$(b.el).find("#report-search").trigger("click")):a.prop("checked",!0)});$(b.el).on("change.Timecard",".static-department",function(){var a=$(this);""==a.val()?$(b.el).find(".myfollow input:checkbox").trigger("click"):($(b.el).find(".myself input:checkbox").prop("checked",!1),$(b.el).find(".myfollow input:checkbox").prop("checked",
!1),$(b.el).find(".mySubordinate input:checkbox").prop("checked",!1),b.type=a.val(),$(b.el).find("#report-search").trigger("click"))})},load:function(b){$.ajax({type:"get",url:"/timecard.json",dataType:"json",data:{},success:function(a){b&&b(a)}})},search:function(b,a,c,e){$.ajax({type:"get",url:"/timecard/reportAllByMonth.json",dataType:"json",data:{date:b,departmentId:a,searchType:c},success:function(a){e&&e(a)}})},changeWorkTime:function(b,a){var c={};c[b.attr("name")]=b.val();TEAMS.globalConfig[0]&&
(TEAMS.globalConfig[0].configValue=b.val());$.ajax({type:"post",url:"/timecard/changeWorkTime.json",dataType:"json",data:c,success:function(b){a&&a(b)}})},changeWorkTime2:function(b,a){var c={};c[b.attr("name")]=b.val();TEAMS.globalConfig[1]&&(TEAMS.globalConfig[1].configValue=b.val());$.ajax({type:"post",url:"/timecard/changeWorkTime2.json",dataType:"json",data:c,success:function(b){a&&a(b)}})},saveOrUpdateWorkDay:function(b,a){$.ajax({type:"post",url:"/timecard/saveOrUpdateWorkDay.json",dataType:"json",
data:{date:a,holiday:b},success:function(a){}})},loadWorkDay:function(b,a){$.ajax({type:"get",url:"/timecard/loadWorkDay.json",dataType:"json",data:{date:b},success:function(b){a&&a(b)}})},remove:function(){$(this.el).off(".Timecard")}});m.exports=h});
define("teams/report/logview",["teams/utils","teams/models/logmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/models/logmodel");h=Backbone.View.extend({type:"myfollow",initialize:function(c){c&&c.type&&(this.type=c.type);c&&c.userId&&(this.userId=c.userId);this.model=new e;$(this.el).empty().append(f.template("log.report"));f.layout("#report-wrap");this.el=c.el},delegateEvents:function(){var c=this;$("body").on("click.LogView",".goto-top",function(b){f.gotoTop("#report-wrap")});$(c.el).on("click.LogView",
".myfollow input:checkbox",function(){var b=$(this);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");b.prop("checked")?c.renderByType("myfollow"):b.prop("checked",!0)});$(c.el).on("click.LogView",".mySubordinate input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");b.prop("checked")?c.renderByType("mySubordinate"):b.prop("checked",!0)});$(c.el).on("change.LogView",
".static-department",function(){var b=$(this);""==b.val()?$(c.el).find(".myfollow input:checkbox").trigger("click"):($(c.el).find(".myfollow input:checkbox").prop("checked",!1),$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1),c.renderByType(b.val()))});$(c.el).on("click.LogView",".log-detail",function(){c.userId=$(this).attr("user-id")})},render:function(){this.renderByType()},renderByType:function(c){var b=this,a=this.model;c?b.type=c:c=b.type;a.load(c,function(a){$(b.el).find("#login-table tbody").empty();
$(b.el).find('.static-department option[value!\x3d""]').remove();for(var e=a.departmentList,f=0;f<e.length;f++){var h=e[f];$(b.el).find(".static-department").append('\x3coption title\x3d"'+h.name+'" value\x3d"'+h.id+'"\x3e'+h.name+"\x3c/option\x3e")}"myfollow"==b.type?$(b.el).find(".myfollow input:checkbox").prop("checked",!0):"mySubordinate"==b.type?$(b.el).find(".mySubordinate input:checkbox").prop("checked",!0):1<=$(b.el).find('.static-department option[value\x3d"'+c+'"]').size()&&$(b.el).find(".static-department").val(c);
a=a.loginLogList;e=$(b.el).find("#login-table tbody");a&&0==a.length&&e.append('\x3ctr\x3e\x3ctd colspan\x3d"6" align\x3d"center"\x3e\u6ca1\u6709\u6570\u636e\x3c/td\x3e\x3c/tr\x3e');for(f=0;f<a.length;f++)b.createLogTr(a[f],e)})},createLogTr:function(c,b){var a="\u4ece\u672a\u767b\u5f55";c.lastLogin&&(a=Date.create(c.lastLogin).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));b.append("\x3ctr\x3e\x3ctd\x3e\x3ca class\x3d'router usercard-toggle' userId\x3d'"+c.empId+"'\x3e"+c.userName+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+
c.monthCount+"\x3c/td\x3e\x3ctd\x3e"+c.weekCount+"\x3c/td\x3e\x3ctd\x3e"+c.dayCount+"\x3c/td\x3e\x3ctd\x3e"+a+'\x3c/td\x3e\x3ctd\x3e\x3ca class\x3d"router log-detail" href\x3d"/report/logs/'+this.type+"/"+c.empId+'" user-id\x3d"'+c.empId+'"\x3e\u660e\u7ec6\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e')},remove:function(){$(this.el).off(".LogView")}});m.exports=h});
define("teams/report/taskreportview",["teams/utils","teams/report/taskreportmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/report/taskreportmodel");h=Backbone.View.extend({userId:null,viewMode:"1",initialize:function(c){c&&c.viewMode&&(this.viewMode=c.viewMode);this.model=new e;this.el=c.el},render:function(c,b){var a=this;b||(b=Date.create());c||(c=TEAMS.currentUser.id);a.userId=c;var d="normal"==TEAMS.currentTenant.status?!0:!1;$(a.el).empty().append(f.template("task.report",{vip:d}));
this.getReportH();$(window).resize(function(){a.getReportH()});f.layout(".j_report-data");$(a.el).find(".static-year").val(Date.create(b).getUTCFullYear());$(a.el).find(".static-month").removeClass("selected");$(a.el).find(".static-month:eq("+parseInt(Date.create(b).getUTCMonth())+")").addClass("selected");"1"==a.viewMode?a.loadReport(b,null):"2"==a.viewMode&&a.loadReport(b,"myfollow")},loadReport:function(c,b){var a=this,d=this.model;c||(c=Date.create());d.load(a.userId,Date.create(c).format("{yyyy}-{MM}-{dd}"),
b,function(b){var d=b.taskList,e=Date.create(b.from),f=Date.create(b.to),h=b.workdays,p=b.departmentList,s=b.type;b=b.userList;$(a.el).find("thead tr,tbody").empty();$(a.el).find("tbody td").removeData("count");$(a.el).find("thead tr").append('\x3cth class\x3d"username-th"\x3e\u59d3\u540d\x3c/th\x3e');for(var u=Date.create(e).reset(),e=0;u<=f;){var w=u.isWeekend()?" holiday":"";$(a.el).find("thead tr").append('\x3cth class\x3d"date-th'+w+'"\x3e'+u.format("{d}")+"\x3c/th\x3e");e++;u.addDays(1)}for(var v=
0;v<h.length;v++)f=h[v],u=parseInt(Date.create(f.workdayDate).format("{d}"))-1,u=$(a.el).find("thead .date-th:eq("+u+")"),f.holiday?u.addClass("holiday"):u.removeClass("holiday");for(v=0;v<b.length;v++)h=b[v],0>=$(a.el).find("tbody #report-data-"+h.id).size()&&a.createReportTr(h);for(v=0;v<d.length;v++)b=d[v],h=b.finishTime,b=$(a.el).find("tbody #report-data-"+b.manager.id),u=parseInt(Date.create(h).format("{d}")),h=b.find(".unfinished:eq("+(u-1)+")"),(b=h.data("count"))||(b=0),b=parseInt(b),b++,
h.data("count",b);$(a.el).find("tbody .unfinished").each(function(){var a=$(this);a.hasClass("holiday")&&a.removeClass("unfinished");a.data("count")&&(a.removeClass("unfinished"),a.addClass("finished"));a.html('\x3cspan class\x3d"'+a.attr("class")+'"\x3e\x3c/span\x3e');a.data("count")&&a.find("span").html(a.data("count"))});$(a.el).find("thead tr").append('\x3cth class\x3d"count-th"\x3e\u603b\u6570\x3c/th\x3e');$(a.el).find("tbody tr").each(function(){var a=$(this),b=0;a.find('td:not(".username-td")').each(function(){var a=
$(this);a.data("count")&&(b+=a.data("count"))});a.append('\x3ctd class\x3d"count-td"\x3e'+b+"\x3c/td\x3e")});var x=0;$(a.el).find("tbody").append('\x3ctr id\x3d"count-tr"\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e');for(v=1;v<=e;v++){var y=0,w="";$(a.el).find("tbody tr").each(function(){var a=$(this).find("td:eq("+v+")");a.hasClass("holiday")&&(w=" holiday");a.data("count")&&(y+=a.data("count"),x+=a.data("count"))});y||(y="-");$(a.el).find("tbody #count-tr").append('\x3ctd class\x3d"count-td'+w+'"\x3e'+
y+"\x3c/td\x3e")}$(a.el).find("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+x+"\x3c/td\x3e");$(a.el).find(".static-time").html(Date.create(c).format("{yyyy} \u5e74 {M} \u6708"));$(a.el).find('.static-department option[value!\x3d""]').remove();for(v=0;v<p.length;v++)d=p[v],$(a.el).find(".static-department").append('\x3coption value\x3d"'+d.id+'"\x3e'+d.name+"\x3c/option\x3e");1==$(a.el).find('.static-department option[value\x3d"'+s+'"]').size()&&$(a.el).find(".static-department").val(s)})},
createReportTr:function(c){var b=this;$(b.el).find("tbody").append('\x3ctr id\x3d"report-data-'+c.id+'"\x3e\x3ctd class\x3d"username-td" title\x3d"'+c.username+'"\x3e\x3ca class\x3d"router usercard-toggle" userId\x3d"'+c.id+'"\x3e'+c.username+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e");$(b.el).find("thead .date-th").each(function(){var a=$(this).hasClass("holiday")?" holiday":"";$(b.el).find("tbody #report-data-"+c.id).append('\x3ctd class\x3d"unfinished'+a+'"\x3e\x3c/td\x3e')})},delegateEvents:function(){var c=
this;$("body").on("click.taskreport",".goto-top",function(b){f.gotoTop(".report-data")});$(c.el).on("change.taskreport",".static-year",function(){var b=parseInt($(this).val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0),a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?
a=null:""!=$(c.el).find(".static-department").val()&&(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.taskreport",".static-month",function(){var b=$(this);$(c.el).find(".static-month").removeClass("selected");b.addClass("selected");var b=parseInt($(c.el).find(".static-month").index(b)),a=parseInt($(c.el).find(".static-year").val()),b=Date.create(a,b,2,0,0),a=null;$(c.el).find(".myfollow input:checkbox").prop("checked")?a="myfollow":$(c.el).find(".mySubordinate input:checkbox").prop("checked")?
a="mySubordinate":$(c.el).find(".myself input:checkbox").prop("checked")?a=null:""!=$(c.el).find(".static-department").val()&&(a=$(c.el).find(".static-department").val());c.loadReport(b,a)});$(c.el).on("click.taskreport",".myself input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),
b=Date.create(b,a,2,0,0);c.loadReport(b,null)}else b.prop("checked",!0)});$(c.el).on("click.taskreport",".myfollow input:checkbox",function(){var b=$(this);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,
2,0,0);c.loadReport(b,"myfollow")}else b.prop("checked",!0)});$(c.el).on("click.taskreport",".mySubordinate input:checkbox",function(){var b=$(this);$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".myself input:checkbox").prop("checked",!1);$(c.el).find(".static-department").val("");if(b.prop("checked")){var b=parseInt($(c.el).find(".static-year").val()),a=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),b=Date.create(b,a,2,0,0);c.loadReport(b,
"mySubordinate")}else b.prop("checked",!0)});$(c.el).on("change.taskreport",".static-department",function(){var b=$(this);if(""==b.val())$(c.el).find(".myfollow input:checkbox").trigger("click");else{$(c.el).find(".myfollow input:checkbox").prop("checked",!1);$(c.el).find(".mySubordinate input:checkbox").prop("checked",!1);$(c.el).find(".myself input:checkbox").prop("checked",!1);var a=parseInt($(c.el).find(".static-year").val()),d=parseInt($(c.el).find(".static-month").index($(c.el).find(".static-month.selected"))),
a=Date.create(a,d,2,0,0);c.loadReport(a,b.val())}})},getReportH:function(){},remove:function(){$(this.el).off(".taskreport");this.model=null}});m.exports=h});
define("teams/report/reportpage","teams/core/page teams/report/taskreportview teams/report/blogreportview teams/report/timecard teams/report/flowreportview teams/report/workhourreportview teams/report/logview teams/report/logdetailview teams/report/taskstatisticsview teams/workflow/flowstatview".split(" "),function(h,q,m){q=h("teams/core/page");var f=h("teams/report/taskreportview"),e=h("teams/report/blogreportview"),c=h("teams/report/timecard"),b=h("teams/report/flowreportview"),a=h("teams/report/workhourreportview"),
d=h("teams/report/logview"),g=h("teams/report/logdetailview"),l=h("teams/report/taskstatisticsview"),n=h("teams/workflow/flowstatview");h=q.extend({initialize:function(a){this.pageKey=a.pageKey;this.reloadPage=a.reloadPage;this.template="report.reportpage";this.pageActive="report";this.module=a.module;this.userId=a.userId;this.type=a.type;this.el="#j_reportcenter"},render:function(){this.initLayout({multicolum:"log"==this.module?!0:!1});$(".aside").find(".aside-nav li.j_"+this.module).addClass("active");
"normal"==TEAMS.currentTenant.status?$(".j_workhour").removeClass("hide"):$(".j_workhour").addClass("hide");switch(this.module){case "taskstatistics":this.mainView=new l({el:this.el});this._render();break;case "task":this.mainView=new f({viewMode:"1",el:this.el});this._render();break;case "flow":this.mainView=new b({el:this.el});this._render();break;case "flowstat":this.mainView=new n({el:this.el});this._render();break;case "timecard":this.mainView=new c({el:this.el});this.mainView.render();break;
case "log":this.mainView=new d({type:this.type,userId:this.userI,el:"#center-pane"});this._render();this.renderSubview();break;case "blog":this.mainView=new e({viewMode:"1",el:this.el});this._render();break;case "workhour":this.mainView=new a({el:this.el}),this._render()}},renderSubview:function(){this.subView=new g({userId:this.userId,el:"#right-pane"});this.subView.render()}});m.exports=h});
define("teams/report/statisticstasklistmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.beginDate=f.beginDate;this.endDate=f.endDate;this.statisticsType=f.statisticsType;this.statisticians=f.statisticians;this.pageNo=1;this.pageSize=10},singleStatisticsByDay:function(f,e){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/tasks/singleStatisticsByDay.json",dataType:"json",data:JSON.stringify({filter:{beginDate:this.beginDate,endDate:this.endDate,statisticians:this.statisticians,
keywords:e},statisticsType:this.statisticsType,pageSize:this.pageSize,pageNo:this.pageNo}),success:function(c){f&&f(c)}})}});m.exports=h});
define("teams/report/taskstatisticsmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(){this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");this.statisticians=[TEAMS.currentUser.id];this.xAxis=null},statisticsByDay:function(f){var e=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/tasks/statisticsByDay.json",dataType:"json",data:JSON.stringify({filter:{beginDate:e.beginDate,
endDate:e.endDate,statisticians:e.statisticians}}),success:function(c){if(f){var b=e.xAxis=e.calculateX();c=e.parseSeries(c.statisticsByDay);f({xAxis:b,series:c})}}})},calculateX:function(){var f=[{type:"category",data:[]}];Date.range(this.beginDate,this.endDate).every("day",function(e){f[0].data.push(e.format("{yyyy}-{MM}-{dd}"))});return f},parseSeries:function(f){var e=[{name:"\u8fdb\u884c\u4e2d",type:"bar",data:[]},{name:"\u5df2\u5b8c\u6210",type:"bar",data:[]},{name:"\u65b0\u521b\u5efa",type:"bar",
data:[]}];_.isEmpty(f.doingMap)||(e[0].data=this.parseMapToArray(f.doingMap));_.isEmpty(f.finishedMap)||(e[1].data=this.parseMapToArray(f.finishedMap));_.isEmpty(f.createdMap)||(e[2].data=this.parseMapToArray(f.createdMap));return e},parseMapToArray:function(f){var e=Array(this.xAxis[0].data.length),c,b;for(b in f)c=this.xAxis[0].data.indexOf(b),e[c]=f[b];return e},statisticsByFinished:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/tasks/statisticsByFinished.json",
dataType:"json",data:JSON.stringify({filter:{beginDate:this.beginDate,endDate:this.endDate,statisticians:this.statisticians}}),success:function(e){if(f){var c={inner:[{name:"\u5df2\u5b8c\u6210"},{name:"\u8fdb\u884c\u4e2d"}],outter:[{name:"\u5168\u90e8"}]};if(e&&e.statisticsByFinished){e=e.statisticsByFinished;for(var b in e)switch(b){case "finished":c.inner[0].value=e[b];break;case "doing":c.inner[1].value=e[b];break;case "manageOrIn":c.outter[0].value=e[b]}}c.inner[0].value||c.inner[1].value||(c.inner=
[]);c.outter[0].value||(c.outter=[]);f(c)}}})},statisticsByUrgency:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/tasks/statisticsByUrgency.json",dataType:"json",data:JSON.stringify({filter:{beginDate:this.beginDate,endDate:this.endDate,statisticians:this.statisticians}}),success:function(e){if(f){var c={inner:[{name:"\u6b63\u5e38"},{name:"\u7d27\u6025"},{name:"\u975e\u5e38\u7d27\u6025"}],outter:[{name:"\u5168\u90e8"}]};if(e&&e.statisticsByUrgency){e=e.statisticsByUrgency;
for(var b in e)switch(b){case "manageOrIn":c.outter[0].value=e[b];break;case "normal":c.inner[0].value=e[b];break;case "high":c.inner[1].value=e[b];break;case "urgency":c.inner[2].value=e[b]}}c.inner[0].value||c.inner[1].value||c.inner[2].value||(c.inner=[]);c.outter[0].value||(c.outter=[]);f(c)}}})},loadDetailTable:function(){var f=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/tasks/statisticsDetailByManager.json",dataType:"json",data:JSON.stringify({filter:{beginDate:f.beginDate,
endDate:f.endDate,statisticians:f.statisticians}}),success:function(e){f.trigger("sync:detailTable",e.statisticsDetailByManager)}})},loadSubordinates:function(){var f=this;$.ajax({type:"get",url:"/users/allSubordinates/"+TEAMS.currentUser.id+".json",dataType:"json",success:function(e){f.trigger("sync:subordinates",e.subordinates)}})}});m.exports=h});
define("teams/report/timecarddetail",["teams/utils","teams/views/calendarview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/views/calendarview");h=Backbone.View.extend({el:"#timecard-detail",initialize:function(c){this.userId=c.userId;this.workdays=c.workdays;this.viewDate=c.viewDate;this.workTime1=c.workTime1;this.workTime2=c.workTime2;$("body").append(f.template("report.timecard.detail"))},delegateEvents:function(){var c=this;$("#timecard-detail");$("body").on("hidden.timecardDetail",function(b){c.remove()})},
render:function(){var c=$("#timecard-detail");this.calendarView=new e({el:"#timecarddetail-container",parent:this,containerHeight:"500px",headVisible:!1});this.calendarView.render(this.viewDate);this.calendarView.loadHolidaysByComma(this.workdays);$("#timecard-detail").modal();var b=Date.create(this.viewDate).format("{yyyy}-{MM}-{dd}"),a=Date.create(b+" "+this.workTime1).format("{HH}:{mm}:{ss}"),d=Date.create(b+" "+this.workTime2).format("{HH}:{mm}:{ss}");this.loadChecks(this.userId,Date.create(this.viewDate).format("{yyyy}-{MM}-{dd}"),
function(b){var e=b.timecards;c.find(".datepicker-days tbody td").each(function(){var b=$(this);if(b.hasClass("disabled"))return!0;var c=b.text(),g="miss",f="miss";b.html("\x3cdiv\x3e"+c+"\x3c/div\x3e");if(e)for(var h=0;h<e.length;h++){var u=e[h];if(u.type){var w=Date.create(u.addTime);w.format("{d}")==c&&("CHECKIN"==u.type&&(!b.hasClass("holiday")&&w.format("{HH}:{mm}:{ss}")>a?(g="late",b.html(b.html()+'\x3cdiv class\x3d"late"\x3e\u8fdf\u5230'+w.format("{HH}:{mm}:{ss}")+"\x3c/div\x3e")):(g="normal",
b.html(b.html()+'\x3cdiv class\x3d"checkin"\x3e\u7b7e\u5230'+w.format("{HH}:{mm}:{ss}")+"\x3c/div\x3e"))),"CHECKOUT"==u.type&&(!b.hasClass("holiday")&&w.format("{HH}:{mm}:{ss}")<d?(f="leave-early",b.html(b.html()+'\x3cdiv class\x3d"leave-early"\x3e\u65e9\u9000'+w.format("{HH}:{mm}:{ss}")+"\x3c/div\x3e")):(f="normal",b.html(b.html()+'\x3cdiv class\x3d"checkout"\x3e\u7b7e\u9000'+w.format("{HH}:{mm}:{ss}")+"\x3c/div\x3e"))))}}"miss"==g&&"miss"==f?b.hasClass("holiday")||b.html(b.html()+'\x3cdiv class\x3d"absenteeism"\x3e\u672a\u7b7e\u5230\x3c/div\x3e'):
b.hasClass("holiday")||("miss"==g&&b.html(b.html()+'\x3cdiv class\x3d"miss"\x3e\u6f0f\u7b7e\u5230\x3c/div\x3e'),"miss"==f&&b.html(b.html()+'\x3cdiv class\x3d"miss"\x3e\u6f0f\u7b7e\u9000\x3c/div\x3e'))})})},loadChecks:function(c,b,a){$.ajax({type:"get",url:"/timecard/checks.json",dataType:"json",data:{employeeId:c,date:b},success:function(b){a&&a(b)}})},remove:function(){this.calendarView.remove();this.calendarView=null;$("body").off(".timecardDetail");$("#timecard-detail").off(".timecardDetail");
$("#timecard-detail").remove()}});m.exports=h});
define("teams/utils",["teams/component/template"],function(h,q,m){var f=h("teams/component/template"),e={defaults:{el:"input.datepicker",callback:function(a){},eventType:"focusin.datePicker"},init:function(a){var b=[];$.isArray(a)?b=a:b.push(a);for(var c=0;c<b.length;c++){a=b[c];if($.isFunction(a)){var e=a;a={};a.callback=e}a=$.extend(!0,{},this.defaults,a);(function(a){var b=$(a.el),c=b.attr("format")||"yyyy-mm-dd",d=b.attr("startView")||"month",e=b.attr("minView")||"month",g=b.attr("maxView")||
"decade",f=b.attr("position")||"bottom-right",l=b.attr("dateGroup"),h=b.attr("writeValue"),y=b.attr("insertAfter"),m=a.startDate||null,A=a.endDate||null,B=a.callback;b.each(function(){var a=$(this);a.on("focusin.datePicker",function(){a.datetimepicker({format:c,language:"zh-CN",todayHighlight:!0,todayBtn:l,autoclose:!0,initialDate:new Date,startView:d,minView:e,maxView:g,pickerPosition:f,showMeridian:!1,writeValue:h,startDate:m,endDate:A}).on("show",function(){y&&!a.attr("relocated")&&(a.data("datetimepicker").picker.insertAfter(a).css("position",
"fixed"),a.attr("relocated",!0))});a.datetimepicker("show");a.off("focusin.datePicker")}).on("changeDate",function(a){B(a)})})})(a)}},remove:function(a){if(arguments)for(var b=0;b<arguments.length;b++)$(arguments[b]).datetimepicker("remove")}},c={setLayout:function(a,b,c){if(0==a.indexOf("#print"))$(a).removeClass("scrollwrapper");else{var e=$(a);if(e){var f=e.attr("height"),k=e.attr("auto-scroll");if(!f)var f=e.attr("marginbottom")||0,h=e.offset().top,f=$(window).height()-h-f;if(null!=e.parents("#entitybox").get(0))var p=
e.parents("#entitybox").find(".modal-content"),h=p.height(),p=p.offset().top,h=$(window).height()-h-p,f=f-h;h=e.attr("theme")?e.attr("theme"):"darkblue";if(!e.hasClass("mCustomScrollbar")){p={onScroll:function(){$("body .goto-top").removeClass("hide")},onTotalScrollBack:function(){$("body .goto-top").addClass("hide")}};if(b){$.isArray(b)&&(c=b);c&&!c[0].gotoTopButton&&(p.onScroll=null,p.onTotalScrollBack=null);var s=$.extend(p,b)}b={theme:h,callbacks:s?s:p};if(c)var u=$.extend(b,c[0]);c&&"x"==c[0].axis&&
(k="yes");f&&"yes"!=k&&e.css("height",f);e.mCustomScrollbar(u?u:b);c&&!c[0].bottomBlank&&null!=e.parents("#entitybox").get(0)&&e.children().children(".mCSB_container").addClass("pb-0");"#chat-container"==a&&(e.mCustomScrollbar("update"),e.mCustomScrollbar("scrollTo","bottom"));setTimeout(function(){$("body .goto-top").addClass("hide")},200)}}}},destroy:function(a){$(a).mCustomScrollbar("destroy")}},b=function(a,b,c){"function"==typeof b&&(c=b);var e=1,f=0,k=a.find(".slide-con .slide-item"),h=k.length,
p=function(a){k.eq(a).css({display:"block",opacity:0}).animate({opacity:1}).siblings().css({display:"none",opacity:0});b.count&&null!=w.get(0)&&w.eq(a).addClass("active").siblings().removeClass("active");c&&c()};if(b.count){a.prepend('\x3cdiv class\x3d"slide-num"\x3e\x3c/div\x3e');a.find(".slide-num").prepend("\x3cul\x3e\x3c/ul\x3e");for(var s=a.find(".slide-num ul"),u=0;u<h;u++)num=u+1,s.append("\x3cli\x3e\x3cspan\x3e"+num+"\x3c/span\x3e\x3c/li\x3e");var w=a.find(".slide-num ul li");w.click(function(){e=
f=$(this).index();p(e)});w.eq(0).trigger("click")}if(b.pager){var s=b.pager.prev||".prev",u=b.pager.next||".next",v=s.slice(s.indexOf(".")+1),x=u.slice(u.indexOf(".")+1);a.prepend('\x3cdiv class\x3d"'+v+'"\x3e\x3ca\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"'+x+'"\x3e\x3ca\x3e\x3c/a\x3e\x3c/div\x3e');a.find(u).click(function(){e=e==h-1?0:++e;p(e)});a.find(s).click(function(){e=0==e?h-1:--e;p(e)})}if(b.autoslide){var y=b.speed||4E3,m=function(){e=e==h-1?0:++e;p(e)};t=setInterval(m,y);a.hover(function(){clearInterval(t)},
function(){t=setInterval(m,y)})}b.facybox&&a.find(".slide-item").fancybox(b.facybox)};h={layout:function(a,b,e){c.setLayout(a,b,e)},gotoTop:function(a,b){a?$(a).hasClass("mCustomScrollbar")&&($(a).mCustomScrollbar("update"),$(a).mCustomScrollbar("scrollTo","top")):($(".mCustomScrollbar").mCustomScrollbar("update"),$(".mCustomScrollbar").mCustomScrollbar("scrollTo","top"));b&&b();setTimeout(function(){$("body .goto-top").addClass("hide")},200)},destroyLayout:function(a){c.destroy(a)},template:function(a,
b){var c=f[a];return b?_.template(c,b):c},datepicker:function(a){e.init(a)},removeDatepicker:function(a){e.remove(a)},alert:function(a,b){bootbox.alert(a,b||function(){})},confirm:function(a,b){bootbox.confirm(a,function(a){b&&b(a)})},prompt:function(a,b){bootbox.prompt(a,function(a){b&&b(a)})},notify:function(a,b,c,e){void 0==e&&(e=!0);a={sticker:!1,shadow:!1,history:!1,hide:e,opacity:.95,animation:{effect_in:"slide",effect_out:"none"},text:a,title:b};switch(c){case "error":a.type="error";break;
case "info":a.type="info";break;case "success":a.type="success"}$.pnotify_remove_all();$.pnotify(a)},serialize:function(a){$form=$(a);var b="";$form.find("input[type!\x3d'radio'],textarea").each(function(){var a=$(this).attr("name"),c=$(this).val();a&&c&&(b+=a+"\x3d"+c.replace(/\r\n|\n/g,"")+"\x26")});$form.find("input[type\x3d'radio']").each(function(){var a=$(this).attr("name"),c=$(this).val();a&&c&&$(this).prop("checked")&&(b+=a+"\x3d"+c+"\x26")});return b=b.substring(0,b.length-1)},toSimpleJSONString:function(a){var b=
"";if(a){a=a.split("\x26");for(var c=0,e=a.length;c<e;c++){var f=a[c].split("\x3d");f[1]&&(b+='"'+f[0]+'":"'+f[1]+'",')}b&&(b=b.substring(0,b.length-1),b="{"+b+"}")}return b},initUrl:function(a,b){if(!a)return b;for(var c="",e=0;e<a.length;e++){var f=$.trim(a[e]);if(!(0<=c.indexOf(f))){if(0==f.indexOf("http")||0==f.indexOf("https")||0==f.indexOf("ftp"))for(var k=b.split(f),h="",p=0;p<k.length-1;p++)h+=k[p]+'\x3ca target\x3d"_blank" href\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e";else for(k=b.split(f),h="",p=
0;p<k.length-1;p++)h+=k[p]+'\x3ca target\x3d"_blank" href\x3d"http://'+f+'"\x3e'+f+"\x3c/a\x3e";b=h+k[k.length-1];c+=a[e]+"  "}}return b},initMessage:function(a){a=a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/\r\n|\n/g," \x3cbr/\x3e").replace(/ /g,"  ");var b=a.match(RegExp("(((ht|f)tp(s?))://)?(www.|([a-zA-Z]+[.]{1}))[a-zA-Z0-9-.]*(com|edu|gov|mil|net|org|biz|info|name|museum|us|ca|uk|cn)(/($|[a-zA-Z0-9:.;?'\\+\x26amp;%$#\x3d~_-])+)*","g"));return a=this.initUrl(b,a)},toJSONString:function(a){$form=
$(a);return this.toSimpleJSONString(this.serialize(a))},getList:function(a){var b="",c=this;$(a).each(function(){var a=c.toJSONString(this);a&&(b+=a+",")});b&&(b=b.substring(0,b.length-1));return"["+b+"]"},getMap:function(a){var b="",c=this;$(a).each(function(){var a=c.toJSONString(this);a&&(b+=a.substring(0,a.length-1).substring(1)+",")});b&&(b=b.substring(0,b.length-1));return"{"+b+"}"},getPrev:function(a){var b=0;a=$(a);a.each(function(a){$(this).hasClass("active")&&(b=a)});return 0==b?null:$(a[b-
1])},getNext:function(a){var b=0;a=$(a);a.each(function(a){$(this).hasClass("active")&&(b=a)});return b==a.length-1?null:$(a[b+1])},highLight:function(a,b){$(a+" li.active").removeClass("active");$(a+" #"+b).addClass("active");$(a+" #"+b).find(".title").focus()},rebuildSN:function(a){var b=$(a).children();a.data("index",b.length);for(a=0;a<b.length;a++)$(b[a]).find(".sn,.sn-link").html(a+1)},convert2Html:function(a){return a?a.replace(/\r\n|\n/g,"\x3cbr/\x3e").replace(/[ ]/g,"\x26nbsp;"):a},getDocTypeImgClass:function(a){return"image"===
a?"doctype-image":"office"===a?"doctype-office":"video"===a?"doctype-video":"audio"===a?"doctype-audio":"pdf"===a?"doctype-pdf":"text"===a?"doctype-txt":"html"===a?"doctype-html":"doctype-other"},bindIframeToJQScroll:function(a,b){var c=this.browser;a.get(0).onload=function(){var e=a.get(0).contentWindow.document,f=function(a){a=a||window.event;var e=Math.abs($("#"+b.children().attr("id")+"_container")[0].offsetTop),e=c&&c.ie?e-a.wheelDelta:e+a.detail/3*120;0<=e?b.mCustomScrollbar("scrollTo",{y:e,
x:Math.abs($("#"+b.children().attr("id")+"_container")[0].offsetLeft)+""}):b.mCustomScrollbar("scrollTo",{y:"0",x:Math.abs($("#"+b.children().attr("id")+"_container")[0].offsetLeft)+""});a.preventDefault&&a.preventDefault();return!1};c&&c.chrome||(c&&c.ie?e.addEventListener("mousewheel",f,!1):e.addEventListener("DOMMouseScroll",f,!1))}},gallery:function(a,c,e){a=a.split(",");for(var f=[],h=0;h<a.length;h++){f[h]=$.trim(a[h]);var k=$(f[h]);b(k,c,e)}},browser:function(){var a=navigator.userAgent.toLowerCase(),
b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:-1<a.indexOf(" applewebkit/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie;var e=0;if(c.ie){var e=a.match(/(?:msie\s([\w.]+))/),f=a.match(/(?:trident.*rv:([\w.]+))/),e=e&&f&&e[1]&&f[1]?Math.max(1*e[1],1*f[1]):e&&e[1]?1*e[1]:f&&f[1]?1*f[1]:0;c.ie11Compat=11==document.documentMode;c.ie9Compat=9==document.documentMode;c.ie8=
!!document.documentMode;c.ie8Compat=8==document.documentMode;c.ie7Compat=7==e&&!document.documentMode||7==document.documentMode;c.ie6Compat=7>e||c.quirks;c.ie9above=8<e;c.ie9below=9>e;c.ie11above=10<e;c.ie11below=11>e}c.gecko&&(f=a.match(/rv:([\d\.]+)/))&&(f=f[1].split("."),e=1E4*f[0]+100*(f[1]||0)+1*(f[2]||0));/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp.$1);/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp.$1||RegExp.$2));c.opera&&(e=parseFloat(b.version()));
c.webkit&&(e=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));c.version=e;c.isCompatible=!c.mobile&&(c.ie&&6<=e||c.gecko&&10801<=e||c.opera&&9.5<=e||c.air&&1<=e||c.webkit&&522<=e||!1);return c}(),getCurParaJson:function(){var a={},b=window.location.href;if(-1!=b.indexOf("?"))for(var b=b.split("?")[1].split("|"),c=0;c<b.length;c++)a[b[c].split("_")[0]]=unescape(b[c].split("_")[1]);return a},getWeekDate:function(a){a=a.clone().endOfISOWeek();return{year:a.getFullYear(),month:a.getMonth()+1,week:1+Math.floor(a.daysSince(a.clone().beginningOfYear())/
7)}},getWeeksOfYear:function(a){var b=0==a%4&&0!=a%100||0==a%400?366:365;a=new Date(a,11,31);7>a.getDay()&&(b-=a.getDay());return Math.ceil(b/7)}};m.exports=h});
define("teams/messages/messagesmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.mcType=this.id=this.ajax=null},unreadMessageByType:function(f,e){$.ajax({url:"/feed/getNewMessages.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},newBatchReaded:function(f,e){$.ajax({url:"/blog-message/markMessagesReadedOrUnreaded.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},newReaded:function(f,e){$.ajax({url:"/blog-message/markReadedPC.json",
type:"post",dataType:"json",data:{messageNewIds:f},success:function(c){e&&e(c)}})},allReaded:function(f,e){$.ajax({url:"/blog-message/markAllReadedPC.json",type:"post",dataType:"json",data:{mcType:f},success:function(c){e&&e(c)}})},unreadMessageCountByType:function(f,e){f.hasWechat=!0;$.ajax({url:"/blog-message/countUnreadMessageByType.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},getBlogMessagePage:function(f){var e={};e.pageNo=this.pageNo;e.isread=1==this.isread?1:0;e.messageType=
this.messageType;e.currentEmployeeId=this.currentEmployeeId;e.eteamsId=ETEAMSID;this.ajax&&this.ajax.abort();this.ajax=$.ajax({type:"post",url:TEAMS.service.mcManager+"/feed/getFeedMessagePagePC.json",dataType:"json",data:e,success:function(c){f&&f(c)}})},newUnreadMessageCount:function(f,e){$.ajax({url:TEAMS.service.mcManager+"/feed/mcCountPcBell.json",type:"get",dataType:"json",data:f,success:function(c){e&&e(c)}})},unreadHomeMessagePC:function(f,e){$.ajax({url:TEAMS.service.mcManager+"/feed/getHomeMessagePC.json",
type:"POST",dataType:"json",data:f,success:function(c){e&&e(c)}})},unreadMessageCount:function(f,e){f.hasWechat=!0;$.ajax({url:"/blog-message/countUnreadMessage.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},readedMessageCountByType:function(f,e){$.ajax({url:"/blog-message/countReadedMessageByType.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},readed:function(f,e){$.ajax({url:"/blog-message/markReaded.json",type:"post",dataType:"json",data:{readedIds:f},
success:function(c){e&&e(c)}})},markAllRead:function(f,e){f.hasWechat=!0;$.ajax({url:"/blog-message/markAllRead.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},followHandle:function(f,e,c){$.ajax({type:"post",dataType:"json",url:"/blog-message/followMark.json",data:{id:f,content:e},success:function(b){c&&c(b)}})},accept:function(f){$.ajax({type:"post",url:"/blog-message/accept.json",dataType:"json",data:{messageId:this.id,mcType:this.mcType,aptEid:this.aptEid,aptUid:this.aptUid,
optEid:this.optEid,entityId:this.targetId},success:function(e){f&&f(e)}})},refuse:function(f){$.ajax({type:"post",url:"/blog-message/refuse.json",dataType:"json",data:{messageId:this.id,mcType:this.mcType,aptEid:this.aptEid,aptUid:this.aptUid,optEid:this.optEid},success:function(e){f&&f(e)}})},unreadWechat:function(f){$.ajax({type:"get",dataType:"json",url:TEAMS.service.mcManager+"/chat/getUnreadChats.json",data:{ETEAMSID:ETEAMSID},success:function(e){f&&f(e)}})},checkUnreadNum:function(f,e,c){var b=
{};b.receiverId=f;b.mcType=e;$.ajax({type:"post",url:TEAMS.service.mcManager+"/feed/checkUnreadNum.json",dataType:"json",data:b,success:function(a){c&&c(a)}})}});m.exports=h});
define("teams/messages/messagesview","teams/utils teams/messages/messagesmodel teams/wechat/chatrightview teams/wechat/chatview teams/feed/eteamscounter teams/crm/CrmService".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/messages/messagesmodel");h("teams/wechat/chatrightview");h("teams/wechat/chatview");var c=h("teams/feed/eteamscounter"),b=h("teams/crm/CrmService");h=Backbone.View.extend({teams:{},type:"",initialize:function(a){this.readed=!1;this.isFirst=!0;this.pageNo=1;this.model=
new e;this.type=a.type;this.param=a.param;this.newMessage=a.newMessage;this.el=a.el||"#mainContainer";$(this.el).html(f.template("base.messages"));$(this.el).find(".e-title .j_"+this.type+"_title").removeClass("hide");$(this.el).find(".main-hd .j_"+this.type+"_title").removeClass("hide");$(this.el).find(".main-hd .j_messages_option").removeClass("hide");"wechat"==this.type?($(this.el).find(".fr").remove(),$(this.el).find(".message-center-switch .j_read").remove(),$(this.el).find(".message-center-switch .j_unread").addClass("active"),
$("body").find(".message-main").addClass("message-main-full"),$("body").find(".j_messages_option").remove()):$("body").find(".message-main").removeClass("message-main-full");if("applyJoin"==this.type||"shareJoin"==this.type||"follow"==this.type||"applyReceive"==this.type)$(this.el).find(".j_messages_option .j_read").text("\u5df2\u5904\u7406"),$(this.el).find(".j_messages_option .j_unread").text("\u5f85\u5904\u7406");this.crmService=new b},delegateEvents:function(){var a=this,b=this.model,c=$(this.el),
e=TEAMS.currentUser.id,h=a.type;c.on("click.btn-group",".j_page_read",function(c){var e="";$("#messages-unread-container div.j_message_read").each(function(){var b=$(this);if(b.find("#control-button").hasClass("hide")&&b.find(".status i").hasClass("icon-envelope-alt")){var c=b.attr("id");e+=","+c;a.changeReadStyle(b)}});e=e.substring(1);b.newReaded(e,function(a){f.notify("\u5f53\u9875\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")})});c.on("click.btn-group",".j_all_read",function(c){$("#messages-unread-container div.j_message_read").each(function(){var b=
$(this);b.find("#control-button").hasClass("hide")&&b.find(".status i").hasClass("icon-envelope-alt")&&(b.attr("id"),a.changeReadStyle(b))});c=a.changeTypeKey(a.type);b.allReaded(c,function(b){$(".aside-nav a.j_"+a.type+" span").html("").data("count","");$("#j_dropMessage .j_"+a.type+" span").html("");f.notify("\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")})});c.on("click.status",".j_message_read",function(c){var e=$(c.target).parents(".j_message_read");0<e.find(".icon-envelope").size()||!e.find("#control-button").hasClass("hide")||
(c=e.find(".status").parent().attr("id"),b.newReaded(c,function(b){a.changeReadStyle(e)}))});c.on("click.message-list",".common-more",function(b){a.pageNo++;$(".common-more").remove();a.renderMoreMessages(e,h,a.pageNo)});c.on("click.message-center-switch",".j_read",function(b){$(".j_read").hasClass("active")||($(".j_unread").removeClass("active"),$(".j_read").addClass("active"),$("#right-toolkit").addClass("hide"));a.pageNo=1;a.readed=!0;a.renderMessages(e,h)});c.on("click.message-center-switch",
".j_unread",function(b){$(".j_read").hasClass("active")&&($(".j_read").removeClass("active"),$(".j_unread").addClass("active"),$("#right-toolkit").removeClass("hide"));a.pageNo=1;a.readed=!1;a.renderMessages(e,h)});c.on("click.status",".icon-envelope-alt",function(c){if("wechat"!=a.type&&(c=$(c.target).parents(".message-item"),c.find("#control-button").hasClass("hide"))){var e=c.data("blogMessage").id;b.newReaded(e,function(a){$("#"+e+" .icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope").css("color",
"#999")})}});$("body").on("click.Messages",".goto-top",function(a){f.gotoTop(".j_messlistScr")});$("#mainContainer").on("click.Messages",".sub-nav li",function(a){$(".sub-nav li").removeClass("active");$(this).addClass("active")});c.on("click.Messages","#unread-more",function(b){a.clickUnreadMore(b)});c.on("click.Messages","#message-center .btn-success",function(b){b.stopPropagation();var c=$(b.currentTarget).parents(".message-box").attr("type");"follow"==c?a.clickAcceptApply(b):"applyJoin"==c?a.clickAcceptJoin(b):
"shareJoin"==c?a.clickAcceptShareJoin(b):"applyReceive"==c&&a.clickAcceptApplyReceive(b)});c.on("click.Messages","#message-center .btn-danger",function(b){b.stopPropagation();var c=$(b.currentTarget).parents(".message-box").attr("type");"follow"==c?a.clickRefuseApply(b):"applyJoin"==c?a.clickRefuseJoin(b):"shareJoin"==c?a.clickRefuseShareJoin(b):"applyReceive"==c&&a.clickRefuseApplyReceive(b)});c.on("click.Messages","#messages-unread-container .j_open_chatWindow",function(b){$(this).parents(".message-item").find(".icon-envelope-alt")&&
$(this).parents(".message-item").find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope");b=$(this).data("target-data");var c=$(this).data("chatType");a.newMessage.openChatWindow(b,c);b=$(".aside-nav a.j_wechat span").html();c=$(this).data("unreadNum");$(this).data("unreadNum",0);b-=c;$(".aside-nav a.j_wechat span").html(0==b?"":b)});c.on("click.Messages","#messages-unread-container #remind-more",function(b){b=TEAMS.currentUser.id;var c=$(this).parents("#messages-unread-container").data("nextPage");
$("#messages-read-container .message-box:last").find(".message-time").attr("timeSeconds");a.renderUnreadMessage(b,"remind",c)})},render:function(){$(this.el).find("#resultlist-loading").show();this.clickMessage();1==$("#message-center").size()&&f.layout(".j_messlistScr")},renderMessages:function(a,b,e){$(".messages-unread")&&($(".messages-unread").empty(),$(".messages-unread").off());var f=this;a=f.model;b=f.type;var h=f.readed,k=f.changeTypeKey(b),r=TEAMS.currentUser.id;a.isread=h;a.messageType=
k;a.currentEmployeeId=r;a.pageNo=null==f.pageNo?1:f.pageNo;"follow"!=b&&"applyJoin"!=b&&"shareJoin"!=b&&"applyReceive"!=b||$("#right-toolkit").addClass("hide");a.getBlogMessagePage(function(a){f.renderMessagesPage(a,e)});c.totaling()},renderMoreMessages:function(a,b,c){var e=this;a=e.model;b=e.type;var f=e.readed;b=e.changeTypeKey(b);var k=TEAMS.currentUser.id;a.isread=f;a.messageType=b;a.currentEmployeeId=k;a.pageNo=null==e.pageNo?1:e.pageNo;a.getBlogMessagePage(function(a){e.renderMessagesPage(a,
c)})},changeTypeKey:function(a){var b="";switch(a){case "remind":b="6";break;case "follow":b="1";break;case "applyJoin":b="2";break;case "shareJoin":b="13";break;case "applyReceive":b="14"}return b},getModuleName:function(a){var b="";switch(a){case "task":b=" \u3010\u4efb\u52a1\u3011 ";break;case "document":b=" \u3010\u6587\u6863\u3011 ";break;case "customer":b=" \u3010\u5ba2\u6237\u3011 ";break;case "workflow":b=" \u3010\u5ba1\u6279\u3011 ";break;case "mainline":b=" \u3010\u9879\u76ee\u3011 ";break;
case "user":b=" \u3010\u7528\u6237\u3011 ";break;case "tag":b=" \u3010\u6807\u7b7e\u3011 ";break;case "share":b=" \u3010\u5206\u4eab\u3011 ";break;case "workreport":b=" \u3010\u62a5\u544a\u3011 ";break;case "formdatareport":b=" \u3010\u6570\u636e\u4e0a\u62a5\u3011";break;case "calendar":b=" \u3010\u65e5\u7a0b\u3011 ";break;case "user":b=" \u3010\u7528\u6237\u3011 ";break;case "saleChance":b=" \u3010\u5546\u673a\u3011 "}return b},renderUnreadMessage:function(a,b,c){var e=this,f={},k=null;$(e.el+" #messages-unread-container #remind-more").remove();
f.employeeId=a;f.messageType=b;f.pageSize=50;f.pageNo=null==c?1:c;f.readed=this.readed;switch(e.type){case "remind":k="UnreadRemind";break;case "follow":k="WatchApplication";break;case "applyJoin":k="JoinApplication";break;case "shareJoin":k="ShareApplication";break;case "applyReceive":k="ReceiveApplication"}f.websocketMessageType=k;f.moduleType="all";this.model.unreadMessageByType(f,function(a){e.renderMessagesPage(a,c)})},renderMessagesPage:function(a,b){var c=this.type,e=a.data,f=e.result;if(1==
this.isFirst&&0==this.readed&&0>=f.length)this.isFirst=!1,$(this.el).find(".j_read").trigger("click");else{$(this.el).find("#resultlist-loading").hide();0==f.length?$(".j_no-result").removeClass("hide"):$(".j_no-result").addClass("hide");for(var k=0;k<f.length;k++){var h=f[k];if($("#feedsContainer .sub-nav .active").attr("mcType")!=h.type)return;var p=$("#feedsContainer .j_messages_option .active").attr("id");if(!("j_read"==p&&1==h.read||"j_unread"==p&&0==h.read))return;p=$("#messageBoxClone").clone().removeClass("hide");
p.attr("id",h.id);p.data("blogMessage",h);this.readed||p.find(".status").removeClass("hide");this.readed&&p.find(".status i").attr("class","icon-envelope");"remind"==c?this.renderRemindOne(h,p):"applyJoin"==c?this.renderJoinApplicationOne(h,p):"shareJoin"==c&&h.target?this.renderShareApplicationOne(h,p):"applyReceive"==c&&h.target?this.renderReceiveApplicationOne(h,p):"follow"==c&&this.renderFollowApplicationOne(h,p);$("#messages-unread-container").append(p)}e.hasNext&&($("#messages-unread-container").append('\x3cdiv class\x3d"common-more"\x3e\u66f4\u591a \x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e\x3c/div\x3e'),
$("#messages-unread-container").data("nextPage",e.nextPage))}},renderRemindOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),f=a.target,k=a.message;b.find(".user").text(c.username);b.find(".usercard-toggle").attr("userId",c.id);b.find(".user").data("employee",c);c.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):c.id&&"10000"==c.id?(b.find(".avatar").removeClass("hide").attr("src","images/service.png"),
b.find(".avatar").css("cursor","auto"),b.find(".user").attr("style","text-decoration:none; cursor:auto;")):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png");var c="",h=b.find(".event");null!=f?(c=this.getModuleName(f.module),"workreport"==f.module?f.commentContent&&0<=f.commentContent.indexOf("\u62a5\u544a")&&h.find("span.text").prepend("\u63d0\u9192\uff1a\u62a5\u544a"):"calendar"==f.module?(f.commentContent&&0<=f.commentContent.indexOf("\u5df2\u8c03\u6574")?(h.find("span.text").prepend("\u63d0\u9192\uff1a"),
h.find("span a").removeClass("hide").text(f.name),h.find("span.text").append("\u65e5\u7a0b\u5df2\u8c03\u6574")):(h.find("span.text").prepend("\u63d0\u9192\uff1a"+c),h.find("span a").removeClass("hide").text(f.name)),h.find("span a").attr({"data-id":f.id,"data-module":"agenda"})):(h.find("span.text").prepend("\u63d0\u9192\uff1a"+c),h.find("span a").removeClass("hide").text(f.name),h.find("span a").attr({"data-id":f.id,"data-module":f.module})),b.find(".content").attr("title",f.name)):k&&0<=k.indexOf("\u4efb\u52a1\u5ef6\u671f")?
h.find("span.text").prepend("\u63d0\u9192\uff1a\u4efb\u52a1\u5ef6\u671f"):k&&0<=k.indexOf("\u62a5\u544a")?h.find("span.text").prepend("\u63d0\u9192\uff1a\u62a5\u544a"):k&&0<=k.indexOf("\u52a0\u5165\u672c\u56e2\u961f")&&h.find("span.text").prepend("\u63d0\u9192\uff1a\u65b0\u540c\u4e8b\u52a0\u5165");b.find(".content").prepend(k);b.find(".date").html(e)},renderFollowApplicationOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");b.find(".message-box").attr("type",
"follow");b.find(".user").text(c.username);b.find(".usercard-toggle").attr("userId",c.id);b.find(".user").data("employee",c);b.find(".date").html(e);c.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png");c=b.find(".event");a.operation.userId&&a.operation.userId!=a.receiver.id?c.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761\u5173\u6ce8\u7533\u8bf7\u53cd\u9988"):c.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761\u5173\u6ce8\u7533\u8bf7");
if("agree"==a.operation.result||"refuse"==a.operation.result){var f=a.message.split("\uff1a")[1];b.find(".content").prepend(f?f:a.message)}else"undo"==a.operation.result?(this.readed||b.find("#control-button").removeClass("hide"),b.find(".content").addClass("hide")):b.find(".content").prepend(f)},renderShareApplicationOne:function(a,b){var c=a.sender,e=a.receiver,f=a.operation,k=null;null!=f&&(k=f.operator);var h=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),p=a.target,s=this.getModuleName(p.module);
b.find(".message-box").attr("type","shareJoin");b.find(".user").text(c.username);b.find(".usercard-toggle").attr("userId",c.id);b.find(".user").data("employee",c);b.find(".date").html(h);c.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png");c=b.find(".event");k&&k.id!=e.id?c.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+s+"\u7684\u5171\u4eab\u7533\u8bf7\u53cd\u9988"):
c.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+s+"\u7684\u5171\u4eab\u7533\u8bf7");"calendar"==p.module&&(p.module="agenda");!f||"agree"!=f.result&&"refuse"!=f.result?("undo"==f.result?this.readed||b.find("#control-button").removeClass("hide"):b.find(".message-box").attr("type","shareJoin"),b.find(".content a").removeClass("hide").text(p.name),b.find(".content a").attr({"data-id":p.id,"data-module":p.module})):(c.find("span a").removeClass("hide").text(p.name),c.find("span a").attr({"data-id":p.id,
"data-module":p.module}),e=a.message.split("\uff1a")[1],b.find(".content").prepend(e?e:a.message));"agenda"==p.module&&(p.module="calendar")},renderReceiveApplicationOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),f=a.target;b.find(".message-box").attr("type","applyReceive");b.find(".user").text(c.username);b.find(".usercard-toggle").attr("userId",c.id);b.find(".user").data("employee",c);b.find(".date").html(e);c.avatar?b.find(".avatar").removeClass("hide").attr("src",
"/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png");c="";switch(f.module){case "task":c=" \u3010\u4efb\u52a1\u3011 ";break;case "document":c=" \u3010\u6587\u6863\u3011 ";break;case "customer":c=" \u3010\u5ba2\u6237\u3011 ";break;case "workflow":c=" \u3010\u5ba1\u6279\u3011 ";break;case "mainline":c=" \u3010\u9879\u76ee\u3011 ";break;case "user":c=" \u3010\u7528\u6237\u3011 ";break;case "saleChance":c=" \u3010\u5546\u673a\u3011 "}e=b.find(".event");
a.operation.userId&&a.operation.userId!=a.receiver.id?e.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+c+"\u7684\u9886\u53d6\u7533\u8bf7\u53cd\u9988"):e.find("span.text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+c+"\u7684\u9886\u53d6\u7533\u8bf7");"agree"==a.operation.result||"refuse"==a.operation.result?(e.find("span a").removeClass("hide").text(f.name),e.find("span a").attr({"data-id":f.id,"data-module":f.module}),f=a.message.split("\uff1a")[1],b.find(".content").prepend(f?
f:a.message)):("undo"==a.operation.result?this.readed||b.find("#control-button").removeClass("hide"):b.find(".message-box").attr("type","applyReceive"),b.find(".content a").removeClass("hide").text(f.name),b.find(".content a").attr({"data-id":f.id,"data-module":f.module}))},renderJoinApplicationOne:function(a,b){var c=a.sender,e=a.operation,f=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");b.find(".date").html(f);b.find(".message-box").attr("type","applyJoin");"agree"==e.result||
"refuse"==e.result?(e=a.operation.operator,e.id&&e.id!=a.receiver.id?b.find(".user").text(e.username):b.find(".user").text("\u60a8"),b.find(".usercard-toggle").attr("userId",e.id),b.find(".user").data("employee",e),e.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+e.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png"),"agree"==a.operation.result?b.find(".event span.text").prepend("\u63a5\u53d7\u4e86\u201c"+c.username+"\u201d\u7684\u52a0\u5165\u7533\u8bf7"):
b.find(".event span.text").prepend("\u62d2\u7edd\u4e86\u201c"+c.username+"\u201d\u7684\u52a0\u5165\u7533\u8bf7")):"undo"==e.result?(b.find(".user").text(c.username),b.find(".usercard-toggle").attr("userId",c.id),b.find(".user").data("employee",c),c.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png"),this.readed||b.find("#control-button").removeClass("hide"),b.find(".event span.text").prepend("\u7533\u8bf7\u52a0\u5165\u201c"+
TEAMS.currentTenant.tenantName+"\u201d")):"cancel"==e.result?(b.find(".user").text(c.username),b.find(".user").data("employee",c),c.avatar?b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png"),b.find(".event span.text").prepend("\u53d6\u6d88\u4e86\u52a0\u5165\u7533\u8bf7")):(b.find(".user").text(c.username),b.find(".usercard-toggle").attr("userId",c.id),b.find(".user").data("employee",c),c.avatar?
b.find(".avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".avatar").removeClass("hide").attr("src","images/avatar.png"));b.find(".content").prepend(a.message)},clickRead:function(a){var b=this,e=$(a.currentTarget).parents(".message-item").data("blogMessage").id;b.model.newReaded(e,function(a){$("#"+e+" .icon-envelope-alt").removeClass("icon-envelope-alt");c.markMessageRead(b.type)})},clickUnreadMore:function(){var a=TEAMS.currentUser.id,b=$("#messages-read-container .message-box:last").find(".message-time").html();
type=$("#unread-more").attr("type");this.renderReadedMessage(a,type,b)},clickMessage:function(){var a=TEAMS.currentUser.id,b=this.type;"wechat"==b?($("#mark-as-read").removeClass("hide"),this.renderUnreadWechat()):($("#unread-more").attr("type",b),this.renderMessages(a,b))},renderUnreadMessageCount:function(a,b){var c={};c.employeeId=a;c.messageType=b;this.model.unreadMessageCount(c,function(a){$(".j_menu-group-sub").find("span.count").html("");for(var b=0;b<a.messageCounts.length;b++){var c=a.messageCounts[b];
0==c.count?"":c.count;"remind"==c.messageType?$("#feedsContainer li.j_remind span").html(c.count):"follow"==c.messageType?$("#feedsContainer li.j_follow span").html(c.count):"applyJoin"==c.messageType?$("#feedsContainer li.j_applyJoin span").html(c.count):"shareJoin"==c.messageType?$("#feedsContainer li.j_shareJoin span").html(c.count):"applyReceive"==c.messageType&&$("#feedsContainer li.j_applyReceive span").html(c.count)}a.wechatCount&&$("#feedsContainer li.j_wechat span").html(0==a.wechatCount?
"":a.wechatCount)})},renderUnreadWechat:function(){var a=this;a.model.unreadWechat(function(b){$(a.el).find("#resultlist-loading").hide();$("#messages-unread-container").empty();b.data&&0!=b.data.length?($(".j_no-result").addClass("hide"),a.newloadunreadWechatMessage(b)):$(".j_no-result").removeClass("hide")})},loadUnreadMessage:function(a,b){$(".messages-read").removeClass("hide");(null==b||1>=b)&&$("#messages-unread-container").find(".message-box").remove();$("#messages-unread-container").find(".message-none").addClass("hide");
if(a.chats||a.channelChats){(this.unreadWechatCount=a.chats.length+a.channelChats.length)&&0<this.unreadWechatCount&&$("#messages-nav li.message-wechat").find("span").html("("+this.unreadWechatCount+")");if(0==a.blogMessages.length&&0==a.chats.length&&0==a.channelChats.length){$("#messages-unread-container").find(".message-none").removeClass("hide");return}this.newloadunreadWechatMessage(a)}else if(0==a.blogMessages.length){$("#messages-unread-container").find(".message-none").removeClass("hide");
return}for(var c=0;c<a.blogMessages.length;c++){var e=a.blogMessages[c],f=e.id,k="",h="";e.sender&&(k=e.sender.username,h=e.sender.id);var p=e.refId,s=Date.create(e.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),u=e.formatedMessage,w=e.messageType,v=e.formatedTargetName,x=e.targetName,y=e.operatorType;x||(x="");var m=e.module,A=$("#messageBoxClone").find(".message-box").clone(),B="";switch(m){case "task":B="[\u4efb\u52a1]";break;case "document":B="[\u6587\u6863]";break;case "customer":B="[\u5ba2\u6237]";
break;case "workflow":B="[\u5ba1\u6279]";break;case "mainline":B="[\u9879\u76ee]";break;case "user":B="[\u7528\u6237]";break;case "saleChance":B=" \u3010\u5546\u673a\u3011 "}"comment"==w?A.attr("href","/messages/comment/"+p):"follow"==w?void 0==p&&A.find(".message-btns").removeClass("hide"):"privateMessage"==w?A.attr("href","/messages/privateMessage/"+p):"remind"==w?m&&(v+=B,v=null==m?"\u65b0\u540c\u4e8b\u52a0\u5165":v+(" \x3ca class\x3d'router j_entityslider-toggle' data-id\x3d'"+p+"' data-module\x3d'"+
m+"'\x3e"+(30<x.length?x.substring(0,30)+"...":x)+"\x3c/a\x3e")):"applyJoin"==w?(u=$.parseJSON(u),x="\x3cdiv class\x3d'line'\x3e\x3cspan  class\x3d'contact'\x3e"+u.username+"\x3c/span\x3e  "+s+"  \u7533\u8bf7\u52a0\u5165 \u4f60\u5728eteams.cn\u4e0a\u6ce8\u518c\u7684    \x3cspan class\x3d'tenantName1'\x3e"+TEAMS.currentTenant.tenantName+"\x3c/span\x3e   \u7533\u8bf7\u4fe1\u606f\u5982\u4e0b\uff1a\x3c/div\x3e\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u59d3\u540d\uff1a\x3c/span\x3e\x3cspan  class\x3d'contact'\x3e"+
u.username+"\x3c/span\x3e\x3c/div\x3e",u.mobile&&(x+="\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u624b\u673a\uff1a\x3c/span\x3e\x3cspan  class\x3d'mobile'\x3e"+u.mobile+"\x3c/span\x3e\x3c/div\x3e"),u.email&&(x+="\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u90ae\u7bb1\uff1a\x3c/span\x3e\x3cspan  class\x3d'email'\x3e"+u.email+"\x3c/span\x3e\x3c/div\x3e"),u=x,A.find(".message-btns").removeClass("hide")):"shareJoin"==w?p&&(m&&(v+=B),"accept"!=y&&A.find(".message-btns").removeClass("hide")):"applyReceive"==w&&
p&&(m&&(v+=B),"accept"!=y&&A.find(".message-btns").removeClass("hide"));A.attr("id",f);A.attr("refId",p);A.attr("type",w);A.find(".message-name").html(v);f="";"applyJoin"==w||"follow"==w?f="plus-sign":"remind"==w&&(f="info-sign");A.find(".message-type i").attr("class","icon-"+f);A.find(".message-user a").attr("userid",h).html(k);A.find(".message-time").html(s);"applyJoin"==w&&A.find(".message-time").addClass("hide");A.find(".message-content").html(u);A.data("blogMessage",e);$("#messages-unread-container").append(A)}},
newloadunreadWechatMessage:function(a){a=a.data;for(var b=0;b<a.length;b++){var c=a[b],e=$("#wechat-clone").clone();if(20==c.type){var f=c.sender;f.name=f.username;null!=f.avatar&&null!=f.avatar.p3&&e.find(".avatar").removeClass("hide").attr("src","/base/download/"+f.avatar.p3);e.find(".avatar").attr("userid",f.id);e.find(".user").html(f.username);e.find(".user").attr("userid",f.id);e.find(".event").html("\x3cspan class\x3d\"text\"\x3e\u53d1\u7ed9\u60a8\u7684\u5fae\u4fe1\x3ca class\x3d'j_open_chatWindow'\x3e\u6709"+
c.number+"\u6761\u672a\u8bfb\u6d88\u606f\x3c/span\x3e");e.find(".j_open_chatWindow").data("unreadNum",c.number);e.find(".date").html(Date.create(c.lastTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));e.attr("id",f.id);e.find(".j_open_chatWindow").data("target-data",f);e.find(".j_open_chatWindow").data("chatType","employee");e.removeClass("hide");$("#messages-unread-container").append(e)}else 21==c.type&&(f={},f.id=c.channelId,f.name=c.name,e.find(".avatar").removeClass("hide").attr("src","images/group.png"),
e.find(".user").html(c.name),e.find(".content").html(" \u53d1\u7ed9\u60a8\u7684\u5fae\u4fe1\x3ca class\x3d'j_open_chatWindow'\x3e\u6709"+c.number+"\u6761\u672a\u8bfb\u6d88\u606f"),e.find(".j_open_chatWindow").data("unreadNum",c.number),e.find(".date").html(Date.create(c.lastTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")),e.attr("id",c.channelId),e.find(".j_open_chatWindow").data("target-data",f),e.find(".j_open_chatWindow").data("chatType","channel"),e.removeClass("hide"),$("#messages-unread-container").append(e))}},
loadReadedMessage:function(a){for(var b=0;b<a.blogMessages.length;b++){var c=a.blogMessages[b],e=c.id,f="",k="";c.sender&&(f=c.sender.username,k=c.sender.id);var h=Date.create(c.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),p=c.formatedMessage,s=c.messageType,u=c.refId,w=c.formatedTargetName,v=c.targetName;v||(v="");var x=c.module,y=$("#messageBoxClone").find(".message-box").clone(),m="";switch(x){case "task":m="[\u4efb\u52a1]";break;case "document":m="[\u6587\u6863]";break;case "customer":m=
"[\u5ba2\u6237]";break;case "workflow":m="[\u5ba1\u6279]";break;case "mainline":m="[\u9879\u76ee]";break;case "user":m="[\u7528\u6237]";break;case "saleChance":m=" \u3010\u5546\u673a\u3011 "}"follow"!=s&&"privateMessage"!=s&&("remind"==s||"shareJoin"==s||"applyReceive"==s?x&&(w+=m,"user"!=x&&(w+=" \x3ca class\x3d'router j_entityslider-toggle' data-id\x3d'"+u+"' data-module\x3d'"+x+"'\x3e"+(30<v.length?v.substring(0,30)+"...":v)+"\x3c/a\x3e")):"applyJoin"==s&&c.sender&&(v="\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u59d3\u540d\uff1a\x3c/span\x3e\x3cspan  class\x3d'contact'\x3e\x3ca class\x3d'router' href\x3d'/home/"+
c.sender.id+"'\x3e"+c.sender.username+"\x3c/a\x3e\x3c/span\x3e\x3c/div\x3e",c.sender.mobile&&(v+="\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u624b\u673a\uff1a\x3c/span\x3e\x3cspan  class\x3d'mobile'\x3e"+c.sender.mobile+"\x3c/span\x3e\x3c/div\x3e"),c.sender.email&&(v+="\x3cdiv class\x3d'line'\x3e\x3cspan\x3e\u90ae\u7bb1\uff1a\x3c/span\x3e\x3cspan  class\x3d'email'\x3e"+c.sender.email+"\x3c/span\x3e\x3c/div\x3e"),p="\x3cdiv\x3e\x3cspan\x3e"+p+" \u7533\u8bf7\u4fe1\u606f\u5982\u4e0b\uff1a\x3c/span\x3e\x3c/div\x3e"+
v));y.attr("id",e);y.attr("refId",u);y.attr("type",s);y.find(".message-name").html(w);e="";"applyJoin"==s||"follow"==s?e="plus-sign":"remind"==s&&(e="info-sign");y.find(".message-type i").attr("class","icon-"+e);y.find(".message-status i").attr("class","icon-envelope");y.find(".message-user a").attr("userid",k).html(f);y.find(".message-time").html(h);"applyJoin"==s&&(y.find(".message-time").addClass("hide"),y.find(".message-user").addClass("hide"));y.find(".message-content").html(p);y.find(".message-content .line:last").addClass("hide");
y.data("blogMessage",c);$("#messages-read-container").append(y)}0<a.count-20?($("#unread-more").removeClass("hide"),$("#remained-count").html(a.count-20)):$("#unread-more").addClass("hide")},messageHandle:function(a,b,e,f){if(a&&b){a=e.find("a.user").text();f="accept"==f?"\u63a5\u53d7\u4e86":"\u62d2\u7edd\u4e86";e.find("#control-button").addClass("hide");e.find(".status i").attr("class","icon-envelope");e.find(".content").removeClass("hide");switch(b){case "shareApply":e.find(".content").html("\u60a8"+
f+a+"\u7684\u5171\u4eab\u7533\u8bf7");break;case "applyReceive":b="\u60a8"+f+a+"\u7684\u9886\u53d6\u7533\u8bf7";(f=e.data("processMessage"))&&(b+=f);e.find(".content").html(b);break;case "followApply":e.find(".content").html("\u60a8"+f+a+"\u7684\u5173\u6ce8\u7533\u8bf7");break;case "ApplyJoin":e.find(".content").html("\u60a8"+f+a+"\u7684\u52a0\u5165\u7533\u8bf7");break;default:e.find(".content").html(f+a)}c.markMessageRead(this.type)}},followHandle:function(a,b,c,e){a&&b&&(c.find(".message-btns").addClass("hide"),
c.find(".message-content").html(blogMessage.message),c.find(".message-status i").attr("class","icon-envelope"))},changeReadStyle:function(a){a.find("#control-button").hasClass("hide")&&(a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope"),c.markMessageRead(this.type))},applyJoinHandle:function(a,b,c,e){if(a&&b)switch(a=c.find("a.user").text(),e="accept"==e?"\u63a5\u53d7\u4e86":"\u62d2\u7edd\u4e86",c.find(".message-btns").addClass("hide"),c.find(".message-status i").attr("class",
"icon-envelope"),c.find(".content").removeClass("hide"),b){case "shareApply":c.find(".content").html("\u60a8"+e+a+"\u7684\u5171\u4eab\u7533\u8bf7");break;default:c.find(".content").html(e+a)}},clickAcceptApply:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.accept(function(a){b.messageHandle(k,"followApply",h,"accept");
f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseApply:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.refuse(function(a){b.messageHandle(k,"followApply",h,"refuse");f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7")})},clickAcceptJoin:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");
a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.accept(function(a){b.messageHandle(k,"ApplyJoin",h,"accept");f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseJoin:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.refuse(function(a){b.messageHandle(k,
"ApplyJoin",h,"refuse");f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7")})},clickAcceptShareJoin:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.accept(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(k,"shareApply",h,"accept"),f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7"))})},clickRefuseShareJoin:function(a){var b=
this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.refuse(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(k,"shareApply",h,"refuse"),f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7"))})},clickAcceptApplyReceive:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");
var k=a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.targetId=a.target.id;c.accept(function(a){h.data("processMessage",a.message);b.messageHandle(k,"applyReceive",h,"accept");a.message?f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7"+a.message):f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseApplyReceive:function(a){var b=this,c=b.model,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=
a.id;c.id=k;c.mcType=b.changeTypeKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.refuse(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(k,"applyReceive",h,"refuse"),f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7"))})},undelegateEvents:function(){$(this.el).off(".Messages");$("body").off(".Messages");$("#mainContainer").off(".Messages")},remove:function(){this.undelegateEvents()}});m.exports=h});
define("teams/portal/portalview","teams/face/emojiarea teams/utils teams/portal/portalmodel teams/task/taskmodel teams/blog/blogmodel teams/component/userselector teams/component/sharemodel teams/component/watchmodel teams/mainline/mainlinenew teams/doc/documentnewview teams/base/entityboxbase teams/component/entitybox teams/base/dynamicinfoview teams/base/introview teams/views/calendarview teams/views/calendarweekview teams/portal/dyncpublishview teams/calendar/agendainfo teams/base/preview teams/models/leftmodel teams/component/commentmodel teams/feed/eteamscounter teams/models/portalsettingmodel teams/crm/CrmService".split(" "),function(h,
q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/portal/portalmodel"),b=h("teams/task/taskmodel"),a=h("teams/blog/blogmodel"),d=h("teams/component/userselector"),g=h("teams/component/sharemodel"),l=h("teams/component/watchmodel"),n=h("teams/mainline/mainlinenew"),k=h("teams/doc/documentnewview"),r=h("teams/base/entityboxbase"),p=h("teams/component/entitybox"),s=h("teams/base/dynamicinfoview"),u=h("teams/base/introview");h("teams/views/calendarview");var w=h("teams/views/calendarweekview"),
v=h("teams/portal/dyncpublishview");h("teams/calendar/agendainfo");var x=h("teams/base/preview"),y=h("teams/models/leftmodel"),z=h("teams/component/commentmodel"),A=h("teams/feed/eteamscounter"),B=h("teams/models/portalsettingmodel"),E=h("teams/crm/CrmService");h=Backbone.View.extend({initialize:function(d){f($);this.el="#mainContainer";this.userId=d.userId;this.model=new c;this.leftModel=new y;this.taskmodel=new b({id:""});this.watchModel=new l;this.shareModel=new g({entityId:"",module:""});this.blogmodel=
new a(d);this.portalsettingmodel=new B(d);this.commentModel=new z({});this.pageNo=1;this.hasNextPage=!0;this.addPraiseNum=this.isLoaded=!1;this.filter=this._getFilter("portal.workdyna")||{workType:"all",range:"company"};$(this.el).html(e.template("home.portal",{userId:this.userId}));$("body").attr("id","portal").addClass("portal");this.crmService=new E},delegateEvents:function(){var a=this,b=$(this.el);$("body").off("click.portal",".goto-top").on("click.portal",".goto-top",function(a){e.gotoTop("#portal-container")});
b.on("click.portal",".j_portal-col-nav li",function(b){$(this).parent().find("a").removeClass("active");$(this).find("a").addClass("active");var c=$(this).find("a").attr("data-type"),d=$(this).find("a").attr("data-module");$(this).parent().removeClass("active");$(this).parents(".j_portal-col");b="#"+d+"-list";"subordinates"==c?($("#"+d+"-list").addClass("hide"),$("#sub-"+d+"-list").removeClass("hide"),b="#sub-"+d+"-list"):($("#"+d+"-list").removeClass("hide"),0>=$("#"+d+"-list").find(".entitybox-toggle").size()&&
$("#"+d+"-list").find(".no-result").removeClass("hide"),$("#sub-"+d+"-list").addClass("hide"));$(this).find("a.active").data("reload")||($(this).find("a.active").data("reload",!0),"blog"==d||"mainline"==d?$(b).find("dl").remove():$(b).find("li").remove(),"task"==d?($(b+" .notask").addClass("hide"),$(b+" #today-"+d+"-loading").removeClass("hide"),$(b+" #sub-today-"+d+"-loading").removeClass("hide"),$(b+" #tomorrow-"+d+"-loading").removeClass("hide")):($(b+" #sub-"+d+"-loading").removeClass("hide"),
$(b+" #"+d+"-loading").removeClass("hide")),"customer"==d?a.crmService.findCustomersForTypes(a.usreId,c,1,5,function(b){var d={};d.result=b.data;a.renderCustomer(d,c,!1)}):a.model.moduleSearch(a.userId,c,d,null,function(b){switch(d){case "task":a.renderTask(b.taskPage,c,!1);break;case "document":a.renderDocument(b.documentPage,c,!1);break;case "customer":a.renderCustomer(b.customerPage,c,!1);break;case "workflow":a.renderWorkflow(b.requestPage,c,!1);break;case "mainline":a.renderMainline(b.mainlinePage,
c,!1);break;case "blog":"subordinates"==c?a.renderSubWork(b.resultsPage,!1):a.renderBlog(b.blogListPage,c,!1)}}))});b.off("click.portal",".j_title_item").on("click.portal",".j_title_item",function(a){a=$(this).attr("data-href");ROUTER.navigate(a,{trigger:!0})});b.off("click.portal","#task-today-more").on("click.portal","#task-today-more",function(a){$("#today-task-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).parent().addClass("hide")});b.off("click.portal",
"#task-tomorrow-more").on("click.portal","#task-tomorrow-more",function(a){$("#tomorrow-task-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).parent().addClass("hide")});b.off("click.portal","#workflow-more-button").on("click.portal","#workflow-more-button",function(a){$("#workflow-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.off("click.portal","#mainline-more-button").on("click.portal","#mainline-more-button",
function(a){$("#mainline-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.off("click.portal","#document-more-button").on("click.portal","#document-more-button",function(a){$("#document-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.on("keyup",".suggestion-input input",function(b){a.renderDepartment($(this).val())});b.on("click.portal","li.j_task-item, li.j_portal_item,dl.j_mainline_item",
function(a){$(this).removeClass("unread");$(this).removeClass("newComment")});b.on("mouseenter.portal",".j_ownergroupLi",function(){$(this).children(".owner-sub").css({display:"block",opacity:0}).animate({left:"100%",opacity:1},200)});b.on("mouseleave.portal",".j_ownergroupLi",function(){$(this).children(".owner-sub").animate({opacity:0},200,function(){$(this).css({display:"none",left:"90%"})})});b.on("click.portal",".j_btn-refresh",function(a){a=$(this).parents(".j_portal-col-head").find("li").find("a.active");
a.data("reload",!1);a.parents("li").trigger("click")});b.on("click.portal",".j_btn-remove",function(b){b={};var c=$(this).parents(".j_portal-col");b.id=c.attr("data-id");b.isshow="0";a.portalsettingmodel.updatePortalSetting(b,function(b){c.addClass("hide");0==$(a.el).find(".portal-col:visible").length&&$(a.el).find(".portalsetting-notice").show()})});b.on("click.portal",".shortcut .watch,.j_shortcut .watch",function(b,c){b.stopPropagation();var d={},g=$(this);d.module=g.attr("module");d.id=g.attr("targetId");
"true"==g.attr("watched")?(d._method="DELETE",a.watchModel.watchOne(d,function(a){e.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");g.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');g.attr("watched","false")})):(d._method="PUT",a.watchModel.watchOne(d,function(a){e.notify("\u5173\u6ce8\u6210\u529f");g.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');g.attr("watched","true")}))});b.on("click.portal",".shortcut .finish",function(b,c){b.stopPropagation();if($(this).attr("targetId")&&
$(this).attr("status")){var d=$(this),g="finished"==d.attr("status")?"todo":"finished",f=d.attr("targetId");a.model.updateStatus(g,f,function(b){b.actionMsg&&b.actionMsg.message?e.notify(b.actionMsg.message):(e.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(g,d.parents("li")))})}else e.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});b.on("click.portal",".j_shortcut .finish",function(b,c){b.stopPropagation();var d=$(this);if(d.attr("targetId")&&d.attr("status")){var g=d.attr("targetId"),
f="",f="close"==d.attr("status")?"open":"close",k={};k["mainline.status"]=f;k._method="put";k.id=g;k.propertyName="status";a.model.updateMainlineStatus(k,g,function(b){b.actionMsg&&b.actionMsg.message?e.notify(b.actionMsg.message):(e.notify("\u9879\u76ee\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderMainlineStatus(f,d.parents("#"+g)))})}else e.notify("\u6ca1\u6709\u5173\u95ed\u6743\u9650")});b.off("confirmHandler",".shortcut .share,.j_shortcut .share").on("confirmHandler",".shortcut .share,.j_shortcut .share",
function(b,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];a.sids="";for(var g=0;g<d.length;g++)a.sids+=d[g].id+",";d=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=d;a.shareModel._module=$(this).attr("module");a.shareModel.saveAll(function(a){a.addUserMessage?e.notify(a.addUserMessage):e.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});b.on("click.portal",".shortcut .share,.j_shortcut .share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?
(new d({$target:$(this)})).open():e.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});b.on("mouseenter.portal",".j_portal-blog-item",function(b){if(0!=$(this).find(".new").size()){var c=$(this);a.blogmodel.readOne($(this).attr("id"),"unread",function(b){c.find(".new").remove();b=parseInt($("#commentMine-unread").data("count"));b=isNaN(b)?0:b;var d=parseInt($("#replayMine-unread").data("count")),d=isNaN(d)?0:d,e=parseInt($("#unreadBlog").data("count")),e=isNaN(e)?0:e,g=b+d+e;"commentme"==a.layout?(b--,
g--,b=0>b?0:b,0>=b?($("#commentMine-unread").addClass("hide"),$("#commentMine-unread").html("").data("count","")):$("#commentMine-unread").html(b).data("count",b)):"replayme"==a.layout?(d--,g--,d=0>d?0:d,0>=d?($("#replayMine-unread").addClass("hide"),$("#replayMine-unread").html("").data("count","")):$("#replayMine-unread").html(d).data("count",d)):(e--,g--,0>=e?($("#unreadBlog").addClass("hide"),$("#unreadBlog").html("").data("count","")):$("#unreadBlog").html(e).data("count",e));$("#header #top #j_dropMessage .j_unreadblog span").html(0>=
g?"":g);A.totaling()})}});b.on("click.portal",".blogs-more",function(b){var c=$(this);b=c.data("blogDate");var d=c.data("createTime"),e=c.data("pageNo")?c.data("pageNo"):2,g={};g.date=b?b:"";g.createTime=d?d:"";g.pageNo=e;var f=$(this).parents(".j_portal-col").find("a.active").attr("data-type");a.model.moduleSearch(a.userId,f,"blog",g,function(b){"subordinates"==f?a.renderSubWork(b.resultsPage):a.renderBlog(b.blogListPage,f);e++;c.data(e)})});b.on("click.portal",".j_portal-goal-add",function(b){a.mainlinenew=
new n({parentEl:a.el,userId:a.userId,target:$(this),callback:function(b){$("#mainline-list").prepend(a.renderOneMainline(b));a.mainlinenew.hide();$("#mainline-list").removeClass("hide");$("#mainline-list .no-result").addClass("hide");$("#j_portal-goal-add").addClass("hide")}});a.mainlinenew.render()});b.on("click.portal","#blog-create",function(a){(new r({entityModule:"blog",entityId:"new",target:$(this),callbacks:{afterOpen:function(){$("#blog-textarea").focus()}}})).render()});b.on("click.portal",
"#task-create",function(b){(new p({entityModule:"task",entityId:"today",target:$(this),page:a,callbacks:{afterCreate:function(b){b.permission=31;a.renderOneTask($("#task-clone").clone().attr("id",b.id),b);a.rebuildSN($("#"+b.dateGroup+"-task-list"))},afterOpen:function(){$("#task-title").focus()}}})).render()});b.on("click.portal",".notask",function(a){a=$(this).parent();$(this).addClass("hide");var b=$("#task-create-clone").clone().removeAttr("id");b.find("input").attr("data-group",$(this).attr("data-group"));
a.prepend(b);b.find("input").focus()});b.on("blur.portal",".j_task-list input",function(b){var c=$(this);if((b=c.val())&&0<$.trim(b).length){var d={content:""};d.name=b;a.taskmodel.create(d,c.attr("data-group"),function(b){e.notify("\u5b89\u6392\u4efb\u52a1\u6210\u529f");d=b.task;c.parents("li").remove();d.permission=31;a.renderOneTask($("#task-clone").clone().attr("id",d.id),d);a.rebuildSN($("#"+d.dateGroup+"-task-list"))})}});b.on("keyup.portal",".j_task-list input",function(a){var b=$(this);13==
(a?a:window.event?window.event:null).keyCode&&b&&0<$.trim(b).length&&b.trigger("blur")});b.on("click.portal","#customer-create",function(a){(new p({entityModule:"customer",entityId:"new",target:$(this),callbacks:{afterOpen:function(){$("#customer-name").focus()}}})).render()});b.on("click.portal","#workflow-create",function(a){(new p({entityModule:"workflow",entityId:"new",target:$(this),callback:function(a){}})).render()});b.on("click.portal","#document-create",function(b){a.documentnewview=new k({userId:a.userId,
callback:function(a){}});a.documentnewview.render()});$("ul.j_task-list").sortable({opacity:.9,handle:"span.sne",revert:!0,connectWith:".j_task-list",placeholder:"task-placeholder",cancel:".readonly",update:function(b,c){var d=$(this).attr("group");a.rebuildSN($("#"+d+"-task-list"));c.item.data("update",!0)},start:function(a,b){},receive:function(a,b){b.item.data("receive",!0);var c=$(this).attr("group");b.item.data("group",c)},stop:function(b,c){var d=c.item.attr("id");if(c.item.data("update")){c.item.data("update",
!1);var e=a.generateSN(c.item);if(c.item.data("receive")){c.item.data("receive",!1);var g=c.item.data("group");a.changeGroup(d,g,e)}else a.changeGroup(d,null,e)}}}).disableSelection();b.on("remove.portal",".j_e-list li",function(b){b=$(this).parent();$(this).remove();a.rebuildSN(b)});b.on("remove.portal",".j_e-list dl",function(a){a=$(this).parent();$(this).remove();0==a.children("dl").length?a.find("#j_portal-goal-add").removeClass("hide"):a.find("#j_portal-goal-add").addClass("hide")});b.off("click.portal",
".j_agenda-entity").on("click.portal",".j_agenda-entity",function(b){b=$(this).attr("data-id");var c=$(this).data("permission"),d=a.userId||TEAMS.currentUser.id,e=31==c?new r({entityModule:"agenda",entityId:b,userId:a.userId,callbacks:{afterOpen:function(){$("#entitybox-container #title").focus()},afterOperate:function(){e.close();1==$("#portal-container #calendar-list").size()&&$("#portal-container #calendar-list").trigger("refresh")}}}):new r({entityModule:"agenda",entityId:b,userId:d,callbacks:{afterOperate:function(){e.close();
1==$("#portal-container #calendar-list").size()&&$("#portal-container #calendar-list").trigger("refresh")}}});e.render()});b.on("refresh.portal","#calendar-list",function(b){$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");b=a.calendarView.selectedDate();a.model.moduleSearch(a.userId,"","calendar",{date:b,countSearch:!0},function(b){a.renderCalendar(b,b.type,!0)})});b.on("click.portal","#calendar-create",function(b){b=a.calendarView.selectedDate();
a.createCalendar(b)});b.off("click.portal",".j_focusEl").on("click.portal",".j_focusEl",function(){$(this).addClass("active").find(".i-post-input textarea").trigger("focus",!0).end().find(".i-post-handle").slideDown(200)});b.off("click.portal",".j_dynamic-owner\x3eul.owner-group\x3eli").on("click.portal",".j_dynamic-owner\x3eul.owner-group\x3eli",function(){var b=$(this).data("range");$(this).hasClass("active")&&"otherDepartment"!=b||!a.isLoaded||(a.isLoaded=!1,a.pageNo=1,a.hasNextPage=!0,$(this).parents(".j_dynamic-owner").find("ul.owner-group\x3eli").removeClass("active"),
$(this).addClass("active"),a.filter.range=b,a.filter.departmentId=$(this).data("departmentId"),"company"==b||"department"==b?$(".myShare").removeClass("hide"):TEAMS.currentUser.department.id==a.filter.departmentId?$(".myShare").removeClass("hide"):$(".myShare").addClass("hide"),a.renderWorkDynas())});b.off("click.portal","#departmentDiv").on("click.portal","#departmentDiv",function(a){a.stopPropagation()});b.off("click.portal",".suggestion-list li").on("click.portal",".suggestion-list li",function(){$(this).parents(".suggestion-list").find("li").removeClass("selected");
$(this).addClass("selected");var a=$(this).attr("value"),c=$(this).attr("title");$("#otherDepartment").children("a").html(c);$("#otherDepartment").data("departmentId",a);b.find("#otherDepartment").trigger("click")});b.off("click.portal",".j_dynamicTab li.j_dynaType").on("click.portal",".j_dynamicTab li.j_dynaType",function(){if(a.isLoaded){a.pageNo=1;a.hasNextPage=!0;var b=$(".j_dynamic-owner\x3eul.owner-group\x3eli.active").data("range"),c=$(".j_dynamic-owner\x3eul.owner-group\x3eli.active").data("departmentId");
"company"==b||"department"==b?$(".myShare").removeClass("hide"):TEAMS.currentUser.department.id==c?$(".myShare").removeClass("hide"):$(".myShare").addClass("hide");$(this).addClass("active").siblings().removeClass("active").find(".arr").remove();0<$(this).find("ul").size()?(b=$(this).find("ul").clone(),$(".j_dynamicSubTab").removeClass("hide").html(b),$(this).children("a").append('\x3ci class\x3d"arr"\x3e\x3c/i\x3e'),$(".j_dynamicSubTab li:first").trigger("click")):(a.isLoaded=!1,$(this).find(".arr").remove(),
$(".j_dynamicSubTab").addClass("hide").empty(),a.filter.workType=$(this).data("filterType"),a.renderWorkDynas())}});b.off("click.portal",".j_dynamicSubTab li").on("click.portal",".j_dynamicSubTab li",function(){a.isLoaded&&(a.isLoaded=!1,a.pageNo=1,a.hasNextPage=!0,$(this).addClass("active").siblings().removeClass("active"),a.filter.workType=$(this).data("filterType"),a.renderWorkDynas())});b.on("click.portal",".j_dyna-card-list .a-feedback",function(){var b=$(this),c=b.parents(".j_dyna-card");b.parents(".j_opt").find(".j_a-like").hasClass("selected")&&
(c.find(".j_more-wrapper").slideUp(),b.parents(".j_opt").find(".j_a-like").removeClass("selected"));b.hasClass("selected")?(b.removeClass("selected"),c.find(".card-feed").slideUp()):(b.addClass("selected"),b.data("loaded")?c.find(".card-feed").slideDown(function(){$(this).find(".feed-post textarea").focus()}):(c.find(".card-feed").show(),b.find(".feed-post textarea").focus(),a.loadComment(c,function(){b.data("loaded",!0);c.find(".j_feed-list").slideDown()})),0==c.find(".dynamic-feed-emoji").length&&
c.find(".form-control").emojiarea({buttonClass:"dynamic-feed-emoji",emojiHeight:-230,emojiLeft:-70,buttonRoot:'div[data-target-id\x3d"'+c.attr("data-target-id")+'"]',buttonChild:".j_feedBtn"}))});b.off("click.portal",".j_dyna-card-list .j_item-feedback").on("click.portal",".j_dyna-card-list .j_item-feedback",function(){var a=$(this).parents(".j_dyna-feed-item").find(".feed-post"),b=a.is(":hidden");$(this).parents(".j_feed-list").find(".feed-post").hide();b&&(a.show().find("textarea").focus(),0==a.show().find(".dynamic-comment-emoji").length&&
a.show().find("textarea").emojiarea({buttonClass:"dynamic-comment-emoji",emojiHeight:-230,emojiLeft:-70,buttonRoot:'li[data-comment-id\x3d"'+$(this).parents(".j_dyna-feed-item").attr("data-comment-id")+'"]',buttonChild:".j_feedBtn"}))});b.off("click.portal",".j_dyna-card-list .j_like .j_praise").on("click.portal",".j_dyna-card-list .j_like .j_praise",function(){if(!a.addPraiseNum){a.addPraiseNum=!0;var b=$(this),c=b.parents(".j_dyna-card").data("target-id"),d=b.parents(".j_dyna-card").data("module"),
e=parseInt(b.find("em").html())||0,g={};g.entityId=c;g.userId=a.userId;g.module=d;a.model.praise({praise:g},function(c){c.hasPraise?(b.find("em").html(0==e?0:e-1),b.attr("title","\u70b9\u8d5e")):(b.find("em").html(e+1),b.attr("title","\u53d6\u6d88\u70b9\u8d5e"));a.addPraiseNum=!1;var d=b.parents(".j_a-like");d.find(".j_like-avatars").children(".j_li_praise").remove();3<b.find("em").text()?0==d.find("#j_more-avatars").length&&d.find(".j_like-avatars").append($('\x3cli id\x3d"j_more-avatars" title\x3d"\u66f4\u591a"\x3e\x3ca class\x3d"more"\x3e\x3ci class\x3d"icon-ellipsis"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e')):
d.find(".j_like-avatars").empty();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=3;a.renderPraiseImg(d,c,function(a){a&&(d.find(".j_like-avatars").prepend($(a.html)),0==a.count&&d.find(".like-pop").css({display:"none",opacity:0}))})})}});b.on("click.portal",".j_dyna-card\x3e.card-feed\x3e.feed-post .send",function(){var b=$(this),c=b.parents(".j_dyna-card").data("targetId"),d=b.parents(".j_dyna-card").data("module"),e=b.parents(".j_dyna-card").data("refId");b.parents(".j_dyna-card").data("type");
var g=b.parent().siblings(".j_feedInput").find("textarea").val(),g={"comment.targetId":e,"comment.module":d,"comment.content":g};g["comment.targetId"]="blog"==d||"share"==d?c:e;b.parent().siblings(".j_feedInput").find("textarea").val("").trigger("autosize.resize");a.commentModel.save(function(c){if(c.comment){c=a.renderOneComment(c.comment);var d=b.parents(".j_dyna-card").find(".j_opt .a-feedback em");d.text(parseInt(d.html())+1);b.parents(".feed-post").siblings(".j_feed-list").prepend(c);c.find(".j_feedInput textarea").autosize()}},
g)});b.on("click.portal",".j_dyna-card\x3e.card-feed\x3e.j_feed-list .send",function(){var b=$(this),c=b.parents(".j_dyna-card").data("targetId"),d=b.parents(".j_dyna-card").data("refId"),e=b.parents(".j_dyna-card").data("module"),g=b.parents(".j_dyna-feed-item").data("commentId"),f=b.parent().siblings(".j_feedInput").find("textarea").val();b.parent().siblings(".j_feedInput").find("textarea").val("").trigger("autosize.resize");g={"comment.module":e,"comment.content":f,"comment.parent.id":g};g["comment.targetId"]=
"blog"==e||"share"==e?c:d;a.commentModel.save(function(c){if(c.comment){var d=a.renderOneComment(c.comment);c=b.parents(".j_dyna-card").find(".j_opt .a-feedback em");c.text(parseInt(c.html())+1);b.parents(".feed-post").slideUp(function(){b.parents(".j_feed-list").prepend(d);d.find(".j_feedInput textarea").autosize()})}},g)});b.on("click.portal",".j_dyna-card .card-feed .j_more",function(){a.loadComment($(this).parents(".j_dyna-card"))});b.off("click.portal","#new-check-in").on("click.portal","#new-check-in",
function(b){a.checkIn?e.alert("\u4eca\u5929\u4f60\u5df2\u7b7e\u5230\uff01"):a.leftModel.checkin(function(b){if(b=b.check)a.checkTime(),e.alert("\u7b7e\u5230\u6210\u529f\uff01\u60a8\u7684\u7b7e\u5230\u65f6\u95f4\u4e3a\uff1a"+b)})});b.off("click.portal","#new-check-out").on("click.portal","#new-check-out",function(b){a.leftModel.checkout(function(a){e.alert("\u7b7e\u9000\u6210\u529f\uff01\u60a8\u7684\u7b7e\u9000\u65f6\u95f4\u4e3a\uff1a"+a.check)})});b.on("mouseenter.portal",".j_a-like",function(){var c=
$(this).find(".like-pop");c.find(".j_like-avatars").empty();var d={};d.entityId=$(this).parents(".j_dyna-card").data("target-id");3<$(this).find("em").text()&&$(this).find(".j_like-avatars").append($('\x3cli id\x3d"j_more-avatars" title\x3d"\u66f4\u591a"\x3e\x3ca class\x3d"more"\x3e\x3ci class\x3d"icon-ellipsis"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e'));d.pageSize=3;a.renderPraiseImg(c,d,function(a){a&&(a.isMoreShow||b.find("#j_more-avatars").addClass("hide"),0!=(a.count||0)&&(c.find(".j_like-avatars").prepend($(a.html)),
c.css({display:"block",opacity:0}).stop().animate({opacity:1})))})}).on("mouseleave.portal",".j_a-like",function(){var a=$(this).find(".like-pop"),b=$(this),c=setTimeout(function(){b.find(".like-pop").stop().animate({opacity:0}).css({display:"none",opacity:0})},300);a.data("showTimer",c)});b.on("mouseenter.portal",".j_like-pop",function(a){a.stopPropagation();(a=$(this).data("showTimer"))&&clearTimeout(a)}).on("mouseleave.portal",".j_like-pop",function(a){a.stopPropagation();$(this).removeData("showTimer");
$(this).animate({opacity:0},function(){$(this).css({display:"none"})})});b.on("click.portal","#j_more-avatars",function(b){b=$(this);b.parents(".j_opt").find(".j_feedback").hasClass("selected")&&(b.parents(".j_dyna-card").find(".card-feed").slideUp(),b.parents(".j_opt").find(".j_feedback").removeClass("selected"));if(b.parents(".j_like").hasClass("selected"))b.parents(".j_like").removeClass("selected"),b.parents(".card-detail").siblings(".j_more-wrapper").find(".j_li_praise").remove(),b.parents(".card-detail").siblings(".j_more-wrapper").slideUp();
else{var c=b.parents(".j_like").find("em").text();if(b.siblings().length>=c)e.notify("\u70b9\u8d5e\u6570\u5c11\u4e8e4\u4e2a");else{b.parents(".j_like").addClass("selected");var d=b.parents(".card-detail").siblings(".j_more-wrapper"),g=d.find(".j_like-wrapper");g.children(".j_li_praise").remove();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=40;a.renderPraiseImg(b,c,function(b){b&&(g.prepend($(b.html)),40>=(b.count||0)?d.find(".j_like-pager").addClass("hide"):(d.find(".j_like-pager").removeClass("hide"),
d.find(".j_like-pager .j_li_page").remove(),d.find(".j_like-pager .j_last_page").after($(a.renderPraisePages(b)))))});d.slideDown()}}});b.on("click.portal",".j_li_page",function(b){b=$(this);b.addClass("active");b.siblings().removeClass("active");a.renderLastNextPage(b);var c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=40;c.pageNo=b.find("a").text();a.renderMorePraise(b,c)});b.on("click.portal",".j_change_page",function(b){b=$(this);if(!b.hasClass("disabled")){var c=b.siblings(".active");
c.removeClass("active");var d;b.hasClass("j_last_page")?d=c.prev():b.hasClass("j_next_page")&&(d=c.next());a.renderLastNextPage(d);d.addClass("active");d=d.find("a").text();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=40;c.pageNo=d;a.renderMorePraise(b,c)}});b.on("search.portal","#search-keywords",function(b){a.filter.keywords=$.trim($(this).val());a.renderWorkDynas()});b.on("keyup.portal","#search-keywords",function(a){13==a.which&&$(this).trigger("search")});b.on("click.portal",
"li.search .icon-search",function(a){$(this).siblings("input").trigger("search")});b.on("datepicker.portal","#dyna-datepicker",function(b,c){$(this).parents(".j_dropDownMenu").slideUp(100);a.filter.endDate=c.format("{yyyy}-{MM}-{dd}");a.renderWorkDynas()});e.datepicker({el:"#dyna-datepicker",callback:function(a){a=a.date;Date.create(a).is("today")||Date.create(a).isBefore("today")?$("#dyna-datepicker").trigger("datepicker",a):e.notify("\u8bf7\u67e5\u8be2\u5f53\u65e5\u548c\u5f53\u65e5\u4e4b\u524d\u7684\u65e5\u671f!")}});
$("#dyna-datepicker").trigger("focusin.datePicker")},renderLastNextPage:function(a){var b=a.prev(),c=a.next();a.find("a").text();b.hasClass("j_last_page")?(b.addClass("disabled"),a.siblings(".j_next_page").removeClass("disabled")):a.siblings(".j_last_page").removeClass("disabled");c.hasClass("j_next_page")?(a.siblings(".j_last_page").removeClass("disabled"),c.addClass("disabled")):a.siblings(".j_next_page").removeClass("disabled")},renderMorePraise:function(a,b){var c=a.parents(".j_more-wrapper").find(".j_like-wrapper");
c.children(".j_li_praise").remove();this.renderPraiseImg(a,b,function(a){a&&c.prepend($(a.html))})},changeGroup:function(a,b,c){var d=this,g="",g=Date.create(TEAMS.nowTime);switch(b){case "today":g=g.format("{yyyy}-{MM}-{dd}");break;case "tomorrow":g=g.addDays(1).format("{yyyy}-{MM}-{dd}");break;default:g=g.format("{yyyy}-{MM}-{dd}")}var f=[];b&&(f.push({name:"dueDate",value:g}),$("#"+b+"-task-list").find(".notask").addClass("hide"));c&&f.push({name:"sn",value:c});d.taskmodel.id=a;d.taskmodel.changeProperties(f,
function(){e.notify("\u4efb\u52a1\u62d6\u653e\u6210\u529f");d.changeDuedate(d.taskmodel.task)})},generateSN:function(a){var b=a.prev("li.j_task-item").attr("sn");a=a.next("li.j_task-item").attr("sn");if(b&&a)return Math.round((1*b+1*a)/2);if(a)return 1*a+1E3;if(b)return 1*b-1E3},render:function(){var a=this,b={firstSearch:!1};this.renderLeftMenu();this.checkTime();$(".j_postsize").autosize();this.renderFilterByConfig();this.renderWorkDynas();this.portalsettingmodel.loadPortals(this.userId,function(c){a.renderPortal(a.el,
c);$(".j_portal-sortable").sortable({handle:".j_portal-col-head",revert:!0,connectWith:".j_portal-sortable",items:".j_portal-col",forcePlaceholderSize:!0,placeholder:"portal-sortable-placeholder",update:function(b,c){var d={},e=c.sender;e||(e=c.item.parents(".j_portal-sortable"));d.sectionId=e.attr("data-id");d.showOrder=e.sortable("toArray",{attribute:"data-id"}).join(",");a.portalsettingmodel.savePortalOrder(d,function(a){})}});$(a.el).find("#other-blog").attr("href","/blog/"+(a.userId?a.userId:
TEAMS.currentUser.id)+"/people");e.layout("#portal-container",{whileScrolling:function(){TEAMS.ownCache["portal.mcsTop"]=this.mcs.top},onTotalScrollOffset:800,onTotalScroll:function(){a.isLoaded&&a.hasNextPage&&(a.isLoaded=!1,a.renderWorkDynas(a.pageNo+1))}});a.dyncpublishView=new v({container:"#j_dynamic-post",userId:this.userId,postcallback:function(b){if(b&&a._isShowCard(b)){b.read=!0;var c=$(a.el).find(".j_dyna-card-list .j_dyna-card");if(c)for(var d=0,e=c.length;d<e;d++)if($(c[d]).data("target-id")==
b.id){$(c[d]).remove();break}b=a.renderOneWorkDynas(b);$(a.el).find(".j_dyna-card-list").prepend(b)}}});a.dyncpublishView.render();$(a.el).on("click.portal",function(a){a=$(a.target);0==a.closest(".blog-post").length&&$(this).find(".blog-post").removeClass("active").find(".blog-post-handle").slideUp(200);null==a.closest(".dyncpublish-tab a").get(0)&&0==a.closest(".i-post").length&&$(this).find(".i-post").removeClass("active").find(".i-post-handle").slideUp(200)});$(a.el).on("click.portal",".j_iboxSlide",
function(){$(this).data("open")?($(this).removeClass("off").data("open",!1),$(this).parents(".i-box-head").next(".i-box-content").slideDown(300)):($(this).addClass("off").data("open",!0),$(this).parents(".i-box-head").next(".i-box-content").slideUp(300))});a.calendarView=new w({el:"#calendar-datatime",parent:a,seletedClass:!0});a.calendarView.render();c={"filter.keywords":""};c.userId=a.userId;a.model.renderCount(c,function(b){a.renderCount(b)});a.model.moduleSearch(a.userId,"mine","task",b,function(b){a.renderTask(b.taskPage,
b.type,!0)});a.model.moduleSearch(a.userId,"update","document",b,function(b){a.renderDocument(b.documentPage,b.type,!0)});a.crmService.findCustomersForTypes(a.usreId,"update",1,5,function(b){var c={};c.result=b.data;a.renderCustomer(c,b.type,!0)});a.model.moduleSearch(a.userId,"mine","workflow",b,function(b){a.renderWorkflow(b.requestPage,b.type,!0)});a.model.moduleSearch(a.userId,"mine","mainline",b,function(b){a.renderMainline(b.mainlinePage,b.type,!0)});a.model.moduleSearch(a.userId,"","blog",
b,function(b){b.blogListPage&&0>=b.blogListPage.totalCount&&0<b.count?$(".blog-tab .subordinates").parent().trigger("click"):a.renderBlog(b.blogListPage,b.type,!0)});a.model.moduleSearch(a.userId,"","calendar",{countSearch:!0},function(b){a.renderCalendar(b,b.type,!0)});(new s({container:"#placard-comtainer"})).render();0==$(a.el).find(".portal-col:visible").length&&$(a.el).find(".portalsetting-notice").show();1==TEAMS.noSubordinates&&($(".task-tab").last().addClass("hide"),$(".mainline-tab").last().addClass("hide"),
$(".workflow-tab").last().addClass("hide"),$(".customer-tab").last().addClass("hide"),$(".document-tab").last().addClass("hide"))});a.renderDepartment();e.layout(".suggestion-list");var c=TEAMS.currentUser.loginCount;c&&"0"!=c?TEAMS.currentUser.admin&&!TEAMS.currentTenant.dateUpdated&&$("#module_notice").removeClass("hide").find("span").html('\u60a8\u7684\u56e2\u961f\u4fe1\u606f\u8fd8\u672a\u5b8c\u5584\uff0c\u70b9\u51fb\x3ca class\x3d"router" href\x3d"/info"\x3e\u8fdb\u5165\u5b8c\u5584\u4fe1\u606f\x3c/a\x3e\u9875\u9762'):
((new u({})).render(),TEAMS.currentUser.loginCount=1);setInterval(function(){var b=Date.create(),c=b.format("{yyyy}/{MM}/{dd}"),b=b.format("{HH}:{mm}:{ss}");$(a.el+" #j_timeYear").html(c);$(a.el+" #j_timeHour").html(b)},1E3)},_isShowCard:function(a){if("company"==this.filter.range||"department"==this.filter.range)if("share"==a.type&&("all"==this.filter.workType||"share"==this.filter.workType||"mine"==this.filter.workType)||"all"==this.filter.workType||"workAll"==this.filter.workType||"blog"==a.type&&
"blog"==this.filter.workType||"task"==a.module&&"task"==this.filter.workType||"workflow"==a.module&&"workflow"==this.filter.workType||"document"==a.module&&"document"==this.filter.workType||"customer"==a.module&&"customer"==this.filter.workType)return!0;return!1},renderCount:function(a){var b=a.unfinishCount.allCount||0,c=a.watchedCount.allCount||0;a=a.privacyCount||0;var d=0;0!=b?($(this.el+" #j_unfinish .count").html(b),d++):$(this.el+" #j_unfinish").addClass("hide");0!=c?($(this.el+" #j_watched .count").html(c),
d++):$(this.el+" #j_watched").addClass("hide");0!=a?($(this.el+" #j_privacy .count").html(a),d++):$(this.el+" #j_privacy").addClass("hide");$(this.el+" .j_tag_div").addClass("titleNum_"+d);0==d&&$(this.el+" .j_tag_div").addClass("hide")},renderDepartment:function(a){var b=this,c={};a&&(c.departmentName=a);b.model.departmentSearch(c,function(a){if(a&&a.departmentList){var c=$(b.el).find(".suggestion-list ul");a=a.departmentList;c.html("");for(var d=0;d<a.length;d++){var e=a[d];c.append('\x3cli style\x3d"list-style:none;" title\x3d"'+
e.name+'" value\x3d"'+e.id+'"\x3e\x3ca\x3e\x3cdiv class\x3d"avatar hide"\x3e\x3cimg src\x3d"images/demo-v3/avatar_demo.png"/\x3e\x3c/div\x3e'+e.name+"\x3c/a\x3e\x3c/li\x3e")}}})},renderLeftMenu:function(){var a=$(this.el),$superiors=a.find(".j_dynamic-owner .j_superiors");this.leftModel.myfollowPage.pageNo=1;this.leftModel.loadMyfollow(function(b){b&&b.user&&(b.user.superior&&(a.find(".j_dynamic-owner .j_superiors").removeClass("hide"),a.find(".j_dynamic-owner .j_level.hide").removeClass("hide")),
b.page&&b.page.totalCount&&a.find(".j_dynamic-owner .j_watched").removeClass("hide"))});this.leftModel.loadSubordinate(function(b){b&&b.user&&b.page&&b.page.totalCount&&(a.find(".j_dynamic-owner .j_directSubordinates").removeClass("hide"),a.find(".j_dynamic-owner .j_subordinates").removeClass("hide"),a.find(".j_dynamic-owner .j_level.hide").removeClass("hide"))})},checkTime:function(){var a=this;this.leftModel.checkTime(function(b){a.checkIn=b.checkIn;a.checkIn?$(".j_check_inOrOut").attr("id","new-check-out").html("\u7b7e\u9000"):
$(".j_check_inOrOut").attr("id","new-check-in").html("\u7b7e\u5230")})},switchTab:function(a,b){$("."+b+"-tab a").removeClass("active");$("."+b+"-tab a."+a).addClass("active").data("reload",!0);var c="#"+b+"-list";"subordinates"==a?($("#"+b+"-list").addClass("hide"),$("#sub-"+b+"-list").removeClass("hide"),c="#sub-"+b+"-list"):($("#"+b+"-list").removeClass("hide"),$("#sub-"+b+"-list").addClass("hide"));"task"==b?($(c+" .notask").addClass("hide"),$(c+" #today-"+b+"-loading").removeClass("hide"),$(c+
" #sub-today-"+b+"-loading").removeClass("hide"),$(c+" #tomorrow-"+b+"-loading").removeClass("hide")):($(c+" #sub-"+b+"-loading").removeClass("hide"),$(c+" #"+b+"-loading").removeClass("hide"))},renderTask:function(a,b,c){c&&this.switchTab(b,"task");$(".task-tab a.active").data("reload",!0);b&&"subordinates"==b?$("#sub-today-task-list li").remove():($("#today-task-list li").remove(),$("#tomorrow-task-list li").remove());if(a&&a.result&&0<a.result.length){for(var d=c=0,e=0,g=0;g<a.result.length;g++){var f=
a.result[g],k=$("#task-clone").clone().attr("id",f.id);"today"==f.dateGroup?(c++,"subordinates"==b&&e++,k.find(".sn-link").html(c)):(d++,k.find(".sn-link").html(d));this.renderOneTask(k,f,b)}0==c&&(b&&"subordinates"==b?$("#sub-today-task-list .no-result").removeClass("hide"):$("#today-task-list .notask").removeClass("hide"));0==d&&(b&&"mine"!=b||$("#tomorrow-task-list .notask").removeClass("hide"))}else b&&"subordinates"==b?$("#sub-today-task-list .no-result").removeClass("hide"):($("#today-task-list .notask").removeClass("hide"),
$("#tomorrow-task-list .notask").removeClass("hide"));$("#today-task-loading").addClass("hide");$("#sub-today-task-loading").addClass("hide");$("#tomorrow-task-loading").addClass("hide")},renderDocument:function(a,b,c){c&&this.switchTab(b,"document");$(".document-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#document-list"),"subordinates"==b&&(c=$("#sub-document-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#document-clone").clone().removeAttr("id"),
a.result[b],"document"));else"subordinates"==b?$("#sub-document-list .no-result").removeClass("hide"):$("#document-list .no-result").removeClass("hide");$("#document-loading").addClass("hide");$("#sub-document-loading").addClass("hide")},renderCustomer:function(a,b,c){c&&this.switchTab(b,"customer");$(".customer-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#customer-list"),"subordinates"==b&&(c=$("#sub-customer-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#customer-clone").clone().removeAttr("id"),
a.result[b],"customer"));else"subordinates"==b?$("#sub-customer-list .no-result").removeClass("hide"):$("#customer-list .no-result").removeClass("hide");$("#customer-loading").addClass("hide");$("#sub-customer-loading").addClass("hide")},renderWorkflow:function(a,b,c){c&&this.switchTab(b,"workflow");$(".workflow-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#workflow-list"),"subordinates"==b&&(c=$("#sub-workflow-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#workflow-clone").clone().removeAttr("id"),
a.result[b],"workflow"));else"subordinates"==b?$("#sub-workflow-list .no-result").removeClass("hide"):$("#workflow-list .no-result").removeClass("hide");$("#workflow-loading").addClass("hide");$("#sub-workflow-loading").addClass("hide")},renderMainline:function(a,b,c){c&&this.switchTab(b,"mainline");$(".mainline-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#mainline-list"),$("#j_portal-goal-add").addClass("hide"),"subordinates"==b?(c=$("#sub-mainline-list"),$("#sub-mainline-list .no-result").addClass("hide")):
($("#mainline-list li").remove(),$("#mainline-list .no-result").addClass("hide")),b=0;b<=a.result.length-1&&!(5<=b);b++){var d=this.renderOneMainline(a.result[b]);c.prepend(d)}else b&&"mine"!=b?$("#sub-mainline-list").find(".no-result").removeClass("hide"):($("#sub-mainline-list").find(".no-result").removeClass("hide"),$("#mainline-list").find(".no-result").removeClass("hide"));$("#mainline-loading").addClass("hide");$("#sub-mainline-loading").addClass("hide")},renderBlog:function(a,b,c){$(".blog-tab a.active").data("reload",
!0);10==a.result.length?$(".blogs-more").removeClass("hide"):$(".blogs-more").addClass("hide");if(a&&a.result&&0<a.result.length){for(b=0;b<a.result.length;b++){c=a.result[b];var d=$("#blog-clone").clone().removeAttr("id");d.attr("id",c.blog.id);d.find(".new").removeClass("hide");d.find(".j_blog-detail").addClass("hide");c.user.avatar&&d.find("img").attr("src","/base/download/"+c.user.avatar.p4);if(c.blog){var g=c.blog.client;g&&"pc"!=g&&c.blog.address&&""!=c.blog.address&&(d.find(".j_blog-coord").removeClass("hide"),
d.find(".blog-client").removeClass("hide").html("\u6765\u81ea "+c.blog.client+"\u5ba2\u6237\u7aef"),d.find(".blog-coord").removeClass("hide"),d.find(".blog-address").html(c.blog.address))}c.blog.content&&d.find(".j_blog-body").html(e.initMessage(c.blog.content));d.find(".user").html(c.user.username).attr("userId",c.user.id);var g=Date.create(c.blog.createTime).format("{yyyy}-{MM}-{dd}"),f=Date.create(c.blog.blogTime).format("{yyyy}-{MM}-{dd}"),k="",k=g==f?"\u53d1\u5e03\u4e8e\uff1a":"\u8865\u4ea4\u4e8e\uff1a";
d.find(".create-time").html(k+Date.create(c.blog.createTime).format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));d.find(".time").html(f);this.renderAttachments(c.blog,d.find(".js_blogallfiles"));$("#blog-list").append(d)}b=Date.create(a.result[a.result.length-1].date);g=Date.create(a.result[a.result.length-1].blog.createTime);$(".blogs-more").data("blogDate",b.format("{yyyy}-{MM}-{dd}")).data("createTime",g.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))}else 1==a.pageNo&&$("#blog-list .no-result").removeClass("hide");
$("#blog-loading").addClass("hide")},renderAttachments:function(a,b){if(a){for(var c=a.attachments||[],d=a.imageFiles||[],g=0;g<c.length;g++){var f=c[g];b.children(".js_blogfiles").prepend(e.template("base.attachment",f));b.find("#"+f.id).children().addClass("remoteDownload").data("dlid",f.id);(new x({container:b,afterJqObj:b.find("#"+f.id).children(),fileObj:f})).render()}for(g=0;g<d.length;g++)if((c=d[g])&&c.big&&c.image&&c.small){var f=c.id,k=c.bigUrl,l=c.imageUrl,h=c.smallUrl,n=[];n.push(k);n.push(l);
n.push(h);var p=$("#blog-atta-image-clone").clone(!0);p.find("span").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+k+"' data-artZoom-source\x3d'/base/download/"+l+"' src\x3d'/base/download/"+h+"'\x3e");p.append("\x3cp\x3e"+c.name+" \x3ca data-url\x3d/base/upload/"+f+".json\x3e\u5220\u9664  \x3c/a\x3e\x3c/p\x3e");p.find("a").data({idArray:n,imageId:l});p.find(".artZoom").artZoom();p.removeClass("hide");p.removeAttr("id");b.children(".js_blogimgs").prepend(p)}a.creator&&a.creator.id!=
TEAMS.currentUser.id&&(b.find(".entity-item").attr("undeletable",!0),b.find(".js_blogimgs .js_blog_atta_image a").remove())}},renderSubWork:function(a){$(".blog-tab a.active").data("reload",!0);a.hasNext?$(".blogs-more").removeClass("hide"):$(".blogs-more").addClass("hide");if(a&&a.result&&0<a.result.length)for(var b=0;b<a.result.length;b++){var c=a.result[b],d=$("#blog-clone").clone();d.removeAttr("id");if(c.id){d.attr("id",c.blog?c.blog.id:c.id);d.find(".j_blog-detail").removeClass("hide");c.blog&&
!c.blog.read&&d.find(".new").removeClass("hide");c.employee.avatar&&d.find("img").attr("src","/base/download/"+c.employee.avatar.p4);c.blog&&c.blog.content?d.find(".j_blog-body").html(e.initMessage(c.blog.content)):d.find(".j_blog-body").html('\x3cspan class\x3d"no-blog"\x3e\u6628\u65e5\u65e0\u65e5\u62a5\u5185\u5bb9\x3c/span\x3e');d.find(".user").html(c.employee.username).attr("userId",c.employee.id);d.find(".time").html(Date.create(c.createTime).format("{yyyy}-{MM}-{dd}"));if(c.blog){var g=c.blog.client;
g&&"pc"!=g&&c.blog.address&&""!=c.blog.address&&(d.find(".j_blog-coord").removeClass("hide"),d.find(".blog-client").removeClass("hide").html("\u6765\u81ea "+c.blog.client+"\u5ba2\u6237\u7aef"),d.find(".blog-coord").removeClass("hide"),d.find(".blog-address").html(c.blog.address))}this.renderAttachments(c.blog,d.find(".js_blogallfiles"));d.find(".j_mainline-count").html('\u6709\x3cspan class\x3d"work-count"\x3e'+c.openMainline+'\x3c/span\x3e\u4e2a\u8d1f\u8d23\u53c2\u4e0e\u7684\u9879\u76ee\uff0c\u5176\u4e2d\u6709\x3cspan class\x3d"work-count"\x3e'+
c.delayMainline+"\x3c/span\x3e\u4e2a\u9879\u76ee\u5ef6\u671f");g="";0<c.newMainline&&(g+='\u65b0\u589e\u4e86\x3cspan class\x3d"work-count"\x3e'+c.newMainline+"\x3c/span\x3e\u4e2a\u9879\u76ee\uff0c");0<c.closeMainline&&(g+='\u5173\u95ed\u4e86\x3cspan class\x3d"work-count"\x3e'+c.closeMainline+"\x3c/span\x3e\u4e2a\u9879\u76ee\uff0c");0<c.commentMainline&&(g+='\u6709\x3cspan class\x3d"work-count"\x3e'+c.commentMainline+"\x3c/span\x3e\u4e2a\u9879\u76ee\u6709\u53cd\u9988\u8fdb\u5c55\uff0c");0<g.length&&
(g="\u3002\u6628\u5929"+g.substring(0,g.length-1)+"\u3002",d.find(".j_mainline-count").append(g));d.find(".j_task-count").html('\u6709\x3cspan class\x3d"work-count"\x3e'+c.todoTask+'\x3c/span\x3e\u4e2a\u8d1f\u8d23\u53c2\u4e0e\u7684\u4efb\u52a1\uff0c\u5176\u4e2d\u6709\x3cspan class\x3d"work-count"\x3e'+c.delayTask+"\x3c/span\x3e\u4e2a\u4efb\u52a1\u5ef6\u671f");g="";0<c.finishedTask&&(g+='\u5b8c\u6210\u4e86\x3cspan class\x3d"work-count"\x3e'+c.finishedTask+"\x3c/span\x3e\u4e2a\u4efb\u52a1\uff0c");0<
c.newTask&&(g+='\u65b0\u589e\u4e86\x3cspan class\x3d"work-count"\x3e'+c.newTask+"\x3c/span\x3e\u4e2a\u4efb\u52a1\uff0c");0<c.commentTask&&(g+='\u6709\x3cspan class\x3d"work-count"\x3e'+c.commentTask+"\x3c/span\x3e\u4e2a\u4efb\u52a1\u6709\u53cd\u9988\u8fdb\u5c55\uff0c");0<g.length&&(g="\u3002\u6628\u5929"+g.substring(0,g.length-1)+"\u3002",d.find(".j_task-count").append(g));g="\u6628\u5929";0<c.newDocument&&(g+='\u4e0a\u4f20\u4e86\x3cspan class\x3d"work-count"\x3e'+c.newDocument+"\x3c/span\x3e\u7bc7\u6587\u6863      ");
0<c.commentDocument&&(g+='\x3cspan class\x3d"work-count"\x3e'+c.commentDocument+"\x3c/span\x3e\u7bc7\u6587\u6863\u6709\u53cd\u9988");(0<c.newDocument||0<c.commentDocument)&&d.find(".j_document-count").html(g);g="\u6628\u5929";0<c.newCustomer&&(g+='\u65b0\u5efa\u4e86\x3cspan class\x3d"work-count"\x3e'+c.newCustomer+"\x3c/span\x3e\u4e2a\u5ba2\u6237   ");0<c.commentCustomer&&(g+='\x3cspan class\x3d"work-count"\x3e'+c.commentCustomer+"\x3c/span\x3e\u4e2a\u5ba2\u6237\u6709\u8054\u7cfb\u53cd\u9988");(0<
c.newCustomer||0<c.commentCustomer)&&d.find(".j_customer-count").html(g);g="\u6628\u5929";0<c.newWorkflow&&(g+='\u63d0\u4ea4\u4e86\x3cspan class\x3d"work-count"\x3e'+c.newWorkflow+"\x3c/span\x3e\u4e2a\u5ba1\u6279\u7533\u8bf7\t  ");0<c.operateWorkflow&&(g+='\u5904\u7406\u5ba1\u6279\u4e86\x3cspan class\x3d"work-count"\x3e'+c.operateWorkflow+"\x3c/span\x3e\u4e2a\u5ba1\u6279");(0<c.newWorkflow||0<c.operateWorkflow)&&d.find(".j_workflow-count").html(g)}else d.find(".new").remove(),c.employee.avatar&&d.find("img").attr("src",
"/base/download/"+c.employee.avatar.p4),d.find(".user").html(c.employee.username).attr("userId",c.employee.id),d.find(".time").html(Date.create(c.createTime).format("{yyyy}-{MM}-{dd}")),d.find(".j_blog-body").html('\x3cspan class\x3d"no-blog"\x3e\u6628\u65e5\u6ca1\u6709\u767b\u5f55\x3c/span\x3e'),d.find(".j_blog-detail").addClass("hide");$("#sub-blog-list").append(d)}else 1==a.pageNo&&$("#sub-blog-list .no-result").removeClass("hide");$("#sub-blog-loading").addClass("hide")},renderCalendar:function(a,
b,c){a.hasCalender&&a.countSearch&&this.calendarView.loadHasCalendarDay(a.hasCalender);if(a.webAgendas&&0<a.webAgendas.length)for(b=a.webAgendas.length,c=0;c<b;c++){var d=a.webAgendas[c],e=$("#calendar-clone").clone().attr("id",d.id);e.attr({"data-id":d.id,userId:d.creator.id}).data("permission",d.permission);e.find(".j_name").html(d.title);d.allDay?(e.find(".date").html(Date.create(d.start).format("\u5168\u5929")),e.attr("title",Date.create(d.realStart).format("{yyyy}-{MM}-{dd}")+" \u81f3  "+Date.create(d.realEnd).format("{yyyy}-{MM}-{dd}")+
"   "+d.title)):(e.find(".date").html(Date.create(d.start).format("{24hr}:{mm}")),e.attr("title",Date.create(d.realStart).format("{yyyy}-{MM}-{dd} {24hr}:{mm}")+" \u81f3  "+Date.create(d.realEnd).format("{yyyy}-{MM}-{dd} {24hr}:{mm}")+"   "+d.title));$("#calendar-list").append(e)}else $("#calendar-list .no-result").removeClass("hide");$("#calendar-loading").addClass("hide")},dateSelected:function(a){var b=this;$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");
b.model.moduleSearch(b.userId,"","calendar",{date:Date.create(a).format("{yyyy}-{MM}-{dd}")},function(a){b.renderCalendar(a,a.type,!0)})},createCalendar:function(a){var b=this,c=new r({entityModule:"agenda",entityId:"new",userId:b.userId,start:Date.create(a).getTime(),end:Date.create(a).getTime()+864E5,callbacks:{afterOpen:function(){$("#entitybox-container #title").focus()},afterOperate:function(){c.close();b.calendarView.seletedAddClass(a);$("#portal-container #calendar-list").trigger("refresh")}}});
c.render()},dateDbClick:function(a){this.createCalendar(a)},dateOtherMonth:function(a){var b=this;$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");b.model.moduleSearch(b.userId,"","calendar",{date:a,countSearch:!0},function(c){b.renderCalendar(c,c.type,!0);b.calendarView.seletedAddClass(a)})},renderStatus:function(a,b){"finished"==a?(b.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),
b.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),b.find(".j_name").addClass("finished-line")):(b.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),b.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),b.find(".j_name").removeClass("finished-line"))},renderMainlineStatus:function(a,
b){"open"==a?(b.find(".finish").html('\x3ci class\x3d"glyphicon icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5173\u95ed'),b.find(".finish").attr("status","open"),b.find(".j_mainline_name").removeClass("finished-line")):(b.find(".finish").html('\x3ci class\x3d"glyphicon icon-finished"\x3e\x3c/i\x3e \u91cd\u65b0\u6253\u5f00'),b.find(".finish").attr("status","close"),b.find(".j_mainline_name").addClass("finished-line"))},renderOneTask:function(a,b,c){var d=b.dateGroup;a.data("group",d);a.attr({id:b.id,sn:b.sn});
b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched","false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module","task");this.renderStatus(b.status,a);b.newConment&&a.addClass("newComment");b.unread&&a.addClass("unread").removeClass("newComment");1<b.permission?(a.addClass("editable"),a.find(".sne").attr("title","\u6309\u4f4f\u9f20\u6807\u62d6\u62d6\u770b")):
(a.addClass("readonly"),a.find(".sne").attr("title","\u60a8\u65e0\u6743\u9650\u62d6\u52a8"));b.manager&&b.manager.username!=TEAMS.currentUser.username&&a.find(".user").html(b.manager.username);var e=$("#"+d+"-task-list");c&&"subordinates"==c&&(e=$("#sub-"+d+"-task-list"));3===b.permission&&(a.find(".finish").attr("targetId",b.id),b.locked&&a.find(".finish").removeAttr("targetId"));"mine"==c&&b.relationflag&&a.find(".finish").attr("targetId",b.id);7!==b.permission&&31!==b.permission||a.find(".finish").attr("targetId",
b.id);a.find(".j_name").text(b.name).attr("title",b.name);a.attr("data-id",b.id);1<b.permission&&a.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module","task").attr("targetId",b.id);e.append(a)},renderOneMainline:function(a){var b=$("#mainline-clone").clone().attr("id",a.id).attr("data-id",a.id);a.status&&b.find(".finish").attr("status",a.status);7!==a.permission&&31!==a.permission||b.find(".finish").attr("targetId",a.id);a.watched?(b.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),
b.find(".watch").attr("watched","true")):b.find(".watch").attr("watched","false");b.find(".watch").attr("targetId",a.id);b.find(".watch").attr("module","mainline");1<a.permission&&b.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module","mainline").attr("targetId",a.id);a.newConment&&b.addClass("newComment");a.unread&&b.addClass("unread").removeClass("newComment");a.icon&&b.find("img").attr("src",a.icon);b.find(".j_mainline_name").html(this.filterHtmlTag(a.name)).attr("title",
this.filterHtmlTag(a.name));a.percentFinished=a.percentFinished?a.percentFinished:0;var c=parseInt(100*a.percentFinished);b.find(".percent").html(c+"%");a.manager&&a.manager.name!=TEAMS.currentUser.username&&b.find(".leader").html(a.manager.username);return b},renderOnedomain:function(a,b,c){var d=b.manager,g=b.author;a.attr({id:b.id});b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched",
"false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module",c);var f=b.name?b.name:"";if("workflow"==c){var k=b.serNum?b.serNum:"";a.find(".j_name").attr("j_name",f+k).attr("title",f+k).html(e.initMessage(f+k))}else a.find(".j_name").attr("j_name",f).attr("title",f).html(e.initMessage(f));a.attr("data-id",b.id);a.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",c).attr("targetId",b.id);a.find(".doc-icon").addClass(b.type);
"document"==c&&a.find(".comment-count em").html(b.commentCount);b.unread&&a.addClass("unread");(b.newConment||b.newComment)&&a.addClass("newComment");"workflow"==c?b.creator&&b.creator.name!=TEAMS.currentUser.username&&a.find(".user").html(b.creator.name):"document"==c?g&&g.username!=TEAMS.currentUser.username&&a.find(".user").html(g.username):d&&d.username!=TEAMS.currentUser.username&&a.find(".user").html(d.username);return a},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,
"\x26gt").replace(/[\r\n]/g," ")},removeTarget:function(a,b){$("#"+a).trigger("remove")},changeTitle:function(a,b){$("#"+a).find(".j_name").html(this.filterHtmlTag(b)).attr("title",b)},changeStatus:function(a,b){var c=$("#"+a);this.renderStatus(b,c)},changeWatch:function(a,b){var c=$("#"+a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e \u5173\u6ce8'),
c.find(".watch").attr("watched","false"))},changeManager:function(a,b){a&&(a.username!=TEAMS.currentUser.username?$("#"+b+" .user").html(a.username):$("#"+b+" .user").html(""))},changeDuedate:function(a){var b=$("#"+a.id),c=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(c);b.removeClass("hide");Date.create(c).is("today")?0==$("#today-task-list #"+a.id).size()&&b.appendTo($("#today-task-list")):Date.create(c).is("tomorrow")?0==$("#tomorrow-task-list #"+a.id).size()&&
b.appendTo($("#tomorrow-task-list")):b.addClass("hide");this.rebuildSN($("#tomorrow-task-list"));this.rebuildSN($("#today-task-list"))},getNext:function(a){if(a){var b=0;a=saveAllSearch.find("li");a.each(function(a){$(this).hasClass("active")&&(b=a)});if(1!=a.length)return a.length==b+1?$(a[b-1]):$(a[b+1])}},getPrev:function(a){if(a){var b=0;a=saveAllSearch.find("li");a.each(function(a){$(this).hasClass("active")&&(b=a)});return $(a[b]).prev()}},rebuildSN:function(a){for(var b=a.children("li"),c=
0;c<b.length;c++)$(b[c]).find(".sn-link").html(c+1);0==b.length?(a.find(".notask").removeClass("hide"),a.find(".no-result").removeClass("hide")):(a.find(".notask").addClass("hide"),a.find(".no-result").addClass("hide"))},remove:function(){$(this.el).off(".portal");this.header&&(this.header.remove(),this.header=null)},renderPortal:function(a,b){for(var c=0,d=b.portals;c<d.length;c++)for(var g=d[c].els,f=$(a).find("#modules-section"),k=0;k<g.length;k++)switch(g[k].id){case "1":f.append(e.template("portal.mainline",
g[k]));break;case "2":f.append(e.template("portal.task",g[k]));break;case "4":f.append(e.template("portal.notice",g[k]));break;case "5":f.append(e.template("portal.workflow",g[k]));break;case "6":f.append(e.template("portal.calendar",g[k]));break;case "7":f.append(e.template("portal.customer",g[k]));break;case "8":f.append(e.template("portal.document",g[k]))}},renderAttachments:function(a,b){for(var c=a.attachments||[],d=a.imageFiles||[],g=0;g<c.length;g++){var f=c[g];b.children(".js_blogfiles").prepend(e.template("base.attachment",
f));b.find("#"+f.id).children().addClass("remoteDownload").data("dlid",f.id);(new x({container:b,afterJqObj:b.find("#"+f.id).children(),fileObj:f})).render()}for(g=0;g<d.length;g++)if((c=d[g])&&c.big&&c.image&&c.small){var f=c.id,k=c.bigUrl,l=c.imageUrl,h=c.smallUrl,n=[];n.push(k);n.push(l);n.push(h);var p=$("#blog-atta-image-clone").clone(!0);p.find("span").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+k+"' data-artZoom-source\x3d'/base/download/"+l+"' src\x3d'/base/download/"+
h+"'\x3e");p.append("\x3cp\x3e"+c.name+" \x3ca data-url\x3d/blog/deleteAttachments/"+f+".json\x3e\u5220\u9664  \x3c/a\x3e\x3c/p\x3e");p.find("a").data({idArray:n,imageId:l});p.find(".artZoom").artZoom();p.removeClass("hide");p.removeAttr("id");b.children(".js_blogimgs").prepend(p)}a.creator.id!=TEAMS.currentUser.id&&(b.find(".entity-item").attr("undeletable",!0),b.find(".js_blogimgs .js_blog_atta_image a").remove())},generateWodrkDyna:function(a,b){var c=a.module,d=a.read,g=a.type,f=$("\x3cspan\x3e\x3c/span\x3e").text(a.title).html(),
k=b.find(".card-detail .j_event"),l=b.find(".card-detail .j_content");switch(g){case "share":k.html("");d?l.html($.faceConvert(this.renderAt(a))):l.html("\u53d1\u5e03\u4e86\u4e00\u7bc7\u5206\u4eab");break;case "blog":d?(k.html("\u53d1\u5e03\u4e86\u5de5\u4f5c\u65e5\u62a5"),c=a.content?e.initMessage(a.content):"",c=$.faceConvert(c),l.html(c)):l.html("\u53d1\u5e03\u4e86\u5de5\u4f5c\u65e5\u62a5");break;case "create":g="";switch(c){case "task":g="\u521b\u5efa\u4e86\u4efb\u52a1";break;case "document":g=
"\u65b0\u589e\u4e86\u6587\u6863";break;case "customer":g="\u521b\u5efa\u4e86\u5ba2\u6237";break;case "workflow":g="\u53d1\u8d77\u4e86\u5ba1\u6279";break;case "mainline":g="\u521b\u5efa\u4e86\u9879\u76ee";break;case "workreport":g="\u521b\u5efa\u4e86\u5de5\u4f5c\u62a5\u544a";break;case "calendar":g="\u521b\u5efa\u4e86\u65e5\u7a0b";break;case "production":g="\u521b\u5efa\u4e86\u4ea7\u54c1";break;case "saleChance":g="\u521b\u5efa\u4e86\u5546\u673a"}d?(k.text(g),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+
this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.text(g);break;case "comment":g=[];switch(c){case "task":g.push("\u8bc4\u8bba\u4e86\u4efb\u52a1");break;case "document":g.push("\u8bc4\u8bba\u4e86\u6587\u6863");break;case "customer":g.push("\u8bc4\u8bba\u4e86\u5ba2\u6237");break;case "workflow":g.push("\u8bc4\u8bba\u4e86\u5ba1\u6279");break;case "mainline":g.push("\u8bc4\u8bba\u4e86\u9879\u76ee");break;case "workreport":g.push("\u8bc4\u8bba\u4e86"+
f);break;case "calendar":g.push("\u8bc4\u8bba\u4e86\u65e5\u7a0b");break;case "production":g.push("\u8bc4\u8bba\u4e86\u4ea7\u54c1");break;case "saleChance":g.push("\u8bc4\u8bba\u4e86\u5546\u673a")}d?("calendar"==c?g.push(' \uff1a   \x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"agenda" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e"):g.push(' \uff1a   \x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+
this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e"),k.html(g.join("")),c=a.content?e.initMessage(a.content):"",c=$.faceConvert(c),l.html(c)):l.html(g.join(""));break;case "finish":g="";switch(c){case "task":g="\u5c06\u4efb\u52a1\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5b8c\u6210"}d?(k.html(g),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+
f+'"\x3e'+f+"\x3c/a\x3e")):l.html(g);break;case "reopen":g="";switch(c){case "task":g="\u5c06\u4efb\u52a1\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210"}d?(k.html("\u5c06\u4efb\u52a1\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210"),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.html(g);break;case "accept":d?(k.html('\u540c\u610f\u4e86\x3ca class\x3d"usercard-toggle j_entityslider-toggle filterSlip_js" userid\x3d"'+
a.refCreator.id+'"\x3e'+a.refCreator.name+"\x3c/a\x3e\u521b\u5efa\u7684\u5ba1\u6279"),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.html("\u540c\u610f\u4e86\u5ba1\u6279");break;case "reject":d?(k.html('\u9000\u56de\u4e86\x3ca class\x3d"usercard-toggle" userid\x3d"'+a.refCreator.id+'"\x3e'+a.refCreator.name+"\x3c/a\x3e\u521b\u5efa\u7684\u5ba1\u6279"),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+
this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.html("\u9000\u56de\u4e86\u5ba1\u6279");break;case "closeml":g="";switch(c){case "mainline":g="\u5c06\u9879\u76ee\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5173\u95ed"}d?(k.html(g),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.html(g);break;case "openml":g=
"";switch(c){case "mainline":g="\u5c06\u9879\u76ee\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u6253\u5f00"}d?(k.html(g),l.html('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js" userid\x3d"'+this.userId+'" data-id\x3d"'+a.refId+'" data-module\x3d"'+c+'" title\x3d"'+f+'"\x3e'+f+"\x3c/a\x3e")):l.html(g)}},renderOneComment:function(a){if(a){var b=$(this.el).find("#dyna-feed-item").clone().removeAttr("id"),c=a.commentor;b.attr("data-comment-id",a.id);c&&c.avatar&&c.avatar.p4&&b.find("\x3e.avatar img").attr("src",
"/base/download/"+c.avatar.p4);b.find("\x3e.avatar").attr("userid",c.id);b.find(".name").html(c.name);b.find(".name").attr("userid",c.id);a.parent&&a.parent.commentor&&a.parent.commentor.username&&(b.find(".parent-comment-body").removeClass("hide"),b.find(".parent-username").html("@"+a.parent.commentor.username+": ").attr("title",a.parent.commentor.username).show(),b.find(".parent-content").html($.faceConvert(e.initMessage(a.parent.content))).attr("title",a.parent.content),b.find(".parent-username").attr("userId",
a.parent.commentor.id));b.find(".content").html($.faceConvert(this.renderAt(a)));b.find("time").html(Date.create(a.addTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));TEAMS.currentUser.avatar&&TEAMS.currentUser.avatar.p4&&b.find(".feed-post .avatar img").attr("src","/base/download/"+TEAMS.currentUser.avatar.p4);if(a.attachments)for(var c=0,d=a.attachments.length;c<d;c++){var g=a.attachments[c];b.find(".comment-attachment").append(e.template("base.attachment",g));b.find("#"+g.id).children().addClass("remoteDownload").attr("data-dlid",
g.id);(new x({container:b,afterJqObj:b.find("#"+g.id).children(),fileObj:g,rel:a.id})).render()}return b}},renderAt:function(a){var b=a.content,c={};if(a.userData&&(a=eval(a.userData)))for(var d=0;d<a.length;d++)a[d]&&(a[d].userIdIndex&&0!=a[d].userIdIndex?(b=b.substring(0,a[d].userIdIndex-1)+"@"+a[d].userName+b.substring(a[d].userIdIndex-1),c["@"+a[d].userName+" "]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+a[d].userId+"'\x3e@"+a[d].userName+" \x3c/a\x3e"):$feedItem.find("#show_at_comment").prepend("\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+
a[d].userId+"'\x3e@"+a[d].userName+" \x3c/a\x3e"));b=e.initMessage(b);for(d in c)b=b.replace(new RegExp(d,"gm"),c[d]);return b},renderOneWorkDynas:function(a){if(a){var b=$(this.el).find("#dynamic-card").clone().removeAttr("id"),c=a.creator,d=a.read;b.attr("data-target-id",a.id);b.attr("data-type",a.type);b.attr("data-ref-id",a.refId);a.module?b.attr("data-module",a.module):"blog"==a.type?b.attr("data-module","blog"):"share"==a.type&&b.attr("data-module","share");c&&c.avatar&&c.avatar.p3&&b.find(".card-detail .avatar img").attr("src",
"/base/download/"+c.avatar.p3);TEAMS.currentUser.avatar&&TEAMS.currentUser.avatar.p3&&b.find(".feed-post .avatar img").attr("src","/base/download/"+TEAMS.currentUser.avatar.p3);b.find(".feed-post .avatar img").attr("title",TEAMS.currentUser.name);b.find(".feed-post .avatar").attr("userid",TEAMS.currentUser.id);b.find(".card-detail .j_name").text(c.name);b.find(".card-detail .j_name").attr("userid",c.id);b.find(".card-detail .j_avatar").attr("userid",c.id);b.find(".card-detail time").text(Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));
d?("share"==a.type?(c=a.praiseCount||0,d=1==a.hasPraise?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e",b.find(".card-detail .j_opt .j_feedback em").text(a.commentCount),b.find(".card-detail .j_opt .j_like .j_praise").attr("title",d),b.find(".card-detail .j_opt .j_like em").text(c),b.find(".card-detail .j_opt .j_a-like").removeClass("hide")):(b.find(".card-detail .j_opt .j_a-like").addClass("hide"),b.find(".card-detail .j_opt .j_feedback em").text(a.commentCount)),b.find(".card-detail .j_opt .j_feedback").removeClass("hide")):
(b.find(".card-detail .j_opt").addClass("hide"),b.find(".card-detail .j_opt .j_a-like").addClass("hide"),b.find(".card-detail .j_opt .j_feedback").addClass("hide"));this.generateWodrkDyna(a,b);this.renderAttachments(a,b.find(".js_blogallfiles"));return b}},renderPraiseImg:function(a,b,c){this.model.queryPraiseUser(b,function(a){var b="",d=!1;a&&a.praisePage&&a.praisePage.result&&(_.each(a.praisePage.result,function(a){a=a.entityUser;var c=a.name,d=a.id;b=a.avatar&&a.avatar.p5?b+('\x3cli class\x3d"j_li_praise"\x3e\x3ca userid\x3d"'+
d+'" class\x3d"usercard-toggle" data-value\x3d"'+d+'" title\x3d"'+c+'"\x3e\x3cimg src\x3d"/base/download/'+a.avatar.p5+'" /\x3e\x3c/a\x3e\x3c/li\x3e'):b+('\x3cli class\x3d"j_li_praise"\x3e\x3ca userid\x3d"'+d+'" class\x3d"usercard-toggle" data-value\x3d"'+d+'" title\x3d"'+c+'"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/a\x3e\x3c/li\x3e')}),3<a.praisePage.result.length&&(d=!0));var e={};e.praisePage=a.praisePage;e.count=a.count;e.html=b;e.isMoreShow=d;c&&c(e)})},renderPraisePages:function(a){if(a){a=
a.praisePage.totalPages;for(var b="",c=1;c<=a;c++)b=1==c?b+('\x3cli class\x3d"active j_li_page"\x3e\x3ca\x3e'+c+"\x3c/a\x3e\x3c/li\x3e"):b+('\x3cli class\x3d"j_li_page"\x3e\x3ca\x3e'+c+"\x3c/a\x3e\x3c/li\x3e");return b}},loadComment:function(a,b){var c=this;a.find(".j_loading").removeClass("hide");a.find(".j_more").addClass("hide");var d=a.data("type");c.commentModel.targetId="blog"==d||"share"==d?a.data("targetId"):a.data("refId");d=parseInt(a.data("pageNo"))||0;c.commentModel.pageNo=d+1;c.commentModel.pageSize=
10;c.commentModel.pageQuery({},function(d){var e=d&&d.page&&d.page.result;e&&(_.each(e,function(b){b=c.renderOneComment(b);a.find(".j_feed-list").append(b);b.find(".j_feedInput textarea").autosize()}),a.data("pageNo",d.page.pageNo),a.find(".j_loading").addClass("hide"),d.page.hasNext&&a.find(".j_more").removeClass("hide"),b&&b())})},renderWorkDynas:function(a,b){var c=this;$(c.el).find(".j_card-loading").show();$(c.el).find(".j_nodata").hide();a=parseInt(a)||1;1==a&&$(c.el).find(".j_dyna-card-list").empty();
this.model.searchWorkDyna({workDynaFilter:c.filter,pageNo:a,pageSize:25},function(a){$(c.el).find(".j_card-loading").hide();if(a=a&&a.workDynaPage)_.each(a.result,function(a){a=c.renderOneWorkDynas(a);$(c.el).find(".j_dyna-card-list").append(a);a.find(".j_feedInput textarea").autosize()}),c.pageNo=a.pageNo||1,c.hasNextPage=a.result.length==a.pageSize,c.hasNextPage||$(c.el).find(".j_nodata").show();c.isLoaded=!0;b&&b()});c.setConfig(c.filter)},setConfig:function(a){if(this.userId==TEAMS.currentUser.id&&
TEAMS.userConfig&&a){var b="";a.range&&a.workType&&(b=a.range+"-"+a.workType);a.departmentId&&(b+="-"+a.departmentId);a=this.model;for(var c=null,d=!1,e=0;e<TEAMS.userConfig.length;e++)if(c=TEAMS.userConfig[e],"portal.workdyna"==c.configKey){d=!0;e=c.configValue;c.configValue=b;e!=b&&a.updateConfigValue(c);break}d||(c={configKey:"portal.workdyna",configValue:b},a.saveConfig(c,function(){TEAMS.userConfig.push(c)}))}},renderFilterByConfig:function(){if(this.userId==TEAMS.currentUser.id&&TEAMS.userConfig){var a=
this._getConfig("portal.workdyna");if(a){var a=a.split("-"),b=a[0]||"j_company",c=this.getActiveLi($(".j_dynamic-owner ul li"),"data-range",b)||$(".j_dynamic-owner ul li.j_company");$(".j_dynamic-owner ul li").removeClass("active");c.addClass("active");c=a[1]||"all";c=this.getActiveLi($(".j_dynamicTab .j_dynaType"),"data-filter-type",c)||$(".j_dynamicTab ul .j_all");c.addClass("active").siblings().removeClass("active");0<c.parents(".j_dynaType").length&&(c.parents(".j_dynaType").addClass("active").siblings().removeClass("active"),
c.parents(".j_dynaType").children("a").append('\x3ci class\x3d"arr"\x3e\x3c/i\x3e'),c=c.parent().clone(),$(".j_dynamicSubTab").removeClass("hide").html(c));"otherDepartment"==b&&a[2]!=TEAMS.currentUser.department.id&&$(".j_dynamicSubTab .myShare").addClass("hide")}}},getActiveLi:function(a,b,c){if(a&&0!=a.length&&b){for(var d=null,e=0,g=a.length;e<g;e++)if($(a[e]).attr(b)&&$(a[e]).attr(b)==c){d=$(a[e]);break}else if(0<$(a[e]).find("ul li").length&&(d=this.getActiveLi($(a[e]).find("ul li"),b,c)))break;
return d}},_getConfig:function(a){var b=null;return this.userId!=TEAMS.currentUser.id?null:(b=TEAMS.userConfig.find(function(b){return b.configKey==a}))?b.configValue:null},_getFilter:function(a){if(this.userId!=TEAMS.currentUser.id||!TEAMS.userConfig)return null;a=null;var b=this._getConfig("portal.workdyna");b&&(b=b.split("-"),a={range:b[0]||"company",workType:b[1]||"all"},b[2]&&(a.departmentId=b[2],this.model.getDeptName(b[2],function(a){a=a.department&&a.department.name||"\u5176\u4ed6\u90e8\u95e8";
$(".j_dynamic-owner #otherDepartment").children("a").text(a)})));return a}});m.exports=h});
define("teams/portal/dynachannelmodel",["teams/utils"],function(h,q,m){h("teams/utils");h=Backbone.Model.extend({initialize:function(f){},searchWorkDyna:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/workdyna.json",type:"post",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},praise:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/praise.json",type:"post",dataType:"json",data:JSON.stringify(f),success:function(c){e&&
e(c)}})},queryPraiseUser:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/queryPraiseUser.json",type:"post",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},departmentSearch:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/departmentSearch.json",type:"post",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/portal/newportalview",["teams/utils","teams/base/introview","teams/portal/minimoduleview","teams/portal/communimenuview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/base/introview"),c=h("teams/portal/minimoduleview"),b=h("teams/portal/communimenuview");h=Backbone.View.extend({initialize:function(a){this.el="#mainContainer";this.userId=a.userId;this.channel=a.channel},delegateEvents:function(){this.on("refreshBlog",function(a){this.communiMenuView&&this.communiMenuView.refreshBlog(a)})},
render:function(){$(this.el).html(f.template("portal.newportal"));this.communiMenuView=new b({container:"#j_communi-menu",userId:this.userId,channel:this.channel});this.communiMenuView.render();this.miniModuleView=new c({container:"#j_mini-modules",parent:this,userId:this.userId});this.miniModuleView.render();var a=TEAMS.currentUser.loginCount;a&&"0"!=a?TEAMS.currentUser.admin&&!TEAMS.currentTenant.dateUpdated&&$("#module_notice").removeClass("hide").find("span").html('\u60a8\u7684\u56e2\u961f\u4fe1\u606f\u8fd8\u672a\u5b8c\u5584\uff0c\u70b9\u51fb\x3ca class\x3d"router" href\x3d"/info"\x3e\u8fdb\u5165\u5b8c\u5584\u4fe1\u606f\x3c/a\x3e\u9875\u9762'):
((new e({})).render(),TEAMS.currentUser.loginCount=1)},remove:function(){this.communiMenuView&&this.communiMenuView.remove();this.miniModuleView&&this.miniModuleView.remove()}});m.exports=h});
define("teams/portal/communicontentview","teams/utils teams/portal/dynachannelview teams/portal/msgchannelview teams/portal/chatchannelview teams/portal/chatdocview teams/wechat/chatmodel teams/messages/messagesmodel teams/blog/blogmodel teams/models/leftmodel teams/portal/dynachannelmodel teams/org/usermodel teams/base/configmodel".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/portal/dynachannelview"),c=h("teams/portal/msgchannelview"),b=h("teams/portal/chatchannelview"),a=h("teams/portal/chatdocview"),
d=h("teams/wechat/chatmodel"),g=h("teams/messages/messagesmodel"),l=h("teams/blog/blogmodel"),n=h("teams/models/leftmodel"),k=h("teams/portal/dynachannelmodel"),r=h("teams/org/usermodel"),p=h("teams/base/configmodel");h=Backbone.View.extend({_infoTips:{remind:{id:"j_unreadRemind_item",name:"\u63d0\u9192",css:"bell",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u63d0\u9192\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u65b0\u7528\u6237\u52a0\u5165\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u65e5\u7a0b\u7b49\u4e8b\u9879\u50ac\u529e\u53ca\u63d0\u9192\u4fe1\u606f\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e3\u3001\u5ba1\u6279\u7ed3\u675f\u63d0\u9192\u6d88\u606f\x3c/div\x3e"},
follow:{id:"j_watchApplication_item",name:"\u5173\u6ce8\u7533\u8bf7",css:"follow",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u5173\u6ce8\u7533\u8bf7\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u67e5\u770b\u5176\u4ed6\u540c\u4e8b\u5bf9\u60a8\u53d1\u51fa\u7684\u5173\u6ce8\u7533\u8bf7\u8bf7\u6c42\uff0c\u4ee5\u53ca\u5173\u6ce8\u8bf7\u6c42\u5904\u7406\u7ed3\u679c\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u60a8\u53ef\u4ee5\u540c\u610f\u6216\u8005\u62d2\u7edd\u4ed6\u7684\u5173\u6ce8\u7533\u8bf7\uff0c\u5f53\u60a8\u540c\u610f\u4e86\u8be5\u8bf7\u6c42\u540e\u3001\u7533\u8bf7\u8005\u5c31\u53ef\u4ee5\u67e5\u770b\u5230\u60a8\u7684\u5de5\u4f5c\u65e5\u62a5\uff0c\u6765\u4e86\u89e3\u60a8\u7684\u5de5\u4f5c\u60c5\u51b5\uff0c\u4f46\u662f\u5173\u6ce8\u8005\u4e0d\u4f1a\u67e5\u770b\u5230\u60a8\u7684\u4efb\u52a1\u3001\u5ba2\u6237\u3001\u5ba1\u6279\u3001\u9879\u76ee\u3001\u62a5\u544a\u3001\u6587\u6863\u3001\u6570\u636e\u4e0a\u62a5\u7b49\u4fe1\u606f\x3c/div\x3e"},
applyJoin:{id:"j_joinApplication_item",name:"\u52a0\u5165\u7533\u8bf7",css:"join",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u52a0\u5165\u7533\u8bf7\u6d88\u606f\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u65b0\u7528\u6237\u53d1\u9001\u7684\u7533\u8bf7\u52a0\u5165\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u7528\u6237\u52a0\u5165\u7533\u8bf7\u5904\u7406\u7ed3\u679c\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e3\u3001\u7ba1\u7406\u5458\u53ef\u4ee5\u6279\u51c6\u6216\u8005\u62d2\u7edd\u7533\u8bf7\u8005\u7684\u52a0\u5165\x3c/div\x3e"},
shareJoin:{id:"j_shareApplication_item",name:"\u5171\u4eab\u7533\u8bf7",css:"share",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u5171\u4eab\u7533\u8bf7 \u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u5176\u4ed6\u540c\u4e8b\u5bf9\u4efb\u52a1\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u5ba1\u6279\u3001\u9879\u76ee\u3001\u6570\u636e\u4e0a\u62a5\u7b49\u4e8b\u9879\u7684\u67e5\u770b\u6743\u9650\u7684\u7533\u8bf7\uff0c\u60a8\u53ef\u4ee5\u540c\u610f\u7533\u8bf7\uff0c\u7533\u8bf7\u8005\u5c31\u4f1a\u6709\u67e5\u770b\u8be5\u4e8b\u9879\u7684\u6743\u9650\u3001\u4f46\u662f\u4e0d\u4f1a\u83b7\u53d6\u7f16\u8f91\u7684\u6743\u9650\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u4e00\u65e6\u7533\u8bf7\u8005\u83b7\u53d6\u4e86\u5171\u4eab\u6743\u9650\u3001\u4ed6\u8fd8\u53ef\u4ee5\u628a\u8be5\u4e8b\u9879\u5171\u4eab\u7ed9\u5176\u4ed6\u4eba\x3c/div\x3e"},
newitem:{id:"j_unReadItem_item",name:"\u672a\u8bfb\u4e8b\u9879",css:"unread",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u672a\u8bfb\u4e8b\u9879\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u7684\u672a\u8bfb\u4e8b\u9879\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u5df2\u67e5\u770b\u7684\u201c\u672a\u8bfb\u4e8b\u9879\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/div\x3e"},
unreadblog:{id:"j_unreadBlogCount_item",name:"\u672a\u8bfb\u65e5\u62a5",css:"unreadblog"},newcomment:{id:"j_unreadNewComment_item",name:"\u4e8b\u9879\u7684\u65b0\u53cd\u9988",css:"newCom",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u53ca\u8bc4\u8bba\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u5df2\u67e5\u770b\u7684\u201c\u4e8b\u9879\u7684\u65b0\u53cd\u9988\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/div\x3e"},
newfinish:{id:"j_newFinishedItem_item",name:"\u65b0\u5b8c\u6210\u4e8b\u9879",css:"newFin",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u65b0\u5b8c\u6210\u4e8b\u9879\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u65b0\u5b8c\u6210\u7684\u4e8b\u9879\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u60a8\u67e5\u770b\u8fc7\u7684\u201c\u65b0\u5b8c\u6210\u4e8b\u9879\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/div\x3e"},
atme:{id:"j_unreadAtMe_item",name:"@\u6211\u7684\u65b0\u53cd\u9988",css:"at",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728@\u6211\u7684\u65b0\u53cd\u9988\u5217\u8868\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u4fe1\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u4efb\u52a1\u3001\u9879\u76ee\u3001\u5ba1\u6279\u3001\u6587\u6863\u3001\u5ba2\u6237\u3001\u62a5\u544a\u3001\u65e5\u7a0b\u3001\u6570\u636e\u4e0a\u62a5\u4e2d\u4e8b\u9879\u7684\u53cd\u9988\u53ca\u8bc4\u8bba\u4e2d\u6709@\u6211\u7684 (\u63d0\u5230\u6211\u7684)\u6d88\u606f\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u60a8\u67e5\u770b\u8fc7\u7684\u201c@\u6211\u7684\u65b0\u53cd\u9988\u201d\u6d88\u606f\uff0c\u5c06\u51fa\u73b0\u5728\u5df2\u8bfb\u5217\u8868\u4e2d\x3c/div\x3e"},
applyReceive:{id:"j_applyReceive_item",name:"\u9886\u53d6\u7533\u8bf7",css:"unread",tip:"\x3cdiv class\x3d'e-row ta-l'\x3e\u5728\u9886\u7528\u7533\u8bf7\u5217\u8868\u60a8\u53ef\u4ee5\u770b\u5230\u4e0b\u5217\u6d88\u606f\uff1a\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e1\u3001\u516c\u6d77\u7ba1\u7406\u5458\u53ef\u5904\u7406\u5176\u4ed6\u540c\u4e8b\u5bf9\u516c\u6d77\u5ba2\u6237\u7684\u9886\u7528\u7533\u8bf7\uff0c\u60a8\u82e5\u63a5\u6536\u7533\u8bf7\uff0c\u7533\u8bf7\u8005\u5219\u6210\u4e3a\u516c\u6d77\u5ba2\u6237\u7684\u5ba2\u6237\u7ecf\u7406\x3c/div\x3e\x3cdiv class\x3d'e-row ta-l'\x3e2\u3001\u975e\u516c\u6d77\u7ba1\u7406\u5458\u53ef\u67e5\u770b\u5230\u516c\u6d77\u7ba1\u7406\u5458\u5bf9\u60a8\u9886\u7528\u7533\u8bf7\u7684\u5904\u7406\u7ed3\u679c\x3c/div\x3e"}},
_msgTypeNames:"follow applyJoin newitem newfinish newcomment remind TodayTask newJoin TodayAgenda TodoWorkflow unreadblog atme shareJoin applyReceive newnotice  commentblog replayblog wechat".split(" "),initialize:function(a){this.el=a.container||"#j_communi-main";this.type=a.type||"dyna";this.msgType=a.msgType;this.targetId=a.targetId;this.targetName=a.targetName;this.avatarUrl=a.avatarUrl;this.workType=a.workType;this.range=a.range||"company";this.workType||("dyna"==this.type&&(this.workType="workAll"),
"share"==this.type&&(this.workType="share"));this.chatmodel=new d;this.blogModel=new l;this.messageModel=new g;this.leftModel=new n;this.dynaChannelModel=new k;this.userModel=new r;this.configmodel=new p;this.filter={};$(this.el).html(f.template("portal.communicontent"))},delegateEvents:function(){var d=this,g=$(d.el);$("body").on("click.communicontent",".goto-top",function(a){f.gotoTop(d.el+" .scrollwrapper")});$(window).on("resize.communicontent",function(){d.resizeDynaSubMenu(d.type)});g.on("click.communicontent",
"li.search .icon-search",function(a){$(this).siblings("input").trigger("search")});g.on("keyup.communicontent",'li.search input[type\x3d"text"]',function(a){13==a.which&&$(this).trigger("search")});g.on("click.communicontent","#j_dyna .j_dynamicTab li,#j_dyna .j_dynamicTab-sub li",function(){var a=$(this),b={};d.subContentView&&d.subContentView.isLoading||(g.find("#j_dyna .j_dynamicTab li,#j_dyna .j_dynamicTab-sub li").removeClass("active"),a=a.data("filterType"),g.find('#j_dyna .j_dynamicTab li[data-filter-type\x3d"'+
a+'"]').addClass("active"),g.find('#j_dyna .j_dynamicTab-sub li[data-filter-type\x3d"'+a+'"]').addClass("active"),d.subContentView&&d.subContentView.remove(),d.filter.workType=a,(a=$.trim($("#j_dyna_searchinput").val()))&&a.length&&(b.keywords=a),d.subContentView=new e($.extend(b,d.filter)),d.subContentView.render(),d.saveUserConfig("portal.workdyna",d.filter.range+"-"+d.filter.workType))});g.on("click.communicontent","#j_dyna .j_shareTab li,#j_dyna .j_shareTab-sub li",function(){var a=$(this),b=
{};d.subContentView&&d.subContentView.isLoading||(g.find("#j_dyna .j_shareTab li,#j_dyna .j_shareTab-sub li").removeClass("active"),a=a.data("filterType"),g.find('#j_dyna .j_shareTab li[data-filter-type\x3d"'+a+'"]').addClass("active"),g.find('#j_dyna .j_shareTab-sub li[data-filter-type\x3d"'+a+'"]').addClass("active"),d.subContentView&&d.subContentView.remove(),d.filter.workType=a,(a=$.trim($("#j_dyna_searchinput").val()))&&a.length&&(b.keywords=a),d.subContentView=new e($.extend(b,d.filter)),d.subContentView.render(),
d.saveUserConfig("portal.workdyna",d.filter.range+"-"+d.filter.workType))});g.on("click.communicontent","#j_employee .j_dynamicTab li",function(){if(!d.subContentView||!d.subContentView.isLoading){$(this).addClass("active").siblings().removeClass("active");var a=$(this).data("type"),c=$(this).data("subType"),g=null;switch(a){case "dyna":d.filter.workType=c;d.filter.creator=d.targetId;g=new e(d.filter);break;case "chat":g=new b({targetId:d.targetId});break;case "workspace":ROUTER.navigate("/blog/"+
d.targetId,{trigger:!0})}g&&(d.subContentView&&d.subContentView.remove(),d.subContentView=g,d.subContentView.render())}});g.on("click.communicontent","#j_channel .j_dynamicTab li",function(){if(!d.subContentView||!d.subContentView.isLoading){$(this).addClass("active").siblings().removeClass("active");d.subContentView&&d.subContentView.remove();var c=null;switch($(this).data("type")){case "doc":c=new a({groupId:d.targetId});break;case "chat":c=new b({type:"channel",targetId:d.targetId})}c&&(d.subContentView=
c,d.subContentView.render())}});g.on("click.communicontent","#j_message .j_dynamicTab li",function(){if(!d.subContentView||!d.subContentView.isLoading){$(this).addClass("active").siblings().removeClass("active");var a="false"==$(this).attr("isRead");"follow"!=d.msgType&&"shareJoin"!=d.msgType&&"applyJoin"!=d.msgType&&"applyReceive"!=d.msgType&&(a?g.find(".j_toolList .j_markallread").removeClass("hide"):g.find(".j_toolList .j_markallread").addClass("hide"));delete d.filter.module;g.find("#j_message #j_mes_searchinput").val("");
g.find("#j_message .j_moduletool a.selectui-result").html('\u5168\u90e8\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e');g.find("#j_message .j_moduletool .j_detail_ul li:not([default])").removeClass("hide");d.subContentView&&d.subContentView.remove();"unreadblog"==$(this).parents("#j_message").attr("type")?(d.filter.workType="blog",d.filter.unRead=a,d.subContentView=new e(d.filter)):(d.filter.isRead=!a,d.subContentView=new c(d.filter));d.subContentView.render()}});$("body").on("click.communicontent",
function(a){0!=$(a.target).parents(".j_membersLayer").length||$(a.target).hasClass("chat-name")||0!=$(a.target).parents(".chat-name").length||g.find(".j_channel_hd:not(.hide) .j_members.on").trigger("click")});g.on("blur.communicontent",".j_nameDiv",function(a){a=$(this);if((a=$.trim(a.text()))&&0!=a.length)if(20<a.length)f.notify("\u7fa4\u7ec4\u540d\u5b57\u6700\u957f20\u4e2a\u5b57");else{var b={};b.name=a;b.channelId=d.targetId;d.chatmodel.updateChannelName(b,function(a){f.notify("\u7fa4\u7ec4\u540d\u5b57\u4fee\u6539\u6210\u529f");
$("#j_communi-menu .j_mesRecent #"+d.targetId+'[data-entity\x3d"channel"] .j_name').text(b.name)})}else f.notify("\u8bf7\u8f93\u5165\u7fa4\u7ec4\u540d\u5b57")});g.on("click.communicontent",".j_channel_hd .j_members",function(){var a=$(this),b=a.parents(".j_channel_hd").find(".j_membersLayer");a.data("open")?(a.removeClass("on").data("open",!1),b.slideUp("fast")):(a.addClass("on").data("open",!0),b.slideDown("fast"));"channel"==a.parent().parent().attr("type")&&d.renderChannelMember()});g.on("confirmHandler.communicontent",
".j_add_member",function(a,b){var c=b.objs;if(!(1>c.length)){for(var e={ids:""},g=0;g<c.length;g++){var k=c[g];e.ids+=k.id+";";d.addMemberPanel(k)}"channel"==d.type?(e.channelId=d.targetId,d.chatmodel.addMember(e,function(a){f.notify("\u6dfb\u52a0\u6210\u529f");$("#j_communi-menu .j_mesRecent #"+d.targetId+'[data-entity\x3d"channel"]').trigger("click")})):(0>e.ids.indexOf(d.targetId)&&(e.ids+=d.targetId+";"),0>e.ids.indexOf(TEAMS.currentUser.id)&&(e.ids+=TEAMS.currentUser.id+";"),d.chatmodel.createChannel(e,
function(a){a=a.channel;$("#j_communi-menu").trigger("createChannel",a)}))}});g.on("click.communicontent",".j_quit-channel",function(a){var b=d.targetId,c=TEAMS.currentUser.id;f.confirm("\u786e\u8ba4\u9000\u51fa\u7fa4\u7ec4?",function(a){a&&$.ajax({type:"GET",url:"/channel/remove/"+b+"/"+c+".json",dataType:"json",data:{},success:function(a){a&&a.actionMsg?f.notify(a.actionMsg.message):(f.notify("\u9000\u51fa\u7fa4\u7ec4\u6210\u529f"),$('#j_communi-menu .j_menu-item[data-entity\x3d"channel"]#'+b).remove(),
$("#j_communi-menu .j_dynamic-all").trigger("click"))}})})});g.on("search.communicontent","#j_mes_searchinput",function(a){a=$(this);a=$.trim(a.val());var b={};a&&0<a.length&&(b={keywords:a});d.subContentView&&d.subContentView.remove();d.subContentView=new c($.extend(b,d.filter));d.subContentView.render()});g.on("click.communicontent",".j_page_read",function(a){var b="";"unreadblog"==d.msgType?(b=_.map(g.find(".j_dyna-card-list div.j_unreadBlog_card"),function(a){return $(a).attr("data-target-id")}),
d.blogModel.readBlogs({blogIds:b.join(","),feedType:"unread"},function(a){g.find(".j_dyna-card-list div.j_unreadBlog_card .j_new").remove();b.length&&d.addCount(-1*b.length);f.notify("\u5f53\u524d\u9875\u9762\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")})):(b=_.map(g.find(".j_meslist div.j_mesitem .j_status i.icon-envelope-alt"),function(a){return $(a).parents("div.j_mesitem").attr("id")}),d.messageModel.newReaded(b.join(","),function(a){for(a=0;a<b.length;a++)d.changeReadStyleById(b[a]);b.length&&d.addCount(-1*
b.length);f.notify("\u5f53\u524d\u9875\u9762\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")}))});g.on("click.communicontent",".j_all_read",function(a){var b="";"unreadblog"==d.msgType?d.blogModel.readAll(function(a){g.find(".j_dyna-card-list div.j_unreadBlog_card .j_new").remove();f.notify("\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\u6210\u529f");$("#j_communi-menu .j_mesRecent #"+d._infoTips[d.msgType].id).data("count",0).find(".count").attr("title",0).text("");$("#j_dropMessage .j_"+d.msgType+" span").text("")}):
(g.find(".j_meslist div.j_mesitem").each(function(){var a=$(this);a.find(".j_status i").hasClass("icon-envelope-alt")&&(a=a.attr("id"),b+=","+a)}),b=b.substring(1),a=d._msgTypeNames.indexOf(d.msgType)+1,0>=a||d.messageModel.allReaded(a,function(a){if(null!=b&&""!=b){a=b.split(",");for(var c=0;c<a.length;c++)d.changeReadStyleById(a[c])}$("#j_communi-menu .j_mesRecent #"+d._infoTips[d.msgType].id).data("count",0).find(".count").attr("title",0).text("");$("#j_dropMessage .j_"+d.msgType+" span").text("");
f.notify("\u5168\u90e8\u6807\u8bb0\u5df2\u8bfb\u6210\u529f")}))});g.on("click.communicontent",".j_moduletool .j_detail_ul li",function(a){var b=$(this);a={};var e=g.find(".j_module_feed").attr("target-modeul"),f=b.parents("#j_message");f.find(".j_detail_ul li").each(function(){$(this).data("module")==e&&$(this).removeClass("hide")});var k=b.data("module");b.addClass("hide");"all"!=k&&f.find(".j_detail_ul .j_all").removeClass("hide");f.find().removeClass("hide");g.find(".j_module_feed").attr("target-modeul",
k);d.filter.module=k;(b=$.trim($("#j_mes_searchinput").val()))&&b.length&&(a.keywords=b);d.subContentView&&d.subContentView.remove();d.subContentView=new c($.extend(a,d.filter));d.subContentView.render()});g.on("click.communicontent","#j_dyna .j_dyna-range li",function(){var a=$(this);a.hasClass("hide")||(a.addClass("hide").siblings("li").removeClass("hide"),d.filter.range=a.data("range"),d.subContentView&&d.subContentView.remove(),d.subContentView=new e(d.filter),d.subContentView.render(),d.saveUserConfig("portal.workdyna",
d.filter.range+"-"+d.filter.workType))});g.on("search.communicontent","#j_dyna_searchinput",function(a){a=$(this);a=$.trim(a.val());var b={};a&&0<a.length&&(b={keywords:a});d.subContentView&&d.subContentView.remove();d.subContentView=new e($.extend(b,d.filter));d.subContentView.render()});g.on("datepicker.communicontent","#dyna-datepicker",function(a,b){$(this).parents(".j_dropDownMenu").slideUp(100);d.filter.endDate=b.format("{yyyy}-{MM}-{dd}");d.subContentView&&d.subContentView.remove();d.subContentView=
new e(d.filter);d.subContentView.render()});f.datepicker({el:"#dyna-datepicker",callback:function(a){a=a.date;Date.create(a).is("today")||Date.create(a).isBefore("today")?$("#dyna-datepicker").trigger("datepicker",a):f.notify("\u8bf7\u67e5\u8be2\u5f53\u65e5\u548c\u5f53\u65e5\u4e4b\u524d\u7684\u65e5\u671f!")}});$("#dyna-datepicker").trigger("focusin.datePicker")},render:function(){$(this.el).find("#j_"+this.type).removeClass("hide").siblings(".j_channel_hd").addClass("hide");this.renderContentNav();
this.subContentView&&this.subContentView.remove();switch(this.type){case "dyna":this.workType&&(this.filter.workType=this.workType);this.range&&(this.filter.range=this.range);this.subContentView=new e(this.filter);break;case "message":"unreadblog"==this.msgType?(this.filter.workType="blog",this.filter.unRead=!0,this.subContentView=new e({workType:"blog",unRead:!0,isFirst:!0})):(this.filter.msgType=this.msgType,this.subContentView=new c({msgType:this.msgType,isFirst:!0}));break;case "employee":var a=
this.targetId;a==TEAMS.currentUser.id?(this.filter.workType="workAll",this.filter.creator=a,this.subContentView=new e(this.filter)):this.subContentView=new b({type:"employee",targetId:a});break;case "channel":this.subContentView=new b({type:"channel",targetId:this.targetId});break;case "share":this.filter.workType=this.workType||"share",this.range&&(this.filter.range=this.range),this.subContentView=new e(this.filter)}1>=TEAMS.currentTenant.usedLicense&&"dyna"==this.type&&($("#j_communi-content").addClass("hide"),
$("#j_communicate-holder").removeClass("hide"));this.subContentView&&this.subContentView.render()},renderContentNav:function(){var a=$(this.el);if(this.type)switch(this.type){case "share":var b=a.find("#j_dyna");b.removeClass("dyna-hd").addClass("share-hd");b.find(".j_name").text("\u56e2\u961f\u5206\u4eab");b.find(".j_avatar img").attr("src","images/avatar_group.png");b.find(".j_shareTab").removeClass("hide");b.find(".j_dynamicTab").addClass("hide");b.find(".j_tip").addClass("hide");b.attr({type:"share"}).data({entity:"share"});
if(this.workType&&"share"!=this.workType){var c=a.find("#j_dyna");b.find(".j_shareTab li,.j_shareTab-sub li").removeClass("active");b.find('.j_shareTab li[data-filter-type\x3d"'+this.workType+'"]').addClass("active");b.find('.j_shareTab-sub li[data-filter-type\x3d"'+this.workType+'"]').addClass("active")}this.showDynaDept();this.resizeDynaSubMenu("share");break;case "dyna":this.workType&&"workAll"!=this.workType&&(c=a.find("#j_dyna"),c.find(".j_dynamicTab li,.j_dynamicTab-sub li").removeClass("active"),
c.find('.j_dynamicTab li[data-filter-type\x3d"'+this.workType+'"]').addClass("active"),c.find('.j_dynamicTab-sub li[data-filter-type\x3d"'+this.workType+'"]').addClass("active"));this.showDynaDept();this.resizeDynaSubMenu("dyna");break;case "message":b=this._infoTips[this.msgType];c=a.find("#j_message");c.attr("type",this.msgType).data("target-id",b.id).find(".j_messageImg").addClass(b.css||"unread");c.find(".j_name").text(b.name);b.tip&&c.find(".j_tip").removeClass("hide").find("i").attr("title",
b.tip);this.renderNavTool();break;case "employee":b=this.targetId;c=a.find("#j_employee");c.find(".j_dynamicTab").addClass("nomg");c.find(".j_avatar img").attr("src",this.avatarUrl);c.find(".j_name").text(this.targetName);c.attr({userid:b,type:"employee"}).data({entity:"employee",targetId:b});1E4==b?(c.find(".j_dynamicTab li").not(".j_titleChat").addClass("hide"),c.find(".j_members").addClass("hide")):(a.find(".j_avatar img,.j_name").addClass("usercard-toggle cs-p").attr("userid",b),b==TEAMS.currentUser.id?
(c.find(".j_titleChat").addClass("hide").removeClass("active"),c.find(".j_titleWorkSpace").addClass("hide"),c.find(".j_titleworkDyna").addClass("active")):this.userModel.getEmployeeById(b,function(b){b&&b.employee&&b.employee.followAndSub&&a.find("#j_employee .j_titleBlog").removeClass("hide");b&&b.employee&&b.employee.subordinate&&a.find("#j_employee .j_titleWorkSpace").removeClass("hide")}));break;case "channel":b=a.find("#j_channel"),b.find(".j_nameDiv").text(this.targetName),b.find(".j_avatar img").attr("src",
this.avatarUrl),b.attr({type:"channel"}).data({entity:"channel",targetId:this.targetId}),b.find(".j_groupchatSet").addClass("hide"),b.find(".j_dynamicTab li").each(function(){var a=$(this).attr("data-show");"#i-groupchat-task"!=a&&"#i-groupchat-other"!=a&&"#i-groupchat-task"!=a||$(this).addClass("hide")})}},renderNavTool:function(){var a=$(this.el),b=this.msgType;b&&(a=a.find("#j_message"),"follow"==b||"applyJoin"==b||"shareJoin"==b||"applyReceive"==b?(a.find("li.j_moduletool,li.j_searchtool,li.j_markallread").addClass("hide"),
a.find(".j_dynamicTab .j_unread a").text("\u5f85\u5904\u7406"),a.find(".j_dynamicTab .j_read a").text("\u5df2\u5904\u7406")):"remind"==b||"unreadblog"==b?a.find("li.j_moduletool,li.j_searchtool").addClass("hide"):("newcomment"==b||"newitem"==b?a.find(".j_detail_ul .j_share").addClass("hide"):"newfinish"==b?(a.find(".j_toolList .j_detail_ul li").addClass("hide"),a.find(".j_toolList .j_detail_ul").find("li.j_mainline,li.j_task,li.j_workflow,li.j_formdatareport").removeClass("hide")):"unfinish"==this.type&&
(a.find(".j_detail_ul .j_saleChance").addClass("hide"),a.find(".j_detail_ul .j_production").addClass("hide")),a.find(".j_dynamicTab .j_unread a").text("\u672a\u8bfb"),a.find(".j_dynamicTab .j_read a").text("\u5df2\u8bfb")))},resizeDynaSubMenu:function(a){var b=$(this.el);if("dyna"==a||"share"==a)if(a="share"==a?"j_shareTab":"j_dynamicTab",!b.find("#j_dyna").hasClass("hide")&&!b.find("#j_dyna ."+a).hasClass("hide")){var c=b.find("#j_dyna ."+a+" li:first").position();if(c){var d=b.find("#j_dyna ."+
a+"-sub");b.find("#j_dyna ."+a+" li").each(function(){$(this).position().top>c.top?d.find("li:eq("+$(this).index()+")").removeClass("hide"):d.find("li:eq("+$(this).index()+")").addClass("hide")});d.find("li:not(.hide)").length?b.find("."+a+"-more").removeClass("hide"):b.find("."+a+"-more").addClass("hide")}}},showDynaDept:function(){var a=this,b=$(this.el).find(".j_dyna-range");a.leftModel.myfollowPage.pageNo=1;a.leftModel.loadMyfollow(function(c){c&&c.user&&c.user.superior?b.find(".j_superiors").removeClass("hide"):
b.find(".j_superiors").remove();c&&c.page&&c.page.totalCount?b.find(".j_watched").removeClass("hide"):b.find(".j_watched").remove();a.leftModel.loadSubordinate(function(c){c&&c.page&&c.page.totalCount?b.find(".j_directSubordinates, .j_subordinates").removeClass("hide"):b.find(".j_directSubordinates, .j_subordinates").remove();a.range&&(c=b.find(".j_"+a.range).text(),b.siblings(".selectui-result").html(c+'\x3ci class\x3d"icon-angle-down"\x3e\x3c/i\x3e'),b.find(".j_"+a.range).addClass("hide").siblings("li").removeClass("hide"))})})},
searchDepartment:function(a){var b=this,c={};a&&(c.departmentName=a);b.dynaChannelModel.departmentSearch(c,function(a){if(a&&a.departmentList){var c=$(b.el).find(".j_dept-suggestion-list ul");a=a.departmentList;c.html("");for(var d=0;d<a.length;d++){var e=a[d],g=$('\x3cli style\x3d"list-style:none;"\x3e\x3ca\x3e\x3cspan class\x3d"j_dept-name"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e').attr("title",e.name).data({deptId:e.id,deptName:e.name});g.find(".j_dept-name").text(e.name);c.append(g)}}})},renderChannelMember:function(){var a=
this;a.chatmodel.findMemberByChannel(a.targetId,function(b){$(".j_membersLayer .j_membersUls li:not(.j_addLi)").detach();b=b.channel.member;for(var c=0;c<b.length;c++)a.addMemberPanel(b[c])});f.layout(".j_membersLayer")},addMemberPanel:function(a){var b=$("#j_memberCLone").clone().removeAttr("id");b.attr("userid",a.employeeId);b.find("img").attr("title",a.name);null!=a.avatar&&b.find("img").attr("src","/base/download/"+a.avatar.p5);0==$(".j_membersLayer .j_membersUls li[userid\x3d'"+a.employeeId+
"']").length&&(0<$(".j_membersLayer .j_membersUls .j_addLi").length?$(".j_membersLayer .j_membersUls .j_addLi").before(b):$(".j_membersLayer .j_membersUls").append(b))},changeReadStyleById:function(a){a=$(this.el).find(".j_meslist div#"+a);a.find(".j_status i").hasClass("icon-envelope-alt")&&a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope")},websocket_chatCallBack:function(a){"employee"!=this.type&&"channel"!=this.type||!this.subContentView||this.subContentView.websocket_chatPortalMessage(a)},
addCount:function(a){var b=$("#j_communi-menu .j_mesRecent #"+view._infoTips[view.msgType].id);if(b.length){var c=b.data("count")||0,c=c+a;a=0>=c?"":99<c?"99+":c;b.data("count",c).find(".count").text(a).attr("title",c)}$("#j_dropMessage .j_"+view.msgType+" span").text(c)},saveUserConfig:function(a,b){if(a&&b){var c=!1;_.each(TEAMS.userConfig,function(d){d.configKey==a&&(d.configValue=b,c=!0)});c||TEAMS.userConfig.push({configKey:a,configValue:b});this.configmodel.saveConfig({configKey:a,configValue:b})}},
refreshBlog:function(a){this.subContentView&&this.subContentView.refreshBlog(a)},remove:function(){$(this.el).off(".communicontent");$("body").off(".communicontent");$(window).off(".communicontent");this.subContentView&&this.subContentView.remove()}});m.exports=h});
define("teams/portal/minimoduleview","teams/utils teams/base/dynamicinfoview teams/portal/portalmodel teams/views/calendarview teams/views/calendarweekview teams/models/portalsettingmodel teams/component/watchmodel teams/component/sharemodel teams/component/userselector teams/blog/blogmodel teams/feed/eteamscounter teams/mainline/mainlinenew teams/base/entityboxbase teams/component/entitybox teams/task/taskmodel teams/doc/documentnewview teams/component/invitemodalview teams/portal/dyncpublishmodel teams/face/emojiarea teams/crm/CrmService".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/base/dynamicinfoview"),c=h("teams/portal/portalmodel");h("teams/views/calendarview");var b=h("teams/views/calendarweekview"),a=h("teams/models/portalsettingmodel"),d=h("teams/component/watchmodel"),g=h("teams/component/sharemodel"),l=h("teams/component/userselector"),n=h("teams/blog/blogmodel"),k=h("teams/feed/eteamscounter"),r=h("teams/mainline/mainlinenew"),p=h("teams/base/entityboxbase"),s=h("teams/component/entitybox"),u=h("teams/task/taskmodel"),w=h("teams/doc/documentnewview"),
v=h("teams/component/invitemodalview"),x=h("teams/portal/dyncpublishmodel"),y=h("teams/face/emojiarea"),z=h("teams/crm/CrmService");h=Backbone.View.extend({initialize:function(b){y($);this.el=b.container||"#j_mini-modules";this.parent=b.parent;this.userId=b.userId;$(this.el).html(f.template("portal.minimodule"));this.portalModel=new c;this.portalsettingmodel=new a(b);this.watchModel=new d;this.shareModel=new g({entityId:"",module:""});this.blogModel=new n(b);this.taskModel=new u({id:""});this.dyncPublishModel=
new x;this.createBlogCache="minimodule-createblog";this.crmService=new z;f.layout("#j_mini-modules")},delegateEvents:function(){var a=this,b=$(this.el);$("body").off("click.MiniModule",".goto-top").on("click.MiniModule",".goto-top",function(a){f.gotoTop("#j_mini-modules")});b.off("click.MiniModule",".j_title_item").on("click.MiniModule",".j_title_item",function(a){a=$(this).attr("data-href");ROUTER.navigate(a,{trigger:!0})});b.on("click.MiniModule",".j_portal-col-nav li",function(b){$(this).parent().find("a").removeClass("active");
$(this).find("a").addClass("active");var c=$(this).find("a").attr("data-type"),d=$(this).find("a").attr("data-module");$(this).parent().removeClass("active");$(this).parents(".j_portal-col");b="#"+d+"-list";"subordinates"==c?($("#"+d+"-list").addClass("hide"),$("#sub-"+d+"-list").removeClass("hide"),b="#sub-"+d+"-list"):($("#"+d+"-list").removeClass("hide"),0>=$("#"+d+"-list").find(".entitybox-toggle").size()&&$("#"+d+"-list").find(".no-result").removeClass("hide"),$("#sub-"+d+"-list").addClass("hide"));
$(this).find("a.active").data("reload")||($(this).find("a.active").data("reload",!0),"blog"==d||"mainline"==d?$(b).find("dl").remove():$(b).find("li").remove(),"task"==d?($(b+" .notask").addClass("hide"),$(b+" #today-"+d+"-loading").removeClass("hide"),$(b+" #sub-today-"+d+"-loading").removeClass("hide"),$(b+" #tomorrow-"+d+"-loading").removeClass("hide")):($(b+" #sub-"+d+"-loading").removeClass("hide"),$(b+" #"+d+"-loading").removeClass("hide")),"customer"==d?a.crmService.findCustomersForTypes(a.usreId,
c,1,5,function(b){var d={};d.result=b.data;a.renderCustomer(d,c,!1)}):a.portalModel.moduleSearch(a.userId,c,d,null,function(b){switch(d){case "task":a.renderTask(b.taskPage,c,!1);break;case "document":a.renderDocument(b.documentPage,c,!1);break;case "customer":a.renderCustomer(b.customerPage,c,!1);break;case "workflow":a.renderWorkflow(b.requestPage,c,!1);break;case "mainline":a.renderMainline(b.mainlinePage,c,!1);break;case "blog":"subordinates"==c?a.renderSubWork(b.resultsPage,!1):a.renderBlog(b.blogListPage,
c,!1)}}))});b.off("click.MiniModule","#task-today-more").on("click.MiniModule","#task-today-more",function(a){$("#today-task-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).parent().addClass("hide")});b.off("click.MiniModule","#task-tomorrow-more").on("click.MiniModule","#task-tomorrow-more",function(a){$("#tomorrow-task-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).parent().addClass("hide")});b.off("click.MiniModule",
"#workflow-more-button").on("click.MiniModule","#workflow-more-button",function(a){$("#workflow-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.off("click.MiniModule","#mainline-more-button").on("click.MiniModule","#mainline-more-button",function(a){$("#mainline-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.off("click.MiniModule","#document-more-button").on("click.MiniModule",
"#document-more-button",function(a){$("#document-list").find(".entitybox-toggle").each(function(){$(this).removeClass("hide")});$(this).addClass("hide")});b.on("click.MiniModule","li.j_task-item, li.j_portal_item,dl.j_mainline_item",function(a){$(this).removeClass("unread");$(this).removeClass("newComment")});b.on("click.MiniModule",".j_btn-refresh",function(a){a=$(this);"calendar"==a.attr("type")?(a=a.parents(".j_portal-col"),a.find(".datepicker-days tbody").find("td.selected").trigger("click")):
(a=a.parents(".j_portal-col-head"),a=a.find("li").find("a.active"),a.data("reload",!1),a.parents("li").trigger("click"))});b.on("click.MiniModule",".j_btn-remove",function(b){b={};var c=$(this).parents(".j_portal-col");b.id=c.attr("data-id");b.isshow="0";a.portalsettingmodel.updatePortalSetting(b,function(b){c.addClass("hide");0==$(a.el).find(".portal-col:visible").length&&$(a.el).find(".portalsetting-notice").show()})});b.on("click.MiniModule",".shortcut .watch,.j_shortcut .watch",function(b,c){b.stopPropagation();
var d={},e=$(this);d.module=e.attr("module");d.id=e.attr("targetId");"true"==e.attr("watched")?(d._method="DELETE",a.watchModel.watchOne(d,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");e.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');e.attr("watched","false")})):(d._method="PUT",a.watchModel.watchOne(d,function(a){f.notify("\u5173\u6ce8\u6210\u529f");e.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');e.attr("watched","true")}))});b.on("click.MiniModule",
".shortcut .finish",function(b,c){b.stopPropagation();if($(this).attr("targetId")&&$(this).attr("status")){var d=$(this),e="finished"==d.attr("status")?"todo":"finished",g=d.attr("targetId");a.portalModel.updateStatus(e,g,function(b){b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderStatus(e,d.parents("li")))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});b.on("click.MiniModule",".j_shortcut .finish",function(b,c){b.stopPropagation();
var d=$(this);if(d.attr("targetId")&&d.attr("status")){var e=d.attr("targetId"),g="",g="close"==d.attr("status")?"open":"close",k={};k["mainline.status"]=g;k._method="put";k.id=e;k.propertyName="status";a.portalModel.updateMainlineStatus(k,e,function(b){b.actionMsg&&b.actionMsg.message?f.notify(b.actionMsg.message):(f.notify("\u9879\u76ee\u72b6\u6001\u4fee\u6539\u6210\u529f"),a.renderMainlineStatus(g,d.parents("#"+e)))})}else f.notify("\u6ca1\u6709\u5173\u95ed\u6743\u9650")});b.off("confirmHandler",
".shortcut .share,.j_shortcut .share").on("confirmHandler",".shortcut .share,.j_shortcut .share",function(b,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];a.sids="";for(var e=0;e<d.length;e++)a.sids+=d[e].id+",";d=$(this).attr("targetId");a.shareModel.sids=a.sids;a.shareModel.entityIds=d;a.shareModel._module=$(this).attr("module");a.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});b.on("click.MiniModule",
".shortcut .share,.j_shortcut .share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?(new l({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});b.on("mouseenter.MiniModule",".j_portal-blog-item",function(b){if(0!=$(this).find(".new").size()){var c=$(this);a.blogModel.readOne($(this).attr("id"),"unread",function(b){c.find(".new").remove();b=parseInt($("#commentMine-unread").data("count"));b=isNaN(b)?0:b;var d=parseInt($("#replayMine-unread").data("count")),
d=isNaN(d)?0:d,e=parseInt($("#unreadBlog").data("count")),e=isNaN(e)?0:e,g=b+d+e;"commentme"==a.layout?(b--,g--,b=0>b?0:b,0>=b?($("#commentMine-unread").addClass("hide"),$("#commentMine-unread").html("").data("count","")):$("#commentMine-unread").html(b).data("count",b)):"replayme"==a.layout?(d--,g--,d=0>d?0:d,0>=d?($("#replayMine-unread").addClass("hide"),$("#replayMine-unread").html("").data("count","")):$("#replayMine-unread").html(d).data("count",d)):(e--,g--,0>=e?($("#unreadBlog").addClass("hide"),
$("#unreadBlog").html("").data("count","")):$("#unreadBlog").html(e).data("count",e));$("#header #top #j_dropMessage .j_unreadblog span").html(0>=g?"":g);k.totaling()})}});b.on("click.MiniModule",".blogs-more",function(b){var c=$(this);b=c.data("blogDate");var d=c.data("createTime"),e=c.data("pageNo")?c.data("pageNo"):2,g={};g.date=b?b:"";g.createTime=d?d:"";g.pageNo=e;var f=$(this).parents(".j_portal-col").find("a.active").attr("data-type");a.portalModel.moduleSearch(a.userId,f,"blog",g,function(b){"subordinates"==
f?a.renderSubWork(b.resultsPage):a.renderBlog(b.blogListPage,f);e++;c.data(e)})});b.on("click.MiniModule",".j_portal-goal-add",function(b){a.mainlinenew=new r({parentEl:a.el,userId:a.userId,target:$(this),callback:function(b){$("#mainline-list").prepend(a.renderOneMainline(b));a.mainlinenew.hide();$("#mainline-list").removeClass("hide");$("#mainline-list .no-result").addClass("hide");$("#j_portal-goal-add").addClass("hide")}});a.mainlinenew.render()});b.on("click.MiniModule","#blog-create",function(a){(new p({entityModule:"blog",
entityId:"new",target:$(this),callbacks:{afterOpen:function(){$("#blog-textarea").focus()}}})).render()});b.on("click.MiniModule","#task-create",function(b){(new s({entityModule:"task",entityId:"today",target:$(this),page:a,callbacks:{afterCreate:function(b){b.permission=31;a.renderOneTask($("#task-clone").clone().attr("id",b.id),b);a.rebuildSN($("#"+b.dateGroup+"-task-list"))},afterOpen:function(){$("#task-title").focus()}}})).render()});b.on("click.MiniModule",".notask",function(a){a=$(this).parent();
$(this).addClass("hide");var b=$("#task-create-clone").clone().removeAttr("id");b.find("input").attr("data-group",$(this).attr("data-group"));a.prepend(b);b.find("input").focus()});b.on("blur.MiniModule",".j_task-list input",function(b){var c=$(this);if((b=c.val())&&0<$.trim(b).length){var d={content:""};d.name=b;a.taskModel.create(d,c.attr("data-group"),function(b){f.notify("\u5b89\u6392\u4efb\u52a1\u6210\u529f");d=b.task;c.parents("li").remove();d.permission=31;a.renderOneTask($("#task-clone").clone().attr("id",
d.id),d);a.rebuildSN($("#"+d.dateGroup+"-task-list"))})}});b.on("keyup.MiniModule",".j_task-list input",function(a){var b=$(this);13==(a?a:window.event?window.event:null).keyCode&&b&&0<$.trim(b).length&&b.trigger("blur")});b.on("click.MiniModule","#customer-create",function(a){(new s({entityModule:"customer",entityId:"new",target:$(this),callbacks:{afterOpen:function(){$("#customer-name").focus()}}})).render()});b.on("click.MiniModule","#workflow-create",function(a){(new s({entityModule:"workflow",
entityId:"new",target:$(this),callback:function(a){}})).render()});b.on("click.MiniModule","#document-create",function(b){a.documentnewview=new w({userId:a.userId,callback:function(a){}});a.documentnewview.render()});$("ul.j_task-list").sortable({opacity:.9,handle:"span.sne",revert:!0,connectWith:".j_task-list",placeholder:"task-placeholder",cancel:".readonly",update:function(b,c){var d=$(this).attr("group");a.rebuildSN($("#"+d+"-task-list"));c.item.data("update",!0)},start:function(a,b){},receive:function(a,
b){b.item.data("receive",!0);var c=$(this).attr("group");b.item.data("group",c)},stop:function(b,c){var d=c.item.attr("id");if(c.item.data("update")){c.item.data("update",!1);var e=a.generateSN(c.item);if(c.item.data("receive")){c.item.data("receive",!1);var g=c.item.data("group");a.changeGroup(d,g,e)}else a.changeGroup(d,null,e)}}}).disableSelection();b.on("remove.MiniModule",".j_e-list li",function(b){b=$(this).parent();$(this).remove();a.rebuildSN(b)});b.on("remove.MiniModule",".j_e-list dl",function(a){a=
$(this).parent();$(this).remove();0==a.children("dl").length?a.find("#j_portal-goal-add").removeClass("hide"):a.find("#j_portal-goal-add").addClass("hide")});b.off("click.MiniModule",".j_agenda-entity").on("click.MiniModule",".j_agenda-entity",function(b){b=$(this).attr("data-id");var c=$(this).data("permission"),d=a.userId||TEAMS.currentUser.id,e=31==c?new p({entityModule:"agenda",entityId:b,userId:a.userId,callbacks:{afterOpen:function(){$("#entitybox-container #title").focus()},afterOperate:function(){e.close();
1==$("#portal-container #calendar-list").size()&&$("#portal-container #calendar-list").trigger("refresh")}}}):new p({entityModule:"agenda",entityId:b,userId:d,callbacks:{afterOperate:function(){e.close();1==$("#portal-container #calendar-list").size()&&$("#portal-container #calendar-list").trigger("refresh")}}});e.render()});b.on("refresh.MiniModule","#calendar-list",function(b){$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");
b=a.calendarView.selectedDate();a.portalModel.moduleSearch(a.userId,"","calendar",{date:b,countSearch:!0},function(b){a.renderCalendar(b,b.type,!0)})});b.on("click.MiniModule","#calendar-create",function(b){b=a.calendarView.selectedDate();a.createCalendar(b)});b.off("click.MiniModule",".j_focusEl").on("click.MiniModule",".j_focusEl",function(){$(this).addClass("active").find(".i-post-input textarea").trigger("focus",!0).end().find(".i-post-handle").slideDown(200)});b.off("focusout.MiniModule","#createblog-textarea").on("focusout.MiniModule",
"#createblog-textarea",function(b){b=$(this).attr("data-type");var c=$(this).val();TEAMS.ownCache&&(TEAMS.ownCache[a.createBlogCache+"#"+b]=c)});b.off("click.MiniModule","#btn-createblog").on("click.MiniModule","#btn-createblog",function(c){c=$(this);if(!c.attr("disabled")){c.attr("disabled",!0);c.attr("data-type");if(0<b.find("#createblog-attachments .entity-item a").length){var d=b.find("#createblog-textarea").val();if(""==$.trim(d)){f.notify("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");c.attr("disabled",
!1);return}a.uploader.start()}else a.postBlog();return!1}});b.off("keyup.MiniModule","#createblog-textarea").on("keyup.MiniModule","#createblog-textarea",function(c){13===c.keyCode&&c.ctrlKey&&(b.find("#btn-createblog").trigger("click.MiniModule"),c.preventDefault());c=$(this).val();var d=b.find("#btn-createblog").attr("data-type");a.showTips(c,d);"blog"==d&&1E3<c.length&&f.notify("\u5185\u5bb9\u8d85\u8fc71000\u5b57")})},render:function(){var a=this;$(a.el);var b={firstSearch:!1},c={"filter.keywords":""};
c.userId=a.userId;a.portalModel.renderCount(c,function(b){a.renderCount(b)});a.portalsettingmodel.loadPortals(a.userId,function(c){a.renderPortal(c,b);$(".j_portal-sortable").sortable({handle:".j_portal-col-head",revert:!0,connectWith:".j_portal-sortable",items:".j_portal-col",forcePlaceholderSize:!0,placeholder:"portal-sortable-placeholder",update:function(b,c){var d={},e=c.sender;e||(e=c.item.parents(".j_portal-sortable"));d.sectionId=e.attr("data-id");d.showOrder=e.sortable("toArray",{attribute:"data-id"}).join(",");
a.portalsettingmodel.savePortalOrder(d,function(a){})}});$(a.el).on("click.MiniModule",function(a){a=$(a.target);0==a.closest(".blog-post").length&&$(this).find(".blog-post").removeClass("active").find(".blog-post-handle").slideUp(200);null==a.closest(".dyncpublish-tab a").get(0)&&0==a.closest(".i-post").length&&$(this).find(".i-post").removeClass("active").find(".i-post-handle").slideUp(200)});$(a.el).on("click.MiniModule",".j_iboxSlide",function(){$(this).data("open")?($(this).removeClass("off").data("open",
!1),$(this).parents(".i-box-head").next(".i-box-content").slideDown(300)):($(this).addClass("off").data("open",!0),$(this).parents(".i-box-head").next(".i-box-content").slideUp(300))})})},renderCount:function(a){var b=a.unfinishCount.allCount||0,c=a.watchedCount.allCount||0;a=a.privacyCount||0;var d=0;0!=b?($(this.el+" #j_unfinish .count").html(b),d++):$(this.el+" #j_unfinish").addClass("hide");0!=c?($(this.el+" #j_watched .count").html(c),d++):$(this.el+" #j_watched").addClass("hide");0!=a?($(this.el+
" #j_privacy .count").html(a),d++):$(this.el+" #j_privacy").addClass("hide");$(this.el+" .j_tag_div").addClass("titleNum_"+d);0==d&&$(this.el+" .j_tag_div").addClass("hide")},renderPortal:function(a,b){for(var c=0,d=a.portals;c<d.length;c++){var e=d[c].els;$(this.el).find("#modules-section");for(var g=0;g<e.length;g++)"0"!=e[g].isShow&&this.addModule(e[g])}},renderModule:function(a,c,d,g){var f=this;"customer"==d?f.crmService.findCustomersForTypes(a,c,1,5,function(a){var b={};b.result=a.data;f.renderCustomer(b,
a.type,!0)}):"notice"==d?(f.dynamicview&&f.dynamicview.remove(),f.dynamicview=new e({container:"#placard-comtainer"}),f.dynamicview.render()):f.portalModel.moduleSearch(a,c,d,g,function(a){switch(d){case "task":f.renderTask(a.taskPage,a.type,!0);break;case "mainline":f.renderMainline(a.mainlinePage,a.type,!0);break;case "workflow":f.renderWorkflow(a.requestPage,a.type,!0);break;case "calendar":f.calendarView=new b({el:"#calendar-datatime",parent:f,seletedClass:!0});f.calendarView.render();f.renderCalendar(a,
a.type,!0);break;case "document":f.renderDocument(a.documentPage,a.type,!0);break;case "blog":a.blogListPage&&0>=a.blogListPage.totalCount&&0<a.count?$(".blog-tab .subordinates").parent().trigger("click"):f.renderBlog(a.blogListPage,a.type,!0)}})},renderTask:function(a,b,c){c&&this.switchTab(b,"task");$(".task-tab a.active").data("reload",!0);b&&"subordinates"==b?$("#sub-today-task-list li").remove():($("#today-task-list li").remove(),$("#tomorrow-task-list li").remove());if(a&&a.result&&0<a.result.length){for(var d=
c=0,e=0,g=0;g<a.result.length;g++){var f=a.result[g],k=$("#task-clone").clone().attr("id",f.id);"today"==f.dateGroup?(c++,"subordinates"==b&&e++,k.find(".sn-link").html(c)):(d++,k.find(".sn-link").html(d));this.renderOneTask(k,f,b)}0==c&&(b&&"subordinates"==b?$("#sub-today-task-list .no-result").removeClass("hide"):$("#today-task-list .notask").removeClass("hide"));0==d&&(b&&"mine"!=b||$("#tomorrow-task-list .notask").removeClass("hide"))}else b&&"subordinates"==b?$("#sub-today-task-list .no-result").removeClass("hide"):
($("#today-task-list .notask").removeClass("hide"),$("#tomorrow-task-list .notask").removeClass("hide"));$("#today-task-loading").addClass("hide");$("#sub-today-task-loading").addClass("hide");$("#tomorrow-task-loading").addClass("hide")},renderMainline:function(a,b,c){c&&this.switchTab(b,"mainline");$(".mainline-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#mainline-list"),$("#j_portal-goal-add").addClass("hide"),"subordinates"==b?(c=$("#sub-mainline-list"),$("#sub-mainline-list .no-result").addClass("hide")):
($("#mainline-list li").remove(),$("#mainline-list .no-result").addClass("hide")),b=0;b<=a.result.length-1&&!(5<=b);b++){var d=this.renderOneMainline(a.result[b]);c.prepend(d)}else b&&"mine"!=b?$("#sub-mainline-list").find(".no-result").removeClass("hide"):($("#sub-mainline-list").find(".no-result").removeClass("hide"),$("#mainline-list").find(".no-result").removeClass("hide"));$("#mainline-loading").addClass("hide");$("#sub-mainline-loading").addClass("hide")},renderWorkflow:function(a,b,c){c&&this.switchTab(b,
"workflow");$(".workflow-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#workflow-list"),"subordinates"==b&&(c=$("#sub-workflow-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#workflow-clone").clone().removeAttr("id"),a.result[b],"workflow"));else"subordinates"==b?$("#sub-workflow-list .no-result").removeClass("hide"):$("#workflow-list .no-result").removeClass("hide");$("#workflow-loading").addClass("hide");$("#sub-workflow-loading").addClass("hide")},
renderCalendar:function(a,b,c){a.hasCalender&&a.countSearch&&this.calendarView.loadHasCalendarDay(a.hasCalender);if(a.webAgendas&&0<a.webAgendas.length)for(b=a.webAgendas.length,c=0;c<b;c++){var d=a.webAgendas[c],e=$("#calendar-clone").clone().attr("id",d.id);e.attr({"data-id":d.id,userId:d.creator.id}).data("permission",d.permission);e.find(".j_name").html(d.title);d.allDay?(e.find(".date").html(Date.create(d.start).format("\u5168\u5929")),e.attr("title",Date.create(d.realStart).format("{yyyy}-{MM}-{dd}")+
" \u81f3  "+Date.create(d.realEnd).format("{yyyy}-{MM}-{dd}")+"   "+d.title)):(e.find(".date").html(Date.create(d.start).format("{24hr}:{mm}")),e.attr("title",Date.create(d.realStart).format("{yyyy}-{MM}-{dd} {24hr}:{mm}")+" \u81f3  "+Date.create(d.realEnd).format("{yyyy}-{MM}-{dd} {24hr}:{mm}")+"   "+d.title));$("#calendar-list").append(e)}else $("#calendar-list .no-result").removeClass("hide");$("#calendar-loading").addClass("hide")},renderDocument:function(a,b,c){c&&this.switchTab(b,"document");
$(".document-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#document-list"),"subordinates"==b&&(c=$("#sub-document-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#document-clone").clone().removeAttr("id"),a.result[b],"document"));else"subordinates"==b?$("#sub-document-list .no-result").removeClass("hide"):$("#document-list .no-result").removeClass("hide");$("#document-loading").addClass("hide");$("#sub-document-loading").addClass("hide")},
renderBlog:function(a,b,c){$(".blog-tab a.active").data("reload",!0);10==a.result.length?$(".blogs-more").removeClass("hide"):$(".blogs-more").addClass("hide");if(a&&a.result&&0<a.result.length){for(b=0;b<a.result.length;b++){c=a.result[b];var d=$("#blog-clone").clone().removeAttr("id");d.attr("id",c.blog.id);d.find(".new").removeClass("hide");d.find(".j_blog-detail").addClass("hide");c.user.avatar&&d.find("img").attr("src","/base/download/"+c.user.avatar.p4);if(c.blog){var e=c.blog.client;e&&"pc"!=
e&&c.blog.address&&""!=c.blog.address&&(d.find(".j_blog-coord").removeClass("hide"),d.find(".blog-client").removeClass("hide").html("\u6765\u81ea "+c.blog.client+"\u5ba2\u6237\u7aef"),d.find(".blog-coord").removeClass("hide"),d.find(".blog-address").html(c.blog.address))}c.blog.content&&d.find(".j_blog-body").html(f.initMessage(c.blog.content));d.find(".user").html(c.user.username).attr("userId",c.user.id);var e=Date.create(c.blog.createTime).format("{yyyy}-{MM}-{dd}"),g=Date.create(c.blog.blogTime).format("{yyyy}-{MM}-{dd}"),
k="",k=e==g?"\u53d1\u5e03\u4e8e\uff1a":"\u8865\u4ea4\u4e8e\uff1a";d.find(".create-time").html(k+Date.create(c.blog.createTime).format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));d.find(".time").html(g);this.renderAttachments(c.blog,d.find(".js_blogallfiles"));$("#blog-list").append(d)}b=Date.create(a.result[a.result.length-1].date);e=Date.create(a.result[a.result.length-1].blog.createTime);$(".blogs-more").data("blogDate",b.format("{yyyy}-{MM}-{dd}")).data("createTime",e.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))}else 1==
a.pageNo&&$("#blog-list .no-result").removeClass("hide");$("#blog-loading").addClass("hide")},renderCustomer:function(a,b,c){c&&this.switchTab(b,"customer");$(".customer-tab a.active").data("reload",!0);if(a&&a.result&&0<a.result.length)for(c=$("#customer-list"),"subordinates"==b&&(c=$("#sub-customer-list")),b=0;b<a.result.length&&!(5<=b);b++)c.append(this.renderOnedomain($("#customer-clone").clone().removeAttr("id"),a.result[b],"customer"));else"subordinates"==b?$("#sub-customer-list .no-result").removeClass("hide"):
$("#customer-list .no-result").removeClass("hide");$("#customer-loading").addClass("hide");$("#sub-customer-loading").addClass("hide")},renderOnedomain:function(a,b,c){var d=b.manager,e=b.author;a.attr({id:b.id});b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched","false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module",c);b.name&&a.find(".j_name").attr("j_name",
b.name).html(f.initMessage(b.name));a.find(".j_name").attr("title",b.name);a.attr("data-id",b.id);a.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",c).attr("targetId",b.id);a.find(".doc-icon").addClass(b.type);"document"==c&&a.find(".comment-count em").html(b.commentCount);b.unread&&a.addClass("unread");(b.newConment||b.newComment)&&a.addClass("newComment");"workflow"==c?b.creator&&b.creator.name!=TEAMS.currentUser.username&&a.find(".user").html(b.creator.name):
"document"==c?e&&e.username!=TEAMS.currentUser.username&&a.find(".user").html(e.username):d&&d.username!=TEAMS.currentUser.username&&a.find(".user").html(d.username);return a},renderOneTask:function(a,b,c){var d=b.dateGroup;a.data("group",d);a.attr({id:b.id,sn:b.sn});b.watched?(a.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),a.find(".watch").attr("watched","true")):a.find(".watch").attr("watched","false");a.find(".watch").attr("targetId",b.id);a.find(".watch").attr("module",
"task");this.renderStatus(b.status,a);b.newConment&&a.addClass("newComment");b.unread&&a.addClass("unread").removeClass("newComment");1<b.permission?(a.addClass("editable"),a.find(".sne").attr("title","\u6309\u4f4f\u9f20\u6807\u62d6\u62d6\u770b")):(a.addClass("readonly"),a.find(".sne").attr("title","\u60a8\u65e0\u6743\u9650\u62d6\u52a8"));b.manager&&b.manager.username!=TEAMS.currentUser.username&&a.find(".user").html(b.manager.username);var e=$("#"+d+"-task-list");c&&"subordinates"==c&&(e=$("#sub-"+
d+"-task-list"));3===b.permission&&(a.find(".finish").attr("targetId",b.id),b.locked&&a.find(".finish").removeAttr("targetId"));"mine"==c&&b.relationflag&&a.find(".finish").attr("targetId",b.id);7!==b.permission&&31!==b.permission||a.find(".finish").attr("targetId",b.id);a.find(".j_name").text(b.name).attr("title",b.name);a.attr("data-id",b.id);1<b.permission&&a.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module","task").attr("targetId",
b.id);e.append(a)},renderStatus:function(a,b){"finished"==a?(b.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e \u6807\u8bb0\u672a\u5b8c\u6210'),b.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),b.find(".j_name").addClass("finished-line")):(b.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5b8c\u6210'),b.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),
b.find(".j_name").removeClass("finished-line"))},renderMainlineStatus:function(a,b){"open"==a?(b.find(".finish").html('\x3ci class\x3d"glyphicon icon-todo"\x3e\x3c/i\x3e \u6807\u8bb0\u5173\u95ed'),b.find(".finish").attr("status","open"),b.find(".j_name").removeClass("finished-line")):(b.find(".finish").html('\x3ci class\x3d"glyphicon icon-finished"\x3e\x3c/i\x3e \u91cd\u65b0\u6253\u5f00'),b.find(".finish").attr("status","close"),b.find(".j_name").addClass("finished-line"))},renderOneMainline:function(a){var b=
$("#mainline-clone").clone().attr("id",a.id).attr("data-id",a.id);a.status&&b.find(".finish").attr("status",a.status);7!==a.permission&&31!==a.permission||b.find(".finish").attr("targetId",a.id);a.watched?(b.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),b.find(".watch").attr("watched","true")):b.find(".watch").attr("watched","false");b.find(".watch").attr("targetId",a.id);b.find(".watch").attr("module","mainline");1<a.permission&&b.find(".share").addClass("selector-toggle").attr("data-entity",
"employee").attr("data-multi","true").attr("module","mainline").attr("targetId",a.id);a.newConment&&b.addClass("newComment");a.unread&&b.addClass("unread").removeClass("newComment");a.icon&&b.find("img").attr("src",a.icon);b.find(".j_name").html(this.filterHtmlTag(a.name)).attr("title",this.filterHtmlTag(a.name));a.percentFinished=a.percentFinished?a.percentFinished:0;var c=parseInt(100*a.percentFinished);b.find(".percent").html(c+"%");a.manager&&a.manager.name!=TEAMS.currentUser.username&&b.find(".leader").html(a.manager.username);
return b},createCalendar:function(a){var b=this,c=new p({entityModule:"agenda",entityId:"new",userId:b.userId,start:Date.create(a).getTime(),end:Date.create(a).getTime()+864E5,callbacks:{afterOpen:function(){$("#entitybox-container #title").focus()},afterOperate:function(){c.close();b.calendarView.seletedAddClass(a);$("#portal-container #calendar-list").trigger("refresh")}}});c.render()},switchTab:function(a,b){$("."+b+"-tab a").removeClass("active");$("."+b+"-tab a."+a).addClass("active").data("reload",
!0);var c="#"+b+"-list";"subordinates"==a?($("#"+b+"-list").addClass("hide"),$("#sub-"+b+"-list").removeClass("hide"),c="#sub-"+b+"-list"):($("#"+b+"-list").removeClass("hide"),$("#sub-"+b+"-list").addClass("hide"));"task"==b?($(c+" .notask").addClass("hide"),$(c+" #today-"+b+"-loading").removeClass("hide"),$(c+" #sub-today-"+b+"-loading").removeClass("hide"),$(c+" #tomorrow-"+b+"-loading").removeClass("hide")):($(c+" #sub-"+b+"-loading").removeClass("hide"),$(c+" #"+b+"-loading").removeClass("hide"))},
changeGroup:function(a,b,c){var d=this,e="",e=Date.create(TEAMS.nowTime);switch(b){case "today":e=e.format("{yyyy}-{MM}-{dd}");break;case "tomorrow":e=e.addDays(1).format("{yyyy}-{MM}-{dd}");break;default:e=e.format("{yyyy}-{MM}-{dd}")}var g=[];b&&(g.push({name:"dueDate",value:e}),$("#"+b+"-task-list").find(".notask").addClass("hide"));c&&g.push({name:"sn",value:c});d.taskmodel.id=a;d.taskmodel.changeProperties(g,function(){f.notify("\u4efb\u52a1\u62d6\u653e\u6210\u529f");d.changeDuedate(d.taskmodel.task)})},
dateSelected:function(a){var b=this;$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");b.portalModel.moduleSearch(b.userId,"","calendar",{date:Date.create(a).format("{yyyy}-{MM}-{dd}")},function(a){b.renderCalendar(a,a.type,!0)})},dateDbClick:function(a){this.createCalendar(a)},dateOtherMonth:function(a){var b=this;$("#calendar-list li").remove();$("#calendar-loading").removeClass("hide");$("#calendar-list .no-result").addClass("hide");
b.portalModel.moduleSearch(b.userId,"","calendar",{date:a,countSearch:!0},function(c){b.renderCalendar(c,c.type,!0);b.calendarView.seletedAddClass(a)})},changeDuedate:function(a){var b=$("#"+a.id),c=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(c);b.removeClass("hide");Date.create(c).is("today")?0==$("#today-task-list #"+a.id).size()&&b.appendTo($("#today-task-list")):Date.create(c).is("tomorrow")?0==$("#tomorrow-task-list #"+a.id).size()&&b.appendTo($("#tomorrow-task-list")):
b.addClass("hide");this.rebuildSN($("#tomorrow-task-list"));this.rebuildSN($("#today-task-list"))},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,"\x26gt").replace(/[\r\n]/g," ")},generateSN:function(a){var b=a.prev("li.j_task-item").attr("sn");a=a.next("li.j_task-item").attr("sn");if(b&&a)return Math.round((1*b+1*a)/2);if(a)return 1*a+1E3;if(b)return 1*b-1E3},rebuildSN:function(a){for(var b=a.children("li"),c=0;c<b.length;c++)$(b[c]).find(".sn-link").html(c+1);0==b.length?
(a.find(".notask").removeClass("hide"),a.find(".no-result").removeClass("hide")):(a.find(".notask").addClass("hide"),a.find(".no-result").addClass("hide"))},removeTarget:function(a,b){$("#"+a).trigger("remove")},changeTitle:function(a,b){$("#"+a).find(".j_name").html(this.filterHtmlTag(b)).attr("title",b)},changeStatus:function(a,b){var c=$("#"+a);this.renderStatus(b,c)},changeMainlineStatus:function(a,b){var c=$("#"+a);this.renderMainlineStatus(b,c)},changeWatch:function(a,b){var c=$("#"+a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),
c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e \u5173\u6ce8'),c.find(".watch").attr("watched","false"))},changeManager:function(a,b){a&&(a.username!=TEAMS.currentUser.username?$("#"+b+" .user").text(a.username):$("#"+b+" .user").text(""))},changeDuedate:function(a){var b=$("#"+a.id),c=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(c);b.removeClass("hide");Date.create(c).is("today")?0==$("#today-task-list #"+
a.id).size()&&b.appendTo($("#today-task-list")):Date.create(c).is("tomorrow")?0==$("#tomorrow-task-list #"+a.id).size()&&b.appendTo($("#tomorrow-task-list")):b.addClass("hide");this.rebuildSN($("#tomorrow-task-list"));this.rebuildSN($("#today-task-list"))},showModule:function(a){if(a)if($(this.el),"reset"==a.opt){if((a=a.checkedArr)&&0!=a.length){for(var b=!1,c=0;c<a.length;c++)this.showOneModule(a[c]),"1"==a[c].isShow&&(b=!0);b&&this.sortModule(a[0])}}else this.showOneModule(a),"1"==a.isShow&&this.sortModule(a)},
showOneModule:function(a){if(a&&a.id){var b=$(this.el);"1"==a.isShow?(b=b.find("#modules-section .j_portal-col[data-id\x3d"+a.id+"]"),b.length?b.removeClass("hide").find(".j_btn-refresh").trigger("click"):this.addModule(a)):b.find("#modules-section .j_portal-col[data-id\x3d"+a.id+"]").addClass("hide")}},addModule:function(a){var b=$(this.el).find("#modules-section");switch(a.id){case "1":b.append(f.template("portal.mainline",a));this.renderModule(this.userId,"mine","mainline",a);break;case "2":b.append(f.template("portal.task",
a));this.renderModule(this.userId,"mine","task",a);break;case "3":b.append(f.template("portal.createblog",a));a=$(this.el).find("#createblog-textarea");TEAMS.ownCache&&a.val(TEAMS.ownCache[this.createBlogCache+"#"+a.attr("data-type")]||"");this.initAttach();$(this.el).find("#createblog-textarea").emojiarea({buttonClass:"dynamic-feed-emoji",emojiHeight:-230,emojiLeft:-70,buttonChild:".j_tools"});break;case "4":b.append(f.template("portal.notice",a));this.renderModule(this.userId,"","notice",null);
break;case "5":b.append(f.template("portal.workflow",a));this.renderModule(this.userId,"mine","workflow",a);break;case "6":b.append(f.template("portal.calendar",a));this.renderModule(this.userId,"","calendar",{countSearch:!0});break;case "7":b.append(f.template("portal.customer",a));this.renderModule(this.userId,"update","customer",null);break;case "8":b.append(f.template("portal.document",a)),this.renderModule(this.userId,"update","document",a)}},sortModule:function(a){if(a&&a.arr&&0!=a.arr.length){var b=
a.arr;for(a=0;a<b.length;a++)switch(b[a]){case "1":$(this.el).find("#modules-section .j_portal_mainline").attr("data-sort",a);break;case "2":$(this.el).find("#modules-section .j_portal_task").attr("data-sort",a);break;case "3":$(this.el).find("#modules-section .j_portal_createblog").attr("data-sort",a);break;case "4":$(this.el).find("#modules-section .j_portal_notice").attr("data-sort",a);break;case "5":$(this.el).find("#modules-section .j_portal_workflow").attr("data-sort",a);break;case "6":$(this.el).find("#modules-section .j_portal_calendar").attr("data-sort",
a);break;case "7":$(this.el).find("#modules-section .j_portal_customer").attr("data-sort",a);break;case "8":$(this.el).find("#modules-section .j_portal_document").attr("data-sort",a)}b=$(this.el).find("#modules-section .j_portal-col");b.sort(function(a,b){return $(a).attr("data-sort")-$(b).attr("data-sort")});var c=$(this.el).find("#modules-section");c.empty();for(a=0;a<b.length;a++)c.append(b[a]);$(this.el+" #dynamicinfo").length&&(this.dynamicview&&this.dynamicview.remove(),this.dynamicview=new e({container:"#placard-comtainer"}),
this.dynamicview.render());$(this.el).find("#modules-section .j_portal-col").removeAttr("data-sort");$(this.el).find("#placard-createblog .dynamic-feed-emoji").length&&($(this.el).find("#placard-createblog .dynamic-feed-emoji").remove(),$(this.el).find("#createblog-textarea").emojiarea({buttonClass:"dynamic-feed-emoji",emojiHeight:-230,emojiLeft:-70,buttonChild:".j_tools"}))}},initAttach:function(){var a=this,b=$(this.el),c=this.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",
browse_button:"#placard-createblog #j_createblog_attach",container:"#placard-createblog",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?module\x3dblog\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});c.init();c.bind("FilesAdded",function(c,d){$.each(d,function(a,c){b.find("#createblog-attachments").append(f.template("base.newattachment",c))});b.find("#createblog-all-attachments").removeClass("hide");c.refresh();for(var e,g=b.find("#btn-createblog").attr("data-type"),
k="",l=0;l<d.length;l++)k+=d[l].name+"\uff0c";var k=k.substring(0,k.length-1),h=b.find("#createblog-textarea");if(0<h.length)for(var l=0,n=h.length;l<n;l++)if(!h.eq(l).hasClass("hide")){e=h.eq(l);break}e.val()?0<=e.val().indexOf("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a")&&(e.val(e.val()+"\uff0c"+k),a.showTips(e.val(),g)):(e.val("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a"+k),a.showTips(e.val(),g))});c.bind("UploadProgress",function(a,c){b.find("#"+c.id+" i").html(c.percent+"%")});c.bind("Error",function(a,
b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});c.bind("FileUploaded",function(a,c,d){a=jQuery.parseJSON(d.response).fileObj;b.find("#"+c.id+" i").html("100%");b.find("#"+c.id).data("fileObj",a).attr({"data-value":a.id,href:"/base/download/"+a.id})});c.bind("UploadComplete",function(c,d){var e=[];b.find("#createblog-attachments .entity-item a").each(function(a){a=
$(this).data("fileObj");e.push(a)});a.postBlog(e)})},postBlog:function(a){var b=this,c=$(b.el),d=c.find("#createblog-textarea"),e=c.find("#btn-createblog"),g=e.attr("data-type"),c={},k=d.val(),l=d.attr("placeholder");k==l&&(k="");if(1E3<k.length)f.notify("\u5185\u5bb9\u8fc7\u957f\uff0c\u5355\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc71000\u5b57"),e.attr("disabled",!1),d.focus();else if(""==$.trim(k))f.notify("\u8bf7\u586b\u5199\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\u3002"),e.attr("disabled",!1),d.focus();else{if(!k.isBlank()||
a)d.val("").trigger("autosize.resize"),c.content=k,c.attachments=a,b.dyncPublishModel.publishshare(c,g,function(a){e.attr("disabled",!1);a.errorMessage?f.notify(a.errorMessage):(d.val("").trigger("autosize.resize"),b.callback&&b.callback(a.blog),f.notify("\u53d1\u5e03\u6210\u529f!"),TEAMS.ownCache&&(TEAMS.ownCache[b.createBlogCache+"#"+g]=""),b.showTips(d.val(),g),b.emptyDetailCommands(),3>=TEAMS.currentTenant.usedLicense&&(b.inviteModalView=new v,$(b.inviteModalView.el).find(".modal-title").html("\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u9a6c\u4e0a\u9080\u8bf7\u81ea\u5df1\u7684\u540c\u4e8b\u6765\u52a0\u5165\uff0c\u4e00\u8d77\u4f53\u9a8c\u4e91\u529e\u516c\u534f\u4f5c"),
b.inviteModalView.render()),b.parent.trigger("refreshBlog",a.blog))});$(b.el).find(".j_post_"+g).data("userData","")}},showTips:function(a,b){var c=$(this.el);if(0<a.length){c.find(".j_createblog_tip").removeClass("hide");var d=this.getLengthTips(a,b);c.find(".j_createblog_length_tips").html(d)}else c.find(".j_createblog_tip").addClass("hide")},getLengthTips:function(a,b){var c="";"blog"==b||"share"==b?(c=1E3,c=a.length<=c?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+(c-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+
(a.length-c)+"\u5b57"):"feedback"==b&&(c=2E3,c=a.length<=c?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+(c-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+(a.length-c)+"\u5b57");return c},emptyDetailCommands:function(){var a=$(this.el);a.find("#createblog-attachments").empty();a.find("#createblog-all-attachments").addClass("hide")},remove:function(){$(this.el).off(".MiniModule")}});m.exports=h});
define("teams/portal/dynachannelview","teams/utils teams/portal/dynachannelmodel teams/component/commentmodel teams/base/preview teams/blog/blogmodel teams/portal/dyncpublishview teams/face/emojiarea".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/portal/dynachannelmodel"),c=h("teams/component/commentmodel"),b=h("teams/base/preview"),a=h("teams/blog/blogmodel"),d=h("teams/portal/dyncpublishview"),g=h("teams/face/emojiarea");h=Backbone.View.extend({moduleType:{task:{create:"\u521b\u5efa\u4e86\u4efb\u52a1",
comment:"\u8bc4\u8bba\u4e86\u4efb\u52a1",finish:"\u5c06\u4efb\u52a1\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5b8c\u6210",reopen:"\u5c06\u4efb\u52a1\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u672a\u5b8c\u6210"},document:{create:"\u65b0\u589e\u4e86\u6587\u6863",comment:"\u8bc4\u8bba\u4e86\u6587\u6863"},customer:{create:"\u521b\u5efa\u4e86\u5ba2\u6237",comment:"\u8bc4\u8bba\u4e86\u5ba2\u6237"},workflow:{create:"\u53d1\u8d77\u4e86\u5ba1\u6279",comment:"\u8bc4\u8bba\u4e86\u5ba1\u6279",accept:"\u540c\u610f\u4e86{}\u5ba1\u6279",
reject:"\u9000\u56de\u4e86{}\u5ba1\u6279"},mainline:{create:"\u521b\u5efa\u4e86\u9879\u76ee",comment:"\u8bc4\u8bba\u4e86\u9879\u76ee",closeml:"\u5c06\u9879\u76ee\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u5df2\u5173\u95ed",openml:"\u5c06\u9879\u76ee\u7684\u72b6\u6001\u4fee\u6539\u4e3a\u6253\u5f00"},workreport:{create:"\u521b\u5efa\u4e86\u5de5\u4f5c\u62a5\u544a",comment:"\u8bc4\u8bba\u4e86\u5de5\u4f5c\u62a5\u544a"},agenda:{create:"\u521b\u5efa\u4e86\u65e5\u7a0b",comment:"\u8bc4\u8bba\u4e86\u65e5\u7a0b"},
production:{create:"\u521b\u5efa\u4e86\u4ea7\u54c1",comment:"\u8bc4\u8bba\u4e86\u4ea7\u54c1"},saleChance:{create:"\u521b\u5efa\u4e86\u5546\u673a",comment:"\u8bc4\u8bba\u4e86\u5546\u673a"}},initialize:function(b){g($);this.el=b.el||"#j_communi-body";this.commentModel=new c({});this.blogModel=new a(b);this.model=new e;this.userId=b.userId||TEAMS.currentUser.id;this.isLoading=!1;this.pageNo=1;this.hasNextPage=!0;this.addPraiseNum=!1;this.unRead=b.unRead;this.workType=b.workType||"workAll";this.creator=
b.creator||0;this.range=b.range||"company";this.departmentId=b.departmentId||0;this.keywords=b.keywords;this.isFirst=b.isFirst;this.endDate=b.endDate;this.filter={workType:this.workType,range:this.range};0<this.departmentId&&(this.filter.departmentId=this.departmentId);0<this.creator&&(this.filter.creator=this.creator);this.keywords&&(this.filter.keywords=this.keywords);this.endDate&&(this.filter.endDate=this.endDate);$(this.el).html(f.template("portal.dynachannel"))},delegateEvents:function(){var a=
this,b=$(this.el);b.on("click.dynachannel",".js_blogimgs .js_blog_atta_image a",function(a){var b=$(this).parent().parent(),c=$(this).data("url");f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",function(a){a&&$.ajax({type:"POST",dataType:"json",data:{_method:"delete"},url:c,success:function(a){a.actionMsg?f.notify(a.actionMsg.message):(b.remove(),f.notify("\u6570\u636e\u5df2\u5220\u9664"))}})})});b.on("click.dynachannel",".j_dyna-card-list .j_feedback",function(){var b=$(this),c=b.parents(".j_dyna-card");
b.parents(".j_opt").find(".j_a-like").hasClass("selected")&&(c.find(".j_more-wrapper").slideUp(),b.parents(".j_opt").find(".j_a-like").removeClass("selected"));b.hasClass("selected")?(b.removeClass("selected"),c.find(".card-feed").slideUp()):(b.addClass("selected"),b.data("loaded")?c.find(".card-feed").slideDown(function(){$(this).find(".feed-post textarea").focus()}):(c.find(".card-feed").show(),b.find(".feed-post textarea").focus(),a.loadComment(c,function(){b.data("loaded",!0);c.find(".j_feed-list").slideDown()})),
0==c.find(".dynamic-feed-emoji").length&&c.find(".j_feedAuto").emojiarea({buttonClass:"dynamic-feed-emoji",emojiHeight:-230,emojiLeft:-70,buttonRoot:'div[data-target-id\x3d"'+c.attr("data-target-id")+'"]',buttonChild:".j_feedBtn"}))});b.on("click.dynachannel",".j_dyna-card .card-feed .j_more",function(){a.loadComment($(this).parents(".j_dyna-card"))});b.on("click.dynachannel",".j_dyna-card-list .j_item-feedback",function(){var a=$(this).parents(".j_dyna-feed-item").find(".feed-post"),b=a.is(":hidden");
$(this).parents(".j_feed-list").find(".feed-post").hide();b&&(a.show().find("textarea").focus(),0==a.show().find(".dynamic-comment-emoji").length&&a.show().find(".j_feedAuto").emojiarea({buttonClass:"dynamic-comment-emoji",emojiHeight:-230,emojiLeft:-70,buttonRoot:'li[data-comment-id\x3d"'+$(this).parents(".j_dyna-feed-item").attr("data-comment-id")+'"]',buttonChild:".j_feedBtn"}))});b.on("click.dynachannel",".j_dyna-card-list .j_like .j_praise",function(){if(!a.addPraiseNum){a.addPraiseNum=!0;var b=
$(this),c=b.parents(".j_dyna-card").data("target-id"),d=b.parents(".j_dyna-card").data("module"),e=parseInt(b.find("em").html())||0,g={};g.entityId=c;g.userId=a.userId;g.module=d;a.model.praise({praise:g},function(c){c.hasPraise?(b.find("em").html(0==e?0:e-1),b.attr("title","\u70b9\u8d5e")):(b.find("em").html(e+1),b.attr("title","\u53d6\u6d88\u70b9\u8d5e"));a.addPraiseNum=!1;var d=b.parents(".j_a-like");d.find(".j_like-avatars").children(".j_li_praise").remove();3<b.find("em").text()?0==d.find("#j_more-avatars").length&&
d.find(".j_like-avatars").append($('\x3cli id\x3d"j_more-avatars" title\x3d"\u66f4\u591a"\x3e\x3ca class\x3d"more"\x3e\x3ci class\x3d"icon-ellipsis"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e')):d.find(".j_like-avatars").empty();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=3;a.renderPraiseImg(d,c,function(a){a&&(d.find(".j_like-avatars").prepend($(a.html)),0==a.count&&d.find(".like-pop").css({display:"none",opacity:0}))})})}});b.on("click.dynachannel",".j_dyna-card\x3e.card-feed\x3e.feed-post .send",
function(){var b=$(this),c=b.parents(".j_dyna-card").data("targetId"),d=b.parents(".j_dyna-card").data("module"),e=b.parents(".j_dyna-card").data("refId");b.parents(".j_dyna-card").data("type");var g=b.parents(".j_feedWrap").find(".j_feedInput textarea").val(),g={"comment.targetId":e,"comment.module":d,"comment.content":g};g["comment.targetId"]="blog"==d||"share"==d?c:e;b.parents(".j_feedWrap").find(".j_feedInput textarea").val("").trigger("autosize.resize");a.commentModel.save(function(c){if(c.comment){c=
a.renderOneComment(c.comment);var d=b.parents(".j_dyna-card").find(".j_opt .a-feedback em");d.text(parseInt(d.html())+1);b.parents(".feed-post").siblings(".j_feed-list").prepend(c);c.find(".j_feedInput textarea").autosize()}},g)});b.on("click.dynachannel",".j_dyna-card\x3e.card-feed\x3e.j_feed-list .send",function(){var b=$(this),c=b.parents(".j_dyna-card").data("targetId"),d=b.parents(".j_dyna-card").data("refId"),e=b.parents(".j_dyna-card").data("module"),g=b.parents(".j_dyna-feed-item").data("commentId"),
f=b.parents(".j_feedWrap").find(".j_feedInput textarea").val();b.parents(".j_feedWrap").find(".j_feedInput textarea").val("").trigger("autosize.resize");g={"comment.module":e,"comment.content":f,"comment.parent.id":g};g["comment.targetId"]="blog"==e||"share"==e?c:d;a.commentModel.save(function(c){if(c.comment){var d=a.renderOneComment(c.comment);c=b.parents(".j_dyna-card").find(".j_opt .a-feedback em");c.text(parseInt(c.html())+1);b.parents(".feed-post").slideUp(function(){b.parents(".j_feed-list").prepend(d);
d.find(".j_feedInput textarea").autosize()})}},g)});b.on("mouseenter.dynachannel",".j_a-like",function(){var c=$(this).find(".like-pop");c.find(".j_like-avatars").empty();var d={};d.entityId=$(this).parents(".j_dyna-card").data("target-id");3<$(this).find("em").text()&&$(this).find(".j_like-avatars").append($('\x3cli id\x3d"j_more-avatars" title\x3d"\u66f4\u591a"\x3e\x3ca class\x3d"more"\x3e\x3ci class\x3d"icon-ellipsis"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/li\x3e'));d.pageSize=3;a.renderPraiseImg(c,d,function(a){a&&
(a.isMoreShow||b.find("#j_more-avatars").addClass("hide"),0!=(a.count||0)&&(c.find(".j_like-avatars").prepend($(a.html)),c.css({display:"block",opacity:0}).stop().animate({opacity:1})))})}).on("mouseleave.dynachannel",".j_a-like",function(){var a=$(this).find(".like-pop"),b=$(this),c=setTimeout(function(){b.find(".like-pop").stop().animate({opacity:0}).css({display:"none",opacity:0})},300);a.data("showTimer",c)});b.on("mouseenter.dynachannel",".j_like-pop",function(a){a.stopPropagation();(a=$(this).data("showTimer"))&&
clearTimeout(a)}).on("mouseleave.dynachannel",".j_like-pop",function(a){a.stopPropagation();$(this).removeData("showTimer");$(this).animate({opacity:0},function(){$(this).css({display:"none"})})});b.on("click.dynachannel","#j_more-avatars",function(b){b=$(this);b.parents(".j_opt").find(".j_feedback").hasClass("selected")&&(b.parents(".j_dyna-card").find(".card-feed").slideUp(),b.parents(".j_opt").find(".j_feedback").removeClass("selected"));if(b.parents(".j_like").hasClass("selected"))b.parents(".j_like").removeClass("selected"),
b.parents(".card-detail").siblings(".j_more-wrapper").find(".j_li_praise").remove(),b.parents(".card-detail").siblings(".j_more-wrapper").slideUp();else{var c=b.parents(".j_like").find("em").text();if(b.siblings().length>=c)f.notify("\u70b9\u8d5e\u6570\u5c11\u4e8e4\u4e2a");else{b.parents(".j_like").addClass("selected");var d=b.parents(".card-detail").siblings(".j_more-wrapper"),e=d.find(".j_like-wrapper");e.children(".j_li_praise").remove();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");
c.pageSize=40;a.renderPraiseImg(b,c,function(b){b&&(e.prepend($(b.html)),40>=(b.count||0)?d.find(".j_like-pager").addClass("hide"):(d.find(".j_like-pager").removeClass("hide"),d.find(".j_like-pager .j_li_page").remove(),d.find(".j_like-pager .j_last_page").after($(a.renderPraisePages(b)))))});d.slideDown()}}});b.on("click.dynachannel",".j_li_page",function(b){b=$(this);b.addClass("active");b.siblings().removeClass("active");a.renderLastNextPage(b);var c={};c.entityId=b.parents(".j_dyna-card").data("target-id");
c.pageSize=40;c.pageNo=b.find("a").text();a.renderMorePraise(b,c)});b.on("click.dynachannel",".j_change_page",function(b){b=$(this);if(!b.hasClass("disabled")){var c=b.siblings(".active");c.removeClass("active");var d;b.hasClass("j_last_page")?d=c.prev():b.hasClass("j_next_page")&&(d=c.next());a.renderLastNextPage(d);d.addClass("active");d=d.find("a").text();c={};c.entityId=b.parents(".j_dyna-card").data("target-id");c.pageSize=40;c.pageNo=d;a.renderMorePraise(b,c)}});b.on("mouseenter.dynachannel",
".j_unreadBlog_card",function(b){var c=$(this);a.blogModel.readOne(c.attr("data-target-id"),c.find(".j_new").data("type"),function(b){c.find(".j_new").remove();c.removeClass("j_unreadBlog_card");a.minusCount()})})},renderPraiseImg:function(a,b,c){this.model.queryPraiseUser(b,function(a){var b="",d=!1;a&&a.praisePage&&a.praisePage.result&&(_.each(a.praisePage.result,function(a){a=a.entityUser;var c=a.name,d=a.id;b=a.avatar&&a.avatar.p5?b+('\x3cli class\x3d"j_li_praise"\x3e\x3ca userid\x3d"'+d+'" class\x3d"usercard-toggle" data-value\x3d"'+
d+'" title\x3d"'+c+'"\x3e\x3cimg src\x3d"/base/download/'+a.avatar.p5+'" /\x3e\x3c/a\x3e\x3c/li\x3e'):b+('\x3cli class\x3d"j_li_praise"\x3e\x3ca userid\x3d"'+d+'" class\x3d"usercard-toggle" data-value\x3d"'+d+'" title\x3d"'+c+'"\x3e\x3cimg src\x3d"images/avatar.png" /\x3e\x3c/a\x3e\x3c/li\x3e')}),3<a.praisePage.result.length&&(d=!0));var e={};e.praisePage=a.praisePage;e.count=a.count;e.html=b;e.isMoreShow=d;c&&c(e)})},renderMorePraise:function(a,b){var c=a.parents(".j_more-wrapper").find(".j_like-wrapper");
c.children(".j_li_praise").remove();this.renderPraiseImg(a,b,function(a){a&&c.prepend($(a.html))})},renderLastNextPage:function(a){var b=a.prev(),c=a.next();a.find("a").text();b.hasClass("j_last_page")?(b.addClass("disabled"),a.siblings(".j_next_page").removeClass("disabled")):a.siblings(".j_last_page").removeClass("disabled");c.hasClass("j_next_page")?(a.siblings(".j_last_page").removeClass("disabled"),c.addClass("disabled")):a.siblings(".j_next_page").removeClass("disabled")},renderPraisePages:function(a){if(a){a=
a.praisePage.totalPages;for(var b="",c=1;c<=a;c++)b=1==c?b+('\x3cli class\x3d"active j_li_page"\x3e\x3ca\x3e'+c+"\x3c/a\x3e\x3c/li\x3e"):b+('\x3cli class\x3d"j_li_page"\x3e\x3ca\x3e'+c+"\x3c/a\x3e\x3c/li\x3e");return b}},renderWorkDynas:function(a,b){var c=this;if(!c.isLoading&&c.hasNextPage){c.isLoading=!0;$(c.el).find(".j_card-loading").show();$(c.el).find(".j_nodata").hide();a=parseInt(a)||1;1==a&&$(c.el).find(".j_dyna-card-list").empty();var d=c.filter,e="unreadblog"==$("#j_communi-content .j_channel_hd").not(".hide").attr("type");
e&&(d.type=c.unRead?"unRead":"read");this.model.searchWorkDyna({workDynaFilter:d,pageNo:a,pageSize:25},function(a){a=a.workDynaPage;e&&c.isFirst&&1==a.pageNo&&0==a.result.length?(c.isLoading=!1,$("#j_communi-main #j_message .j_dynamicTab li.j_read").trigger("click")):(a&&a.result&&_.each(a.result,function(a){a=c.renderOneWorkDynas(a);$(c.el).find(".j_dyna-card-list").append(a);a.find(".j_feedInput textarea").autosize()}),$(c.el).find(".j_card-loading").hide(),c.pageNo=a.pageNo||1,c.hasNextPage=a.result.length==
a.pageSize,1==a.pageNo&&0==a.result.length?$(c.el).find(".j_nodata").show():1>=TEAMS.currentTenant.usedLicense&&($("#j_communi-content").removeClass("hide"),$("#j_communicate-holder").addClass("hide")),c.isLoading=!1,b&&b())})}},renderOneWorkDynas:function(a){if(a){var b=$(this.el).find("#dynamic-card").clone().removeAttr("id"),c=a.creator,d=a.hasGranted;b.attr("data-target-id",a.id);b.attr("data-type",a.type);b.attr("data-ref-id",a.refId);a.module?b.attr("data-module",a.module):"blog"==a.type?b.attr("data-module",
"blog"):"share"==a.type&&b.attr("data-module","share");c&&c.avatar&&c.avatar.p3&&b.find(".j_avatar img").attr("src","/base/download/"+c.avatar.p3);TEAMS.currentUser.avatar&&TEAMS.currentUser.avatar.p3&&b.find(".feed-post .avatar img").attr("src","/base/download/"+TEAMS.currentUser.avatar.p3);b.find(".feed-post .avatar img").attr("title",TEAMS.currentUser.name);b.find(".feed-post .avatar").attr("userid",TEAMS.currentUser.id);b.find(".card-detail .j_name").text(c.name);b.find(".card-detail .j_name").attr("userid",
c.id);b.find(".j_avatar").attr("userid",c.id);b.find(".card-detail time").text(Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));d?("blog"==a.type&&a.read&&b.addClass("j_unreadBlog_card").find("span.j_new").data("type","unread").removeClass("hide"),"share"==a.type?(c=a.praiseCount||0,d=1==a.hasPraise?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e",b.find(".card-detail .j_opt .j_feedback em").text(a.commentCount),b.find(".card-detail .j_opt .j_like .j_praise").attr("title",d),b.find(".card-detail .j_opt .j_like em").text(c),
b.find(".card-detail .j_opt .j_a-like").removeClass("hide")):(b.find(".card-detail .j_opt .j_a-like").addClass("hide"),b.find(".card-detail .j_opt .j_feedback em").text(a.commentCount)),b.find(".card-detail .j_opt .j_feedback").removeClass("hide")):(b.find(".card-detail .j_opt").addClass("hide"),b.find(".card-detail .j_opt .j_a-like").addClass("hide"),b.find(".card-detail .j_opt .j_feedback").addClass("hide"));this.generateWodrkDyna(a,b);this.renderAttachments(a,b.find(".js_blogallfiles"));return b}},
generateWodrkDyna:function(a,b){var c="calendar"==a.module?"agenda":a.module,d=a.hasGranted,e=a.type,g=b.find(".card-detail .j_event"),h=b.find(".card-detail .j_content"),w="",v="";switch(e){case "share":v=d?$.faceConvert(this.renderAt(a)):"\u53d1\u5e03\u4e86\u4e00\u7bc7\u5206\u4eab";break;case "blog":e=Date.create(a.blogTime);e=e.isThisYear()?e.format("{MM}\u6708{dd}\u65e5"):e.format("{yyyy}\u5e74{MM}\u6708{dd}\u65e5");d?(w="\u53d1\u5e03\u4e86"+e+"\u7684\u5de5\u4f5c\u65e5\u62a5",v=a.content?$.faceConvert(f.initMessage(a.content)):
""):v="\u53d1\u5e03\u4e86"+e+"\u7684\u5de5\u4f5c\u65e5\u62a5";break;default:var v=a.refCreator?$('\x3ca class\x3d"usercard-toggle"\x3e\x3c/a\x3e').attr("userid",a.refCreator.id).text(a.refCreator.name).prop("outerHTML")+"\u521b\u5efa\u7684":"",x=$('\x3ca class\x3d"blog-obj j_entityslider-toggle filterSlip_js"\x3e\x3c/a\x3e').attr({userid:this.userId,"data-id":a.refId,"data-module":c,title:a.title}).text(a.title).prop("outerHTML"),c=this.moduleType[c][e];d?(w=c.replace("{}",v),"comment"==e?(w=w+"\uff1a"+
x,v=a.content?$.faceConvert(f.initMessage(a.content)):""):v=x):v=c.replace("{}","")}g.html(w);h.html(v)},renderAttachments:function(a,c){if(a){for(var d=a.attachments||[],e=a.imageFiles||[],g=0;g<d.length;g++){var h=d[g];c.children(".js_blogfiles").prepend(f.template("base.attachment",h));c.find("#"+h.id).children().addClass("remoteDownload").data("dlid",h.id);(new b({container:c,afterJqObj:c.find("#"+h.id).children(),fileObj:h})).render()}for(g=0;g<e.length;g++)if((d=e[g])&&d.big&&d.image&&d.small){var h=
d.id,u=d.bigUrl,w=d.imageUrl,v=d.smallUrl,x=[];x.push(u);x.push(w);x.push(v);var y=$("#blog-atta-image-clone").clone(!0);y.find("span").html("\x3cimg  class\x3d'artZoom' data-artZoom-show\x3d'/base/download/"+u+"' data-artZoom-source\x3d'/base/download/"+w+"' src\x3d'/base/download/"+v+"'\x3e");y.append("\x3cp\x3e"+d.name+" \x3ca data-url\x3d/blog/deleteAttachments/"+h+".json\x3e\u5220\u9664\x3c/a\x3e\x3c/p\x3e");y.find("a").data({idArray:x,imageId:w});y.find(".artZoom").artZoom();y.removeClass("hide");
y.removeAttr("id");c.children(".js_blogimgs").prepend(y)}a.creator&&a.creator.id!=TEAMS.currentUser.id&&(c.find(".entity-item").attr("undeletable",!0),c.find(".js_blogimgs .js_blog_atta_image a").remove())}},loadComment:function(a,b){var c=this;a.find(".j_loading").removeClass("hide");a.find(".j_more").addClass("hide");var d=a.data("type");c.commentModel.targetId="blog"==d||"share"==d?a.data("targetId"):a.data("refId");d=parseInt(a.data("pageNo"))||0;c.commentModel.pageNo=d+1;c.commentModel.pageSize=
10;c.commentModel.pageQuery({},function(d){var e=d&&d.page&&d.page.result;e&&(_.each(e,function(b){b=c.renderOneComment(b);a.find(".j_feed-list").append(b);b.find(".j_feedInput textarea").autosize()}),a.data("pageNo",d.page.pageNo),a.find(".j_loading").addClass("hide"),d.page.hasNext&&a.find(".j_more").removeClass("hide"),b&&b())})},renderOneComment:function(a){if(a){var c=$(this.el).find("#dyna-feed-item").clone().removeAttr("id"),d=a.commentor;c.attr("data-comment-id",a.id);d&&d.avatar&&d.avatar.p4&&
c.find("\x3e.avatar img").attr("src","/base/download/"+d.avatar.p4);c.find("\x3e.avatar").attr("userid",d.id);c.find(".name").html(d.name);c.find(".name").attr("userid",d.id);a.parent&&a.parent.commentor&&a.parent.commentor.username&&(c.find(".parent-comment-body").removeClass("hide"),c.find(".parent-username").html("@"+a.parent.commentor.username+": ").attr("title",a.parent.commentor.username).show(),c.find(".parent-content").html($.faceConvert(f.initMessage(a.parent.content))).attr("title",a.parent.content),
c.find(".parent-username").attr("userId",a.parent.commentor.id));c.find(".content").html($.faceConvert(this.renderAt(a)));c.find("time").html(Date.create(a.addTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));TEAMS.currentUser.avatar&&TEAMS.currentUser.avatar.p4&&c.find(".feed-post .avatar img").attr("src","/base/download/"+TEAMS.currentUser.avatar.p4);if(a.attachments)for(var d=0,e=a.attachments.length;d<e;d++){var g=a.attachments[d];c.find(".comment-attachment").append(f.template("base.attachment",
g));c.find("#"+g.id).children().addClass("remoteDownload").attr("data-dlid",g.id);(new b({container:c,afterJqObj:c.find("#"+g.id).children(),fileObj:g,rel:a.id})).render()}return c}},renderAt:function(a){var b=a.content,c={};if(a.userData&&(a=eval(a.userData)))for(var d=0;d<a.length;d++)a[d]&&(a[d].userIdIndex&&0!=a[d].userIdIndex?(b=b.substring(0,a[d].userIdIndex-1)+"@"+a[d].userName+b.substring(a[d].userIdIndex-1),c["@"+a[d].userName]="\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+a[d].userId+
"'\x3e@"+a[d].userName+"\x3c/a\x3e"):$feedItem.find("#show_at_comment").prepend("\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+a[d].userId+"'\x3e@"+a[d].userName+"\x3c/a\x3e"));b=f.initMessage(b);for(d in c)b=b.replace(d,c[d]);return b},render:function(){$(this.el);this.renderContent()},renderContent:function(){var a=this;this.renderWorkDynas();f.layout("#j_all-dynamic",{whileScrolling:function(){TEAMS.ownCache["portal.mcsTop"]=this.mcs.top},onTotalScrollOffset:800,onTotalScroll:function(){a.renderWorkDynas(a.pageNo+
1)}},[{gotoTopButton:!0}]);0>=parseInt(a.creator)&&("share"==this.workType||"shareAtme"==this.workType||"shareReplay"==this.workType||"likeme"==this.workType||"mine"==this.workType)&&(a.dyncpublishView=new d({container:"#j_dynamic-post",userId:this.userId,postcallback:function(b){if(b){b.read=!0;var c=$(a.el).find(".j_dyna-card-list .j_dyna-card");if(c)for(var d=0,e=c.length;d<e;d++)if($(c[d]).data("target-id")==b.id){$(c[d]).remove();break}b=a.renderOneWorkDynas(b);$(a.el).find(".j_dyna-card-list").prepend(b)}}}),
a.dyncpublishView.render())},minusCount:function(){var a=$("#memberlist-wrapper #j_unreadBlogCount_item"),b=a.data("numberCount"),c=99<parseInt(b)-1?"99+":parseInt(b)-1,b=0>=parseInt(b)-1?0:parseInt(b)-1;a.find(".count").text(0>=c?"":c).attr("title",b);a.data("numberCount",b)},refreshBlog:function(a){if(a){var b=$(this.el);if("blog"==this.workType||"workAll"==this.workType){var c=b.find(".j_dyna-card-list .j_dyna-card");if(c)for(var d=0,e=c.length;d<e;d++)if($(c[d]).data("target-id")==a.id){$(c[d]).remove();
break}a=this.renderOneWorkDynas(a);b.find(".j_dyna-card-list").prepend(a)}}},remove:function(){$(this.el).off(".dynachannel")}});m.exports=h});
define("teams/portal/portalmodel",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.Model.extend({search:function(e,c){e=e||TEAMS.currentUser.id;$.ajax({url:"/portal/"+e+".json",type:"get",dataType:"json",data:{},success:function(b){c&&c(b)}})},moduleSearch:function(e,c,b,a,d){e=e||TEAMS.currentUser.id;var g="/portal/"+b+"s.json";"blog"==b&&"subordinates"==c&&(g="/portal/subblog.json");a||(a={});a.type=c;a.userId=e;$.ajax({url:g,type:"get",dataType:"json",data:a,success:function(a){d&&
d(a)}})},updateStatus:function(e,c,b){var a={};a.status=e;a.ids=c;$.ajax({type:"get",url:"/task/updateStatus.json",dataType:"json",data:a,success:function(a){b&&b(a)}})},searchWorkDyna:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/workdyna.json",type:"post",dataType:"json",data:JSON.stringify(e),success:function(b){c&&c(b)}})},renderCount:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/renderCount.json",type:"post",dataType:"json",
data:JSON.stringify(e),success:function(b){c&&c(b)}})},departmentSearch:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/departmentSearch.json",type:"post",dataType:"json",data:JSON.stringify(e),success:function(b){c&&c(b)}})},praise:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/portal/praise.json",type:"post",dataType:"json",data:JSON.stringify(e),success:function(b){c&&c(b)}})},queryPraiseUser:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",
url:"/portal/queryPraiseUser.json",type:"post",dataType:"json",data:JSON.stringify(e),success:function(b){c&&c(b)}})},saveConfig:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/base/configuration/saveConfig.json",dataType:"json",data:JSON.stringify({config:e}),success:function(b){b.actionMsg?f.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):c&&c()}})},updateConfigValue:function(e,c){$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/base/configuration/updateConfigValue.json",dataType:"json",data:JSON.stringify({config:e}),success:function(b){b.actionMsg?f.nofity("\u4fdd\u5b58\u7528\u6237\u914d\u7f6e\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):c&&c()}})},getDeptName:function(e,c){$.ajax({type:"get",url:"/base/department/"+e+".json",dataType:"json",data:"",success:function(b){c&&c(b)}})},updateMainlineStatus:function(e,c,b){c&&$.ajax({type:"post",dataType:"json",url:"/mainline/"+c+".json",
data:e,success:function(a){b&&b(a)}})}});m.exports=h});define("teams/portal/chatdocview",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.el=e.container||"#j_communi-body";this.userId=e.userId;$(this.el).html(f.template("portal.chatdoc"))},delegateEvents:function(){},render:function(){},remove:function(){$(this.el).off(".chatdoc")}});m.exports=h});
define("teams/portal/portalpage",["teams/core/page","teams/portal/newportalview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/portal/newportalview");h=q.extend({initialize:function(e){e=e.options||e;this.pageKey=e.pageKey;this.reloadPage=e.reloadPage;this.options=e;this.pageActive="portal";this.channel=e.channel},delegateEvents:function(){this.on("remove",function(e,c){this.mainView.miniModuleView&&this.mainView.miniModuleView.removeTarget(e,c)});this.on("changeStatus",function(e){this.mainView.miniModuleView&&
this.mainView.miniModuleView.changeStatus(e.id,e.status)});this.on("changeMainlineStatus",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeMainlineStatus(e.id,e.status)});this.on("changeWatch",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeWatch(e.id,e.watched)});this.on("changeTitle",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeTitle(e.id,e.title)});this.on("changeDuedate",function(e){this.mainView.miniModuleView&&
this.mainView.miniModuleView.changeDuedate(e)});this.on("changeManager",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeManager(e.manager,e.id)});this.on("sliderChangeTitle",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeTitle(e.id,e.title)});this.on("changeMainlineManager",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.changeManager(e,e.id)});this.on("showModule",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.showModule(e)});
this.on("sortModule",function(e){this.mainView.miniModuleView&&this.mainView.miniModuleView.sortModule(e)});this.on("showChat",function(e){$("#j_communi-menu").trigger("showRecent",{channel:"employee",entity:e})})},render:function(){this.initLayout();this.mainView=new f(this.options);this.mainView.render();this.subView={remove:function(){},off:function(){}}},renderSubview:function(){$("#j_communi-menu").trigger("showRecent",{channel:this.channel})}});m.exports=h});
define("teams/portal/dyncpublishview","teams/face/emojiarea teams/utils teams/portal/dyncpublishmodel teams/component/invitemodalview teams/component/atmeview teams/component/relevanceview".split(" "),function(h,q,m){var f=h("teams/face/emojiarea"),e=h("teams/utils"),c=h("teams/portal/dyncpublishmodel"),b=h("teams/component/invitemodalview"),a=h("teams/component/atmeview"),d=h("teams/component/relevanceview");h=Backbone.View.extend({initialize:function(b){f($);this.container=b.container;this.userId=
b.userId;this.postcallback=b.postcallback;this.model=new c;this.userId||(this.userId=TEAMS.currentUser.id);this.el=b.container?b.container:"#j_dynamic-post";$(this.container).html(e.template("portal.dyncpublish"));this.shareAtmeview=new a({$input:$(this.el+" #share-textarea")});$(this.el+" #share-textarea").emojiarea({buttonClass:"dynamic-emoji",emojiHeight:-210,emojiLeft:-70,buttonParent:".j_post-row"})},delegateEvents:function(){var a=this,b=$(this.container),c=this.uploader=new plupload.Uploader({runtimes:"html5,flash",
file_data_name:"data",browse_button:"#j_post-area #dync-post-attach",container:"#j_post-area",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/base/upload.json?module\x3dblog\x26ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});c.init();c.bind("FilesAdded",function(c,d){$.each(d,function(a,c){b.find("#dync-attachments").append(e.template("base.newattachment",c))});b.find("#all-attachments").removeClass("hide");c.refresh();for(var f,h=b.find("#btn-dync").attr("data-type"),
n="",w=0;w<d.length;w++)n+=d[w].name+"\uff0c";var n=n.substring(0,n.length-1),v=b.find("#j_dync-area textarea");if(0<v.length)for(var w=0,x=v.length;w<x;w++)if(!v.eq(w).hasClass("hide")){f=v.eq(w);break}f.val()?0<=f.val().indexOf("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a")&&(f.val(f.val()+"\uff0c"+n),a.showTips(f.val(),h)):(f.val("\u4e0a\u4f20\u4e86\u6587\u4ef6\uff1a"+n),a.showTips(f.val(),h))});c.bind("UploadProgress",function(a,c){b.find("#"+c.id+" i").html(c.percent+"%")});c.bind("Error",function(a,
b){-600==b.code&&e.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});c.bind("FileUploaded",function(a,c,d){a=jQuery.parseJSON(d.response).fileObj;b.find("#"+c.id+" i").html("100%");b.find("#"+c.id).data("fileObj",a).attr({"data-value":a.id,href:"/base/download/"+a.id})});c.bind("UploadComplete",function(c,d){var e=[];b.find("#dync-attachments .entity-item a").each(function(a){a=
$(this).data("fileObj");e.push(a)});a.postBlog(e)});b.off("click.DyncPublishView",".dyncpublish-tab a").on("click.DyncPublishView",".dyncpublish-tab a",function(){$(this).addClass("active");$(this).siblings().removeClass("active");var b=$(this).attr("data-type"),c=$(this).parent().next(),d=c.find(".j_post_"+b);c.find("#btn-dync").attr("data-type",b);d.removeClass("hide");d.siblings().addClass("hide");a.emptyDetailCommands();d.focus();c.find("#j_post-area").slideDown(200).end().addClass("active");
"share"==b?(c.find("#j_post-area .j_share_area").removeClass("hide"),c.find(".j_feedback_area").addClass("hide"),c.find("#btn-dync").text("\u53d1\u5e03 "),c.find(".dynamic-blog-emoji").addClass("hide"),c.find(".dynamic-feedback-emoji").addClass("hide"),$("body").find(".dynamic-share-emoji").each(function(){$(this).remove()})):"blog"==b?(c.find("#j_post-area .j_share_area").addClass("hide"),c.find(".j_feedback_area").addClass("hide"),c.find("#btn-dync").text("\u53d1\u5e03 "),c.find(".dynamic-share-emoji").addClass("hide"),
c.find(".dynamic-feedback-emoji").addClass("hide"),$("body").find(".dynamic-blog-emoji").each(function(){$(this).remove()})):"feedback"==b&&(c.find("#j_post-area .j_share_area").addClass("hide"),c.find(".j_feedback_area").removeClass("hide"),c.find("#btn-dync").text("\u63d0\u4ea4 "),c.find(".dynamic-share-emoji").addClass("hide"),c.find(".dynamic-blog-emoji").addClass("hide"),$("body").find(".dynamic-feedback-emoji").each(function(){$(this).remove()}));c="";0<navigator.userAgent.indexOf("MSIE")&&
(0<navigator.userAgent.indexOf("MSIE 6.0")&&(c="ie6"),0<navigator.userAgent.indexOf("MSIE 7.0")&&(c="ie7"),0<navigator.userAgent.indexOf("MSIE 9.0")&&!window.innerWidth&&(c="ie8"),0<navigator.userAgent.indexOf("MSIE 9.0")&&(c="ie9"));var e="";"ie6"==c||"ie7"==c||"ie8"==c||"ie9"==c?d.val()!=d.attr("placeholder")&&(e=d.val()):e=d.val();a.showTips(e,b);b=TEAMS.ownCache&&TEAMS.ownCache["dyncpublish#"+b];""==b&&"undefined"==typeof b||d.val(b)});b.off("click.DyncPublishView",".j_feedback_area a").on("click.DyncPublishView",
".j_feedback_area a",function(a){a.stopPropagation();$(this).parents("#j_post-area").find(".j_detailCommands .control-input").trigger("focusout");if(a=$(this).attr("for"))$(this).parents(".dropdown-menu").slideUp(100),a=$(this).parents(".j_content_area").find(a),a.removeClass("hide"),a.find(".control-btn").trigger("click")});b.off("mouseenter.DyncPublishView",".j_links-dropdown").on("mouseenter.DyncPublishView",".j_links-dropdown",function(a){$(this).parents("#j_post-area").find(".j_detailCommands .control-input").trigger("focusout")});
b.off("focusout.DyncPublishView","#j_dync-area textarea").on("focusout.DyncPublishView","#j_dync-area textarea",function(b){b=$(a.el+" #btn-dync").attr("data-type");var c=$(this).val();TEAMS.ownCache["dyncpublish#"+b]=c});b.off("focus.DyncPublishView",".j_at_area").on("focus.DyncPublishView",".j_at_area",function(c){c=$(this).attr("id");b.find("#j_post-area").slideDown(200);"share-textarea"==c?a.shareAtmeview.render():"feedback-textarea"==c&&a.feedbackAtmeview.render()});$(this.el).off("keyup.DyncPublishView",
"#j_dync-area textarea").on("keyup.DyncPublishView","#j_dync-area textarea",function(b){13===b.keyCode&&b.ctrlKey&&($(a.el+" #btn-dync").trigger("click.DyncPublishView"),b.preventDefault());b=$(this).val();var c=$(a.el+" #btn-dync").attr("data-type");a.showTips(b,c);"share"==c||"blog"==c?1E3<b.length&&e.notify("\u5185\u5bb9\u8d85\u8fc71000\u5b57"):"feedback"==c&&2E3<b.length&&e.notify("\u5185\u5bb9\u8d85\u8fc72000\u5b57")});b.off("click.DyncPublishView","#btn-dync").on("click.DyncPublishView","#btn-dync",
function(c){if(!$(a.el+" #btn-dync").attr("disabled")){$(a.el+" #btn-dync").attr("disabled",!0);c=$(this).attr("data-type");TEAMS.ownCache["dyncpublish#"+c]="";if(0<b.find("#dync-attachments .entity-item a").length){c=$(a.el+" .j_post_"+c).val();if(""==$.trim(c)){e.notify("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");return}a.uploader.start()}else a.postBlog();return!1}});b.off("click.DyncPublishView","#visibleType li").on("click.DyncPublishView","#visibleType li",function(a){a=$(this);var b=a.data("type"),
c=a.parents("#visibleType");c.find(".selectui-result .j_share_area_text").text(a.find("a").text());c.attr("data-type",b)})},render:function(){$(this.el);$(".j_postsize").autosize()},emptyDetailCommands:function(){var a=$(this.el);a.find("#dync-attachments").empty();a.find("#all-attachments").addClass("hide");a=a.find(".j_detailCommands #relevance");_.each(a,function(a){$(a).empty();$(a).parents(".j_feedback").addClass("hide")})},initComponent:function(){var a=this;a.relevanceViews=[];_.each([{targetModule:"task",
container:"#dync-feedback-task",moduleLabel:"\u76f8\u5173\u4efb\u52a1:",moduleDisplay:!1,iModelTitle:""},{targetModule:"document",container:"#dync-feedback-doc",moduleLabel:"\u76f8\u5173\u6587\u6863:",moduleDisplay:!1,iModelTitle:""},{targetModule:"customer",container:"#dync-feedback-crm",moduleLabel:"\u76f8\u5173\u5ba2\u6237:",moduleDisplay:!1,iModelTitle:""},{targetModule:"workflow",container:"#dync-feedback-flow",moduleLabel:"\u76f8\u5173\u5ba1\u6279:",moduleDisplay:!1,iModelTitle:""}],function(b){this.relevanceView=
new d({objectId:a.id,module:b.targetModule,targetModule:b.targetModule,container:b.container,moduleLabel:b.moduleLabel,moduleDisplay:b.moduleDisplay,iModelTitle:b.iModelTitle,parentEl:a.el});a.relevanceViews.push(this.relevanceView)})},postBlog:function(a){var c=this,d=$(c.el+" #btn-dync").attr("data-type");if("feedback"==d)c.postFeedback(a);else{var f="",h={},p=$(c.el+" .j_post_"+d).val();if("share"==d){var f=$(c.el+" #visibleType").attr("data-type"),s=$(c.el).find(".j_post_"+d).data("userData"),
u=[],w=[],v=p;if(s)for(var x=0;x<s.length;x++)if(-1!=p.indexOf(s[x].userName)){var y="@"+s[x].userName+" ";if(-1!=p.indexOf(y)){u.push(s[x].userId);var m=v.indexOf(y)+1;m==s[x].atIndex?w.push(s[x].userId+"-"+s[x].atIndex):w.push(s[x].userId+"-"+m)}for(var p=p.replace(y," "),m="",q=0;q<y.length;q++)m+="X";v=v.replace(y,m)}h.userIds=u;h.userIdIndex=w}s=$(c.el+" .j_post_"+d).attr("placeholder");p==s&&(p="");if(1E3<p.length){e.notify("\u5185\u5bb9\u8fc7\u957f\uff0c\u5355\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc71000\u5b57");
$(c.el+" #btn-dync").attr("disabled",!1);$(c.el+" .j_post_"+d).focus();return}if(""==$.trim(p)){e.notify("\u8bf7\u586b\u5199\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\u3002");$(c.el+" #btn-dync").attr("disabled",!1);$(c.el+" .j_post_"+d).focus();return}if(!p.isBlank()||a)$(c.el+" .j_post_"+d).val("").trigger("autosize.resize"),h.content=p,h.shareScope=f,h.attachments=a,c.model.publishshare(h,d,function(a){$(c.el+" #btn-dync").attr("disabled",!1);a.errorMessage?e.notify(a.errorMessage):($(c.el).find(" .j_post_"+
d).val("").trigger("autosize.resize"),c.callback&&c.callback(a.blog),e.notify("\u53d1\u5e03\u6210\u529f!"),c.showTips($(c.el+" .j_post_"+d).val(),d),$("#guide-div").addClass("hide"),c.emptyDetailCommands(),3>=TEAMS.currentTenant.usedLicense&&(c.inviteModalView=new b,$(c.inviteModalView.el).find(".modal-title").html("\u60a8\u56e2\u961f\u4e2d\u4eba\u5458\u8fd8\u6bd4\u8f83\u5c11\uff0c\u9a6c\u4e0a\u9080\u8bf7\u81ea\u5df1\u7684\u540c\u4e8b\u6765\u52a0\u5165\uff0c\u4e00\u8d77\u4f53\u9a8c\u4e91\u529e\u516c\u534f\u4f5c"),
c.inviteModalView.render()),c.postcallback&&c.postcallback(a.blog))})}$(c.el).find(".j_post_"+d).data("userData","")},postFeedback:function(a){var b=this,c={},d=$(b.el+" #btn-dync").attr("data-type"),f=$(b.el+" .j_post_"+d).val(),h=$(b.el).find(".j_post_"+d).data("userData"),s=[],u=[],w=f;if(h)for(var v=0;v<h.length;v++)if(-1!=f.indexOf(h[v].userName)){var x="@"+h[v].userName+" ";if(-1!=f.indexOf(x)){s.push(h[v].userId);var y=w.indexOf(x)+1;y==h[v].atIndex?u.push(h[v].userId+"-"+h[v].atIndex):u.push(h[v].userId+
"-"+y)}for(var f=f.replace(x," "),y="",m=0;m<x.length;m++)y+="X";w=w.replace(x,y)}h=$(b.el+" .j_post_"+d).attr("placeholder");f==h&&(f="");""==$.trim(f)?(e.notify("\u8bf7\u586b\u5199\u5185\u5bb9\u540e\u518d\u63d0\u4ea4\u3002"),$(b.el+" #btn-dync").attr("disabled",!1),$(b.el+" .j_post_"+d).focus()):2E3<f.length?(e.notify("\u5185\u5bb9\u8fc7\u957f\uff0c\u5355\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc72000\u5b57"),$(b.el+" #btn-dync").attr("disabled",!1),$(b.el+" .j_post_"+d).focus()):(c.userIds=s.join(","),
c.userIdIndex=u.join(","),c.content=f,c.attachments=a||[],(c=b.getFeedbackTarget(c)||[],0>=c.length)?(e.notify("\u8bf7\u9009\u62e9\u5173\u8054\u5bf9\u8c61"),$(b.el+" #btn-dync").attr("disabled",!1),$(b.el+" .j_post_"+d).focus()):(s={},s.comments=c,f.isBlank()&&!a||b.model.saveCommentList(s,function(a){$(b.el+" #btn-dync").attr("disabled",!1);if(a.actionMsg)e.notify(a.actionMsg.message);else{$(b.el).find(" .j_post_"+d).val("").trigger("autosize.resize");b.callback&&b.callback(a.blog);e.notify("\u53d1\u5e03\u6210\u529f!");
if(0<$(b.el+" .j_post_"+d).val().length){$(b.el+" .j_blog_length_tips").removeClass("hide");var c=b.j_blog_tip($(b.el+" .j_post_"+d).val(),d);$(b.el+" .j_blog_length_tips").html(c)}else $(b.el+" .j_blog_tip").addClass("hide");$("#guide-div").addClass("hide");b.emptyDetailCommands();b.postcallback&&a.blogs&&_.each(a.blogs,function(a){b.postcallback(a)})}})))},getFeedbackTarget:function(a){var b=$(this.el),c=[];_.each(b.find(".j_detailCommands .j_feedback"),function(b){if(0<$(b).find("#relevance span").length){var d=
$(b).data("module");a.module=d;_.each($(b).find("#relevance span"),function(b){var d=$.extend({},a);b=$(b).find("a");d.targetId=b.data("value");d.targetName=b.text();c.push(d)})}});return c},showTips:function(a,b){if(0<a.length){$(this.el+" .j_blog_tip").removeClass("hide");var c=this.getLengthTips(a,b);$(this.el+" .j_blog_length_tips").html(c)}else $(this.el+" .j_blog_tip").addClass("hide")},getLengthTips:function(a,b){var c="";"blog"==b||"share"==b?(c=1E3,c=a.length<=c?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+
(c-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+(a.length-c)+"\u5b57"):"feedback"==b&&(c=2E3,c=a.length<=c?"\u8fd8\u53ef\u4ee5\u8f93\u5165"+(c-a.length)+"\u5b57":"\u5df2\u8d85\u51fa"+(a.length-c)+"\u5b57");return c},remove:function(){$(this.el).off(".DyncPublishView")}});m.exports=h});
define("teams/portal/dyncpublishmodel",["teams/utils"],function(h,q,m){h("teams/utils");h=Backbone.Model.extend({initialize:function(f){},publishshare:function(f,e,c){f='{"blog":'+JSON.stringify(f)+',"publishtype":"'+e+'"}';$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/portal/publish.json",dataType:"json",data:f,success:function(b){c&&c(b)}})},saveCommentList:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/comment/saveCommentList.json",
dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/portal/communimenuview","teams/utils teams/portal/communimenumodel teams/portal/communicontentview teams/models/leftmodel teams/wechat/chatmodel teams/messages/messagesmodel teams/base/configmodel".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/portal/communimenumodel"),c=h("teams/portal/communicontentview"),b=h("teams/models/leftmodel"),a=h("teams/wechat/chatmodel"),d=h("teams/messages/messagesmodel"),g=h("teams/base/configmodel");h=Backbone.View.extend({_infoTips:{remind:{id:"j_unreadRemind_item",
mesType:"remind",name:"\u63d0\u9192",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u63d0\u9192\u6d88\u606f",css:"bell"},follow:{id:"j_watchApplication_item",mesType:"follow",name:"\u5173\u6ce8\u7533\u8bf7",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u5173\u6ce8\u7533\u8bf7",css:"follow"},applyJoin:{id:"j_joinApplication_item",mesType:"applyJoin",name:"\u52a0\u5165\u7533\u8bf7",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u52a0\u5165\u7533\u8bf7\u6d88\u606f",css:"join"},shareJoin:{id:"j_shareApplication_item",mesType:"shareJoin",
name:"\u5171\u4eab\u7533\u8bf7",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u5171\u4eab\u7533\u8bf7\u6d88\u606f",css:"share"},newitem:{id:"j_unReadItem_item",mesType:"newitem",name:"\u672a\u8bfb\u4e8b\u9879",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u4e8b\u9879",css:"unread"},newcomment:{id:"j_unreadNewComment_item",mesType:"newcomment",name:"\u4e8b\u9879\u7684\u65b0\u53cd\u9988",info:"\u60a8\u6ca1\u6709\u672a\u7684\u8bfb\u65b0\u4e8b\u9879\u53cd\u9988",css:"newCom"},newfinish:{id:"j_newFinishedItem_item",mesType:"newfinish",
name:"\u65b0\u5b8c\u6210\u4e8b\u9879",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u7684\u65b0\u5b8c\u6210\u4e8b\u9879",css:"newFin"},atme:{id:"j_unreadAtMe_item",mesType:"atme",name:"@\u6211\u7684\u65b0\u53cd\u9988",info:"\u60a8\u6ca1\u6709\u672a\u8bfb@\u6211\u7684\u65b0\u53cd\u9988",css:"at"},applyReceive:{id:"j_applyReceive_item",mesType:"applyReceive",name:"\u9886\u53d6\u7533\u8bf7",info:"\u60a8\u6ca1\u6709\u672a\u8bfb\u7684\u9886\u53d6\u7533\u8bf7",css:"unread"}},_msgTypeNames:"follow applyJoin newitem newfinish newcomment remind TodayTask newJoin TodayAgenda TodoWorkflow unreadblog atme shareJoin applyReceive newnotice  commentblog replayblog wechat employee channel".split(" "),
initialize:function(c){this.chatmodel=new a;this.communiMenuModel=new e;this.leftModel=new b;this.configmodel=new g;this.searchTime=null;this.el=c.container||"#j_communi-menu";this.channel=c.channel;$(this.el).html(f.template("portal.communimenu"))},delegateEvents:function(){var a=this,b=$(this.el);$("body").on("click.communimenu",".goto-top",function(a){f.gotoTop(".j_memberlist-wrapper")});$("body").off("chatPortalMessage.Portal").on("chatPortalMessage.Portal",function(b,c){a.communiContentView&&
a.communiContentView.websocket_chatCallBack(c)});$("body").off("mesPortalMessage.Portal").on("mesPortalMessage.Portal",function(b,c){a.websocket_CallBack(c)});b.on("click.communimenu",".j_memberTab a[data-show]",function(d,e){var g=$(this),f=g.data("show");if(!g.hasClass("active"))switch(g.addClass("active").siblings().removeClass("active"),b.find(f).removeClass("hide").siblings().addClass("hide"),b.find(".i-member-more").addClass("hide"),f){case "#memberlist-wrapper":f=e&&e.channel;g=e&&e.entity;
a.loadRecently(f,g);if(f){var h={};"employee"==f&&g?(f=g.avatar&&g.avatar.p5,h={type:"employee",targetId:g.employeeId,targetName:g.name,avatarUrl:f?"/base/download/"+f:"images/avatar.png"}):h={type:"message",msgType:f};a.communiContentView&&a.communiContentView.remove();a.communiContentView=new c(h);a.communiContentView.render()}break;case "#member-book":a.loadMembers();break;case "#memberSch":b.find("#j_memberSchInput").focus()}});b.on("click.communimenu",".j_dynamic-all",function(){$(this).hasClass("active")||
(b.find(".j_menu-item.active").removeClass("active"),$(this).addClass("active"),a.communiContentView&&a.communiContentView.remove(),a.communiContentView=new c({type:"dyna"}),a.communiContentView.render(),a.saveUserConfig("portal.workdyna","company-workAll"),ROUTER.navigate("/portal",{trigger:!1}))});b.on("click.communimenu",".j_member-list .list-item",function(d){d=$(this);if(!d.hasClass("active")){b.find(".j_menu-item.active").removeClass("active");d.addClass("active");var e=d.data();a.communiContentView&&
a.communiContentView.remove();a.communiContentView=new c(e);a.communiContentView.render();d=d.data("entity");"share"==d&&a.saveUserConfig("portal.workdyna","company-share");e="/portal";if("newitem"==d||"newcomment"==d||"newfinish"==d||"atme"==d||"remind"==d||"follow"==d||"applyJoin"==d||"shareJoin"==d||"applyReceive"==d)e="/portal/"+d;ROUTER.navigate(e,{trigger:!1})}});b.on("click.communimenu",".j_memberbookScr dd, #j_memberSch_list dd",function(){var d=$(this);d.hasClass("active")||(b.find(".j_menu-item.active").removeClass("active"),
d.addClass("active"),a.communiContentView&&a.communiContentView.remove(),a.communiContentView=new c(d.data()),a.communiContentView.render())});b.on("click.communimenu",".j_member_more",function(b){b=$(this);var c=parseInt(b.attr("pageNo"));b.addClass("hide");a.communiMenuModel.loadMembers(c,function(b){a.renderAllEmployee(b,!0)})});b.on("click.communimenu",".j_recent_more",function(b){$(this).addClass("hide");a.loadRecentChat(a.searchTime)});b.on("click.communimenu",".j_employ_group dt",function(b){b=
$(this).parent();b.hasClass("on")?(b.removeClass("on"),b.find(".j_groupInviteTip").addClass("hide")):(b.addClass("on"),a.renderChannel())});b.on("keydown.communimenu","#memberSch input",function(c){13==c.which&&(c=$.trim($(this).val()),0>=c.length||(b.find("#j_member_search .loading_small").removeClass("hide"),a.chatmodel.queryChatsByName({queryName:c},function(c){b.find("#j_member_search .loading_small").addClass("hide");$("#memberSch .j_mesSchList_dl").empty();null!=c.chatsList&&0<c.chatsList.length?
a.renderChatsByQuery(c.chatsList):(c=b.find("#j_memberItemClone dd").clone().removeAttr("id"),c.find(".j_avatar").html('\x3cimg src\x3d"images/avatar_assistant.png" /\x3e'),c.find(".j_name").text("eteams\u670d\u52a1\u53f7"),c.attr({id:1E4,"data-service-no":"true","data-entity":"employee"}).data({type:"employee",targetId:1E4,targetName:"eteams\u670d\u52a1\u53f7",avatarUrl:"images/avatar_assistant.png"}),$("#memberSch .j_mesSchList_dl").append(c))})))});b.on("click.communimenu",
"#new-check-in",function(b){a.checkIn?f.alert("\u4eca\u5929\u4f60\u5df2\u7b7e\u5230\uff01"):a.leftModel.checkin(function(b){if(b=b.check)a.checkTime(),f.alert("\u7b7e\u5230\u6210\u529f\uff01\u60a8\u7684\u7b7e\u5230\u65f6\u95f4\u4e3a\uff1a"+b)})});b.on("click.communimenu","#new-check-out",function(b){a.leftModel.checkout(function(a){f.alert("\u7b7e\u9000\u6210\u529f\uff01\u60a8\u7684\u7b7e\u9000\u65f6\u95f4\u4e3a\uff1a"+a.check)})});b.on("createChannel.communimenu",function(b,c){var d;switch($(a.el+
" .j_memberTab a.active").data("show")){case "#memberlist-wrapper":d=a.genOneRecentChat({chatType:"channel",targetId:c.id,targetName:c.name});$("#memberlist-wrapper .j_mesRecent").prepend(d);break;case "#member-book":d=a.renderOneChannel(c);$("#member-book .j_employ_group dt").after(d);break;case "#memberSch":channelName=c.name||"\u672a\u547d\u540d",d=$(a.el).find("#j_memberItemClone dd").clone(),d.find(".j_avatar img").attr("src","images/group.png"),d.find(".j_name").html(channelName),d.attr({id:c.id,
"data-entity":"channel"}).data({type:"channel",targetId:c.id,targetName:channelName,avatarUrl:"images/group.png"}),$("#memberSch .j_mesSchList_dl").prepend(d)}d.trigger("click")});b.on("showRecent.communimenu",function(b,c){if("#memberlist-wrapper"!=$("#j_communi-menu .j_memberTab a.active").data("show"))$('#j_communi-menu .j_memberTab a[data-show\x3d"#memberlist-wrapper"]').trigger("click",c);else{var d=a.showTop(c.channel,c.entity);d&&d.trigger("click")}})},render:function(){var a=this;
$el=$(this.el);this.checkTime();a.loadRecently(a.channel);f.layout(".j_memberlist-wrapper",{onTotalScrollOffset:100,onTotalScroll:function(){var b=$(a.el+" .j_memberTab a.active").data("show");$(a.el+" "+b+" .i-member-more:not(.hide)").trigger("click")}},[{gotoTopButton:!0}]);var b={};if(a.channel)b.type="message",b.msgType=a.channel;else{var d=a.getUserConfig(),e=d&&d.workType;e&&("share"==e||"shareAtme"==e||"shareReplay"==e||"likeme"==e||"mine"==e?(b.type="share",$el.find(".j_menu-item.active").removeClass("active"),
$el.find('.j_mesFixed .j_menu-item[data-entity\x3d"share"]').addClass("active")):b.type="dyna",d.range&&(b.range=d.range),b.workType=e)}a.communiContentView&&a.communiContentView.remove();a.communiContentView=new c(b);a.communiContentView.render();setInterval(function(){var b=Date.create(),c=b.format("{yyyy}/{MM}/{dd}"),b=b.format("{HH}:{mm}:{ss}");$(a.el+" #j_timeYear").text(c);$(a.el+" #j_timeHour").text(b)},1E3)},getUserConfig:function(){if(TEAMS.userConfig){var a=_.find(TEAMS.userConfig,function(a){return"portal.workdyna"==
a.configKey});if(a=a&&a.configValue)return a=a.split("-"),{range:a&&1<=a.length?a[0]:"company",workType:a&&2<=a.length?a[1]:"workAll"}}},saveUserConfig:function(a,b){if(a&&b){var c=!1;_.each(TEAMS.userConfig,function(d){d.configKey==a&&(d.configValue=b,c=!0)});c||TEAMS.userConfig.push({configKey:a,configValue:b});this.configmodel.saveConfig({configKey:a,configValue:b})}},loadMembers:function(){var a=this,b=$(a.el);b.find(".j_memberbookScr .loading_small").removeClass("hide");a.communiMenuModel.loadMembers(1,
function(c){b.find(".j_memberbookScr .loading_small").addClass("hide");a.renderAllEmployee(c,!0)})},loadRecently:function(a,b){var c=this,d=$(c.el),e=d.find(".j_member-list");e.find(".j_mesFixed").html("");var g=d.find("#j_mesRecentlyClone").clone().removeAttr("id");g.find(".j_avatar").html('\x3cimg src\x3d"images/avatar_group.png" /\x3e');g.find(".j_name").attr("title","\u56e2\u961f\u5206\u4eab").text("\u56e2\u961f\u5206\u4eab");g.find(".j_info").text("\u5206\u4eab\u5de5\u4f5c\u6216\u53c2\u8003\u4fe1\u606f");
g.attr("data-entity","share").data({type:"share",targetName:"\u56e2\u961f\u5206\u4eab",avatarUrl:"images/avatar_group.png"});e.find(".j_mesFixed").append(g);g=d.find("#j_mesRecentlyClone").clone().removeAttr("id");g.find(".j_avatar").html('\x3cimg src\x3d"images/avatar_assistant.png" /\x3e');g.find(".j_name").attr("title","eteams\u670d\u52a1\u53f7").text("eteams\u670d\u52a1\u53f7");g.find(".j_info").text("\u6b22\u8fce\u4f7f\u7528eteams\uff01");g.attr({id:1E4,"data-service-no":"true",
"data-entity":"employee"}).data({type:"employee",targetId:1E4,targetName:"eteams\u670d\u52a1\u53f7",avatarUrl:"images/avatar_assistant.png"});e.find(".j_mesFixed").append(g);e.find(".j_mesRecent").html("");1>=TEAMS.currentTenant.usedLicense&&(e=d.find(".j_member-list .j_mesRecent"),g=d.find("#j_oneEmpPanelClone").clone().removeAttr("id"),e.append(g));c.loadRecentMes(function(){c.loadRecentChat(null,function(){if(a){var e=c.showTop(a,b);e&&0!=e.length&&(d.find(".j_menu-item.active").removeClass("active"),
e.addClass("active"))}})})},showTop:function(a,b){if(a){var c=$(this.el).find(".j_member-list .j_mesRecent");if("remind"==a||"follow"==a||"applyJoin"==a||"shareJoin"==a||"applyReceive"==a||"newitem"==a||"unreadblog"==a||"newcomment"==a||"newfinish"==a||"atme"==a){var d=c.find("#"+this._infoTips[a].id);0==d.length&&(d=this.genRecentOneMes({typeName:a}))}else"channel"!=a&&"employee"!=a||!b||(d=c.find("#"+b.employeeId+'[data-entity\x3d"'+a+'"]'),0==d.length&&(d=this.genOneRecentChat({chatType:a,targetId:b.employeeId,
targetName:b.name,targetAvatar:b.avatar})));d&&c.prepend(d);return d}},checkTime:function(){var a=this;this.leftModel.checkTime(function(b){a.checkIn=b.checkIn;a.checkIn?$(".j_check_inOrOut").attr("id","new-check-out").text("\u7b7e\u9000"):$(".j_check_inOrOut").attr("id","new-check-in").text("\u7b7e\u5230")})},renderAllEmployee:function(a,b){var c=$(this.el).find(".j_memberbookScr");if(1==a.page.pageNo){c.empty();var d=$(this.el).find("#j_allMemberServiceClone dl").clone();d.find(".j_member_item").attr({id:1E4,
"data-service-no":"true","data-entity":"employee"}).data({type:"employee",targetId:1E4,targetName:"eteams\u670d\u52a1\u53f7",avatarUrl:"images/avatar_assistant.png"});c.prepend(d);d=$(this.el).find("#j_employGroupClone dl").clone();c.prepend(d)}for(var d=a.page.result,e=0;e<d.length;e++){var g=d[e],f=$.trim(g.pinyin),h="",v="";f&&(h=f.substring(0,1).toLocaleUpperCase(),/[a-zA-Z]$/.test(h)||(h="degit"),h&&0==c.find("#list-history"+h).length?(v=$(this.el).find("#j_memberGroupClone dl").clone(),
v.attr("id","list-history"+h),v.find("dt").text(h),"degit"==h&&v.find("dt").text("#")):v=$(this.el).find("#list-history"+h));f=$(this.el).find("#j_memberItemClone dd").clone();f.find(".j_name").attr("title",g.username).text(g.username);var x=g.avatar&&g.avatar.p5,x=x?"/base/download/"+x:"images/avatar.png";f.find(".j_avatar img").attr("src",x);f.attr({id:g.id,"data-entity":"employee"}).data({type:"employee",targetId:g.id,targetName:g.username,avatarUrl:x});v.append(f);0==c.find("#list-history"+
h).length&&c.append(v)}a.page.hasNext?$(this.el).find(".j_member_more").removeClass("hide"):$(this.el).find(".j_member_more").addClass("hide");$(this.el).find(".j_member_more").attr("pageNo",a.page.pageNo+1);b&&1==a.page.pageNo&&3>=a.page.result.length&&c.append($("#invite-tip-clone").clone())},renderChannel:function(){var a=this;$(".j_employ_group .loading_small").removeClass("hide");a.chatmodel.loadAllChannel(TEAMS.currentUser.id,function(b){$(".j_employ_group dd").detach();$(".j_employ_group .loading_small").addClass("hide");
b=b.allChannel;for(var c=0;c<b.length;c++){var d=a.renderOneChannel(b[c]);$(".j_employ_group").append(d)}0==b.length&&$(".j_employ_group .j_groupInviteTip").removeClass("hide")})},renderOneChannel:function(a){var b=$(this.el).find("#j_groupClone dd").clone().attr("id",a.id);b.find(".j_name").text(a.name||"\u672a\u547d\u540d");var c=a.name;b.attr("title",c);b.data({type:"channel",targetId:a.id,targetName:c,avatarUrl:"images/group.png"});return b},renderChannelMembers:function(a){if(a){for(var b=
"",c=0;c<a.length-1;c++)b=b+a[c].username+",";return b+=a[a.length-1].username}},loadRecentMes:function(a){var b=this,c=$(b.el),e={};e.eteamsId=ETEAMSID;var g=new d;c.find(".j_member-list .loading_small").removeClass("hide");g.unreadHomeMessagePC(e,function(d){c.find(".j_member-list .loading_small").addClass("hide");if(0!=d.actionMsg.code)f.notify(d.actionMsg.message);else{var e=c.find(".j_member-list .j_mesRecent");_.each(d.data,function(a){var c=b.genRecentOneMes(a);if(c){var d=a.lastTime;(a=_.find(e.find(".list-item"),
function(a){return($(a).data("lastTime")||0)<d}))?$(a).before(c):e.append(c)}});a&&a()}})},genRecentOneMes:function(a){if(a){var b=$(this.el),c="typeName"in a?a.typeName:this._msgTypeNames[a.type-1];if(c=c&&this._infoTips[c]){var d=a.number||0,e=a.subTitle||c.info,g=99<d?"99+":d;a=a.lastTime||0;b=b.find("#j_mesRecentlyClone").clone().removeAttr("id");b.find(".j_avatar").removeClass("avatar").addClass("graph");b.addClass(c.css);b.find(".j_name").attr("title",c.name).text(c.name);b.find(".j_info").attr("title",
e).text(e);d&&b.find(".count").text(g).attr("title",d);a&&b.find("time").text(this.confirmDate(a));b.attr({id:c.id,"data-entity":c.mesType}).data({type:"message",msgType:c.mesType,lastTime:a,count:d});return b}}},loadRecentChat:function(a,b){var c=this,d=$(c.el);d.find(".j_member-list .loading_small").removeClass("hide");c.chatmodel.loadRecentChatMembers(a,function(a){d.find(".j_member-list .loading_small").addClass("hide");if(0!=a.actionMsg.code)f.notify(a.actionMsg.message);else{a=a.data;var e=
d.find(".j_member-list .j_mesRecent");_.each(a.result,function(a){var b=c.genOneRecentChat(a);if(b){c.searchTime=b.find("time").data("lastTime");var d=a.updateTime||0;(a=_.find(e.find(".list-item"),function(a){return($(a).data("lastTime")||0)<d}))?$(a).before(b):e.append(b)}});a.hasNext?d.find(".j_member-list .j_recent_more").removeClass("hide"):d.find(".j_member-list .j_recent_more").addClass("hide");$.isFunction(b)&&b()}})},genOneRecentChat:function(a){var b=$(this.el),c=a.updateTime||0,d=a.unreadCount||
0,e=99<d?"99+":d,g=a.newestMessage||"";if(1E4==a.targetId)$serviceNo=b.find(".j_member-list div.list-item[data-service-no]"),$serviceNo.find(".j_info").attr("title",g).text(g),$serviceNo.find("time").text(this.confirmDate(c)||""),$serviceNo.data({lastTime:c,count:d}),d&&$serviceNo.find(".count").text(e).attr("title",d);else{var b=b.find("#j_mesRecentlyClone").clone().removeAttr("id"),f,h=a.targetName||"\u672a\u547d\u540d";"channel"==a.chatType?f="images/group.png":(f="images/avatar.png",
null!=a.targetAvatar&&null!=a.targetAvatar.p5&&(f="/base/download/"+a.targetAvatar.p5));b.find(".j_name").attr("title",h).text(h);b.find(".j_info").attr("title",g).text(g);b.find(".j_avatar").html('\x3cimg src\x3d"'+f+'"\x3e');d&&b.find(".count").text(e).attr("title",d);b.find("time").text(this.confirmDate(c)||"");b.find("time").data("lastTime",c);b.attr({id:a.targetId,"data-entity":a.chatType}).data({type:a.chatType,targetId:a.targetId,targetName:h,avatarUrl:f,lastTime:c,count:d});return b}},confirmDate:function(a,
b){var c=Date.create(a),d=c.format("{MM}-{dd}"),e=c.format("{yyyy}-{MM}-{dd}"),c=c.is("today")?c.format("{HH}:{mm}"):d;return b?e:c},queryUnreadMessage:function(){var a=$(this.el);this.chatmodel.unreadChatMessage(function(b){if(!b.actionMsg||-1!=b.actionMsg.code){var c=b.chats;b=b.channelChats;if(!c||0!=c.length||!b||0!=b.length){if(c)for(var d=0;d<c.length;d++){var e=c[d],g=e.sender.id,g=a.find(".j_member-list .j_mesRecent #"+g);1==g.size()&&0!=e.count&&g.find(".count").text(e.count)}if(b)for(c=
0;c<b.length;c++)e=b[c],g=e.channel.id,g=a.find(".j_member-list .j_mesRecent #"+g),1==g.size()&&0!=e.count&&g.find(".count").text(e.count)}}})},renderChatsByQuery:function(a){if(a&&0!=a.length)for(var b=a.length-1;0<=b;b--){var c=a[b],d="",e="",g="",f=$(this.el).find("#j_memberItemClone dd").clone();c.channel?(id=c.channel.id,d="channel",g="images/group.png",e=c.channel.name||"\u672a\u547d\u540d"):(c=c.receiver,id=c.id,d="employee",g="images/avatar.png",null!=c.avatar&&null!=c.avatar.p5&&
(g="/base/download/"+c.avatar.p5),1E4==c.id&&(g="images/avatar_assistant.png"),e=c.username);f.find(".j_avatar img").attr("src",g);f.find(".j_name").text(e);f.attr({id:id,"data-entity":d}).data({type:d,targetId:id,targetName:e,avatarUrl:g});$("#memberSch .j_mesSchList_dl").append(f)}},websocket_CallBack:function(a){(a=a&&a.homeMessage)&&(20==a.type||21==a.type?this.websocket_chatCallBack(a):this.websocket_MesCallBack(a))},websocket_MesCallBack:function(a){var b=$(this.el);if(a){var c=
a.typeName||this._msgTypeNames[a.type-1],d=c&&this._infoTips[c];if(d){b=b.find(".j_member-list .j_mesRecent");c=b.find("#"+d.id);if(c.length){var e=a.number||0,d=a.subTitle||d.info;a=a.lastTime||0;var g=99<e?"99+":e;c.data({lastTime:a,count:e});c.find(".count").text(g||"").attr("title",e);c.find("time").text(this.confirmDate(a)||"");c.find(".j_info").attr("title",d).text(d)}else c=this.genRecentOneMes(a);c&&!c.hasClass("active")&&b.prepend(c)}}},websocket_chatCallBack:function(a){var b=$(this.el);
if(a&&a.senderEmployeeId!=TEAMS.currentUser.id){var c=this._msgTypeNames[a.type-1];if(c){var d="channel"==c?a.channelId:a.chatorId,e=a.number||0,g=a.subTitle||"",f=a.lastTime||0,h=99<e?"99+":e;if("employee"==c&&1E4==d)$serviceNo=b.find(".j_member-list div.list-item[data-service-no]"),$serviceNo.find(".j_info").attr("title",g).text(g),$serviceNo.find("time").text(this.confirmDate(f)||""),$serviceNo.hasClass("active")&&(e=0),$serviceNo.data({lastTime:f,count:e}),$serviceNo.find(".count").text(h||"").attr("title",
e);else{var b=b.find(".j_member-list .j_mesRecent"),v=b.find("#"+d);v.length?(v.find("time").text(this.confirmDate(f)||""),v.find(".j_info").attr("title",g).text(g),v.hasClass("active")||(v.data({lastTime:f,count:e}),v.find(".count").text(h||"").attr("title",e),0<e&&b.prepend(v))):(v=this.genOneRecentChat({updateTime:f,newestMessage:g,targetId:d,targetName:a.name,chatType:c,unreadCount:e,targetAvatar:{p5:a.img}}))&&(0<e?b.prepend(v):b.append(v))}}}},refreshBlog:function(a){this.communiContentView&&
this.communiContentView.refreshBlog(a)},remove:function(){$(this.el).off(".communimenu");this.communiContentView&&this.communiContentView.remove()}});m.exports=h});
define("teams/portal/communimenumodel",["teams/utils"],function(h,q,m){h("teams/utils");h=Backbone.Model.extend({initialize:function(f){},getUnreadBlogCount:function(f){$.ajax({type:"get",url:"/blog/getUnreadBlogCount.json?",success:function(e){f&&f(e)}})},loadMembers:function(f,e){var c={};c.userId=TEAMS.currentUser.id;c.pageNo=f;c.pageSize=30;$.ajax({type:"get",url:"/users.json?",dataType:"json",data:c,success:function(b){e&&e(b)}})}});m.exports=h});
define("teams/portal/msgchannelview",["teams/utils","teams/feed/feedmodel","teams/messages/messagesmodel","teams/feed/eteamscounter"],function(h,q,m){var f=h("teams/utils"),e=h("teams/feed/feedmodel"),c=h("teams/messages/messagesmodel"),b=h("teams/feed/eteamscounter");h=Backbone.View.extend({initialize:function(a){this.pageNo=1;this.el=a.container||"#j_communi-body";this.msgType=a.msgType;this.feedModel=new e;this._module=a.module||"all";this.keywords=a.keywords;this.isRead=a.isRead;this.isFirst=
a.isFirst;this.messagesModel=new c;$(this.el).html(f.template("portal.msgchannel"))},delegateEvents:function(){var a=this,b=$(a.el);b.on("click.MsgChannel",".j_mesitem",function(b){var c=$(b.target).parents(".j_mesitem"),d=c.attr("id"),e=a.msgType;$(this).addClass("active").siblings().removeClass("active");"remind"==e||"follow"==e||"applyJoin"==e||"shareJoin"==e||"applyReceive"==e?0<c.find(".icon-envelope").size()||!c.find("#j_optbtn").hasClass("hide")||(a.minusCount(),a.messagesModel.newReaded(d,
function(b){a.changeReadStyle(c,e)})):(a.minusCount(),a.messagesModel.newReaded(d,function(b){a.changeReadStyleById(d)}))});b.on("click.MsgChannel",".j_mesmore",function(b){a.pageNo++;b=a.msgType;"remind"==b||"follow"==b||"applyJoin"==b||"shareJoin"==b||"applyReceive"==b?a.renderNormalMessages(b):a.renderItemMessages(!0)});b.on("click.MsgChannel","#j_optbtn .btn-success",function(b){b.stopPropagation();var c=$(b.currentTarget).parents(".j_mesBox").attr("type");"follow"==c?a.clickAcceptApply(b):"applyJoin"==
c?a.clickAcceptJoin(b):"shareJoin"==c?a.clickAcceptShareJoin(b):"applyReceive"==c&&a.clickAcceptApplyReceive(b)});b.on("click.MsgChannel","#j_optbtn .btn-danger",function(b){b.stopPropagation();var c=$(b.currentTarget).parents(".j_mesBox").attr("type");"follow"==c?a.clickRefuseApply(b):"applyJoin"==c?a.clickRefuseJoin(b):"shareJoin"==c?a.clickRefuseShareJoin(b):"applyReceive"==c&&a.clickRefuseApplyReceive(b)})},render:function(){var a=$(this.el),b=this.msgType;this.leftToolsFilter(b);"remind"==b||
"follow"==b||"applyJoin"==b||"shareJoin"==b||"applyReceive"==b?this.renderNormalMessages(b):this.renderItemMessages(!0);f.layout(".j_msglist-wrapper",{whileScrolling:function(){TEAMS.ownCache["portal.mcsTop"]=this.mcs.top},onTotalScrollOffset:800,onTotalScroll:function(){a.find(".j_mesmore:not(.hide)").trigger("click")}},[{gotoTopButton:!0}])},renderNormalMessages:function(a){var c=this,e=$(c.el);e.find(".j_mesmore").addClass("hide");e.find(".no-result").addClass("hide");e.find(".loading_small").removeClass("hide");
c.messagesModel.isread=c.isRead?1:0;var h=c.changeTypeToKey(a);c.messagesModel.messageType=h;c.messagesModel.currentEmployeeId=TEAMS.currentUser.id;c.messagesModel.pageNo=c.pageNo||1;c.messagesModel.getBlogMessagePage(function(b){b.actionMsg&&0!=b.actionMsg.code?f.notify(b.actionMsg.message):(b=b.data,c.isFirst&&0>=b.totalCount?(c.checkUnreadNum(a,h),$("#j_communi-main #j_message .j_dynamicTab li.j_read").trigger("click")):c.renderMessagesPage(b,a,c.pageNo))});b.totaling()},renderMessagesPage:function(a,
b,c){c=$(this.el);c.find(".j_hasMesInfo").removeClass("hide");c.find(".loading_small").addClass("hide");var e=a.result;0==e.length?(c.find(".j_meslist").addClass("hide"),c.find(".j_noMesInfo").removeClass("hide"),c.find(".j_hasMesInfo").addClass("hide")):(c.find(".j_meslist").removeClass("hide"),c.find(".no-result").addClass("hide"));for(var f=0;f<e.length;f++){var k=e[f],h=$("#j_mesNormalBoxClone").clone().attr("id",k.id);h.data("blogMessage",k);this.isRead?h.find(".j_status i").attr("class","icon-envelope"):
h.find(".j_status").removeClass("hide");"remind"==b?this.renderRemindOne(k,h):"applyJoin"==b?this.renderJoinApplicationOne(k,h):"shareJoin"==b&&k.target?this.renderShareApplicationOne(k,h):"applyReceive"==b&&k.target?this.renderReceiveApplicationOne(k,h):"follow"==b&&this.renderFollowApplicationOne(k,h);c.find(".j_meslist").append(h)}a.hasNext?c.find(".j_mesmore").removeClass("hide"):c.find(".j_mesmore").addClass("hide")},getModuleName:function(a){var b="";switch(a){case "task":b=" \u3010\u4efb\u52a1\u3011 ";
break;case "document":b=" \u3010\u6587\u6863\u3011 ";break;case "customer":b=" \u3010\u5ba2\u6237\u3011 ";break;case "workflow":b=" \u3010\u5ba1\u6279\u3011 ";break;case "mainline":b=" \u3010\u9879\u76ee\u3011 ";break;case "user":b=" \u3010\u7528\u6237\u3011 ";break;case "tag":b=" \u3010\u6807\u7b7e\u3011 ";break;case "share":b=" \u3010\u5206\u4eab\u3011 ";break;case "workreport":b=" \u3010\u62a5\u544a\u3011 ";break;case "formdatareport":b=" \u3010\u6570\u636e\u4e0a\u62a5\u3011";break;case "calendar":b=
" \u3010\u65e5\u7a0b\u3011 ";break;case "user":b=" \u3010\u7528\u6237\u3011 ";break;case "saleChance":b=" \u3010\u5546\u673a\u3011 ";break;case "production":b=" \u3010\u4ea7\u54c1\u3011 "}return b},renderRemindOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),f=a.target,k=a.message;b.find(".j_user").text(c.username);b.find(".usercard-toggle").attr("userid",c.id);b.find(".j_user").data("employee",c);c.avatar?b.find(".j_avatar").removeClass("hide").attr("src",
"/base/download/"+c.avatar.p3):c.id&&"10000"==c.id?(b.find(".j_avatar").removeClass("hide").attr("src","images/service.png"),b.find(".avatar").css("cursor","auto"),b.find(".user").css({"text-decoration":"none",cursor:"auto"})):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png");var c="",h=b.find(".j_event");f?(c=this.getModuleName(f.module),"workreport"==f.module?f.commentContent&&0<=f.commentContent.indexOf("\u62a5\u544a")&&h.find("span.text").prepend("\u63d0\u9192\uff1a\u62a5\u544a"):
"calendar"==f.module?(f.commentContent&&0<=f.commentContent.indexOf("\u5df2\u8c03\u6574")?(h.find("span.text").prepend("\u63d0\u9192\uff1a"),h.find("span a").removeClass("hide").text(f.name),h.find("span.text").append("\u65e5\u7a0b\u5df2\u8c03\u6574")):(h.find("span.text").prepend("\u63d0\u9192\uff1a"+c),h.find("span a").removeClass("hide").text(f.name)),h.find("span a").attr({"data-id":f.id,"data-module":"agenda"})):(h.find("span.text").prepend("\u63d0\u9192\uff1a"+c),h.find("span a").removeClass("hide").text(f.name),
h.find("span a").attr({"data-id":f.id,"data-module":f.module})),b.find(".content").attr("title",f.name)):k&&0<=k.indexOf("\u4efb\u52a1\u5ef6\u671f")?h.find("span.text").prepend("\u63d0\u9192\uff1a\u4efb\u52a1\u5ef6\u671f"):k&&0<=k.indexOf("\u62a5\u544a")?h.find("span.text").prepend("\u63d0\u9192\uff1a\u62a5\u544a"):k&&0<=k.indexOf("\u52a0\u5165\u672c\u56e2\u961f")&&h.find("span.text").prepend("\u63d0\u9192\uff1a\u65b0\u540c\u4e8b\u52a0\u5165");b.find(".content").prepend(k);b.find(".date").html(e)},
renderJoinApplicationOne:function(a,b){var c=a.sender,e=a.operation,f=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");b.find(".j_date").html(f);b.find(".j_mesBox").attr("type","applyJoin");"agree"==e.result||"refuse"==e.result?(a.operation.userId&&a.operation.userId!=a.receiver.id?b.find(".j_user").text(e.userName):b.find(".j_user").text("\u60a8"),b.find(".usercard-toggle").attr("userid",e.userId),b.find(".j_user").data("employee",e),e.avatar?b.find(".j_avatar").removeClass("hide").attr("src",
"/base/download/"+e.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png"),"agree"==a.operation.result?b.find(".j_event span.j_text").prepend("\u63a5\u53d7\u4e86\u201c"+c.username+"\u201d\u7684\u52a0\u5165\u7533\u8bf7"):b.find(".j_event span.j_text").prepend("\u62d2\u7edd\u4e86\u201c"+c.username+"\u201d\u7684\u52a0\u5165\u7533\u8bf7")):"undo"==e.result?(b.find(".j_user").text(c.username),b.find(".usercard-toggle").attr("userid",c.id),b.find(".j_user").data("employee",
c),c.avatar?b.find(".j_avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png"),this.readed||b.find("#j_optbtn").removeClass("hide"),b.find(".j_event span.j_text").prepend("\u7533\u8bf7\u52a0\u5165\u201c"+TEAMS.currentTenant.tenantName+"\u201d")):"cancel"==e.result?(b.find(".j_user").text(c.username),b.find(".j_user").data("employee",c),c.avatar?b.find(".j_avatar").removeClass("hide").attr("src","/base/download/"+
c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png"),b.find(".j_event span.j_text").prepend("\u53d6\u6d88\u4e86\u52a0\u5165\u7533\u8bf7")):(b.find(".j_user").text(c.username),b.find(".usercard-toggle").attr("userid",c.id),b.find(".j_user").data("employee",c),c.avatar?b.find(".j_avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png"));b.find(".j_content").prepend(a.message)},
renderShareApplicationOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),f=a.target;b.find(".j_mesBox").attr("type","shareJoin");b.find(".j_user").text(c.username);b.find(".usercard-toggle").attr("userid",c.id);b.find(".j_user").data("employee",c);b.find(".j_date").html(e);c.avatar?b.find(".j_avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png");c=this.getModuleName(f.module);
e=b.find(".j_event");a.operation.userId&&a.operation.userId!=a.receiver.id?e.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+c+"\u7684\u5171\u4eab\u7533\u8bf7\u53cd\u9988"):e.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+c+"\u7684\u5171\u4eab\u7533\u8bf7");"calendar"==f.module&&(f.module="agenda");"agree"==a.operation.result||"refuse"==a.operation.result?(e.find("span a").removeClass("hide").text(f.name),e.find("span a").attr({"data-id":f.id,"data-module":f.module}),
c=a.message.split("\uff1a")[1],b.find(".j_content").prepend(c?c:a.message)):("undo"==a.operation.result?this.readed||b.find("#j_optbtn").removeClass("hide"):b.find(".j_mesBox").attr("type","shareJoin"),b.find(".j_content a").removeClass("hide").text(f.name),b.find(".j_content a").attr({"data-id":f.id,"data-module":f.module}));"agenda"==f.module&&(f.module="calendar")},renderReceiveApplicationOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),f=a.target;
b.find(".j_mesBox").attr("type","applyReceive");b.find(".j_user").text(c.username);b.find(".usercard-toggle").attr("userid",c.id);b.find(".j_user").data("employee",c);b.find(".j_date").html(e);c.avatar?b.find(".j_avatar").removeClass("hide").attr("src","/base/download/"+c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png");c=this.getModuleName(f.module);e=b.find(".j_event");a.operation.userId&&a.operation.userId!=a.receiver.id?e.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+
c+"\u7684\u9886\u53d6\u7533\u8bf7\u53cd\u9988"):e.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761"+c+"\u7684\u9886\u53d6\u7533\u8bf7");"agree"==a.operation.result||"refuse"==a.operation.result?(e.find("span a").removeClass("hide").text(f.name),e.find("span a").attr({"data-id":f.id,"data-module":f.module}),f=a.message.split("\uff1a")[1],b.find(".j_content").prepend(f?f:a.message)):("undo"==a.operation.result?this.readed||b.find("#j_optbtn").removeClass("hide"):b.find(".j_mesBox").attr("type",
"applyReceive"),b.find(".j_content a").removeClass("hide").text(f.name),b.find(".j_content a").attr({"data-id":f.id,"data-module":f.module}))},renderFollowApplicationOne:function(a,b){var c=a.sender,e=Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");b.find(".j_mesBox").attr("type","follow");b.find(".j_user").text(c.username);b.find(".usercard-toggle").attr("userid",c.id);b.find(".j_user").data("employee",c);b.find(".j_date").html(e);c.avatar?b.find(".j_avatar").removeClass("hide").attr("src",
"/base/download/"+c.avatar.p3):b.find(".j_avatar").removeClass("hide").attr("src","images/avatar.png");c=b.find(".j_event");a.operation.userId&&a.operation.userId!=a.receiver.id?c.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761\u5173\u6ce8\u7533\u8bf7\u53cd\u9988"):c.find("span.j_text").prepend("\u5411\u60a8\u53d1\u51fa\u4e86\u4e00\u6761\u5173\u6ce8\u7533\u8bf7");if("agree"==a.operation.result||"refuse"==a.operation.result){var f=a.message.split("\uff1a")[1];b.find(".j_content").prepend(f?
f:a.message)}else"undo"==a.operation.result?(this.readed||b.find("#j_optbtn").removeClass("hide"),b.find(".j_content").addClass("hide")):b.find(".j_content").prepend(f)},renderItemMessages:function(a){var b=this,c=$(b.el);a=b.feedModel;var e=b.msgType||"newitem",h=b._module,k=b.isRead?1:0,r=b.keywords;b.router="/feed/"+e;a.isread=k;var p=b.changeTypeToKey(e);a.messageType=p;a.module=h;a.searchWords=r;a.currentEmployeeId=TEAMS.currentUser.id;a.pageNo=b.pageNo||1;c.find(".j_mesmore").addClass("hide");
c.find(".no-result").addClass("hide");c.find(".loading_small").removeClass("hide");a.getFeedMessagePage(function(a){if(a.actionMsg&&0!=a.actionMsg.code)f.notify(a.actionMsg.message);else if(c.find(".j_hasMesInfo").removeClass("hide"),a=a.data)if(b.isFirst&&0>=a.totalCount)b.checkUnreadNum(e,p),$("#j_communi-main #j_message .j_dynamicTab li.j_read").trigger("click");else{c.find(".loading_small").addClass("hide");var h=a.result;0==h.length?(c.find(".j_meslist").addClass("hide"),c.find(".j_noMesInfo").removeClass("hide"),
c.find(".j_hasMesInfo").addClass("hide")):(c.find(".j_meslist").removeClass("hide"),c.find(".no-result").addClass("hide"));for(var n=0,r=h.length;n<r;n++)b.renderOneMes(h[n],k);a.hasNext?c.find(".j_mesmore").removeClass("hide"):c.find(".j_mesmore").addClass("hide")}})},renderOneMes:function(a,b){var c=$(this.el),e=a.userData,f=a.target.module,k=this.getModuleName(f),h=c.find("#j_mesItemBoxClone").clone().removeAttr("id");1==b&&(h.find(".j_status i").toggleClass("icon-envelope"),h.find(".j_status i").toggleClass("icon-envelope-alt"));
var p=a.sender;if(!p||p.id!=TEAMS.currentUser.id){h.attr({id:a.id,"data-id":a.target.id,"data-module":a.target.module});h.find(".j_avatar").attr("userid",p.id);var s=p&&p.avatar&&p.avatar.p3?"/base/download/"+p.avatar.p3:"images/avatar.png";h.find(".j_avatar").attr("src",s);h.find(".j_time time").text(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"):"");switch(this.msgType){case "newitem":h.find(".j_user").text(p.username);h.find(".j_user").attr("userid",p.id);
h.find(".j_event span.text").text("\u521b\u5efa\u4e86\u4e00\u4e2a"+k+"\u4e8b\u9879");k=h.find(".j_content a").removeClass("hide").text(a.target.name);k.attr({"data-id":a.target.id,"data-module":"calendar"==f?"agenda":f});break;case "newcomment":h.find(".j_user").text(p.username);h.find(".j_user").attr("userid",p.id);h.find(".j_event span.text").prepend("\u63d0\u4ea4\u4e86\u4e00\u6761"+k+"\u7684\u65b0\u53cd\u9988 ");a.target&&a.target.name&&"share"!=a.target.module&&(p=h.find(".j_event a").removeClass("hide").text(a.target.name),
p.attr({"data-id":a.target.id,"data-module":"calendar"==f?"agenda":f}));if(k=a.message)k=$.faceConvert(this.buildAtContent(k,e,a)),h.find(".j_content").removeClass("hide").prepend(k);break;case "newfinish":h.find(".j_user").text(p.username);h.find(".j_user").attr("userid",p.id);h.find(".j_event span.text").text("\u5b8c\u6210\u4e86\u4e00\u4e2a"+k+"\u4e8b\u9879");k=h.find(".j_content a").removeClass("hide").text(a.target.name);k.attr({"data-id":a.target.id,"data-module":f});break;case "atme":"share"==
f?(h.find(".j_user").text(p.username),h.find(".j_user").attr("userid",p.id),h.find(".j_event span.text").removeClass("hide").text("\u63d0\u4ea4\u4e86\u4e00\u6761"+k+"\u7684@\u6211\u7684\u53cd\u9988")):(h.find(".j_user").text(p.username),h.find(".j_user").attr("userid",p.id),a.target.name?(p=h.find(".j_event a").removeClass("hide").text(a.target.name),p.attr({"data-id":a.target.id,"data-module":"calendar"==f?"agenda":f}),h.find(".j_event span.text").prepend("\u63d0\u4ea4\u4e86\u4e00\u6761"+k+"\u7684@\u6211\u7684\u53cd\u9988 ")):
h.find(".j_event span.text").text("\u63d0\u4ea4\u4e86\u4e00\u6761"+k+"\u7684@\u6211\u7684\u53cd\u9988")),k=a.message,k=$.faceConvert(this.buildAtContent(k,e,a)),h.find(".j_content").removeClass("hide").prepend(k)}c.find(".j_meslist").append(h)}},buildAtContent:function(a,b,c){c={};if(null!=b&&""!=b){var e=[];if(e=eval(b))for(var h=0;h<e.length;h++)e[h]&&e[h].userIdIndex&&0!=e[h].userIdIndex&&(a=a.substring(0,e[h].userIdIndex-1)+"@"+e[h].userName+a.substring(e[h].userIdIndex-1),c["@"+e[h].userName]=
"\x3ca class\x3d'at-user usercard-toggle' userId\x3d'"+e[h].userId+"'\x3e@"+e[h].userName+"\x3c/a\x3e")}a=f.initMessage(a);for(h in c)a=a.replace(h,c[h]);return a},changeReadStyleById:function(a){a=$(this.el).find(".j_meslist div#"+a);a.find(".j_status i").hasClass("icon-envelope-alt")&&a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope")},changeReadStyle:function(a,c){a.find("#j_optbtn").hasClass("hide")&&(a.find(".icon-envelope-alt").removeClass("icon-envelope-alt").addClass("icon-envelope"),
b.markMessageRead(c))},clickAcceptApply:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),h=e.data("blogMessage").id;c.id=h;c.accept(function(a){b.messageHandle(h,"followApply",e,"accept");f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseApply:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),h=e.data("blogMessage").id;c.id=h;c.refuse(function(a){b.messageHandle(h,"followApply",e,"refuse");f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7")})},
clickAcceptJoin:function(a){var b=this,c=b.messagesModel,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeToKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.accept(function(a){b.messageHandle(k,"ApplyJoin",h,"accept");f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseJoin:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),h=e.data("blogMessage").id;c.id=h;
c.refuse(function(a){b.messageHandle(h,"ApplyJoin",e,"refuse");f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7")})},clickAcceptShareJoin:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),h=e.data("blogMessage").id;c.id=h;c.accept(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(h,"shareApply",e,"accept"),f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7"))})},clickRefuseShareJoin:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),
h=e.data("blogMessage").id;c.id=h;c.refuse(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(h,"shareApply",e,"refuse"),f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7"))})},clickAcceptApplyReceive:function(a){var b=this,c=b.messagesModel,e=b.type,h=$(a.currentTarget).parents(".message-item");a=h.data("blogMessage");var k=a.id;c.id=k;c.mcType=b.changeTypeToKey(e);c.aptEid=a.sender.id;c.aptUid=a.sender.userId;c.optEid=a.receiver.id;c.targetId=a.target.id;c.accept(function(a){h.data("processMessage",
a.processMessage);b.messageHandle(k,"applyReceive",h,"accept");a.message?f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7"+a.processMessage):f.notify("\u5df2\u63a5\u53d7\u8be5\u7533\u8bf7")})},clickRefuseApplyReceive:function(a){var b=this,c=b.messagesModel,e=$(a.currentTarget).parents(".j_mesitem"),h=e.data("blogMessage").id;c.id=h;c.refuse(function(a){a.message&&null==a.blogMessage?f.notify(a.message):(b.messageHandle(h,"applyReceive",e,"refuse"),f.notify("\u5df2\u62d2\u7edd\u8be5\u7533\u8bf7"))})},
messageHandle:function(a,c,e,f){if(a&&c){a=e.find("a.j_user").text();f="accept"==f?"\u63a5\u53d7\u4e86":"\u62d2\u7edd\u4e86";e.find("#j_optbtn").addClass("hide");e.find(".j_status i").attr("class","icon-envelope");e.find(".j_content").removeClass("hide");switch(c){case "shareApply":e.find(".j_content").html("\u60a8"+f+a+"\u7684\u5171\u4eab\u7533\u8bf7");break;case "applyReceive":f="\u60a8"+f+a+"\u7684\u9886\u53d6\u7533\u8bf7";(a=e.data("processMessage"))&&(f+=a);e.find(".j_content").html(f);break;
case "followApply":e.find(".j_content").html("\u60a8"+f+a+"\u7684\u5173\u6ce8\u7533\u8bf7");break;case "ApplyJoin":e.find(".j_content").html("\u60a8"+f+a+"\u7684\u52a0\u5165\u7533\u8bf7");break;default:e.find(".j_content").html(f+a)}b.markMessageRead(c);this.minusCount()}},minusCount:function(){var a=$("#memberlist-wrapper .j_mesRecent div.active"),b=parseInt(a.data("count"))||0;if(!(0>=b)){var c=99<b-1?"99+":b-1;a.find(".count").text(c||"").attr("title",b);a.data("count",b)}},changeTypeToKey:function(a){var b=
"";switch(a){case "remind":b="6";break;case "follow":b="1";break;case "applyJoin":b="2";break;case "shareJoin":b="13";break;case "applyReceive":b="14";break;case "newitem":b="3";break;case "newcomment":b="5";break;case "newfinish":b="4";break;case "atme":b="12"}return b},checkUnreadNum:function(a,b){var c=$("#j_message #j_dropMessage .j_"+a+" span").text();void 0!=c&&0<c&&this.messagesModel.checkUnreadNum(TEAMS.currentUser.id,b)},leftToolsFilter:function(a){var b=$("#j_communi-content #j_message").find(".j_toolList");
console.log(b);"newfinish"==a&&(b.find(".j_document").addClass("hide"),b.find(".j_customer").addClass("hide"),b.find(".j_workreport").addClass("hide"),b.find(".j_share").addClass("hide"),b.find(".j_agenda").addClass("hide"),b.find(".j_saleChance").addClass("hide"),b.find(".j_production").addClass("hide"));"newcomment"==a&&b.find(".j_share").addClass("hide");"unfinish"==a&&($("#search-group .j_saleChance").remove(),$("#search-group .j_production").remove());"newitem"==a&&b.find(".j_share").addClass("hide")},
remove:function(){$(this.el).off(".MsgChannel")}});m.exports=h});
define("teams/portal/chatchannelview","teams/utils teams/wechat/chatmodel teams/component/chatHistoryView teams/wechat/ChatService teams/face/emojiarea teams/base/configmodel teams/minichat/pasteuploadfile".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/wechat/chatmodel"),c=h("teams/component/chatHistoryView"),b=h("teams/wechat/ChatService"),a=h("teams/face/emojiarea"),d=h("teams/base/configmodel"),g=h("teams/minichat/pasteuploadfile");h=Backbone.View.extend({chatDate:null,initialize:function(c){this.chatmodel=
new e;this.chatService=new b;this.configmodel=new d;this.type=c.type||"employee";this.targetId=c.targetId;this.el=c.container||"#j_communi-body";$(this.el).html(f.template("portal.chatchannel"));this.chatattachmentURL="/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID;a($);$("#j_message-textarea").emojiarea({emojiHeight:-230,emojiLeft:-70,buttonClass:"chat-emoji",buttonParent:".i-chat-view .a-tools"})},delegateEvents:function(){var a=this,b=$(a.el);f.layout(".j_chatpostScr",[{gotoTopButton:!0}]);b.off("focusout.ChatChanne",
"#j_message-textarea").on("focusout.ChatChanne","#j_message-textarea",function(b){b=$(this).val();TEAMS.ownCache&&""!=$.trim(b)&&(TEAMS.ownCache["chatchanne#"+a.type+"#"+a.targetId]=b)});b.on("click.ChatChanne",".j_btn-send",function(){if(!(0<$("#pasteimg").length)){var c=$(this);if(!c.hasClass("disabled")){c.addClass("disabled");var d=$("#j_message-textarea").val();d.isBlank()?(c.removeClass("disabled"),f.alert("\u8bf7\u8f93\u5165\u5fae\u4fe1\u6d88\u606f")):1E3<d.length?(c.removeClass("disabled"),
$(".word-count").removeClass("hide"),f.notify("\u6700\u591a\u53d1\u90011000\u5b57")):(a.sendMessage({message:d,chatType:a.type,targetId:a.targetId},function(){TEAMS.ownCache&&(TEAMS.ownCache["chatchanne#"+a.type+"#"+a.targetId]="");c.removeClass("disabled")}),$("#j_message-textarea").val(""),b.find("#limitTip").text("\u8fd8\u53ef\u4ee5\u8f93\u51651000\u5b57"))}}});b.on("click.ChatChanne",".j_sendType_menu li",function(b){b=$(this);b.hasClass("active")||a.setEnterKey(b.data("type"),!0)});b.on("keydown.ChatChanne",
"#j_message-textarea",function(c){if("CtrlEnter"==(b.find(".j_sendType_menu").data("type")||"CtrlEnter")){if(c.ctrlKey&&13==c.which)return b.find(".j_actionbar .j_btn-send").click(),!1}else if(13==c.which)if(c.ctrlKey)$(this).val($(this).val()+"\r\n");else return b.find(".j_actionbar .j_btn-send").click(),!1;c="";var d=$(this).val();1E3>=d.length?c="\u8fd8\u53ef\u4ee5\u8f93\u5165"+(1E3-d.length)+"\u5b57":1E3<d.length&&(c="\u5df2\u8d85\u51fa"+(d.length-1E3)+"\u5b57");$(a.el+" #limitTip").text(c)});
b.on("click.ChatChanne","#chat-history",function(b){var d,e;"employee"==a.type?d=a.targetId:"channel"==a.type&&(e=a.targetId);a.chatHistoryView=new c({userId:d,channelId:e,chatType:a.type});a.chatHistoryView.render()});(new $.paste($("#j_message-textarea"))).on("pasteImage.ChatChanne",function(c,d){var e=a.type,g=a.targetId,f={};f.dataContentType=d.dataContentType;"channel"==e?f.channelId=g:f.receiver=g;f.base64Data=d.dataURL;$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",
data:f,success:function(c){a.createChatBox(c.chatMessage,"right",b,g);setTimeout(function(){$(".j_chatpostScr").mCustomScrollbar("update");$(".j_chatpostScr").mCustomScrollbar("scrollTo","bottom")},300)}})}).on("pasteFile.ChatChanne",function(c,d){var e=a.type,f=a.targetId,h={};h.dataFileName=d.pataFileName;h.dataContentType=d.dataContentType;"channel"==e?h.channelId=f:h.receiver=f;h.base64Data=d.dataURL;d.dataContentType&&0<=d.dataContentType.indexOf("image")?(new g({dataURL:d.dataURL,uploadURL:"/base/chatattachment/paste.json",
uploadParam:h})).render():$.ajax({type:"post",url:"/base/chatattachment/paste.json",dataType:"json",data:h,success:function(c){a.createChatBox(c.chatMessage,"right",b,f);setTimeout(function(){$(".j_chatpostScr").mCustomScrollbar("update");$(".j_chatpostScr").mCustomScrollbar("scrollTo","bottom")},300)}})});b.on("afterPaste.ChatChanne",function(b,c){a.createChatBox(c.chatMessage,"right",$(".smwx-box .smwx-chat"),a.targetId);setTimeout(function(){$("#smwx-chat-top").mCustomScrollbar("update");$("#smwx-chat-top").mCustomScrollbar("scrollTo",
"bottom")},300)});var d=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:".j_portalchat_tool #chat-image-mini",max_file_size:"10mb",container:".j_portalchat_tool",filters:[{title:"\u56fe\u7247",extensions:"JPG,PNG,JPEG,GIF,BMP"}],url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});d.init();d.bind("FilesAdded",function(b,c){if(5<c.length){f.notify("\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u4e0a\u4f205\u4e2a\u6587\u4ef6","\u6587\u4ef6\u4e2a\u6570\u8d85\u8fc7\u9650\u5236",
"error");for(var d=0;d<c.length;d++)b.removeFile(c[d])}else b.refresh(),b.settings.url="channel"==a.type?a.chatattachmentURL+"\x26type\x3dimage\x26channelId\x3d"+a.targetId:a.chatattachmentURL+"\x26receiver\x3d"+a.targetId+"\x26type\x3dimage",b.start()});d.bind("UploadProgress",function(a,b){});d.bind("Error",function(a,b){-601==b.code?f.notify("\u53ea\u80fd\u4e0a\u4f20\u56fe\u7247","\u6587\u4ef6\u7c7b\u578b\u9519\u8bef","error"):-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6",
"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});d.bind("FileUploaded",function(b,c,d){b=jQuery.parseJSON(d.response).chatMessage;a.createChatBox(b,"right",$(a.el),a.targetId);setTimeout(function(){$(".j_chatpostScr").mCustomScrollbar("update");$(".j_chatpostScr").mCustomScrollbar("scrollTo","bottom")},300)});d=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",browse_button:".j_portalchat_tool #chat-attachment",max_file_size:"10mb",container:".j_portalchat_tool",
url:"/base/chatattachment.json?ETEAMSID\x3d"+ETEAMSID,flash_swf_url:"js/plupload.swf"});d.init();d.bind("FilesAdded",function(b,c){if(5<c.length){f.notify("\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u4e0a\u4f205\u4e2a\u6587\u4ef6","\u6587\u4ef6\u4e2a\u6570\u8d85\u8fc7\u9650\u5236","error");for(var d=0;d<c.length;d++)b.removeFile(c[d])}else b.refresh(),b.settings.url="channel"==a.type?a.chatattachmentURL+"\x26type\x3dattachment\x26channelId\x3d"+a.targetId:a.chatattachmentURL+"\x26receiver\x3d"+
a.targetId+"\x26type\x3dattachment",b.start()});d.bind("UploadProgress",function(a,b){});d.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc710M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});d.bind("FileUploaded",function(b,c,d){b=jQuery.parseJSON(d.response).chatMessage;a.createChatBox(b,"right",$(a.el),a.targetId);setTimeout(function(){$(".j_chatpostScr").mCustomScrollbar("update");$(".j_chatpostScr").mCustomScrollbar("scrollTo",
"bottom")},300)})},render:function(){var a=$(this.el);this.targetId!=TEAMS.currentUser.id&&(TEAMS.ownCache&&TEAMS.ownCache["chatchanne#"+this.type+"#"+this.targetId]&&a.find("#j_message-textarea").val(TEAMS.ownCache["chatchanne#"+this.type+"#"+this.targetId]),this.renderHistoryMessage(),a=_.find(TEAMS.userConfig,function(a){return"chat.enter.key"==a.configKey}),this.setEnterKey(a&&a.configValue))},setEnterKey:function(a,b){var c=$(this.el),d=a||"CtrlEnter",c=c.find(".j_actionbar"),e="CtrlEnter"==
d?"Ctrl+Enter":"Enter";c.find(".j_sendType_menu").data("type",d);c.find(".j_key-tip").html('\x3ci class\x3d"icon-exclamation-sign icoinline"\x3e\x3c/i\x3e\u6309'+e+"\u952e\u53d1\u9001");c.find('ul.j_sendType_menu li[data-type\x3d"'+d+'"]').addClass("active").siblings().removeClass("active");if(b){var g=!1;_.each(TEAMS.userConfig,function(a){"chat.enter.key"==a.configKey&&(a.configValue=d,g=!0)});g||TEAMS.userConfig.push({configKey:"chat.enter.key",configValue:d});this.configmodel.saveConfig({configKey:"chat.enter.key",
configValue:d})}},renderHistoryMessage:function(){var a=this,b=$(a.el),c=null,d=null;"channel"==a.type?d=a.targetId:c=a.targetId;a.chatService.getRecentChatMessages(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,a.type,c,d,1,10,function(e){if(0!=e.actionMsg.code)f.notify(e.actionMsg.message);else{var g=e.data;e=g.result;if(null!=e&&0<e.length)if(a.chatDate=null,5==g.pageSize)for(var h=e.length-1;0<=h;h--){var w=e[h],v=null,g=w.senderEmployeeId==TEAMS.currentUser.id?"right":"left";a.createChatBox_New(w,
g,$(a.el),a.targetId);0!=h&&(v=e[h-1].sendTime);a.createDateLine(w.sendTime,v,a.targetId)}else for(h=e.length-1;0<=h;h--)w=e[h],v=null,g=w.senderEmployeeId==TEAMS.currentUser.id?"right":"left",a.createChatBox_New(w,g,$(a.el),a.targetId),0!=h&&(v=e[h-1].sendTime),a.createDateLine(w.sendTime,v,a.targetId);(e=b.find(".j_chatpostScr"))&&e.length&&(e.mCustomScrollbar("update"),e.mCustomScrollbar("scrollTo","bottom"));b.find(".fancybox").fancybox({closeBtn:!0});a.markChatRead(c,d)}})},createChatBox_New:function(a,
b,c,d){if(!(0<$("#j_communi-body .j_chatpostScr #"+a.id).length)){c=c.find("#j_chatBox_clone").clone().removeAttr("id").attr("id",a.id);c.find(".avatar img,.j_name").attr("userid",a.senderEmployeeId);1E4==a.senderEmployeeId?(c.find(".usercard-toggle").removeClass("usercard-toggle"),c.find(".avatar img").attr("src","images/service.png")):(a.senderAvatar&&null!=a.senderAvatar.p5&&c.find(".avatar img").attr("src","/base/download/"+a.senderAvatar.p5),"right"!=b&&c.find(".j_name").text(a.senderName));
if(a.relModule){d=a.message;switch(a.relModule){case "task":d="[\u4efb\u52a1]"+d;break;case "document":d="[\u6587\u6863]"+d;break;case "customer":d="[\u5ba2\u6237]"+d;break;case "workflow":d="[\u5ba1\u6279]"+d;break;case "mainline":d="[\u9879\u76ee]"+d}c.find(".bubble").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+a.relEntityId+"' data-module\x3d'"+a.relModule+"' data-id\x3d'"+a.relEntityId+"'\x3e"+d+"\x3c/a\x3e")}else a.relImageId?c.find(".bubble").html("\x3ca class\x3d'fancybox' type\x3d'image' href\x3d'/base/download/"+
a.relChatImage.sourceImageId+"' \x3e\x3cimg    src\x3d'/base/download/"+a.relChatImage.smallImageId+"' \x3e\x3c/a\x3e"):a.relVoiceId?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.relVoiceId+"?download\x3dtrue' data-value\x3d"+a.relVoiceId+"\x3e"+a.relVoiceName+"\x3c/a\x3e"):a.relAttachmentId?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.relAttachmentId+"?download\x3dtrue' data-value\x3d"+a.relAttachmentId+"\x3e"+a.relAttachmentName+"\x3c/a\x3e"):a.message&&
c.find(".bubble").html($.faceConvert(f.initMessage(a.message)));d=Date.create(a.sendTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(a.sendTime).is("today")?c.find(".chat-time time").text(Date.create(a.sendTime).format("{HH}:{mm}:{ss}")).data("lastDate",d):c.find(".chat-time time").text(d).data("lastDate",d);"right"==b&&c.addClass(b);$(this.el).find("#chatMessageList").append(c)}},createChatBox:function(a,b,c,d){if(!(0<$("#j_communi-body .j_chatpostScr #"+a.id).length)){c=c.find("#j_chatBox_clone").clone().attr("id",
a.id);c.find(".avatar img,.j_name").attr("userid",a.sender.id);1E4==a.sender.id?(c.find(".usercard-toggle").removeClass("usercard-toggle"),c.find(".avatar img").attr("src","images/service.png")):(null!=a.sender.avatar&&null!=a.sender.avatar.p5&&c.find(".avatar img").attr("src","/base/download/"+a.sender.avatar.p5),"right"!=b&&c.find(".j_name").html(a.sender.username));if(a.link){d=a.message;switch(a.module){case "task":d="[\u4efb\u52a1]"+d;break;case "document":d="[\u6587\u6863]"+d;break;
case "customer":d="[\u5ba2\u6237]"+d;break;case "workflow":d="[\u5ba1\u6279]"+d;break;case "mainline":d="[\u9879\u76ee]"+d}c.find(".bubble").html("\x3ca class\x3d'entitybox-toggle' data-value\x3d'"+a.link+"' data-module\x3d'"+a.module+"' data-id\x3d'"+a.link+"'\x3e"+d+"\x3c/a\x3e")}else a.chatImage?c.find(".bubble").html("\x3ca class\x3d'fancybox' type\x3d'image' href\x3d'/base/download/"+a.chatImage.imageUrl+"' \x3e\x3cimg    src\x3d'/base/download/"+a.chatImage.smallUrl+"' \x3e\x3c/a\x3e"):a.voice?
c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.voice.id+"?download\x3dtrue' data-value\x3d"+a.voice.id+"\x3e"+a.voice.name+"\x3c/a\x3e"):a.attachment?c.find(".bubble").html("\x3cspan\x3e\x3ca href\x3d'/base/download/"+a.attachment.id+"?download\x3dtrue' data-value\x3d"+a.attachment.id+"\x3e"+a.attachment.name+"\x3c/a\x3e"):a.message&&c.find(".bubble").html($.faceConvert(f.initMessage(a.message)));d=Date.create(a.postTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}");Date.create(a.postTime).is("today")?
c.find(".chat-time time").text(Date.create(a.postTime).format("{HH}:{mm}:{ss}")).data("lastDate",d):c.find(".chat-time time").text(d).data("lastDate",d);"right"==b&&c.addClass(b);$(this.el).find("#chatMessageList").append(c)}},createDateLine:function(a,b,c){a=this.confirmDate(a,!0);c=null;null!=b&&(c=this.confirmDate(b,!0));c!=a&&(b=$(this.el).find("#j_dataLineClone").clone().removeAttr("id"),b.find("span").html(a),$(this.el).find("#chatMessageList").append(b))},confirmDate:function(a,b){var c=Date.create(a),
d=c.format("{MM}-{dd}"),e=c.format("{yyyy}-{MM}-{dd}");c.is("today")?(c=c.format("{HH}:{mm}"),e=null):c.is("yesterday")?e=c="\u6628\u5929":c=d;return b?e:c},sendMessage:function(a,b){var c=this,d=null,e=null,g=null;"channel"==a.chatType?(d="channel",g=a.targetId):(d="employee",e=a.targetId);this.chatService.sendMessage(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,d,e,g,a.message,function(a){var d=void 0==g?e:g;c.createChatBox_New(a.data,"right",$(c.el),d);b&&b();0!=a.actionMsg.code&&f.notify(a.actionMsg.message)})},
markChatRead:function(a,b){var c;void 0!=a?c=$("#memberlist-wrapper .j_member-list div#"+a):void 0!=b&&(c=$("#memberlist-wrapper .j_member-list div#"+b));0<c.data("count")&&(this.chatService.markRead(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,this.type,a,b,function(a){0!=a.actionMsg.code&&window.console&&console.error(a.actionMsg.message)}),c.data("count",0).find(".count").text("").attr("title",0))},websocket_chatPortalMessage:function(a){var b="left",c=a.chatMessageLog.chatMessage;if("channel"==
c.chatType){a=c.receiverChannelId;if("channel"!=this.type||a!=this.targetId)return;c.senderEmployeeId==TEAMS.currentUser.id&&(b="right");this.chatService.markRead(TEAMS.currentTenant.tenantKey,TEAMS.currentUser.id,"channel",null,a,function(a){0!=a.actionMsg.code&&f.notify(a.actionMsg.message)})}else{if("employee"!=this.type)return;c.senderEmployeeId==TEAMS.currentUser.id?(b="right",a=c.receiverEmployeeId):a=c.senderEmployeeId;if(a!=this.targetId)return;this.chatService.markRead(TEAMS.currentTenant.tenantKey,
TEAMS.currentUser.id,"employee",c.senderEmployeeId,null,function(a){0!=a.actionMsg.code&&f.notify(a.actionMsg.message)})}this.createChatBox_New(c,b,$(this.el),a);$(".j_chatpostScr").mCustomScrollbar("update");$(".j_chatpostScr").mCustomScrollbar("scrollTo","bottom")},remove:function(){$(this.el).off(".ChatChanne");this.chatHistoryView&&this.chatHistoryView.remove()}});m.exports=h});
define("teams/formstat/formreportmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.formId=f.formId},getReports:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/form/queryFormReports.json",dataType:"json",data:JSON.stringify({formId:this.formId}),success:function(e){f&&f(e)}})},queryFormReportsForReport:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/form/queryFormReportsForReport.json",dataType:"json",
data:JSON.stringify({formId:this.formId}),success:function(e){f&&f(e)}})},deleteForm:function(f,e){$.ajax({type:"post",url:"/form/delete.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formstat/stattextview",["teams/formstat/statbaseview","teams/formstat/formfielddetailview","teams/utils"],function(h,q,m){q=h("teams/formstat/statbaseview");var f=h("teams/formstat/formfielddetailview"),e=h("teams/utils");h=q.extend({render:function(){this.tpl=e.template("formstat.stattextview",this.cdata);this.container=$(this.tpl);this.wrappercontainer.append(this.container);this.bindEvents()},bindEvents:function(){var c=this;this.container.on("click.StatTextView",".search-detail",
function(b){b.preventDefault();b=$(this);var a={};a.componetKey=b.attr("component-key");a.fieldId=b.attr("field-id");a.fieldInfo=c.cdata;(new f(a)).showDetail()})}});m.exports=h});
define("teams/formstat/formstatmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(){this.pageSize=10},findForm:function(f,e){f.pageSize=this.pageSize;$.ajax({type:"post",url:"/formdatastat/findCellListStat.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findRowListStatForBase:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatastat/findRowListStatForBase.json",dataType:"json",data:JSON.stringify(f),
success:function(c){e&&e(c)}})},findRowListStat:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatastat/findRowListStat.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},exportParam:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",async:!1,type:"post",url:"/formdatastat/exportParam.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},
findColumnField:function(f,e){$.ajax({type:"post",url:"/formdatastat/findColumnField.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveFormColumns:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatastat/saveFormColumns.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},findFiledOptions:function(f,e){$.ajax({type:"get",url:"/formdatastat/findFiledOptions.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},
deleteFlow:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/flow/destroy.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},getFormField:function(f,e){$.ajax({type:"get",url:"/formdatastat/findFormFieldByFormId.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},incollect:function(f,e){$.ajax({type:"post",url:"/formdatareport/incollect.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formstat/baseformstatsearchview",["teams/utils","teams/component/typeahead","teams/formstat/formstatmodel","teams/workflow/formview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/formstat/formstatmodel"),b=h("teams/workflow/formview");q=Backbone.View.extend({initialize:function(a){this.el=a.el?a.el:".j_advanceSearch";this.formFields=a.formFields;this.module=a.module;this.model=new c;switch(this.module){case "task":$(this.el).html(f.template("formstat.searchfortask"));
break;default:$(this.el).html(f.template("formstat.basesearch"))}this.formView=new b},delegateEvents:function(){var a=this,b=$(a.el);b.on("change.FormStatSearchView",".j_formField-select select",function(){var c=$(this),l=(new Date).getTime(),n=$(this).find("option:selected"),k=n.attr("id"),r=n.attr("key"),n="";switch(r){case "name":n=b.find("#name-clone").clone();c.parent().parent().attr("class","sch-group j_nameSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());break;
case "createTime":n=b.find("#createTime-clone").clone();n.find(".j_datetime").attr("id","j_datetime"+l);c.parent().parent().attr("class","sch-group j_createTimeSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());f.datepicker({el:a.el+" #j_datetime"+l+" #startTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+l).find("#startTime"),d=$(a.el+" #j_datetime"+l).find("#endTime");d.val()&&b>d.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),
c.val("")):c.val(b)}});f.datepicker({el:a.el+" #j_datetime"+l+" #endTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+l).find("#startTime"),d=$(a.el+" #j_datetime"+l).find("#endTime");c.val()&&b<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),d.val("")):d.val(b)}});break;case "type":n=b.find("#type-clone").clone();c.parent().parent().attr("class","sch-group j_typeSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());
break;case "operator":n=b.find("#operator-clone").clone();n.find(".j_optcontainer").attr("id","j_opt"+l);c.parent().parent().attr("class","sch-group j_optSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());e({el:a.el+" #j_opt"+l+" #typeahead-flow-employee",callback:function(c){if(c&&!$.isEmptyObject(c)){var e=b.find("#j_opt"+l+" .j_selected");a.renderTypeheader(e,c)}}});break;case "content":n=b.find("#content-clone").clone();c.parent().parent().attr("class","sch-group j_contentSearchGroup");
c.parent().parent().find(".j_formField-condition").html(n.html());break;case "manager":n=b.find("#manager-clone").clone();n.find(".j_optcontainer").attr("id","j_opt"+l);c.parent().parent().attr("class","sch-group j_managerSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());e({el:a.el+" #j_opt"+l+" #typeahead-flow-employee",callback:function(c){if(c&&!$.isEmptyObject(c)){var e=b.find("#j_opt"+l+" .j_selected");a.renderTypeheader(e,c)}}});break;case "duedate":n=b.find("#duedate-clone").clone();
n.find(".j_datetime").attr("id","j_datetime"+l);c.parent().parent().attr("class","sch-group j_duedateSearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());f.datepicker({el:a.el+" #j_datetime"+l+" #startTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+l).find("#startTime"),d=$(a.el+" #j_datetime"+l).find("#endTime");d.val()&&b>d.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),
c.val("")):c.val(b)}});f.datepicker({el:a.el+" #j_datetime"+l+" #endTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+l).find("#startTime"),d=$(a.el+" #j_datetime"+l).find("#endTime");c.val()&&b<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),d.val("")):d.val(b)}});break;case "priority":n=b.find("#priority-clone").clone();c.parent().parent().attr("class","sch-group j_prioritySearchGroup");c.parent().parent().find(".j_formField-condition").html(n.html());
break;default:var p=c.parent().parent();h.async("develop"==TEAMS.runMode?"form/form-plugin":"form.js?t_\x3d"+TEAMS.version,function(){h.async("form/form-plugin",function(b){formPlugin.renderStatSearch({parentEl:p,fieldId:k,componentKey:r,container:a.el})})})}});b.on("change.FormStatSearchView",".j_formField-condition .j_resultList",function(){var a=$(this),b=$(this).find("option:selected").attr("id"),c=a.val(),d=a.next();if(c&&b){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+b+"\x3e"+c+
"\x3c/a\x3e\x3c/span\x3e";d.find(".entity-item").each(function(a){b==$(this).find("a").attr("id")&&(e=null)});d.append(e)}a.find("option").eq(0).prop("selected",!0)});b.on("change.FormStatSearchView",".j_formField-condition .j_multipleSelect",function(){var a=$(this),b=$(this).find("option:selected").attr("id"),c=a.val(),d=a.next();if(c){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca status\x3d'+b+"\x3e"+c+"\x3c/a\x3e\x3c/span\x3e";d.find(".entity-item").each(function(a){b==$(this).find("a").attr("status")&&
(e=null)});d.append(e)}a.find("option").eq(0).prop("selected",!0)});b.on("click.FormStatSearchView",".j_addCondition",function(){var c=a.formFields,e=b.find("#form-search-clone").clone();b.find("#search-group-list").append(e.removeAttr("id").removeClass("hide"));e=e.find(".j_formField-select select");a.renderSearchComponent(c,e)});b.on("click.FormStatSearchView",".j_deletesearch",function(){$(this).parents(".sch-group").remove()});b.on("click.FormStatSearchView",".j_search-submit",function(){$("body").trigger("confirmSearch")});
b.on("click.FormStatSearchView",".j_search-close",function(){$("#initAdvanceSearch").trigger("click")});b.on("keyup.FormStatSearchView",".j_formFieldSearchGroup .j_numberCheck",function(a){a=$(this).val();$(this).val(a.replace(/[^\d.-]/g,""))});b.on("blur.FormStatSearchView",".j_formFieldSearchGroup .j_numberCheck",function(a){$(this).trigger("keyup.FormStatSearchView")});b.on("keydown.FormStatSearchView",".j_formFieldSearchGroup .j_numberCheck",function(a){a=parseInt(a.keyCode);var b=$(this).val();
if((110==a||190==a)&&0<=b.indexOf(".")||(109==a||173==a)&&0<=b.indexOf("-"))return!1});b.off("entitySelected","#statsearch-mainline .entity-toggle").on("entitySelected","#statsearch-mainline .entity-toggle",function(a){b.find("#statsearch-mainline").find(".entity-container").empty();for(var c=1;c<arguments.length;c++){var e=arguments[c],f=e.name,h=e.id;if(f&&h){var p='\x3cspan id\x3d"'+h+'" class\x3d"entity-item j_entity_item" name\x3d"j_entity_item"\x3e\x3ca id\x3d"'+h+'" class\x3d"entitybox-toggle" data-module\x3d"mainline" data-value\x3d"'+
h+'" data-id\x3d"'+h+'"\x3e'+f+"\x3c/a\x3e\x3c/span\x3e";b.find("#statsearch-mainline").find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(p=null)});b.find("#statsearch-mainline").find(".entity-container").append(p);b.find("#statsearch-mainline").find(".entity-container").find(".j_entity_item").data("object",e)}}})},render:function(){var a=$(this.el).find("#search-group-list .j_formField-select select");this.renderSearchComponent(this.formFields,a)},renderSearchComponent:function(a,
b){$(this.el);for(var c=0;c<a.length;c++){var e=a[c],f=e.id,h=e.componentKey,r=e.title,p=$("\x3coption id\x3d"+f+" key\x3d"+h+"\x3e"+r+"\x3c/option\x3e");e.subForm&&e.subForm.id&&(p=$("\x3coption id\x3d"+f+" subFormId\x3d"+e.subForm.id+" key\x3d"+h+"\x3e"+r+"\x3c/option\x3e"));"ImageComponent"!=h&&"FileComponent"!=h&&b.append(p)}b.trigger("change.FormStatSearchView")},assembleParam:function(){var a=this,b=$(a.el),c={},e=[];b.find("#search-group-list .j_nameSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");
a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",c=$.trim(a.find("input").val());""==c&&(c=null);if(null==c)return!0;e.push({content:c,term:b})});c.names=e;var f=[];b.find("#search-group-list .j_createTimeSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",d="",c=$.trim(a.find("input").eq(0).val()),d=$.trim(a.find("input").eq(1).val());""==c&&(c=null);""==d&&(d=null);
if(null==c&&null==d)return!0;f.push({content:c,endContent:d,term:b})});c.createTimes=f;var h=[];b.find("#search-group-list .j_typeSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("status");c.push(a)});if(0==c.length)return!0;h.push({ids:c,term:b})});c.types=h;var r=[];b.find("#search-group-list .j_optSearchGroup").each(function(a){var b=
$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("id");c.push(a)});if(0==c.length)return!0;r.push({ids:c,term:b})});c.operators=r;var p=[];b.find("#search-group-list .j_managerSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),
c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("id");c.push(a)});if(0==c.length)return!0;p.push({ids:c,term:b})});c.managers=p;var s=[];b.find("#search-group-list .j_contentSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",c=$.trim(a.find("input").val());""==c&&(c=null);if(null==c)return!0;s.push({content:c,term:b})});c.contents=s;var u=[];b.find("#search-group-list .j_duedateSearchGroup").each(function(a){var b=
$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",d="",c=$.trim(a.find("input").eq(0).val()),d=$.trim(a.find("input").eq(1).val());""==c&&(c=null);""==d&&(d=null);if(null==c&&null==d)return!0;u.push({content:c,endContent:d,term:b})});c.duedates=u;var w=[];b.find("#search-group-list .j_prioritySearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");
var b=b.attr("value"),c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("status");c.push(a)});if(0==c.length)return!0;w.push({ids:c,term:b})});c.prioritys=w;var v=[];b.find("#search-group-list .j_formFieldSearchGroup").each(function(b){var c=$(this).find(".j_formField-select select option:selected"),d=$(this).find(".j_formField-condition select option:selected");b=$(this).find(".j_formField-condition");var e=$(this).find(".j_formField-condition .j_selected"),g=c.attr("id"),f=c.attr("subformid"),
c=c.attr("key"),d=d.attr("value"),h="",k="",l=[],h=["DateComponent","Money","NumberComponent","Monitor","Raty"],g={fieldId:g,subFormId:f,componentKey:c,term:d};if(a.getType(c,"Text TextArea Email Phone Mobile FileComponent".split(" "))){h=$.trim(b.find("input").val());if(""==h)return!0;g.content=h}else if(a.getType(c,h)){h=$.trim(b.find("input").eq(0).val());k=$.trim(b.find("input").eq(1).val());""==h&&(h=null);""==k&&(k=null);if(null==h&&null==k)return!0;g.content=h;g.endContent=k}else{e.find(".entity-item").each(function(a){a=
$(this).find("a").attr("id");l.push(a)});if(0==l.length)return!0;g.ids=l}v.push(g)});c.filterFormDatas=v;return c},renderTypeheader:function(a,b){if(b.length)for(var c=0;c<b.length;c++){var e=b[c],f=e.name,h=e.id;if(f&&h){var r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e";a.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(r=null)});a.append(r)}}else f=b.name,h=b.id,f&&h&&(r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+
f+"\x3c/a\x3e\x3c/span\x3e",a.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(r=null)}),a.append(r))},getType:function(a,b){return-1<b.toString().indexOf(a)?!0:!1},remove:function(){$(this.el).off(".FormStatSearchView");$(this.el).find(".j_formstat-search").remove();this.formView&&(this.formView.remove(),this.formView=null)}});m.exports=q});
define("teams/formstat/formstatfieldview",["teams/formstat/formfieldstatmodel","teams/formstat/statselectview","teams/formstat/stattextview","teams/utils","teams/formstat/formstatdatatabview"],function(h,q,m){var f=h("teams/formstat/formfieldstatmodel"),e=h("teams/formstat/statselectview"),c=h("teams/formstat/stattextview"),b=h("teams/utils"),a={},d=h("teams/formstat/formstatdatatabview");q=Backbone.View.extend({initialize:function(a){this.model=new f({formId:a.formId});this.formId=a.formId;this.el=
a.el;this.componentviews=[];this.$el.html('\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e');this.model.findFormFieldDataForReport(this.renderComponents,this)},delegateEvents:function(){var a=$(this.el),c=this;$("body").on("click.FormFieldStatView",".goto-top",function(a){b.gotoTop("#fieldstatbody")});a.off("click.FormFieldStatView");a.on("click.FormFieldStatView",".j_form_goalSlideCtrl",
function(){null==c.formStatDataTabView?(c.formStatDataTabView=new d({formId:c.formId,container:c.el+" .j_form_tab",type:"statfield"}),c.formStatDataTabView.render()):c.formStatDataTabView.show()});a.on("click.FormFieldStatView","#initFieldAdvanceSearch",function(b){b=a.find(".j_advanceSearch");var c=b.height(),d=$("#fieldstatbody").position();$(this).data("open")?($(this).find("i").attr("class","icon-angle-down cs-p"),b.slideUp(),$(this).data("open",!1),$("#fieldstatbody").animate({top:d.top-c+"px"})):
($(this).find("i").attr("class","icon-angle-up cs-p"),b.slideDown(),$(this).data("open",!0),$("#fieldstatbody").animate({top:d.top+c+"px"}))});a.on("click.FormFieldStatView","#packup",function(a){$("#initFieldAdvanceSearch").trigger("click")});a.on("click.FormFieldStatView","input:checkbox",function(a){a=$(this);var b=a.attr("data-field"),b=c.findComponentViewByFieldId(b);a.prop("checked")?b.showView():b.hideView()})},renderFormRouter:function(){var a=this;$(a.el).find(".j_form_router li").each(function(){$(this).attr("href",
"/forms/"+TEAMS.currentUser.id+"/"+$(this).attr("type")+"/"+a.formId)})},renderComponents:function(c){var d=c.formFieldStat,e=c.form;if(e&&e.permission){this.$el.html(b.template("formstat.formstatfield"));$.each(c.formFieldStat,function(){var a=$(".j_advanceSearch .j_searchfields li:first").clone().show();a.find("input").attr("data-field",this.fieldId);a.find("span").text(this.title).attr("title",this.title);$(".j_advanceSearch .j_searchfields").append(a)});this.renderFormRouter();0<c.statNumberDatas.length?
this.renderNumberBarChartView(c.statNumberDatas):this.$el.find("#numberchartstat").remove();this.renderNumDataTrendChartView(c.numberFieldTrendDatas);this.$el.find(".j_form_name").text(e.name).attr("title",e.name);this.$el.find(".j_advanceSearch").hide();0==d.length?this.$el.find(".j_form_empty").removeClass("hide"):this.$el.find(".j_advance_search").removeClass("hide");for(var e=0,f=d.length;e<f;e++)d[e].number=e+1,c=this.getComponentView(d[e]),c.render(),this.componentviews.push(c),a[d[e].fieldId]=
c;b.layout("#fieldstatbody")}else this.$el.html(b.template("base.nopermission",{msg:null}))},getComponentView:function(a){var b=a.componentkey,d=this.$el.find("#fieldstatbody .js_formfield");return 0<=_.indexOf(["CheckBox","RadioBox","Select"],b)?new e(a,d):new c(a,d)},findComponentViewByFieldId:function(b){return a[b]},renderNumberBarChartView:function(a){for(var b=[],c=[],d=this,e,f=0,s=a.length;f<s;f++)b.push(a[f].title),c.push(a[f].content);e={tooltip:{trigger:"axis"},legend:{data:["\u6570\u5b57\u603b\u548c\u7edf\u8ba1"],
x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:b}],yAxis:[{type:"value"}],series:[{name:"\u603b\u6570",type:"bar",data:c,itemStyle:{normal:{label:{show:!0,textStyle:{color:"#333",fontWeight:"bold",fontSize:14}}}},markLine:{data:[{type:"average",name:"\u5e73\u5747\u503c"}]}}]};h.async("https://static.eteams.cn/js/echarts.min.js",function(){var a=d.$el.find("#numberchartstat"),a=echarts.init(a.get(0));
$(window).on("resize",a.resize);a.setOption(e)})},renderNumDataTrendChartView:function(a){var b=a.category.dates,c=[],d,e=this;delete a.category;for(var f in a)d={type:"bar"},d.name=a[f].seriename,d.data=a[f].datas,c.push(d);0===c.length?e.$el.find("#numdatatrendstat").remove():(option={title:{text:"",x:"center"},tooltip:{trigger:"axis"},legend:{data:["\u6570\u5b57\u65e5\u671f\u8d8b\u52bf"],x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},
calculable:!0,xAxis:[{type:"category",data:b}],yAxis:[{type:"value"}],series:c},h.async("https://static.eteams.cn/js/echarts.min.js",function(){var a=e.$el.find("#numdatatrendstat"),a=echarts.init(a.get(0));$(window).on("resize",a.resize);a.setOption(option)}))}});m.exports=q});
define("teams/formstat/formstatdatatabview",["teams/utils","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(c){this.formId=c.formId;this.el=c.container;this.type=c.type;this.isAdmin=TEAMS.currentUser.admin;this.model=new e(c);$(this.el).html(f.template("formstat.formstatdatatab"))},delegateEvents:function(){var c=this,b=$(c.el);b.on("click.FormStatTabView",".j_form_search",function(){c.renderFormList(1)});
b.on("keyup.FormStatTabView",".js_searchkeyword",function(a){13==a.keyCode&&c.renderFormList(1)})},render:function(){this.renderFormList()},renderFormList:function(c){var b=this,a=$(b.el);c=c?c:1;var d={keyword:$.trim(a.find(".js_searchkeyword").val()),module:"biaoge",pageNo:c,pageSize:1E4},e=a.find("#j_form_item");b.model.queryMyFormsKeywords(d,function(d){var f=a.find(".j_form_list");1==c&&f.html("");if(d&&d.forms&&0<d.forms.length){a.find(".j_no_result").addClass("hide");for(var h=0;h<d.forms.length;h++){var r=
d.forms[h],p=e.clone().removeClass("hide");p.attr("id",r.id);p.attr("title",r.name);p.find(".j_title").text(r.name);p.find(".j_title").attr("title",r.name);p.attr("href","/forms/"+TEAMS.currentUser.id+"/"+b.type+"/"+r.id);r.newFillCount&&0!=r.newFillCount&&p.find(".j_number").text(r.newFillCount);r.id==b.formId&&p.addClass("active");f.append(p)}b.buildSerialNumber(f)}else 1==c&&a.find(".j_no_result").removeClass("hide");b.show()})},buildSerialNumber:function(c){c.find(".serial").each(function(b){$(this).text(b+
1)});f.layout(".j_formstattabScr")},show:function(){$(this.el).find(".j_form_goalSlideObj").addClass("sidebar-in")},remove:function(){$(this.el).off(".FormStatTabView")}});m.exports=h});
define("teams/formstat/formreportview",["teams/form/formoperationview","teams/formstat/formreportmodel","teams/utils"],function(h,q,m){var f=h("teams/form/formoperationview"),e=h("teams/formstat/formreportmodel"),c=h("teams/utils");h=Backbone.View.extend({initialize:function(b){var a=this;a.el=b.el;a.reportId=b.formId;a.$el=$(a.el);a.template="formstat.formreportview";a.$tpel=$(c.template(a.template));a.$el.html(a.$tpel.siblings("#formfieldstat"));a.model=new e({formId:a.reportId});a.model.getReports(function(b){var e=
$(c.template(a.template)).siblings("#formitems");a.$el.find("#formlist-loading").remove();a.$el.find("#reportstatbody").append(e);a.renderForms(b);$(window).trigger("resize")});c.layout("#formReportContent");this.remove()},delegateEvents:function(){var b=this;$("body").on("click.FormReportView",".goto-top",function(a){c.gotoTop("#formReportContent")});this.$el.off(".FormReportView");this.$el.on("click.FormReportView","#report-create",function(){var a={module:"biaoge_report","form.report.id":b.reportId,
el:"#build-newreport"};a.tpl=c.template("formstat.formreportnew",{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin});a.ownership="company";a.saveCallback=function(a){b.model.getReports(function(a){var d=$(c.template(b.template,a)).siblings("#formitems");b.$el.find("#reportstatbody").html("").append(d);b.renderForms(a);$(window).trigger("resize")})};b.formoperationView=new f(a);b.formoperationView.isReportForm=!0;b.formoperationView.reportId=b.reportId;b.formoperationView.render()});this.$el.on("click.FormReportView",
".reportedit",function(){window.open($(this).attr("reporturl"))});this.$el.on("click.FormReportView",".reportpreview",function(){var a=$(this).attr("previewurl");window.open(a)});this.$el.on("click.FormReportView",".reportdel",function(){var a=$(this).attr("formId");c.confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f",function(d){d&&b.model.deleteForm({formId:a,module:"biaoge_report"},function(a){c.notify("\u8868\u5355\u5220\u9664\u6210\u529f");b.model.getReports(function(a){var d=$(c.template(b.template,
a)).siblings("#formitems");b.$el.find("#reportstatbody").html("").append(d);b.renderForms(a);$(window).trigger("resize")})})})})},remove:function(){$(this.el).off(".FormReportView")},renderForms:function(b){var a=$("#formitems .js_companyformlist");$.each(b.forms,function(b){var c=a.find("li:first").clone().show();c.find("#form-number").text(b+1);c.find("#title").text(this.name);c.find(".operator").text("\u521b\u5efa\u4eba\uff1a"+this.operator.username);c.find(".createTime").text("\u521b\u5efa\u65f6\u95f4\uff1a"+
Date.create(this.createTime).format("{yyyy}/{MM}/{dd}"));c.find(".reportpreview").attr("previewurl","/form/reportPreview/"+this.id);c.find(".reportedit").attr("reporturl","/form/editreport/"+this.id);c.find(".reportdel").attr("formId",this.id);a.find("li:last").before(c)})}});m.exports=h});
define("teams/formstat/formfieldstatmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.formId=f.formId},getFormFieldStatData:function(f,e){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/getFormDataFieldStat.json",dataType:"json",data:JSON.stringify({formId:this.formId}),success:function(c){f&&f.call(e,c.formFieldStat,c)}})},getNumberFieldStatData:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findFormNumberCharts.json",
dataType:"json",data:JSON.stringify({formId:this.formId}),success:function(e){f&&f(e)}})},getNumDataTrendData:function(f){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findNumberDataTrendStat.json",dataType:"json",data:JSON.stringify({formId:this.formId}),success:function(e){f&&f(e)}})},findFormFieldData:function(f,e){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findFormFieldData.json",dataType:"json",data:JSON.stringify({formId:this.formId}),
success:function(c){f&&f.call(e,c)}})},findFormFieldDataForReport:function(f,e){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findFormFieldDataForReport.json",dataType:"json",data:JSON.stringify({formId:this.formId}),success:function(c){f&&f.call(e,c)}})},findFormNumberDataStat:function(f,e,c){$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findFormNumberDataStat.json",dataType:"json",data:JSON.stringify({param:c,formId:this.formId}),
success:function(b){f&&f.call(e,b)}})}});m.exports=h});
define("teams/formstat/formstatview",["teams/utils","teams/formstat/formstatmodel","teams/formstat/formcolumnview","teams/formstat/formstatsearchview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formstatmodel"),c=h("teams/formstat/formcolumnview"),b=h("teams/formstat/formstatsearchview");h=Backbone.View.extend({teams:{},initialize:function(a){this.formId=a.formId;this.el=a.container?a.container:"#j_formContent";this.isAdmin=TEAMS.currentUser.admin;$(this.el).html(f.template("form.stat"));
this.model=new e;this.isAdmin||$(this.el+" #formstat #delete_formdata").remove()},delegateEvents:function(){var a=this,d=$(a.el);$("body").on("click.FormStatView",".goto-top",function(b){f.gotoTop(a.el+" #formStatContent")});$("body").off("confirmSearch").on("confirmSearch",function(b){a.renderListStatByRow(1)});d.on("click.FormStatView","#more_data",function(b){b=$(this).data("page");a.renderListStatByRow(b.nextPage)});d.on("click.FormStatView","#export_formdata",function(b){0!=$(this).data("isClick")&&
($(this).data("isClick",!1),b={},a.searchView&&(b=a.searchView.assembleParam()),b.formId=a.formId,a.model.exportParam(b,function(a){}),window.open("/formdatastat/export.json?_t\x3d"+(new Date).getTime()),$(this).data("isClick",!0))});d.off("click.FormStatView","#columnField").on("click.FormStatView","#columnField",function(b){$("body").append("\x3cdiv id\x3d'setupColumnField'\x3e\x3c/div\x3e");a.formColumnView=new c({formId:a.formId,container:"body #setupColumnField",parentObj:a});a.formColumnView.render()});
d.on("click.FormStatView","#initAdvanceSearch",function(c){$(this).data("open")?($(this).find("i").attr("class","icon-angle-down cs-p"),d.find(".j_advanceSearch").hide(),$(this).data("open",!1)):($(this).find("i").attr("class","icon-angle-up cs-p"),null!=d.find(".j_advanceSearch .j_formstat-search").get(0)?d.find(".j_advanceSearch").show():(a.searchView&&a.searchView.remove(),a.searchView=new b({el:".j_advanceSearch",formFields:a.formFields}),a.searchView.render()),$(this).data("open",!0))});d.on("click.FormStatView",
"#statbody #stat_table .j_flowDelAll",function(a){a=$(this).is(":checked");d.find("#statbody #stat_table .j_flowDel").prop("checked",a)});d.on("click.FormStatView","#delete_formdata",function(b){var c={},e=[];d.find("#stat_table tbody input:checkbox:checked").each(function(a){a=$(this).val();e.push(a)});c.ids=e;0==e.length?f.notify("\u8bf7\u52fe\u9009\u5ba1\u6279\u540e\u5220\u9664"):f.confirm("\u5220\u9664\u540e\u53ef\u4ee5\u5230\u56de\u6536\u7ad9\u4e2d\u627e\u56de\u6216\u5f7b\u5e95\u5220\u9664,\u786e\u8ba4\u8981\u5220\u9664\u6570\u636e\u5417\uff1f",
function(b){b&&a.model.deleteFlow(c,function(b){b.actionMsg?f.notify(b.actionMsg.message):(f.notify("\u5ba1\u6279\u5df2\u5220\u9664"),a.renderListStatByRow(1))})})})},render:function(){this.renderListStatByRow(1);this.talbeScrollbar()},renderListStatByRow:function(a){var b=this,c=b.el,e={};b.searchView&&(e=b.searchView.assembleParam());e.formId=b.formId;e.pageNo=a;b.model.findRowListStat(e,function(e){1==a&&$(b.el).find("#stat_table tbody").empty();if(e.message)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e'+
e.message+"\x3c/div\x3e");else{var h=e.formFields,l=e.formDatas,p=e.listStats,s=e.numberFieldStats,u=e.pageDatas;e=e.form;b.formFields=h;u&&u.hasNext?($(b.el+" #more_data").show(),$(b.el+" #more_data").data("page",u)):$(b.el+" #more_data").hide();if(null==e)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult" style\x3d"color:#e60000;"\x3e\u8868\u5355\u4e0d\u5b58\u5728\x3c/div\x3e');else if($(c).find("#formName").html(e.name+"\uff08\u7edf\u8ba1\uff09"),null==h||0==h.length)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e\u5f53\u524d\u8868\u5355\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\uff01\x3c/div\x3e');
else{if(0==$(c).find("#stat_table thead tr th").length)for(b.isAdmin&&$(c).find("#stat_table thead tr").append("\x3cth title\x3d'\u5168\u9009' class\x3d'ckx'\x3e\x3cinput class\x3d'j_flowDelAll' type\x3d'checkbox'\x3e\x3c/th\x3e"),$(c).find("#stat_table thead tr").append("\x3cth title\x3d'\u5ba1\u6279\u540d'\x3e\x3cdiv\x3e\u5ba1\u6279\u540d\x3c/div\x3e\x3c/th\x3e"),$(c).find("#stat_table thead tr").append("\x3cth title\x3d'\u63d0\u4ea4\u4eba'\x3e\x3cdiv\x3e\u63d0\u4ea4\u4eba\x3c/div\x3e\x3c/th\x3e"),
$(c).find("#stat_table thead tr").append("\x3cth title\x3d'\u63d0\u4ea4\u65f6\u95f4'\x3e\x3cdiv\x3e\u63d0\u4ea4\u65f6\u95f4\x3c/div\x3e\x3c/th\x3e"),$(c).find("#stat_table thead tr").append("\x3cth title\x3d'\u5ba1\u6279\u72b6\u6001'\x3e\x3cdiv\x3e\u5ba1\u6279\u72b6\u6001\x3c/div\x3e\x3c/th\x3e"),b.isAdmin?$(c).find("#stat_table tfoot tr").append("\x3ctd colspan\x3d'2'\x3e\u7edf\u8ba1\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e"):$(c).find("#stat_table tfoot tr").append("\x3ctd\x3e\u7edf\u8ba1\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e"),
u=0;u<h.length;u++){var w=h[u];$(c).find("#stat_table thead tr").append("\x3cth title\x3d'"+w.title+"'\x3e\x3cdiv\x3e"+w.title+"\x3c/div\x3e\x3c/th\x3e");var v=e="";if("Money"==w.componentKey||"NumberComponent"==w.componentKey)e="ta-r";"Money"==w.componentKey&&(v="Money");$(c).find("#stat_table tfoot tr").append("\x3ctd id\x3d'tfoot_"+w.id+"' class\x3d'"+e+"' type\x3d'"+v+"'\x3e\x3c/td\x3e")}if(s&&0<s.length){for(u=0;u<s.length;u++){e=s[u];var x=e.fieldId;e=e.sumVal;$(c).find("#stat_table tfoot #tfoot_"+
x).html("\u603b\u548c\uff1a"+e).attr("title","\u603b\u548c\uff1a"+e)}$(c).find("#stat_table tfoot").show()}else $(c).find("#stat_table tfoot").hide();if(null==l||0==l.length)$(c).find("#statbody #data_message").html("\u6682\u65e0\u6570\u636e...").show();else{$(c).find("#statbody #data_message").hide();s={};if(p)for(u=0;u<p.length;u++)v=p[u],e=v.FORM_DATA+"_"+v.DATA_INDEX,s[e]=v;$(document).off(".fb-start");for(u=0;u<l.length;u++){var p=l[u],v=p.maxIndex||1,y=p.id,m=p.flowId,q=p.flowName;if(!(0<$(c+
" stat_table tr #"+y).length))for(var B=0;B<v;B++){e=y+"_"+(B+1);var E=s[e],D=$("\x3ctr id\x3d"+y+"\x3e\x3c/tr\x3e");e=Date.create(p.flowCreateTime);x=null==p.flowFinishTime?"\u5ba1\u6279\u4e2d":"\u5df2\u7ed3\u675f";b.isAdmin&&D.append("\x3ctd class\x3d'ckx noSub_flowCheck_"+y+"'\x3e\x3cinput class\x3d'j_flowDel' value\x3d'"+m+"' type\x3d'checkbox'\x3e\x3c/td\x3e");D.append("\x3ctd class\x3d'noSub_flowName_"+y+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+m+'" data-module\x3d"workflow" renderType\x3d""\x3e'+
q+"\x3c/a\x3e\x3c/td\x3e");D.append("\x3ctd class\x3d'noSub_user_"+y+"'\x3e\x3ca class\x3d'router usercard-toggle' userid\x3d'"+p.operator.id+"'\x3e"+p.operator.username+"\x3c/a\x3e\x3c/td\x3e");D.append("\x3ctd class\x3d'noSub_createTime_"+y+"'\x3e"+e.format("{yyyy}-{MM}-{dd}")+"\x3c/td\x3e");D.append("\x3ctd class\x3d'noSub_status_"+y+"'\x3e"+x+"\x3c/td\x3e");for(var C=0;C<h.length;C++){var w=h[C],x=w.id,F=w.componentKey,G="";E&&(G=E["C_"+x]||"");var H="noSub_"+y+"_"+x;w.subForm&&(H="");e="";if("Money"==
F||"NumberComponent"==F)e="ta-r";x=y+"_"+(B+1)+"_"+x;w=!0;try{var K=JSON.parse(G);ocount="";if(0<K.length&&null!=K[0].optionId){for(F=0;F<K.length;F++)option=K[F],"image"==option.type||"imageFile"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" rel\x3d"fancybox_js" href\x3d"/base/download/img/'+option.optionId+'/image" class\x3d"fancybox_js" type\x3d"image"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",w=!1):"file"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+
option.content+'"\x3e\x3ca target\x3d"_blank" data-value\x3d"'+option.optionId+'" href\x3d"/base/download/'+option.optionId+'"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",w=!1):ocount+=option.content+",";G=ocount.substring(0,ocount.length-1)}}catch(M){}w?D.append("\x3ctd id\x3d"+x+" class\x3d'"+H+" "+e+"' title\x3d'"+G+"'\x3e"+G+"\x3c/td\x3e"):D.append("\x3ctd id\x3d"+x+" class\x3d'"+H+" "+e+"'\x3e"+G+"\x3c/td\x3e");$("#"+x).find(".fancybox_js").fancybox({closeBtn:!0,nextEffect:"fade",prevEffect:"fade",
afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}$(c).find("#stat_table tbody").append(D)}}f.layout(c+" #formStatContent");b.mergerCells(h,l)}}}})},mergerCells:function(a,b){if(a&&b)for(var c=0;c<b.length;c++){var e=b[c],f=e.maxIndex||1,e=e.id;this.isAdmin&&($(this.el).find("#stat_table .noSub_flowCheck_"+e+":eq(0)").attr("rowspan",f),$(this.el).find("#stat_table .noSub_flowCheck_"+e+":gt(0)").remove());$(this.el).find("#stat_table .noSub_flowName_"+
e+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_flowName_"+e+":gt(0)").remove();$(this.el).find("#stat_table .noSub_user_"+e+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_user_"+e+":gt(0)").remove();$(this.el).find("#stat_table .noSub_createTime_"+e+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_createTime_"+e+":gt(0)").remove();$(this.el).find("#stat_table .noSub_status_"+e+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_status_"+
e+":gt(0)").remove();for(var h=0;h<a.length;h++){var r=a[h];r.subForm||(r=r.id,$(this.el).find("#stat_table .noSub_"+e+"_"+r+":eq(0)").attr("rowspan",f),$(this.el).find("#stat_table .noSub_"+e+"_"+r+":gt(0)").remove())}}},againRenderTable:function(){$(this.el);$(this.el).find("#statbody").html($(f.template("form.stat")).find("#statbody").html());this.talbeScrollbar();$(window).resize();this.renderListStatByRow(1)},talbeScrollbar:function(){$(this.el).find(".j_formstarScr").mCustomScrollbar({axis:"x",
scrollButtons:{enable:!0},mouseWheel:"false",theme:"darkblue",scrollbarPosition:"inside"})},remove:function(){this.formColumnView&&this.formColumnView.remove();$(this.el).off(".FormStatView");$(this.el).find("#formstat").remove()}});m.exports=h});
define("teams/formstat/formstatdatafieldview",["teams/formstat/formfieldstatmodel","teams/formstat/statselectview","teams/formstat/stattextview","teams/utils"],function(h,q,m){var f=h("teams/formstat/formfieldstatmodel"),e=h("teams/formstat/statselectview");h("teams/formstat/stattextview");var c=h("teams/utils");q=Backbone.View.extend({initialize:function(b){this.model=new f({formId:b.formId});this.el=b.el},delegateEvents:function(){$(this.el)},render:function(b){this.$el.html('\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e');
this.model.findFormNumberDataStat(this.renderComponents,this,b)},renderComponents:function(b){var a=b.formFieldStat;this.$el.html(c.template("formstat.formstatdatafield"));this.renderNumDataTrendChartView(b.numberFieldTrendDatas);this.$el.find(".j_advanceSearch").hide();if(0==a.length)this.$el.find(".j_form_empty").removeClass("hide");else for(var d=0,e=a.length;d<e;d++)a[d].number=d+1,(b=this.getComponentView(a[d]))&&b.render()},getComponentView:function(b){var a=b.componentkey,c,g=this.$el.find("#fieldstatbody .js_formfield");
0<=_.indexOf(["CheckBox","RadioBox","Select"],a)&&(c=new e(b,g));return c},renderNumDataTrendChartView:function(b){var a=b.category.dates,c=[],e,f=this;delete b.category;for(var n in b)e={type:"bar"},e.name=b[n].seriename,e.data=b[n].datas,c.push(e);0===c.length?f.$el.find("#numdatatrendstat").remove():(option={title:{text:"",x:"center"},tooltip:{trigger:"axis"},legend:{data:["\u6570\u5b57\u65e5\u671f\u8d8b\u52bf"],x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},
saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:a}],yAxis:[{type:"value"}],dataZoom:{show:!0,realtime:!0,start:50,end:100},series:c},h.async("https://static.eteams.cn/js/echarts.min.js",function(){var a=f.$el.find("#numdatatrendstat"),a=echarts.init(a.get(0));$(window).on("resize",a.resize);a.setOption(option)}))}});m.exports=q});
define("teams/formstat/statselectview",["teams/formstat/statbaseview","teams/utils"],function(h,q,m){q=h("teams/formstat/statbaseview");var f=h("teams/utils"),e="#5CBAE3 #E5CF0D #B6A2DE #8D98B3 #95706D #E4B600 #89B600 #D87A80".split(" ");q=q.extend({render:function(){this.template="formstat.statselectview";this.renderTableView()},bindEvents:function(){var c=this;this.container.on("click.StatSelectView",".viewitem",function(){switch($(this).attr("view-item")){case "baritem":c.showViewByType("bar");
c.renderBarChartView();break;case "pieitem":c.showViewByType("pie");c.renderPieChartView();break;case "tableitem":c.showViewByType("table"),c.renderTableView()}$(window).trigger("resize")})},renderTableView:function(){if(1!==this.tableview){this.cdata.options=_.sortBy(this.cdata.options,"optionid");this.processData();this.tpl=f.template(this.template,this.cdata);this.container=$(this.tpl);this.wrappercontainer.append(this.container);var c=this.container.find("#tableview tbody");$.each(this.cdata.options,
function(){var b=c.find("tr:first").clone().show();b.find(".j_content").text(this.content);b.find(".j_prograssbar").css({width:this.percentage,"background-color":this.bgcolor}).find(".j_percentage").text(this.percentage);b.find(".j_votes").text(this.votes);c.find("tr:last").before(b)});this.bindEvents();this.tableview=1}},renderBarChartView:function(){if(!this.barChart){for(var c=[],b=[],a=this,d,e=0,f=this.cdata.options.length;e<f;e++){var n=this.cdata.options[e].content;20<this.cdata.options[e].content.length&&
(n=this.cdata.options[e].content.substring(0,20)+"...");c.push(n);b.push(this.cdata.options[e].votes)}d={title:{text:this.cdata.title,x:"center"},tooltip:{trigger:"axis"},legend:{data:["\u6b21\u6570"],x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:c}],yAxis:[{type:"value"}],series:[{name:"\u603b\u6570",type:"bar",data:b,markPoint:{data:[{type:"max",name:"\u6700\u5927\u503c"},{type:"min",
name:"\u6700\u5c0f\u503c"}]},markLine:{data:[{type:"average",name:"\u5e73\u5747\u503c"}]}}]};h.async("https://static.eteams.cn/js/echarts.min.js",function(){var b=a.container.find(".barview");this.barChart=echarts.init(b.get(0));this.barChart.setOption(d)})}},renderPieChartView:function(){if(!this.pieChart){for(var c=[],b=[],a=this,d,e=0,f=this.cdata.options.length;e<f;e++){var n=this.cdata.options[e].content;20<this.cdata.options[e].content.length&&(n=this.cdata.options[e].content.substring(0,20)+
"...");c.push(n);b.push({value:this.cdata.options[e].votes,name:this.cdata.options[e].content})}d={tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:c},toolbox:{show:!0,feature:{magicType:{show:!1,type:["pie"]}}},calculable:!0,series:[{name:"\u6b21\u6570",type:"pie",radius:"55%",center:["50%","60%"],data:b}]};h.async("https://static.eteams.cn/js/echarts.min.js",function(){var b=a.container.find(".pieview");this.pieChart=echarts.init(b.get(0));
this.pieChart.setOption(d)})}},showViewByType:function(c){switch(c){case "bar":this.container.find(".barview").show();this.container.find(".table").hide();this.container.find(".pieview").hide();break;case "pie":this.container.find(".pieview").show();this.container.find(".table").hide();this.container.find(".barview").hide();break;case "table":this.container.find(".table").show(),this.container.find(".barview").hide(),this.container.find(".pieview").hide()}},processData:function(){for(var c=this.cdata.options,
b=0,a="",a=0,d=c.length;a<d;a++)b+=c[a].votes;this.cdata.totalvotes=b;a=0;for(d=c.length;a<d;a++)c[a].percentage=(100*c[a].votes/b).toFixed(2)+"%",c[a].bgcolor=e[a%e.length];a="CheckBox"===this.cdata.componentkey?"\u591a\u9009":"\u5355\u9009";"1"===this.cdata.required&&(a+="\u5fc5\u586b");this.cdata.titletip="( "+a+" )"}});m.exports=q});
define("teams/formstat/formstatchartmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");this.statisticians=[TEAMS.currentUser.id];this.formId=f.formId;this.xAxis=null},statisticsByDay:function(f){var e=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formdatastat/getFormDataTrendForChart.json",dataType:"json",
data:JSON.stringify({beginDate:e.beginDate,endDate:e.endDate+" 24:00:00",formId:e.formId}),success:function(c){if(f){var b=e.xAxis=e.calculateX();c=e.parseSeries(c.formTrendData);f({xAxis:b,series:c})}}})},calculateX:function(){var f=[{type:"category",data:[]}];Date.range(this.beginDate,this.endDate).every("day",function(e){f[0].data.push(e.format("{yyyy}-{MM}-{dd}"))});return f},parseSeries:function(f){var e=[{name:"\u6b21\u6570",type:"bar",data:[]}];_.isEmpty(f)||(e[0].data=this.parseMapToArray(f));
return e},parseMapToArray:function(f){for(var e=Array(this.xAxis[0].data.length),c,b,a=0,d=f.length;a<d;a++)b=f[a],c=this.xAxis[0].data.indexOf(b.ctime),e[c]=b.counts;return e}});m.exports=h});
define("teams/formstat/formfieldstatview",["teams/formstat/formfieldstatmodel","teams/formstat/statselectview","teams/formstat/stattextview","teams/utils"],function(h,q,m){var f=h("teams/formstat/formfieldstatmodel"),e=h("teams/formstat/statselectview"),c=h("teams/formstat/stattextview"),b=h("teams/utils"),a={};q=Backbone.View.extend({initialize:function(a){this.model=new f({formId:a.formId});this.el=a.el;this.componentviews=[];this.$el.html('\x3cdiv id\x3d"formlist-loading" class\x3d"loading_small"\x3e\x3cspan\x3e\u6b63\u5728\u52a0\u8f7d\u6570\u636e\uff0c\u8bf7\u7a0d\u540e...\x3c/span\x3e\x3c/div\x3e');
this.model.findFormFieldData(this.renderComponents,this)},delegateEvents:function(){var a=$(this.el),c=this;$("body").on("click.FormFieldStatView",".goto-top",function(a){b.gotoTop("#fieldstatbody")});a.off("click.FormFieldStatView");a.on("click.FormFieldStatView","#initFieldAdvanceSearch",function(b){b=a.find(".j_advanceSearch");var c=b.height(),e=$("#fieldstatbody").position();$(this).data("open")?($(this).find("i").attr("class","icon-angle-down cs-p"),b.slideUp(),$(this).data("open",!1),$("#fieldstatbody").animate({top:e.top-
c+"px"})):($(this).find("i").attr("class","icon-angle-up cs-p"),b.slideDown(),$(this).data("open",!0),$("#fieldstatbody").animate({top:e.top+c+"px"}))});a.on("click.FormFieldStatView","#packup",function(a){$("#initFieldAdvanceSearch").trigger("click")});a.on("click.FormFieldStatView","input:checkbox",function(a){a=$(this);var b=a.attr("data-field"),b=c.findComponentViewByFieldId(b);a.prop("checked")?b.showView():b.hideView()})},renderComponents:function(c){var e=c.formFieldStat;this.$el.html(b.template("formstat.formfieldstat"));
$.each(c.formFieldStat,function(){var a=$(".j_advanceSearch .j_searchfields li:first").clone().show();a.find("input").attr("data-field",this.fieldId);a.find("span").text(this.title).attr("title",this.title);$(".j_advanceSearch .j_searchfields").append(a)});0<c.statNumberDatas.length?this.renderNumberBarChartView(c.statNumberDatas):this.$el.find("#numberchartstat").remove();this.renderNumDataTrendChartView(c.numberFieldTrendDatas);this.$el.find(".j_advanceSearch").hide();0==e.length&&this.$el.find(".j_form_empty").removeClass("hide");
for(var f=0,h=e.length;f<h;f++)e[f].number=f+1,c=this.getComponentView(e[f]),c.render(),this.componentviews.push(c),a[e[f].fieldId]=c;b.layout("#fieldstatbody")},getComponentView:function(a){var b=a.componentkey,f=this.$el.find("#fieldstatbody .js_formfield");return 0<=_.indexOf(["CheckBox","RadioBox","Select"],b)?new e(a,f):new c(a,f)},findComponentViewByFieldId:function(b){return a[b]},renderNumberBarChartView:function(a){for(var b=[],c=[],e=this,f,r=0,p=a.length;r<p;r++)b.push(a[r].title),c.push(a[r].content);
f={tooltip:{trigger:"axis"},legend:{data:["\u6570\u5b57\u603b\u548c\u7edf\u8ba1"],x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:b}],yAxis:[{type:"value"}],series:[{name:"\u603b\u6570",type:"bar",data:c,itemStyle:{normal:{label:{show:!0,textStyle:{color:"#333",fontWeight:"bold",fontSize:14}}}},markLine:{data:[{type:"average",name:"\u5e73\u5747\u503c"}]}}]};h.async("https://static.eteams.cn/js/echarts.min.js",
function(){var a=e.$el.find("#numberchartstat"),a=echarts.init(a.get(0));$(window).on("resize",a.resize);a.setOption(f)})},renderNumDataTrendChartView:function(a){var b=a.category.dates,c=[],e,f=this;delete a.category;for(var r in a)e={type:"bar"},e.name=a[r].seriename,e.data=a[r].datas,c.push(e);0===c.length?f.$el.find("#numdatatrendstat").remove():(option={title:{text:"",x:"center"},tooltip:{trigger:"axis"},legend:{data:["\u6570\u5b57\u65e5\u671f\u8d8b\u52bf"],x:"left"},toolbox:{show:!0,feature:{magicType:{show:!0,
type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:b}],yAxis:[{type:"value"}],series:c},h.async("https://static.eteams.cn/js/echarts.min.js",function(){var a=f.$el.find("#numdatatrendstat"),a=echarts.init(a.get(0));$(window).on("resize",a.resize);a.setOption(option)}))}});m.exports=q});
define("teams/formstat/formstatreportview",["teams/form/formoperationview","teams/formstat/formreportmodel","teams/utils","teams/formstat/formstatdatatabview"],function(h,q,m){var f=h("teams/form/formoperationview"),e=h("teams/formstat/formreportmodel"),c=h("teams/utils"),b=h("teams/formstat/formstatdatatabview");h=Backbone.View.extend({initialize:function(a){var b=this;b.el=a.el;b.reportId=a.formId;b.$el=$(b.el);b.template="formstat.formstatreport";b.$tpel=$(c.template(b.template));b.$el.html(b.$tpel.siblings(".j_form_stat"));
b.model=new e({formId:b.reportId});b.model.queryFormReportsForReport(function(a){var e=$(c.template(b.template)).siblings("#formitems");b.$el.find("#formlist-loading").remove();b.$el.find("#reportstatbody").append(e);b.renderForms(a);$(window).trigger("resize")});b.renderFormRouter();c.layout("#formReportContent");this.remove()},delegateEvents:function(){var a=this;$("body").on("click.FormReportView",".goto-top",function(a){c.gotoTop("#formReportContent")});this.$el.off(".FormReportView");this.$el.on("click.FormReportView",
"#report-create",function(){var b={module:"biaoge_report","form.report.id":a.reportId,el:"#build-newreport"};b.tpl=c.template("formstat.formreportnew",{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin});b.ownership="company";b.saveCallback=function(b){a.model.queryFormReportsForReport(function(b){var d=$(c.template(a.template,b)).siblings("#formitems");a.$el.find("#reportstatbody").html("").append(d);a.renderForms(b);$(window).trigger("resize")})};a.formoperationView=new f(b);a.formoperationView.isReportForm=
!0;a.formoperationView.reportId=a.reportId;a.formoperationView.render()});this.$el.on("click.FormReportView",".reportedit",function(){window.open($(this).attr("reporturl"))});this.$el.on("click.FormReportView",".j_form_goalSlideCtrl",function(){null==a.formStatDataTabView?(a.formStatDataTabView=new b({formId:a.formId,container:a.el+" .j_form_tab",type:"statreport"}),a.formStatDataTabView.render()):a.formStatDataTabView.show()});this.$el.on("click.FormReportView",".reportpreview",function(){var a=
$(this).attr("previewurl");window.open(a)});this.$el.on("click.FormReportView",".reportdel",function(){var b=$(this).attr("formId");c.confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f",function(e){e&&a.model.deleteForm({formId:b,module:"biaoge_report"},function(b){c.notify("\u8868\u5355\u5220\u9664\u6210\u529f");a.model.queryFormReportsForReport(function(b){var d=$(c.template(a.template,b)).siblings("#formitems");a.$el.find("#reportstatbody").html("").append(d);a.renderForms(b);$(window).trigger("resize")})})})})},
remove:function(){$(this.el).off(".FormReportView")},renderFormRouter:function(){var a=this;$(a.el).find(".j_form_router li").each(function(){$(this).attr("href","/forms/"+TEAMS.currentUser.id+"/"+$(this).attr("type")+"/"+a.reportId)})},renderForms:function(a){var b=a.form;if(b&&b.permission){this.$el.find(".j_form_name").text(b.name).attr("title",b.name);var e=$("#formitems .js_companyformlist");$.each(a.forms,function(a){var b=e.find("li:first").clone().show();b.find("#form-number").text(a+1);b.find("#title").text(this.name);
b.find(".operator").text("\u521b\u5efa\u4eba\uff1a"+this.operator.username);b.find(".createTime").text("\u521b\u5efa\u65f6\u95f4\uff1a"+Date.create(this.createTime).format("{yyyy}/{MM}/{dd}"));b.find(".reportpreview").attr("previewurl","/form/reportPreview/"+this.id);b.find(".reportedit").attr("reporturl","/form/editreport/"+this.id);b.find(".reportdel").attr("formId",this.id);e.find("li:last").before(b)})}else this.$el.html(c.template("base.nopermission",{msg:null}))}});m.exports=h});
define("teams/formstat/formcolumnview",["teams/utils","teams/formstat/formstatmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formstatmodel");h=Backbone.View.extend({teams:{},initialize:function(c){this.formId=c.formId;this.el=c.container?c.container:"#setupColumnField";this.isAdmin=TEAMS.currentUser.admin;this.parentObj=c.parentObj;$(this.el).html(f.template("form.column"));this.isAdmin||$(this.el).find("#saveDefaultColumn").remove();this.model=new e;$(this.el).find("#formcolumn").modal()},
delegateEvents:function(){var c=this,b=$(c.el);b.on("hidden.bs.modal",function(a){c.remove()});b.on("click.FormColumnView","#saveColumn,#saveDefaultColumn",function(){$(this).data("isClick")||($(this).data("isClick",!0),c.saveColumn($(this)))});b.on("click.FormColumnView","#columnFileds .j_column",function(){c.selectAllStatus()});b.on("click.FormColumnView","#selectAll",function(){var a=$(this).is(":checked");b.find(".j_column").prop("checked",a)})},render:function(){var c=this,b=c.el;c.model.findColumnField({formId:c.formId},
function(a){a=a.formFields;if(null!=a&&0!=a.length){for(var d=!1,e=0;e<a.length;e++){var h=a[e];if(h&&h.formColumn){d=!0;break}}for(e=0;e<a.length;e++){var h=a[e],n=h.formColumn,k=h["delete"],r=$(b).find("#columnFiledsClone li").clone(),p=r.find(".j_column"),s=r.find(".j_filedName"),u=r.find(".j_bewrite");p.data("formField",h);s.html(h.title);k&&(s.addClass("td-lt c-999"),u.html("\u8be5\u5b57\u6bb5\u4e3a\u5220\u9664\u5b57\u6bb5,\u4e0d\u5728\u5f53\u524d\u8868\u5355\u7248\u672c\u4e2d\uff01"));0==d?
0==k&&(p.attr("checked",!0),p.get(0).checked=!0):n&&(p.attr("id",n.id),n.apply&&(p.attr("checked",!0),p.get(0).checked=!0));$(b).find("#columnFileds").append(r)}$(b).find("#formcolumn #columnFileds").sortable({stop:function(a,b){c.renderSort()}});f.layout(b+" #formcolumn .modal-body");c.renderSort();c.selectAllStatus()}})},renderSort:function(){$(this.el).find("#columnFileds li").each(function(){var c=$(this);c.find(".j_sort").html(c.index()+1)})},saveColumn:function(c){var b=this,a=b.el,d=b.formId,
e=[],h=!1;"istmp"==c.attr("istmp")&&b.isAdmin&&(h=!0);$(a).find("#formcolumn #columnFileds li").each(function(a){var b=$(this);a=b.index()+1;var c=b.find(".j_column").is(":checked"),b=b.find(".j_column").data("formField");e.push({form:{id:d},formField:b,sort:a,apply:c,isDefault:h})});b.model.saveFormColumns({formId:d,columns:e},function(a){a.actionMsg?f.notify(a.actionMsg.message):(f.notify("\u4fdd\u5b58\u6210\u529f\uff01"),c.data("isClick",!1),b.parentObj.againRenderTable())})},selectAllStatus:function(){var c=
$(this.el);c.find("#selectAll").prop("checked",!0);c.find("#columnFileds .j_column").each(function(){0==$(this).is(":checked")&&c.find("#selectAll").prop("checked",!1)})},remove:function(){$(".modal-backdrop.fade.in").remove();$(this.el).off(".FormColumnView");$(this.el).remove()}});m.exports=h});
define("teams/formstat/formcollectchartview",["teams/utils","teams/component/typeahead","teams/formstat/formcollectchartmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/formstat/formcollectchartmodel");q=Backbone.View.extend({initialize:function(c){this.model=new e({formId:c.formId});this.el="#formcollectchartview";$("body").append(f.template("formstat.formcollectchart"));this.initComponents()},initComponents:function(){var c=this,b=c.model,a=$(c.el);f.datepicker([{el:"#begin-date",
callback:function(a){var e=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(e,b.endDate)?b.beginDate=e||b.beginDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(a){var e=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(b.beginDate,e)?b.endDate=e||b.endDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);
a.find("#begin-date").val(b.beginDate);a.find("#end-date").val(b.endDate);a.find('[data\x3d"thisMonth"]').addClass("btn-success")},isBefore:function(c,b){if(c&&b){if(Date.create(c).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");return!1}return!0},delegateEvents:function(){var c=this,b=c.model,a=$(c.el);a.on("hidden.bs.modal.FormCollectChart",function(a){c.remove()});$("body").on("click.FormCollectChart",".goto-top",
function(a){f.gotoTop(".js_taskreportScr")});a.on("click.FormCollectChart",".j_time a",function(d){d=$(d.target);switch(d.attr("data")){case "thisWeek":b.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":b.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":b.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");
b.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":b.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),b.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}a.find("#begin-date").val(b.beginDate);a.find("#end-date").val(b.endDate);a.find(".j_time .btn").removeClass("btn-success");d.addClass("btn-success");c.loadDayChart();b.pageNo=1;c.search()});a.on("click.FormCollectChart","#load",function(){a.find(".j_time .btn").removeClass("btn-success");
c.loadDayChart();b.pageNo=1;c.search()});a.find(".page-first").click(function(){$(this).hasClass("disabled")||(b.pageNo=1,c.search())});a.find(".page-pre").click(function(){$(this).hasClass("disabled")||(--b.pageNo,c.search())});a.find(".page-next").click(function(){$(this).hasClass("disabled")||(++b.pageNo,c.search())})},remove:function(){$(this.el).off(".FormCollectChart");this.dayChart&&($(window).off("resize",this.dayChart.resize),this.dayChart.dispose(),this.dayChart=null);this.finishChart&&
($(window).off("resize",this.finishChart.resize),this.finishChart.dispose(),this.finishChart=null);this.urgencyChart&&($(window).off("resize",this.urgencyChart.resize),this.urgencyChart.dispose(),this.urgencyChart=null);this.stopListening();this.model=null;$("#formcollectchartview").remove()},render:function(c,b){var a=this;$("#formcollectchartview").modal("show");f.layout(".js_taskreportScr");$("#formcollectchartview").on("shown.bs.modal",function(){h.async("https://static.eteams.cn/js/echarts.min.js",
function(){a.initCharts();a.loadDayChart()});a.search()})},search:function(){$("#formlist-loading").removeClass("hide");var c=this,b=c.model;$(c.el);var a="";""!=b.beginDate&&(a+=" and F.create_Time \x3e '"+b.beginDate+"'");""!=b.endDate&&(a+=" and F.create_Time \x3c '"+b.endDate+" 24:00:00'");b.search({pageNo:b.pageNo,pageSize:b.pageSize,"form.id":b.formId,sortType:"F.CREATE_TIME DESC",searchFilter:a},function(a){$("#formlist-loading").addClass("hide");var b=$("#formlog-table tbody");$("#formlog-table tbody tr").not(":first").detach();
$.each(a.formDataPage.result,function(a){var c=$("#formlog-table tbody tr:first").clone().show();c.find("#index").text(a+1);c.find("#createTime").text((new Date(this.createTime)).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));c.find("#spentTime").text(this.spentTime);c.find("#ip").text(this.ip);a=this.client;"undefined"!=typeof this.version&&(a+=" - "+this.version);c.find("#source").text(a);a="/form/previewFill/"+this.id;c.find("#query a").attr("href",a);c.appendTo(b)});c.loadPage(a.formDataPage)})},
loadPage:function(c){var b=this,a=$(b.el),d=b.model;0>=c.totalCount?($(b.el).find(".page-last").unbind("click"),$(b.el).find(".page-buttons").addClass("disabled"),$(b.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55")):($(b.el).find(".pagination").find(".active a").html("\u7b2c"+c.pageNo+"/"+c.totalPages+"\u9875"),1==c.totalPages?$(b.el).find(".page-buttons").addClass("disabled"):($(b.el).find(".page-last").click(function(){$(this).hasClass("disabled")||(d.pageNo=c.totalPages,b.search())}),
1==c.pageNo&&($(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled"),$(b.el).find(".page-first").addClass("disabled"),$(b.el).find(".page-pre").addClass("disabled")),c.pageNo==c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").addClass("disabled"),$(b.el).find(".page-last").addClass("disabled")),1!=c.pageNo&&c.pageNo!=c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),
$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")),a.find(".pagination-centered").removeClass("hide")))},dayChartBasicOption:{title:{text:"\u6570\u636e\u91c7\u96c6\u7edf\u8ba1"},tooltip:{trigger:"item"},legend:{data:[""]},calculable:!0,toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:5,end:95},yAxis:[{type:"value"}],
color:["#3AEC94"]},dayChart:null,initCharts:function(){var c;c=this.dayChart=echarts.init(document.getElementById("day-chart"),"macarons");$(window).on("resize",c.resize)},loadDayChart:function(){var c=this;if(c.dayChart){var b=c.dayChart;c.dayChart.un(echarts.config.EVENT.CLICK).on(echarts.config.EVENT.CLICK,function(a){a=Date.create(a.name).format("{yyyy}-{MM}-{dd}");c.model.beginDate=a;c.model.endDate=a;c.model.pageNo=1;c.search()});b.showLoading({effect:"spin"});c.model.statisticsByDay(function(a){b.hideLoading();
a=_.extend(a,c.dayChartBasicOption);b.setOption(a,!0)})}else f.alert("\u672a\u627e\u5230\u56fe\u8868\u7ec4\u4ef6\uff0c\u8bf7\u786e\u8ba4\u9875\u9762\u52a0\u8f7d\u6b63\u786e")}});m.exports=q});
define("teams/formstat/formstattableview",["teams/utils","teams/formstat/formstatmodel","teams/formstat/formcolumnview","teams/formstat/baseformstatsearchview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formstatmodel"),c=h("teams/formstat/formcolumnview"),b=h("teams/formstat/baseformstatsearchview"),a={formdatareport:[{title:"\u7c7b\u578b",position:"left"},{title:"\u63d0\u4ea4\u65f6\u95f4",position:"left"},{title:"\u63d0\u4ea4\u4eba",position:"left"},{title:"\u4e0a\u62a5\u540d\u79f0",
position:"left"}],task:[{title:"\u662f\u5426\u5b8c\u6210",position:"left"},{title:"\u5230\u671f\u65e5",position:"left"},{title:"\u7d27\u6025\u7a0b\u5ea6",position:"left"},{title:"\u8d1f\u8d23\u4eba",position:"left"},{title:"\u4efb\u52a1\u63cf\u8ff0",position:"left"},{title:"\u4efb\u52a1\u540d\u79f0",position:"left"}]};h=Backbone.View.extend({teams:{},initialize:function(b){this.formId=b.formId;this.el=b.container?b.container:"#j_formContent";this.isAdmin=TEAMS.currentUser.admin;this.model=new e;$(this.el).html(f.template("form.stat"));
$(this.el+" #formstat #delete_formdata").remove();this.module=b.module||"formdatareport";this.fileds=a[this.module]},delegateEvents:function(){var a=this,e=$(a.el);$("body").on("click.FormStatView",".goto-top",function(b){f.gotoTop(a.el+" #formStatContent")});$("body").off("confirmSearch").on("confirmSearch",function(b){a.renderListStatByRow(1)});e.off("click.FormStatView","more_data").on("click.FormStatView","#more_data",function(b){b=$(this).data("page");a.renderListStatByRow(b.nextPage)});switch(a.module){case "formdatareport":e.off("click.FormStatView",
"#export_formdata").on("click.FormStatView","#export_formdata",function(b){0!=$(this).data("isClick")&&($(this).data("isClick",!1),b={},a.searchView&&(b=a.searchView.assembleParam()),b.formId=a.formId,a.model.exportParam(b,function(a){}),window.open("/formdatastat/exportXlsForBaseForm.json?_t\x3d"+(new Date).getTime()),$(this).data("isClick",!0))});break;default:e.find("#export_formdata").hide()}e.off("click.FormStatView","#columnField").on("click.FormStatView","#columnField",function(b){$("body").append("\x3cdiv id\x3d'setupColumnField'\x3e\x3c/div\x3e");
a.formColumnView=new c({formId:a.formId,container:"body #setupColumnField",parentObj:a});a.formColumnView.render()});e.off("click.FormStatView","#initAdvanceSearch").on("click.FormStatView","#initAdvanceSearch",function(c){$(this).data("open")?($(this).find("i").attr("class","icon-angle-down cs-p"),e.find(".j_advanceSearch").hide(),$(this).data("open",!1)):($(this).find("i").attr("class","icon-angle-up cs-p"),null!=e.find(".j_advanceSearch .j_formstat-search").get(0)?e.find(".j_advanceSearch").show():
(a.searchView&&a.searchView.remove(),a.searchView=new b({el:a.el+" .j_advanceSearch",formFields:a.formFields,module:a.module}),a.searchView.render()),$(this).data("open",!0))})},_renderAgain:function(a){11>$(this.el).find("#stat_table tbody tr").length?this.render():a.remove()},_deleteReport:function(a){if(!a)return!1;var b=this,c=$(b.el);11>c.find("#stat_table tbody tr").length?b.render():(c.find("tr[id\x3d'"+a+"']").remove(),a={},b.searchView&&(a=b.searchView.assembleParam()),a.formId=b.formId,
a.pageNo=1,a.pageSize=1,b.model.findRowListStatForBase(a,function(a){if((a=a.numberFieldStats)&&0<a.length){for(var d=0;d<a.length;d++){var e=a[d],f=e.fieldId,e=e.sumVal;"Money"==c.find("#stat_table tfoot #tfoot_"+f).attr("type")&&(e=e+" "+b.numberToChinese(e));c.find("#stat_table tfoot #tfoot_"+f).html("\u603b\u548c\uff1a"+e).attr("title","\u603b\u548c\uff1a"+e)}c.find("#stat_table tfoot").show()}else c.find("#stat_table tfoot").hide()}))},render:function(){this.renderListStatByRow(1);this.talbeScrollbar()},
numberToChinese:function(a){var b="",c="\u4edf\u4f70\u62fe\u4ebf\u4edf\u4f70\u62fe\u4e07\u4edf\u4f70\u62fe\u5143\u89d2\u5206";a+="00";var e=a.indexOf(".");0<=e&&(a=a.substring(0,e)+a.substr(e+1,2));c=c.substr(c.length-a.length);for(e=0;e<a.length;e++)b+="\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396".substr(a.substr(e,1),1)+c.substr(e,1);return b.replace(/\u96f6\u89d2\u96f6\u5206$/,"").replace(/\u96f6[\u4edf\u4f70\u62fe]/g,"\u96f6").replace(/\u96f6{2,}/g,"\u96f6").replace(/\u96f6([\u4ebf|\u4e07])/g,
"$1").replace(/\u96f6+\u5143/,"\u5143").replace(/\u4ebf\u96f6{0,3}\u4e07/,"\u4ebf").replace(/^\u5143/,"\u96f6\u5143")},renderListStatByRow:function(a){var b=this,c=b.el,e={};b.searchView&&(e=b.searchView.assembleParam());e.formId=b.formId;e.pageNo=a;e.module=b.module;b.model.findRowListStatForBase(e,function(e){var h=e.formFields,n=e.formDatas,s=e.listStats,u=e.numberFieldStats,w=e.pageDatas,v=e.form;$("#formName").html(v.name+"\uff08\u7edf\u8ba1\uff09");if(e.message)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e'+
e.message+"\x3c/div\x3e");else if(null==v)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult" style\x3d"color:#e60000;"\x3e\u8868\u5355\u4e0d\u5b58\u5728\x3c/div\x3e');else if(null==h||0==h.length)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e\u5f53\u524d\u8868\u5355\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\uff01\x3c/div\x3e');else{1==a&&($(b.el).find("#stat_table tbody").empty(),$(c).find(".j_form_empty").addClass("hide"));b.formFields=h;if(0==$(c).find("#stat_table thead tr th").length){var v=
$(c).find("#stat_table thead tr"),x=$(c).find("#stat_table tfoot tr");for(e=0;e<h.length;e++){var y=h[e];v.append("\x3cth title\x3d'"+y.title+"'\x3e\x3cdiv\x3e"+y.title+"\x3c/div\x3e\x3c/th\x3e");var m="",q="";if("Money"==y.componentKey||"NumberComponent"==y.componentKey)m="ta-r";"Money"==y.componentKey&&(q="Money");x.append("\x3ctd id\x3d'tfoot_"+y.id+"' class\x3d'"+m+"' type\x3d'"+q+"'\x3e\x3c/td\x3e")}for(e=0;e<b.fileds.length;e++)y=b.fileds[e],"left"===y.position?(v.prepend("\x3cth title\x3d'"+
y.title+"'\x3e\x3cdiv\x3e"+y.title+"\x3c/div\x3e\x3c/th\x3e"),x.prepend("\x3ctd\x3e\x3c/td\x3e")):(v.append("\x3cth title\x3d'"+y.title+"'\x3e\x3cdiv\x3e"+y.title+"\x3c/div\x3e\x3c/th\x3e"),x.append("\x3ctd\x3e\x3c/td\x3e"))}if(w&&w.hasNext)$(b.el+" #more_data").show(),$(b.el+" #more_data").data("page",w);else if($(b.el+" #more_data").hide(),1==a){if(null==n||1>n.length){$(c).find(".j_form_empty").removeClass("hide");$(c).find("#stat_table tfoot").hide();return}$(c).find(".j_form_empty").addClass("hide");
$(c).find("#stat_table tfoot").show()}else 0<n.length&&$(c).find(".j_form_empty").addClass("hide");if(u&&0<u.length){for(e=0;e<u.length;e++)v=u[e],w=v.fieldId,v=v.sumVal,"Money"==$(c).find("#stat_table tfoot #tfoot_"+w).attr("type")&&(v=v+" "+b.numberToChinese(v)),$(c).find("#stat_table tfoot #tfoot_"+w).html("\u603b\u548c\uff1a"+v).attr("title","\u603b\u548c\uff1a"+v);$(c).find("#stat_table tfoot").show()}else $(c).find("#stat_table tfoot").hide();u={};if(s)for(e=0;e<s.length;e++)w=s[e],u[w.FORM_DATA+
"_"+w.DATA_INDEX]=w;switch(b.module){case "formdatareport":b.renderDataReport(n,u,h);break;case "task":b.renderDataTask(n,u,h)}f.layout(c+" #formStatContent");b.mergerCells(h,n)}})},renderDataTask:function(a,b,c){var e=this.el;c=this.formFields;$(document).off(".fb-start");for(var f=0;f<a.length;f++){var h=a[f],p=h.maxIndex||1,s=h.taskId;if(!(0<$(e+" stat_table tr #"+s).length))for(var u=0;u<p;u++){var w=b[h.id+"_"+(u+1)],v=$("\x3ctr id\x3d"+s+"\x3e\x3c/tr\x3e");v.append("\x3ctd class\x3d'noSub_name_"+
s+"' title\x3d'"+h.taskName+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+s+'"  data-module\x3d"task" renderType\x3d"subordinates"\x3e'+h.taskName+"\x3c/a\x3e\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_content_"+s+"' title\x3d'"+(h.taskContent||"")+"'\x3e"+(h.taskContent||"")+"\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_operate_"+s+"'\x3e\x3ca class\x3d'router usercard-toggle' userid\x3d'"+h.taskManager.id+"'\x3e"+h.taskManager.username+"\x3c/a\x3e\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_priority_"+
s+"'\x3e"+h.priority+"\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_time_"+s+"'\x3e"+Date.create(h.taskDueDate).format("{yyyy}-{MM}-{dd}")+"\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_status_"+s+"'\x3e"+("todo"==h.taskStatus?"\u8fdb\u884c\u4e2d":"\u5df2\u5b8c\u6210")+"\x3c/td\x3e");for(var x=0;x<c.length;x++){var y=c[x],m=y.id,q=y.componentKey,B="";w&&(B=w["C_"+m]||"");var E="noSub_"+s+"_"+m;y.subForm&&(E="");y="";if("Money"==q||"NumberComponent"==q)y="ta-r";m=s+"_"+(u+1)+"_"+m;q=!0;try{var D=
JSON.parse(B);ocount="";if(0<D.length&&null!=D[0].optionId){for(var C=0;C<D.length;C++)option=D[C],"image"==option.type||"imageFile"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" rel\x3d"fancybox_js" href\x3d"/base/download/img/'+option.optionId+'/image" class\x3d"fancybox_js" type\x3d"image"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",q=!1):"file"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" data-value\x3d"'+
option.optionId+'" href\x3d"/base/download/'+option.optionId+'"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",q=!1):ocount+=option.content+",";B=ocount.substring(0,ocount.length-1)}}catch(F){}q?v.append("\x3ctd id\x3d"+m+" class\x3d'"+E+" "+y+"' title\x3d'"+B+"'\x3e"+B+"\x3c/td\x3e"):v.append("\x3ctd id\x3d"+m+" class\x3d'"+E+" "+y+"'\x3e"+B+"\x3c/td\x3e");$("#"+m).find(".fancybox_js").fancybox({closeBtn:!0,nextEffect:"fade",prevEffect:"fade",afterLoad:function(){this.title="Image "+(this.index+1)+" of "+
this.group.length+(this.title?" - "+this.title:"")}})}$(e).find("#stat_table tbody").append(v)}}},renderDataReport:function(a,b,c){var e=this.el,f=TEAMS.currentTenant.tenantKey;$(document).off(".fb-start");for(var h=0;h<a.length;h++){var p=a[h],s=p.maxIndex||1,u=p.id,w=Date.create(p.createTime),v=p.name?p.name:"",x="formdatareport"===p.module?"\u6570\u636e\u4e0a\u62a5":"\u5916\u90e8\u5206\u53d1";if(!(0<$(e+" stat_table tr #"+u).length))for(var y=0;y<s;y++){var m=b[u+"_"+(y+1)],q=$("\x3ctr id\x3d"+
u+"\x3e\x3c/tr\x3e");"formdatareport"===p.module?q.append("\x3ctd class\x3d'noSub_name_"+u+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+u+'" formData\x3d"'+u+'" data-module\x3d"formdatareport" renderType\x3d"subordinates"\x3e'+v+"\x3c/a\x3e\x3c/td\x3e"):q.append("\x3ctd class\x3d'noSub_name_"+u+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+u+'" data-module\x3d"biaogeform" renderType\x3d"loadForm"\x3e'+v+"\x3c/a\x3e\x3c/td\x3e");p.operator&&p.operator.id&&p.tenantKeyTemp&&
p.tenantKeyTemp.toLowerCase()==f.toLowerCase()?q.append("\x3ctd class\x3d'noSub_operate_"+u+"'\x3e\x3ca class\x3d'router usercard-toggle' userid\x3d'"+p.operator.id+"'\x3e"+p.operator.username+"\x3c/a\x3e\x3c/td\x3e"):q.append("\x3ctd class\x3d'noSub_operate_"+u+"'\x3e\u6e38\u5ba2\x3c/td\x3e");q.append("\x3ctd class\x3d'noSub_time_"+u+"'\x3e"+w.format("{yyyy}-{MM}-{dd}")+"\x3c/td\x3e");q.append("\x3ctd class\x3d'noSub_type_"+u+"'\x3e"+x+"\x3c/td\x3e");for(var B=0;B<c.length;B++){var E=c[B],D=E.id,
C=E.componentKey,F="";m&&(F=m["C_"+D]||"");var G="noSub_"+u+"_"+D;E.subForm&&(G="");E="";if("Money"==C||"NumberComponent"==C)E="ta-r";D=u+"_"+(y+1)+"_"+D;C=!0;try{var H=JSON.parse(F);ocount="";if(0<H.length&&null!=H[0].optionId){for(var K=0;K<H.length;K++)option=H[K],"image"==option.type||"imageFile"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" rel\x3d"fancybox_js" href\x3d"/base/download/img/'+option.optionId+'/image" class\x3d"fancybox_js" type\x3d"image"\x3e'+
option.content+"\x3c/a\x3e\x3c/p\x3e",C=!1):"file"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" data-value\x3d"'+option.optionId+'" href\x3d"/base/download/'+option.optionId+'"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",C=!1):ocount+=option.content+",";F=ocount.substring(0,ocount.length-1)}}catch(M){}C?q.append("\x3ctd id\x3d"+D+" class\x3d'"+G+" "+E+"' title\x3d'"+F+"'\x3e"+F+"\x3c/td\x3e"):q.append("\x3ctd id\x3d"+D+" class\x3d'"+G+" "+
E+"'\x3e"+F+"\x3c/td\x3e");$("#"+D).find(".fancybox_js").fancybox({closeBtn:!0,nextEffect:"fade",prevEffect:"fade",afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}$(e).find("#stat_table tbody").append(q)}}},mergerCells:function(a,b){if(a&&b)for(var c=0;c<b.length;c++){var e=b[c],f=e.maxIndex||1,h=e.id;"task"===this.module&&(h=e.taskId);$(this.el).find("#stat_table .noSub_name_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_name_"+
h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_operate_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_operate_"+h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_time_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_time_"+h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_type_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_type_"+h+":gt(0)").remove();$(this.el).find("#stat_table .j_opreate_"+h+":eq(0)").attr("rowspan",
f);$(this.el).find("#stat_table .j_opreate_"+h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_content_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_content_"+h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_priority_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_priority_"+h+":gt(0)").remove();$(this.el).find("#stat_table .noSub_status_"+h+":eq(0)").attr("rowspan",f);$(this.el).find("#stat_table .noSub_status_"+h+":gt(0)").remove();for(e=
0;e<a.length;e++){var p=a[e];p.subForm||(p=p.id,$(this.el).find("#stat_table .noSub_"+h+"_"+p+":eq(0)").attr("rowspan",f),$(this.el).find("#stat_table .noSub_"+h+"_"+p+":gt(0)").remove())}}},againRenderTable:function(){$(this.el);$(this.el).find("#statbody").html($(f.template("form.stat")).find("#statbody").html());this.talbeScrollbar();$(window).resize();this.renderListStatByRow(1)},talbeScrollbar:function(){$(this.el).find(".j_formstarScr").mCustomScrollbar({axis:"x",scrollButtons:{enable:!0},mouseWheel:"false",
theme:"darkblue",scrollbarPosition:"inside"})},remove:function(){this.formColumnView&&this.formColumnView.remove();$(this.el).off(".FormStatView");$(this.el).find("#formstat").remove()}});m.exports=h});
define("teams/formstat/formfielddetailview",["teams/utils","teams/formstat/formfielddetailmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formfielddetailmodel");h=Backbone.View.extend({initialize:function(c){$("#formfield-detail").remove();var b=this;this.el="#formfield-detail";this.template="formstat.fielddetaillist";this.$el=$(f.template(this.template,c.fieldInfo));this.model=new e(c);$(document.body).append(this.$el);this.model.set({pageNo:1});this.model.on("change:pageinfo",
function(a,d){b.showDataItems(d,c.fieldInfo)});this.renderScrollBar()},delegateEvents:function(){var c=this,b=this.model;this.$el.on("click.formfielddetailview",".close",function(){c.hideDetail()});this.$el.on("click.formfielddetailview","#fieldmore_data",function(){b.set({pageNo:b.get("pageNo")+1})})},showDetail:function(){$("#formfield-detail").modal("show");$(window).trigger("resize")},hideDetail:function(){$("#formfield-detail").modal("hide")},showDataItems:function(c,b){for(var a=c.fieldDatas,
d,e=this.$el.find("#field_table tbody"),f=this.$el.find("#fieldmore_data"),h=0,k=a.length;h<k;h++)d=$("\x3ctr\x3e\x3ctd\x3e"+(""===a[h].CONTENT?"( *\u7a7a  )":a[h].CONTENT)+"\x3c/td\x3e\x3c/tr\x3e"),e.append(d);"NumberComponent"!==b.componentkey&&"Money"!==b.componentkey||this.$el.find(".totalnumber").html("\u603b\u8ba1\x26nbsp;:\x26nbsp;"+c.numberTotal);c.pageDatas.hasNext||f.hide();0==c.pageDatas.totalCount&&this.$el.find(".j_no-result").removeClass("hide")},renderScrollBar:function(){this.$el.find(".field-datas").mCustomScrollbar({theme:"darkblue"});
$(window).trigger("resize")}});m.exports=h});define("teams/formstat/statbaseview",function(h,q,m){h=Backbone.View.extend({initialize:function(f,e){this.cdata=f;this.wrappercontainer=e;this.stat=1},render:function(){console.log("please override it!")},getContainer:function(){return this.container},hideView:function(){this.stat=0;this.getContainer().fadeOut()},showView:function(){this.stat=1;this.getContainer().fadeIn()}});m.exports=h});
define("teams/formstat/formfielddetailmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.fieldId=f.fieldId;this.componetKey=f.componetKey;this.set({pageNo:0,pageSize:10});this.on("change:pageNo",function(e){e.getFormFieldDetailData()})},getFormFieldDetailData:function(){var f=this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formfieldstat/findFieldValueByPage.json",dataType:"json",data:JSON.stringify({fieldId:f.fieldId,componetKey:f.componetKey,
pageNo:f.get("pageNo"),pageSize:f.get("pageSize")}),success:function(e){f.set({pageinfo:e})}})}});m.exports=h});
define("teams/formstat/formstatsearchview",["teams/utils","teams/component/typeahead","teams/formstat/formstatmodel","teams/workflow/formview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/formstat/formstatmodel"),b=h("teams/workflow/formview");h=Backbone.View.extend({initialize:function(a){this.el=a.el?a.el:".j_advanceSearch";this.formFields=a.formFields;$(this.el).html(f.template("formstat.search"));this.formView=new b;this.model=new c;this.parentView=a.parentView},
delegateEvents:function(){var a=this,b=$(a.el);b.on("change.FormStatSearchView",".j_formField-select select",function(){var c=$(this),h=(new Date).getTime(),n=$(this).find("option:selected"),k=n.attr("id"),n=n.attr("key"),r="";"flowName"==n?(r=b.find("#flow-name-clone").clone(),c.parent().parent().attr("class","sch-group j_flowNameSearchGroup"),c.parent().parent().find(".j_formField-condition").html(r.html())):"flowSubmitTime"==n?(r=b.find("#flow-submitTime-clone").clone(),r.find(".j_datetime").attr("id",
"j_datetime"+h),c.parent().parent().attr("class","sch-group j_flowSubmitTimeSearchGroup"),c.parent().parent().find(".j_formField-condition").html(r.html()),f.datepicker({el:a.el+" #j_datetime"+h+" #startTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+h).find("#startTime"),d=$(a.el+" #j_datetime"+h).find("#endTime");d.val()&&b>d.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),c.val("")):c.val(b)}}),
f.datepicker({el:a.el+" #j_datetime"+h+" #endTime",callback:function(b){b=Date.create(b.date).format("{yyyy}-{MM}-{dd}");var c=$(a.el+" #j_datetime"+h).find("#startTime"),d=$(a.el+" #j_datetime"+h).find("#endTime");c.val()&&b<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),d.val("")):d.val(b)}})):"flowStatus"==n?(r=b.find("#flow-status-clone").clone(),c.parent().parent().attr("class","sch-group j_flowStatusSearchGroup"),c.parent().parent().find(".j_formField-condition").html(r.html())):
"flowOperator"==n?(r=b.find("#flow-operator-clone").clone(),r.find(".j_optcontainer").attr("id","j_opt"+h),c.parent().parent().attr("class","sch-group j_flowOptSearchGroup"),c.parent().parent().find(".j_formField-condition").html(r.html()),e({el:a.el+" #j_opt"+h+" #typeahead-flow-employee",callback:function(c){if(c&&!$.isEmptyObject(c)){var e=b.find("#j_opt"+h+" .j_selected");a.renderTypeheader(e,c)}}})):"flowOperatorDept"==n?(r=b.find("#flow-operatordept-clone").clone(),r.find(".j_optdeptcontainer").attr("id",
"j_optdept"+h),c.parent().parent().attr("class","sch-group j_flowOptDeptSearchGroup"),c.parent().parent().find(".j_formField-condition").html(r.html()),e({el:a.el+" #j_optdept"+h+" #typeahead-flow-department",callback:function(c){if(c&&!$.isEmptyObject(c)){var e=b.find("#j_optdept"+h+" .j_selected");a.renderTypeheader(e,c)}}})):(c=c.parent().parent(),a.formView.renderStatSearch({parentEl:c,fieldId:k,componentKey:n,container:a.el}))});b.on("change.FormStatSearchView",".j_formField-condition .j_resultList",
function(){var a=$(this),b=$(this).find("option:selected").attr("id"),c=a.val(),d=a.next();if(c&&b){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+b+"\x3e"+c+"\x3c/a\x3e\x3c/span\x3e";d.find(".entity-item").each(function(a){b==$(this).find("a").attr("id")&&(e=null)});d.append(e)}a.find("option").eq(0).prop("selected",!0)});b.on("change.FormStatSearchView",".j_formField-condition .j_flowStatusList",function(){var a=$(this),b=$(this).find("option:selected").attr("id"),c=a.val(),d=a.next();
if(c){var e='\x3cspan class\x3d"entity-item"\x3e\x3ca status\x3d'+b+"\x3e"+c+"\x3c/a\x3e\x3c/span\x3e";d.find(".entity-item").each(function(a){b==$(this).find("a").attr("status")&&(e=null)});d.append(e)}a.find("option").eq(0).prop("selected",!0)});b.on("click.FormStatSearchView",".j_addCondition",function(){var c=a.formFields,e=b.find("#form-search-clone").clone();b.find("#search-group-list").append(e.removeAttr("id").removeClass("hide"));e=e.find(".j_formField-select select");a.renderSearchComponent(c,
e)});b.on("click.FormStatSearchView",".j_deletesearch",function(){$(this).parents(".sch-group").remove()});b.on("click.FormStatSearchView",".j_search-submit",function(){a.parentView&&(parentView.isKeyword=!1);$("body").trigger("confirmSearch")});b.on("click.FormStatSearchView",".j_search-close",function(){$("#initAdvanceSearch").trigger("click")});b.on("keyup.FormStatSearchView",".j_formFieldSearchGroup .j_numberCheck",function(a){a=$(this).val();$(this).val(a.replace(/[^\d.-]/g,""))});b.on("blur.FormStatSearchView",
".j_formFieldSearchGroup .j_numberCheck",function(a){$(this).trigger("keyup.FormStatSearchView")});b.on("keydown.FormStatSearchView",".j_formFieldSearchGroup .j_numberCheck",function(a){a=parseInt(a.keyCode);var b=$(this).val();if((110==a||190==a)&&0<=b.indexOf(".")||(109==a||173==a)&&0<=b.indexOf("-"))return!1})},render:function(){var a=$(this.el).find("#search-group-list .j_formField-select select");this.renderSearchComponent(this.formFields,a)},renderSearchComponent:function(a,b){$(this.el);for(var c=
0;c<a.length;c++){var e=a[c],f=e.id,h=e.componentKey,r=e.title,p=$("\x3coption id\x3d"+f+" key\x3d"+h+"\x3e"+r+"\x3c/option\x3e");e.subForm&&e.subForm.id&&(p=$("\x3coption id\x3d"+f+" subFormId\x3d"+e.subForm.id+" key\x3d"+h+"\x3e"+r+"\x3c/option\x3e"));"ImageComponent"!=h&&"FileComponent"!=h&&b.append(p)}b.trigger("change.FormStatSearchView")},assembleParam:function(){var a=this,b=$(a.el),c={},e=[];b.find("#search-group-list .j_flowNameSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");
a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",c=$.trim(a.find("input").val());""==c&&(c=null);if(null==c)return!0;e.push({content:c,term:b})});c.names=e;var f=[];b.find("#search-group-list .j_flowSubmitTimeSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition");var b=b.attr("value"),c="",d="",c=$.trim(a.find("input").eq(0).val()),d=$.trim(a.find("input").eq(1).val());""==c&&(c=null);""==d&&(d=
null);if(null==c&&null==d)return!0;f.push({content:c,endContent:d,term:b})});c.createTimes=f;var h=[];b.find("#search-group-list .j_flowStatusSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("status");c.push(a)});if(0==c.length)return!0;h.push({ids:c,term:b})});c.types=h;var r=[];b.find("#search-group-list .j_flowOptSearchGroup").each(function(a){var b=
$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("id");c.push(a)});if(0==c.length)return!0;r.push({ids:c,term:b})});c.operators=r;var p=[];b.find("#search-group-list .j_flowOptDeptSearchGroup").each(function(a){var b=$(this).find(".j_formField-condition select option:selected");a=$(this).find(".j_formField-condition .j_selected");var b=b.attr("value"),
c=[];a.find(".entity-item").each(function(a){a=$(this).find("a").attr("id");c.push(a)});if(0==c.length)return!0;p.push({ids:c,term:b})});c.departments=p;var s=[];b.find("#search-group-list .j_formFieldSearchGroup").each(function(b){var c=$(this).find(".j_formField-select select option:selected"),d=$(this).find(".j_formField-condition select option:selected");b=$(this).find(".j_formField-condition");var e=$(this).find(".j_formField-condition .j_selected"),g=c.attr("id"),f=c.attr("subformid"),c=c.attr("key"),
d=d.attr("value"),h="",k="",l=[],h=["DateComponent","Money","NumberComponent","Monitor","Raty"],g={fieldId:g,subFormId:f,componentKey:c,term:d};if(a.getType(c,"Text TextArea Email Phone Mobile FileComponent".split(" "))){h=$.trim(b.find("input").val());if(""==h)return!0;g.content=h}else if(a.getType(c,h)){h=$.trim(b.find("input").eq(0).val());k=$.trim(b.find("input").eq(1).val());""==h&&(h=null);""==k&&(k=null);if(null==h&&null==k)return!0;g.content=h;g.endContent=k}else{e.find(".entity-item").each(function(a){a=
$(this).find("a").attr("id");l.push(a)});if(0==l.length)return!0;g.ids=l}s.push(g)});c.filterFormDatas=s;return c},renderTypeheader:function(a,b){if(b.length)for(var c=0;c<b.length;c++){var e=b[c],f=e.name,h=e.id;if(f&&h){var r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e";a.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(r=null)});a.append(r)}}else f=b.name,h=b.id,f&&h&&(r='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+
f+"\x3c/a\x3e\x3c/span\x3e",a.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(r=null)}),a.append(r))},getType:function(a,b){return-1<b.toString().indexOf(a)?!0:!1},remove:function(){$(this.el).off(".FormStatSearchView");$(this.el).find(".j_formstat-search").remove();this.formView&&(this.formView.remove(),this.formView=null)}});m.exports=h});
define("teams/formstat/formstatdatatableview","teams/utils teams/formstat/formstatmodel teams/formstat/formcolumnview teams/formstat/baseformstatsearchview teams/formstat/formstatdatafieldview teams/form/formoperationview teams/form/formmanagemodel teams/formmanage/formincollectlogview teams/formstat/formcollectchartview teams/form/formreportconfigview teams/form/formauthconfigview teams/form/formcontinuewriteview teams/formstat/formstatdatatabview teams/form/formtagview teams/formmanage/formdistributeview".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/formstat/formstatmodel"),c=h("teams/formstat/formcolumnview"),b=h("teams/formstat/baseformstatsearchview"),a=h("teams/formstat/formstatdatafieldview"),d=h("teams/form/formoperationview"),g=h("teams/form/formmanagemodel"),l=h("teams/formmanage/formincollectlogview"),n=h("teams/formstat/formcollectchartview"),k=h("teams/form/formreportconfigview"),r=h("teams/form/formauthconfigview"),p=h("teams/form/formcontinuewriteview"),s=h("teams/formstat/formstatdatatabview"),
u=h("teams/form/formtagview"),w=h("teams/formmanage/formdistributeview"),v=[{title:"\u7c7b\u578b",position:"left"},{title:"\u63d0\u4ea4\u65f6\u95f4",position:"left"},{title:"\u63d0\u4ea4\u4eba",position:"left"},{title:"\u4e0a\u62a5\u540d\u79f0",position:"left"}];h=Backbone.View.extend({initialize:function(a){this.formId=a.formId;this.el=a.container?a.container:"#j_formContent";this.model=new e;this.fileds=v;this.formModel=new g;this.isKeyword=!1;this.userId=TEAMS.currentUser.id;$(this.el).html(f.template("formstat.formstatdatatable"))},
delegateEvents:function(){var e=this,g=$(e.el),h=e.model;g.off("click.FormStatView",".j_tag").on("click.FormStatView",".j_tag",function(a){$(this).parents(".j_tagLi").find(".j_tagcontainer").slideToggle("fast");(new u({targetId:e.formId,module:"biaoge",parentEl:".j_formstat .js_formtab .j_tagLi",container:".j_tagcontainer"})).render()});$("body").off("click.FormStatDataTableView").on("click.FormStatDataTableView",function(a){a=$(a.target);$(a).hasClass("j_tag")||0<$(a).parents(".j_tag").length||0<
$(a).parents(".j_tagcontainer").length||$(".j_tagcontainer").slideUp("fast")});$("body").off("click.FormStatDataTableView",".goto-top").on("click.FormStatDataTableView",".goto-top",function(a){f.gotoTop(e.el+" .j_eformstatScr")});$("body").off("confirmSearch").on("confirmSearch",function(a){e.renderListStatByRow(1)});g.on("click.FormStatTabView",".j_form_goalSlideCtrl",function(){null==e.formStatDataTabView?(e.formStatDataTabView=new s({formId:e.formId,container:e.el+" .j_form_tab",type:"formstat"}),
e.formStatDataTabView.render()):e.formStatDataTabView.show()});g.on("click.FormStatDataTableView","#more_data",function(a){a=$(this).data("page");e.renderListStatByRow(a.nextPage)});g.on("click.FormStatDataTableView",".j_field_chart",function(b){g.find(".j_field_data").toggle();$(this).attr("load-data")||(e.chartView=new a({formId:e.formId,el:".j_field_data"}),$(this).attr("load-data",!0),e.chartView.render(e.getParam()))});g.on("click.FormStatDataTableView",".j_field_chart",function(b){g.find(".j_field_data").toggle();
$(this).attr("load-data")||(e.chartView=new a({formId:e.formId,el:".j_field_data"}),$(this).attr("load-data",!0),e.chartView.render(e.getParam()))});g.on("click.FormStatDataTableView","#export_formdata",function(a){0!=$(this).data("isClick")&&($(this).data("isClick",!1),a={},e.searchView&&(a=e.searchView.assembleParam()),a.formId=e.formId,e.model.exportParam(a,function(a){}),window.open("/formdatastat/exportXlsForBaseForm.json?_t\x3d"+(new Date).getTime()),$(this).data("isClick",!0))});g.on("click.FormStatDataTableView",
".j_columnField",function(a){$("body").append("\x3cdiv id\x3d'setupColumnField'\x3e\x3c/div\x3e");e.formColumnView=new c({formId:e.formId,container:"body #setupColumnField",parentObj:e});e.formColumnView.render()});g.on("click.FormStatDataTableView","#initAdvanceSearch",function(a){$(this).data("open")?($(this).find("i").attr("class","icon-angle-down cs-p"),g.find(".j_advanceSearch").slideUp(),$(this).data("open",!1)):($(this).find("i").attr("class","icon-angle-up cs-p"),null==g.find(".j_advanceSearch .j_formstat-search").get(0)&&
(e.searchView&&e.searchView.remove(),e.searchView=new b({el:e.el+" .j_advanceSearch",formFields:e.formFields,module:e.module,parentView:e}),e.searchView.render()),g.find(".j_advanceSearch").slideDown(),$(this).data("open",!0))});g.on("click.FormStatDataTableView",".j_form_set li",function(){var a=$(this).children("a").attr("data-target");switch(a){case "reportconf":f.notify(a);break;case "useflow":var a=TEAMS.currentUser.admin?!0:!1,b={};b.formId=e.formId;b.module="workflow";b.el="#copy-form";b.formTitle=
e.form.name;b.ownership=e.form.ownership;b.tpl=f.template("flow.formcopy",{userId:TEAMS.currentUser.id,operationtype:"\u4f7f\u7528\u5ba1\u6279",admin:a});b.copyCallback=function(a){a&&a.form&&"company"==a.form.ownership?ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/company",{trigger:!0}):ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/personal",{trigger:!0})};e.formoperationView=new d(b);e.formoperationView.render();break;case "editform":window.open("/form/edit/"+e.formId);break;case "copyform":a=
TEAMS.currentUser.admin?!0:!1;b={};b.formId=e.formId;b.module="biaoge";b.el="#copy-form";b.formTitle=e.form.name;b.ownership=e.form.ownership;b.tpl=f.template("flow.formcopy",{userId:TEAMS.currentUser.id,operationtype:"\u590d\u5236",admin:a});b.copyCallback=function(a){ROUTER.navigate("/forms/"+TEAMS.currentUser.id+"/write",{trigger:!0})};e.formoperationView=new d(b);e.formoperationView.render();break;case "deleteform":if("enable"==e.form.status){f.notify("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u505c\u7528\u8868\u5355\u540e\u91cd\u65b0\u64cd\u4f5c\uff01");
break}h.findCount({formId:e.formId},function(a){f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+a.count+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",function(a){a&&e.formModel.deleteForm({formId:e.formId},function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),setTimeout(function(){ROUTER.navigate("/forms/"+TEAMS.currentUser.id+"/write",{trigger:!0})},1E3))})})});break;case "dataTrend":(new n({formId:e.formId})).render();break;case "insidCollect":(new l({formId:e.formId})).render();
break;case "authConfig":e.formauthconfigview=new r({parentEl:e.el,userId:e.userId,formId:e.formId,callback:function(a){e.formauthconfigview.hide()}});e.formauthconfigview.render();break;case "continueWrite":e.formcontinuewriteview=new p({parentEl:e.el,userId:e.userId,formId:e.formId,callback:function(a){e.formcontinuewriteview.hide()}});e.formcontinuewriteview.render();break;case "reportConf":e.formreportconfigview=new k({parentEl:e.el,userId:e.userId,formId:e.formId,callback:function(a){e.formreportconfigview.hide()}}),
e.formreportconfigview.render()}});g.on("click.FormStatDataTableView",".j_insideNotice",function(a,b){g.find(".j_form_set .j_employee").click()});g.on("confirmHandler.FormStatDataTableView",".j_employee",function(a,b){var c=e.formId,d=e.form.name,g=b.objs;if(b&&g&&0<g.length){for(var k={},l=0;l<g.length;l++)k["userIds["+l+"]"]=g[l].id;k["form.id"]=c;k["form.name"]=d;h.incollect(k,function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})}else f.notify("\u8bf7\u9009\u62e9\u4eba\u5458\uff01")});
g.on("click.FormStatDataTableView",".j_form_keyword",function(){e.isKeyword=!0;e.renderListStatByRow(1)});g.on("keyup.FormStatDataTableView",".j_keyword_input",function(a){e.isKeyword=!0;13==a.keyCode&&e.renderListStatByRow(1)});g.on("click.FormStatDataTableView",".js_shareForm",function(){if("enable"!=e.form.status)f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5206\u53d1\uff01");else{var a=e.formId;e.formModel.getFiledByForm({formId:a},function(b){b.formFields&&0<b.formFields.length?(new w({container:"#baidushare",
shareTitle:e.form.name,shareDesc:e.form.describe,shareUrl:window.location.protocol+"//"+window.location.host+"/biaoge/fill/"+a}),$("#distributeModal").modal("show")):f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})}})},_renderAgain:function(a){11>$(this.el).find("#stat_table tbody tr").length?this.render():a.remove()},render:function(){this.renderListStatByRow(1);this.talbeScrollbar()},numberToChinese:function(a){var b="",c="\u4edf\u4f70\u62fe\u4ebf\u4edf\u4f70\u62fe\u4e07\u4edf\u4f70\u62fe\u5143\u89d2\u5206";
a+="00";var d=a.indexOf(".");0<=d&&(a=a.substring(0,d)+a.substr(d+1,2));c=c.substr(c.length-a.length);for(d=0;d<a.length;d++)b+="\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396".substr(a.substr(d,1),1)+c.substr(d,1);return b.replace(/\u96f6\u89d2\u96f6\u5206$/,"").replace(/\u96f6[\u4edf\u4f70\u62fe]/g,"\u96f6").replace(/\u96f6{2,}/g,"\u96f6").replace(/\u96f6([\u4ebf|\u4e07])/g,"$1").replace(/\u96f6+\u5143/,"\u5143").replace(/\u4ebf\u96f6{0,3}\u4e07/,"\u4ebf").replace(/^\u5143/,"\u96f6\u5143")},
getParam:function(){var a={};this.isKeyword?a.names=[{content:$(this.el).find(".j_keyword_input").val(),term:"like"}]:this.searchView&&(a=this.searchView.assembleParam());a.formId=this.formId;a.module=this.module;return a},renderListStatByRow:function(a){var b=this,c=b.el,d=$(c),e=b.getParam();b.chartView&&b.chartView.render(e);e.pageNo=a;b.model.findRowListStatForBase(e,function(e){var g=e.formFields,h=e.formDatas,k=e.listStats,l=e.numberFieldStats,n=e.pageDatas,p=e.form,s=e.form.name;b.form=p;if(p.permission){"WRITE"==
p.permission&&(d.find(".js_shareForm").remove(),d.find(".j_form_set_btn").remove(),d.find(".j_form_router").remove(),d.find(".j_form_name").next().remove(),d.find(".j_form_name").parent().css("cursor","default"));"STATISTICS"==p.permission&&d.find(".j_form_set_btn").remove();b.renderFormRouter();var r=$(b.el).find("#write_report");p&&p.operator&&p.operator.department&&(r.attr("data-id",p.id),r.attr("userid",TEAMS.currentUser.id));$(b.el).find(".j_form_name").text(s).attr("title",s);if(e.message)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e'+
e.message+"\x3c/div\x3e");else if(null==p)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult" style\x3d"color:#e60000;"\x3e\u8868\u5355\u4e0d\u5b58\u5728\x3c/div\x3e');else if(null==g||0==g.length)$(c).find("#formDatas").html('\x3cdiv class\x3d"formstat-noresult"\x3e\u5f53\u524d\u8868\u5355\u6ca1\u6709\u4efb\u4f55\u5b57\u6bb5\uff01\x3c/div\x3e');else{1==a&&($(b.el).find("#stat_table tbody").empty(),$(c).find(".j_form_empty").addClass("hide"));b.formFields=g;if(0==$(c).find("#stat_table thead tr th").length){p=
$(c).find("#stat_table thead tr");s=$(c).find("#stat_table tfoot tr");for(e=0;e<g.length;e++){r=g[e];p.append("\x3cth title\x3d'"+r.title+"'\x3e\x3cdiv\x3e"+r.title+"\x3c/div\x3e\x3c/th\x3e");var v="",u="";if("Money"==r.componentKey||"NumberComponent"==r.componentKey)v="ta-r";"Money"==r.componentKey&&(u="Money");s.append("\x3ctd id\x3d'tfoot_"+r.id+"' class\x3d'"+v+"' type\x3d'"+u+"'\x3e\x3c/td\x3e")}for(e=0;e<b.fileds.length;e++)r=b.fileds[e],"left"===r.position?(p.prepend("\x3cth title\x3d'"+r.title+
"'\x3e\x3cdiv\x3e"+r.title+"\x3c/div\x3e\x3c/th\x3e"),s.prepend("\x3ctd\x3e\x3c/td\x3e")):(p.append("\x3cth title\x3d'"+r.title+"'\x3e\x3cdiv\x3e"+r.title+"\x3c/div\x3e\x3c/th\x3e"),s.append("\x3ctd\x3e\x3c/td\x3e"))}if(n&&n.hasNext)$(b.el+" #more_data").show(),$(b.el+" #more_data").data("page",n);else if($(b.el+" #more_data").hide(),1==a){if(null==h||1>h.length){$(c).find(".j_form_empty").removeClass("hide");$(c).find("#stat_table tfoot").hide();return}$(c).find(".j_form_empty").addClass("hide");
$(c).find("#stat_table tfoot").show()}else 0<h.length&&$(c).find(".j_form_empty").addClass("hide");if(l&&0<l.length){for(e=0;e<l.length;e++)p=l[e],n=p.fieldId,p=p.sumVal,"Money"==$(c).find("#stat_table tfoot #tfoot_"+n).attr("type")&&(p=p+" "+b.numberToChinese(p)),$(c).find("#stat_table tfoot #tfoot_"+n).html("\u603b\u548c\uff1a"+p).attr("title","\u603b\u548c\uff1a"+p);$(c).find("#stat_table tfoot").show()}else $(c).find("#stat_table tfoot").hide();l={};if(k)for(e=0;e<k.length;e++)n=k[e],l[n.FORM_DATA+
"_"+n.DATA_INDEX]=n;b.renderDataReport(h,l,g);f.layout(c+" .j_eformstatScr");b.mergerCells(g,h)}}else $(b.el).html(f.template("base.nopermission",{msg:null}))})},renderFormRouter:function(){var a=this;$(a.el).find(".j_form_router li").each(function(){$(this).attr("href","/forms/"+TEAMS.currentUser.id+"/"+$(this).attr("type")+"/"+a.formId)})},renderDataReport:function(a,b,c){var d=this.el,e=TEAMS.currentTenant.tenantKey;$(document).off(".fb-start");for(var g=0;g<a.length;g++){var f=a[g],h=f.maxIndex||
1,k=f.id,l=Date.create(f.createTime),n=f.name?f.name:"",p="formdatareport"===f.module?"\u6570\u636e\u4e0a\u62a5":"\u5916\u90e8\u5206\u53d1";if(!(0<$(d+" stat_table tr #"+k).length))for(var r=0;r<h;r++){var s=b[k+"_"+(r+1)],v=$("\x3ctr id\x3d"+k+"\x3e\x3c/tr\x3e");"formdatareport"===f.module?v.append("\x3ctd class\x3d'noSub_name_"+k+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+k+'" formData\x3d"'+k+'" data-module\x3d"formdatareport" renderType\x3d"subordinates"\x3e'+n+"\x3c/a\x3e\x3c/td\x3e"):
v.append("\x3ctd class\x3d'noSub_name_"+k+'\'\x3e\x3ca class\x3d"j_entityslider-toggle" data-id\x3d"'+k+'" data-module\x3d"biaogeform" renderType\x3d"loadForm"\x3e'+n+"\x3c/a\x3e\x3c/td\x3e");f.operator&&f.operator.id&&f.tenantKeyTemp&&f.tenantKeyTemp.toLowerCase()==e.toLowerCase()?v.append("\x3ctd class\x3d'noSub_operate_"+k+"'\x3e\x3ca class\x3d'router usercard-toggle' userid\x3d'"+f.operator.id+"'\x3e"+f.operator.username+"\x3c/a\x3e\x3c/td\x3e"):v.append("\x3ctd class\x3d'noSub_operate_"+k+"'\x3e\u6e38\u5ba2\x3c/td\x3e");
v.append("\x3ctd class\x3d'noSub_time_"+k+"'\x3e"+l.format("{yyyy}-{MM}-{dd}")+"\x3c/td\x3e");v.append("\x3ctd class\x3d'noSub_type_"+k+"'\x3e"+p+"\x3c/td\x3e");for(var u=0;u<c.length;u++){var w=c[u],m=w.id,q=w.componentKey,I="";s&&(I=s["C_"+m]||"");var J="noSub_"+k+"_"+m;w.subForm&&(J="");w="";if("Money"==q||"NumberComponent"==q)w="ta-r";m=k+"_"+(r+1)+"_"+m;q=!0;try{var L=JSON.parse(I);ocount="";if(0<L.length&&null!=L[0].optionId){for(var N=0;N<L.length;N++)option=L[N],"image"==option.type||"imageFile"==
option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" rel\x3d"fancybox_js" href\x3d"/base/download/img/'+option.optionId+'/image" class\x3d"fancybox_js" type\x3d"image"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",q=!1):"file"==option.type?(ocount+='\x3cp class\x3d"ellipsis" title\x3d"'+option.content+'"\x3e\x3ca target\x3d"_blank" data-value\x3d"'+option.optionId+'" href\x3d"/base/download/'+option.optionId+'"\x3e'+option.content+"\x3c/a\x3e\x3c/p\x3e",
q=!1):ocount+=option.content+",";I=ocount.substring(0,ocount.length-1)}}catch(U){}q?v.append("\x3ctd id\x3d"+m+" class\x3d'"+J+" "+w+"' title\x3d'"+I+"'\x3e"+I+"\x3c/td\x3e"):v.append("\x3ctd id\x3d"+m+" class\x3d'"+J+" "+w+"'\x3e"+I+"\x3c/td\x3e");$("#"+m).find(".fancybox_js").fancybox({closeBtn:!0,nextEffect:"fade",prevEffect:"fade",afterLoad:function(){this.title="Image "+(this.index+1)+" of "+this.group.length+(this.title?" - "+this.title:"")}})}$(d).find("#stat_table tbody").append(v)}}},mergerCells:function(a,
b){if(a&&b)for(var c=0;c<b.length;c++){var d=b[c],e=d.maxIndex||1,g=d.id;"task"===this.module&&(g=d.taskId);$(this.el).find("#stat_table .noSub_name_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_name_"+g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_operate_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_operate_"+g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_time_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_time_"+
g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_type_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_type_"+g+":gt(0)").remove();$(this.el).find("#stat_table .j_opreate_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .j_opreate_"+g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_content_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_content_"+g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_priority_"+g+":eq(0)").attr("rowspan",
e);$(this.el).find("#stat_table .noSub_priority_"+g+":gt(0)").remove();$(this.el).find("#stat_table .noSub_status_"+g+":eq(0)").attr("rowspan",e);$(this.el).find("#stat_table .noSub_status_"+g+":gt(0)").remove();for(d=0;d<a.length;d++){var f=a[d];f.subForm||(f=f.id,$(this.el).find("#stat_table .noSub_"+g+"_"+f+":eq(0)").attr("rowspan",e),$(this.el).find("#stat_table .noSub_"+g+"_"+f+":gt(0)").remove())}}},againRenderTable:function(){$(this.el).find("#formDatas").html($(f.template("formstat.formstatdatatable")).find("#formDatas").html());
this.talbeScrollbar();$(window).resize();this.renderListStatByRow(1)},talbeScrollbar:function(){$(this.el).find(".j_formstarScr").mCustomScrollbar({axis:"x",scrollButtons:{enable:!0},mouseWheel:"false",theme:"darkblue",scrollbarPosition:"inside"})},remove:function(){this.formColumnView&&(this.formColumnView.remove(),this.formColumnView=null);this.formoperationView&&(this.formoperationView.remove(),this.formoperationView=null);this.formStatDataTabView&&(this.formStatDataTabView.remove(),this.formStatDataTabView=
null);$(this.el).off(".FormStatDataTableView")}});m.exports=h});
define("teams/formstat/formstattabview","teams/utils teams/formstat/formstattableview teams/formstat/formstatchartview teams/formstat/formfieldstatview teams/formstat/formreportview teams/formmanage/formcollectloglistview teams/formmanage/formloglistview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/formstat/formstattableview"),c=h("teams/formstat/formstatchartview"),b=h("teams/formstat/formfieldstatview"),a=h("teams/formstat/formreportview"),d=h("teams/formmanage/formcollectloglistview"),
g=h("teams/formmanage/formloglistview");h=Backbone.View.extend({initialize:function(a){this.formId=a.formId;this.el=a.container;this.isAdmin=TEAMS.currentUser.admin;$(this.el).html(f.template("formstat.baseformstattab"));$("#j_formLabelscroll").hide()},delegateEvents:function(){var f=this,h=$(f.el);h.on("click.BaseFormStatTabView",".toolkit-item-tab",function(){var k=$(this),r=k.find("a").attr("id");h.find(".toolkit-item-tab").removeClass("active");k.addClass("active");switch(r){case "data-stat":f.mainView=
new e({formId:f.formId,container:"#js-formstat"});f.mainView.render();break;case "data-trend":f.mainView=new c({formId:f.formId,el:"#js-formstat"});f.mainView.render();break;case "field-stat":f.mainView=new b({formId:f.formId,el:"#js-formstat"});f.mainView.render();break;case "report-stat":f.mainView=new a({formId:f.formId,el:"#js-formstat"});break;case "insidecollect-log":f.mainView=new d({formId:f.formId,el:"#js-formstat"});f.mainView.render();break;case "submit-log":f.mainView=new g({formId:f.formId,
el:"#js-formstat"});f.mainView.render();break;default:h.html("")}})},render:function(){$(this.el).find("#data-stat").parent().trigger("click")},remove:function(){$(this.el).off(".BaseFormStatTabView")}});m.exports=h});
define("teams/formstat/formstatchartview",["teams/utils","teams/component/typeahead","teams/formstat/formstatchartmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/formstat/formstatchartmodel");q=Backbone.View.extend({initialize:function(c){this.model=new e({formId:c.formId});this.el=c.el;c=f.template("formstat.formstatchart");this.$el.html(c);this.initComponents()},initComponents:function(){var c=this,b=c.model;f.datepicker([{el:"#begin-date",callback:function(a){var d=
a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(d,b.endDate)?b.beginDate=d||b.beginDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(a){var d=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(b.beginDate,d)?b.endDate=d||b.endDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);c.$el.find("#begin-date").val(b.beginDate);
c.$el.find("#end-date").val(b.endDate)},isBefore:function(c,b){if(c&&b){if(Date.create(c).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");return!1}return!0},delegateEvents:function(){var c=this,b=c.model;$("body").on("click.taskreport",".goto-top",function(a){f.gotoTop(".js_taskreportScr")});c.$el.on("click.taskreport",".j_time a",function(a){switch($(a.target).attr("data")){case "thisWeek":b.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");
b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":b.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":b.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":b.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),
b.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}c.$el.find("#begin-date").val(b.beginDate);c.$el.find("#end-date").val(b.endDate);c.$el.find(".j_time .btn").removeClass("btn-success");$(this).addClass("btn-success");c.loadDayChart()});c.$el.on("click.taskreport","#load",function(){c.$el.find(".j_time .btn").removeClass("btn-success");c.loadDayChart()})},remove:function(){this.$el.off(".taskreport");this.dayChart&&($(window).off("resize",this.dayChart.resize),this.dayChart.dispose(),
this.dayChart=null);this.finishChart&&($(window).off("resize",this.finishChart.resize),this.finishChart.dispose(),this.finishChart=null);this.urgencyChart&&($(window).off("resize",this.urgencyChart.resize),this.urgencyChart.dispose(),this.urgencyChart=null);this.stopListening();this.model=null},render:function(c,b){var a=this;f.layout(".js_taskreportScr");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.initCharts();a.loadDayChart()})},dayChartBasicOption:{title:{text:"\u6570\u636e\u91c7\u96c6\u7edf\u8ba1"},
tooltip:{trigger:"item"},legend:{data:[""]},calculable:!0,toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:5,end:95},yAxis:[{type:"value"}],color:["#3AEC94"]},dayChart:null,initCharts:function(){var c;c=this.dayChart=echarts.init(document.getElementById("day-chart"),"macarons");$(window).on("resize",c.resize)},loadDayChart:function(){var c=this;if(c.dayChart){var b=c.dayChart;b.showLoading({effect:"spin"});c.model.statisticsByDay(function(a){b.hideLoading();
a=_.extend(a,c.dayChartBasicOption);b.setOption(a,!0)})}else f.alert("\u672a\u627e\u5230\u56fe\u8868\u7ec4\u4ef6\uff0c\u8bf7\u786e\u8ba4\u9875\u9762\u52a0\u8f7d\u6b63\u786e")}});m.exports=q});
define("teams/formstat/formcollectchartmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:1,pageSize:10,initialize:function(f){this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");this.statisticians=[TEAMS.currentUser.id];this.formId=f.formId;this.xAxis=null},search:function(f,e){$.ajax({type:"post",url:"/formdata/findFormDataByFormId.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},statisticsByDay:function(f){var e=
this;$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",url:"/formdatastat/getFormDataTrendForChart.json",dataType:"json",data:JSON.stringify({beginDate:e.beginDate,endDate:e.endDate+" 24:00:00",formId:e.formId}),success:function(c){if(f){var b=e.xAxis=e.calculateX();c=e.parseSeries(c.formTrendData);f({xAxis:b,series:c})}}})},calculateX:function(){var f=[{type:"category",data:[]}];Date.range(this.beginDate,this.endDate).every("day",function(e){f[0].data.push(e.format("{yyyy}-{MM}-{dd}"))});
return f},parseSeries:function(f){var e=[{name:"\u6b21\u6570",type:"bar",data:[]}];_.isEmpty(f)||(e[0].data=this.parseMapToArray(f));return e},parseMapToArray:function(f){for(var e=Array(this.xAxis[0].data.length),c,b,a=0,d=f.length;a<d;a++)b=f[a],c=this.xAxis[0].data.indexOf(b.ctime),e[c]=b.counts;return e}});m.exports=h});
define("teams/tag/taglistview",["teams/utils","teams/component/tagmodel","teams/component/filter"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/tagmodel");h("teams/component/filter");h=Backbone.View.extend({el:".j_taglist",initialize:function(c){this.userId=TEAMS.currentUser.id;this.model=new e({targetId:"",module:""});this.id=c.id;this.type=c.type;this.module=c.module;$(this.el).html(f.template("tag.taglist"));f.layout(".tag-list-wrap")},delegateEvents:function(){var c=this,b=this.model,
a=$(c.el);$("body").off("click.TagList",".goto-top").on("click.TagList",".goto-top",function(a){f.gotoTop(".tag-list-wrap")});a.on("click.TagList",".list-more",function(){c.renderMore(c.type)});a.on("click.TagList",".toolkit-item",function(a,b){c.type=b?b:$(this).attr("type");"common"==c.type&&($("#person-label").addClass("hide"),$("#all-label").addClass("hide"),$("#common-label").removeClass("hide"));"all"==c.type&&($("#person-label").addClass("hide"),$("#common-label").addClass("hide"),$("#all-label").removeClass("hide"));
"privacy"==c.type&&($("#all-label").addClass("hide"),$("#common-label").addClass("hide"),$("#person-label").removeClass("hide"));$(this).addClass("active").siblings().removeClass("active");c.keywords=null;c.id="list";"all"==c.type?($(".tag-action .icon-plus").hide(),$(".tag-add").addClass("hide")):$(".tag-action .icon-plus").show();c.render()});a.off("click.TagList",".j_edit").on("click.TagList",".j_edit",function(){var a=$(this).parents("li"),b=$(a.find(".tag-item").html()).clone();$(".j_tags").data("tag",
b);a.find(".tag-item").removeAttr("href");a.find(".tag-item").html("\x3cinput type\x3d'text' id\x3d'tname' class\x3d'form-control' value\x3d'"+$(b[0]).text()+"'\x3e");a.find("#tname").focus()});a.off("focusout.TagList","#tname").on("focusout","#tname",function(){var a=$(this),c=a.parents("li"),e=a.parent(),h=$(this).val(),k=c.attr("id");c.find(".tag-item").attr("href","/tag/privacy/"+k);var c=c.attr("privacy"),r=$(".j_tags").data("tag"),p=$(r[0]).text();""==a.val().trim()||a.val()==p?(a.remove(),
e.html(r)):15<a.val().length?f.notify("\u6807\u7b7e\u5185\u5bb9\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e15!"):b.update(k,h,c,function(b){b.message?(a.remove(),e.html(r),f.notify("\u66f4\u6539\u5931\u8d25\uff0c\u8be5\u8be5\u6807\u7b7e\u5df2\u5b58\u5728!")):(a.remove(),$(r[0]).text(h),e.html(r),f.notify("\u66f4\u6539\u6210\u529f"))})});a.off("click.TagList",".j_del").on("click",".j_del",function(){c.delTag($(this).parents("li"))});a.on("click.TagList",".j_show_search",function(){a.find(".tag-search").toggleClass("hide").find("input").focus()});
a.on("click.TagList",".icon-plus",function(){a.find(".tag-add").focus().toggleClass("hide").find("input").focus()});a.on("click.TagList",".j_search",function(){c.keywords=$(this).siblings("input").val();c.render();$(this).siblings("input").val("")});a.on("keyup.TagList",".tag-search input",function(a){13==a.keyCode&&$(".j_search").trigger("click")});a.on("click.TagList",".j_create",function(){var a=$.trim($(this).siblings("input").val());a&&(15<a.length?f.notify("\u6807\u7b7e\u5185\u5bb9\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e15!"):
(tag={},tag.name=a,tag.privacy="list"==c.type||"privacy"==c.type?!0:!1,b.create(tag,function(a){a=a.tag;if(a.existed)f.notify("\u6807\u7b7e:"+a.name+"\u5df2\u7ecf\u5b58\u5728!");else{var b=c.renderOne(a);$(".j_tags").prepend(b).end().find(".no-result").addClass("hide");f.notify("\u6807\u7b7e:"+a.name+"\u521b\u5efa\u6210\u529f!")}}),$(this).siblings("input").val("")))});a.on("keyup.TagList",".tag-add input",function(a){13==a.keyCode&&$(".j_create").trigger("click")})},render:function(){var c=this,
b=this.model,a=$(".j_tags");$(".j_"+c.type).addClass("active").siblings().removeClass("active");b.loadTags(c.type,c.keywords,null,function(b){a.find(".loading_large").removeClass("hide");a.data("pNo",1);c.renderTag(b.page,a,1)})},renderTag:function(c,b,a){$(this.el);1==a&&(b.empty(),c&&c.result&&0==c.result.length?$(".tag-list-wrap").find(".no-result").removeClass("hide"):$(".tag-list-wrap").find(".no-result").addClass("hide"));for(a=0;a<c.result.length;a++){var d=c.result[a],e=this.renderOne(d);
b.append(e);9==a&&b.data("createTime",d.createTime);0==a&&"list"==this.id&&($first=b.find("#"+d.id),$first.find(".tag-item").trigger("click"),this.id=null)}10==c.result.length&&c.hasNext?$(".tag-list-wrap").find(".list-more").removeClass("hide"):$(".tag-list-wrap").find(".list-more").addClass("hide")},renderOne:function(c){var b=c.privacy?"privacy":"common",a=$("#tag").clone(),b="/tag/"+b+"/"+c.id;c.privacy||TEAMS.currentUser.admin||a.find(".tag-option").html("");this.id==c.id&&a.addClass("active");
a.attr({privacy:c.privacy,id:c.id});a.find(".tag-text").text(c.name);a.find(".tag-item").attr("href",b);a.removeClass("hide");return a},loadTag:function(c){var b=0,a=[];1==c.pageNo&&($("#tag-list").empty(),c&&c.result&&0==c.result.length&&$(this.el).find(".no-result").removeClass("hide"));for(var d=0;d<c.result.length;d++){b++;var e=c.result[d],f=e.id,h=$("#tagClone .tag").clone(),k=e.privacy?"[\u6211\u7684\u6807\u7b7e]":"[\u516c\u5171\u6807\u7b7e]";h.find(".sn-tag").html(b);h.find("span.type").html(k);
e.privacy?h.find("span.title").html(e.name).addClass("myTag"):h.find("span.title").html(e.name);h.attr("id",f);h.find(".link").attr("href","/search/tag/"+f);f=e.createTime?Date.create(e.createTime).format("{yyyy}-{MM}-{dd}"):"";h.find(".date").html(f);e.creator&&e.creator.username!=TEAMS.currentUser.username&&h.find(".user").html(e.creator.username);a.push(h.outerHTML())}$("#tag-list").data("index",b).append(a.join(""));c.hasNext?$("#taglist-container .center-more").removeClass("hide"):$("#taglist-container .center-more").addClass("hide");
$(this.el).find(".loading_large").addClass("hide")},renderMore:function(c){var b=this;c=this.model;var a=$(".j_tags"),d=a.data("createTime");d&&(d=Date.create(d),d=d.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));var e=parseInt(a.data("pNO"))+1;a.data("pNO",e);c.loadTags(b.type,b.keywords,d,function(c){b.renderTag(c.page,a,e)})},search:function(){var c=this,b=c.model;$(c.el).find(".loading_large").addClass("hide");$(c.el).find(".no-result").addClass("hide");var a="",d=$("#tags-filter").data("data-filter"),
e=$("#tag-order").attr("data-entity"),f=$.trim($("#tagsearch-keywords").val());b.userId=this.userId;b.id=this.id;1==b.pageNo&&$("#tag-list").html("");a=d&&0<d.length?a+('"filter":{'+d+"},"):a+('"filter":{"keywords":"'+f+'"},');a+='"userId":"'+c.userId+'","pageNo":"'+b.pageNo+'","order":{"property":"'+(e?e:"default")+'"}';a=("{"+a+"}").replace(/\\/g,"\\\\");b.search(a,function(a){c.loadTag(a.page);c.rebuildSN($("#tag-list"));$(".center-pane #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")})},
delTag:function(c){var b=this.model,a=$(this.el),d=this.searchNext(),e=c.attr("id");f.confirm("\u786e\u8ba4\u5220\u9664\u8be5\u6807\u7b7e\uff1f",function(c){c&&b.deleteTag(e,function(b){a.find("#"+e).remove();f.notify("\u5220\u9664\u6210\u529f");d?(b=$(d).find("a").attr("href"),b=b.substring(0,b.lastIndexOf("/"))+"/"+$(d).attr("id"),ROUTER.navigate(b,{trigger:!0})):($(".ebox1 .no-result").removeClass("hide"),$("#tagname").text(""),$("#search-group .document i").html(0),$("#search-group .customer i").html(0),
$("#search-group .mainline i").html(0),$("#search-group .task i").html(0),$("#search-group .workflow i").html(0),$(".ebox1 .e-list").empty(),$(".j_tags").siblings(".no-result").removeClass("hide"))})})},rebuildSN:function(c){var b=$(c).children();c.data("index",b.length);for(c=0;c<b.length;c++)$(b[c]).find(".sn-tag").html(c+1)},updateList:function(c,b){$(".j_tags li").each(function(a,b){$(b).attr("id")==c&&($(b).addClass("active"),$(b).siblings().removeClass("active"))})},searchNext:function(){return this.getNext()||
this.getPrev()},getPrev:function(){var c=0,b=$(".j_tags li");b.each(function(a){$(this).hasClass("active")&&(c=a)});return 0==c?null:$(b[c-1])},getNext:function(){var c=0,b=$(".j_tags li");b.each(function(a){$(this).hasClass("active")&&(c=a)});return c==b.length-1?null:$(b[c+1])},remove:function(){$(this.el).off(".TagList")}});m.exports=h});
define("teams/tag/tagview",["teams/utils","teams/component/tagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/tagmodel");h=Backbone.View.extend({el:"#right-pane",type:"mine",initialize:function(c){$(this.el).html(f.template("search.tagview",{admin:TEAMS.currentUser.admin}));this.model=new e({targetId:"",module:""});f.layout("#tags-mine")},render:function(){var c=this,b=this.model;TEAMS.currentUser.admin?(f.layout("#ctags-mine"),b.loadTags(!0,null,function(a){$("#tags-mine").find(".loading_large").removeClass("hide");
$("#tags-mine").data("pNo",1);c.renderTag(a.page,!0,1)}),b.loadTags(!1,null,function(a){$("#ctags-mine").find(".loading_large").removeClass("hide");$("#ctags-mine").data("pNo",1);c.renderTag(a.page,!1,1)})):b.loadTags(!0,null,function(a){$("#tags-mine").find(".loading_large").removeClass("hide");$("#tags-mine").data("pNo",1).removeClass("j_tagH");c.renderTag(a.page,!0,1)})},renderTag:function(c,b,a){var d=$(this.el);1==a&&(b?$("#tags-mine-list").empty():$("#ctags-mine-list").empty(),c&&c.result&&
0==c.result.length&&(b?$("#tags-mine").find(".no-result").removeClass("hide"):$("#ctags-mine").find(".no-result").removeClass("hide")));for(a=0;a<c.result.length;a++){var e=c.result[a],f=$("#tag-mine-colon").clone();f.find("a").html(e.name);f.find("a").attr({href:"#",name:e.name,privacy:e.privacy});f.attr("title","\u88ab\u5f15\u7528\u6b21\u6570:"+e.quoteNum);f.removeClass("hide");f.attr("id",e.id);f.append("\x3ci\x3e"+e.quoteNum+"\x3c/i\x3e");b?$("#tags-mine-list").append(f):$("#ctags-mine-list").append(f);
29==a&&(b?$("#tags-mine").data("createTime",e.createTime):$("#ctags-mine").data("createTime",e.createTime))}30==c.result.length?(c=d.find("#tmore").clone(),b?d.find("#tag-more").remove():d.find("#ctag-more").remove(),b?d.find("#tags-mine-list").append(c.attr({id:"tag-more",privacy:1}).removeClass("hide")):d.find("#ctags-mine-list").append(c.attr({id:"ctag-more",privacy:0}).removeClass("hide")),this.moreTagEvents(c)):b?d.find("#tag-more").remove():d.find("#ctag-more").remove();b?$("#tags-mine").find(".loading_large").addClass("hide"):
$("#ctags-mine").find(".loading_large").addClass("hide")},moreTagEvents:function(c){var b=this;c.on("click",function(){1==$(this).attr("privacy")?b.renderMore(!0):b.renderMore(!1)})},delegateEvents:function(){var c=this,b=this.model;$(this.el);$("#tags-mine-list").off("click",".close").on("click",".close",function(){c.delTag($(this))});$("#ctags-mine-list").off("click",".close").on("click",".close",function(){c.delTag($(this))});$("#right-pane").off("click",".j_edit").on("click",".j_edit",function(){var a=
$(this),b=a.parent();b.find(".close").remove();b.append("\x3cinput type\x3d'text' id\x3d'tname' class\x3d'form-control' value\x3d'"+a.html()+"'\x3e");b.find("#tname").focus()});$("#right-pane").off("focusout","#tname").on("focusout","#tname",function(){var a=$(this),c=a.parent(),e=c.find(".j_edit"),h=$(this).val(),n=e.attr("name"),k=c.attr("id"),c=e.attr("privacy");""==a.val().trim()||a.val()==n?a.remove():b.update(k,h,c,function(b){b.message?(a.remove(),f.notify("\u66f4\u6539\u5931\u8d25\uff0c\u8be5\u8be5\u6807\u7b7e\u5df2\u5b58\u5728!")):
(e.attr("name",h),e.html(h),a.remove(),$("#tag-list").find("#"+k).find(".title").text(h),f.notify("\u66f4\u6539\u6210\u529f"))})})},delTag:function(c){var b=this.model,a=$(this.el),d=c.parent().attr("id");f.confirm("\u786e\u8ba4\u5220\u9664\u8be5\u6807\u7b7e\uff1f",function(c){c&&b.deleteTag(d,function(b){a.find("#"+d).remove();$("#tag-list").find("#"+d).remove();f.notify("\u5220\u9664\u6210\u529f")})})},renderMore:function(c){var b=this,a=this.model,d=c?$("#tags-mine").data("createTime"):$("#ctags-mine").data("createTime");
d&&(d=Date.create(d),d=d.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));if(c){var e=parseInt($("#tags-mine").data("pNO"))+1;$("#tags-mine").data("pNO",e);a.loadTags(!0,d,function(a){$("#tags-mine").find(".loading_large").removeClass("hide");b.renderTag(a.page,!0,e)})}else e=parseInt($("#ctags-mine").data("pNO"))+1,$("#ctags-mine").data("pNO",e),a.loadTags(!1,d,function(a){$("#ctags-mine").find(".loading_large").removeClass("hide");b.renderTag(a.page,!1,e)})},remove:function(){$(this.el).off(".tag-hot");
this.model=null}});m.exports=h});
define("teams/tag/tagpage",["teams/core/page","teams/tag/taglistview","teams/tag/tagrightview","teams/utils"],function(h,q,m){q=h("teams/core/page");var f=h("teams/tag/taglistview"),e=h("teams/tag/tagrightview"),c=h("teams/utils");h=q.extend({initialize:function(b){this.id=b.id;this.type=b.type;this.template="tag.tagpage";this.pageKey="tag"},delegateEvents:function(){this.on("remove",function(b){this.subView.removeTarget({id:b})});this.on("changeStatus",function(b){this.subView.changeStatus(b.id,b.status)});
this.on("changeWatch",function(b){this.subView.changeWatch(b.id,b.watched)});this.on("changeTitle",function(b){this.subView.changeTitle(b.id,b.title)});this.on("changeDuedate",function(b){this.subView.changeDuedate(b)});this.on("changeManager",function(b){this.subView.changeManager(b.manager,b.id)})},render:function(){this.initLayout();this.mainView=new f({type:this.type,id:this.id});this._render();this.renderSubview(!0);c.layout(".main")},renderSubview:function(b){this.subView=new e({type:this.type,
id:this.id});this._renderSubview();this.mainView.updateList(this.id,this.type)}});m.exports=h});
define("teams/tag/tagrightview","teams/utils teams/search/searchmodel teams/mainline/mainlineview teams/tag/tagview teams/component/sharemodel teams/component/watchmodel teams/component/remind teams/component/userselector teams/component/streammodel teams/component/tagmodel".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/search/searchmodel");h("teams/mainline/mainlineview");h("teams/tag/tagview");var c=h("teams/component/sharemodel"),b=h("teams/component/watchmodel"),a=h("teams/component/remind"),
d=h("teams/component/userselector"),g=h("teams/component/streammodel"),l=h("teams/component/tagmodel");h=Backbone.View.extend({initialize:function(a){this.el=".main";this.type=a.type;this.id=a.id;this.flag=a.flag;switch(this.type){case "keywords":this.keywords=a.param;break;case "tag":this.tag=a.param}this.objId=a.objId;this.model=new e;this.watchModel=new b;this.shareModel=new c({entityId:"",module:""});this.streamModel=new g({});this.tagModel=new l({targetId:"",module:""});a.url="/tag/"+this.type+
"/"+this.id;$(this.el).html(f.template("tag.tagright",a));$(this.el).find("."+this.type).removeClass("hide").find("h5").addClass("ellipsis");$(".search-read").remove();"keywords"==this.type&&$("#search-group  #search-keywords").parent().remove();f.layout(".j_center")},delegateEvents:function(){var b=this,c=this.model,e=$(b.el);$("body").off("click.SearchList",".goto-top").on("click.SearchList",".goto-top",function(a){f.gotoTop(".j_center")});e.on("click.SearchList","#search-group .j_search-group",
function(a){b.model.pageNo=1;a=$(this).attr("data-module");b._module=a;$("#search-group .active").removeClass("active");$(this).parent().addClass("active");$("#search-group").data("active",a);b.renderSearch(!1)});e.on("keyup.SearchList","#middlePageSearch",function(a){var b=$(this).val();13==a.which&&0<$(this).val().length&&(a.preventDefault(),ROUTER.navigate("/search/keywords/"+$.trim(b),{trigger:!0}));$("#keywords").val($(this).val())});e.on("click.SearchList","#check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&
(a=!0);a?$(".e-list span.checkbox").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).parent("li").removeClass("selected")}):$(".e-list span.checkbox").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).parent("li").addClass("selected")});$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});e.on("click.SearchList",".center-more",function(a){c.pageNo++;
b.renderSearch(!1);$("#check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")});e.on("keyup.SearchList","#search-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&b.renderSearch(!0)});e.on("click.SearchList","span.search .icon-search",function(a){b.renderSearch(!0)});e.on("click.SearchList",".search-watchs",function(a){a=b.findSelectedLi();0<a.length?b.watchModel.watch("{"+a+"}",function(a){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");b.updateFastKey(a.domains,
!0)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.SearchList",".search-watchs-cancle",function(a){a=b.findSelectedLi();0<a.length?b.watchModel.watchDelete("{"+a+"}",function(a){f.notify("\u6279\u91cf\u53d6\u6d88\u5173\u6ce8\u6210\u529f");b.updateFastKey(a.domains,!1)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});$("body").off("click",".search-reminds").on("click",".search-reminds",function(c){var d=b.findSelectedLi();0<d.length?($(this).attr("domains",d),(new a({obj:$(this)})).render(c)):
f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.SearchList",".search-read",function(a){a=b.findSelectedLi();if(0<a.length){var c=$(this);b.streamModel.readAll("{"+a+"}",function(a){f.notify("\u6279\u91cf"+c.html()+"\u6210\u529f")})}else f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("confirmHandler.SearchList",".search-share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";b.shareModel.sids=
b.sids;d=b.findSelectedLiId();b.shareModel.entityIds=d;b.shareModel._module=$("#search-group .active a").attr("data-module");b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});e.on("click.SearchList",".search-share",function(a,c){a.stopPropagation();0<b.findSelectedLi().length?(new d({$target:$(this)})).open():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});e.on("click.SearchList",".shortcut .watch",function(a,
c){a.stopPropagation();var d={},e=$(this);d.module=e.attr("module");d.id=e.attr("targetId");"true"==e.attr("watched")?(d._method="DELETE",b.watchModel.watchOne(d,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");e.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8');e.attr("watched","false")})):(d._method="PUT",b.watchModel.watchOne(d,function(a){f.notify("\u5173\u6ce8\u6210\u529f");e.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');e.attr("watched",
"true")}))});e.on("click.SearchList",".shortcut .finish",function(a,d){a.stopPropagation();if($(this).attr("targetId")&&$(this).attr("status")){var e=$(this),g="finished"==e.attr("status")?"todo":"finished",h=e.attr("targetId");c.updateStatus(g,h,function(a){a.actionMsg&&a.actionMsg.message?f.notify(a.actionMsg.message):(f.notify("\u72b6\u6001\u4fee\u6539\u6210\u529f"),b.renderStatus(e.parents("li"),g,!0))})}else f.notify("\u6ca1\u6709\u5b8c\u6210\u6743\u9650")});e.off("confirmHandler",".shortcut .share").on("confirmHandler",
".shortcut .share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";d=$(this).attr("targetId");b.shareModel.sids=b.sids;b.shareModel.entityIds=d;b.shareModel._module=$(this).attr("module");b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});e.on("click.SearchList",".shortcut .share",function(a,b){a.stopPropagation();$(this).hasClass("selector-toggle")?
(new d({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});e.on("click.SearchList",".shortcut .link",function(a,b){a.stopPropagation()})},findSelectedLiId:function(){var a="";$(".e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},findSelectedLi:function(){var a="";$(".e-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+='{"id":"'+$(this).parent("li").attr("id")+
'","name":"'+$(this).parent("li").attr("title")+'","module":"'+$(this).attr("module")+'"},')});0<a.length&&(a='"domains":['+a+"]",a=a.replace(",]","]"));return a},updateFastKey:function(a,b){if(b)for(var c=0;c<a.length;c++){var d=$(".e-list #"+a[c].id);d.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8');d.find(".watch").attr("watched","true")}else for(c=0;c<a.length;c++)d=$(".e-list #"+a[c].id),d.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),
d.find(".watch").attr("watched","false")},render:function(){var a=this.model;this.tagModel.show(this.id,function(a){a.tag&&$("#tagname").text(a.tag.name)});var b=$(".tag-cate").find(".active").attr("type");"privacy"==b&&$("#person-label").removeClass("hide");"common"==b&&$("#common-label").removeClass("hide");"all"==b&&$("#all-label").removeClass("hide");a.pageNo=1;this.renderSearch(!0);this.keywords&&$("#keywords").val(this.keywords);$("body").removeClass("batch-open")},renderSearch:function(a){var b=
this;"production"==b._module?$(b.el).find(".search-share").addClass("hide"):$(b.el).find(".search-share").removeClass("hide");var c=$(b.el);1==b.model.pageNo&&$(".e-list").empty();$("#mytask-loading").removeClass("hide");var d={};d.loadCount=a;0<$("#no-finished").size()&&$("#no-finished").hasClass("icon-checkbox-checked")&&("task"==m?d["filter.type"]="finished":"workflow"==m&&(d["filter.type"]="finished"));d.module=b._module;$(".e-list .no-data, .center-more").addClass("hide");$("#resultlist-loading").removeClass("hide");
b.model.searchBy.tag(d,function(d){b._module=d.module;b.setHeader(d.tag);a&&b.renderCount(d.count);var e=d.page.result;$("#mytask-loading").addClass("hide");0==e.length?c.find(".no-data").removeClass("hide"):(c.find(".e-list").removeClass("hide"),c.find(".no-data").addClass("hide"));for(var f=0,g=e.length;f<g;f++)b.renderOne(e[f]);d.page.hasNext?c.find(".center-more").removeClass("hide"):c.find(".center-more").addClass("hide");d.tag&&($(".center-title .tag").find("a").html(d.tag.name),$(".center-title .tag").find("a").attr("title",
d.tag.name));$("#resultlist-loading").addClass("hide");b.highLight(b.objId);b.keywords&&(0<=b.keywords.indexOf("+")?$(b.el).find(".title").highlight(b.keywords.replace(/[/+]/g," ")):$(b.el).find(".title").highlight(b.keywords))},b.id)},renderOne:function(a){var b=a.module,c="";switch(b){case "task":c="\u4efb\u52a1";break;case "document":c="\u6587\u6863";break;case "customer":c="\u5ba2\u6237";break;case "workflow":c="\u5ba1\u6279";break;case "mainline":c="\u9879\u76ee";break;case "tag":c="\u6807\u7b7e";
break;case "saleChance":c="\u5546\u673a";break;case "production":c="\u4ea7\u54c1";break;case "all":c="\u5168\u90e8"}var d=$("#result-clone").clone(),e=a.creator;if("tag"==b){router="/search/tag/"+a.id;d.attr({id:a.id});var f=d.find(".type");a.privacy?f.html("[\u6211\u7684\u6807\u7b7e]"):f.html("[\u516c\u5171\u6807\u7b7e]");d.find(".watch").addClass("hide");d.find(".share").addClass("hide");d.removeClass("j_entityslider-toggle")}else d.attr({id:a.id}),d.attr({"data-id":a.id,"data-module":a.module});
a.watched?(d.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),d.find(".watch").attr("watched","true")):d.find(".watch").attr("watched","false");d.find(".watch").attr("targetId",a.id);d.find(".watch").attr("module",b);a.name&&("\u9879\u76ee"==c&&"close"==a.status&&d.find(".title .text").addClass("finished-line"),d.find(".title").attr({"data-module":b,"data-id":a.id}),d.find(".text").attr({title:a.name}).html(this.filterHtmlTag(a.name)));"task"==a.module?(d.find(".finish").removeClass("hide"),
c=a.finished?"finished":"todo","newfinish"==this.type?this.renderStatus(d,c):this.renderStatus(d,c,!0)):"mainline"==a.module?(d.find(".link").removeClass("hide"),d.find(".link").attr("href","/mainline/link/"+a.id)):"tag"==a.module&&(d.find(".link").removeClass("hide"),d.find(".link").attr("href",router));1!=a.permission&&(d.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi","true").attr("module",b).attr("targetId",a.id),d.find(".finish").attr("targetId",a.id));
"task"==a.module?d.find(".date").html(a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):""):d.find(".date").html(a.createTime?Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"):"");"production"==a.module&&d.find(".share").addClass("hide");e&&e.name!=TEAMS.currentUser.username&&d.find(".user").html(e.name);a=$(this.el).find(".e-list");e=a.find("li").length;e++;d.find(".sn").html(e);d.find(".checkbox").attr("module",b);a.append(d)},filterHtmlTag:function(a){return a.replace(/</g,"\x26lt").replace(/>/g,
"\x26gt").replace(/\r\n|\n/g," ")},renderCount:function(a){var b=!0;$("#search-group").data("active")||($("#search-group").data("active",this._module),$("#search-group ."+this._module).addClass("active"));0==a.allCount?($("#search-group .document i").html(0),$("#search-group .customer i").html(0),$("#search-group .saleChance i").html(0),$("#search-group .production i").html(0),$("#search-group .mainline i").html(0),$("#search-group .task i").html(0),$("#search-group .workflow i").html(0),$("#search-group .tag i").html(0),
this.activeTab("task")):(0<a.task?($("#search-group .task i").html(a.task),$("#search-group .task").parent().removeClass("hide"),b&&(this.activeTab("task"),b=!1)):$("#search-group .task i").html(0),0<a.document?($("#search-group .document i").html(a.document),$("#search-group .document").parent().removeClass("hide"),b&&(this.activeTab("document"),b=!1)):$("#search-group .document i").html(0),0<a.customer?($("#search-group .customer i").html(a.customer),$("#search-group .customer").parent().removeClass("hide"),
b&&(this.activeTab("customer"),b=!1)):$("#search-group .customer i").html(0),0<a.saleChance?($("#search-group .saleChance i").html(a.saleChance),$("#search-group .saleChance").parent().removeClass("hide"),b&&(this.activeTab("saleChance"),b=!1)):$("#search-group .saleChance i").html(0),0<a.production?($("#search-group .production i").html(a.production),$("#search-group .production").parent().removeClass("hide"),b&&(this.activeTab("production"),b=!1)):$("#search-group .production i").html(0),0<a.workflow?
($("#search-group .workflow i").html(a.workflow),$("#search-group .workflow").parent().removeClass("hide"),b&&(this.activeTab("workflow"),b=!1)):$("#search-group .workflow i").html(0),0<a.mainline?($("#search-group .mainline i").html(a.mainline),$("#search-group .mainline").css("display","block"),b&&this.activeTab("mainline")):$("#search-group .mainline i").html(0),0<a.tag?($("#search-group .tag i").html(a.tag),$("#search-group .tag").css("display","block")):$("#search-group .tag i").html(0))},activeTab:function(a){$("#search-group .active").removeClass("active");
$("#search-group a."+a).parent().addClass("active")},renderModule:function(a){this.model.pageNo=1;a&&a!=this._module&&(this._module=a,$("#search-group").data("active",a),$("#search-group .active").removeClass("active"),$("#search-group ."+a).addClass("active"),this.renderSearch(!1))},beforeOpenTarget:function(a){this.highLight(a)},removeTarget:function(a){$("#"+a.id).remove();a=$("#search-group a.active i").text();a--;$("#search-group a.active i").html(a);this.rebuildSN()},changeTitle:function(a,
b){$("#"+a).find(".title").html(this.filterHtmlTag(b)).attr("title",b)},changeStatus:function(a,b){var c=$(".e-list #"+a);this.renderStatus(c,b,!0)},renderStatus:function(a,b,c){"finished"==b||"close"==b?(a.find(".finish").html('\x3ci class\x3d"icon-finished"\x3e\x3c/i\x3e\u6807\u8bb0\u672a\u5b8c\u6210'),a.find(".finish").attr({status:"finished",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u5df2\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u672a\u5b8c\u6210"}),c&&a.find(".title").addClass("finished-line")):
(a.find(".finish").html('\x3ci class\x3d"icon-todo"\x3e\x3c/i\x3e\u6807\u8bb0\u5b8c\u6210'),a.find(".finish").attr({status:"todo",title:"\u5f53\u524d\u72b6\u6001\u4e3a\u672a\u5b8c\u6210\uff0c\u70b9\u51fb\u8bbe\u7f6e\u4e3a\u5b8c\u6210"}),c&&a.find(".title").removeClass("finished-line"))},changeDuedate:function(a){var b=$(".e-list #"+a.id);a=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(a)},changeWatch:function(a,b){var c=$(".e-list #"+a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e \u53d6\u6d88\u5173\u6ce8'),
c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e \u5173\u6ce8'),c.find(".watch").attr("watched","false"))},changeManager:function(a,b){a&&(a.username!=TEAMS.currentUser.username?$(".e-list #"+b+" .user").html(a.username):$(".e-list #"+b+" .user").html(""))},changeDuedate:function(a){var b=$(".e-list #"+a.id);a=a.dueDate?Date.create(a.dueDate).format("{yyyy}-{MM}-{dd}"):"";b.find(".date").html(a)},highLight:function(a){if(a){$(".e-list li.active").removeClass("active");
$(".e-list #"+a).addClass("active");var b=$(".e-list #"+a).find(".title").html();$(".e-list #"+a).find(".title").html("").focus().html(b)}},rebuildSN:function(){for(var a=$(".e-list").children(),b=0;b<a.length;b++)$(a[b]).find(".sn").html(b+1)},getNext:function(){var a=0,b=$(".e-list li.result-li");b.each(function(b){$(this).hasClass("active")&&(a=b)});if(1!=b.length)return b.length==a+1?$(b[a-1]):$(b[a+1])},getPrev:function(){var a=0,b=$(".e-list li.result-li");b.each(function(b){$(this).hasClass("active")&&
(a=b)});return $(b[a]).prev()},setHeader:function(a){a&&(a=a.name||a,$(this.el).find("."+this.type+" h5 input").attr("value",a))},remove:function(){this.undelegateEvents();$(this.el).off(".SearchList");$("form.form-search").find("#keywords").val("")}});m.exports=h});
define("teams/tag/tagrecentview",["teams/utils","teams/component/tagmodel"],function(h,q,m){h("teams/utils");var f=h("teams/component/tagmodel");h=Backbone.View.extend({el:"#taglist",initialize:function(e){this.model=new f({targetId:"",module:""})},render:function(){var e=this;this.model.loadRecentTag(function(c){e.renderTag(c)})},renderTag:function(e){var c=$(this.el);c.empty();if(0==e.length)c.append("\u76ee\u524d\u5c1a\u65e0\u6807\u7b7e\uff0c\u60a8\u53ef\u4ee5\u5728\u5404\u6a21\u5757\u4e2d\u6dfb\u52a0\u6807\u7b7e");
else{var b=$('\x3ca class\x3d"router"\x3e\x3c/a\x3e');$(e).each(function(a,d){var e=b.clone(),f=d.privacy?"\u6211\u7684\u6807\u7b7e":"\u516c\u5171\u6807\u7b7e",h="/tag/"+(d.privacy?"privacy":"common")+"/"+d.id;e.addClass(d.privacy?"tag-item tag-item-mine":"tag-item");e.text(d.name);e.attr({href:h,title:f+":"+d.name});c.append(e)})}},remove:function(){this.model=null}});m.exports=h});
define("teams/face/emojiarea",["teams/utils"],function(h,q,m){return function(f){(function(e,c,b){var a=h("teams/utils"),d={":smile:":"smile.png",":smirk:":"smirk.png",":sweat_smile:":"sweat_smile.png",":laughing:":"laughing.png",":angry:":"angry.png",":anguished:":"anguished.png",":astonished:":"astonished.png",":blush:":"blush.png",":cold_sweat:":"cold_sweat.png",":confounded:":"confounded.png",":confused:":"confused.png",":cry:":"cry.png",":relaxed:":"relaxed.png",":satisfied:":"satisfied.png",
":scream:":"scream.png",":disappointed:":"disappointed.png",":dizzy_face:":"dizzy_face.png",":expressionless:":"expressionless.png",":fearful:":"fearful.png",":flushed:":"flushed.png",":wink:":"wink.png",":grin:":"grin.png",":grinning:":"grinning.png",":triumph:":"triumph.png",":unamused:":"unamused.png",":sleepy:":"sleepy.png",":heart_eyes:":"heart_eyes.png",":heart:":"heart.png",":hushed:":"hushed.png",":innocent:":"innocent.png",":joy:":"joy.png",":kiss:":"kiss.png",":kissing_heart:":"kissing_heart.png",
":sweat:":"sweat.png",":mask:":"mask.png",":moon:":"moon.png",":pensive:":"pensive.png",":persevere:":"persevere.png",":birthday:":"birthday.png",":sob:":"sob.png",":sleeping:":"sleeping.png",":weary:":"weary.png",":sunglasses:":"sunglasses.png",":sunny:":"sunny.png",":thumbsup:":"thumbsup.png",":thumbsdown:":"thumbsdown.png",":v:":"v.png",":dog:":"dog.png",":watermelon:":"watermelon.png",":strawberry:":"strawberry.png",":rage:":"rage.png",":relieved:":"relieved.png",":worried:":"worried.png",":yum:":"yum.png",
":smiling_imp:":"smiling_imp.png",":imp:":"imp.png",":zap:":"zap.png",":zzz:":"zzz.png",":punch:":"punch.png",":girl:":"girl.png",":rocket:":"rocket.png",":man:":"man.png",":woman:":"woman.png",":rice:":"rice.png",":ring:":"ring.png",":pig:":"pig.png",":soccer:":"soccer.png",":hand:":"hand.png",":bomb:":"bomb.png",":books:":"books.png",":boy:":"boy.png",":bug:":"bug.png",":bulb:":"bulb.png",":cat:":"cat.png",":cherries:":"cherries.png",":chicken:":"chicken.png",":clap:":"clap.png",":cloud:":"cloud.png",
":coffee:":"coffee.png",":cow:":"cow.png",":watch:":"watch.png",":eyeglasses:":"eyeglasses.png",":eyes:":"eyes.png",":facepunch:":"facepunch.png",":fire:":"fire.png",":four_leaf_clover:":"four_leaf_clover.png",":gem:":"gem.png",":ghost:":"ghost.png",":gift:":"gift.png",":key:":"key.png",":baby:":"baby.png",":basketball:":"basketball.png",":bear:":"bear.png",":koala:":"koala.png",":beer:":"beer.png",":beetle:":"beetle.png",":tada:":"tada.png",":tiger:":"tiger.png",":train:":"train.png",":mouse:":"mouse.png",
":muscle:":"muscle.png",":ok_hand:":"ok_hand.png",":pear:":"pear.png",":skull:":"skull.png",":pill:":"pill.png",":poop:":"poop.png",":pray:":"pray.png",":snake:":"snake.png",":snowman:":"snowman.png",":alien:":"alien.png"};e.emojiarea={path:"",icons:{},defaults:{button:null,buttonLabel:'\x3ci class\x3d"icon-smiley"\x3e\x3c/i\x3e',buttonPosition:"after",emojiHeight:0,emojiLeft:0,buttonClass:null,buttonParent:null,buttonRoot:null,buttonChild:null}};e.fn.emojiarea=function(a){a=e.extend({},e.emojiarea.defaults,
a);return this.each(function(){var b=e(this);new k(b,a)})};var f={};f.restoreSelection=function(){if(c.getSelection)return function(a){var b=c.getSelection();b.removeAllRanges();for(var d=0,e=a.length;d<e;++d)b.addRange(a[d])};if(b.selection&&b.selection.createRange)return function(a){a&&a.select()}}();f.saveSelection=function(){if(c.getSelection)return function(){var a=c.getSelection(),b=[];if(a.rangeCount)for(var d=0,e=a.rangeCount;d<e;++d)b.push(a.getRangeAt(d));return b};if(b.selection&&b.selection.createRange)return function(){var a=
b.selection;return"none"!==a.type.toLowerCase()?a.createRange():null}}();f.replaceSelection=function(){if(c.getSelection)return function(a){var d,e=c.getSelection(),f="string"===typeof a?b.createTextNode(a):a;e.getRangeAt&&e.rangeCount&&(d=e.getRangeAt(0),d.deleteContents(),d.insertNode(b.createTextNode(" ")),d.insertNode(f),d.setStart(f,0),c.setTimeout(function(){d=b.createRange();d.setStartAfter(f);d.collapse(!0);e.removeAllRanges();e.addRange(d)},0))};if(b.selection&&b.selection.createRange)return function(a){var c=
b.selection.createRange();"string"===typeof a?c.text=a:c.pasteHTML(a.outerHTML)}}();f.insertAtCursor=function(a,c){a=" "+a;var d=c.value,e;"undefined"!=typeof c.selectionStart&&"undefined"!=typeof c.selectionEnd?(e=c.selectionStart,c.value=d.substring(0,e)+a+d.substring(c.selectionEnd),c.selectionStart=c.selectionEnd=e+a.length):"undefined"!=typeof b.selection&&"undefined"!=typeof b.selection.createRange&&(c.focus(),d=b.selection.createRange(),d.text=a,d.select())};f.extend=function(a,b){"undefined"!==
typeof a&&a||(a={});if("object"===typeof b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};f.escapeRegex=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};f.htmlEntities=function(a){return String(a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;")};e.extend({faceConvert:function(a){for(var b in d)d.hasOwnProperty(b)&&(a=a.replace(new RegExp(f.escapeRegex(b),"g"),l.createIcon(b)));return a}});var l=function(){};l.prototype.setup=
function(){var a=this;this.$editor.on("focus",function(){a.hasFocus=!0});this.$editor.on("blur",function(){a.hasFocus=!1});this.setupButton()};l.prototype.setupButton=function(){var a=this,b;if(this.options.button)b=e(this.options.button);else if(!1!==this.options.button)if(b=e('\x3ca href\x3d"javascript:void(0)" data-original-title\x3d"\u70b9\u51fb\u6dfb\u52a0\u8868\u60c5" title\x3d"" data-toggle\x3d"tooltip" data-placement\x3d"top"\x3e'),b.html(this.options.buttonLabel),null!==this.options.buttonClass?
b.addClass(this.options.buttonClass):b.addClass("emoji-button"),b.attr({title:"\u70b9\u51fb\u6dfb\u52a0\u8868\u60c5"}),null!==this.options.buttonRoot&&null!==this.options.buttonChild){var c="."+this.options.buttonClass;e(this.options.buttonRoot).find(this.options.buttonChild).each(function(){if(0<e(this).find(c).length)return!0;e(this).prepend(b);return!1})}else if(null!==this.options.buttonParent)e(this.options.buttonParent).prepend(b);else this.$editor[this.options.buttonPosition](b);else b=e("");
b.on("click",function(b){0!=e(".emoji-menu").length?e(".emoji-menu").hide():((new n(a)).reposition(),b.stopPropagation())});this.$button=b};l.createIcon=function(a){var b=d[a],c="images/face/emojipng";c.length&&"/"!==c.charAt(c.length-1)&&(c+="/");return'\x3cimg src\x3d"'+c+b+'" alt\x3d"'+f.htmlEntities(a)+'" class\x3d"emoji-png"\x3e'};var n=function(d){var f=this,g=e(b.body),h=e(c);this.visible=!1;this.emojiarea=d;this.$menu=e("\x3cdiv\x3e");null!==d.options.buttonClass?this.$menu.addClass("emoji-menu filterSlip_js "+
d.options.buttonClass):this.$menu.addClass("emoji-menu filterSlip_js");this.$items=e("\x3ctbody\x3e").appendTo(this.$menu);this.$items.wrap('\x3cdiv class\x3d"j_emojiMenuScr" auto-scroll\x3d"yes"\x3e\x3c/div\x3e');this.$menu.wrap('\x3cdiv class\x3d"emoji-menudiv"\x3e\x3c/div\x3e');g.append(this.$menu);a.layout("body .emoji-menu .j_emojiMenuScr",[{gotoTopButton:!1}]);g.mouseover(function(a){a=e(a.target);0==a.closest(".emoji-menu").length&&null==a.parents(".emoji-menu").get(0)&&a.mousewheel(function(a,
b,c,d){null!=g.find(".emoji-menu").get(0)&&f.remove()})});g.on("click",function(a){a=e(a.target);0==a.closest(".emoji-menu").length&&null==a.parents(".emoji-menu").get(0)&&f.remove()});h.on("resize",function(){f.visible&&f.reposition()});this.$menu.on("mouseup","a",function(a){a.stopPropagation();return!1});this.$menu.on("click","a",function(a){var b=e(".label",e(this)).text();c.setTimeout(function(){f.onItemSelected.apply(f,[b])},0);a.stopPropagation();return!1});this.load()};n.prototype.remove=
function(){e(".emoji-menu .j_emojiMenuScr").hasClass("mCustomScrollbar")&&a.destroyLayout(".emoji-menu .j_emojiMenuScr");e(".emoji-menu").remove()};n.prototype.onItemSelected=function(a){this.emojiarea.insert(a);e(".emoji-menu").remove()};n.prototype.load=function(){var a=[],b=0,c;for(c in d)0==b&&a.push("\x3ctr\x3e"),d.hasOwnProperty(c)&&(a.push('\x3ctd\x3e\x3ca href\x3d"javascript:void(0)" title\x3d"'+f.htmlEntities(c)+'"\x3e'+l.createIcon(c)+'\x3cspan class\x3d"label"\x3e'+f.htmlEntities(c)+"\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e"),
b+=1),10==b&&(a.push("\x3c/tr\x3e"),b=0);this.$items.html(a.join(""))};n.prototype.reposition=function(){var a=this.emojiarea.$button,b=this.emojiarea.options,c=a.offset();c.top=parseInt(c.top-a.outerHeight())+parseInt(b.emojiHeight)+"px";c.left=parseInt(c.left-a.outerWidth())+parseInt(b.emojiLeft)+"px";this.$menu.css({top:c.top,left:c.left})};n.prototype.hide=function(a){this.emojiarea&&(this.emojiarea.menu=null,this.emojiarea.$button.removeClass("on"),this.emojiarea=null);this.visible=!1;this.$menu.hide()};
var k=function(a,b){this.options=b;this.$editor=this.$textarea=a;this.setup()};k.prototype.insert=function(a){d.hasOwnProperty(a)&&(f.insertAtCursor(a,this.$textarea[0]),this.$textarea.trigger("change"))};k.prototype.val=function(){return this.$textarea.val()};f.extend(k.prototype,l.prototype)})(jQuery,window,document)}});
define("teams/models/flowreportmodel",function(h,q,m){h=Backbone.Model.extend({load:function(f,e,c,b){$.ajax({type:"get",url:"/workflows/flowReport.json?a\x3d"+1E3*Math.random(),dataType:"json",data:{userId:f,from:Date.create(e).reset("date").format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),to:Date.create(e).endOfMonth().format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),state:c},success:function(a){b&&b(a)}})},flows:function(f,e,c,b,a){$.ajax({type:"get",url:"/workflows/findByCreatorTime.json",dataType:"json",data:{userId:f,
formInfoId:e,from:Date.create(c).reset("date").format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),to:Date.create(c).endOfMonth().format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"),state:b},success:function(b){a&&a(b)}})}});m.exports=h});
define("teams/models/custmenumodel",function(h,q,m){var f={1:'\x3cli\x3e\x3ca class\x3d"router j_modnav-task" href\x3d"/tasks" data-url\x3d"/tasks"\x3e\x3ci class\x3d"graph graph-task"\x3e\x3c/i\x3e\x3cspan\x3e\u4efb\u52a1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',2:'\x3cli\x3e\x3ca class\x3d"router j_modnav-workflow" href\x3d"/workflows" data-url\x3d"/workflows"\x3e\x3ci class\x3d"graph graph-flow"\x3e\x3c/i\x3e\x3cspan\x3e\u5ba1\u6279\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',3:'\x3cli\x3e\x3ca class\x3d"router j_modnav-mainline" href\x3d"/mainlines" data-url\x3d"/mainlines"\x3e\x3ci class\x3d"graph graph-goal"\x3e\x3c/i\x3e\x3cspan\x3e\u9879\u76ee\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',
4:'\x3cli\x3e\x3ca class\x3d"router j_modnav-document" href\x3d"/documents" data-url\x3d"/documents"\x3e\x3ci class\x3d"graph graph-doc"\x3e\x3c/i\x3e\x3cspan\x3e\u6587\u6863\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',5:'\x3cli\x3e\x3ca class\x3d"router j_modnav-customers" href\x3d"/crms/customer" data-url\x3d"/crms/customer"\x3e\x3ci class\x3d"graph graph-crm"\x3e\x3c/i\x3e\x3cspan\x3e\u5ba2\u6237\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',6:'\x3cli\x3e\x3ca class\x3d"router j_modnav-blog" href\x3d"/blog" data-url\x3d"/blog"\x3e\x3ci class\x3d"graph graph-blog"\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u62a5\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',
7:'\x3cli\x3e\x3ca class\x3d"router j_modnav-calendar" href\x3d"/calendar" data-url\x3d"/calendar"\x3e\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\x3cspan\x3e\u65e5\u7a0b\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',8:'\x3cli\x3e\x3ca class\x3d"router j_modnav-workreport" href\x3d"/workreport" data-url\x3d"/workreport"\x3e\x3ci class\x3d"graph graph-report"\x3e\x3c/i\x3e\x3cspan\x3e\u62a5\u544a\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',9:'\x3cli\x3e\x3ca class\x3d"router j_modnav-report" href\x3d"/report/taskstatistics" data-url\x3d"/report/taskstatistics"\x3e\x3ci class\x3d"graph graph-stat"\x3e\x3c/i\x3e\x3cspan\x3e\u7edf\u8ba1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',
10:'\x3cli\x3e\x3ca class\x3d"router j_modnav-wechat" href\x3d"/info/wechat" data-url\x3d"/info/wechat"\x3e\x3ci class\x3d"graph graph-enterprise"\x3e\x3c/i\x3e\x3cspan\x3e\u4f01\u4e1a\u53f7\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',11:'\x3cli\x3e\x3ca class\x3d"router j_modnav-form" href\x3d"/forms" data-url\x3d"/forms"\x3e\x3ci class\x3d"graph graph-formstat"\x3e\x3c/i\x3e\x3cspan\x3e\u8868\u5355\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',12:'\x3cli\x3e\x3ca class\x3d"router j_modnav-contacts" href\x3d"/crms/contact" data-url\x3d"/crms/contact"\x3e\x3ci class\x3d"graph graph-contact"\x3e\x3c/i\x3e\x3cspan\x3e\u8054\u7cfb\u4eba\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',
13:'\x3cli\x3e\x3ca class\x3d"router j_modnav-wechatservice" href\x3d"/info/wechatservice" data-url\x3d"/info/wechatservice"\x3e\x3ci class\x3d"graph graph-wechatservice"\x3e\x3c/i\x3e\x3cspan\x3e\u670d\u52a1\u53f7\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',14:'\x3cli\x3e\x3ca class\x3d"router j_modnav-saleChances" href\x3d"/crms/saleChance" data-url\x3d"/crms/saleChance"\x3e\x3ci class\x3d"graph graph-salechance"\x3e\x3c/i\x3e\x3cspan\x3e\u5546\u673a\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e',15:'\x3cli\x3e\x3ca class\x3d"router j_modnav-production" href\x3d"/crms/production" data-url\x3d"/crms/production"\x3e\x3ci class\x3d"graph graph-production"\x3e\x3c/i\x3e\x3cspan\x3e\u4ea7\u54c1\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e'};
h=Backbone.Model.extend({initialize:function(){},loadEmpAllMenus:function(e){var c=this;$.ajax({type:"get",url:"/base/employee/queryEmpMenus.json",cache:!1,dataType:"json",success:function(b){e&&e.call(c,b.empmenus)}})},updateMenuStatus:function(e,c){var b=this;$.ajax({type:"post",url:"/base/employee/updateEmpCustMenuStatus.json",data:e,dataType:"json",success:function(a){c&&c.call(b,a)}})},updateMenuOrders:function(e,c){var b=this;$.ajax({type:"post",url:"/base/employee/updateEmpCustMenuOrder.json",
data:e,dataType:"json",success:function(a){c&&c.call(b,a)}})},getMenuElTpl:function(e){for(var c=[],b=0,a=e.length;b<a;b++)c.push(f[e[b].id]);return c},resetNavsetting:function(e){$.ajax({type:"post",url:"/base/employee/resetNavsetting.json",dataType:"json",success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/models/logmodel",function(h,q,m){h=Backbone.Model.extend({pageNo:1,pageSize:15,load:function(f,e){$.ajax({type:"get",url:"/logs.json",dataType:"json",data:{type:f,employeeId:TEAMS.currentUser.id},success:function(c){e&&e(c)}})},loadDetail:function(f,e){$.ajax({type:"get",url:"/logs/detail.json",dataType:"json",data:{id:f,pageNo:this.pageNo,pageSize:this.pageSize},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/models/servicenumbermodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.userId=f.userId},save:function(f,e,c){$.ajax({type:"post",url:"/customsetting/setGeneralPush.json",dataType:"json",data:{"configuration.configKey":f,"configuration.configValue":e},success:function(b){c&&c(b)}})},loadPersonalRemindSetting:function(f){$.ajax({type:"post",url:"/customsetting/loadPersonaRemind.json",dataType:"json",data:{},success:function(e){f&&f(e)}})},savePersonalRemindSetting:function(f,
e,c,b,a,d,g,h){$.ajax({type:"post",url:"/customsetting/setPersonalRemind.json",dataType:"json",data:{enabled:e,earlytime:c,timeType:b,create:a,primary:d,participants:g,personalRemindType:h},success:function(a){f&&f(a)}})}});m.exports=h});
define("teams/models/leftmodel",function(h,q,m){h=Backbone.Model.extend({tagPage:{pageNo:1,pageSize:10},mainlinePage:{pageNo:1,pageSize:10},myfollowPage:{pageNo:1,pageSize:10},userPage:{pageNo:1,pageSize:10},subordinatePage:{pageNo:1,pageSize:10},searchUserPage:{pageNo:1,pageSize:10},initialize:function(f){this.userId=TEAMS.currentUser.id},countAllModule:function(f){$.ajax({type:"get",url:"/home/leftCountRefresh.json",dataType:"json",data:{},success:function(e){f&&f(e)}})},loadWatchCount:function(f){$.ajax({type:"get",
url:"/search/watch.json",dataType:"json",data:{loadCount:!0},success:function(e){f&&f(e)}})},loadMyfollow:function(f){var e=this;$.ajax({type:"get",url:"/users/myfollow/"+this.userId+".json",dataType:"json",data:{pageNo:this.myfollowPage.pageNo,pageSize:this.myfollowPage.pageSize,approvedOnly:"true"},success:function(c){e.myfollowPage=c.page;f&&f(c)}})},loadSubordinate:function(f){var e=this;$.ajax({type:"get",url:"/users/subordinate/"+this.userId+".json",dataType:"json",data:{pageNo:e.subordinatePage.pageNo,
pageSize:e.subordinatePage.pageSize},success:function(c){e.subordinatePage=c.page;f&&f(c)}})},loadOrgMembers:function(f){var e=this;$.ajax({type:"get",url:"/users.json",dataType:"json",data:{pageNo:e.userPage.pageNo,pageSize:e.userPage.pageSize},success:function(c){e.userPage=c.page;f&&f(c)}})},searchUserByKeywords:function(f,e){var c=this;f.pageNo=c.searchUserPage.pageNo;f.pageSize=c.searchUserPage.pageSize;$.ajax({type:"get",url:"/users/searchUserByKeywords.json",dataType:"json",data:f,success:function(b){c.searchUserPage=
b.page;e&&e(b)}})},checkin:function(f){$.ajax({url:"/timecard/check.json",type:"post",dataType:"json",data:{type:"CHECKIN"},success:function(e){f&&f(e)}})},checkout:function(f){$.ajax({url:"/timecard/check.json",type:"post",dataType:"json",data:{type:"CHECKOUT"},success:function(e){f&&f(e)}})},checkTime:function(f){$.ajax({url:"js/checkTime.json",type:"post",dataType:"json",data:{type:"CHECKIN"},success:function(e){f&&f(e)}})}});m.exports=h});
define("teams/models/taskcalendarmodel",function(h,q,m){h=Backbone.Model.extend({userId:"",user:null,taskList:null,timeViewMode:"dueDate",initialize:function(f){this.userId=f.userId},load:function(f,e,c){$.ajax({type:"get",url:"/tasks/calendar/"+this.userId+".json",dataType:"json",data:{from:f,to:e,type:this.timeViewMode},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/models/portalsettingmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.userId=f.userId},loadPortalSetting:function(f,e){$.ajax({url:"/profile/portalSetting/"+f+".json",type:"get",dataType:"json",beforeSend:function(){},success:function(c){e&&e(c)}})},updatePortalSetting:function(f,e){$.ajax({url:"/profile/updatePortalSetting.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},loadPortals:function(f,e){$.ajax({url:"/profile/loadPortals/"+
f+".json",type:"get",dataType:"json",beforeSend:function(){},success:function(c){e&&e(c)}})},updatePortalOrders:function(f,e){$.ajax({url:"/profile/updatePortalOrder.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},savePortalOrder:function(f,e){$.ajax({url:"/profile/savePortalOrder.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},resetPortals:function(f,e){$.ajax({url:"/profile/resetPortals.json",type:"post",dataType:"json",data:f,success:function(c){e&&
e(c)}})}});m.exports=h});
define("teams/models/dynamicinfomodel",function(h,q,m){h=Backbone.Model.extend({loadDynamicInfo:function(f){var e=this;$.ajax({type:"get",url:"/home/loadDynamicInfo.json",dataType:"json",success:function(c){e.placard=c.placard;e.messageBoards=c.messageBoards;f&&f()}})},updatePlacard:function(f,e,c){var b=this;$.ajax({type:"post",url:"/home/updatePlacard.json",dataType:"json",data:{"placard.content":f,"placard.id":e},success:function(a){b.placard=a.placard;c&&c(a)}})},createPlacard:function(f,e){var c=
this;$.ajax({type:"post",url:"/home/createPlacard.json",dataType:"json",data:{"placard.content":f},success:function(b){c.placard=b.placard;e&&e(b)}})},placardUnreaders:function(f,e){$.ajax({type:"get",url:"/pla/placard/unreaders.json",dataType:"json",data:{id:f},success:function(c){e&&e(c)}})},placardHistorys:function(f,e){$.ajax({type:"get",url:"/pla/placard/placardHistorys.json",dataType:"json",data:{pageNo:f},success:function(c){e&&e(c)}})},newMessageboard:function(f,e,c){$.ajax({type:"get",dataType:"json",
async:!1,url:"/home/newMessage.json",data:{"messageBoard.content":f,"messageBoard.createDate":Date.create(e).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")},success:function(b){c&&c(b)}})}});m.exports=h});
define("teams/models/profilemodel",function(h,q,m){h=Backbone.Model.extend({parentId:"",sids:"",businessSuperiorId:"",subordinateUserId:"",assistantId:"",openAccessId:"",initialize:function(f){this.userId=f.userId},loadSummary:function(f,e){$.ajax({type:"get",url:"/profile/summary/"+f+".json",dataType:"json",success:function(c){e&&e(c)}})},loadProfile:function(f,e){$.ajax({url:"/base/employee/"+f+".json",type:"get",dataType:"json",beforeSend:function(){},success:function(c){e&&e(c)}})},updateUserRole:function(f,
e,c,b){$.ajax({url:"/base/role/updateUserRole.json",type:"post",dataType:"json",data:{id:f,"role.roleKey":e,type:c},success:function(a){b&&b(a)}})},saveEmployeeProperty:function(f,e){$.ajax({url:"/base/employee/saveProperty.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveOtherSenior:function(f){$.ajax({url:"/base/employee/saveOtherSenior.json",type:"post",dataType:"json",data:{sids:this.sids,subordinateUserId:this.subordinateUserId},success:function(e){f&&f(e)}})},deleteOtherSenior:function(f){$.ajax({url:"/base/employee/deleteOtherSenior.json",
type:"post",dataType:"json",data:{sids:this.sids,subordinateUserId:this.subordinateUserId},success:function(e){f&&f(e)}})},saveEDLink:function(f){$.ajax({url:"/base/employee/saveEDLink.json",type:"post",dataType:"json",data:{parentId:this.parentId,sids:this.sids},success:function(e){f&&f(e)}})},deleteEDLink:function(f){$.ajax({url:"/base/employee/deleteEDLink.json",type:"post",dataType:"json",data:{parentId:this.parentId,sids:this.sids},success:function(e){f&&f(e)}})},saveEPLink:function(f){$.ajax({url:"/base/employee/saveEPLink.json",
type:"post",dataType:"json",data:{parentId:this.parentId,sids:this.sids},success:function(e){f&&f(e)}})},deleteEPLink:function(f){$.ajax({url:"/base/employee/deleteEPLink.json",type:"post",dataType:"json",data:{parentId:this.parentId,sids:this.sids},success:function(e){f&&f(e)}})},saveAssistant:function(f){$.ajax({url:"/base/employee/saveAssistant.json",type:"post",dataType:"json",data:{sids:this.sids,assistantId:this.assistantId},success:function(e){f&&f(e)}})},saveOpenAccess:function(f){$.ajax({url:"/base/employee/saveOpenAccess.json",
type:"post",dataType:"json",data:{sids:this.sids,openAccessId:this.openAccessId},success:function(e){f&&f(e)}})},deleteAssistant:function(f){$.ajax({url:"/base/employee/deleteAssistant.json",type:"post",dataType:"json",data:{sids:this.sids,assistantId:this.assistantId},success:function(e){f&&f(e)}})},deleteOpenAccess:function(f){$.ajax({url:"/base/employee/deleteOpenAccess.json",type:"post",dataType:"json",data:{sids:this.sids,openAccessId:this.openAccessId},success:function(e){f&&f(e)}})},deleteUser:function(f,
e){$.ajax({url:"/base/employee/delete.json",type:"post",dataType:"json",data:{id:f},success:function(c){e&&e(c)}})},changePassword:function(f,e){$.ajax({type:"post",url:"/base/account/changePassword.json",dataType:"json",data:{"employee.id":f.employeeId,oldPassword:f.oldPassword,newPassword:f.newPassword},success:function(c){e&&e(c)}})},resetPassword:function(f,e){$.ajax({type:"post",url:"/base/account/resetPassword.json",dataType:"json",data:{"employee.id":f.employeeId,newPassword:f.newPassword},
success:function(c){e&&e(c)}})},cut:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/profile/cut.json",dataType:"json",data:'{"id":'+this.userId+',"imageArea":{"id":'+f.id+',"x":'+f.x+',"y":'+f.y+',"width":'+f.width+',"height":'+f.height+"}}",success:function(c){e&&e(c)}})},sendCaptcha:function(f,e){$.ajax({type:"post",url:"/base/account/sendCaptcha.json",dataType:"json",data:{"employee.id":f.employeeId,propertyName:f.propertyName,"employee.email":f.email,"employee.mobile":f.mobile},
success:function(c){e&&e(c)}})},detectCaptcha:function(f,e){$.ajax({type:"post",url:"/base/account/detectCaptcha.json",dataType:"json",data:{captcha:f.captcha,"employee.email":f.email,"employee.mobile":f.mobile},success:function(c){e&&e(c)}})},updateBinding:function(f,e){$.ajax({type:"post",url:"/base/account/updateBinding.json",dataType:"json",data:{"employee.id":f.employeeId,propertyName:f.propertyName,"employee.email":f.email,"employee.mobile":f.mobile,captcha:f.captcha},success:function(c){e&&
e(c)}})},accountIsOccupied:function(f,e){$.ajax({type:"post",url:"/base/account/accountIsOccupied.json",dataType:"json",data:{propertyName:f.propertyName,"employee.email":f.email,"employee.mobile":f.mobile},success:function(c){e&&e(c)}})},countAllAdmin:function(f,e){$.ajax({type:"post",url:"/base/employee/countAllAdmin.json",dataType:"json",success:function(c){e&&e(c)}})},resignation:function(f,e){$.ajax({type:"post",url:"/base/account/resignation.json",dataType:"json",data:{"employee.id":f},success:function(c){e&&
e(c)}})},quitCompany:function(f,e){$.ajax({type:"post",url:"/base/account/quitCompany.json",dataType:"json",success:function(c){e&&e(c)}})},quitTransfer:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/profile/quitTransfer.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},rehire:function(f,e){$.ajax({type:"post",url:"/base/account/rehire.json",dataType:"json",data:{"employee.id":f},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/workreport/workreporttypeview",["teams/utils","teams/component/commentview","teams/workreport/workreportmodel","teams/workreport/workreportstatisticsview"],function(h,q,m){var f=h("teams/utils");h("teams/component/commentview");var e=h("teams/workreport/workreportmodel"),c=h("teams/workreport/workreportstatisticsview");h=Backbone.View.extend({initialize:function(b){this.userId=TEAMS.currentUser.id;this.reportType=b.reportType;this.unreadFlag=b.unreadFlag;this.commentView=null;this.model=
new e;this.el="#yearPanel"},delegateEvents:function(){var b=$(this.el),a=this.model,c=this;b.on("click.workreporttype",".j_more",function(a){c.model.page.pageNo++;c.renderReportList()});b.on("click.workreporttype",".j_list",function(a){ROUTER.navigate($(this).attr("url"),{trigger:!0});$(this).removeClass("unread")});b.on("click.workreporttype","#all-read",function(b){f.confirm("\u662f\u5426\u5c06\u672a\u8bfb\u62a5\u544a\u5168\u90e8\u7f6e\u4e3a\u5df2\u8bfb?",function(){a.readAll(function(){$("#unreadCount").html(0);
$(".reports-panel").html("\x3cdiv class\x3d'no-result'\x3e\u6ca1\u6709\u6570\u636e\x3c/div\x3e")})})})},render:function(){var b=this,a=$(this.el);"statistics"!=b.reportType?($("#myReport").addClass("router").attr("href","/workreport/"+TEAMS.currentUser.id).removeClass("myreport-link"),this.renderReportList(),"comment"==b.reportType||b.unreadFlag?(this.unreadFlag?a.find("#commentMe-unread").addClass("active"):a.find("#commentMe").addClass("active"),a.find("#all-read").addClass("hide")):"replay"==b.reportType||
b.unreadFlag?(this.unreadFlag?a.find("#replayMe-unread").addClass("active"):a.find("#replayMe").addClass("active"),a.find("#all-read").addClass("hide")):"share"==b.reportType?(a.find("#share").addClass("active"),a.find("#all-read").addClass("hide")):(a.find("#unread").parent().find("a").addClass("active"),a.find("#all-read").removeClass("hide")),this.model.getUnreadCount(function(c){b.echoUnread(c,a)}),f.layout(".js_reportsnav_scroll")):(this.workreportstatistics=new c,this.workreportstatistics.render(),
this.model.getUnreadCount(function(c){b.echoUnread(c,a)}))},renderReportList:function(){var b=this,a=$(this.el),c=a.find(".j_more").data("commentTime");c&&(c=Date.create(c),c=c.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));b.model.queryWorkReportType(b.reportType,c,b.unreadFlag,function(c){0==c.workReports.length?$(".no-result").removeClass("hide"):($(".no-result").addClass("hide"),10==c.workReports.length?$(".j_more ").removeClass("hide"):$(".j_more").addClass("hide"),$.each(c.workReports,function(c,
d){var e=d.creator.avatar,f=$("#reportClone").clone();f.find(".ellipsis").text(d.title);e&&f.find("img").attr("src","/base/download/"+e.p3);f.find(".time").text(Date.create(d.createTime).format("{yyyy}-{MM}-{dd}"));d.read||"share"!=b.reportType&&f.find("li").addClass("unread");0==c&&1==b.model.page.pageNo&&($(".reports-panel").data("id",d.id),f.find("li").removeClass("unread"));b.unreadFlag&&("comment"==b.reportType&&(b.reportType="unreadComment"),"replay"==b.reportType&&(b.reportType="unreadReplay"));
f.find("li").addClass("j_list").attr("url","/workreport/"+b.reportType+"/"+d.id);9==c&&("unread"==b.reportType?a.find(".j_more").data("commentTime",d.createTime):a.find(".j_more").data("commentTime",d.lastCommentTime));$(".reports-someoneNav").append(f.html())}))})},echoUnread:function(b,a){0<b.unReadCount?(a.find("#unread").parent().removeClass("hide").find("i").html(b.unReadCount),$(".j_unreadCount").text(b.unReadCount),$(".j_unreadCount").addClass("badge")):a.find("#unread").parent().addClass("hide");
0<b.commentMeCount?(a.find("#commentMe-unread").find("span").removeClass("hide").find("i").html(b.commentMeCount),$(".j_commentCount").text(b.commentMeCount),$(".j_commentCount").addClass("badge")):a.find("#commentMe-unread").find("span").addClass("hide");0<b.replayMeCount?(a.find("#replayMe-unread").find("span").removeClass("hide").find("i").html(b.replayMeCount),$(".j_replayCount").text(b.replayMeCount),$(".j_replayCount").addClass("badge")):a.find("#replayMe-unread").find("span").addClass("hide")},
remove:function(){$(this.el).off(".workreporttype")}});m.exports=h});
define("teams/workreport/workreportview",["teams/utils","teams/component/userslider","teams/component/timeline","teams/workreport/workreportmodel"],function(h,q,m){h("teams/utils");var f=h("teams/component/userslider"),e=h("teams/component/timeline"),c=h("teams/workreport/workreportmodel");h=Backbone.View.extend({initialize:function(b){this.userId=b.userId;this.year=b.year;this.type=b.type;this.serialNumber=b.serialNumber;this.model=new c;this.userSliderView=new f({userId:TEAMS.currentUser.id,module:"workreport",
dataType:"subordinate"});this.timelineView=new e({userId:this.userId,year:this.year,type:this.type,serialNumber:this.serialNumber,container:"#reports-left"})},render:function(){1==TEAMS.noSubordinates&&$("#member-layer").last().addClass("hide");this.timelineView.render();this.userSliderView.render();this.getUnreadCount()},getUnreadCount:function(){this.model.getUnreadCount(function(b){0<b.unReadCount&&($(".j_unreadCount").addClass("badge"),$(".j_unreadCount").text(b.unReadCount));0<b.commentMeCount&&
($(".j_commentCount").addClass("badge"),$(".j_commentCount").text(b.commentMeCount));0<b.replayMeCount&&($(".j_replayCount").addClass("badge"),$(".j_replayCount").text(b.replayMeCount))})},update:function(b,a,c,e,f){this.userId=b;this.year=a;this.type=c;this.serialNumber=e;this.editable=f;this.timelineView&&this.timelineView.update(this.userId,this.year,this.type,this.serialNumber,this.editable)},remove:function(){}});m.exports=h});
define("teams/workreport/workreportcontentview","teams/utils teams/component/extendview teams/workreport/workreportmodel teams/component/attachment teams/blog/weeklyblog teams/component/shareallview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/extendview"),c=h("teams/workreport/workreportmodel"),b=h("teams/component/attachment"),a=h("teams/blog/weeklyblog"),d=h("teams/component/shareallview");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.year=
a.year;this.type=a.type;this.serialNumber=a.serialNumber;this.editable=a.editable;this.reportType=a.reportType;this.id=a.id;this.hideBlog=a.hideBlog;this.el=(this.container=a.container)||"#reports-right";this.extendView=null;this.unreadFlag=a.unreadFlag;this.isStat=a.isStat;this.model=new c;this.isDisable()&&(this.editable=!1,this.flag=!0);"#print"==this.container&&$("#print").addClass("fs-m print-report");this.editable?$(this.el).html(f.template("workreport.reportcontent")):this.isStat?$(this.el).html(f.template("workreport.readonlyreportcontentstat")):
$(this.el).html(f.template("workreport.readonlyreportcontent"))},delegateEvents:function(){var a=this,b=$(this.el);b.on("click.workreportcontent","#current",function(b){var c=f.getWeekDate(new Date(TEAMS.nowTime));b=c.year;var d=c.week,c=c.month;$(".reports-selectyear span").text(b);"month"==a.type?(a.trigger("synTimeLine",{year:b,type:"month",num:c}),$(".reports-panel").data("year",b).data("type","month").data("serialNumber",c),ROUTER.navigate("/workreport/"+a.userId+"/"+b+"/month/"+c,{trigger:!0})):
(a.trigger("synTimeLine",{year:b,type:"week",num:d}),$(".reports-panel").data("year",b).data("type","week").data("serialNumber",d),ROUTER.navigate("/workreport/"+a.userId+"/"+b+"/week/"+d,{trigger:!0}))});b.on("click.workreportcontent","#prev",function(b){var c=f.getWeekDate(new Date(TEAMS.nowTime));b=a.year?a.year:c.year;var d=a.serialNumber?a.serialNumber:c.week,c=a.serialNumber?a.serialNumber:c.month;if("month"==a.type){d=c-1;if(1>d){if(2013>b-1){$(this).addClass("disabled");return}b--;d=12;$(".reports-selectyear span").text(b)}a.trigger("synTimeLine",
{year:b,type:"month",num:d});$(".reports-panel").data("year",b).data("type","month").data("serialNumber",d);ROUTER.navigate("/workreport/"+a.userId+"/"+b+"/month/"+d,{trigger:!0})}else{d-=1;if(1>d){if(2013>b-1){$(this).addClass("disabled");return}b--;d=f.getWeeksOfYear(b);$(".reports-selectyear span").text(b)}a.trigger("synTimeLine",{year:b,type:"week",num:d});$(".reports-panel").data("year",b).data("type","week").data("serialNumber",d);ROUTER.navigate("/workreport/"+a.userId+"/"+b+"/week/"+d,{trigger:!0})}});
b.on("click.workreportcontent","#next",function(b){var c=f.getWeekDate(new Date(TEAMS.nowTime));b=a.year?a.year:c.year;var d=a.serialNumber?a.serialNumber:c.week,c=a.serialNumber?a.serialNumber:c.month;"month"==a.type?(c=parseInt(c)+1,d=parseInt(b),12<c&&(d++,c=1,$(".reports-selectyear span").text(d)),a.trigger("synTimeLine",{year:d,type:"month",num:c}),$(".reports-panel").data("year",d).data("type","month").data("serialNumber",c),ROUTER.navigate("/workreport/"+a.userId+"/"+d+"/month/"+c,{trigger:!0})):
(c=parseInt(d)+1,d=parseInt(b),c>f.getWeeksOfYear(b)&&(d++,c=1,$(".reports-selectyear span").text(d)),a.trigger("synTimeLine",{year:d,type:"week",num:c}),$(".reports-panel").data("year",d).data("type","week").data("serialNumber",c),ROUTER.navigate("/workreport/"+a.userId+"/"+d+"/week/"+c,{trigger:!0}))});b.on("FileUploaded.workreportcontent","#report-attachment",function(a,c){var d=b.find("#content");if(!d.val()||d.data("text")==d.val()){var e=(d.data("text")?d.data("text")+",":"\u4e0a\u4f20\u4e86\u9644\u4ef6\uff1a")+
c.name;d.val(e);d.data("text",e)}d.focus()});b.off("click.workreportcontent","#wr-print").on("click.workreportcontent","#wr-print",function(b){window.open("/print/"+a.id+"/workreport")})},delegateEditEvents:function(){var a=this,b=$(this.el);b.on("focusout.workreportcontent","#content,#summary,#plan",function(b){b=$(this);if(b.val()&&b.val()!=$(this).data(b.attr("id"))){var c=$(".reports-body").data("reportId"),d={};c?(d["workReport."+b.attr("id")]=b.val(),d["workReport.id"]=c):(d=a.genParam(c,a.userId,
a.year,a.type,a.serialNumber),d["workReport."+b.attr("id")]=b.val());a.save(d,c);$(this).data(b.attr("id"),b.val())}});b.on("focus.workreportcontent","#content,#summary,#plan",function(a){if(!b.find(".j_loading").hasClass("hide"))return a.preventDefault(),a.stopPropagation(),$this=$(this),setTimeout(function(){$this.trigger("blur")},100),!1})},initComponent:function(a){var c=$(this.el);a.id&&(this.extendView=new e({targetId:a.id,module:"workreport",parentEl:this.el,container:"#extend-panel"}),this.extendView.render(a),
TEAMS.currentUser.id==a.creator.id&&(c.find("#report-share").removeClass("hide"),this.shareView=new d({entityId:a.id,module:"workreport",shareContainer:"#report-share",parentEl:this.el}),this.shareView.render(a.shareEntrys)));this.attachment=new b({targetId:a.id,module:"workreport",container:"#report-attachment",parentEl:this.el,readonly:!this.editable});this.attachment.render(a.attachments||[])},render:function(){var b=this,c=$(b.el);"#print"==b.container?(c.find("#workreportcontent").removeClass("scrollwrapper"),
c.find("#switch").remove()):f.layout("#workreportcontent");c.find(".j_loading").removeClass("hide");var d=b.id;b.editable&&b.delegateEditEvents();if(b.reportType&&!$(".reports-panel").data("id")){d="";switch(b.reportType){case "share":d='\x3cdiv id\x3d"guide-div" style\x3d"margin-top: 70px;" class\x3d"nodata-holder"\x3e\x3cdiv class\x3d"j_holder_shareToMe"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e \x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u5171\u4eab\u7ed9\u60a8\u7684\u62a5\u544a\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e';
break;case "replay":d='\x3cdiv id\x3d"guide-div" style\x3d"margin-top: 70px;" class\x3d"nodata-holder"\x3e\x3cdiv class\x3d"j_holder_shareToMe"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e \x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u56de\u590d\u60a8\u7684\u8bc4\u8bba\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e';break;case "comment":d='\x3cdiv id\x3d"guide-div" style\x3d"margin-top: 70px;" class\x3d"nodata-holder"\x3e\x3cdiv class\x3d"j_holder_shareToMe"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e \x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u8bc4\u8bba\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e';
break;case "unread":d='\x3cdiv id\x3d"guide-div" style\x3d"margin-top: 70px;" class\x3d"nodata-holder"\x3e\x3cdiv class\x3d"j_holder_shareToMe"\x3e\x3ci class\x3d"ico"\x3e\x3c/i\x3e \x3cp class\x3d"large"\x3e\u6682\u65f6\u8fd8\u6ca1\u6709\u672a\u8bfb\u7684\u62a5\u544a\uff01\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'}$(".reports-panel").html(d);$("#unread").parents(".pull-right").addClass("hide");$(".j_mine").siblings().removeClass("hide")}else this.reportType&&!b.id&&(d=$(".reports-panel").data("id")),d=
b.genParam(d,b.userId,b.year,b.type,b.serialNumber),b.model.queryWorkReport(d,function(d){if(d.actionMsg&&d.actionMsg.message)return $(b.el).html(f.template("base.nopermission",{msg:d.actionMsg,module:"workreport",id:b.id})),$(b.el).find(".scrollwrapper").trigger("resizeSroll"),!1;var e=d.workReport,h=d.employee,n=$(".j_mine a");h&&!b.reportType?h.id!=TEAMS.currentUser.id?("female"==h.sex?n.text("\u5979\u7684\u62a5\u544a"):n.text("\u4ed6\u7684\u62a5\u544a"),n.attr("href","/workreport/"+h.id),$(".j_mine").siblings().addClass("hide")):
(n.text("\u6211\u7684\u62a5\u544a"),n.attr("href","/workreport"),$(".j_mine").siblings().removeClass("hide")):(n.text("\u6211\u7684\u62a5\u544a"),n.attr("href","/workreport"),$(".j_mine").siblings().removeClass("hide"));if(e){b.id=e.id;b.userId=e.creator.id;h=e.creator.name?e.creator.name:h.name;0==e.permission&&$("#reports-right").html('\x3cdiv class\x3d"p-10"\x3e\x3cdiv class\x3d"alert alert-warning alert-block  fade in"\x3e\x3ch4 class\x3d"alert-heading"\x3e\u5bf9\u4e0d\u8d77! \x3c/h4\x3e\x3cp\x3e\u60a8\u4e0d\u5177\u6709\u5bf9\u5f53\u524d\u5bf9\u8c61\u7684\u8bbf\u95ee\u6743\u9650\u3002\x3c/p\x3e\x3c/div\x3e\t\t\x3c/div\x3e');
b.renderHeader(e.type,e.year,e.serialNumber,h);b.renderReport(e);if("comment"==b.reportType){var u=0<d.commentMeCount?d.commentMeCount:"";setTimeout(function(){$(".j_commentCount").html(u)},1E3)}"replay"==b.reportType&&(u=0<d.replayMeCount?d.replayMeCount:"",setTimeout(function(){$(".j_replayCount").html(u)},1E3));"unread"==b.reportType&&(u=0<d.unReadCount?d.unReadCount:"",setTimeout(function(){$(".j_unreadCount").html(u)},1E3));"#print"==b.container?(c.find("#wr-export").remove(),c.find("#wr-print").remove(),
"week"==e.type&&(b.weekblog=new a({container:"#week-blog",userId:b.userId,date:Date.create(b.getWeekDayDate(e.year,parseInt(e.serialNumber)+1,7)).format("{yyyy}-{MM}-{dd}"),print:!0}),b.weekblog.render(),$("#js_printblog").show(),$("#printFont").show(),c.find("#blog-panel").show())):(c.find("#wr-print").removeClass("hide"),c.find("#wr-export").attr("href","/workreport/export.json?id\x3d"+e.id+"\x26userId\x3d"+e.creator.id).removeClass("hide"))}else b.type?b.renderHeader(b.type,b.year,b.serialNumber,
h.name):(d=f.getWeekDate(new Date(TEAMS.nowTime)),b.renderHeader("week",d.year,d.week,h.name)),b.renderReport({});b.trigger("unreadCount");c.find(".j_loading").addClass("hide");c.find("#content,#summary,#plan").autosize()}),b.trigger("beforeOpen",b.id),$("body").trigger("printLoaded")},save:function(a,b){var c=this,d=$(this.el);d.find(".j_loading").removeClass("hide");if(b)this.model.update(a,function(a){d.find(".j_loading").addClass("hide");f.notify("\u62a5\u544a\u5185\u5bb9\u4fdd\u5b58\u6210\u529f")});
else{var e=c.attachment.getLinkIds();a.ids=e.join(",");this.model.create(a,function(a){d.find(".j_loading").addClass("hide");a=a.workReport;$(".reports-body").data("reportId",a.id);f.notify("\u62a5\u544a\u521b\u5efa\u6210\u529f");$("#extend-panel").html("");c.initComponent(a);c.id=a.id;$(c.el).find("#wr-print").removeClass("hide");$(c.el).find("#wr-export").attr("href","/workreport/export.json?id\x3d"+a.id+"\x26userId\x3d"+a.creator.id).removeClass("hide")})}},renderHeader:function(a,b,c,d){var e=
$(this.el);if("week"==a){$("#planTitle").text("\u4e0b\u5468\u5de5\u4f5c\u8ba1\u5212 ");$("#contentTitle").text("\u672c\u5468\u5de5\u4f5c\u6210\u6548");var f=(new Date(b,0,1)).addDays(7*(c-1)),h=f.clone().beginningOfISOWeek(),f=f.clone().endOfISOWeek(),u=d+"\u7684\u7b2c"+c+"\u5468\u7684\u5de5\u4f5c\u62a5\u544a";$("#title").text(u);$("#weekDay").html("[\x3ci\x3e"+h.format("{MM}-{dd}")+"~"+f.format("{MM}-{dd}")+"\x3c/i\x3e]");this.reportType||($("#prev").text("\u4e0a\u4e00\u5468"),$("#next").text("\u4e0b\u4e00\u5468"),
$("#current").text("\u672c\u5468"),$("#switch").removeClass("hide"));TEAMS.currentUser.activeDate<f.getTime()?$("#dayReport").text("\u672c\u5468\u5de5\u4f5c\u65e5\u62a5"):$("#dayReport").addClass("hide");e.find("#weeklyblog").attr("data-id",this.userId).attr("data-value",f.format("{yyyy}-{MM}-{dd}"))}"month"==a&&(u=d+"\u7684"+b+"\u5e74"+c+"\u6708\u4efd\u5de5\u4f5c\u62a5\u544a",$("#title").text(u),$("#planTitle").text("\u4e0b\u6708\u5de5\u4f5c\u8ba1\u5212"),$("#contentTitle").text("\u672c\u6708\u5de5\u4f5c\u6210\u6548"),
$("#weekDay").addClass("hide"),this.reportType||($("#prev").text("\u4e0a\u4e00\u6708"),$("#next").text("\u4e0b\u4e00\u6708"),$("#current").text("\u672c\u6708"),$("#switch").removeClass("hide")));"season"==a&&(u=d+"\u7684"+b+"\u5e74\u7b2c"+c+"\u5b63\u5ea6\u5de5\u4f5c\u62a5\u544a",$("#title").text(u),$("#contentTitle").text("\u672c\u5b63\u5ea6\u5de5\u4f5c\u6210\u6548"),$("#planTitle").text("\u4e0b\u5b63\u5ea6\u5de5\u4f5c\u8ba1\u5212"),$("#weekDay").addClass("hide"),$("#switch").addClass("hide"));"year"==
a&&(u=d+"\u7684"+b+"\u5e74\u5e74\u5ea6\u5de5\u4f5c\u62a5\u544a",$("#title").text(u),$("#contentTitle").text("\u672c\u5e74\u5de5\u4f5c\u6210\u6548"),$("#planTitle").text("\u4e0b\u4e00\u5e74\u5de5\u4f5c\u8ba1\u5212"),$("#weekDay").addClass("hide"),$("#switch").addClass("hide"));"halfYear"==a&&(u=d+"\u7684"+b+"\u5e74\u5e74\u4e2d\u5de5\u4f5c\u62a5\u544a",$("#title").text(u),$("#contentTitle").text("\u4e0a\u534a\u5e74\u5de5\u4f5c\u6210\u6548"),$("#planTitle").text("\u4e0b\u534a\u5e74\u5de5\u4f5c\u8ba1\u5212"),
$("#weekDay").addClass("hide"),$("#switch").addClass("hide"));this.hideBlog&&(e.find("#dayReport").addClass("hide"),e.find("#switch").addClass("hide"))},renderReport:function(a){a.content?this.isStat?this.editable?$(".report-result").find("#content").val(a.content).data("content",a.content):$(".report-result").find("#content").html(f.convert2Html(a.content)):this.editable?$("#content").val(a.content).data("content",a.content):$("#content").html(f.convert2Html(a.content)):this.isStat?$(".report-result").find("#content").val("").data("content",
""):$("#content").val("").data("content","");a.summary?this.isStat?this.editable?$(".report-result").find("#summary").val(a.summary).data("summary",a.summary):$(".report-result").find("#summary").html(f.convert2Html(a.summary)):this.editable?$("#summary").val(a.summary).data("summary",a.summary):$("#summary").html(f.convert2Html(a.summary)):this.isStat?$(".report-result").find("#summary").val("").data("summary",""):$("#summary").val("").data("summary","");a.plan?this.isStat?this.editable?$(".report-result").find("#plan").val(a.plan).data("plan",
a.plan):$(".report-result").find("#plan").html(f.convert2Html(a.plan)):this.editable?$("#plan").val(a.plan).data("plan",a.plan):$("#plan").html(f.convert2Html(a.plan)):this.isStat?$(".report-result").find("#plan").val("").data("plan",""):$("#plan").val("").data("plan","");this.editable&&$(".reports-body").data("reportId",a.id);a.lastUpdateTime&&$("#createTime").text("  \u6700\u540e\u63d0\u4ea4\u4e8e"+Date.create(a.lastUpdateTime).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));$("#extend-panel").html("");
this.initComponent(a);(!this.editable&&!a.attachments||!this.editable&&0==a.attachments.length)&&$("#report-attachment").css("display","none");this.flag&&this.userId==TEAMS.currentUser.id&&($("#content").html("\u4e0d\u53ef\u586b\u5199"),$("#summary").html("\u4e0d\u53ef\u586b\u5199"),$("#plan").html("\u4e0d\u53ef\u586b\u5199"))},genParam:function(a,b,c,d,e){if(!a){var h=f.getWeekDate(new Date(TEAMS.nowTime));c=c?c:h.year;d=d?d:"week";"year"!=d&&"halfYear"!=d&&(e=e?e:h.week)}h={};h["workReport.id"]=
a;h["workReport.year"]=c;h["workReport.serialNumber"]=e;h["workReport.type"]=d;h["workReport.creator.userId"]=b;return h},getWeekDayDate:function(a,b,c){a=new Date(a,"0","1");var d=a.getTime();a.setTime(d+6048E5*(b-1));return this.getNextDate(a,c)},getNextDate:function(a,b){b%=7;var c=a.getDay(),d=a.getTime();a.setTime(d+864E5*(b-c));return a},isDisable:function(){var a=Date.create(TEAMS.nowTime),a=f.getWeekDate(a),b=a.month,c=a.week;if(this.year==a.year)switch(this.type){case "month":if(this.serialNumber>
b)return!0;break;case "week":if(this.serialNumber>c)return!0}switch(this.type){case "season":if(1!=this.serialNumber&&3!=this.serialNumber)return!0;break;case "month":if(12<this.serialNumber)return!0;break;case "week":if(this.serialNumber>f.getWeeksOfYear(this.year))return!0}return!1},remove:function(){$(this.el).off(".workreportcontent");this.header&&(this.header.remove(),this.header=null);this.extendView&&(this.extendView.remove(),this.extendView=null);this.shareView&&(this.shareView.remove(),this.shareView=
null)}});m.exports=h});
define("teams/workreport/workreportmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.page={pageNo:1,pageSize:10}},loadDepartment:function(f){$.ajax({type:"post",url:"/workreport/queryDepartment.json",dataType:"json",success:function(e){f&&f(e)}})},queryWorkReport:function(f,e){$.ajax({type:"post",url:"/workreport/view.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},loadReport:function(f,e,c,b,a){$.ajax({type:"post",url:"/workreport/loadReport.json",dataType:"json",
data:{currentYear:f,choiceType:c,checkType:e,departmentId:b},success:function(b){a&&a(b)}})},queryGoalUserlist:function(f,e,c,b,a,d){$.ajax({type:"post",url:"/workreport/queryGoalUserList.json",dataType:"json",data:{currentYear:f,choiceType:c,checkType:e,number:b,departmentId:a},success:function(a){d&&d(a)}})},create:function(f,e){$.ajax({type:"post",url:"/workreport.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},update:function(f,e){f._method="PUT";$.ajax({type:"post",url:"/workreport/"+
f["workReport.id"]+".json?",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryWorkReportType:function(f,e,c,b){$.ajax({type:"get",url:"/workreport.json",dataType:"json",data:{type:f,pageSize:this.page.pageSize,pageNo:this.page.pageNo,commentTime:e,unreadFlag:c},async:!1,success:function(a){b&&b(a)}})},getUnreadCount:function(f){$.ajax({type:"get",url:"/workreport/unreadCount.json",dataType:"json",success:function(e){f&&f(e)}})},readAll:function(f){$.ajax({type:"get",url:"/workreport/readAll.json",
dataType:"json",success:function(e){f&&f(e)}})}});m.exports=h});
define("teams/workreport/workreportstatisticsview",["teams/utils","teams/component/userslider","teams/workreport/workreportmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/userslider");var e=h("teams/workreport/workreportmodel");h=Backbone.View.extend({initialize:function(c){this.model=new e;this.el="#yearPanel";$(".reports-panel").empty();c=f.template("workreport.reportstatistics");$(".reports-panel").append(c)},delegateEvents:function(){var c=this;$(this.el).off("click.reportstatistics",
"#statisticsType a").on("click.reportstatistics","#statisticsType a",function(b){$(this).parent().children().each(function(){$(this).removeClass("active")});$(this).addClass("active");b=$(".static").attr("value");var a=$(this).attr("value"),d=$(".static-department").val(),e,f,h;f=$(".my input:checkbox").prop("checked")?1:0;h=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;f=parseInt(f)+parseInt(h)+parseInt(myUndirectSubordinate);
0==f?e="":1==f?e="\u6211\u7684":2==f?e="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==f?e=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==f?e="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==f?e="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==f&&(e="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");c.loadReport(b,a,e,d)});$(c.el).on("click.reportstatistics",".my input:checkbox",function(){$(this);var b,a,d;$(".static-department").val("-1");
a=$(".my input:checkbox").prop("checked")?1:0;d=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;a=parseInt(a)+parseInt(d)+parseInt(myUndirectSubordinate);0==a?b="":1==a?b="\u6211\u7684":2==a?b="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==a?b=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==a?b="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":
5==a?b="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==a&&(b="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");a=$(".static").attr("value");d=$("#statisticsType").children(".active").attr("value");var e=$(".static-department").find("option:selected").val();c.loadReport(a,d,b,e)});$(c.el).on("click.reportstatistics",".mySubordinate input:checkbox",function(){$(this);var b,a,d;$(".static-department").val("-1");a=$(".my input:checkbox").prop("checked")?1:0;d=$(".mySubordinate input:checkbox").prop("checked")?
2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;a=parseInt(a)+parseInt(d)+parseInt(myUndirectSubordinate);0==a?b="":1==a?b="\u6211\u7684":2==a?b="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==a?b=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==a?b="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==a?b="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==a&&(b="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");
a=$(".static").attr("value");d=$("#statisticsType").children(".active").attr("value");var e=$(".static-department").find("option:selected").val();c.loadReport(a,d,b,e)});$(c.el).on("click.reportstatistics",".myUndirectSubordinate input:checkbox",function(){$(this);var b,a,d;$(".static-department").val("-1");a=$(".my input:checkbox").prop("checked")?1:0;d=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;a=parseInt(a)+
parseInt(d)+parseInt(myUndirectSubordinate);0==a?b="":1==a?b="\u6211\u7684":2==a?b="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==a?b=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==a?b="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==a?b="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==a&&(b="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");a=$(".static").attr("value");d=$("#statisticsType").children(".active").attr("value");
var e=$(".static-department").find("option:selected").val();c.loadReport(a,d,b,e)});$(c.el).on("change.reportstatistics",".static-department",function(){var b=$(this);$(".my input:checkbox").prop("checked",!1);$(".mySubordinate input:checkbox").prop("checked",!1);$(".myUndirectSubordinate input:checkbox").prop("checked",!1);var b=b.val(),a=$(".static").attr("value"),d=$("#statisticsType").children(".active").attr("value");c.loadReport(a,d,void 0,b)});$(c.el).off("click.reportstatistics",".icon-angle-left").on("click.reportstatistics",
".icon-angle-left",function(){var b=parseInt($(".static").attr("value")),b=b-1;$(".static").html(b);$(".static").attr("value",b);$(this);var a,d,b=$(".my input:checkbox").prop("checked")?1:0;d=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;b=parseInt(b)+parseInt(d)+parseInt(myUndirectSubordinate);0==b?a="":1==b?a="\u6211\u7684":2==b?a="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==b?a=3==myUndirectSubordinate?
"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==b?a="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==b?a="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==b&&(a="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");b=$(".static").attr("value");d=$("#statisticsType").children(".active").attr("value");var e=$(".static-department").find("option:selected").val();c.loadReport(b,d,a,e)});$(c.el).off("click.reportstatistics",".icon-angle-right").on("click.reportstatistics",
".icon-angle-right",function(){var b=parseInt($(".static").attr("value")),b=b+1,a=f.getWeekDate(new Date(TEAMS.nowTime)).year;if(parseInt(b)>parseInt(a))f.notify("\u6240\u9009\u5e74\u4efd\u4e0d\u80fd\u5927\u4e8e\u4eca\u5e74");else{$(".static").html(b);$(".static").attr("value",b);$(this);var d,b=$(".my input:checkbox").prop("checked")?1:0,a=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;b=parseInt(b)+parseInt(a)+
parseInt(myUndirectSubordinate);0==b?d="":1==b?d="\u6211\u7684":2==b?d="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==b?d=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==b?d="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==b?d="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==b&&(d="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");var b=$(".static").attr("value"),a=$("#statisticsType").children(".active").attr("value"),
e=$(".static-department").find("option:selected").val();c.loadReport(b,a,d,e)}})},render:function(){var c=f.getWeekDate(new Date(TEAMS.nowTime)).year;$(".static").attr("value",c);$(".static").html(c);var c=$(".static").attr("value"),b=$("#statisticsType").children(".active").attr("value"),a,d,e;d=$(".my input:checkbox").prop("checked")?1:0;e=$(".mySubordinate input:checkbox").prop("checked")?2:0;myUndirectSubordinate=$(".myUndirectSubordinate input:checkbox").prop("checked")?3:0;d=parseInt(d)+parseInt(e)+
parseInt(myUndirectSubordinate);0==d?a="":1==d?a="\u6211\u7684":2==d?a="\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":3==d?a=3==myUndirectSubordinate?"\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":"\u6211\u548c\u6211\u7684\u76f4\u63a5\u4e0b\u5c5e":4==d?a="\u6211\u548c\u6211\u7684\u95f4\u63a5\u4e0b\u5c5e":5==d?a="\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e":6==d&&(a="\u6211\u548c\u6211\u7684\u76f4\u3001\u95f4\u63a5\u4e0b\u5c5e");d=$(".static-department").find("option:selected").val();this.loadDepartment(function(a){a=
a.departmentList;for(var b=0;b<a.length;b++){var c=a[b];$(".static-department").append('\x3coption value\x3d"'+c.id+'"\x3e'+c.name+"\x3c/option\x3e")}});this.loadReport(c,b,a,d)},loadReport:function(c,b,a,d){var e=this;this.model.loadReport(c,b,a,d,function(h){function n(a){var b=new Date(TEAMS.nowTime),c=f.getWeekDate(b);return parseInt(a)==c.year?(a=b.clone().endOfISOWeek(),Math.ceil((a.daysSince(a.clone().beginningOfYear())+1)/7)):f.getWeeksOfYear(parseInt(a))}var k=h.reportList,r=h.employeeList;
$("thead tr,tbody").empty();$("tbody td").removeData("count");if(void 0!=r&&0<r.length){$("#reportTable").removeClass("hide");$("#no-data").addClass("hide");$("thead tr").append('\x3cth\x3e\u59d3\u540d\x3ci class\x3d"icon-help ml-10"title\x3d"" data-toggle\x3d"tooltip" data-html\x3d"true" data-placement\x3d"top" data-template\x3d"\x3cdiv class\x3d\x26quot;tooltip i-tooltip\x26quot; role\x3d\x26quot;tooltip\x26quot;\x3e\x3cdiv class\x3d\x26quot;tooltip-arrow i-tooltip-arrow\x26quot;\x3e\x3c/div\x3e\x3cdiv class\x3d\x26quot;tooltip-inner i-tooltip-inner\x26quot;\x3e\x3c/div\x3e\x3c/div\x3e" data-original-title\x3d"\u70b9\u51fb\u59d3\u540d\u5217\uff0c\u5373\u53ef\u9009\u4e2d\u6574\u884c" \x3e\x3c/i\x3e\x3c/th\x3e');
h=n(c);var p=f.getWeekDate(new Date(TEAMS.nowTime)),s,u,p=c==p.year?p.month:12;if("week"==b){for(var w=h;0<w;w--)$("thead tr").append('\x3cth class\x3d"date-th"\x3e\x3ca class\x3d"remind-toggle" number\x3d'+w+" choiceType\x3d"+a+" type\x3d"+b+" currentYear\x3d"+c+" departmentId\x3d"+d+' module\x3d"workreport"\x3e\u7b2c'+w+"\u5468\x3c/a\x3e\x3c/th\x3e");$("thead").parents().find(".report-tabdiv").removeClass("month-table season-table halfyear-table").addClass("week-table")}if("month"==b){for(w=p;0<
w;w--)$("thead tr").append('\x3cth class\x3d"date-th"\x3e\x3ca class\x3d"remind-toggle" number\x3d'+w+" choiceType\x3d"+a+" type\x3d"+b+" currentYear\x3d"+c+" departmentId\x3d"+d+' module\x3d"workreport"\x3e\u7b2c'+w+"\u6708\x3c/a\x3e\x3c/th\x3e");$("thead").parents().find(".report-tabdiv").removeClass("week-table season-table halfyear-table").addClass("month-table")}if("season"==b){for(w=s=9<p?4:6<p?3:3<p?2:1;0<w;w--)$("thead tr").append('\x3cth class\x3d"date-th"\x3e\x3ca class\x3d"remind-toggle" number\x3d'+
w+" choiceType\x3d"+a+" type\x3d"+b+" currentYear\x3d"+c+" departmentId\x3d"+d+' module\x3d"workreport"\x3e\u7b2c'+w+"\u5b63\u5ea6\x3c/a\x3e\x3c/th\x3e");$("thead").parents().find(".report-tabdiv").removeClass("week-table month-table halfyear-table").addClass("season-table")}"halfyear"==b&&(6<p?(u=2,$("thead tr").append('\x3cth class\x3d"date-th"\x3e\x3ca class\x3d"remind-toggle" number\x3d"2" choiceType\x3d'+a+" type\x3d"+b+" currentYear\x3d"+c+" departmentId\x3d"+d+' module\x3d"workreport"\x3e\u5e74\u7ec8\u62a5\u544a\x3c/a\x3e\x3c/th\x3e')):
u=1,$("thead tr").append('\x3cth class\x3d"date-th"\x3e\x3ca class\x3d"remind-toggle" number\x3d"1" choiceType\x3d'+a+" type\x3d"+b+" currentYear\x3d"+c+" departmentId\x3d"+d+' module\x3d"workreport"\x3e\u5e74\u4e2d\u62a5\u544a\x3c/a\x3e\x3c/th\x3e'),$("thead").parents().find(".report-tabdiv").removeClass("week-table season-table month-table").addClass("halfyear-table"));for(w=0;w<r.length;w++){var v=r[w];0>=$("tbody #report-data-"+v.id).size()&&e.createReportTr(v,b)}for(w=0;w<k.length;w++){var r=
k[w],v=$("tbody #report-data-"+r.id),m;"week"==b&&(m=h-r.numberOfWeek);"month"==b&&(m=p-r.numberOfWeek);"season"==b&&(m=s-r.numberOfWeek);"halfyear"==b&&(m=u-1-w);v=v.find(".unfinished:eq("+m+")");$("tbody #report-data-"+r.id).find(".unfinished:eq("+m+")").addClass("j_entityslider-toggle");$("tbody #report-data-"+r.id).find(".unfinished:eq("+m+")").attr("data-id",r.reportId);$("tbody #report-data-"+r.id).find(".unfinished:eq("+m+")").attr("data-module",r.module);(r=v.data("count"))||(r=0);r=parseInt(r);
r++;v.data("count",r);v.data("later",!1)}$("tbody .unfinished").each(function(){var a=$(this);a.data("count")?a.html('\x3cspan\x3e\x3cimg style\x3d"cursor:pointer;" alt\x3d"\u6709\u65e5\u62a5" src\x3d"images/teams/submited_flat.png"\x3e\x3c/span\x3e'):(a.html('\x3cspan\x3e\x3cimg style\x3d"cursor:pointer;" alt\x3d"\u65e0\u65e5\u62a5 " src\x3d"images/teams/unsubmit.png"\x3e\x3c/span\x3e'),a.addClass("remind-toggle"),a.attr("module","workreport"),a.attr("type",b),a.attr("currentYear",
c))});$("thead tr").append('\x3cth class\x3d"count-th"\x3e\u603b\u6570\x3c/th\x3e');$("tbody tr").each(function(){var a=$(this),b=0;a.find('td:not(".username-td")').each(function(){var a=$(this);a.data("count")&&(b+=a.data("count"))});a.append('\x3ctd class\x3d"count-td"\x3e'+b+"\x3c/td\x3e")});var y=0;$("tbody").append('\x3ctr id\x3d"count-tr"\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e');if("week"==b)for(w=1;w<=h;w++){var q=0;$("tbody tr").each(function(){var a=$(this).find("td:eq("+w+")");a.data("count")&&
(q+=a.data("count"),y+=a.data("count"))});q||(q="-");$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+q+"\x3c/td\x3e")}else if("month"==b)for(w=1;w<=p;w++)q=0,$("tbody tr").each(function(){var a=$(this).find("td:eq("+w+")");a.data("count")&&(q+=a.data("count"),y+=a.data("count"))}),q||(q="-"),$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+q+"\x3c/td\x3e");else if("season"==b)for(w=1;w<=s;w++)q=0,$("tbody tr").each(function(){var a=$(this).find("td:eq("+w+")");a.data("count")&&
(q+=a.data("count"),y+=a.data("count"))}),q||(q="-"),$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+q+"\x3c/td\x3e");else if("halfyear"==b)for(w=1;w<=u;w++)q=0,$("tbody tr").each(function(){var a=$(this).find("td:eq("+w+")");a.data("count")&&(q+=a.data("count"),y+=a.data("count"))}),q||(q="-"),$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+q+"\x3c/td\x3e");else"year"==b&&(q=0,$("tbody tr").each(function(){var a=$(this).find("td:eq("+w+")");a.data("count")&&(q+=a.data("count"),
y+=a.data("count"))}),q||(q="-"),$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+q+"\x3c/td\x3e"));$("tbody #count-tr").append('\x3ctd class\x3d"count-td"\x3e'+y+"\x3c/td\x3e")}else $("#reportTable").addClass("hide"),$("#no-data").removeClass("hide")})},createReportTr:function(c,b){$("tbody").append('\x3ctr id\x3d"report-data-'+c.id+'"\x3e\x3ctd class\x3d"username-td" title\x3d"'+c.username+'"\x3e\x3ca class\x3d"router usercard-toggle" userId\x3d"'+c.id+'"\x3e'+c.username+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e");
var a=0,d=$("thead .date-th").length,e=(new Date(c.activeDate)).getFullYear();$("thead .date-th").each(function(){var f=d-a;$(this);$("tbody #report-data-"+c.id).append('\x3ctd class\x3d"unfinished" type\x3d'+b+" activeYear\x3d"+e+" number\x3d"+f+" username\x3d"+c.username+" targetId\x3d"+c.id+" data-id\x3d"+c.id+"\x3e\x3c/td\x3e");a++});a=0},loadDepartment:function(c,b,a,d){this.model.loadDepartment(function(a){a=a.departmentList;for(var b=0;b<a.length;b++){var c=a[b];$(".static-department").append('\x3coption value\x3d"'+
c.id+'"\x3e'+c.name+"\x3c/option\x3e")}})}});m.exports=h});
define("teams/workreport/workreportpage",["teams/core/page","teams/workreport/workreportview","teams/workreport/workreportcontentview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/workreport/workreportview"),e=h("teams/workreport/workreportcontentview");h=q.extend({initialize:function(c){this.userId=c.userId;this.year=c.year;this.type=c.type;this.serialNumber=c.serialNumber;this.editable=c.editable;this.pageKey="workreportpage";this.template="workreport.workreportpage";this.pageActive="workreport";
this.mainView&&(this.year=this.year?this.year:$(".reports-panel").data("year"),this.type=this.type?this.type:$(".reports-panel").data("type"),this.serialNumber=this.serialNumber?this.serialNumber:$(".reports-panel").data("serialNumber"),this.mainView.update(this.userId,this.year,this.type,this.serialNumber,this.editable))},delegateEvents:function(){this.on("synTimeLine",function(c){this.mainView.timelineView.genTimeLineByYear(c.year,c.type,c.num)});this.on("unreadCount",function(){this.mainView.getUnreadCount()})},
render:function(){this.initLayout({flag:!1});$(".aside").find("li.j_mine").addClass("active");$(".goto-top").remove();this.mainView=new f({userId:this.userId,year:this.year,type:this.type,serialNumber:this.serialNumber,editable:this.editable});this._render();this.subView=new e({userId:this.userId,year:this.year,type:this.type,serialNumber:this.serialNumber,editable:this.editable,container:"#reports-right"});this._renderSubview()},renderSubview:function(){this.mainView&&(this.year=this.year?this.year:
$(".reports-panel").data("year"),this.type=this.type?this.type:$(".reports-panel").data("type"),this.serialNumber=this.serialNumber?this.serialNumber:$(".reports-panel").data("serialNumber"),this.mainView.update(this.userId,this.year,this.type,this.serialNumber,this.editable));this.subView=new e({userId:this.userId,year:this.year,type:this.type,serialNumber:this.serialNumber,editable:this.editable,container:"#reports-right"});this._renderSubview()}});m.exports=h});
define("teams/workreport/workreporttypepage",["teams/core/page","teams/workreport/workreporttypeview","teams/workreport/workreportcontentview"],function(h,q,m){q=h("teams/core/page");var f=h("teams/workreport/workreporttypeview"),e=h("teams/workreport/workreportcontentview");h=q.extend({initialize:function(c){this.reportType=c.reportType;this.unreadFlag=c.unreadFlag;this.editable=c.editable;this.pageKey=c.pageKey;this.id=c.id;this.template="workreport.workreportpage";this.pageActive="workreport"},
render:function(){this.initLayout({flag:!0});$(".aside").find("li.j_"+this.reportType).addClass("active");$(".goto-top").remove();this.mainView=new f({reportType:this.reportType,unreadFlag:this.unreadFlag});this._render();"statistics"!=this.reportType&&(this.subView=new e({editable:this.editable,reportType:this.reportType,id:this.id,container:"#reports-right",unreadFlag:this.unreadFlag}),this._renderSubview())},renderSubview:function(){this.subView=new e({editable:this.editable,reportType:this.reportType,
id:this.id,container:"#reports-right",unreadFlag:this.unreadFlag});this._renderSubview()}});m.exports=h});
define("teams/concerns/concernspage",["teams/utils","teams/core/page","teams/feed/feedview","teams/views/feedbackview"],function(h,q,m){var f=h("teams/utils");q=h("teams/core/page");var e=h("teams/feed/feedview");h("teams/views/feedbackview");h=q.extend({initialize:function(c){this.options=c;this.param=c.param;this.module=c.module;this.objId=c.objId;this.type=c.type;this.pageKey="concerns#"+this.type+this.module;this.el="#mainContainer";this.pageTitle="\u5173\u6ce8\u4e8b\u9879";this.pageIcon="icon-favourite";
this.listIcon="graph-favourite";"unfinish"==this.type&&(this.pageTitle="\u672a\u5b8c\u6210\u4e8b\u9879",this.pageIcon="icon-paperairplane",this.listIcon="graph-unfinish");this.template="concerns.page"},render:function(){var c=this.type;this.initLayout({title:this.pageTitle,icon:this.pageIcon,listIcon:this.listIcon,type:c,module:this.module});$(this.el).find(".menu-group-sub li.j_"+this.module).addClass("active");this.mainView=new e({type:c,param:this.param,module:this.module,objId:this.objId,el:this.el+
" #concernsContainer .main"});this.mainView.render();var c=this.el+" #concernsHelp",b=$(f.template("concerns.help"));$(c).html(b.find(" .j_"+this.type+" .j_tip_"+this.module).removeClass("hide"))}});m.exports=h});
define("teams/core/app","teams/utils teams/component/top teams/task/taskpage teams/workflow/workflowpage teams/base/clientview teams/pages/searchpage teams/feed/feedpage teams/org/orgpage teams/blog/blogpage teams/pages/simplepage teams/pages/logpage teams/doc/documentpage teams/mainline/mainlinelinkpage teams/tag/tagpage teams/tag/tagrecentview teams/pages/wechatpage teams/pages/messagespage teams/pages/unreadfeedbackpage teams/base/pwdview teams/base/avatarview teams/base/adviseview teams/component/invitemodalview teams/component/chatHistoryView teams/component/quickInviteView teams/component/guideview teams/calendar/calendarpage teams/calendar/agenda teams/workreport/workreporttypepage teams/workreport/workreportpage teams/pages/printpage teams/report/reportpage teams/system/systempage teams/profile/profilepage teams/mainline/mainlinepage teams/follow/followpage teams/concerns/concernspage teams/component/entityslider teams/form/formpage teams/portal/portalmodel teams/feed/eteamscounter teams/websocket/websocket teams/portal/portalpage teams/component/event".split(" "),function(h,
q,m){var f=h("teams/utils"),e=h("teams/component/top"),c=h("teams/task/taskpage"),b=h("teams/workflow/workflowpage"),a=h("teams/base/clientview"),d=h("teams/pages/searchpage"),g=h("teams/feed/feedpage"),l=h("teams/org/orgpage"),n=h("teams/blog/blogpage"),k=h("teams/pages/simplepage");h("teams/pages/logpage");var r=h("teams/doc/documentpage"),p=h("teams/mainline/mainlinelinkpage"),s=h("teams/tag/tagpage");h("teams/tag/tagrecentview");var u=h("teams/pages/wechatpage");h("teams/pages/messagespage");
var w=h("teams/pages/unreadfeedbackpage"),v=h("teams/base/pwdview"),x=h("teams/base/avatarview"),y=h("teams/base/adviseview"),z=h("teams/component/invitemodalview"),A=h("teams/component/chatHistoryView"),B=h("teams/component/quickInviteView");h("teams/component/guideview");var E=h("teams/calendar/calendarpage");h("teams/calendar/agenda");var D=h("teams/workreport/workreporttypepage"),C=h("teams/workreport/workreportpage"),F=h("teams/pages/printpage"),G=h("teams/report/reportpage"),H=h("teams/system/systempage"),
K=h("teams/profile/profilepage"),M=h("teams/mainline/mainlinepage"),P=h("teams/follow/followpage"),O=h("teams/concerns/concernspage"),Q=h("teams/component/entityslider"),S=h("teams/form/formpage"),T=h("teams/portal/portalmodel"),R=h("teams/feed/eteamscounter");h("teams/websocket/websocket");var I=h("teams/portal/portalpage"),J=h("teams/component/event");q=Backbone.View.extend({initialize:function(a){this.relogin=!0;document.location.href&&-1==document.location.href.indexOf("print/")&&(this.top=new e,
this.top.render());this.portalModel=new T},delegateEvents:function(){var b=this;J.initEvent();$("body").on("click",".wechat-toggle",function(a){a.stopPropagation();a=$(this).data("employee");a&&a.id==TEAMS.currentUser.id||(b.lastPage&&"portal"==b.lastPage.pageActive?($("#entitybox").modal("hide"),b.lastPage.trigger("showChat",a)):b.top.newmessage&&(b.top.newmessage.openChatWindow(a,"employee"),R.markMessageRead(b.type)))});$("body").on("mouseenter",".popover-toggle",function(a){$(this).find(".popover-bottom").fadeTo(100,
1)}).on("mouseleave",".popover-toggle",function(a){$(this).find(".popover-bottom").fadeTo(0).hide()});$("body").off("click","a.client-toggle").on("click","a.client-toggle",function(){(new a).render()});$("body").on("click",".advise-toggle",function(a){(new y).render()});var c=-1;$(document).off("keydown").on("keydown",function(a){c=a.keyCode;null==$(".modal-backdrop.fade.in").get(0)&&27==c&&b.initSlider({callBack:function(a){a&&(window.formJsonStr=null,$("body").trigger("slideClose"))}})});$(window).off("beforeunload.dropdownmenu").on("beforeunload.dropdownmenu",
function(){if(116==c)c=-1;else if(-1==navigator.userAgent.toLowerCase().indexOf("firefox")&&TEAMS.currentUser.loginCount&&1>TEAMS.currentUser.loginCount)return"\u60a8\u53ef\u4ee5\u901a\u8fc7\u5feb\u6377\u952eCtrl+D\u5c06eteams\u52a0\u5165\u5230\u6536\u85cf\u5939"});$("body").off("triggerClose").on("triggerClose",function(a){var b=location.pathname;a=location.hash;b=b.substring(0,b.lastIndexOf("/"));""==b&&""!=a&&(b="/"+a.substring(1,a.lastIndexOf("/")));ROUTER.navigate(b,{trigger:!0})});$("body").off("click",
"a.pwd-toggle").on("click","a.pwd-toggle",function(){var a=$(this).attr("userId"),b=$(this).attr("type");(new v({userId:a,type:b})).render()});$("body").off("click","a.invite-toggle").on("click","a.invite-toggle",function(a){(new z).render()});$("body").off("click","div.invite-toggle").on("click","div.invite-toggle",function(a){(new z).render()});$("body").off("click","a.chat-history-toggle").on("click","a.chat-history-toggle",function(a){a=$(this).data("chatType");if("employee"==a)var b=$(this).data("targetId");
else if("channel"==a)var c=$(this).data("targetId");(new A({userId:b,channelId:c,chatType:a})).render()});$("body").off("click","p.quick-invite-toggle").on("click","p.quick-invite-toggle",function(a){a=$(this).find("span").text();a=new B({userName:a});a.render();setTimeout(a.focusInput,200)});$("body").off("click","a.upload-toggle").on("click","a.upload-toggle",function(){(new x({})).renderBox()});$("body").off("click",".share-join").on("click",".share-join",function(){var a=$(this).attr("entityId"),
b=$(this).attr("module");$.ajax({type:"post",dataType:"json",data:{entityId:a,module:b},url:"/blog-message/shareApply.json",success:function(a){f.notify("\u5171\u4eab\u7533\u8bf7\u5df2\u53d1\u9001")}})});$("body").on("click",".j_entityslider-toggle",function(a){var c=$(this);$(this).parents(".unread").removeClass("unread");$(this).parents(".newComment").removeClass("newComment");b.initSlider({callBack:function(a){if(a){a=c.attr("barType");var b=c.attr("idList"),d=c.attr("mainlineId"),e=c.attr("group"),
f=c.attr("checkDate"),g=c.attr("userName"),h=c.attr("data-module"),k=c.attr("data-id"),l=c.attr("userId"),p=c.attr("renderType"),n=c.data("tolink"),v=c.attr("formData"),e="mainlineState"==a&&"\u65b0\u589e"==e?"add":c.attr("group");$("body").trigger("slideOpen",{barType:a,mainlineId:d,group:e,checkDate:f,userName:g,module:h,id:k,idList:b,userId:l,renderType:p,tolink:n,formData:v})}}})});$("body").off("slideOpen").on("slideOpen",function(a,c){var d=c.barType,e=c.mainlineId,f=c.group,g=c.checkDate,h=
c.userName,k=c.module,l=c.id,p=c.idList,n=c.userId,v=c.renderType,s=c.slideCallback,u=c.tolink,r=c.formData;"task"!=k||$(this).hasClass("btn")||$(this).addClass("active");k&&l&&(b.entitySlider&&b.entitySlider.remove(),d=new Q({barType:d,mainlineId:e,group:f,checkDate:g,userName:h,module:k,id:l,idList:p,userId:n,renderType:v,page:b.lastPage,slideCallback:s,tolink:u,formData:r}),d.render(),b.entitySlider=d)});$("body").on("click",function(a){a=$(a.target);null==$("#entitybox").get(0)&&null==$(".modal-backdrop.fade.in").get(0)&&
(a.hasClass("j_entityslider-toggle")||null!=a.parents(".j_entityslider-toggle").get(0)||a.hasClass(".smwx-box")||null!=a.parents(".smwx-box").get(0)||null!=a.parents("body").get(0)&&(a.hasClass("filterSlip_js")||null==a.parents(".filterSlip_js").get(0)&&null==a.parents(".ui-pnotify ").get(0)&&null==$(".fancybox-overlay.fancybox-overlay-fixed").get(0)&&$("#entitySlider").hasClass("in")&&(a.hasClass("fc-event-inner")||null!=a.parents(".fc-event-inner").get(0)||null!=a.parents("#fc-week").get(0)||"j_content"==
a.context.id||"newAgenda"==a.context.id||0<$(".js_stopExecute").size()||0==a.closest("#entitySlider").length&&b.initSlider({callBack:function(a){a&&(window.formJsonStr=null,$("body").trigger("slideClose"))}}))))});$("body").off("slideClose").on("slideClose",function(a){$("#entitySlider").removeClass("in");b.entitySlider&&b.entitySlider.remove();f.router&&f.router.isInCrm()&&ROUTER.navigate(f.router.getUrl({info:{view:""}}),{trigger:!0})});$("body").off("sideNav").on("sideNav",function(){$('.aside-nav[data-nav\x3d"fold"] li\x3ediv.link-item').each(function(){null!=
$(this).next(".sub-nav").get(0)&&$(this).css("cursor","pointer");$(this).append('\x3ci class\x3d"icon-angle-down fr"\x3e\x3c/i\x3e')});$("body").off("click",'.aside-nav[data-nav\x3d"fold"] li\x3ediv.link-item').on("click",'.aside-nav[data-nav\x3d"fold"] li\x3ediv.link-item',function(a){a=$(this).parent("li");var b=$(this).next(".sub-nav");null!=b.get(0)&&(b.is(":visible")?(b.slideUp("fast"),$(this).removeClass("on")):(b.slideDown("fast"),a.siblings().find("div.link-item").removeClass("on").end().find(".sub-nav").slideUp("fast"),
$(this).addClass("on")))})});$("body").off("mouseenter",".remoteDownload").on("mouseenter",".remoteDownload",function(a){a=$(this).data("dlid");a=crmContext.remoteDownloadUrl+"/remotedownload/"+a+"/"+ETEAMSID+"/true";$(this).data("dltype")&&(a+="?type\x3d"+$(this).data("dltype"));$(this).attr("href",a)});$("#navigation").off("click",".j_nav_ul a[class*\x3d'j_modnav-'], .j_nav_ul li.j_homeli a, #user-panel .j_user_menu_portal").on("click",".j_nav_ul a[class*\x3d'j_modnav-'], .j_nav_ul li.j_homeli a, #user-panel .j_user_menu_portal",
function(a){var c=$(this);a=c.attr("href");c=c.data("url");a==c&&b.setConfig(TEAMS.currentUser.id,a)})},initSlider:function(a){a=a.callBack;if(window.formJsonStr&&$("body .form-view_js").get(0)&&window.formPlugin){var b=formPlugin.submitAssembleForm({parentEl:$("body .form-view_js")});b&&(JSON.stringify(b.formData.dataDetails)!=window.formJsonStr?f.confirm("\u786e\u5b9a\u653e\u5f03\u586b\u5199\u8868\u5355\u5417\uff1f\u653e\u5f03\u540e\u6570\u636e\u5c06\u4e0d\u4f1a\u88ab\u4fdd\u5b58\uff01",a):a({result:!0}))}else a({result:!0})},
render:function(a,b){this.crmApp&&this.crmApp.lastPage&&(this.crmApp.lastPage.remove(),this.crmApp.lastPage=null);if(null==this.lastPage)this.lastPage=a;else if(this.lastPage.pageKey!=a.pageKey||b)this.lastPage.remove?this.lastPage.remove():this.lastPage.mainView&&this.lastPage.mainView.remove(),this.lastPage=a;else{this.update(a);this.lastPage.subView&&(this.lastPage.subView.remove(),this.lastPage.renderSubview());return}this.lastPage.render();J.setLastPage(this.lastPage);$("body").trigger("rViewSlide");
$(window).trigger("resize")},update:function(a){this.lastPage.initialize(a);a.remove()},renderHome:function(a){var b;if(!a)a=TEAMS.currentUser.id;else if("remind"==a||"follow"==a||"applyJoin"==a||"shareJoin"==a||"applyReceive"==a||"newitem"==a||"unreadblog"==a||"newcomment"==a||"newfinish"==a||"atme"==a)b=a,a=TEAMS.currentUser.id;"portal"==a&&(this.setConfig(TEAMS.currentUser.id,"/portal"),a=TEAMS.currentUser.id);a!=TEAMS.currentUser.id?this.renderBlog(a):(this.top&&this.top.renderNavUrl(a),this.getDispalyConfig(a,
b))},renderTask:function(a,b){a||(a=TEAMS.currentUser.id);var d=new c({userId:a,id:b,type:"mine"});this.top&&this.top.renderNavUrl(a,function(){d.renderType()});this.render(d)},renderTaskByType:function(a,b){a||(a=TEAMS.currentUser.id);b=b?b:"mine";var d=new c({pageKey:"task-"+b,userId:a,type:b});this.top&&this.top.renderNavUrl(a,function(){d.renderType()});this.render(d)},renderWorkflow:function(a,c,d){a||(a=TEAMS.currentUser.id);var e=new b({userId:a,id:c,formId:d});this.top&&this.top.renderNavUrl(a,
function(){e.renderType()});this.render(e)},renderNewWorkflow:function(a,c,d){null==c||"new"==c&&null==d?this.renderWorkflow(a,c,d):(a||(a=TEAMS.currentUser.id),a=new b({userId:a,id:c,formId:d}),this.render(a))},renderWorkflowByType:function(a,c,d){a||(a=TEAMS.currentUser.id);var e=new b({userId:a,formId:d,searchType:c});this.top&&this.top.renderNavUrl(a,function(){e.renderType()});this.render(e)},renderWorkReport:function(a,b,c,d){var e=!0;a?e=a==TEAMS.currentUser.id?!0:!1:a=TEAMS.currentUser.id;
b=new C({userId:a,editable:e,year:b,type:c,serialNumber:d});this.top&&this.top.renderNavUrl(a);this.render(b)},renderWorkReportType:function(a,b,c){var d;"comment"==a?d=c?"unreadworeportcomment":"workreportcomment":"replay"==a?d=c?"unreadworkreportreplay":"workreportreplay":"share"==a?pagekey="workreportshare":d="statistics"==a?"workreportstatistics":"unreadworkreport";a=new D({reportType:a,unreadFlag:c,pageKey:d,editable:"replay"==a||"unread"==a||"share"==a?!1:!0,id:b});this.render(a)},renderSearch:function(a,
b,c,e){a=new d({type:a,param:b,module:c,objId:e});this.top.renderNavUrl();this.render(a)},renderWatched:function(a,b){var c=new O({type:"watched",module:a,objId:b});this.render(c)},renderUnfinish:function(a,b){var c=new O({type:"unfinish",module:a,objId:b});this.top&&this.top.renderNavUrl();this.render(c)},renderFeedSearch:function(a,b,c){a=new g({type:a,module:b,objId:c});this.top&&this.top.renderNavUrl();this.render(a)},renderOrganization:function(a,b,c,d,e){a=new l({id:a,type:b,operation:c,userOrg:d,
creator:e});this.top&&this.top.renderNavUrl();this.render(a)},renderMyfollow:function(a,b){a||(a=TEAMS.currentUser.id);var c=new P({pageKey:"myfollow",userId:a,active:"myfollow",type:b});this.top&&this.top.renderNavUrl(a,function(){c.renderType()});this.render(c)},renderBlog:function(a,b,c,d){a||(a=TEAMS.currentUser.id);a!=TEAMS.currentUser.id&&(TEAMS.subordinate||$.ajax({type:"get",url:"/users/subordinate/"+TEAMS.currentUser.id+".json",dataType:"json",async:!1,success:function(a){a=a.page.result;
var b=[];if(a&&0<a.length)for(var c=0;c<a.length;c++)b.push(a[c].employeeId);else b.push("");TEAMS.subordinate=b}}));var e=new n({userId:a,type:b,param:d,id:c});this.top&&this.top.renderNavUrl(a,function(){e.renderType()});this.render(e)},renderInfo:function(){var a=new H({pageKey:"info"});this.top&&this.top.renderNavUrl();this.render(a)},renderInfoByType:function(a){a=new H({pageKey:a});this.render(a)},renderProfile:function(a,b){var c=new K({userId:a,type:b});this.top&&(this.top.renderNavUrl(a,
function(){}),a&&a!=TEAMS.currentUser.id&&$.ajax({url:"/base/employee/"+a+".json",type:"get",dataType:"json",async:!1,success:function(a){a.employee&&!a.employee.followAndSub?$(".j_basenav .j_blog_NoAuthority").addClass("hide"):$(".j_basenav .j_blog_NoAuthority").removeClass("hide")}}));this.render(c,!0)},documents:function(a,b,c,d){a||(a=TEAMS.currentUser.id);var e=new r({userId:a,id:b,type:c,folderId:d});this.top&&this.top.renderNavUrl(a,function(){e.renderType()});this.render(e,!0)},mainline:function(a,
b,c){var d=new M({pageKey:"mainline-"+(b?b:"mine"),userId:a,id:c,filterType:b});this.top&&this.top.renderNavUrl(a,function(){d.renderType()});this.render(d)},mainlinelink:function(a,b,c,d,e,f){$("#"+b+" .j_goalname").tooltip("hide");var g=new p({id:b,userId:a,mainlineType:c,module:e,objId:f,filterType:d});this.top&&this.top.renderNavUrl(a,function(){g.renderType()});this.render(g)},tag:function(a,b){var c=new s({type:a,id:b});this.render(c)},messages:function(a,b){var c=new g({type:a,module:"messages",
param:b,newMessage:this.top.newmessage});this.top&&this.top.renderNavUrl();this.render(c)},renderTaskreport:function(a){a=new k({pageKey:"tasksreport",userId:a});this.render(a)},renderTaskreports:function(a){a=new G({pageKey:"taskreport",userId:a,module:"task"});this.render(a)},renderTaskStatistics:function(a){a=new G({userId:a,module:"taskstatistics"});this.render(a)},renderFlowreports:function(){var a=new G({pageKey:"flowreport",module:"flow"});this.render(a)},renderFlowStat:function(){var a=new G({pageKey:"flowstat",
module:"flowstat"});this.render(a)},renderWorkhour:function(){var a=new G({pageKey:"workhourreport",module:"workhour"});this.render(a)},renderTimecard:function(a){a=new G({pageKey:"timecardreport",userId:a,module:"timecard"});this.render(a)},renderBlogreports:function(a){a=new G({pageKey:"blogreport",userId:a,module:"blog"});this.render(a)},renderLog:function(a,b){a||(a=TEAMS.currentUser.id);var c=new G({pageKey:"log#"+b,userId:a,type:b,module:"log"});this.render(c)},wechats:function(){var a=new u({chatType:"unread",
pageKey:"wechats"});this.render(a)},chat:function(a){a=new u({id:a,pageKey:"chats"});this.render(a)},channel:function(a){a=new u({id:a,chatType:"channel",pageKey:"channels"});this.render(a)},unreadfeedback:function(a,b){var c=new w({userId:TEAMS.currentUser.id,module:a,id:b});this.render(c)},renderTasksCalendar:function(a){a||(a=TEAMS.currentUser.id);a=new k({pageKey:"taskscalendar",userId:a});this.render(a)},versioninfo:function(a){a=new H({pageKey:"versioninfo",type:a});this.top&&this.top.renderNavUrl();
this.render(a)},renderCalendar:function(a){a=new E({userId:a});this.render(a)},renderForms:function(a,b,c){a||(a=TEAMS.currentUser.id);var d=new S({type:b,userId:a,formId:c});this.top&&this.top.renderNavUrl(a,function(){d.renderType()});this.render(d)},print:function(a,b){var c=new F({pageKey:b,id:a});this.render(c)},invitation:function(){var a=new l({type:"invitation"});this.render(a)},showCrmPage:function(a){var b=this;window.clickedCrmModule=!0;if(window.loadedCrmModule){b.lastPage&&(b.lastPage.mainView&&
b.lastPage.mainView.remove(),b.lastPage.remove(),null==b.lastPage);if(!b.crmApp){var c=h("crm/CrmApp");b.crmApp=new c}b.crmApp.showPage(a,b.top,b)}else c="",c="develop"==TEAMS.runMode?TEAMS.service.crm+"/static/js/crm-dev.js":TEAMS.service.crm+"/static/js/crm.js?v\x3d"+TEAMS.version+"\x26time\x3d"+(new Date).getTime(),seajs.use(c,function(){b.lastPage&&(b.lastPage.mainView&&b.lastPage.mainView.remove(),b.lastPage.remove(),null==b.lastPage);if(!b.crmApp){var c=h("crm/CrmApp");b.crmApp=new c}b.crmApp.showPage(a,
b.top,b)})},setConfig:function(a,b){if(b&&TEAMS.userConfig&&a==TEAMS.currentUser.id){for(var c=this.portalModel,d=null,e=!1,f=0;f<TEAMS.userConfig.length;f++)if(d=TEAMS.userConfig[f],"system.menu.display"==d.configKey){e=!0;f=d.configValue;d.configValue=b;f!=b&&c.updateConfigValue(d);break}e||(d={configKey:"system.menu.display",configValue:b},c.saveConfig(d,function(){TEAMS.userConfig.push(d)}))}},getDispalyConfig:function(a,b){if(a==TEAMS.currentUser.id&&TEAMS.userConfig)if(b){var c=new I({pageKey:"portal",
userId:a,channel:b});this.render(c)}else{var d=this._getConfig("system.menu.display",a);if(d){switch(d){case "/blog":this.renderBlog(a);break;case "/workreport":this.renderWorkReport(a);break;case "/workflows":this.renderWorkflowByType(a);break;case "/mainlines":this.mainline(a);break;case "/tasks":this.renderTask(a);break;case "/calendar":this.renderCalendar(a);break;case "/documents":this.documents(a);break;case "/report/taskstatistics":this.renderTaskStatistics(a);break;case "/info/wechat":this.renderInfoByType("wechat");
break;case "/info/wechatservice":this.renderInfoByType("wechatservice");break;case "/forms":this.renderForms(a);break;case "/crms/customer":this.showCrmPage("customer");break;case "/crms/contact":this.showCrmPage("contact");break;case "/crms/saleChance":this.showCrmPage("saleChance");break;case "/crms/production":this.showCrmPage("production");break;default:c=new I({userId:a,pageKey:"portal"}),this.render(c)}ROUTER.navigate(d,{trigger:!1})}else c=new I({userId:a,pageKey:"portal"}),this.render(c)}},
_getConfig:function(a,b){var c=null;return b!=TEAMS.currentUser.id?null:(c=TEAMS.userConfig.find(function(b){return b.configKey==a}))?c.configValue:null},syncData_channel:function(){$.ajax({type:"get",url:"/synchronizeddata/syncData.json",dataType:"json",success:function(a){f.notify("\u66f4\u65b0\u5b8c\u6210")}})}});m.exports=q});
define("teams/core/polling",["teams/utils","teams/core/relogin"],function(h,q,m){h("teams/utils");var f=h("teams/core/relogin"),e={pushlets:[],init:function(){var c=this,b=this.pushlets;$("body").on("click.Polling",function(a){a=new Date;var d=$("body").data("lastActionTime")||a;$("body").data("lastActionTime",a);if(d.getTime()<a.getTime()-1E4)for(a=0;a<b.length;a++)c.reset(b[a])})},register:function(c){c.count=1;c.errorCount=0;this.pushlets.push(c);this.start(c);c.started=!0},reset:function(c){if(c.started){var b=
this;clearTimeout(c.timer);c.count=1;setTimeout(function(){b.start(c)},3E3)}},destory:function(c){var b=this.pushlets.find(function(a){return a.id==c});b.timer&&clearTimeout(b.timer);this.pushlets.remove(function(a){return a.id==c})},start:function(c){c.timer&&clearTimeout(c.timer);var b=this,a=c.count,d=function(){c.count++;var d=setTimeout(function(){b.start(c)},5>a?45E3*a:45E3*(a-3)*a);c.timer=d},e=c.param?c.param:{};e.count=a;$.ajax({type:"get",global:!1,url:c.url,dataType:"json",data:e,success:function(a){a.actionMsg&&
-1==a.actionMsg.code?b.relogin&&a.actionMsg&&-1==a.actionMsg.code&&((new f({currentUser:TEAMS.currentUser})).render(),b.relogin=!1):(c.callback&&c.callback(a),c.errorCount=0,c.lastActionTime=new Date,b.relogin=!0,d())},error:function(a,b,e){c.errorCount++;3>c.errorCount&&d()}})}};m.exports=function(){e.init();return e}});
define("teams/core/main",["teams/core/polling","teams/core/setting","teams/core/router"],function(h){var q=h("teams/core/polling"),m=h("teams/core/setting"),f=h("teams/core/router"),q=new q;window.POLLING=q;m=new m;window.SETTING=m;var e=new f;window.ROUTER=e;Backbone.history.start({pushState:!0});$("body").on("click",".router",function(c){c.preventDefault();(c=$(this).attr("href"))&&"#"!=c&&($(".modal").trigger("click"),e.navigate(c,{trigger:!0}))});window.clickedCrmModule||(f="",f="develop"==TEAMS.runMode?
TEAMS.service.crm+"/static/js/crm-dev.js":TEAMS.service.crm+"/static/js/crm.js?v\x3d"+TEAMS.version,h.async(f))});
define("teams/core/page",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){this.el="#mainContainer"},render:function(){console.error("you need to rewrite the method : render")},renderSubview:function(){console.error("you need to rewrite the method : renderSubview")},_render:function(e){$(".modal-backdrop,.modal").remove();e&&($(e).parents("aside.aside").find(".active").removeClass("active"),$(e).addClass("active"),$("body").find(".aside-nav").data("nav")&&
$(".aside-nav\x3eli\x3eul").find(".active").parents(".sub-nav").show().prev().addClass("on"),$("body").trigger("sideNav"));this.mainView.render()},_renderSubview:function(){var e=this;if(this.mainView.subView=this.subView)this.subView.on("all",function(c,b){e.trigger(c,b)}),this.subView.render()},initLayout:function(e,c){$(this.el);"portal"==this.pageActive?$("body").find("#smwx_box").addClass("hide"):$("body").find("#smwx_box").removeClass("hide");$("body").trigger("slideClose");var b=!1,a="j_modnav-"+
this.pageActive;$("#navigation .j_nav_ul li").removeClass("active");for(var d=$("#navigation .j_nav_ul .j_baseautolis li"),g=0,h=d.length;g<h;g++)if($(d[g]).find("a").hasClass(a)){b=!0;break}b?($("#navigation").find(".j_modnav-"+this.pageActive).parent().addClass("active"),$("#navigation .j_activeli").empty()):(b=$(".j_pageActive").find(".j_modnav-"+this.pageActive).clone(),b.find("span").eq(1).remove(),$("#navigation .j_activeli").addClass("active").html(b||""));null==this.pageActive?$("#navigation .j_activeli,#navigation .j_homeli").removeClass("active"):
"portal"==this.pageActive?($("#navigation .j_activeli").removeClass("active"),$("#navigation .j_homeli").addClass("active")):($("#navigation .j_activeli").addClass("active"),$("#navigation .j_homeli").removeClass("active"));this.browserTit();this.template&&($("#mainContainer").html(f.template(this.template,e)),TEAMS.blogUser&&c&&c(),TEAMS.noSubordinates&&$("#mainContainer").find(".j_subordinates,.j_subordinate").remove(),null!=this.userId&&this.userId!=TEAMS.currentUser.id&&$("#mainContainer").find(".aside-nav\x3eli").not(":first").remove());
0<$(".aside-nav-scroll:not(.mCustomScrollbar)").length&&f.layout(".aside-nav-scroll",[{gotoTopButton:!1}])},browserTit:function(){var e,c=$(".j_pageActive").find(".j_modnav-"+this.pageActive+" span:eq(0)").text()||"eteams";oldbt=document.title;e=oldbt.slice(oldbt.indexOf(" - "));c&&(document.title="portal"==this.pageActive||null==this.pageActive?"eteams"+e:c+e);if(this.isPrintPage)switch(this.pageKey){case "flow":document.title="\u5ba1\u6279\u6253\u5370"+e;break;case "task":document.title="\u4efb\u52a1\u6253\u5370"+
e;break;case "workreport":document.title="\u62a5\u544a\u6253\u5370"+e}},remove:function(){this.off();this.undelegateEvents();this.subView&&(this.subView.off(),this.subView.remove(),this.subView=null);this.mainView&&(this.mainView.off(),this.mainView.remove(),this.mainView=null)}});m.exports=h});define("teams/core/setting",function(h,q,m){var f={init:function(){this.setLocale("zh_CN")},setLocale:function(e){bootbox.setLocale(e)}};m.exports=function(){f.init();return f}});
define("teams/core/relogin",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.View.extend({initialize:function(e){$("body").append(f.template("base.relogin"));this.currentUser=e.currentUser},delegateEvents:function(){var e=this;$("#relogin").off(".relogin");$("#relogin").on("hidden.bs.modal.relogin",function(){e.remove()});$("#relogin").on("keydown.relogin","#username",function(c){13==c.keyCode&&$("#relogin #btn-submit").trigger("click")});$("#relogin").on("keydown.relogin","#password",
function(c){13==c.keyCode&&$("#relogin #btn-submit").trigger("click")});$("#relogin").on("click.relogin","#btn-submit",function(c){if($("#relogin #login-div").hasClass("hide"))e.initsession(e.tgt);else{c=/^([A-Za-z0-9_\.-]+)@([\dA-Za-z\.-]+)\.([A-Za-z\.]{2,6})$/;var b=$.trim($("#relogin #username").val()),a=$.trim($("#relogin #password").val());if(""==b&&""==a)return $("#relogin #message").html("\u8d26\u53f7\u548c\u5bc6\u7801\u5747\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(""==b)return $("#relogin #message").html("\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a"),
!1;if(""==a)return $("#relogin #message").html("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(0<=b.indexOf("@")&&!c.test(b))return $("#relogin #message").html("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"),!1;$.ajax({type:"post",async:!1,crossDomain:!0,dataType:"jsonp",url:TEAMS.passportUrl+"/rest/login",jsonpCallback:"success",data:{username:b,password:a,service:TEAMS.eteamsHost},success:function(a){a.result&&a.st?($("#relogin").modal("hide"),e.initserviceTicket(a.st)):$("#relogin #message").html(a.message)}})}})},
render:function(){$("#relogin").modal();this.loginCas()},loginCas:function(){var e=this;$.ajax({type:"get",async:!1,crossDomain:!0,dataType:"jsonp",url:TEAMS.passportUrl+"/relogin",jsonpCallback:"success",success:function(c,b,a){c&&"failure"==c.result?($("#relogin #login-div").removeClass("hide"),TEAMS.currentUser.loginAccount?$("#relogin #username").val(TEAMS.currentUser.loginAccount):TEAMS.currentUser.email?$("#relogin #username").val(TEAMS.currentUser.email):TEAMS.currentUser.mobile&&$("#relogin #username").val(TEAMS.currentUser.mobile)):
e.tgt=c.result},error:function(c,b,a){console.log(a)}})},initsession:function(e){$.ajax({type:"get",url:"/relogin?tgtId\x3d"+e,dataType:"json",success:function(c){c&&c.succeed?($("#relogin").modal("hide"),ETEAMSID=c.ETEAMSID,f.notify("\u767b\u5f55\u6210\u529f")):c&&c.message&&$("#relogin #message").html(c.message)}})},initserviceTicket:function(e){$.ajax({type:"post",url:"/relogin?serviceTicket\x3d"+e,dataType:"json",success:function(c){c&&c.succeed?(ETEAMSID=c.ETEAMSID,$("#relogin").modal("hide"),
f.notify("\u767b\u5f55\u6210\u529f")):c&&c.message&&$("#relogin #message").html(c.message)}})},remove:function(){$("#relogin").off(".relogin");$("#relogin").remove()}});m.exports=h});
define("teams/core/router",["teams/core/app"],function(h,q,m){var f=h("teams/core/app");h=Backbone.Router.extend({initialize:function(e){this.app=new f},routes:{"":"home",home:"home","home/:userId":"home",portal:"home","portal/:userId":"home",";jsessionid\x3d:session":"home_session",tasks:"task_tasks","tasks/":"task_tasks","tasks/:userId/:type":"tasks_nav","tasks/calendar":"task_calendar","tasks/calendar/:userId":"task_calendar","tasks/:userId":"task_tasks","tasks/:userId/:id":"task_tasks",workreport:"workReport",
"workreport/:type":"workReport_type","workreport/:type/:id":"workReport_type","workreport/unreadComment":"workReport_unreadComment","workreport/unreadComment/:id":"workReport_unreadComment","workreport/unreadReplay":"workReport_unreadReplay","workreport/unreadReplay/:id":"workReport_unreadReplay","workreport/:userId":"workReport","workreport/:userId/:year/:type":"workReport","workreport/:userId/:year/:type/:serialNumber":"workReport","search/keywords/:keywords":"search_keywords","search/keywords/:keywords/:module":"search_keywords",
"search/keywords/:keywords/:module/:objId":"search_keywords","feed/watched":"feed_watched","feed/watched/:module":"feed_watched","feed/watched/:module/:objId":"feed_watched","feed/unfinish":"feed_unfinish","feed/unfinish/:module":"feed_unfinish","feed/unfinish/:module/:objId":"feed_unfinish","feed/:type":"feed_newitem","feed/:type/:module":"feed_newitem","feed/:type/:module/:objId":"feed_newitem","search/mainline/:searchId":"search_mainline","search/mainline/:searchId/:module":"search_mainline","search/mainline/:searchId/:module/:objId":"search_mainline",
"search/tag/:searchId":"search_tag","search/tag/:searchId/:module":"search_tag","search/tag/:searchId/:module/:objId":"search_tag",blog:"blog","blog/":"blog","blog/:userId":"blog","blog/:userId/:type":"blog","blog/:userId/:type/:id":"blog","blog/:userId/:type/:id/:param":"blog","users/myfollow":"user_myfollow","users/myfollow/:id":"user_myfollow","users/myfollow/:id/:type":"user_myfollow",organization:"user_organization","organization/:id":"user_organization","organization/:id/:type":"user_organization",
"organization/:id/:type/:operation":"user_organization","organization/:id/:type/:operation/:userOrg":"user_organization","organization/:id/:type/:operation/:userOrg/:creator":"user_organization",info:"info","info/:type":"info_navigation",profile:"profile","profile/:id":"profile","profile/:id/:type":"profile",messages:"messages","messages/wechat":"messagesWechat","messages/wechat/:userId":"messagesWechatChat","messages/wechat/channel/:channelId":"messagesWechatChannel","messages/follow":"messagesFollow",
"messages/applyJoin":"messagesApplyJoin","messages/shareJoin":"messagesShareJoin","messages/applyReceive":"messagesApplyReceive","messages/remind":"messagesRemind",mainlines:"mainline",mainline:"mainline","mainlines/:userId":"mainline","mainlines/:userId/:id":"mainline","mainlines/:userId/:filterType":"mainline","mainlines/:userId/:filterType/:id":"mainline","mainline/link/:userId/:id":"mainlinelink","mainline/link/:userId/:id/:mainlineType":"mainlinelink","mainline/link/:userId/:id/:mainlineType/:filterType":"mainlinelink",
"mainline/link/:userId/:id/:mainlineType/:filterType/:module":"mainlinelink","mainline/link/:userId/:id/:mainlineType/:filterType/:module/:objId":"mainlinelink",tag:"tag","tag/:type/:id":"tag","report/taskstatistics":"task_statistics","report/task":"task_reports","report/task/:userId":"task_reports","report/flow":"flow_reports","report/flowstat":"flowStat","report/logs":"logs","report/logs/:type":"logs","report/logs/:type/:employeeId":"logs","report/timecard":"timecard","report/timecard/:id":"timecard",
"report/blog":"blog_reports","report/workhour":"workhour",workdays:"workdays",documents:"documents","documents/":"documents","documents/:userId":"documents","documents/:userId/:type/":"document","documents/:userId/:id":"documents","documents/:userId/:type/:folderId":"document",workflows:"workflows_navigation","workflows/":"workflows_navigation","workflows/:userId":"workflows_navigation","workflows/:userId/":"workflows_navigation","workflows/:userId/:type":"workflows_navigation","workflows/:userId/:type/":"workflows_navigation",
"workflows/:userId/:type/:formId":"workflows_navigation","workflows/:userId/:type/:formId/":"workflows_navigation","wechat/:id":"wechats_chat","wechat/channel/:id":"wechats_channel",wechat:"wechats","wechat/":"wechats","comment/unreadall":"unread_feedback","comment/unreadall/":"unread_feedback","comment/unreadall/:module/:id":"unread_feedback",versioninfo:"versioninfo","versioninfo/":"versioninfo","calendar/:userId":"calendar","calendar/":"calendar",calendar:"calendar",forms:"forms","forms/":"forms",
"forms/:userId":"forms","forms/:userId/":"forms","forms/:userId/:type":"forms","forms/:userId/:type/":"forms","forms/:userId/:type/:formId":"forms","forms/:userId/:type/:formId/":"forms","print/:id/:module":"print",crms:"showCrmPage","crms/:param":"showCrmPage",crmapp:"showCrmPage","crmapp/:param":"showCrmPage","synchronizeddata/syncData":"syncData_channel"},home:function(e){this.app.renderHome(e)},home_session:function(){this.home()},task_tasks:function(e,c){this.app.renderTask(e,c)},tasks_nav:function(e,
c){this.app.renderTaskByType(e,c)},task_calendar:function(e){this.app.renderTasksCalendar(e)},task_report:function(e){this.app.renderTaskreport(e)},task_reports:function(e){this.app.renderTaskreports(e)},task_statistics:function(e){this.app.renderTaskStatistics(e)},blog_reports:function(e){this.app.renderBlogreports(e)},flow_reports:function(){this.app.renderFlowreports()},flowStat:function(){this.app.renderFlowStat()},workReport:function(e,c,b,a){this.app.renderWorkReport(e,c,b,a)},workReport_type:function(e,
c){isNaN(e)?this.app.renderWorkReportType(e,c):this.app.renderWorkReport(e)},workReport_unreadComment:function(e){this.app.renderWorkReportType("comment",e,!0)},workReport_unreadReplay:function(e){this.app.renderWorkReportType("replay",e,!0)},search_keywords:function(e,c,b){this.app.renderSearch("keywords",e,c,b)},feed_watched:function(e,c){this.app.renderWatched(e?e:"all",c)},feed_unfinish:function(e,c){this.app.renderUnfinish(e?e:"all",c)},feed_newitem:function(e,c,b){this.app.renderHome(e)},search_mainline:function(e,
c,b){this.app.renderSearch("mainline",e,c,b)},search_tag:function(e,c,b){this.app.renderSearch("tag",e,c,b)},blog:function(e,c,b,a){this.app.renderBlog(e,c,b,a)},user_myfollow:function(e,c){this.app.renderMyfollow(e,c)},user_organization:function(e,c,b,a,d){this.app.renderOrganization(e,c,b,a,d)},profile:function(e,c){this.app.renderProfile(e,c)},info:function(){this.app.renderInfo()},info_navigation:function(e){this.app.renderInfoByType(e)},messages:function(e){this.app.messages(e)},messagesRemind:function(){this.app.renderHome("remind")},
messagesWechat:function(){this.app.renderHome("portal")},messagesWechatChat:function(e){this.app.messages("wechat",{userId:e,chatType:"chat"})},messagesWechatChannel:function(e){this.app.messages("wechat",{channelId:e,chatType:"channel"})},messagesFollow:function(){this.app.renderHome("follow")},messagesApplyJoin:function(){this.app.renderHome("applyJoin")},messagesShareJoin:function(){this.app.renderHome("shareJoin")},messagesApplyReceive:function(){this.app.renderHome("applyReceive")},mainline:function(e,
c,b){this.app.mainline(e,c,b)},mainlinelink:function(e,c,b,a,d,f){this.app.mainlinelink(e,c,b,a,d,f)},tag:function(e,c){this.app.tag(e,c)},showCrmPage:function(e){e||(e="customer");this.app.showCrmPage(e)},logs:function(e,c){this.app.renderLog(c,e)},timecard:function(e){this.app.renderTimecard(e)},workhour:function(){this.app.renderWorkhour()},workdays:function(){this.app.renderWorkdays()},documents:function(e,c,b){e=e?e:TEAMS.currentUser.id;this.app.documents(e,c,b)},document:function(e,c,b){e=e?
e:TEAMS.currentUser.id;this.app.documents(e,null,c,b)},workflows_navigation:function(e,c,b){this.app.renderWorkflowByType(e,c,b)},wechats_chat:function(e){this.app.chat(e)},wechats_channel:function(e){this.app.channel(e)},wechats:function(){this.app.wechats()},unread_feedback:function(e,c){this.app.unreadfeedback(e,c)},versioninfo:function(e){this.app.versioninfo(e)},calendar:function(e){this.app.renderCalendar(e)},forms:function(e,c,b){this.app.renderForms(e,c,b)},print:function(e,c){this.app.print(e,
c)},syncData_channel:function(){this.app.syncData_channel()}});m.exports=h});
define("teams/doc/documentnewview","teams/utils teams/component/typeahead teams/doc/documentmodel teams/component/shareallmultiselect teams/component/guideview teams/component/sharemodel".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/doc/documentmodel"),c=h("teams/component/shareallmultiselect"),b=h("teams/component/guideview"),a=h("teams/component/sharemodel");h=Backbone.View.extend({el:"",id:"",sids:"",newtag:!0,callbackCreate:{},entityIdArr:"",
initialize:function(d){this.userId=d.userId;this.mainlineId=d.mainlineId;this.folder=d.folder;this.callbackCreate=d.callback;this.model=new e(d);this.shareModel=new a(d);this.el=d.container?d.container:"#documentnew";$("body").append(f.template("document.documentnew"));this.guideview=new b({module:"document",parentEl:this.el});this.multiSelectView=new c({module:d.module,shareContainer:"#editShare",parentEl:this.el,groupContainer:"#shareentrys",depContainer:"#shareentrys",userContainer:"#shareentrys",
removeBack:this.removeBack})},render:function(){$("#documentnew").modal("toggle");var a={};a["folder.id"]=this.folder?this.folder.id:null;this.model.getDefaultShare(a,this.initDefaultShare)},initDefaultShare:function(a){if(a.all){var b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"all" data-value\x3d"0" userid\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e';$("#documentnew").find("#shareentrys").append(b)}var c=a.departments;if(c)for(var e=0;e<c.length;e++)b=c[e],b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"department" data-value\x3d"'+
b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentnew").find("#shareentrys").append(b);if(c=a.groups)for(e=0;e<c.length;e++)b=c[e],""==b.name&&(b.name="\u672a\u547d\u540d(\u7fa4\u7ec4)"),b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"group" data-value\x3d"'+b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentnew").find("#shareentrys").append(b);if(a=a.employees)for(e=0;e<a.length;e++)b=a[e],b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"user" data-value\x3d"'+
b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentnew").find("#shareentrys").append(b)},removeBack:function(a){a.parent().remove()},addDefaultShare:function(){if(0!=$(this.el).find("#shareentrys .entity-item").length){var a={},b=this.multiSelectView.getUserIds(),c=this.multiSelectView.getDepartmentIds(),e=this.multiSelectView.getGroupIds();0<$(this.el).find("#shareentrys .entity-item .all").length&&(a.entryType="all");a.shareType="sharer";a.module="document";a.entityIds=
this.entityIdArr;a.sids=b;a.departmentIds=c;a.groupIds=e;f.notify("\u6dfb\u52a0\u9ed8\u8ba4\u5171\u4eab\u4eba\u53ef\u80fd\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85!");this.shareModel.saveShareAll(a,this.saveBack)}},saveBack:function(a){f.notify("\u9ed8\u8ba4\u5171\u4eab\u6dfb\u52a0\u5b8c\u6210!")},delegateEvents:function(){var a=this;$("body").on("keydown.documentnew",function(a){27==a.which&&$("#documentnew").modal("hide")});var b=a.uploader=new plupload.Uploader({runtimes:"html5,flash",file_data_name:"data",
container:a.el,browse_button:a.el+" #documentFiles",max_file_size:"normal"==TEAMS.currentTenant.status?"50mb":"20mb",url:"/km/document.json?ETEAMSID\x3d"+ETEAMSID+"\x26mainlineId\x3d"+a.mainlineId,flash_swf_url:"js/plupload.swf"});b.init();b.bind("FilesAdded",function(c,e){if(5<e.length){f.notify("\u4e00\u6b21\u6700\u591a\u53ef\u4ee5\u4e0a\u4f205\u4e2a\u6587\u4ef6","\u6587\u4ef6\u4e2a\u6570\u8d85\u8fc7\u9650\u5236","error");for(var h=0;h<e.length;h++)b.removeFile(e[h])}else $.each(e,function(a,
b){$("#documentnew-attachments .entity-container").append(f.template("base.newattachment",b))}),c.refresh(),a.guideview.guideTip("share","#editShare",!0)});b.bind("UploadProgress",function(a,b){$("#"+b.id+" i").html(b.percent+"%")});b.bind("Error",function(a,b){-600==b.code&&f.notify("\u53ea\u80fd\u4e0a\u4f20\u6700\u5927\u4e0d\u8d85\u8fc7"+a.settings.max_file_size/1024/1024+"M\u7684\u6587\u4ef6","\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236","error");a.refresh()});b.bind("FileUploaded",function(b,
c,e){b=jQuery.parseJSON(e.response);a.documentId=b.document.id;a.callbackCreate(b.document);a.entityIdArr+=b.document.id+","});b.bind("UploadComplete",function(b,c){f.notify("\u6587\u6863\u4e0a\u4f20\u6210\u529f");$("#documentnew").modal("hide");a.addDefaultShare()});$("#documentnew-attachments .entity-container").on("removeEntity",function(a,c){var d=b.getFile(c);b.removeFile(d)});$("#documentnew-info").off("click",".control-btn").on("click",".control-btn",function(a){$(this).addClass("hide");$(this).prev(".typeahead-wrapper").removeClass("hide");
$(this).prev(".typeahead-wrapper").find(".control-input").focus()});$("#documentnew-info").off("blur",".control-input").on("blur",".control-input",function(a){a=$(this).parents(".typeahead-wrapper");a.data("triger")&&(a.addClass("hide"),a.next(".control-btn").removeClass("hide"))});$("#documentnew-info").off("click",".typeahead-search").on("click",".typeahead-search",function(a){a=$(this).parent(".typeahead-wrapper");a.addClass("hide");a.next(".control-btn").removeClass("hide")});$("#documentnew").off("click",
"#btn-cancle").on("click","#btn-cancle",function(){$("#documentnew").modal("hide")});$("#documentnew").on("hidden.bs.modal",function(){a.remove();a.userId&&ROUTER.navigate("/documents/"+a.userId,{trigger:!1})});$("#documentnew").off("click","#btn-save").on("click","#btn-save",function(){a.newtag=!0;b&&b.files&&0<b.files.length&&!$(this).data("upload")?$(this).data("upload")?f.notify("\u9644\u4ef6\u6b63\u5728\u4e0a\u4f20..."):($(this).data("upload",!0),b.settings.url=a.folder?b.settings.url+"\x26sids\x3d"+
a.sids+"\x26folderId\x3d"+a.folder.id+"\x26folderType\x3d"+a.folder.type:b.settings.url+"\x26sids\x3d"+a.sids,$("#documentnew-attachments .entity-container .attachment").removeClass("entity-item"),b.start()):f.notify("\u8bf7\u70b9\u51fb[\u9009\u62e9\u9644\u4ef6]\u6309\u94ae\u3001\u9009\u62e9\u8981\u4e0a\u4f20\u7684\u9644\u4ef6")})},remove:function(){this.undelegateEvents();this.uploader&&(this.uploader.destroy(),this.uploader=null);$("#documentnew").remove();this.guideview&&(this.guideview.remove(),
this.guideview=null)}});m.exports=h});
define("teams/doc/documentstatisticview",["teams/utils"],function(h,q,m){var f=h("teams/utils");q=Backbone.View.extend({initialize:function(e){this.container=e.container;this.showtitle=e.showtitle;this.module=e.module;this.moduleName=e.moduleName;this.userId=e.userId;this.el="#document-right";this.pageNo=1;this.pageSize=5;this.userId||(this.userId=TEAMS.currentUser.id);e.showReaded&&(this.showReaded=e.showReaded);$(this.container).html(f.template("document.documentstatistic"))},delegateEvents:function(){var e=
this;$(this.el).on("click.documentright",".list-more",function(){e.pageNo++;e.renderSub()});$(window).resize(function(){})},render:function(){var e=this;$(e.el);e.option={tooltip:{trigger:"item",formatter:"{a} \x3cbr/\x3e{b} : {c}"},legend:{orient:"horizontal",x:"center",y:"bottom",borderColor:"#CCC",borderWidth:1,textStyle:{fontFamily:"Arial,Microsoft YaHei,sans-serif"},data:[{name:"\u6211\u521b\u5efa\u7684"},{name:"\u6211\u5171\u4eab\u7684"},{name:"\u5171\u4eab\u7ed9\u6211\u7684"}]},toolbox:{show:!0,
feature:{restore:{show:!0},saveAsImage:{show:!0,name:""}}},series:[{name:"\u6587\u6863\u7edf\u8ba1",type:"pie",center:["50%","40%"],minAngle:20,startAngle:45,radius:["40%","70%"],itemStyle:{normal:{label:{show:!0,formatter:"{c}"},labelLine:{show:!0,length:5}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"15",fontWeight:"bold"}}}},data:[{value:0,name:"\u6211\u521b\u5efa\u7684"},{value:0,name:"\u6211\u5171\u4eab\u7684"},{value:0,name:"\u5171\u4eab\u7ed9\u6211\u7684"}]}]};e.load(function(c){h.async("https://static.eteams.cn/js/echarts.min.js",
function(){e.tc=echarts.init($("#mydocument")[0]);var b=e.option.series[0].data,a=$(e.el).find("#documentTitle"),d=void 0!=typeof c.mine,f=void 0!=typeof c.shareToMe,h=void 0!=typeof c.shareToOther,n=TEAMS.currentUser.name+"\u6587\u6863\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]";d&&f&&h&&(0<c.mine||0<c.shareToMe||0<c.shareToOther)?(b[0].value=c.mine,b[1].value=c.shareToOther,b[2].value=c.shareToMe,e.option.toolbox.feature.saveAsImage.name=n):(b[0].value=1,b[1].value=1,b[2].value=1,
e.option.toolbox.feature.saveAsImage.name=n+"\u793a\u4f8b",a.text("\u6587\u6863\u7edf\u8ba1\u793a\u4f8b"));e.tc.setOption(e.option);$("#mydocument").show()})});e.option.toolbox.feature.saveAsImage.name="\u6587\u6863\u7edf\u8ba1["+Date.create().format("{yyyy}-{MM}-{dd}")+"]";e.renderSub()},resize:function(){this.tc&&this.tc.resize();this.tc1&&this.tc1.resize()},renderSub:function(){var e=$(this.el);$.ajax({type:"get",url:"/documents/subChartData.json",dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize,
userId:this.userId},success:function(c){c=c.chartPage;c.hasNext?e.find(".list-more").removeClass("hide"):e.find(".list-more").addClass("hide");c=c.result;if(1!=TEAMS.noSubordinates){e.find("#document-subordinates").removeClass("hide-im");var b=e.find("#empList");$(c).each(function(a,c){var e=$(".j_eitem").clone();c.avatar&&e.find(".avatar").attr("src","/base/download/"+c.avatar);e.find(".avatar").attr("userid",c.subId);e.find(".j_name").attr("userid",c.subId);e.find(".j_name").text(c.subName);e.find(".j_count").text(c.docCount);
b.append(e.html())})}}})},load:function(e){$.ajax({type:"get",url:"/documents/chartData.json",dataType:"json",data:{userId:this.userId},success:function(c){e&&e(c)}})},remove:function(){try{this.tc&&(this.tc.clear(),this.tc.dispose()),this.tc1&&(this.tc1.clear(),this.tc1.dispose())}catch(e){}}});m.exports=q});
define("teams/doc/documentsettingview",["teams/utils","teams/doc/documentmodel","teams/component/typeahead","teams/component/shareallmultiselect","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/doc/documentmodel");h("teams/component/typeahead");var c=h("teams/component/shareallmultiselect"),b=h("teams/component/sharemodel");h=Backbone.View.extend({synUserIds:"",synDepartmentIds:"",synGroupIds:"",synAll:!1,initialize:function(a){this.userId=a.userId;this.folder=a.folder;
this.el=a.container?a.container:"#documentsetting";this.model=new e(a);$("body").append(f.template("document.documentsetting"));this.shareModel=new b({module:"document"});this.multiSelectView=new c({module:a.module,shareContainer:"#editShare",parentEl:this.el,groupContainer:"#shareentrys",depContainer:"#shareentrys",userContainer:"#shareentrys",removeBack:this.removeBack})},render:function(){$("#documentsetting").modal("toggle");var a={};a["folder.id"]=this.folder.id;this.model.getDefaultShare(a,
this.createShareLink);a=$("#documentsetting").find("#share-component .control-label");a.next().removeClass("controls");a.remove()},delegateEvents:function(){var a=this;$(a.el).off("click","#btn-save").on("click","#btn-save",function(){var b="";$(a.el).find("#sharelist .entity-item a").each(function(){b+=$(this).data("value")+","});var c={};c["folder.id"]=a.folder.id;var e={},b=a.multiSelectView.getUserIds(),h=a.multiSelectView.getDepartmentIds(),k=a.multiSelectView.getGroupIds(),r="";0<$(a.el).find("#shareentrys .entity-item .all").length&&
(r="all");e.USER=b;e.DEPARTMENT=h;e.ALL=r;e.GROUP=k;c["documentSetting.property"]=JSON.stringify(e);a.model.saveDefaultShare(c,function(a){f.notify("\u4fdd\u5b58\u6210\u529f")})});$(a.el).off("click","#btn-save-syn").on("click","#btn-save-syn",function(){var b="";$(a.el).find("#sharelist .entity-item a").each(function(){b+=$(this).data("value")+","});f.confirm("\u6b64\u64cd\u4f5c\u8017\u65f6\u4f1a\u5f88\u957f\uff0c\u662f\u5426\u7ee7\u7eed?",function(b){if(b){var c={};c["folder.id"]=a.folder.id;c.saveToFile=
$("#saveToFile").is(":checked");c.saveToChildren=$("#saveToChildren i").hasClass("icon-checkbox-checked");b={};var d=a.multiSelectView.getUserIds(),e=a.multiSelectView.getDepartmentIds(),h=a.multiSelectView.getGroupIds(),p="";0<$(a.el).find("#shareentrys .entity-item .all").length&&(p="all");b.USER=d;b.DEPARTMENT=e;b.GROUP=h;b.ALL=p;c["documentSetting.property"]=JSON.stringify(b);a.model.saveSynChildrenDefaultShare(c,function(b){if(b.docIds){var d="\u5f00\u59cb\u540c\u6b65...";c.saveToChildren&&b.existChildFolder&&
(d="\u5b50\u76ee\u5f55\u9ed8\u8ba4\u5171\u4eab\u4eba\u8bbe\u7f6e\u5b8c\u6210,"+d);f.notify(d);a.entityIdArr=b.docIds;a.resetShareAll()}else c.saveToChildren&&b.existChildFolder?f.notify("\u5b50\u76ee\u5f55\u9ed8\u8ba4\u5171\u4eab\u4eba\u8bbe\u7f6e\u5b8c\u6210"):c.saveToChildren&&!b.existChildFolder?f.notify("\u8be5\u6587\u4ef6\u5939\u4e2d\u4e0d\u5b58\u5728\u5b50\u76ee\u5f55"):c.saveToChildren?f.notify("\u5f53\u524d\u6587\u4ef6\u5939\u5185\u5bb9\u4e3a\u7a7a\uff0c\u4e0d\u9700\u8981\u540c\u6b65\u3002"):
f.notify("\u8be5\u6587\u4ef6\u5939\u4e2d\u65e0\u6587\u6863")})}})});$(a.el).off("click","#saveToChildrenDiv").on("click","#saveToChildrenDiv",function(a){$(this).find("i").hasClass("icon-checkbox-checked")?$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked"):$(this).find("i").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked")});$(a.el).off("click",".document-setting-btn").on("click",".document-setting-btn",function(){if(!$(this).hasClass("active")){$(this).addClass("active").siblings(".document-setting-btn").removeClass("active");
var b=$(this).attr("tab");$(a.el).find("div[id^\x3ddocument-setting-tab]").hide();$(a.el).find("#document-setting-tab"+b).show();if(a["documentSettingTab"+b])a["documentSettingTab"+b]()}});$(a.el).on("hidden.bs.modal",function(){a.remove()});$("body").on("keydown.documentsetting",function(b){27==b.which&&$(a.el).modal("hide")})},documentSettingTab1:function(){},documentSettingTab2:function(){var a=this;$(a.el).find("#synShare").html("");a.synUserIds="";a.synDepartmentIds="";a.synAll="";var b={};b["folder.id"]=
a.folder.id;a.model.getDefaultShare(b,function(b){if(b.all){var c='\x3cspan class\x3d"entity-item" style\x3d"float:left" undeletable\x3d"true"\x3e \x3ca class\x3d"all" data-value\x3d"0" userid\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e';$("#documentsetting").find("#synShare").append(c);a.synAll=!0}var d=b.departments;if(d)for(var e=0;e<d.length;e++){var f=d[e],c='\x3cspan class\x3d"entity-item" style\x3d"float:left" undeletable\x3d"true"\x3e \x3ca class\x3d"department" data-value\x3d"'+f.id+
'" userid\x3d"'+f.id+'"\x3e'+f.name+"\x3c/a\x3e\x3c/span\x3e";$("#documentsetting").find("#synShare").append(c);a.synDepartmentIds+=f.id;e<d.length-1&&(a.synDepartmentIds+=",")}if(d=b.groups)for(e=0;e<d.length;e++)f=d[e],c='\x3cspan class\x3d"entity-item" style\x3d"float:left" undeletable\x3d"true"\x3e \x3ca class\x3d"department" data-value\x3d"'+f.id+'" userid\x3d"'+f.id+'"\x3e'+f.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentsetting").find("#synShare").append(c),a.synGroupIds+=f.id,e<d.length-1&&(a.synGroupIds+=
",");if(b=b.employees)for(e=0;e<b.length;e++)d=b[e],c='\x3cspan class\x3d"entity-item" style\x3d"float:left" undeletable\x3d"true"\x3e \x3ca class\x3d"user usercard-toggle" data-value\x3d"'+d.id+'" userid\x3d"'+d.id+'"\x3e'+d.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentsetting").find("#synShare").append(c),a.synUserIds+=d.id,e<b.length-1&&(a.synUserIds+=",")})},resetShareAll:function(){if(""==this.synAll&&""==this.synDepartmentIds&&""==this.synGroupIds&&""==this.synUserIds)f.notify("\u8bf7\u5148\u8bbe\u7f6e\u9ed8\u8ba4\u5171\u4eab\u4eba,\u518d\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c!");
else{var a={};this.synAll&&(a.entryType="all");a["map.isdDelAllShare"]=!0;a["map.sendCheck"]=!0;a.shareType="sharer";a.module="document";a.entityIds=this.entityIdArr;a.sids=this.synUserIds;a.departmentIds=this.synDepartmentIds;a.groupIds=this.synGroupIds;$("body").append(f.template("component.processbar"));$("#processModal").find("#js_title").html("\u6b63\u5728\u540c\u6b65\u5171\u4eab\u4eba\u5458\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85!");$(this.el).off("click.batchselect","#processModalClose").on("click.batchselect",
"#processModalClose",function(){$("#processModal").remove()});this.processBar();this.shareModel.saveShareAll(a,this.saveBack)}},saveBack:function(a){clearInterval(window.processBarTimer);$("#processModal").remove();a.msg?f.notify(a.msg):f.notify("\u540c\u6b65\u5b8c\u6210!")},processBar:function(){var a={},b=this;window.processBarTimer=window.setInterval(function(){b.shareModel.getProcess(a,b.updateProcess)},1E3)},updateProcess:function(a){var b=a.map.now/a.map.count;$("#processModal").find("#processNum").css("width",
100*b.toFixed(2)+"%");$("#processModal").find("#processNum").html(a.map.now+"/"+a.map.count);if(1<=b||!a.map.count)clearInterval(window.processBarTimer),$("#processModal").remove()},createShareLink:function(a){if(a.all){var b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"all" data-value\x3d"0" userid\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e';$("#documentsetting").find("#shareentrys").append(b)}var c=a.departments;if(c)for(var e=0;e<c.length;e++)b=c[e],b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"department" data-value\x3d"'+
b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentsetting").find("#shareentrys").append(b);if(c=a.groups)for(e=0;e<c.length;e++)b=c[e],""==b.name&&(b.name="\u672a\u547d\u540d(\u7fa4\u7ec4)"),b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"group" data-value\x3d"'+b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentsetting").find("#shareentrys").append(b);if(a=a.employees)for(e=0;e<a.length;e++)b=a[e],b='\x3cspan class\x3d"entity-item"\x3e \x3ca class\x3d"user usercard-toggle" data-value\x3d"'+
b.id+'" userid\x3d"'+b.id+'"\x3e'+b.name+"\x3c/a\x3e\x3c/span\x3e",$("#documentsetting").find("#shareentrys").append(b)},hasUser:function(a,b){var c=!1;b.find("a").each(function(){var b=$(this).data("value");parseInt(b)==parseInt(a)&&(c=!0)});return c},removeBack:function(a){a.parent().remove()},remove:function(){$(this.el);$(this.el).off(".documentsetting");$("#documentsetting").remove()}});m.exports=h});
define("teams/doc/documentversionmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){},search:function(f,e){$.ajax({type:"post",url:"/km/documentversion/search.json",data:f,success:function(c){e&&e(c)}})},getVersionById:function(f,e){$.ajax({type:"post",url:"/km/documentversion/showVersion.json",data:f,success:function(c){e&&e(c)}})},restoreVersion:function(f,e){$.ajax({type:"post",url:"/km/documentversion/restoreVersion.json",data:f,success:function(c){e&&e(c)}})}});m.exports=
h});
define("teams/doc/documentlistview","teams/utils teams/component/sharemodel teams/component/watchmodel teams/component/shareoutmodel teams/doc/documentmodel teams/component/filter teams/component/remind teams/component/userselector teams/component/batchselector teams/doc/documentnewview teams/doc/documentsettingview teams/doc/documentmoveview teams/component/validation teams/doc/documentstatisticview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/sharemodel"),c=h("teams/component/watchmodel"),b=
h("teams/component/shareoutmodel"),a=h("teams/doc/documentmodel"),d=h("teams/component/filter"),g=h("teams/component/remind"),l=h("teams/component/userselector"),n=h("teams/component/batchselector"),k=h("teams/doc/documentnewview"),r=h("teams/doc/documentsettingview"),p=h("teams/doc/documentmoveview"),s=h("teams/component/validation"),u=h("teams/doc/documentstatisticview");h=Backbone.View.extend({el:"#j_mainscroll",initialize:function(d){this.id=d.id;this.userId=d.userId;this.folderId=d.folderId;
this.type=d.type;this.title=d.title;this.model=new a(d);this.watchModel=new c;this.shareOutModel=new b;this.shareModel=new e({entityId:"",module:""});$(this.el).html(f.template("document.documentlist",{userId:this.userId}));this.canCrtComFol=!1;this.canCrtDoc=this.canCrtPriFol=!0;this._renderType()},render:function(){this.foldersHome(this.type,this.folderId,"refresh");this.id&&"new"==this.id&&$("#document-create").trigger("click");this.subView=new u({container:"#document-statistic",showtitle:"0",
module:"document",moduleName:"\u6587\u6863",userId:this.userId,showReaded:"1"});this.subView.render();f.layout(".j_mainscroll");var a=f.getCurParaJson();"true"==a.shareOut&&(ROUTER.navigate("/documents/"+this.userId+"/mine/",{trigger:!1}),f.confirm("\u662f\u5426\u786e\u5b9a\u5c06\u6b64\u5206\u4eab\u6587\u6863\u4fdd\u5b58\u81f3\x3cbr\x3e"+TEAMS.currentTenant.tenantName+"\x3cspan style\x3d'color:red'\x3e"+TEAMS.currentUser.loginAccount+"\x3c/span\x3e\u4e0b?",function(b){b&&(window.location.href="/km/document/shareOutCopy?id\x3d"+
a.shareOutId+"\x26pwd\x3d"+a.pwd+"\x26resultMap.isSure\x3dtrue")}));if("info"==a.view&&a.id){var b=a.id;$("body").trigger("slideOpen",{module:"document",id:b})}},delegateEvents:function(){var a=this.model,b=this,c=$(this.el);$("body").on("click.DocumentList",".goto-top",function(a){f.gotoTop("#j_mainscroll")});c.on("click.DocumentList",".j_moredocument",function(){a.pageNo=parseInt(a.pageNo)+1;b.search(b.type,b.folder,b.createType)});$("body").off("click.DocumentList",".j_check-all-doc").on("click.DocumentList",
".j_check-all-doc",function(a){a.stopPropagation();a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$(".document-list span.checkbox").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).parent("li").removeClass("selected")}):$(".document-list span.checkbox").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).parent("li").addClass("selected")});$(".main .j_check-all-doc").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");
$("body").trigger("batch")});$("body").on("mouseenter.DocumentList","#document-filter",function(a){$(this).addClass("open");var c=$(this).attr("data-toggle");b.filter||(b.filter=new d({el:c,module:"document",targetObj:$(this),userId:b.userId,scroll:!0}),b.filter.render(a));a=setTimeout(function(){$(c).parents(".dropdown-filter").slideDown("fast")},300);$(this).data("showTimer",a)}).on("mouseleave.DocumentList","#document-filter",function(a){$(this).removeClass("open");a=$(this).attr("data-toggle");
var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).parents(".dropdown-filter").slideUp(100)}).on("filter.DocumentList","#document-filter",function(c){a.pageNo=1;b.search(b.type,b.folder,b.createType)});c.on("click.DocumentList",".filterType",function(c){$(".filterType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#document-type").attr("data-entity",$(this).attr("data-entity"));b.filter&&b.filter.resetArray();$("#document-keywords").val("");
$("#document-filter").data("data-filter","");$("#document-order").attr("data-entity","").html('\u6392\u5e8f\x3cb class\x3d"caret"\x3e\x3c/b\x3e');a.pageNo=1;b.search(b.type,b.folder,b.createType)});$("body").on("click.DocumentList",".orderType",function(c){a.pageNo=1;$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#document-order").attr("data-entity",$(this).attr("data-entity"));b.search(b.type,b.folder,b.createType)});$("body").on("search.DocumentList",
"#document-keywords",function(d){a.pageNo=1;b.search("all");c.find("#folder-list").hide();c.find("#navbar").parent().hide();b.canCrtComFol=!1;b.canCrtPriFol=!1});$("body").on("keyup.DocumentList","#document-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});$("body").on("click.DocumentList","li.search .icon-search",function(a){$("body").find("#document-keywords").trigger("search")});$("body").on("click.DocumentList",".document-watchs",function(a){if(0<
b.findSelectedFolder())f.notify("\u6587\u4ef6\u5939\u4e0d\u80fd\u5173\u6ce8,\u8bf7\u91cd\u65b0\u9009\u62e9");else{var c=b.findSelectedLi();0<c.length?b.watchModel.watch('{"module":"document","ids":"'+c+'"}',function(a){f.notify("\u6279\u91cf\u5173\u6ce8\u6210\u529f");b.updateFastKey(c)}):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")}});$("body").on("click.DocumentList",".shortcut .watch",function(a){a.stopPropagation();var c={},d=$(this);c.module=d.attr("module");c.id=d.attr("targetId");"true"==
d.attr("watched")?(c._method="DELETE",b.watchModel.watchOne(c,function(a){f.notify("\u53d6\u6d88\u5173\u6ce8\u6210\u529f");d.html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\u5173\u6ce8');d.attr("watched","false");a=b.subView;a.id&&a.id==c.id&&a.changeWatch(!1)})):(c._method="PUT",b.watchModel.watchOne(c,function(a){f.notify("\u5173\u6ce8\u6210\u529f");d.html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8');d.attr("watched","true")}))});$("body").on("click.DocumentList",".shortcut .shareout",
function(a){a.stopPropagation();a={};var c=$(this);a["shareOut.module"]=c.attr("module");a["shareOut.targetId"]=c.attr("targetId");"true"==c.attr("shareout")&&(a._method="DELETE",b.shareOutModel.deleteByTarget(a,function(a){f.notify("\u53d6\u6d88\u5206\u4eab\u6210\u529f");$("#document-list").find("#"+c.attr("targetId")).remove()}))});$("body").off("click",".document-reminds").on("click",".document-reminds",function(a){if(0<b.findSelectedFolder())f.notify("\u6587\u4ef6\u5939\u4e0d\u80fd\u63d0\u9192,\u8bf7\u91cd\u65b0\u9009\u62e9");
else{var c=b.findSelectedLi();0<c.length?($(this).attr("module","document"),$(this).attr("targetIds",c),(new g({obj:$(this)})).render(a)):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")}});$("body").off("confirmHandler",".document-share").on("confirmHandler",".document-share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";b.shareModel.sids=b.sids;d=b.findSelectedLi();b.shareModel.entityIds=d;b.shareModel._module=
"document";b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u6279\u91cf\u5171\u4eab\u64cd\u4f5c\u6210\u529f")})}});$("body").on("click.DocumentList",".document-share",function(a){a.stopPropagation();0<b.findSelectedFolder()?f.notify("\u6587\u4ef6\u5939\u4e0d\u80fd\u5171\u4eab,\u8bf7\u91cd\u65b0\u9009\u62e9"):(a=b.findSelectedLi(),0<a.length?(new n({module:"document",entityIdArr:a})).render():f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55"))});c.on("change.DocumentList",
".document-li .title .text",function(a){var c=$(this);0>=$.trim(c.val()).length?(f.notify("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),c.val(c.attr("title")),b.subView.changeTitle(c.attr("title"))):(a={},a.value=c.val(),a.filed="name",a["document.name"]=c.val(),a.id=c.parent().attr("id"),b.model.update(a,function(a){b.id=a.document.id;c.attr("title",a.document.name);f.notify("\u6587\u6863\u4fe1\u606f\u4fee\u6539\u6210\u529f")}))});c.on("keyup.DocumentList",".document-li .title .text",function(a){var c=
$(this),d=c.val(),e=b.subView;e.changeTitle(d);a=a.which;(13!=a||0!=$.trim(d).length&&$.trim(d)!=c.attr("title"))&&27==a&&(c.val(c.attr("title")),e.changeTitle(c.attr("title")))});c.off("confirmHandler",".shortcut .share").on("confirmHandler",".shortcut .share",function(a,c){var d=c.objs;if(d&&!$.isEmptyObject(d)){d=$.isArray(d)?d:[d];b.sids="";for(var e=0;e<d.length;e++)b.sids+=d[e].id+",";var g=$(this).attr("targetId");b.shareModel.sids=b.sids;b.shareModel.entityIds=g;b.shareModel._module="document";
b.shareModel.saveAll(function(a){a.addUserMessage?f.notify(a.addUserMessage):f.notify("\u5171\u4eab\u64cd\u4f5c\u6210\u529f");var c=b.subView;c.id&&c.id==g&&c.addShare(a.shareEntrys)})}});c.on("click.DocumentList",".shortcut .share",function(a){a.stopPropagation();$(this).hasClass("selector-toggle")?(new l({$target:$(this)})).open():f.notify("\u6ca1\u6709\u5171\u4eab\u6743\u9650")});c.on("keyup.DocumentList","#documentlist-container",function(a){a=a.which;38==a?(a=b.getPrev())&&a.trigger("click"):
40==a&&(a=b.getNext())&&a.trigger("click")});$("body").on("click.DocumentList","#document-create, #guide-document-create",function(a){a=b.$("#navbar").children().last().data();b.canCrtDoc?(b.documentnewview=new k({userId:b.userId,folder:a||"",callback:function(a){b.insertDocument(a)}}),b.documentnewview.render()):f.notify("\u8be5\u76ee\u5f55\u4e0b\u4e0d\u80fd\u4e0a\u4f20\u6587\u6863")});$("body").on("click.DocumentList","#document-html-create, #guide-document-html-create",function(a){a.stopPropagation();
b.$("#navbar").children().last().data();if(b.canCrtDoc){var c=$(this);a=c.attr("data-module");var d=c.attr("data-id"),e=c.attr("userId"),c=c.attr("renderType");$("body").trigger("slideOpen",{module:a,id:d,userId:e,renderType:c})}else f.notify("\u8be5\u76ee\u5f55\u4e0b\u4e0d\u80fd\u65b0\u5efa\u6587\u6863")});c.on("click.DocumentList","#document-list li.document",function(a){$(this).hasClass("unread")?(a=$("li.j_unread .badge").text().trim(),!$.isNumeric(a)||a-1?$("li.j_unread .badge").text(a-1):$("li.j_unread .badge").addClass("hide")):
$(this).hasClass("newComment")&&(a=$("li.j_incomming .badge").text().trim(),!$.isNumeric(a)||a-1?$("li.j_incomming .badge").text(a-1):$("li.j_incomming .badge").addClass("hide"));$(this).removeClass("unread");$(this).removeClass("newComment")});c.off("click","#folder-list .can-check .checkbox").on("click ","#folder-list .can-check .checkbox",function(a){a.stopPropagation();$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).parent("li").toggleClass("selected");
$(this).find("i").hasClass("icon-checkbox-unchecked")?$(".j_center  #check-all").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked"):0==$(".j_center .e-list i.icon-checkbox-unchecked").size()&&$(".j_center  #check-all").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked");$(this).trigger("change")});c.off("click.DocumentList","#document-list .checkbox").on("click.DocumentList","#document-list .checkbox",function(a){a.stopPropagation();a=!1;$(this).find("i").hasClass("icon-checkbox-checked")&&
(a=!0);$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked");$(this).parent("li").toggleClass("selected");a?$(".j_check-all-doc").addClass("icon-checkbox-unchecked").removeClass("icon-checkbox-checked"):0==$("#document-list .checkbox i.icon-checkbox-unchecked").size()&&$(".j_check-all-doc").removeClass("icon-checkbox-unchecked").addClass("icon-checkbox-checked");$("body").trigger("batch")});c.on("click.DocumentList",".folder-li",function(a){a=$(this);b.model.pageNo=
1;var c=a.data();a={};if("new"!=c.id){if(c.id)a={folder:{id:c.id}};else if(c.type)if("company"==c.type)a={folder:{type:c.type}};else if("attachment"==c.type)a={folder:{type:c.type,creator:{id:TEAMS.currentUser.id}}};else if("share"==c.type)a={folder:{type:c.type,creator:{id:TEAMS.currentUser.id}}};else return;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/queryFolder.json",dataType:"json",data:JSON.stringify(a),success:function(a){b.renderFolders(a,c)}})}});c.on("click.DocumentList",
"#folder-menu",function(a){a=$(this);if(0!=a.nextAll().length){a.nextAll().remove();b.model.pageNo=1;var c=a.data(),d={};if(c.id)a.remove(),d={folder:{id:c.id}};else if(c.type){if("all"==c.type){b.foldersHome();return}if("company"==c.type)d={folder:{type:c.type}};else if("privy"==c.type)d={folder:{type:c.type,creator:{id:TEAMS.currentUser.id}}};else return}else{b.foldersHome();return}a.remove();$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/queryFolder.json",dataType:"json",
data:JSON.stringify(d),success:function(a){b.renderFolders(a,c)}})}});c.on("click.DocumentList",".folder-li .shortcut .js_folder-modif",function(a){a.stopPropagation();a=$(this);a.parents("li").find("input.name").removeClass("hide").focus();a.parents("li").find("div.title").addClass("hide")});c.on("click.DocumentList",".folder-li .shortcut .js_folder-setting",function(a){a.stopPropagation();a=$(this);var c={};c.id=a.parent().parent().attr("id");b.documentsettingview=new r({userId:b.userId,folder:c});
b.documentsettingview.render()});c.on("click.DocumentList",".folder-li input.name",function(a){a.stopPropagation()});c.on("keyup.DocumentList",".folder-li input.name",function(a){var b=$(this);13==a.which&&b.trigger("blur")});c.on("blur.DocumentList",".folder-li input.name",function(a){a.stopPropagation();if(!s.validate($(this))||""==$(this).val().trim())return!1;var d=$(this),e=d.val();if(e)if(d.next("div.title").html()==e)d.parent(".folder-li").find("input.name").addClass("hide"),d.parent(".folder-li").find("div.title").removeClass("hide");
else{var g={},h=d.parent(".folder-li").data();a=b.$("#navbar").children().last().data();a.id&&(g.parent={id:a.id,type:a.type,path:a.path,creator:{id:a.creator.id},name:a.name});"new"==h.id?(g.folder={name:e,type:h.type},$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/create.json",dataType:"json",data:JSON.stringify(g),success:function(a){"hasExit"==a.message?f.notify("\u5df2\u7ecf\u5b58\u5728\u8be5\u6587\u4ef6\u5939"):(g.id=a.folder.id,d.parent(".folder-li").data(a.folder).attr("id",
a.folder.id),d.parent(".folder-li").find("input.name").addClass("hide"),d.parent(".folder-li").find("div.title").html(e).removeClass("hide"),d.parent(".folder-li").addClass("mine"),d.parent(".folder-li").find(".js_folder-move").removeClass("hide"),d.parent(".folder-li").find(".js_folder-modif").removeClass("hide"),d.parent(".folder-li").find(".js_folder-delete").removeClass("hide"),"company"==h.type&&d.parent(".folder-li").find(".js_folder-setting").removeClass("hide"),f.notify("\u521b\u5efa\u6210\u529f"),
b.draggableBind(c.find("#"+a.folder.id)),b.droppableBind("#"+a.folder.id))}})):(g.folder={id:h.id,name:e},$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/updateName.json",dataType:"json",data:JSON.stringify(g),success:function(a){"hasExit"==a.message?f.notify("\u5df2\u7ecf\u5b58\u5728\u8be5\u6587\u4ef6\u5939"):(d.parent(".folder-li").data(a.folder),d.parent(".folder-li").find("input.name").addClass("hide"),d.parent(".folder-li").find("div.title").html(e).removeClass("hide"),
f.notify("\u4fee\u6539\u6210\u529f"))}}))}});$("body").off("click.DocumentList","#js_folder-create").on("click.DocumentList","#js_folder-create",function(a){b.canCrtPriFol?(a=b.$("#folder-li").clone(),a.find("#js_folder-type").addClass("private"),a.find(".title").attr("placeholder","\u4e2a\u4eba\u6587\u4ef6\u5939"),a.data({id:"new",type:"privy"}),a.attr("id","new"),b.$("#folder-list").append(a),a.find("input.name").removeClass("hide").focus(),a.find("div.title").addClass("hide")):b.canCrtComFol&&
TEAMS.currentUser.admin?(a=b.$("#folder-li").clone(),a.find("#js_folder-type").addClass("company"),a.find(".title").attr("placeholder","\u516c\u5171\u6587\u4ef6\u5939"),a.data({id:"new",type:"company"}),a.attr("id","new"),b.$("#folder-list").prepend(a),a.find("input.name").removeClass("hide").focus(),a.find("div.title").addClass("hide")):f.notify("\u60a8\u4e0d\u80fd\u5728\u8be5\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939")});c.on("click.DocumentList",".document-li .shortcut .js_document-move",
function(a){a.stopPropagation();a=$(this).parents("li").attr("id");a=$(this).parents("li").hasClass("mine")||$(this).parents("li").hasClass("subordinates")||TEAMS.currentUser.admin?a+",_,":",_,"+a;b.documentmoveview=new p({documentsId:a,listView:b});b.documentmoveview.render()});c.on("click.DocumentList",".folder-li .shortcut .js_folder-move",function(a){a.stopPropagation();b.canCrtPriFol||b.canCrtComFol&&TEAMS.currentUser.admin?(a=$(this),$(this).parents("li").hasClass("mine")||b.canCrtComFol&&TEAMS.currentUser.admin?
(a=a.parents("li").attr("id"),-1==a.indexOf("new")?(b.documentmoveview=new p({foldersId:a,listView:b}),b.documentmoveview.render()):f.notify("\u4e0d\u80fd\u79fb\u52a8\u672a\u65b0\u5efa\u7684\u6587\u4ef6\u5939\uff01")):f.notify("\u53ea\u80fd\u79fb\u52a8\u81ea\u5df1\u521b\u5efa\u7684\u6587\u4ef6\u5939\uff01")):f.notify("\u60a8\u4e0d\u80fd\u79fb\u52a8\u4ee5\u4e0b\u6587\u4ef6\u5939\uff01")});$("body").on("click.DocumentList",".document-move",function(a){var d="",e="",g="",h="";c.find("#document-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&
($(this).parent("li").hasClass("mine")||$(this).parent("li").hasClass("subordinates")||TEAMS.currentUser.admin?e+=$(this).parent("li").attr("id")+",":g+=$(this).parent("li").attr("id")+",");d=e+"_,"+g});c.find("#folder-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&($(this).parent("li").hasClass("mine")&&"new"!=$(this).parent("li").attr("id")?h+=$(this).parent("li").attr("id")+",":$(this).trigger("click"))});2<d.length||1<h.length?(b.documentmoveview=new p({documentsId:d,
foldersId:h,listView:b}),b.documentmoveview.render()):f.notify("\u8bf7\u5148\u9009\u4e2d\u8bb0\u5f55")});c.on("click.DocumentList",".folder-li .shortcut .js_folder-delete",function(a){a.stopPropagation();a=$(this);var c=a.parents("li").attr("id");-1==c.indexOf("new")?b.removeFolder(c):a.parents("li").remove()})},findSelectedLi:function(){var a="";$("#document-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&(a+=$(this).parent("li").attr("id")+",")});return a},
findSelectedFolder:function(){var a=0;$(this.el).find("#folder-list .checkbox").each(function(){$(this).find("i").hasClass("icon-checkbox-checked")&&a++});return a},updateFastKey:function(a){a=a.split(",");for(var b=0;b<a.length-1;b++){var c=$("#documentlist-container #"+a[b]);c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8');c.find(".watch").attr("watched","true")}},beforeOpenDocument:function(a){this.highLight(a)},changeWatch:function(a,b){var c=$("#documentlist-container #"+
a);b?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'),c.find(".watch").attr("watched","true")):(c.find(".watch").html('\x3ci class\x3d"icon-favourite"\x3e\x3c/i\x3e\u5173\u6ce8'),c.find(".watch").attr("watched","false"))},insertDocument:function(a){var b=$(this.el);b.find(".no-result").hide();$("#guide-div").hide();var c=$("#document-li").clone();c.find(".title .text").text(" "+a.name);c.find(".title .text").attr("title"," "+a.name);0!=a.commentCount&&c.find(".commentCount").html("("+
a.commentCount+")");c.removeClass("hide");c.attr("id",a.id).attr("data-module","document").attr("data-id",a.id).addClass("j_entityslider-toggle");a.watched?(c.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'),c.find(".watch").attr("watched","true")):c.find(".watch").attr("watched","false");c.find(".watch").attr("targetId",a.id);c.find(".watch").attr("module","document");c.find(".share").addClass("selector-toggle").attr("data-entity","employee").attr("data-multi",
"true").attr("targetId",a.id);c.find(".j_doctype").addClass(f.getDocTypeImgClass(a.type));c.addClass("mine");c.find(".js_document-move").removeClass("hide");$("#document-list").prepend(c);this.rebuildSN();this.highLight(a.id);this.draggableBind(b.find("#"+a.id))},changeTitle:function(a,b){$("#"+a).find(".title .text").attr("title",b);$("#"+a).find(".title .text").text(b)},changeDocType:function(a,b){$("#"+a).find(".j_doctype").removeClass().addClass("doc-icon j_doctype "+f.getDocTypeImgClass(b))},
changeManager:function(a,b){a&&(a.username!=TEAMS.currentUser.username?$("#documentlist-container #"+b+" .user").html(a.username):$("#documentlist-container #"+b+" .user").html(""))},removeDocument:function(a){this.getNext();$("#"+a).remove();$("body").trigger("slideClose");this.rebuildSN()},highLight:function(a){a&&($("#document-list li.active").removeClass("active"),$("#document-list #"+a).addClass("active"))},rebuildSN:function(){for(var a=$("#document-list").children(),b=0;b<a.length;b++)$(a[b]).find(".sn").html(b+
1)},getNext:function(){var a=0,b=$("#document-list li.document");b.each(function(b){$(this).hasClass("active")&&(a=b)});if(1!=b.length)return b.length==a+1?$(b[a-1]):$(b[a+1])},getPrev:function(){var a=0,b=$("#document-list li.document");b.each(function(b){$(this).hasClass("active")&&(a=b)});return $(b[a]).prev()},search:function(a,b,c){var d=this;d.type=a;d.folder=b;d.createType=c;var e=$(d.el),g=d.model,h="",k=$("#document-filter").data("data-filter"),l=$("#document-order").attr("data-entity");
a=a?a:$("#document-type").attr("data-entity");var p=$.trim($("#document-keywords").val()),n=$("#document-keywords").attr("placeholder");p==n&&(p="");g.userId=this.userId;g.id=this.id;1==g.pageNo&&$("#document-list").html("");p&&0<p.length&&(a="all");l=l?l:"default";"default"==l&&$("#orderType-default").addClass("active");a=a?a:"mine";if(d.type=a)switch(a){case "incharge":a="mineManager";$("#mine-doc-menu").show();$("#j_mine").addClass("active");$(".j_all_docMenu .j_mine").addClass("active");break;
case "created":a="mineCreate";$("#mine-doc-menu").show();$(".j_all_docMenu .j_mine").addClass("active");break;case "mineParticipants":a="mineParticipants";$("#mine-doc-menu").show();$(".j_all_docMenu .j_mine").addClass("active");break;case "sharetome":a="shareToMe";$("#mine-doc-menu").show();$(".j_all_docMenu .j_mine").addClass("active");break;case "unread":a="unRead";break;case "newcomment":a="newComment";break;case "incomming":a="newComment";break;case "watched":$(".document-watchs").hide()}else a=
"mine";h=k&&0<k.length?h+('"filter":{'+k+',"type":"'+a+'"},'):h+('"filter":{"type":"'+a+'","keywords":"'+p+'"},');b&&(b.id?h+='"folder":{"id":"'+b.id+'"},':b.type&&(h+='"folder":{"type":"'+b.type+'"},'));c?h+='"createType":"'+c+'",':"mine"==a&&(h+='"createType":"newcreate",');h+='"userId":"'+d.userId+'","pageNo":"'+g.pageNo+'","order":{"property":"'+l+'"}';h=("{"+h+"}").replace(/\\/g,"\\\\");e.find(".no-result, .j_moredocument").hide();$("#documentlist-loading").removeClass("hide");g.search(h,function(c){d.renderDocuments(c,
b,a);$(".center-pane #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$("#documentlist-loading").addClass("hide");k||p||0!=c.page.result.length?(e.find("#guide-div").hide(),e.find("#j_holder_mine").hide()):"mine"==a||"all"==a?(e.find("#guide-div").show(),e.find(".j_holder_mine").show()):"watched"==a?(e.find("#guide-div").show(),e.find(".j_holder_watched").show()):"subordinates"==a&&(e.find("#guide-div").show(),e.find(".j_holder_subordinates").show());c.unread?
$(".j_all_docMenu .j_unread span.j_badge").removeClass("hide").text(c.unread):$(".j_all_docMenu .j_unread span.j_badge").addClass("hide");c.feedback?$(".j_all_docMenu .j_incomming span.j_badge").removeClass("hide").text(c.feedback):$(".j_all_docMenu .j_incomming span.j_badge").addClass("hide");"systemManager"==a?(e.find(".document-html-create").remove(),e.find(".toolbar-document-select").remove(),e.find(".document-list li .shortcut").remove(),$(".j_systemManager").addClass("active"),0==$("#system-manager-delete").length&&
e.find(".toolkit-list").append('\x3cli class\x3d"toolkit-item fr"\x3e\t\x3ca id\x3d"system-manager-delete" class\x3d"btn btn-success btn-sm dropdown-toggle" data-module\x3d"document" data-id\x3d"0"\x3e\x3ci class\x3d"icon-trash glyphicon"\x3e\x3c/i\x3e\u5220\u9664\u6587\u6863\x3c/a\x3e\x3c/li\x3e'),e.off("click.DocumentList","#document-list li.document").on("click.DocumentList","#document-list li.document",function(a){a.stopPropagation();a=!1;$(this).find(".checkbox i").hasClass("icon-checkbox-checked")&&
(a=!0);a?($(this).find(".checkbox i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked"),$(this).removeClass("selected")):($(this).find(".checkbox i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked"),$(this).addClass("selected"))}),e.off("click.DocumentList","#system-manager-delete").on("click.DocumentList","#system-manager-delete",function(a){0<$("#document-list .checkbox .icon-checkbox-checked").length?f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5df2\u9009\u62e9\u7684"+
$("#document-list .checkbox .icon-checkbox-checked").length+"\u4e2a\u6587\u6863\u5417?",function(a){if(a){var b=d.findSelectedLi();a={};a.sids=b;g.destroyDocument(a,function(a){f.notify("\u5220\u9664\u6587\u6863\u6210\u529f");a=b.split(",");for(var c in a)d.removeDocument(a[c])})}}):f.notify("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6587\u6863!")})):(c=$(".aside .menu-group-sub li.active .j_type-name").text(),$("#documents-title").html(c),d.docDraggableRender())})},foldersHome:function(a,b,c){var d=
this,e=$(d.el);e.find("#folder-list").html("");d.canCrtComFol=!1;d.canCrtPriFol=!0;d.canCrtDoc=!0;a||(d.type="mine",a=d.type);"mine"==a?(e.find("#folder-list").show(),$("#mine-doc-menu").show(),e.find("#navbar").parent().show(),$(".js_folder-create-li").show(),a={},a.userId=d.userId,b?(e={},"company"==b?(e.type="company",e.name="\u516c\u5171\u6587\u4ef6\u5939"):"attachment"==b?(e.type="attachment",e.name="\u9644\u4ef6\u6587\u4ef6\u5939"):"share"==b?(e.type="share",e.name="\u5171\u4eab\u7ed9\u6211\u7684\u6587\u6863"):
(a={folder:{id:b}},e.id=b),a.folder=e,a.searchType=c,$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/queryFolder.json",dataType:"json",data:JSON.stringify(a),success:function(a){d.renderFolders(a,a.folder)}})):(b=e.find("#js_folder-company").clone(),c=e.find("#js_folder-attach").clone(),e.find("#folder-list").append(b),e.find("#folder-list").append(c),d.queryFolders(a))):d.search(d.type)},queryFolders:function(a){var b=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/folders/queryList.json",dataType:"json",data:JSON.stringify(a),success:function(a){b.renderFolders(a)}})},renderFolders:function(a,b){var c=$(this.el),d=a.folders;$("#document-filter").data("data-filter","");$("#document-order").attr("data-entity","");$("#document-keywords").val("");$("#j_check-all-document").hasClass("icon-checkbox-checked")&&$("#j_check-all-document").trigger("click");if(b){c.find("#folder-list").html("");"company"==b.type?(this.canCrtComFol=TEAMS.currentUser.admin?
!0:!1,this.canCrtPriFol=!1,this.canCrtDoc=!0,this.search("all",b,"company")):"privy"==b.type?(this.canCrtComFol=!1,this.canCrtDoc=this.canCrtPriFol=!0,b.id&&this.search("mine",b,"newcreate")):"attachment"==b.type?(this.canCrtDoc=this.canCrtPriFol=this.canCrtComFol=!1,this.search("all",b,"attach")):"share"==b.type?(this.canCrtDoc=this.canCrtPriFol=this.canCrtComFol=!1,this.search("sharetome",b,"share")):(this.canCrtDoc=this.canCrtPriFol=this.canCrtComFol=!1,b.id&&this.search("mine",b,"newcreate"));
if(b.name)if(a.parentFolders)for(var e in a.parentFolders){var f=c.find(".folder-menu-clone").clone();f.find(".title").text(a.parentFolders[e].name);f.data(a.parentFolders[e]);f.removeClass("folder-menu-clone");c.find("#navbar").append(f)}else f=c.find(".folder-menu-clone").clone(),f.find(".title").text(b.name),f.data(b),f.removeClass("folder-menu-clone"),c.find("#navbar").append(f);else $.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/queryParents.json",dataType:"json",
data:JSON.stringify({folder:{id:b.id}}),success:function(a){if(a.folders&&"company"==a.folders[0].type){var b=c.find(".folder-menu-clone").clone();b.find(".title").html("\u516c\u5171\u6587\u4ef6\u5939");b.data({type:"company",name:"\u516c\u5171\u6587\u4ef6\u5939"});b.removeClass("folder-menu-clone");c.find("#navbar").append(b)}for(var d=0;d<a.folders.length;d++){var e=a.folders[d],b=c.find(".folder-menu-clone").clone();b.find(".title").text(e.name);b.data(e);b.removeClass("folder-menu-clone");c.find("#navbar").append(b)}}});
e=b.id||b.type;var f=window.location.href,g="";-1!=f.indexOf("?")&&(g=f.substring(f.indexOf("?"),f.length));ROUTER.navigate("/documents/"+this.userId+"/mine/"+e+g,{trigger:!1})}else f=window.location.href,g="",-1!=f.indexOf("?")&&(g=f.substring(f.indexOf("?"),f.length)),this.search(this.type,{type:"privy"});for(e=0;d&&e<d.length;e++)g=d[e],f=c.find("#folder-li").clone(),f.data(g),"company"==g.type?f.find("#js_folder-type").addClass("company"):"privy"==g.type&&f.find("#js_folder-type").addClass("private"),
f.attr("id",g.id),f.find("input.name").val(g.name),f.find(".title .text").text(g.name),f.find(".path").html(g.path),"company"==g.type&&f.find(".user").html(g.creator.username),c.find("#folder-list").append(f),g.creator&&TEAMS.currentUser.id==g.creator.id&&(f.addClass("mine"),f.find(".js_folder-move").removeClass("hide"),f.find(".js_folder-modif").removeClass("hide"),f.find(".js_folder-delete").removeClass("hide")),"company"==g.type&&TEAMS.currentUser.admin&&(f.find(".js_folder-setting").removeClass("hide"),
f.find(".js_folder-move").removeClass("hide"),f.find(".js_folder-modif").removeClass("hide"),f.find(".js_folder-delete").removeClass("hide"));TEAMS.currentUser.id!=this.userId&&(this.canCrtDoc=this.canCrtPriFol=this.canCrtComFol=!1)},removeFolder:function(a){var b=this,b=this;f.confirm("\u786e\u8ba4\u5220\u9664\u6587\u4ef6\u5939",function(c){c&&$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/delete.json",dataType:"json",data:JSON.stringify({foldersId:a}),success:function(c){if(c=
c.message){if(-1!=c.indexOf("hasFolders")){f.notify("\u8be5\u6587\u4ef6\u5939\u4e0b\u5305\u542b\u5b50\u6587\u4ef6\u5939\uff0c\u4e0d\u80fd\u5220\u9664\uff01");return}if(-1!=c.indexOf("hasDocuments")){f.notify("\u8be5\u6587\u4ef6\u5939\u4e0b\u5305\u542b\u6587\u6863\uff0c\u4e0d\u80fd\u5220\u9664\uff01");return}}b.$("#"+a).remove();f.notify("\u5220\u9664\u6587\u4ef6\u5939\u6210\u529f")}})})},renderDocuments:function(a,b,c){var d=this.model,e=$(this.el);0==a.page.result.length?e.find(".no-result").show():
e.find(".no-result").hide();a.page.hasNext?$(".j_moredocument").show():$(".j_moredocument").hide();a.page.pageNo&&1!=a.page.pageNo&&!a.page.hasNext?$("#documentlist-container .no-more").show():$("#documentlist-container .no-more").hide();1==d.pageNo&&$("#document-list").empty();for(var e=a.page.result,g=0;g<e.length;g++){var h=e[g],k=$("#document-li").clone();k.find(".j_doctype").addClass(f.getDocTypeImgClass(h.type));h.author&&TEAMS.currentUser.id==h.author.id&&k.addClass("mine");k.find(".js_document-move").removeClass("hide");
!b||"company"!=b.type||k.hasClass("mine")||TEAMS.currentUser.admin||k.find(".js_document-move").addClass("hide");a.resultMap&&a.resultMap.subIdList&&-1<a.resultMap.subIdList.indexOf(h.author.id)&&(k.addClass("subordinates"),k.find(".js_document-move").removeClass("hide"));k.find(".sn").html((d.pageNo-1)*d.pageSize+(g+1));var l=h.createTime?Date.create(h.createTime).format("{yyyy}-{MM}-{dd}"):"";k.find(".date").html(l);k.find(".comment-count em").html(h.commentCount);h.author&&h.author.username!=TEAMS.currentUser.username&&
k.find(".user").html(h.author.username);this.userId==TEAMS.currentUser.id&&("lastly"==d.filterType||h.filterType&&"new"==h.filterType)&&k.find(".new").removeClass("hide");k.attr("id",h.id).attr("data-module","document").attr("data-id",h.id).addClass("j_entityslider-toggle");h.watched?(k.find(".watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'),k.find(".watch").attr("watched","true")):k.find(".watch").attr("watched","false");c&&"shareout"==c?(k.find(".shareout").html('\x3ci class\x3d"icon-share2" style\x3d"margin-right: 5px;"\x3e\x3c/i\x3e\u53d6\u6d88\u5206\u4eab\x3c/span\x3e'),
k.find(".shareout").attr("shareout","true"),k.find(".shareout").attr({targetId:h.id,module:"document"})):k.find(".shareout").remove();k.find(".watch").attr({targetId:h.id,module:"document"});k.find(".share").attr("targetId",h.id);k.find(".title .text").text(h.name).attr("title",h.name);this.type&&"incomming"==this.type?k.addClass("newComment"):this.type&&"unread"==this.type?k.addClass("unread"):h.unread?k.addClass("unread"):h.newConment&&k.addClass("newComment");$("#document-list").append(k)}this.highLight(this.id)},
docDraggableRender:function(){var a=$(this.el);this.folder&&"company"==this.folder.type&&TEAMS.currentUser.admin?this.draggableBind(a.find("#document-list .document-li,#folder-list .folder-li")):this.folder&&"company"==this.folder.type?this.draggableBind(a.find("#document-list .mine,#document-list .subordinates,#folder-list .mine")):this.draggableBind(a.find(".document,#folder-list .folder-private"));this.droppableBind(".folder-li[id!\x3d'js_folder-attach']")},draggableBind:function(a){a.draggable({cursor:"move",
cursorAt:{left:8,top:8},helper:function(a){return $(a.currentTarget).children(".doc-icon").clone()},revert:"invalid",scope:"b"})},droppableBind:function(a){var b=this;$(b.el).find(a).droppable({scope:"b",drop:function(a,c){$(c.draggable).is(".folder-li")?b.documentmoveview=new p({foldersId:$(c.draggable).attr("id"),listView:b}):b.documentmoveview=new p({documentsId:$(c.draggable).attr("id")+",_,",listView:b});var d=jQuery.extend(!0,{},$(a.target).data());d.uiDroppable=null;d.uiDraggable=null;$(a.target).removeClass("draggable-moveover");
"company"!=d.type||$(c.draggable).hasClass("mine")||$(c.draggable).hasClass("subordinates")||TEAMS.currentUser.admin?(b.documentmoveview.moveTo(d),b.documentmoveview.remove()):f.notify("\u60a8\u4e0d\u80fd\u79fb\u52a8\u6b64\u6587\u4ef6\u5230\u516c\u5171\u6587\u4ef6\u5939\uff01")},over:function(a,b){$(a.target).addClass("draggable-moveover")},out:function(a,b){$(a.target).removeClass("draggable-moveover")}})},_renderType:function(){var a="\u6211";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?a="\u5979":
TEAMS.blogUser&&(a="\u4ed6");$("#mine-doc-menu li").each(function(){var b=$(this),c=b.data("title");b.hasClass("j_sharetome")?b.find(".j_type-name").html("\u5171\u4eab\u7ed9"+a+"\u7684\u6587\u6863"):b.find(".j_type-name").html(a+c)})},remove:function(){this.undelegateEvents();$(this.el).off(".DocumentList");$("body").off(".DocumentList");this.documentView&&(this.documentView.remove(),this.documentView=null);this.docView&&(this.docView.remove(),this.docView=null);this.header&&(this.header.remove(),
this.header=null);this.filter&&(this.filter.remove(),this.filter=null)}});m.exports=h});
define("teams/doc/documentpage","teams/utils teams/core/page teams/views/feedbackview teams/doc/documentview teams/doc/documentnewview teams/doc/documentlistview teams/doc/documentstatisticview teams/component/trashbinview".split(" "),function(h,q,m){var f=h("teams/utils");q=h("teams/core/page");var e=h("teams/views/feedbackview");h("teams/doc/documentview");h("teams/doc/documentnewview");var c=h("teams/doc/documentlistview"),b=h("teams/doc/documentstatisticview"),a=h("teams/component/trashbinview");
h=q.extend({initialize:function(a){this.userId=a.userId;this.id=a.id;this.type=a.type?a.type:"mine";this.folderId=a.folderId;this.pageKey=this.id&&"new"==this.id?"documentpage#"+(new Date).getTime():"documentpage#"+this.userId+this.type;this.template="document.documentpage";this.pageActive="document";this.el="#mainContainer"},delegateEvents:function(){var b=this,g=$(b.el);this.on("beforeOpen",function(a){this.mainView.beforeOpenDocument(a)});this.on("create",function(a){this.mainView.insertDocument(a)});
this.on("remove",function(a){this.mainView.removeDocument(a)});this.on("changeWatch",function(a){this.mainView.changeWatch(a.id,a.watched)});this.on("changeTitle",function(a){this.mainView.changeTitle(a.id,a.title)});this.on("changeDocType",function(a){this.mainView.changeDocType(a.id,a.type)});this.on("changeManager",function(a){this.mainView.changeManager(a.manager,a.id)});$("body").off("click",".j_all_docMenu .j_more_menu").on("click",".j_all_docMenu .j_more_menu",function(){0==$(this).attr("menu-state")?
b.showMore():b.hideMore()});g.off("click",'.j_all_docMenu li[class!\x3d"j_more"],#mine-doc-menu .sub-indent').on("click",'.j_all_docMenu li[class!\x3d"j_more"],#mine-doc-menu .sub-indent',function(){var a=$(this),e=a.attr("data-type"),f=a.attr("data-href"),h="/"+window.location.hash.substring(1,window.location.hash.length);window.location.pathname!=f&&h!=f&&($(".document-header-toolbar").removeClass("hide"),$("#document-statistic").show(),"mine"==e?($("#js_folder-create").show(),$("#mine-doc-menu").show(),
$(".doc-file-path").show(),$("#mine-doc-menu .sub-indent").removeClass("active")):a.hasClass("sub-indent")?($("#js_folder-create").show(),$("#mine-doc-menu").show(),$(".doc-file-path").hide(),a.parent().find(".sub-indent").removeClass("active"),a.addClass("active")):($("#js_folder-create").hide(),$("#mine-doc-menu").hide(),$(".doc-file-path").hide()),b.pageKey="documentpage#"+e,b.mainView&&b.mainView.remove(),b.mainView=new c({id:b.id,userId:b.userId,type:e}),g.find("#document-statistic").show(),
b._render(".j_"+e),ROUTER.navigate(f,{trigger:!1}),$("body").trigger("rViewSlide"),$(window).trigger("resize"))});g.off("click",".aside .j_feedback").on("click",".aside .j_feedback",function(){var a=$(this).attr("data-href"),c=$(this).attr("data-type"),f="/"+window.location.hash.substring(1,window.location.hash.length);window.location.pathname!=a&&f!=a&&(b.mainView&&b.mainView.remove(),$(".document-header-toolbar").addClass("hide"),$("#document-statistic").hide(),b.mainView=new e({container:"#j_mainscroll",
showtitle:"0",navs:[".document-dynamic"],module:"document",moduleName:"\u6587\u6863",showReaded:"1",noscroll:!0}),g.find("#document-statistic").show(),b._render(".j_"+c),ROUTER.navigate(a,{trigger:!1}),$("body").trigger("rViewSlide"))});g.off("click","#document_j_recylce").on("click","#document_j_recylce",function(){var c=$(this),e=c.attr("data-type"),c=c.attr("data-href"),f="/"+window.location.hash.substring(1,window.location.hash.length);window.location.pathname!=c&&f!=c&&(b.mainView&&b.mainView.remove(),
b.mainView=new a({container:"#j_mainscroll",userId:this.userId,module:"document"}),g.find("#document-statistic").hide(),b._render(".j_"+e),ROUTER.navigate(c,{trigger:!1}))});g.off("click",".j_systemManager").on("click",".j_systemManager",function(){var a=$(this),e=a.attr("data-type"),a=a.attr("data-href"),h="/"+window.location.hash.substring(1,window.location.hash.length);window.location.pathname!=a&&h!=a&&(b.mainView&&b.mainView.remove(),b.mainView=new c({id:b.id,userId:b.userId,type:e}),g.find("#document-statistic").show(),
b._render(".j_"+e),ROUTER.navigate(a,{trigger:!1}),f.gotoTop("#j_mainscroll"),$(window).trigger("resize"),$(".menu-group-sub li,.menu-group li").removeClass("active"),$(this).addClass("active"))})},render:function(){var b=this,f=$(b.el);this.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id},function(){b.renderType()});"feedback"==b.type?b.mainView=new e({container:"#j_mainscroll",showtitle:"0",navs:[".document-dynamic"],module:"document",moduleName:"\u6587\u6863",showReaded:"1",
noscroll:!0}):"recylce"==b.type?($(".j_recycle").addClass("active"),f.find("#document-statistic").hide(),b.mainView=new a({container:"#document-center",userId:this.userId,module:"document"})):b.mainView=new c({id:b.id,userId:b.userId,type:b.type,folderId:b.folderId});"watched"!=b.type&&"subordinates"!=b.type&&"all"!=b.type||b.showMore();b._render(".j_"+b.type);b.renderSubview();TEAMS.currentUser.admin?f.find(".j_systemManager").removeClass("hide"):f.find(".j_systemManager").remove();$(".menu-group-sub li.j_"+
b.type).addClass("active")},renderSubview:function(){this.subView=new b({container:"#document-statistic",showtitle:"0",module:"document",moduleName:"\u6587\u6863",userId:this.userId,showReaded:"1"});this.subView.render()},showMore:function(){$(".j_all_docMenu .j_subordinates").removeClass("hide");$(".j_all_docMenu .j_watched").removeClass("hide");$(".j_all_docMenu .j_all").removeClass("hide");$(".j_all_docMenu .j_more_menu").text("\u6536\u8d77");$(".j_all_docMenu .j_more_menu").attr("menu-state",
"1");$(".j_all_docMenu .j_more_menu").append('\x3ci id\x3d"menu-icon" class\x3d"icon-angle-up"\x3e\x3c/i\x3e')},hideMore:function(){$(".j_all_docMenu .j_subordinates").addClass("hide");$(".j_all_docMenu .j_watched").addClass("hide");$(".j_all_docMenu .j_all").addClass("hide");$(".j_all_docMenu .j_more_menu").text("\u66f4\u591a");$(".j_all_docMenu .j_more_menu").attr("menu-state","0");$(".j_all_docMenu .j_more_menu").append('\x3ci id\x3d"menu-icon" class\x3d"icon-angle-down"\x3e\x3c/i\x3e')},renderType:function(){var a=
"\u6211";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?a="\u5979":TEAMS.blogUser&&(a="\u4ed6");$(".j_all_docMenu li").each(function(){var b=$(this),c=b.data("title");if(!b.hasClass("sub-indent")||b.hasClass("j_sharetome"))b.hasClass("j_sharetome")?b.find(".j_type-name").html("\u5171\u4eab\u7ed9"+a+"\u7684\u6587\u6863"):b.find(".j_type-name").html(a+c)})}});m.exports=h});
define("teams/doc/documentmodel",function(h,q,m){h=Backbone.Model.extend({pageNo:"",pageSize:"",filerType:"",orderType:"",sids:"",document:{},initialize:function(f){this.userId=f.userId;this.id=f.id;this.pageNo=1;this.pageSize=25},pageQuery:function(f){$.ajax({type:"get",url:"/documents/"+this.userId+".json",dataType:"json",data:{pageNo:this.pageNo,pageSize:this.pageSize,filterType:this.filterType,orderType:this.orderType},success:function(e){f&&f(e)}})},search:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",
type:"post",url:"/documents/search.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},documentview:function(f){var e=this;$.ajax({type:"get",url:"/km/document/"+this.id+".json",dataType:"json",data:{},success:function(c){f&&f(c);e.document=c.document}})},guideFlag:function(f){$.ajax({type:"get",url:"/km/document/guideFlag.json",dataType:"json",data:{},success:function(e){f&&f(e)}})},create:function(f,e){$.ajax({type:"get",url:"/km/document/create/"+this.userId+".json",dataType:"json",data:f,
success:function(c){e&&e(c)}})},htmlCreate:function(f,e){$.ajax({type:"post",url:"/km/document/htmlCreate.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},createShare:function(f,e){$.ajax({type:"get",url:"/km/document/createShare.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},update:function(f,e){f._method="PUT";$.ajax({type:"POST",url:"/km/document/"+f.id+".json",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateDocFile:function(f,e){$.ajax({type:"post",url:"/km/document/uploadFile.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},updateDocFileByFileObj:function(f,e){$.ajax({type:"post",url:"/km/document/updateDocFileByFileObj.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateDocFileByDeleteFileObj:function(f,e){$.ajax({type:"post",url:"/km/document/updateDocFileByDeleteFileObj.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateAuthor:function(f){$.ajax({type:"get",url:"/km/document/updateAuthor/"+this.id+"/"+this.userId+".json",dataType:"json",
data:{"employee.username":this.username},success:function(e){f&&f(e)}})},deleteDocument:function(f){$.ajax({type:"POST",url:"/km/document/"+this.id+".json",dataType:"json",data:{_method:"DELETE"},success:function(e){f&&f(e)}})},destroyDocument:function(f,e){$.ajax({type:"POST",url:"/km/document/destroy.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},hasDocument:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"POST",url:"/documents/hasDocument.json",dataType:"json",
data:f,success:function(c){e&&e(c)}})},watch:function(f){var e=this.document,c={module:"document"};c._method=e.watched?"DELETE":"PUT";$.ajax({type:"post",dataType:"json",url:"/watch/"+e.id+".json",data:c,success:function(b){e.watched=!e.watched;b=b.stream;f&&f(e.watched,b)}})},updateDocType:function(f,e,c){var b={_method:"PUT"};b["document.id"]=f;e&&(b["fileObj.id"]=e);$.ajax({type:"POST",url:"/km/document/updateDocType.json",dataType:"json",data:b,success:function(a){c&&c(a)}})},saveDefaultShare:function(f,
e){$.ajax({type:"POST",url:"/km/documentsetting/saveDefaultShare.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveSynChildrenDefaultShare:function(f,e){$.ajax({type:"POST",url:"/km/documentsetting/saveSynChildrenDefaultShare.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},getDefaultShare:function(f,e){$.ajax({type:"POST",url:"/km/documentsetting/getDefaultShare.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/doc/documentversionview","teams/utils teams/doc/documentmodel teams/doc/documentversionmodel teams/component/attachment teams/base/preview teams/component/typeahead".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/doc/documentmodel");var e=h("teams/doc/documentversionmodel");h("teams/component/attachment");h("teams/base/preview");var c=h("teams/component/typeahead");h=Backbone.View.extend({initialize:function(b){this.docId=b.docId;this.docView=b.docView;this.versionModel=
new e({});this.el="#documentVersionModal";$("body").append(f.template("document.documentversionlist"))},render:function(){$(this.el).modal("toggle");this.search(!0)},search:function(b){var a=this,c=$(a.el),e={};e.pageNo=b;e.pageSize="10";e["documentVersion.targetId"]=a.docId;var h=c.find("#describeSearch").val(),n=c.find("#createBeginTime").val(),k=c.find("#createEndTime").val(),r="";c.find("#creatorDiv .j_optcontainer .j_selected span a").each(function(){r+=$(this).attr("id")+","});e.name=$.trim(h);
e.startTime=$.trim(n);e.endTime=$.trim(k);e.userIds=r;this.versionModel.search(e,function(c){var d=c.page;c=d.result;var e=$(a.el),g=e.find("#content .j_versionlist");1==b&&(g.empty(),null==c||0==c.length?e.find("#content .j_empty").show():e.find("#content .j_empty").hide());d&&d.hasNext?($(a.el+" #more_data").parent().show(),$(a.el+" #more_data").data("page",d)):$(a.el+" #more_data").parent().hide();if(null!=c)for(d=0;d<c.length;d++){var h=e.find("#contentClone li").clone(),k=c[d],l=k.id;h.find(".j_Del").val(l);
h.find(".describe").text(k.describe);h.find(".describe").attr("data-id",l);h.find(".createUser").text(null!=k.creator?k.creator.username:"\u65e0");var n=Date.create(k.createTime);h.find(".createTime").text(n.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));h.find(".createTime").attr("title",n.format("{yyyy}-{MM}-{dd}  {HH}:{mm}:{ss}"));h.find(".versionNum").text("V"+k.versionNumber);h.find(".detail").attr("id",l);h.find(".restore").attr("id",l);g.append(h)}f.layout(a.el+" .j_versionListScr")})},showVersion:function(b){var a=
this;$("body").append(f.template("document.documentversioninfo"));$("#documentversion-modal").append('\x3cdiv class\x3d"modal-backdrop fade in documentversioninfo-backdrop" style\x3d"z-index:2000;"\x3e\x3c/div\x3e');$("#documentversion-modal").addClass("in");$("#btn-restore").attr("id",b);var c={};c.id=b;this.versionModel.getVersionById(c,function(b){a.setContent($("#documentversion-modal").find(".version-content-div"),b)});f.layout("#documentversion-modal #document-container",[{axis:"yx"}]);f.bindIframeToJQScroll($("#documentversion-modal").find("#document-version-summary"),
$("#documentversion-modal #document-container"))},contrast:function(){var b=this,a=$(this.el).find(".j_Del:checked");if(2!=a.length)f.notify("\u8bf7\u9009\u62e9\u4e24\u6761\u8bb0\u5f55\u518d\u8fdb\u884c\u5bf9\u6bd4!");else{b=this;$("body").append(f.template("document.documentversioncontrast"));$("#documentversion-modal").append('\x3cdiv class\x3d"modal-backdrop fade in documentversioninfo-backdrop" style\x3d"z-index:2000;"\x3e\x3c/div\x3e');$("#documentversion-modal").addClass("in");$("#btn-restore").attr("id",
a.first().attr("value"));var c={};c.id=a.first().attr("value");var e=$("#documentversion-modal").find(".version-content-div");b.versionModel.getVersionById(c,function(a){b.setContent(e,a)});var h=$("#documentversion-modal").find(".version-content-div2");h.find("#btn-restore").attr("id",a.last().attr("value"));c={};c.id=a.last().attr("value");b.versionModel.getVersionById(c,function(a){b.setContent(h,a)});f.layout("#documentversion-modal #document-container",[{axis:"yx",mouseWheel:{axis:"y"}}]);f.bindIframeToJQScroll(e.find("#document-version-summary"),
e.find("#document-container"));f.bindIframeToJQScroll(h.find("#document-version-summary"),h.find("#document-container"));$(window).trigger("resize")}},setContent:function(b,a){b.find(".document-version-num").html("V"+a.documentVersion.versionNumber);b.find(".document-version-creator").html(a.documentVersion.creator.name);b.find(".document-version-createTime").html(Date.create(a.documentVersion.createTime).format("{yyyy}-{MM}-{dd}"));$(b.find("#document-version-summary").get(0).contentWindow.document.head).html('\x3cbase target\x3d"_blank"\x3e\x3cstyle type\x3d"text/css"\x3ebody{word-wrap:break-word;overflow:hidden;font-size:14px;font-family: \u5fae\u8f6f\u96c5\u9ed1, \'Microsoft YaHei\';color: #666666;}table{border-collapse: collapse;}td{height:20px;}td, th {padding: 5px 10px;border: 1px solid #DDD;}th {border-top: 1px solid #BBB;background-color: #F7F7F7;}p{line-height:1.5;} img{max-width: 100%;} span{line-height:1} \x3c/style\x3e');
$(b.find("#document-version-summary").get(0).contentWindow.document.body).html("\x3cdiv id\x3d'bodyHeight'\x3e"+(a.documentVersion.summary?a.documentVersion.summary:"")+"\x3c/div\x3e");b.find("#document-version-summary").get(0).height=$(b.find("#document-version-summary").get(0).contentWindow.document.body).find("#bodyHeight").height()+105;$(b.find("#document-version-summary").get(0).contentWindow.document.body).find("#bodyHeight").width();b.find("#info-div").width();$(b.find("#document-version-summary").get(0).contentWindow.document.body).find("img").off("load.document").on("load.document",
function(){$(window).trigger("resize",b)})},iframeBindMove:function(b,a){var c=this,e=!1,f=$(b.get(0).contentWindow.document.body);f.unbind("mousedown.version").bind("mousedown.version",function(h){1==h.which&&(e=setTimeout(function(){c.iframeMoveScroll(b,a)},500));f.unbind("mouseup.version").bind("mouseup.version",function(a){clearTimeout(e);f.css("cursor","");f.off("mouseup.version");f.off("mousemove.version")})})},iframeMoveScroll:function(b,a){$(b.get(0).contentWindow.document.body).css("cursor",
"move");var c=0,e=0,f=(new Date).getTime();$(b.get(0).contentWindow.document.body).unbind("mousemove.version").bind("mousemove.version",function(b){if(100<(new Date).getTime()-f){f=(new Date).getTime();var h=Math.abs($("#"+a.children().attr("id")+"_container")[0].offsetLeft),r=Math.abs($("#"+a.children().attr("id")+"_container")[0].offsetTop);if(0!=c||0!=e)console.log("lastRelativeX \x3d "+c+";clientX \x3d "+b.clientX+";ScrollX \x3d "+h+";now \x3d "+(h-(b.clientX-h-c))),a.mCustomScrollbar("scrollTo",
{x:h-(b.clientX-h-c)+"",y:r-(b.clientY-r-e)+""});c=b.clientX-h;e=b.clientY-r}})},delegateEvents:function(){var b=this,a=$(this.el);a.off("click.version",".detail").on("click.version",".detail",function(){b.showVersion($(this).attr("id"))});$("body").off("click.version",".documentversioninfo-backdrop").on("click.version",".documentversioninfo-backdrop",function(){$(".documentversioninfo-backdrop").remove()});$("body").off("click.version",".j_btn_documentversion_close").on("click.version",".j_btn_documentversion_close",
function(a){$(".documentversioninfo-backdrop").remove()});$("body").on("keydown.version",function(a){event.stopPropagation();27==a.which&&$(".documentversioninfo-backdrop").remove()});$("body").off("click.version",".documentversion-modal-dialog").on("click.version",".documentversion-modal-dialog",function(a){a.stopPropagation()});$("body").off("click.version",".restore").on("click.version",".restore",function(a){var c=$(this).attr("id");f.confirm("\u8fd8\u539f\u8be5\u7248\u672c\u5c06\u751f\u6210\u65b0\u7684\u7248\u672c\uff0c\u786e\u8ba4\u8fd8\u539f\u5417?",
function(a){a&&(a={},a.id=c,b.versionModel.restoreVersion(a,function(a){f.notify("\u7248\u672c\u6062\u590d\u6210\u529f\uff01");$(b.el).trigger("hidden.bs.modal");b.docView.renderShow(a.document)}))})});a.on("click.version","#more_data",function(a){a=$(this).data("page");b.search(a.nextPage)});a.on("click.version","#search",function(c){a.find("#trashbinContent .j_trashlist").html("");b.search(1)});a.on("click.version","#contrast",function(a){b.contrast()});c({el:b.el+" #creator",callback:function(c){if(c&&
!$.isEmptyObject(c)){var e=a.find("#creatorDiv .j_selected");b.renderTypeheader(e,c)}}});f.datepicker({el:b.el+" #createBeginTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#createBeginTime"),e=$(b.el).find("#createEndTime");e.val()&&a>e.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),c.val("")):c.val(a)}});f.datepicker({el:b.el+" #createEndTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");
var c=$(b.el).find("#createBeginTime"),e=$(b.el).find("#createEndTime");e.val()&&a<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),e.val("")):e.val(a)}});a.off("hidden.bs.modal").on("hidden.bs.modal",function(){b.remove()});a.off("shown.bs.modal").on("shown.bs.modal",function(a){});$(window).off("resize.version").on("resize.version",function(a,b){var c=$(b);c&&0<$(c).length?(c.find("#document-version-summary").get(0).height=$(c.find("#document-version-summary").get(0).contentWindow.document.body).find("#bodyHeight").height()+
105,800>c.find("#info-div").width()&&c.find("#info-div").css("width","778px")):$(".document-version-info .document-container").each(function(){c=$(this);c.find("#document-version-summary").get(0).height=$(c.find("#document-version-summary").get(0).contentWindow.document.body).find("#bodyHeight").height()+105;c.find("#info-div").width()})})},renderTypeheader:function(b,a){if(a.length)for(var c=0;c<a.length;c++){var e=a[c],f=e.name,h=e.id;if(f&&h){var k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+
h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)});b.append(k)}}else f=a.name,h=a.id,f&&h&&(k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)}),b.append(k))},remove:function(){$(this.el).remove();$(".modal-backdrop").remove();$("#documentversion-modal").remove();$(this.el).off(".version");$("body").off(".version");
$(window).off(".version")}});m.exports=h});
define("teams/doc/documentview","teams/utils teams/component/typeahead teams/doc/documentmodel teams/component/shareallview teams/component/tag teams/component/mainline teams/component/relevanceview teams/component/permissionview teams/component/extendview teams/component/validation teams/component/attachmentreup teams/base/preview teams/doc/documentversionview".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/doc/documentmodel"),b=h("teams/component/shareallview"),
a=h("teams/component/tag"),d=h("teams/component/mainline"),g=h("teams/component/relevanceview"),l=h("teams/component/permissionview"),n=h("teams/component/extendview"),k=h("teams/component/validation"),r=h("teams/component/attachmentreup");h("teams/base/preview");var p=h("teams/doc/documentversionview");q=Backbone.View.extend({documentinfo:{},initialize:function(a){this.el=a.container||"#right-pane";this.isBoxOpen="#entitybox-container"==this.el?!0:!1;this.id=a.id;this.userId=a.userId;this.closable=
a.closable;this.model=new c(a);this.lastPage=a.page;this.mainlineId=a.tolink;this.editCheckIntervalSeconds=900;this.onlyKey=(new Date).valueOf()},render:function(){h.async(["ueditor/ueditor.config.js","ueditor/ueditor.all.min.js"],function(){h.async("ueditor/zh-cn.js")});var a=this,b=this.model;a.loadTemplate();0==this.id?($(a.el).find(".detailpage").hide(),$(a.el).find(".loading_large").hide(),$(a.el).find("#info-div").show(),$(a.el).find("#document-title").autosize(),$(a.el).find("#document-title").focus(),
$(a.el).off("blur.document","#document-title").on("blur.document","#document-title",function(){var b=$(this).val();if(!k.validate($(this)))return!1;b&&0<$.trim(b).length&&a.newHtmlSave()}),$(a.el).off("keydown.document","#document-title").on("keydown.document","#document-title",function(a){13==a.which&&a.preventDefault()}),$(a.el).off("keyup.document","#document-title").on("keyup.document","#document-title",function(a){13==a.which&&$(this).trigger("blur")})):($(a.el).find(".loading_large").show(),
a.initComponent(),a.loadAfter(),b.userId=a.userId,b.id=a.id,b.documentview(function(b){a.renderShowAfter(b)}));this.lastPage&&this.lastPage.pageActive&&"document"==this.lastPage.pageActive&&(b=window.location.href,b=b.substring(b.indexOf("document")),-1!=b.indexOf("?")&&(b=b.substring(0,b.indexOf("?"))),ROUTER.navigate(b+"?view_info|id_"+a.id,{trigger:!1}))},renderShowAfter:function(a){this.documentinfo=b;if((b=a.actionMsg)&&b.message)return $(this.el).html(f.template("base.nopermission",{msg:b,module:"document",
id:this.id})),$(this.el).find(".scrollwrapper").trigger("resizeSroll"),!1;$(this.el).find(".loading_large").hide();$(this.el).find("#info-div").show();var b=a.document;this.renderShow(b);b.author&&($(this.el).find("#document-manager").html(f.template("base.user",b.author)),a="images/avatar.png",b.author.avatar&&(a=b.author.avatar.p5&&"/base/download/"+b.author.avatar.p5),a="\x3cimg class\x3d'avatar' src\x3d'"+a+"' /\x3e",$(this.el).find("#document-manager").find("a").prepend($(a)));b.creator&&
($(this.el).find("#document-creator").html(b.creator.username),$(this.el).find("#document-creator").attr("userId",b.creator.id));$(this.el).find(".summary-avatar").attr("data-original-title",Date.create(b.createTime).format("{yyyy}-{MM}-{dd}")+" \u7531"+b.creator.username+"\u521b\u5efa");b.creator.avatar&&($(this.el).find(".summary-avatar").attr("userid",b.creator.id),$(this.el).find(".summary-avatar").html("\x3cimg src\x3d'/base/download/"+b.creator.avatar.p5+"'\x3e"));b.name&&$(this.el).find("#document-title").val(b.name);
""!=b.folderPathName?$(this.el).find("#document-folder-path").html(b.folderPathName):$(this.el).find("#document-folder-path").html("\u65e0");$(this.el).find("#document-create-time").html(Date.create(b.createTime).format("{yyyy}-{MM}-{dd}"));$(this.el).find("#document-title").autosize();this.renderWatch(b.watched);this.renderComponent(b);this.permissionView.render(b.permission);this.trigger("beforeOpen",this.id);this.lastPage&&$(this.lastPage.el).find("#"+this.id).addClass("active");$(window).trigger("resize")},
renderNewDocument:function(a){this.loadTemplate();this.initComponent();this.loadAfter();this.renderShow(a);this.renderWatch(a.watched);this.renderComponent(a);this.trigger("beforeOpen",this.id)},loadAfter:function(){$(this.el).find("#document-summary-iframe").attr("id","document-summary-iframe"+this.id);f.layout(this.el+" #document-container");f.bindIframeToJQScroll($(this.el).find("#document-summary-iframe"+this.id),$(this.el).find("#document-container"));this.initEvents()},ueditorToolBarStatic:function(){var a=
$(this.el),b=a.find("#document-summary"+this.id+this.onlyKey).children().attr("id"),c=a.find("#document-title").width()+48,d=parseInt(a.find("#docFileObjDiv").css("height"))+60;f.browser&&f.browser.safari?a.find("#"+b+"_toolbarbox").css({left:"0px",top:"-30px",position:"fixed","z-index":"1038",width:c,"margin-left":"-1px"}):(d=this.isBoxOpen?f.browser&&f.browser.ie?d:d+2:d,d=f.browser&&f.browser.ie?d+50:d,a.find("#"+b+"_toolbarbox").css({top:d+"px",position:"fixed","z-index":"1038",width:c,"margin-left":"-1px"}))},
loadTemplate:function(){$(this.el).html(f.template("document.documentinfo"))},initComponent:function(){var c=this;this.shareView=new b({entityId:c.id,module:"document",shareContainer:"#document-share",partContainer:"#document-participants",parentEl:c.el});this.tagview=new a({module:"document",container:"#document-tag",ccontainer:"#document-ctag",targetId:c.id,parentEl:c.el});this.mainlineview=new d({targetId:c.id,module:"document",container:"#document-mainline",parentEl:c.el});c.relevanceViews=[];
_.each([{targetModule:"task",module:"document",container:"#document-relevance-task",moduleLabel:"\u5173\u8054\u4efb\u52a1:"},{targetModule:"document",module:"document",container:"#document-relevance-doc",moduleLabel:"\u5173\u8054\u6587\u6863:"},{targetModule:"customer",module:"document",container:"#document-relevance-crm",moduleLabel:"\u5173\u8054\u5ba2\u6237:"},{targetModule:"workflow",module:"document",container:"#document-relevance-flow",moduleLabel:"\u5173\u8054\u5ba1\u6279:"},{targetModule:"calendar",
module:"document",container:"#document-relevance-agenda",moduleLabel:"\u5173\u8054\u65e5\u7a0b:"}],function(a){this.relevanceView=new g({objectId:c.id,module:a.module,targetModule:a.targetModule,container:a.container,moduleLabel:a.moduleLabel,parentEl:c.el});c.relevanceViews.push(this.relevanceView)});this.extendview=new n({targetId:c.id,module:"document",container:"#document-container",parentEl:c.el});this.permissionView=new l({module:"document",container:c.el});this.attachment=new r({targetId:c.id,
module:"document",container:"#document-attachment",parentEl:c.el,callback:function(a){c.changeDocType(c.id)}})},renderComponent:function(a){this.tagview.render(a.tags);this.mainlineview.render(a.mainlines);this.renderRelevanceInfos(a.relevances);this.extendview.render(a);this.shareView.render(a.shareEntrys);this.attachment.render(a.attachments);$(this.el).find(".scrollwrapper").trigger("resizeSroll");$(window).trigger("resize")},renderRelevanceInfos:function(a){var b=$(this.el),c=this.relevanceViews,
d=[],e=[],f=[],g=[],h=[];_.each(a,function(a){var b=a.targetModule;"task"==b?d.push(a):"document"==b?e.push(a):"customer"==b?g.push(a):"workflow"==b?f.push(a):"calendar"==b&&h.push(a)});_.each(c,function(a){"task"==a._targetModule?(a.render(d),0<d.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):"document"==a._targetModule?(a.render(e),0<e.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):"customer"==a._targetModule?(a.render(g),0<g.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):
"workflow"==a._targetModule?(a.render(f),0<f.length&&b.find($(a.el).attr("icon")).parent().addClass("hide")):"calendar"==a._targetModule&&(a.render(h),0<h.length&&b.find($(a.el).attr("icon")).parent().addClass("hide"))})},renderWatch:function(a){var b=$(this.el);a?b.find("#document-watch").html('\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e\u53d6\u6d88\u5173\u6ce8'):b.find("#document-watch").html('\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e\u5173\u6ce8')},renderShow:function(a){var b=this,c=$(b.el);
b.documentinfo=a;if(a.docFile){c.find("#document-name").html(a.docFile.name);var d=plupload.formatSize(a.docFile.size);c.find("#document-size").html("  ("+d+")")}c.find("#document-title").attr("title",a.name).val(a.name).trigger("autosize.resize");c.find("#btn-wechat").attr("targetId",a.id);c.find("#btn-remind").attr("targetId",a.id);c.find("#btn-shareout").attr("targetId",a.id);c.find("#document-summary").attr("id","document-summary"+b.id+b.onlyKey);c.find("#document-summary"+b.id+b.onlyKey).val(a.summary);
$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.head).html('\x3cbase target\x3d"_blank"\x3e\x3cstyle type\x3d"text/css"\x3ebody{word-wrap:break-word;overflow:hidden;word-break: break-all;font-size:14px;font-family: \u5fae\u8f6f\u96c5\u9ed1, \'Microsoft YaHei\';color: #666666;}table{border-collapse: collapse;}td{height:20px;}td, th {padding: 5px 10px;border: 1px solid #DDD;}th {border-top: 1px solid #BBB;background-color: #F7F7F7;}p{line-height:1.5;} img{max-width: 100%;} span{line-height:1} \x3c/style\x3e');
$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body).html("\x3cdiv id\x3d'bodyHeight'\x3e"+(a.summary?a.summary:"")+"\x3c/div\x3e");a.summary&&""!=a.summary||(c.find("#simulateToolbar").parent().addClass("hide"),c.find("#summary_blank").removeClass("hide"),c.off("click.document","#summary_blank").on("click.document","#summary_blank",function(a){"disabled"==c.find("#summary_blank textarea").attr("disabled")||b.checkLock()||(c.find("#summary_blank").addClass("hide"),c.find("#document-container").mCustomScrollbar("scrollTo",
0),b.renderUeditor())}));c.find("#document-summary-iframe"+b.id).off("load.document").on("load.document",function(){$(window).trigger("resize")});$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body).find("img").off("load.document").on("load.document",function(){$(window).trigger("resize")})},newHtmlSave:function(){var a=this,b=$(a.el),c=b.find("#document-title").val().trim();""!=c&&(b.find("#document-title").off(),b={},b["document.name"]=c,b.folderId=0<$("#navbar").length?
$("#navbar").children().last().data().id||"":"",b.folderType=0<$("#navbar").length?$("#navbar").children().last().data().type||"":"",b.mainlineId=a.mainlineId||"",a.model.htmlCreate(b,function(b){a.id=b.document.id;a.lastPage.trigger("create",b.document);a.mainlineId&&a.lastPage.mainView.insertDomain(b.document);$(a.el).find(".loading_large").show();a.initComponent();a.loadAfter();a.renderShowAfter(b);$(a.el).find(".detailpage").show();$(window).trigger("resize");if(b.sids){var c={},d=$.parseJSON(b.sids);
c.shareType="sharer";c.module="document";c.entityIds=b.document.id+",";c.sids=d.USER;c.departmentIds=d.DEPARTMENT;"all"==d.ALL&&(c.entryType="all");c["map.shareAdd"]="shareAdd";f.notify("\u6dfb\u52a0\u9ed8\u8ba4\u5171\u4eab\u4eba\u53ef\u80fd\u8f83\u6162\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85!");a.shareView.model.saveShareAll(c,function(b){b.shareEntrys&&(f.notify("\u9ed8\u8ba4\u5171\u4eab\u4eba\u6dfb\u52a0\u5b8c\u6210!"),a.shareView.render(b.shareEntrys))})}}))},htmlSave:function(){var a=this,b=$(a.el);
if(6E4<this.ue.getContent().length)f.notify("\u5f53\u524d\u5185\u5bb9\u3010"+this.ue.getContent().length+"\u3011\u8d85\u8fc7\u6700\u5927\u957f\u5ea6\u301060000\u3011\uff0c\u8bf7\u5220\u51cf\u540e\u518d\u4fdd\u5b58\uff01");else{var c={filed:"summary"};c["document.summary"]=this.ue.getContent();c.id=a.id;c.createNewVersion=!0;"1"==a.isEditExit&&(a.ue.destroy(),a.ue=null,b.find("#document-summary"+a.id+a.onlyKey).addClass("hide"),a.clearEditInterval());a.model.update(c,function(b){f.notify("\u6587\u6863\u4fdd\u5b58\u6210\u529f");
a.documentinfo.summary=b.document.summary;$($(a.el).find("#document-summary-iframe"+a.id).get(0).contentWindow.document.body).find("img").off("load.document").on("load.document",function(){$(window).trigger("resize")});$(window).trigger("resize");""==$($(a.el).find("#document-summary-iframe"+a.id).get(0).contentWindow.document.body).html()?$(a.el).find("#document-summary-iframe"+a.id).get(0).height=51:null!=$(a.el).find("#document-summary-iframe"+a.id).get(0).contentWindow.document.body&&($(a.el).find("#document-summary-iframe"+
a.id).get(0).height="100%",$(a.el).find("#document-summary-iframe"+a.id).get(0).height=$($(a.el).find("#document-summary-iframe"+a.id).get(0).contentWindow.document.body).find("#bodyHeight").height()+30)})}},changeTitle:function(a){$(this.el).find("#document-title").val(a).trigger("autosize.resize")},changeDocType:function(a,b){var c=this;c.model.updateDocType(a,b,function(a){c.lastPage&&c.lastPage.trigger("changeDocType",{id:a.document.id,type:a.document.type})})},changeWatch:function(a){this.renderWatch(a);
$("#left").trigger("refresh","watched")},addShare:function(a){this.shareView.render(a)},initEvents:function(){var a=this.model,b=this,c=$(this.el);c.off("blur.document","#document-title").on("blur.document","#document-title",function(){if(!k.validate($(this)))return!1;var d=$(this),e=d.val();!e||0>=$.trim(e).length?(f.notify("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"),d.val(d.attr("title")),b.lastPage&&b.lastPage.trigger("changeTitle",{id:b.id,title:d.val()})):e.trim()!=b.documentinfo.name.trim()&&(d=
{filed:"name"},d["document.name"]=e,d.id=b.id,a.update(d,function(a){f.notify("\u6807\u9898\u4fee\u6539\u6210\u529f");c.find("#stream").trigger("insertStream",a.stream);b.documentinfo=a.document}))});c.off("click.document","#ueditorEdit").on("click.document","#ueditorEdit",function(a){b.checkLock()||(c.find("#document-container").mCustomScrollbar("scrollTo",0),b.renderUeditor())});c.off("click.document",".ueditorSave").on("click.document",".ueditorSave",function(){$(".ueditorSave").tooltip("destroy");
b.isEditExit=$(this).data("exit");"1"==b.isEditExit&&(c.find("#document-summary-iframe"+b.id).css("display",""),c.find("#document-summary-iframe"+b.id).removeClass("hide"),c.find("#simulateToolbar").removeClass("hide"),c.find("#simulateToolbar").parent().removeClass("hide"));var a=b.ue.getContent();$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body).html("\x3cdiv id\x3d'bodyHeight'\x3e"+a+"\x3c/div\x3e");b.htmlSave();b.htmlEditModeCloseRemove()});c.off("click.document",
".ueditorSaveCancel").on("click.document",".ueditorSaveCancel",function(){c.find("#document-summary-iframe"+b.id).css("display","");c.find("#document-summary-iframe"+b.id).removeClass("hide");c.find("#simulateToolbar").removeClass("hide");b.ue.destroy();b.ue=null;b.clearEditInterval();c.find("#document-summary"+b.id+b.onlyKey).addClass("hide");b.htmlEditModeCloseRemove();$(window).trigger("resize")});c.off("click.document","#simulateToolbar").on("click.document","#simulateToolbar",function(a){null==
b.ue&&(Math.abs($("#"+$(b.el).find("#document-container").children().attr("id")+"_container")[0].offsetTop)>parseInt($(b.el).find("#document-summary-iframe"+b.id).get(0).height)?c.find("#document-container").mCustomScrollbar("scrollTo",0):"1"==c.find("#doc_divSlide").data("type")?(c.find("#document-summary-iframe"+b.id).slideDown(200),c.find("#doc_divSlide").find("i").removeClass().addClass("icon-angle-down"),c.find("#doc_divSlide").data("type","0")):(c.find("#document-summary-iframe"+b.id).slideUp(200),
c.find("#doc_divSlide").find("i").removeClass().addClass("icon-angle-right"),c.find("#doc_divSlide").data("type","1")))});c.on("keyup.document","#document-title",function(a){a=a.which;13==a?$.trim($(this).val())!=b.customer.name&&$(this).change():27==a?($(this).val(b.documentinfo.name),b.lastPage&&b.lastPage.trigger("changeTitle",{id:b.id,title:b.documentinfo.name})):b.lastPage&&b.lastPage.trigger("changeTitle",{id:b.id,title:$(this).val()})});c.on("keydown.document","#document-title",function(a){var c=
a.which;13==c&&(a.preventDefault(),$(this).trigger("blur"));27==c&&($(this).val(b.documentinfo.name||""),b.lastPage&&b.lastPage.trigger("changeTitle",{id:b.id,title:$(this).val()}),$(this).blur())});c.off("removeEntity.document").on("removeEntity.document",function(a,c){c.fileObj&&b.changeDocType(b.id,c.fileObj.id)});c.off("click.document","#btn-delete").on("click.document","#btn-delete",function(c){f.confirm("\u786e\u8ba4\u5220\u9664\u6587\u6863\u4fe1\u606f",function(d){d&&(a.id=b.id,a.deleteDocument(function(a){f.notify("\u5220\u9664\u6587\u6863\u6210\u529f");
b.lastPage&&b.lastPage.trigger("remove",b.id);$(c.target).trigger("remove");$("body").trigger("slideClose")}))})});c.off("click","#document-version").on("click","#document-version",function(a){a.stopPropagation();this.documentversionview=new p({container:this.el,docId:b.id,docView:b});this.documentversionview.render()});c.off("click.document","#document-watch").on("click.document","#document-watch",function(d){"new"!=b.id&&a.watch(function(a,d){a?f.notify("\u5df2\u6dfb\u52a0\u5173\u6ce8"):f.notify("\u5df2\u53d6\u6d88\u5173\u6ce8");
b.renderWatch(a);b.lastPage.trigger("changeWatch",{id:b.id,watched:a});c.find("#stream").trigger("insertStream",d);$("#left").trigger("refresh","watched")})});e({el:b.el+" #typeahead-manager",callback:function(d){d&&!$.isEmptyObject(d)&&(a.id=b.id,a.userId=d.id,a.username=d.username,a.updateAuthor(function(a){$(b.el).find("#document-manager").html(f.template("base.user",d));var e="images/avatar.png";d.avatar&&(e=d.avatar.p5&&"/base/download/"+d.avatar.p5);e="\x3cimg class\x3d'avatar' src\x3d'"+
e+"' /\x3e";$(b.el).find("#document-manager").find("a").prepend($(e));f.notify("\u8d1f\u8d23\u4eba\u4fee\u6539\u6210\u529f");c.find("#stream").trigger("insertStream",a.stream);b.trigger("changeManager",{manager:d,id:b.id});b.lastPage.trigger("changeManager",{manager:d,id:b.id});$("#readinfo").trigger("updateReadInfo")}))}});c.on("click.document",".relevance-module-document",function(a){a.stopPropagation();b.relevanceView||(b.relevanceView=new g({objectId:b.id,module:$(this).attr("data-entity"),container:"#document-relevance",
parentEl:b.el}));b.relevanceView.changeModule($(this).attr("data-entity"));b.relevanceView.changePlaceholder($(this).attr("data-entity"));$(this).parents(".j_links-dropdown").find("#i-relevance").trigger("click");$(this).parents("ul").hide()});$(window).off("resize.document"+b.id).on("resize.document"+b.id,function(){var a=c.find("#document-title").width()+48,d=c.find("#document-summary"+b.id+b.onlyKey).children().attr("id");c.find("#"+d).width(a);c.find("#"+d+"_toolbarbox").width(a);a=c.find("#document-title").width()+
48;c.find("#"+d+"_iframeholder").css({"margin-top":"27px",width:a});d=c.find("#document-title").width()+48;a=parseInt(c.find("#docFileObjDiv").css("height"))+60;a=b.isBoxOpen?f.browser&&f.browser.ie?a:a+2:a;a=f.browser&&f.browser.ie?a+51:a;f.browser&&f.browser.safari?c.find("#simulateToolbar").css({width:d,top:"0px",left:"17px"}):c.find("#simulateToolbar").css({width:d,top:a});0<$("#document-summary-iframe"+b.id).length&&(""==$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body).html()?
$(b.el).find("#document-summary-iframe"+b.id).get(0).height=51:null!=$(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body&&($(b.el).find("#document-summary-iframe"+b.id).get(0).height=$($(b.el).find("#document-summary-iframe"+b.id).get(0).contentWindow.document.body).find("#bodyHeight").height()+30))});c.off("click.document",".handle-item\x3ea").on("click.document",".handle-item\x3ea",function(a){$(this).parent().addClass("hide")})},renderUeditor:function(){var a=this,
b=$(a.el);b.find("#document-summary-iframe"+a.id).css("display","none");b.find("#simulateToolbar").addClass("hide");b.find("#document-summary"+a.id+a.onlyKey).val(a.documentinfo.summary);b.find("#simulateToolbar").parent().removeClass("hide");b.find("#document-summary"+a.id+a.onlyKey).removeClass("hide");a.ue=new UE.ui.Editor({initialFrameHeight:50});a.ue.render("document-summary"+a.id+a.onlyKey);var c=b.find("#document-summary"+a.id+a.onlyKey).children();a.isBoxOpen&&c.css("z-index","1500");var d=
c.attr("id");a.ueditorToolBarStatic();f.bindIframeToJQScroll($("#"+d+"_iframeholder").children(),$(a.el).find("#document-container"));0==b.find("#"+d+"_toolbarboxouter").find(".ueditorSaveCancel").length&&setTimeout(function(){b.find(".edui-toolbar").append('\x3cdiv class\x3d"edui-toolbar-action"\x3e\x3ca data-exit\x3d"0" class\x3d"ueditorSave btn btn-success btn-xs" id\x3d"ctrl-s-save" data-toggle\x3d"tooltip" data-placement\x3d"bottom" data-original-title\x3d"ctrl+s\u53ef\u5feb\u6377\u4fdd\u5b58"\x3e\u4fdd\u5b58\u5e76\u7ee7\u7eed\x3c/a\x3e\x3ca data-exit\x3d"1" class\x3d"ueditorSave btn btn-success btn-xs" data-toggle\x3d"tooltip" data-placement\x3d"bottom" data-original-title\x3d"ctrl+s\u53ef\u5feb\u6377\u4fdd\u5b58"\x3e\u4fdd\u5b58\x3c/a\x3e\x3ca class\x3d"ueditorSaveCancel btn btn-xs"\x3e\u53d6\u6d88\x3c/a\x3e\x3c/div\x3e');
$(window).trigger("resize");a.ue.focus()},500);b.find("#"+d+"_toolbarboxouter").off("mousedown.document").on("mousedown.document",function(){setTimeout(function(){a.ue.focus()},1)});c=$("#document-title").width()+48;b.find("#"+d+"_iframeholder").css({"margin-top":"27px",width:c});b.find("#"+d).css("width",c);this.ue.ready(function(c){c=b.find("#"+d+"_iframeholder").children();b.find("#"+d+"_iframeholder").css("height",$("#document-summary-iframe"+a.id).get(0).height);c.get(0).height="100%";a.ue.addListener("contentChange",
function(b){0==$("#htmleditmodeEsc").length&&a.htmlEditModeCloseRender()})});$($(a.el).find("#document-summary-iframe"+a.id).get(0).contentWindow.document.body).find("img").off("load.document").on("load.document",function(){$(window).trigger("resize")})},checkLock:function(){var a=this,b={},c;b["document.id"]=a.id;b.editActiveTime=a.editCheckIntervalSeconds;$.ajax({type:"post",url:"/km/document/checkEditLock.json",dataType:"json",data:b,async:!1,success:function(b){"false"==b.resultMap.checked?(a.initEditInterval(),
c=!1):(f.notify("\u7528\u6237\uff08"+b.resultMap.editUser+"\uff09\u6b63\u5728\u7f16\u8f91\u6587\u6863\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff0c\u6216\u8054\u7cfb\u8be5\u7528\u6237!"),c=!0)}});return c},initEditInterval:function(){var a=this;a.editInterval=setInterval(function(){var b={};b["document.id"]=a.id;b.editActiveTime=a.editCheckIntervalSeconds;$.ajax({type:"post",url:"/km/document/updateLock.json",dataType:"json",data:b,success:function(a){}})},1E3*a.editCheckIntervalSeconds)},clearEditInterval:function(){clearInterval(this.editInterval);
var a={};a["document.id"]=this.id;$.ajax({type:"post",url:"/km/document/clearLock.json",dataType:"json",data:a,success:function(a){}})},htmlEditModeCloseRender:function(){var a=this,b=$(a.el);$("body").find("#btn-close").attr("id","btn-editmode-close");$("body").off("click","#htmleditmodeEsc").on("click ","#htmleditmodeEsc",function(a){f.notify("\u6b63\u6587\u5185\u5bb9\u53d1\u751f\u53d8\u5316\uff0c\u8bf7\u5148\u4fdd\u5b58\u6216\u53d6\u6d88\u540e\uff0c\u518d\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c!")});
$("body").append("\x3cdiv id\x3d'htmleditmodeEsc' class\x3d'modal-backdrop fade in' style\x3d'z-index:1035;opacity: .0 !important;'\x3e\x3c/div\x3e");$("body").off("click","#btn-editmode-close").on("click ","#btn-editmode-close",function(b){f.confirm("\u5f53\u524d\u7f16\u8f91\u5185\u5bb9\u8fd8\u672a\u4fdd\u5b58\uff0c\u662f\u5426\u7ee7\u7eed\u5173\u95ed\uff1f",function(b){b&&(a.htmlEditModeCloseRemove(),$("body").trigger("slideClose"))})});$("#entitySlider").css("z-index","1036");$(window).bind("keydown",
function(a){if(a.ctrlKey&&83==a.which)return $("#ctrl-s-save").click(),a.stopPropagation(),!1});$($("#"+b.find("#document-summary"+a.id+a.onlyKey).children().attr("id")+"_iframeholder").children().get(0).contentWindow).bind("keydown",function(c){if(c.ctrlKey&&83==c.which)return $("#ctrl-s-save").click(),c.stopPropagation(),!1;c.ctrlKey&&65==c.which&&setTimeout(function(){var c=$("#"+b.find("#document-summary"+a.id+a.onlyKey).children().attr("id")+"_iframeholder").children().get(0).contentWindow,d=
c.document.body;if(c.document.all)c=c.document.selection.createRange(),c.moveEnd("character",d.innerText.length),c.select();else{var e=c.getSelection(),c=c.document.createRange();c.selectNodeContents(d);e.removeAllRanges();e.addRange(c)}a.ue.blur();a.ue.focus()},500)})},htmlEditModeCloseRemove:function(){var a=$(this.el);a.find("#btn-editmode-close").attr("id","btn-close");$("#entitySlider").css("z-index","");$("body").off("click","#htmleditmodeEsc");$("#htmleditmodeEsc").remove();$(window).unbind("keydown");
0<$("#"+a.find("#document-summary"+this.id+this.onlyKey).children().attr("id")+"_iframeholder").length&&$($("#"+a.find("#document-summary"+this.id+this.onlyKey).children().attr("id")+"_iframeholder").children().get(0).contentWindow).unbind("keydown")},remove:function(){$(this.el);this.clearEditInterval();$(this.el).off(".document");$(this.el).find("#document-title").trigger("autosize.destroy");this.lastPage&&$(this.lastPage.el).find("#"+this.id).removeClass("active");$(window).off(".document"+this.id);
this.shareView&&(this.shareView.remove(),this.shareView=null);this.tagview&&(this.tagview.remove(),this.tagview=null);this.mainlineview&&(this.mainlineview.remove(),this.mainlineview=null);this.attachment&&(this.attachment.remove(),this.attachment=null);this.relevanceView&&(this.relevanceView.remove(),this.relevanceView=null);this.relevanceViews&&(_.each(this.relevanceViews,function(a){a.remove()}),this.relevanceViews=null);this.extendview&&(this.extendview.remove(),this.extendview=null);this.ue&&
(this.ue.destroy(),this.ue=null);0<$("#htmleditmodeEsc").length&&$("#htmleditmodeEsc").remove();this.attachment&&(this.attachment.remove(),this.attachment=null);$(this.el).empty();if(this.lastPage&&this.lastPage.pageActive&&"document"==this.lastPage.pageActive){var a=window.location.href,a=a.substring(a.indexOf("document"));-1!=a.indexOf("?")&&(a=a.substring(0,a.indexOf("?")));ROUTER.navigate(a,{trigger:!1})}}});m.exports=q});
define("teams/doc/documentmoveview",["teams/utils","teams/doc/documentmodel","teams/component/sharemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/doc/documentmodel"),c=h("teams/component/sharemodel");h=Backbone.View.extend({initialize:function(b){this.documentsId=b.documentsId||"";this.foldersId=b.foldersId||"";this.listView=b.listView;this.el="#js_moveview";this.model=new e(b);this.shareModel=new c({module:"document"});$("body").append(f.template("document.documentmove"))},render:function(){$("#js_moveview").modal("toggle");
this.queryFolders()},delegateEvents:function(){var b=this,a=$(b.el);a.on("hidden.bs.modal",function(){b.remove()});a.on("click.DocumentMove",".treeview-node em",function(a){a.stopPropagation();var c=$(this).parent(".treeview-node");if(c.hasClass("treeview-node-on"))c.removeClass("treeview-node-on"),c.next("ul").addClass("hide");else if(c.next("ul").removeClass("hide"),c.addClass("treeview-node-on"),!c.hasClass("opened")){a=c.data();var e={};if(a.id)e={folder:{id:a.id}};else if(a.type)if("company"==
a.type)e={folder:{type:a.type}};else return;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/queryFolder.json",dataType:"json",data:JSON.stringify(e),success:function(a){b.renderFolders(a,c)}})}});a.on("click.DocumentMove",".treeview-node",function(b){a.find(".active").removeClass("active");$(this).addClass("active")});a.on("click.DocumentMove","#btn-save",function(c){c=a.find(".active").data();b.moveTo(c)})},moveTo:function(b){var a=this,c=a.listView.$("#navbar").children().last().data();
"all"==b.type&&"all"==c.type?f.notify("\u5df2\u7ecf\u5728\u8be5\u76ee\u5f55\u4e0b\uff0c\u65e0\u9700\u79fb\u52a8\uff01"):b.id||c.id||"company"!=b.type||"company"!=c.type?b.id&&c.id&&b.id==c.id?f.notify("\u5df2\u7ecf\u5728\u8be5\u76ee\u5f55\u4e0b\uff0c\u65e0\u9700\u79fb\u52a8\uff01"):(c={},c["folder.id"]=b.id,a.model.getDefaultShare(c,function(c){a.entityIdArr="";a.synUserIds="";a.synGroups="";a.synDepartmentIds="";var d=a.synAll="";c.all&&(d+="\u6240\u6709\u4eba,",a.synAll=!0);if(c.departments)for(var e=
0;e<c.departments.length;e++)d+=c.departments[e].name+",",a.synDepartmentIds+=c.departments[e].id,e<c.departments.length-1&&(a.synDepartmentIds+=",");if(c.groups)for(e=0;e<c.groups.length;e++)d+=c.groups[e].name+",",a.synGroups+=c.groups[e].id,e<c.groups.length-1&&(a.synGroups+=",");if(c.employees)for(e=0;e<c.employees.length;e++)d+=c.employees[e].name+",",a.synUserIds+=c.employees[e].id,e<c.employees.length-1&&(a.synUserIds+=",");""!=d?(","==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1)),f.confirm("\u79fb\u52a8\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u5c06\u4f1a\u9ed8\u8ba4\u5171\u4eab\u7ed9\u4ee5\u4e0b\u4eba\u5458:\x3cbr\x3e"+
d,function(c){c&&a.startMove(b,!0)})):a.startMove(b,!1)})):f.notify("\u5df2\u7ecf\u5728\u8be5\u76ee\u5f55\u4e0b\uff0c\u65e0\u9700\u79fb\u52a8\uff01")},startMove:function(b,a){var c=this,e=c.listView.$("#navbar").children().last().data(),h={};b.id?h.folder=b:b.type&&(h={folder:{type:"all"==b.type?"privy":b.type}});c.documentsId&&(h.sids=c.documentsId,h.parent=e,$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",async:!1,url:"/documents/move.json",dataType:"json",data:JSON.stringify(h),
success:function(a){for(var b=a.sids.split("_")[0].split(","),e=0;e<b.length;e++){var g=b[e];0<g.length&&(c.listView.removeDocument(g),c.entityIdArr+=g+",",f.notify("\u79fb\u52a8\u6587\u4ef6\u6210\u529f\uff01"))}b=a.sids.split("_")[1].split(",");for(e=0;e<b.length;e++)if(g=b[e],3<g.length)if(1==a.hasDocument)c.listView.removeDocument(g),c.entityIdArr+=g+",",f.notify("\u79fb\u52a8\u6587\u4ef6\u6210\u529f\uff01");else break;0==a.hasDocument&&""!=a.resultMap.unMove&&f.notify("\u60a8\u4e0d\u80fd\u79fb\u52a8\u4ee5\u4e0b\u6587\u4ef6:"+
a.resultMap.unMove);$("#document-center #check-all").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked")}}));if(c.foldersId){if(b.type!=e.type&&!("all"==e.type&&"privy"==b.type||"all"==b.type&&"privy"==e.type)){f.notify("\u4e2a\u4eba\u6587\u4ef6\u5939\u548c\u56e2\u961f\u6587\u4ef6\u5939\u4e0d\u80fd\u76f8\u4e92\u79fb\u52a8\uff01");return}for(var n=c.foldersId.split(","),e=0;e<n.length;e++){var k=n[e];if(b.path&&k&&-1!=b.path.indexOf(k)){f.notify("\u4e0d\u80fd\u5c06\u6587\u4ef6\u5939\u79fb\u52a8\u5230\u4ed6\u81ea\u8eab\u53ca\u5176\u5b50\u76ee\u5f55\u4e0b\uff01");
return}}h.foldersId=c.foldersId;h.isResetShare=a;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/folders/move.json",async:!1,dataType:"json",data:JSON.stringify(h),success:function(a){if(""!=a.msg)f.notify(a.msg);else{for(var b=0;b<n.length;b++)c.listView.$("#"+n[b]).remove();f.notify("\u79fb\u52a8\u6587\u4ef6\u5939\u6210\u529f\uff01");a.docIds&&(""!=c.entityIdArr&&(c.entityIdArr+=","),c.entityIdArr+=a.docIds)}}})}a&&""!=c.entityIdArr&&c.resetShareAll()},resetShareAll:function(){var b=
{};this.synAll&&(b.entryType="all");b["map.isdDelAllShare"]=!0;b["map.sendCheck"]=!0;b.shareType="sharer";b.module="document";b.entityIds=this.entityIdArr;b.sids=this.synUserIds;b.departmentIds=this.synDepartmentIds;b.groupIds=this.synGroups;$("body").append(f.template("component.processbar"));$("#processModal").find("#js_title").html("\u6b63\u5728\u540c\u6b65\u5171\u4eab\u4eba\u5458\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85!");$(this.el).off("click.batchselect","#processModalClose").on("click.batchselect",
"#processModalClose",function(){$("#processModal").remove()});this.processBar();this.shareModel.saveShareAll(b,this.saveBack)},saveBack:function(b){clearInterval(window.processBarTimer);$("#processModal").remove();b.msg?f.notify(b.msg):f.notify("\u5171\u4eab\u5b8c\u6210!")},processBar:function(){var b={},a=this;window.processBarTimer=window.setInterval(function(){a.shareModel.getProcess(b,a.updateProcess)},1E3)},updateProcess:function(b){var a=b.map.now/b.map.count;$("#processModal").find("#processNum").css("width",
100*a.toFixed(2)+"%");$("#processModal").find("#processNum").html(b.map.now+"/"+b.map.count);1<=a&&(clearInterval(window.processBarTimer),$("#processModal").remove())},queryFolders:function(){var b=this;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"get",url:"/folders/queryList.json",dataType:"json",success:function(a){b.renderFolders(a)}})},renderFolders:function(b,a){var c=$(this.el),e=b.folders;if(!a)a=c.find(".treeview-root");else if(!e||0==e.length){a.addClass("treeview-node-empty");
return}a.addClass("opened");for(var f=0;f<e.length;f++){var h=e[f],k=c.find("#js_folder-item-clone").clone();k.find(".treeview-node").data(h);k.attr("id",h.id);k.find(".treeview-node .title").html(h.name);h=a.css("padding-left").toNumber();k.find(".treeview-node").css("padding-left",h+15+"px");a.next("ul").append(k)}},remove:function(){this.undelegateEvents();$(this.el).off(".DocumentMove");$("#js_moveview").remove()}});m.exports=h});
define("teams/form/formpage","teams/utils teams/core/page teams/form/formpersonalview teams/form/formcompanyview teams/form/formemployeeview teams/form/formsubordinateview teams/form/formwriteview teams/form/formdatareportlistview teams/formstat/formstattabview teams/formmanage/formwatchlistview teams/formmanage/formwatchchartview teams/formmanage/formlabelpageview teams/form/formcloudview teams/component/trashbinview teams/formstat/formstatdatatableview teams/formstat/formstatfieldview teams/formstat/formstatreportview".split(" "),function(h,
q,m){h("teams/utils");q=h("teams/core/page");var f=h("teams/form/formpersonalview"),e=h("teams/form/formcompanyview"),c=h("teams/form/formemployeeview"),b=h("teams/form/formsubordinateview"),a=h("teams/form/formwriteview"),d=h("teams/form/formdatareportlistview"),g=h("teams/formstat/formstattabview"),l=h("teams/formmanage/formwatchlistview"),n=h("teams/formmanage/formwatchchartview"),k=h("teams/formmanage/formlabelpageview"),r=h("teams/form/formcloudview"),p=h("teams/component/trashbinview"),s=h("teams/formstat/formstatdatatableview"),
u=h("teams/formstat/formstatfieldview"),w=h("teams/formstat/formstatreportview");h=q.extend({initialize:function(a){this.isAdmin=TEAMS.currentUser.admin;this.userId=a.userId?a.userId:TEAMS.currentUser.id;this.type=a.type?a.type:"write";this.formId=a.formId;this.pageKey="form#"+this.type+this.userId+this.formId;this.reloadPage=a.reloadPage;this.options=a;this.template="form.formpage";this.pageActive="form";this.el="#mainContainer";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||
"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1},delegateEvents:function(){$(this.el)},render:function(){var h=this,m=$(h.el);h.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,isAdmin:this.isAdmin,isWeaver:this.isWeaver},function(){h.renderType()});"form-manager"==h.type?(h.mainView=new g({formId:h.formId,container:h.el+" #j_formContent"}),m.find(".j_form-form-manager").removeClass("active")):"cloud"==h.type?h.mainView=new r({id:h.userId,el:h.el+" #j_formContent",
module:"biaoge"}):"monitor"==h.type?h.mainView=new l:"monitorList"==h.type?h.mainView=new l:"monitorChart"==h.type?h.mainView=new n:"label"==h.type?h.mainView=new k({id:h.userId,el:h.el+" #j_formContent"}):"personal"==h.type?h.mainView=new f({userId:h.userId,container:h.el+" #j_formContent",type:h.type}):"company"==h.type?h.mainView=new e({userId:h.userId,container:h.el+" #j_formContent",type:h.type}):"employee"==h.type?h.mainView=new c({userId:h.userId,container:h.el+" #j_formContent",type:h.type}):
"subordinate"==h.type?(h.mainView=new b({userId:h.userId,container:h.el+" #j_formContent",type:h.type}),m.find(".j_form-subordinate").addClass("active")):"write"==h.type||"mywrite"==h.type||"employeewrite"==h.type||"companywrite"==h.type?(h.mainView=new a({userId:h.userId,container:h.el+" #j_formContent",type:h.type}),m.find(".j_form_write").addClass("active")):"trashbin"==h.type?h.mainView=new p({userId:h.userId,container:h.el+" #j_formContent",module:"form"}):"todo"==h.type||"finshed"==h.type||
"subordinates"==h.type?(h.mainView=new d({userId:h.userId,type:h.type}),h.entityCallback=function(a){"finshed"==a&&$("#report-list").find(".active .text").addClass("finished-line");"back"==a&&$("#report-list").find(".active .text").removeClass("finished-line")}):"formstat"==h.type?(h.mainView=new s({formId:h.formId,container:h.el+" #j_formContent"}),m.find(".j_form_write").addClass("active")):"statreport"==h.type?(h.mainView=new w({formId:h.formId,el:h.el+" #j_formContent"}),m.find(".j_form-form-manager").removeClass("active")):
"statfield"==h.type&&(h.mainView=new u({formId:h.formId,el:h.el+" #j_formContent"}),m.find(".j_form-form-manager").removeClass("active"));h._render(".j_form-"+h.type);"form-manager"==h.type&&m.find(".j_form-form-manager").removeClass("active")},renderSubview:function(){},renderType:function(){var a="\u6211\u7684";TEAMS.blogUser&&"female"==TEAMS.blogUser.sex?a="\u5979\u7684":TEAMS.blogUser&&(a="\u4ed6\u7684");$(".j_all_formMenu li").each(function(){var b=$(this);if(!b.hasClass("sub-indent")){var c=
b.data("title");if("\u529e\u7406\u7684\u5ba1\u6279"==c||"\u521b\u5efa\u7684\u5ba1\u6279"==c)a=a.substring(0,1);b.hasClass("shareToMe")?b.find(".j_type-name").html("\u5171\u4eab\u7ed9"+a+"\u5ba1\u6279"):b.find(".j_type-name").html(a+c)}})}});m.exports=h});
define("teams/form/formpersonalview","teams/utils teams/component/validation teams/form/formmanagemodel teams/form/formoperationview teams/component/entityslider teams/component/typeahead teams/formmanage/formdistributeview teams/formmanage/formloglistview teams/formmanage/formcollectloglistview teams/component/filter teams/form/formcolor teams/form/formreportconfigview teams/form/formauthconfigview teams/form/formcontinuewriteview".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");
var e=h("teams/form/formmanagemodel"),c=h("teams/form/formoperationview");h("teams/component/entityslider");h("teams/component/typeahead");var b=h("teams/formmanage/formdistributeview");h("teams/formmanage/formloglistview");var a=h("teams/formmanage/formcollectloglistview");h("teams/component/filter");var d=h("teams/form/formcolor"),g=h("teams/form/formreportconfigview"),l=h("teams/form/formauthconfigview"),n=h("teams/form/formcontinuewriteview");h=Backbone.View.extend({initialize:function(a){this.userId=
a.userId;this.el=a.container?a.container:"#j_workflowcenter";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.type=a.type;this.tpl=f.template("form.formpersonal",{isWeaver:this.isWeaver,isAdmin:this.isAdmin});this.model=new e(a);this.pageModule=a.pageModule||"biaoge";this.param={}},delegateEvents:function(){var d=this,e=d.model,h=$(d.tpl),s=$(d.el);s.off("click.FormPersonalView",".js_reportConf").on("click.FormPersonalView",
".js_reportConf",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u4e0a\u62a5\uff01"),!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formreportconfigview=new g({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formreportconfigview.hide()}}),d.formreportconfigview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u4e0a\u62a5\uff01"),
!1})});s.on("click.FormPersonalView",".j_dataReportConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u64cd\u4f5c\uff01"),!1});s.on("click.FormPersonalView",".js_authConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u4e0a\u62a5\uff01"),
!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formauthconfigview=new l({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formauthconfigview.hide()}}),d.formauthconfigview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u4e0a\u62a5\uff01"),!1})});s.on("click.FormCompanyView",".js_continueWrite",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u6301\u7eed\u586b\u5199\uff01"),
!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formcontinuewriteview=new n({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formcontinuewriteview.hide()}}),d.formcontinuewriteview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u6301\u7eed\u586b\u5199\uff01"),!1})});$("body").on("click.FormPersonalView",".goto-top",function(a){f.gotoTop(".js_forms."+d.activeTab)});s.on("click.FormPersonalView",
".js_copyForm",function(){var a=$(this).attr("formId"),b=$(this).parents(".js_formListBox").find("#form-title").text(),e={};e.formId=a;e.module=d.pageModule;e.el="#copy-form";e.formTitle=b;e.ownership="personal";e.tpl=f.template("flow.formcopy",{userId:d.userId,operationtype:"\u590d\u5236",admin:!1});e.copyCallback=function(a){var b=s.find(".js_forms."+d.activeTab+" .js_form-list .js_other .j_formlist"),c=h.siblings("#formitems."+d.activeTab).find(".js_formitemsli").clone();d.renderPersonalForm(a.form,
b,c,"prepend")};d.formoperationView=new c(e);d.formoperationView.render()});s.on("click.FormPersonalView",".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});s.on("click.FormPersonalView",".js_renameForm",function(){var a=$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=$('\x3cinput type\x3d"text" name\x3d"formTitle" style\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+
a+"\x3e"),b=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();$(this).parents(".js_formListBox").find("#form-title").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(b)}});s.on("blur.FormPersonalView",'input[name\x3d"formTitle"]',function(){var a=$(this).attr("formId"),b=$.trim($(this).val()),c=this;if(""==b||b==$(c).prev().text())$(c).prev().show(),$(c).remove();else{var d={};d.formId=
a;d.formName=$.trim(b);d.ownership="personal";e.renameForm(d,function(a){(a=a.message)?f.notify(a):($(c).prev().text(b).attr("title",b).show(),$(c).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});s.on("keydown.FormPersonalView",'input[name\x3d"formTitle"]',function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).prev().show(),$(this).remove()):13==a&&(""==b||b==$(this).prev().text()?($(this).prev().show(),$(this).remove()):$(this).trigger("blur.FormPersonalView"))});
s.off("click.FormPersonalView",".js_buildNewForm").on("click.FormPersonalView",".js_buildNewForm",function(){var a={};a.module=d.pageModule;a.el="#build-newform";a.tpl=f.template("biaoge.formnew");a.ownership="personal";a.saveCallback=function(a){[].push(a.form);for(var b=s.find(".js_forms."+d.activeTab+" .js_form-list .js_categoryname"),c,e=0;e<b.length;e++)if(a.form.formCategory){if(a.form.formCategory.id==b[e].id){c=b[e];break}}else{c=b[b.length-1];break}b=$(c).parents(".js_formcategory."+d.activeTab).find(".j_formlist");
c=h.siblings("#formitems."+d.activeTab).find(".js_formitemsli").clone();d.renderPersonalForm(a.form,b,c,"prepend");s.find("#noformsShow").remove()};d.formoperationView=new c(a);d.formoperationView.render()});s.off("click.FormPersonalView",".icon-search").on("click.FormPersonalView",".icon-search",function(a){a=s.find(".js_searchkeyword");a=$.trim(a.val());var b=d.param;d.model.pageNo=1;b.pageNo=d.model.pageNo;b["formParam.keyword"]=a;s.find(".js_forms."+d.activeTab+" .js_form-list").empty();a?d.renderKeywords(b):
(s.find(".js_forms."+d.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e'),d.renderPersonalForms(d.param))});s.on("keyup.FormPersonalView",".js_searchkeyword",function(a){13==(a?a:window.event?window.event:null).keyCode&&s.find(".icon-search").click()});s.on("click.FormPersonalView",".js_newcategory",function(a){a=h.siblings(".js_formcategory."+d.activeTab).clone().attr("id","newCateId");a.find(".j_formcateInfo").remove();
var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_createcategory" placeholder\x3d"\u5206\u7c7b\u540d\u79f0(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)" maxLength\x3d"20"\x3e');a.find(".js_categoryname").append(b);var c=s.find(".js_forms."+d.activeTab+" .js_form-list #custom-category #newCateId");1==c.length?c.find(".js_createcategory").focus():(s.find(".js_forms."+d.activeTab+" .js_form-list #custom-category").prepend(a),b.focus())});s.on("blur.FormPersonalView",".js_createcategory",
function(a){$(this);var b=$.trim($(this).val());a=$(this).attr("placeholder");var c=$(this).parent(),g=$(this).parents(".js_formcategory."+d.activeTab);b==a||""==b?$(".js_forms."+d.activeTab+" .js_form-list #newCateId").remove():e.createCategory({"formCategory.name":b,"formCategory.type":"personal",module:d.pageModule},function(a){a.message?f.notify(a.message):(c.empty().text(b).next().text("(0)"),c.attr("id",a.formCategory.id),g.removeAttr("id"),f.notify("\u65b0\u5efa\u8868\u5355\u5206\u7c7b\u6210\u529f"),
d.drag())})});s.on("keydown.FormPersonalView",".js_createcategory",function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).val(""),$(this).parents(".js_formcategory."+d.activeTab).remove()):13==a&&(""==b?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):$(this).trigger("blur.FormPersonalView"))});s.on("mouseenter.FormPersonalView","#custom-category #cate-name",function(a){if(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)0<$(this).parents(".js_other").length||
0==$(this).find(".js_createcategory").length&&(0!=$(this).find(".js_formcount .js_deletecategory").length?$(this).find(".js_formcount .js_deletecategory").show():$(this).find(".js_formcount").append('\x3ca class\x3d"js_deletecategory btn-delecategory" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e'))});s.on("mouseleave.FormPersonalView","#custom-category #cate-name",function(a){$(this).find(".js_formcount .js_deletecategory").hide()});s.on("click.FormPersonalView",".js_deletecategory",function(a){var b=
$(this);f.confirm("\u5220\u9664\u5206\u7c7b\u540e\uff0c\u8be5\u5206\u7c7b\u7684\u8868\u5355\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u5176\u4ed6\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5206\u7c7b\uff1f",function(a){if(a){a={"formCategory.id":b.parents("#cate-name").find(".js_categoryname").attr("id")};var c=b.parents(".js_formcategory."+d.activeTab).find(".j_formlist"),g=c.html(),c=c.find(".js_formitemsli");if(0!=c.length){var h="";c.each(function(a){a=$(this).attr("formid");h+=a+","});
a.formIds=h}e.deleteCategory(a,function(a){b.parents(".js_formcategory."+d.activeTab).remove();s.find(".js_other .j_formlist").prepend(g);f.notify("\u8868\u5355\u7c7b\u522b\u5220\u9664\u6210\u529f")})}})});s.on("click.FormPersonalView","#formmanagelist #custom-category .js_formcategory .js_categoryname",function(a){if(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver){a=$(this).text();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_updatecatename" maxLength\x3d"20"\x3e');0==$(this).find(".js_createcategory").length&&
($(this).before(b).hide(),b.focus().val(a))}});s.on("keydown.FormPersonalView",".js_updatecatename",function(a,b){var c=$(this),g=$.trim($(this).val()),h=$(this).next().text(),l=$(this).next().attr("id"),p=$(this).next().attr("type"),n={},s=a.keyCode||b;27==s?($(this).next().show(),c.val(h),$(this).remove()):13==s&&(""==g?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):g!=h?(n["formCategory.id"]=l,n["formCategory.name"]=g,n["formCategory.type"]=p,n.module=d.pageModule,e.updateCategoryName(n,
function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5206\u7c7b\u540d\u79f0\u4fee\u6539\u6210\u529f"),c.next().text(g).show(),c.remove())})):($(this).next().show(),$(this).remove()))});s.on("blur.FormPersonalView",".js_updatecatename",function(a){a=$.trim($(this).val());var b=$(this).next().text();a===b?($(this).next().show(),$(this).remove()):$(this).trigger("keydown.FormPersonalView",13)});s.on("mouseenter.FormPersonalView",".j_form-category",function(a){(null==$(this).parents(".js_cloudforms").get(0)||
d.isWeaver)&&$(this).find(".j_formcateInfo").removeClass("hide")});s.on("mouseleave.FormPersonalView",".form-category-hd",function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&$(this).find(".j_formcateInfo").addClass("hide")});$("body").on("relatedFlow.FormPersonalView",function(a,b,c){d.setFlowsequenceIcon(b,c)});s.on("click.FormPersonalView",".js_formtab li",function(a){a=$(this);s.find(".js_formtab li").removeClass("active");a.addClass("active");s.find(".js_searchkeyword").val("");
d.pageModule=a.attr("module");d.getPageModule();s.find(".js_forms").hide();s.find(".js_forms."+d.activeTab).show();"true"!=a.attr("data-load")&&d.rendertab()});s.on("click.FormPersonalView",".collectLog",function(b){b=$(this).parents(".js_formListBox").attr("formId");(new a({formId:b})).render()});s.on("click.FormPersonalView","#form-title",function(){switch(d.pageModule){case "biaoge":$(this).hasClass("j_entityslider-toggle")||f.notify("\u53d1\u5e03\u540e\u53ef\u586b\u5199")}});s.on("click.FormPersonalView",
".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+a)});s.on("click.FormPersonalView",".js_shareForm",function(){var a=this;if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5206\u53d1\uff01");else if($(this).parents(".js_formboxli").hasClass("collecting")){var c=$(this).attr("formId");e.getFiledByForm({formId:c},function(d){if(d.formFields&&0<d.formFields.length){d=
$(a).parents("ul").parents("li").find("#form-title").text();var e=$(a).parents("ul").parents("li").find("#form-describe").text();new b({container:"#baidushare",shareTitle:d,shareDesc:e,shareUrl:window.location.protocol+"//"+window.location.host+"/biaoge/fill/"+c});$("#distributeModal").modal("show")}else f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})}});s.on("confirmHandler.FormPersonalView",".j_employee",function(a,b){var c=$(this).parents("li"),d=c.attr("formid"),
c=c.find("#form-title").text(),g=b.objs;if(b&&g&&0<g.length){for(var h={},k=0;k<g.length;k++)h["userIds["+k+"]"]=g[k].id;h["form.id"]=d;h["form.name"]=c;e.incollect(h,function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})}else f.notify("\u8bf7\u9009\u62e9\u4eba\u5458\uff01")});s.on("click.FormPersonalView",".j_insideCollect",function(a,b){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5185\u90e8\u6536\u96c6\uff01"),
!1;var c=$(this).parents("ul").parents("li"),d=c.attr("formid");e.getFiledByForm({formId:d},function(a){a.formFields&&0!=a.formFields.length?c.find(".j_employee").click():f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})});s.on("click.FormPersonalView",".js_deleteForm",function(){if($(this).parents(".js_formitemsli").hasClass("collecting"))f.notify("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u505c\u7528\u8868\u5355\u540e\u91cd\u65b0\u64cd\u4f5c\uff01");else{var a=this,
b=$(this).attr("formId"),c=$(this).attr("type"),g={formId:b};"cloud"===c?d.deleteForm(a,g,c):e.findCount({formId:b},function(b){d.deleteForm(a,g,c,b.count)})}});s.on("click.FormPersonalView",".j_changeStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("target-status"),g=$(this).text(),h="",l={"form.id":b,"form.status":c};updateStatus=function(c){c&&e.updateStatus(l,function(c){c=c.form.status;if("j_biaoge"==d.activeTab){var e=$(a).parents(".js_formitemsli");switch(c){case "disable":h=
"\u5df2\u505c\u6b62";e.find("#form-title").removeClass("j_entityslider-toggle");e.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");e.removeClass("collecting unpublished").addClass("stopped");e.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+b+'"\x3e\u91cd\u65b0\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "enable":h="\u6536\u96c6\u4e2d",e.find("#form-title").addClass("j_entityslider-toggle"),e.find(".reportConfig-btn").addClass("dropdown-menu-toggle"),
e.removeClass("stopped unpublished").addClass("collecting"),e.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+b+'"\x3e\u505c\u6b62\x3c/a\x3e\x3c/li\x3e')}e.find(".j_gatherStatus \x3e a").html(h+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}else if("j_workflow"==d.activeTab)switch(e=$(a).parents(".js_formitemsli"),$(a).attr("target-status",c),c){case "disable":h="\u542f\u7528";$(a).find("span").text(h);e.find("#form-title").removeClass("j_entityslider-toggle");
e.removeClass("collecting").addClass("unpublished");e.find(".icon-lock").removeClass("unlock").attr("title","\u5df2\u505c\u7528\u7684\u8868\u5355");break;case "enable":h="\u505c\u7528",$(a).find("span").text(h),e.find("#form-title").addClass("j_entityslider-toggle"),e.removeClass("unpublished").addClass("collecting"),e.find(".icon-lock").addClass("unlock").attr("title","\u5df2\u542f\u7528\u7684\u8868\u5355")}f.notify("\u8868\u5355\u72b6\u6001\u4fee\u6539\u6210\u529f")})};f.confirm("\u786e\u5b9a\u8981"+
g+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});s.on("click.FormPersonalView",".js_useflow",function(a){$(this);a=$(this).attr("formId");var b=$(this).parents(".js_formitemsli").find("#form-title").text(),c={"form.id":a,"form.name":b,"form.ownership":"personal",module:"workflow"};f.confirm("\u4f7f\u7528\u5ba1\u6279\u540e\u6570\u636e\u5c06\u4e0d\u53ef\u518d\u67e5\u770b\uff0c\u662f\u5426\u786e\u5b9a\u4f7f\u7528\u5ba1\u6279\uff1f",function(a){a&&d.model.useflow(c,function(a){a.message?f.notify(a.message):
ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/formsPersonal",{trigger:!0})})})});s.on("click.FormPersonalView",".js_changeFormStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("status"),d=$(this).text(),g={"form.id":b,"form.status":c},h=$(a).parents(".js_formitemsli").attr("formtype");updateStatus=function(c){c&&e.updateStatus(g,function(c){c=c.form.status;var g="";if("enable"==c)g="personal"==h?"\u505c\u7528":"\u4e0b\u67b6","\u505c\u7528"==g&&$(a).parents(".js_formitemsli").find("#form-title").addClass("j_entityslider-toggle"),
$(a).parents(".js_formitemsli").find(".icon-lock").hide(),$(a).parents(".js_formitemsli").find(".j_formRecommend").show();else if("disable"==c){g="personal"==h?"\u542f\u7528":"\u53d1\u5e03";"\u542f\u7528"==g&&$(a).parents(".js_formitemsli").find("#form-title").removeClass("j_entityslider-toggle");$(a).parents(".js_formitemsli").find(".icon-lock").show();$(a).parents(".js_formitemsli").find(".j_formRecommend").hide();var k=$(a).parents(".js_formitemsli").find(".j_star"),l=k.data("recommend");0==l&&
e.recommend({formId:b,recommend:l},function(a){k.data("recommend",1);k.removeClass("icon-star").addClass("icon-star-empty").attr("title","\u63a8\u8350")})}$(a).attr("status",c);$(a).text(g);f.notify("\u8868\u5355\u5df2"+d)})};f.confirm("\u786e\u5b9a\u8981"+d+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)})},cloneeForm:function(){var a=$(this.tpl).siblings("#formitems.j_biaoge").find(".js_formitemsli").clone();a.find(".j_fillCount").html("0\u4efd\u6570\u636e");a.find("#form-title").html("\u67e5\u770b\u4ecb\u7ecd");
a.addClass("unpublished");var b=$(this.tpl).siblings(".js_formcategory.j_biaoge").find(".j_formlist").clone();b.attr("id","intro_clonee");b.append(a);$(this.el).find(".js_forms.j_biaoge .js_form-list").append(b)},ifShowIntro:function(a){var b=this,c=b.model,d={},e;d["config.configKey"]="guide.biaoge.showintro";c.queryIntroCount(d,function(c){0>$("body").find(".j_form-personal").length||(1==!c.introCount?(1>a?(e="N",b.cloneeForm()):e="Y",b.renderIntro(e)):1>a?$(".j_biaoge .js_form-list").show().append('\x3cdiv id\x3d"noformsShow" class\x3d"j_no_my_workflow no-result"\x3e\u6682\u65e0\u8868\u5355\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u201c\u65b0\u5efa\u8868\u5355\u201d\u6765\u521b\u5efa\u8868\u5355\uff0c\u6216\u5728\x3ca class\x3d"router" href\x3d"forms/'+
TEAMS.currentUser.id+'/cloud"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\u4e2d\u9009\u62e9\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/div\x3e'):$("#noformsShow").remove())})},renderIntro:function(a){var b=this;$("body").addClass("introjs-open");var c="\x3ch5\x3e\u83dc\u5355\u533a\x3c/h5\x3e1\u3001\u201c\u6211\u7684\u8868\u5355\u201d\u53ef\u4ee5\u7ba1\u7406\u81ea\u5df1\u521b\u5efa\u7684\u8868\u5355\uff1b\x3cbr\x3e2\u3001\u201c\u4e91\u8868\u5355\u5e93\u201d\u53ef\u6311\u9009\u9002\u5408\u81ea\u5df1\u7684\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e";
TEAMS.currentUser.admin&&(c="\x3ch5\x3e\u83dc\u5355\u533a\x3c/h5\x3e1\u3001\u201c\u6211\u7684\u8868\u5355\u201d\u53ef\u4ee5\u7ba1\u7406\u81ea\u5df1\u521b\u5efa\u7684\u8868\u5355\uff1b\x3cbr\x3e2\u3001\u201c\u56e2\u961f\u8868\u5355\u201d\u7ba1\u7406\u5458\u53ef\u5171\u4eab\u8868\u5355\u4fe1\u606f\uff1b\x3cbr\x3e3\u3001\u201c\u6210\u5458\u8868\u5355\u201d\u7ba1\u7406\u5458\u53ef\u67e5\u770b\u56e2\u961f\u6210\u5458\u8868\u5355\u4fe1\u606f\uff1b\x3cbr\x3e4\u3001\u201c\u4e91\u8868\u5355\u5e93\u201d\u53ef\u6311\u9009\u9002\u5408\u81ea\u5df1\u6216\u56e2\u961f\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e");
introJs().setOptions({showStepNumbers:!1,steps:[{element:".aside .j_aside-nav",intro:c,position:"right"},{element:".j_toolList .j_formIntroduction",intro:"\x3ch5\x3e\u65b0\u5efa\x3c/h5\x3e1\u3001\u65b0\u5efa\u5206\u7c7b\u53ef\u66f4\u597d\u7ba1\u7406\u60a8\u7684\u8868\u5355\uff1b\x3cbr\x3e2\u3001\u70b9\u51fb\u65b0\u5efa\u8868\u5355\u521b\u5efa\u65b0\u7684\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e",position:"left"},{element:".js_forms.j_biaoge .js_formitemsli",intro:"\x3ch5\x3e\u8868\u5355\u6982\u51b5\x3c/h5\x3e1\u3001\u5bf9\u8868\u5355\u57fa\u672c\u4fe1\u606f\u8fdb\u884c\u7ba1\u7406\uff0c\u5305\u62ec\u7f16\u8f91\u9884\u89c8\u7b49\uff1b\x3cbr\x3e2\u3001\u5185\u90e8\u6536\u96c6\uff0c\u4ee5\u5ba1\u6279\u5f62\u5f0f\u5206\u53d1\u7ed9\u56e2\u961f\u6210\u5458\u6536\u96c6\u6570\u636e\uff1b\x3cbr\x3e3\u3001\u5916\u90e8\u5206\u53d1\uff0c\u5206\u4eab\u94fe\u63a5\u81f3\u670b\u53cb\u5708\u6536\u96c6\u6570\u636e\uff1b\x3cbr\x3e\x3cbr\x3e",
position:"right"},{element:".js_forms.j_biaoge .j_fillCount",intro:"\x3ch5\x3e\u6570\u636e\u6536\u96c6\u7edf\u8ba1\x3c/h5\x3e\u53ef\u5bf9\u6536\u96c6\u7684\u6570\u636e\u8fdb\u884c\u591a\u7ef4\u5ea6\u7edf\u8ba1\u5206\u6790\uff1b\x3cbr\x3e\x3cbr\x3e",position:"right"}]}).onbeforechange(function(a){}).onchange(function(a){}).oncomplete(function(){b.introSaveConf(a)}).onexit(function(){b.introSaveConf(a)}).start().refresh()},introSaveConf:function(a){window.onbeforeunload=null;$("body").removeClass("introjs-open");
$.ajax({type:"POST",data:{"config.configKey":"guide.biaoge.showintro","config.configValue":"1"},dataType:"json",url:"/base/configuration/saveConfig.json",success:function(a){}});$("#intro_clonee").remove();"N"==a?$(".j_biaoge .js_form-list").show().append('\x3cdiv id\x3d"noformsShow" class\x3d"j_no_my_workflow no-result"\x3e\u6682\u65e0\u8868\u5355\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u201c\u65b0\u5efa\u8868\u5355\u201d\u6765\u521b\u5efa\u8868\u5355\uff0c\u6216\u5728\x3ca class\x3d"router" href\x3d"forms/'+
TEAMS.currentUser.id+'/cloud"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\u4e2d\u9009\u62e9\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/div\x3e'):"Y"==a&&$("#noformsShow").remove()},render:function(){var a=$(this.el),b=this.tpl,b=$(b).siblings("#formmanage-container");a.html(b.html());this.rendertab()},getPageModule:function(){this.activeTab="j_"+this.pageModule;
switch(this.pageModule){case "biaoge":this.param.queryType="formManange";break;case "workflow":this.param.queryType="flowManange"}},rendertab:function(){var a=$(this.el);this.getPageModule();f.layout(this.el+" .js_forms."+this.activeTab);a.find(".js_forms."+this.activeTab+" #formlist-loading").show();a.find(".js_forms.j_"+this.pageModule).show();a.find(".js_formtab li[module\x3d'"+this.pageModule+"']").attr("data-load","true").addClass("active");switch(this.pageModule){case "biaoge":a.find(".js_cloud").attr("href",
"forms/"+this.userId+"/cloud");break;case "workflow":a.find(".js_cloud").attr("href","workflows/"+this.userId+"/formcloud")}a=this.param;a.pageNo=1;this.renderPersonalForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},drag:function(){var a=this,b=a.model;$(a.el).find(".js_forms."+a.activeTab+" .js_form-list #custom-category ul.form-list,.js_forms."+a.activeTab+" .js_form-list #other-category ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist").sortable({placeholder:"form-placeholder",
connectWith:".js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist",update:function(b,c){a.buildCount($(this));a.buildSerialNumber($(this));c.item.data("update",!0)},receive:function(a,b){b.item.data("receive",!0)},stop:function(c,d){if(d.item.data("update"))if(d.item.data("update",!1),d.item.data("receive")){d.item.data("receive",!1);var e=d.item.attr("formid"),g=d.item.parents(".js_formcategory."+
a.activeTab).find(".form-category-hd .js_categoryname").attr("id");b.updateCategory({"form.id":e,"formCategory.id":g},function(b){b.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(d.item))})}else a.sort(d.item)}})},loadCateAndForms:function(a,b,c){$(this.el);c=this.tpl;var d=b.find("#custom-category");b=b.find("#other-category");a=a.formCategories;for(var e in a){var f=a[e],g=f.name,h=f.id,l=f.sort,n=f.forms,m=n.length,q=f.type,f=$(c).siblings(".js_formcategory."+this.activeTab);
"\u5176\u4ed6"==g?f.addClass("js_other").find(".j_form-category").removeClass("j_form-category"):f.find(".js_categoryname").attr("id",h).attr("sort",l).attr("type",q);f.find(".js_categoryname").text(g);f.find(".js_categoryname").attr("title",g);f.find(".form-acount").text("("+m+")");for(var E in n)g=n[E],h=f.find(".j_formlist"),l=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderPersonalForm(g,h,l);f.hasClass("js_other")?b.append(f):d.append(f);this.buildSerialNumber(f.find(".j_formlist"))}},
renderPersonalForms:function(a){var b=this,c=b.model,d=$(b.el);"j_biaoge"==b.activeTab?a.module="biaoge":"j_workflow"==b.activeTab&&(a.module="workflow");c.findCateAndPersonal(a,function(a){var e=d.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");b.loadCateAndForms(a,e,"personal");"j_biaoge"==b.activeTab?(a=d.find(".js_forms.j_biaoge .js_formitemsli").length,b.ifShowIntro(a)):0==d.find(".js_forms.j_workflow .js_formitemsli").length?d.find(".js_forms.j_workflow .js_noresult").removeClass("hide"):
d.find(".js_forms.j_workflow .js_formboxli").addClass("hide");d.find(".js_forms."+b.activeTab+" #formlist-loading").hide();b.drag();d.find(".js_forms."+b.activeTab+" .js_form-list #custom-category").sortable({handle:".form-category-hd",update:function(a,b){b.item.data("update",!0)},stop:function(a,d){if(d.item.data("update")){b.sortCategory($(this));var e={};$(this).find(".js_formcategory."+b.activeTab+" #cate-name .js_categoryname").each(function(a){e["formCategories["+a+"].id"]=$(this).attr("id");
e["formCategories["+a+"].sort"]=$(this).attr("sort")});c.formCategorSort(e,function(a){a.message||($(".js_updatecatename").trigger("keydown.FormListView",13),f.notify("\u8868\u5355\u5206\u7c7b\u6392\u5e8f\u6210\u529f"))})}}})})},renderFlowForm:function(a,b,c,e){var f=a.name,g=a.describe,h=a.status,l=a.id,n=a.sort;a=a.statPro;"enable"==h?(c.find(".js_changeFormStatus").text("\u505c\u7528"),c.find(".icon-lock").hide()):"disable"==h?(c.find(".js_changeFormStatus").text("\u542f\u7528"),c.find("#form-title").removeClass("j_entityslider-toggle"),
c.find(".icon-lock").show()):"submit"==h&&(c.find(".js_changeFormStatus").text("\u542f\u7528"),c.find("#form-title").removeClass("j_entityslider-toggle"),c.find(".icon-lock").show());"1"==a&&c.find(".isGn").show();c.attr("formid",l).attr("sort",n);c.find("#form-title").text(f);c.find("#form-title").attr("title",f);c.find("#form-title").attr("data-id",l);if(void 0==g||""===g)g="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-describe").text(g);
c.find("#form-describe").attr("title",g);c.find(".js_changeFormStatus").attr("formId",l);c.find(".js_changeFormStatus").attr("status",h);c.find(".js_editForm").attr("formId",l);c.find(".js_copyForm").attr("formId",l);c.find(".js_renameForm").attr("formId",l);c.find(".js_deleteForm").attr("formId",l);c.find(".js_formPreview").attr("formId",l);c.find(".js_formstat").attr("href","/workflows/"+TEAMS.currentUser.id+"/formstat/"+l);c.find("#form-number").css("background-color",d.getRandomColor());c.find("#flowSequence").attr("data-id",
l);c.find("#flowSequence").attr("data-value",l);c.find(".js_serNumRule").attr("formId",l).attr("data-id",l);"prepend"===e?b.prepend(c):b.append(c)},renderBiageForm:function(a,b,c,e){c=this.tpl;$(this.el);var f=a.name,g=a.describe,h=a.id,l=a.fillCount;c=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli");c.find("#form-number").css("background-color",d.getRandomColor());c.attr("formid",h).attr("sort",a.sort);c.attr("formid",h);c.find(".js_formPreview").attr("formId",h);c.find("#form-title").text(f);
c.find("#form-title").attr("title",f);c.find("#form-title").attr("data-id",h);c.find("#form-title").attr("userId",this.userId);if(void 0==g||""===g)g="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-describe").text(g);c.find("#form-describe").attr("title",g);c.find(".js_renameForm").attr("formId",h);c.find(".js_editForm").attr("formId",h);c.find(".js_shareForm").attr("formId",h);c.find(".js_copyForm").attr("formId",
h);c.find(".js_deleteForm").attr("formId",h);c.find(".js_formListBox").attr("formId",h);c.find(".j_fillCount").text(l+"\u4efd\u6570\u636e");c.find(".j_fillCount").attr("href","/forms/"+TEAMS.currentUser.id+"/form-manager/"+h);c.find(".js_useflow").attr("formId",h);c.find(".js_reportConf").attr("formId",h);c.find(".js_authConfig").attr("formId",h);c.find(".js_continueWrite").attr("formId",h);c.find(".form-message").addClass("hide").hide();c.find("#form-title").attr("renderType","notRelateFlow");c.find(".js_relateFlow").attr("formId",
h);c.find(".js_relateFlow").attr("data-id",h);c.find(".js_serNumRule").attr("formId",h).attr("data-id",h);this.createStatus(c,a);"prepend"==e?b.prepend(c):b.append(c);this.buildSerialNumber(b)},renderPersonalForm:function(a,b,c,d){switch(this.pageModule){case "biaoge":this.renderBiageForm(a,b,c,d);break;case "workflow":this.renderFlowForm(a,b,c,d)}},renderPersonalKeyword:function(a){var b=$(this.el),c=$(this.tpl),d=b.find(".js_forms."+this.activeTab+" .js_form-list"),b=c.siblings("#search-boxlist").find(".j_Search."+
this.activeTab).clone();d.html(b);var b=d.find(".js_searchlist"),e=a.formPage,f=e.result;a=a.pageNo;d.find("#pageNo").val(a);a=d.find(".j_Search."+this.activeTab+" .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;d.find(".j_Search."+this.activeTab+" .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?d.find(".js_noresult").show():d.find(".js_noresult").hide();e.hasNext?d.find("#loadMore").show():d.find("#loadMore").hide();for(d=0;d<f.length;d++)e=
f[d],a=c.siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderPersonalForm(e,b,a,"append");this.buildSerialNumber(b)},renderKeywords:function(a){var b=this,c=b.model,d=$(b.el);a.pageSize=1E7;c.findPersonal(a,function(a){b.renderPersonalKeyword(a);d.find("#loadMore").attr("isKeyword","isKeyword")})},deleteForm:function(a,b,c,d){var e=this,g=e.model,h=$(a).parents(".j_formlist");"cloud"===c&&(h=$(a).parents("#cloudformul"));var l=function(c){c&&g.deleteForm(b,function(b){b.message?
f.notify(b.message):($(a).parents("li").remove(),f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),e.buildCount(h),e.buildSerialNumber(h))})};"cloud"===c?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",l):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+d+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",l)},buildSerialNumber:function(a){this.buildCount(a);a.find(".js_formitemsli").each(function(a){$(this).find("#form-number").text(a+
1)})},buildCount:function(a){var b=a.parents(".js_formcategory."+this.activeTab).find(".js_formitemsli").length;a.parents(".js_formcategory."+this.activeTab).find(".js_formcount").text("("+b+")")},sortCategory:function(a){a.find(".js_formcategory."+this.activeTab).each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var b=this.model,c={},d=a.prevAll(),e=a.next(),g=a.prev(),h=a.parents(".j_formlist").find(".js_formitemsli").eq(0);d.each(function(a){c["forms["+
a+"].id"]=$(this).attr("formid")});(d=parseInt(e.attr("sort"))+1)||(d=parseInt(g.attr("sort")));var g=h.attr("formid"),h=parseInt(h.attr("sort")),e=a.attr("formid"),l=a.parents(".js_formcategory."+this.activeTab).find(".form-category-hd .js_categoryname").attr("id");c.formId=e;c.sort=d;c.categoryId=l;49990<=h&&(c.firstFormId=g);b.sort(c,function(b){b.sort&&a.attr("sort",b.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});b.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},
createStatus:function(a,b){var c=b.status,d=b.id,e="";if("j_biaoge"==this.activeTab){switch(c){case "submit":e="\u672a\u53d1\u5e03";a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");a.removeClass("collecting stopped").addClass("unpublished");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"submit" formid\x3d"'+d+'"\x3e\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "disable":e=
"\u5df2\u505c\u6b62";a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");a.removeClass("collecting unpublished").addClass("stopped");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+d+'"\x3e\u91cd\u65b0\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "enable":e="\u6536\u96c6\u4e2d",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("stopped unpublished").addClass("collecting"),
a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+d+'"\x3e\u505c\u6b62\x3c/a\x3e\x3c/li\x3e')}a.find(".j_gatherStatus \x3e a").html(e+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}else if("j_workflow"==this.activeTab)switch(c){case "submit":case "disable":e="\u542f\u7528";a.find("#form-title").removeClass("j_entityslider-toggle");a.removeClass("collecting").addClass("unpublished");a.find(".j_changeStatus").attr("formid",d);a.find(".j_changeStatus").attr("target-status",
c);a.find(".j_changeStatus \x3e span").text(e);a.find(".icon-lock").removeClass("unlock").attr("title","\u5df2\u505c\u7528\u7684\u8868\u5355");break;case "enable":e="\u505c\u7528",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("unpublished").addClass("collecting"),a.find(".j_changeStatus").attr("formid",d),a.find(".j_changeStatus").attr("target-status",c),a.find(".j_changeStatus \x3e span").text(e),a.find(".icon-lock").addClass("unlock").attr("title","\u5df2\u542f\u7528\u7684\u8868\u5355")}},
remove:function(){$(this.el).off(".FormPersonalView");this.formoperationView&&(this.formoperationView.remove(),this.formoperationView=null);this.header&&(this.header.remove(),this.header=null)},setFlowsequenceIcon:function(a,b){"show"==b?$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(".form-message").show():$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(" .form-message").hide()}});m.exports=h});
define("teams/form/formcompanyview","teams/utils teams/component/validation teams/form/formmanagemodel teams/form/formoperationview teams/component/entityslider teams/component/typeahead teams/formmanage/formdistributeview teams/formmanage/formloglistview teams/formmanage/formcollectloglistview teams/component/filter teams/form/formcolor teams/form/formreportconfigview teams/form/formauthconfigview teams/form/formcontinuewriteview".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");
var e=h("teams/form/formmanagemodel"),c=h("teams/form/formoperationview");h("teams/component/entityslider");h("teams/component/typeahead");var b=h("teams/formmanage/formdistributeview"),a=h("teams/formmanage/formloglistview"),d=h("teams/formmanage/formcollectloglistview"),g=h("teams/component/filter"),l=h("teams/form/formcolor"),n=h("teams/form/formreportconfigview"),k=h("teams/form/formauthconfigview"),r=h("teams/form/formcontinuewriteview");h=Backbone.View.extend({initialize:function(a){this.userId=
a.userId;this.el=a.container?a.container:"#j_workflowcenter";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.type=a.type;this.tpl=f.template("form.formcompany",{isWeaver:this.isWeaver,isAdmin:this.isAdmin});this.model=new e(a);this.loadmoreType="list";this.pageModule=a.pageModule||"biaoge";this.param={}},getPageModule:function(){this.activeTab="j_"+this.pageModule;switch(this.pageModule){case "biaoge":this.param.queryType=
"formManange";break;case "workflow":this.param.queryType="flowManange"}},delegateEvents:function(){var e=this,h=e.model,l=$(e.tpl),m=$(e.el);m.off("click.FormCompanyView",".js_reportConf").on("click.FormCompanyView",".js_reportConf",function(){var a=$(this).attr("formId");e.formreportconfigview=new n({parentEl:e.el,userId:e.userId,formId:a,callback:function(a){e.formreportconfigview.hide()}});e.formreportconfigview.render()});m.on("click.FormCompanyView",".j_dataReportConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||
$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u64cd\u4f5c\uff01"),!1});m.on("click.FormCompanyView",".js_authConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u4e0a\u62a5\uff01"),!1;var a=$(this).attr("formId");h.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)e.formauthconfigview=
new k({parentEl:e.el,userId:e.userId,formId:a,callback:function(a){e.formauthconfigview.hide()}}),e.formauthconfigview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u4e0a\u62a5\uff01"),!1})});m.on("click.FormCompanyView",".js_continueWrite",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u6301\u7eed\u586b\u5199\uff01"),!1;
var a=$(this).attr("formId");h.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)e.formcontinuewriteview=new r({parentEl:e.el,userId:e.userId,formId:a,callback:function(a){e.formcontinuewriteview.hide()}}),e.formcontinuewriteview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u6301\u7eed\u586b\u5199\uff01"),!1})});m.on("click.FormCompanyView",".js_wfAuthConfig",function(){if("disable"==$(this).parents(".js_formmanag").find(".js_changeFormStatus").attr("status"))return f.notify("\u8bf7\u542f\u7528\u540e\u518d\u64cd\u4f5c\uff01"),
!1;var a=$(this).attr("formId");h.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)e.formcontinuewriteview=new r({parentEl:e.el,userId:e.userId,formId:a,workflowConfig:!0,callback:function(a){e.formcontinuewriteview.hide()}}),e.formcontinuewriteview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u64cd\u4f5c\uff01"),!1})});$("body").on("click.FormCompanyView",".goto-top",function(a){f.gotoTop(".js_forms."+e.activeTab)});m.on("click.FormCompanyView",
".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+a)});m.on("click.FormCompanyView",".js_shareForm",function(){var a=this;if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5206\u53d1\uff01");else if($(this).parents(".js_formboxli").hasClass("collecting")){var c=$(this).attr("formId");h.getFiledByForm({formId:c},function(d){if(d.formFields&&0<d.formFields.length){d=
$(a).parents("ul").parents("li").find("#form-title").text();var e=$(a).parents("ul").parents("li").find("#form-describe").text();new b({container:"#baidushare",shareTitle:d,shareDesc:e,shareUrl:window.location.protocol+"//"+window.location.host+"/biaoge/fill/"+c});$("#distributeModal").modal("show")}else f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})}});m.on("confirmHandler.FormCompanyView",".j_employee",function(a,b){var c=$(this).parents("li"),d=c.attr("formid"),
c=c.find("#form-title").text(),e=b.objs;if(b&&e&&0<e.length){for(var g={},k=0;k<e.length;k++)g["userIds["+k+"]"]=e[k].id;g["form.id"]=d;g["form.name"]=c;h.incollect(g,function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})}else f.notify("\u8bf7\u9009\u62e9\u4eba\u5458\uff01")});m.on("click.FormCompanyView",".j_insideCollect",function(a,b){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5185\u90e8\u6536\u96c6\uff01"),
!1;var c=$(this).parents("ul").parents("li"),d=c.attr("formid");h.getFiledByForm({formId:d},function(a){a.formFields&&0!=a.formFields.length?c.find(".j_employee").click():f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})});m.on("click.FormCompanyView",".js_formLog",function(){var b=$(this).attr("formId");(new a({formId:b})).render();$("#formlog-dialog").modal("show")});m.on("click.FormCompanyView",".js_deleteForm",function(){var a=this,b=$(this).attr("formId"),
c=$(this).attr("type"),d={formId:b};"cloud"===c?e.deleteForm(a,d,c):h.findCount({formId:b},function(b){e.deleteForm(a,d,c,b.count)})});m.on("click.FormCompanyView",".js_copyForm",function(){var a=$(this).attr("formId"),b=$(this).parents(".js_formListBox").find("#form-title").text(),d={},g=TEAMS.currentUser.admin?!0:!1;d.formId=a;d.module=e.pageModule;d.el="#copy-form";d.formTitle=b;d.ownership="company";d.tpl=f.template("flow.formcopy",{userId:e.userId,operationtype:"\u590d\u5236",admin:g});d.formId=
a;d.copyCallback=function(a){if("company"==a.form.ownership){var b=m.find(".js_forms."+e.activeTab+" .js_form-list .js_other .j_formlist"),c=l.siblings("#formitems."+e.activeTab).find(".js_formitemsli").clone();e.renderForm(a.form,b,c,"prepend");e.sort(c)}};e.formoperationView=new c(d);e.formoperationView.render()});m.on("click.FormCompanyView",".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});m.on("click.FormCompanyView",".js_renameForm",function(){var a=
$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=$('\x3cinput type\x3d"text" name\x3d"formTitle" style\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+a+"\x3e"),b=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();$(this).parents(".js_formListBox").find("#form-title").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(b)}});
m.on("blur.FormCompanyView",'input[name\x3d"formTitle"]',function(){var a=$(this).attr("formId"),b=$.trim($(this).val()),c=this;if(""==b||b==$(c).prev().text())$(c).prev().show(),$(c).remove();else{var d={};d.formId=a;d.formName=$.trim(b);d.ownership="company";h.renameForm(d,function(a){(a=a.message)?f.notify(a):($(c).prev().text(b).attr("title",b).show(),$(c).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});m.on("keydown.FormCompanyView",'input[name\x3d"formTitle"]',function(a){a=
a.keyCode;var b=$.trim($(this).val());27==a?($(this).prev().show(),$(this).remove()):13==a&&(""==b||b==$(this).prev().text()?($(this).prev().show(),$(this).remove()):$(this).trigger("blur.FormCompanyView"))});m.on("click.FormCompanyView",".j_changeStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("target-status"),d=$(this).text(),g="",k={"form.id":b,"form.status":c};updateStatus=function(c){c&&h.updateStatus(k,function(c){c=c.form.status;if("j_biaoge"==e.activeTab){var d=$(a).parents(".js_formitemsli");
switch(c){case "disable":g="\u5df2\u505c\u6b62";d.find("#form-title").removeClass("j_entityslider-toggle");d.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");d.removeClass("collecting unpublished").addClass("stopped");d.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+b+'"\x3e\u91cd\u65b0\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "enable":g="\u6536\u96c6\u4e2d",d.find("#form-title").addClass("j_entityslider-toggle"),
d.find(".reportConfig-btn").addClass("dropdown-menu-toggle"),d.removeClass("stopped unpublished").addClass("collecting"),d.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+b+'"\x3e\u505c\u6b62\x3c/a\x3e\x3c/li\x3e')}d.find(".j_gatherStatus \x3e a").html(g+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}else if("j_workflow"==e.activeTab)switch(d=$(a).parents(".js_formitemsli"),$(a).attr("target-status",c),c){case "disable":g="\u542f\u7528";
$(a).find("span").text(g);d.find("#form-title").removeClass("j_entityslider-toggle");d.removeClass("collecting").addClass("unpublished");d.find(".icon-lock").removeClass("unlock").attr("title","\u5df2\u505c\u7528\u7684\u8868\u5355");break;case "enable":g="\u505c\u7528",$(a).find("span").text(g),d.find("#form-title").addClass("j_entityslider-toggle"),d.removeClass("unpublished").addClass("collecting"),d.find(".icon-lock").addClass("unlock").attr("title","\u5df2\u542f\u7528\u7684\u8868\u5355")}f.notify("\u8868\u5355\u72b6\u6001\u4fee\u6539\u6210\u529f")})};
f.confirm("\u786e\u5b9a\u8981"+d+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});m.off("click.FormCompanyView",".js_buildNewForm").on("click.FormCompanyView",".js_buildNewForm",function(){var a={el:"#build-newform"};a.tpl=f.template("biaoge.formnew");a.ownership="company";a.module=e.pageModule;a.saveCallback=function(a){[].push(a.form);for(var b=m.find(".js_forms."+e.activeTab+" .js_form-list .js_categoryname"),c,d=0;d<b.length;d++){if(a.form.formCategory){if(a.form.formCategory.id==b[d].id){c=b[d];
break}}else{c=b[b.length-1];break}var f=$(c).parents(".js_formcategory."+e.activeTab).find(".j_formlist"),g=l.siblings("#formitems."+e.activeTab).find(".js_formitemsli").clone();e.renderForm(a.form,f,g,"prepend");m.find("#noformsShow").remove();e.buildSerialNumber(g)}f=$(c).parents(".js_formcategory."+e.activeTab).find(".j_formlist");g=l.siblings("#formitems."+e.activeTab).find(".js_formitemsli").clone();e.renderForm(a.form,f,g,"prepend");m.find("#noformsShow").remove();e.sort(g)};e.formoperationView=
new c(a);e.formoperationView.render()});m.on("click.FormCompanyView",".icon-search",function(a){a=m.find(".js_searchkeyword");a=$.trim(a.val());var b=e.param;e.model.pageNo=1;b.pageNo=e.model.pageNo;b["formParam.keyword"]=a;m.find(".js_forms."+e.activeTab+" .js_form-list").empty();a?e.renderKeywords(b):e.renderCompanyForms(e.param)});m.on("keyup.FormCompanyView",".js_searchkeyword",function(a){13==(a?a:window.event?window.event:null).keyCode&&m.find(".icon-search").click()});m.on("click.FormCompanyView",
".js_newcategory",function(a){a=l.siblings(".js_formcategory."+e.activeTab).clone().attr("id","newCateId");a.find(".j_formcateInfo").remove();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_createcategory" placeholder\x3d"\u5206\u7c7b\u540d\u79f0(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)" maxLength\x3d"20"\x3e');a.find(".js_categoryname").append(b);var c=m.find(".js_forms."+e.activeTab+" .js_form-list #custom-category #newCateId");1==c.size()?c.find(".js_createcategory").focus():
(m.find(".js_forms."+e.activeTab+" .js_form-list #custom-category").prepend(a),b.focus())});m.on("blur.FormCompanyView",".js_createcategory",function(a){$(this);var b=$.trim($(this).val());a=$(this).attr("placeholder");var c=$(this).parent(),d=$(this).parents(".js_formcategory."+e.activeTab);b==a||""==b?$(".js_forms."+e.activeTab+" .js_form-list #newCateId").remove():h.createCategory({"formCategory.name":b,"formCategory.type":"company",module:e.pageModule},function(a){a.message?f.notify(a.message):
(c.empty().text(b).next().text("(0)"),c.attr("id",a.formCategory.id),d.removeAttr("id"),f.notify("\u65b0\u5efa\u8868\u5355\u5206\u7c7b\u6210\u529f"),e.drag())})});m.on("keydown.FormCompanyView",".js_createcategory",function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).val(""),$(this).parents(".js_formcategory."+e.activeTab).remove()):13==a&&(""==b?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):$(this).trigger("blur.FormCompanyView"))});m.on("mouseenter.FormCompanyView",
"#custom-category #cate-name",function(a){e.isAdmin&&(null==$(this).parents(".js_cloudforms").get(0)||e.isWeaver)&&(0<$(this).parents(".js_other").length||0==$(this).find(".js_createcategory").length&&(0!=$(this).find(".js_formcount .js_deletecategory").length?$(this).find(".js_formcount .js_deletecategory").show():$(this).find(".js_formcount").append('\x3ca class\x3d"js_deletecategory btn-delecategory" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e')))});m.on("mouseleave.FormCompanyView","#custom-category #cate-name",
function(a){$(this).find(".js_formcount .js_deletecategory").hide()});m.on("click.FormCompanyView",".js_deletecategory",function(a){var b=$(this);f.confirm("\u5220\u9664\u5206\u7c7b\u540e\uff0c\u8be5\u5206\u7c7b\u7684\u8868\u5355\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u5176\u4ed6\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5206\u7c7b\uff1f",function(a){if(a){a={"formCategory.id":b.parents("#cate-name").find(".js_categoryname").attr("id")};var c=b.parents(".js_formcategory."+e.activeTab).find(".j_formlist"),
d=c.html(),c=c.find(".js_formitemsli");if(0!=c.length){var g="";c.each(function(a){a=$(this).attr("formid");g+=a+","});a.formIds=g}h.deleteCategory(a,function(a){b.parents(".js_formcategory."+e.activeTab).remove();m.find(".js_other .j_formlist").prepend(d);f.notify("\u8868\u5355\u7c7b\u522b\u5220\u9664\u6210\u529f")})}})});m.on("click.FormCompanyView","#formmanagelist #custom-category .js_formcategory .js_categoryname",function(a){if(e.isAdmin&&(null==$(this).parents(".js_cloudforms").get(0)||e.isWeaver)){a=
$(this).text();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_updatecatename" maxLength\x3d"20"\x3e');0==$(this).find(".js_createcategory").length&&($(this).before(b).hide(),b.focus().val(a))}});m.on("keydown.FormCompanyView",".js_updatecatename",function(a,b){var c=$(this),d=$.trim($(this).val()),e=$(this).next().text(),g=$(this).next().attr("id"),k=$(this).next().attr("type"),l={},n=a.keyCode||b;27==n?(c.val(e),$(this).next().show(),$(this).remove()):13==n&&(""==d?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):
d!=e?(l["formCategory.id"]=g,l["formCategory.name"]=d,l["formCategory.type"]=k,h.updateCategoryName(l,function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5206\u7c7b\u540d\u79f0\u4fee\u6539\u6210\u529f"),c.next().text(d).show(),c.remove())})):($(this).next().show(),$(this).remove()))});m.on("blur.FormCompanyView",".js_updatecatename",function(a){a=$.trim($(this).val());var b=$(this).next().text();a===b?($(this).next().show(),$(this).remove()):$(this).trigger("keydown.FormCompanyView",
13)});m.on("mouseenter.FormCompanyView",".j_form-category",function(a){(null==$(this).parents(".js_cloudforms").get(0)||e.isWeaver)&&$(this).find(".j_formcateInfo").removeClass("hide")});m.on("mouseleave.FormCompanyView",".form-category-hd",function(a){(null==$(this).parents(".js_cloudforms").get(0)||e.isWeaver)&&$(this).find(".j_formcateInfo").addClass("hide")});$("body").on("relatedFlow.FormCompanyView",function(a,b,c){e.setFlowsequenceIcon(b,c)});m.on("mouseenter.FormCompanyView","#forms-filter",
function(a){var b=$(this).attr("data-toggle");e.filter=new g({el:b,module:"formmanage",targetObj:$(this),userId:e.userId});e.filter.render(a);a=setTimeout(function(){$(b).slideDown("fast")},300);$(this).data("showTimer",a);$(this).addClass("open")}).on("mouseleave.FormCompanyView","#forms-filter",function(a){a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100);$(this).removeClass("open")}).on("filter.FormCompanyView","#forms-filter",
function(a){h.pageNo=1;e.search({pageNo:h.pageNo,pageSize:1E6})});m.on("click.FormCompanyView","#form-filter-dropdown .filter-item",function(a){h.pageNo=1;e.search({pageNo:h.pageNo,pageSize:1E6})});m.on("click.FormCompanyView",".js_formtab li",function(a){a=$(this);m.find(".js_formtab li").removeClass("active");m.find(".js_searchkeyword").val();a.addClass("active");e.pageModule=a.attr("module");e.getPageModule();m.find(".js_forms").hide();m.find(".js_forms."+e.activeTab).show();"true"!=a.attr("data-load")&&
e.rendertab()});m.on("click.FormCompanyView",".collectLog",function(a){a=$(this).parents(".js_formboxli").attr("formId");(new d({formId:a})).render()});m.on("click.FormCompanyView","#form-title",function(){switch(e.pageModule){case "biaoge":e.isAdmin&&($(this).hasClass("j_entityslider-toggle")||f.notify("\u53d1\u5e03\u540e\u53ef\u586b\u5199"))}});m.on("click.FormCompanyView",".js_useflow",function(a){$(this);a=$(this).attr("formId");var b=$(this).parents(".js_formitemsli").find("#form-title").text(),
c={"form.id":a,"form.name":b,"form.ownership":"company",module:"workflow"};f.confirm("\u4f7f\u7528\u5ba1\u6279\u540e\u6570\u636e\u5c06\u4e0d\u53ef\u518d\u67e5\u770b\uff0c\u662f\u5426\u786e\u5b9a\u4f7f\u7528\u5ba1\u6279\uff1f",function(a){a&&e.model.useflow(c,function(a){a.message?f.notify(a.message):ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/forms",{trigger:!0})})})});m.on("click.FormCompanyView",".js_changeFormStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("status"),
d=$(this).text(),e={"form.id":b,"form.status":c},g=$(a).parents(".js_formitemsli").attr("formtype");updateStatus=function(c){c&&h.updateStatus(e,function(c){c=c.form.status;var e="";if("enable"==c)e="company"==g?"\u505c\u7528":"\u4e0b\u67b6","\u505c\u7528"==e&&$(a).parents(".js_formitemsli").find("#form-title").addClass("j_entityslider-toggle"),$(a).parents(".js_formitemsli").find(".icon-lock").hide(),$(a).parents(".js_formitemsli").find(".j_formRecommend").show();else if("disable"==c){e="company"==
g?"\u542f\u7528":"\u53d1\u5e03";"\u542f\u7528"==e&&$(a).parents(".js_formitemsli").find("#form-title").removeClass("j_entityslider-toggle");$(a).parents(".js_formitemsli").find(".icon-lock").show();$(a).parents(".js_formitemsli").find(".j_formRecommend").hide();var k=$(a).parents(".js_formitemsli").find(".j_star"),l=k.data("recommend");0==l&&h.recommend({formId:b,recommend:l},function(a){k.data("recommend",1);k.removeClass("icon-star").addClass("icon-star-empty").attr("title","\u63a8\u8350")})}$(a).attr("status",
c);$(a).text(e);f.notify("\u8868\u5355\u5df2"+d)})};f.confirm("\u786e\u5b9a\u8981"+d+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});m.on("click.FormCompanyView",".js_form-list .j_Search.j_biaoge .js_loadMore",function(a){e.model.pageNo++;a={pageNo:e.model.pageNo};"list"==e.loadmoreType?e.rendertab(a):"keyword"==e.loadmoreType&&e.renderKeywords(a)})},render:function(){var a=$(this.el),b=this.tpl,b=$(b).siblings("#formmanage-container");a.html(b.html());a.find(".return_js").attr("href","/workflows/"+
this.userId+"/new");this.getPageModule();this.rendertab()},rendertab:function(){var a=$(this.el);this.getPageModule();f.layout(this.el+" .js_forms."+this.activeTab);a.find(".js_forms."+this.activeTab+" #formlist-loading").show();a.find(".js_forms.j_"+this.pageModule).show();a.find(".js_formtab li[module\x3d'"+this.pageModule+"']").attr("data-load","true").addClass("active");switch(this.pageModule){case "biaoge":a.find(".js_cloud").attr("href","forms/"+this.userId+"/cloud");break;case "workflow":a.find(".js_cloud").attr("href",
"workflows/"+this.userId+"/formcloud")}this.isAdmin||a.find(".j_formIntroduction").remove();a=this.param;a.pageNo=1;this.renderCompanyForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},drag:function(){var a=this,b=a.model;$(a.el).find(".js_forms."+a.activeTab+" .js_form-list #custom-category ul.form-list,.js_forms."+a.activeTab+" .js_form-list #other-category ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist").sortable({placeholder:"form-placeholder",connectWith:".js_forms."+
a.activeTab+" .js_form-list ul.form-list,.js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist",update:function(b,c){a.buildCount($(this));c.item.data("update",!0)},receive:function(a,b){b.item.data("receive",!0)},stop:function(c,d){if(d.item.data("update"))if(d.item.data("update",!1),d.item.data("receive")){d.item.data("receive",!1);var e=d.item.attr("formid"),g=d.item.parents(".js_formcategory").find(".form-category-hd .js_categoryname").attr("id");
b.updateCategory({"form.id":e,"formCategory.id":g},function(b){b.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(d.item))})}else a.sort(d.item)}})},loadCateAndForms:function(a,b,c){$(this.el);c=this.tpl;var d=b.find("#custom-category");b=b.find("#other-category");a=a.formCategories;for(var e in a){var f=a[e],g=f.name,h=f.id,k=f.sort,l=f.forms,n=l.length,r=f.type,f=$(c).siblings(".js_formcategory."+this.activeTab);"\u5176\u4ed6"==g?f.addClass("js_other").find(".j_form-category").removeClass("j_form-category"):
f.find(".js_categoryname").attr("id",h).attr("sort",k).attr("type",r);f.find(".js_categoryname").text(g);f.find(".js_categoryname").attr("title",g);f.find(".form-acount").text("("+n+")");for(var m in l)g=l[m],h=f.find(".j_formlist"),k=null,k=this.isAdmin?$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone():$(c).siblings("#fei-formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderForm(g,h,k);f.hasClass("js_other")?b.append(f):d.append(f);this.buildSerialNumber(f.find(".j_formlist"))}},
renderCompanyForms:function(a){var b=this;b.loadmoreType="list";var c=b.model,d=$(b.el);"j_biaoge"==b.activeTab?a.module="biaoge":"j_workflow"==b.activeTab&&(a.module="workflow");c.findCateAndCompany(a,function(a){var e=d.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");b.loadCateAndForms(a,e,"company");d.find(".js_forms."+b.activeTab+" #formlist-loading").hide();b.isAdmin?(b.drag(),d.find(".js_forms."+b.activeTab+" .js_form-list #custom-category").sortable({handle:".form-category-hd",
update:function(a,b){b.item.data("update",!0)},stop:function(a,d){if(d.item.data("update")){b.sortCategory($(this));var e={};$(this).find(".js_formcategory."+b.activeTab+" #cate-name .js_categoryname").each(function(a){e["formCategories["+a+"].id"]=$(this).attr("id");e["formCategories["+a+"].sort"]=$(this).attr("sort")});c.formCategorSort(e,function(a){a.message||($(".js_updatecatename").trigger("keydown.FormCompanyView",13),f.notify("\u8868\u5355\u5206\u7c7b\u6392\u5e8f\u6210\u529f"))})}}})):(e.find(".j_formcateInfo").remove(),
e.find("#form-title").removeClass("j_entityslider-toggle"));"j_biaoge"==b.activeTab?0<d.find(".js_forms.j_biaoge .js_formitemsli").length?d.find("#noformsShow").remove():b.isAdmin?$(".j_biaoge .js_form-list").show().append('\x3cdiv id\x3d"noformsShow" class\x3d"j_no_my_workflow no-result"\x3e\u6682\u65e0\u8868\u5355\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u201c\u65b0\u5efa\u8868\u5355\u201d\u6765\u521b\u5efa\u8868\u5355\uff0c\u6216\u5728\x3ca class\x3d"router" href\x3d"forms/'+TEAMS.currentUser.id+'/cloud"\x3e\u4e91\u8868\u5355\u5e93\x3c/a\x3e\u4e2d\u9009\u62e9\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e\x3ca class\x3d"btn btn-sm btn-success js_buildNewForm"\x3e\x3ci class\x3d"icon-plus-thin glyphicon"\x3e\x3c/i\x3e\u65b0\u5efa\u8868\u5355\x3c/a\x3e\x3c/div\x3e'):
d.find(".js_forms."+b.activeTab+" .js_noresult").show():0==d.find(".js_forms."+b.activeTab+" .js_formitemsli").length?d.find(".js_forms."+b.activeTab+" .js_noresult").show():d.find(".js_forms."+b.activeTab+" .js_noresult").hide()})},renderFlowForm:function(a,b,c,d){var e=a.name,f=a.describe,g=a.status,h=a.id,k=a.sort;a=a.statPro;"enable"==g?(c.find(".js_changeFormStatus").text("\u505c\u7528"),c.find(".icon-lock").hide()):"disable"==g?(c.find(".js_changeFormStatus").text("\u542f\u7528"),c.find("#form-title").removeClass("j_entityslider-toggle"),
c.find(".icon-lock").show()):"submit"==g&&(c.find(".js_changeFormStatus").text("\u542f\u7528"),c.find("#form-title").removeClass("j_entityslider-toggle"),c.find(".icon-lock").show());"1"==a&&c.find(".isGn").show();c.attr("formid",h).attr("sort",k);c.find("#form-title").text(e);c.find("#form-title").attr("title",e);c.find("#form-title").attr("data-id",h);if(void 0==f||""===f)f="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-describe").text(f);
c.find("#form-describe").attr("title",f);c.find(".js_changeFormStatus").attr("formId",h);c.find(".js_changeFormStatus").attr("status",g);c.find(".js_editForm").attr("formId",h);c.find(".js_copyForm").attr("formId",h);c.find(".js_renameForm").attr("formId",h);c.find(".js_deleteForm").attr("formId",h);c.find(".js_wfAuthConfig").attr("formId",h);c.find(".js_formPreview").attr("formId",h);c.find(".js_formstat").attr("href","/workflows/"+TEAMS.currentUser.id+"/formstat/"+h);c.find("#form-number").css("background-color",
l.getRandomColor());c.find("#flowSequence").attr("data-id",h);c.find("#flowSequence").attr("data-value",h);c.find(".js_serNumRule").attr("formId",h).attr("data-id",h);"prepend"===d?b.prepend(c):b.append(c)},renderBiageForm:function(a,b,c,d){var e=a.name,f=a.describe,g=a.id,h=a.sort,k=a.fillCount;"1"==a.statPro&&c.find(".isGn").show();c.find("#form-number").css("background-color",l.getRandomColor());c.attr("formid",g).attr("sort",h);c.find("#form-title").text(e);c.find("#form-title").attr("title",
e);c.find("#form-title").attr("data-id",g);c.find("#form-title").attr("userId",this.userId);if(void 0==f||""===f)f="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-describe").text(f);c.find("#form-describe").attr("title",f);c.find(".js_editForm").attr("formId",g);c.find(".js_shareForm").attr("formId",g);c.find(".js_formLog").attr("formId",g);c.find(".js_copyForm").attr("formId",g);c.find(".js_renameForm").attr("formId",
g);c.find(".js_deleteForm").attr("formId",g);c.find(".js_formPreview").attr("formId",g);c.find("#flowSequence").attr("data-id",g);c.find("#flowSequence").attr("data-value",g);c.find(".j_fillCount").text(k+"\u4efd\u6570\u636e");c.find(".j_fillCount").attr("href","/forms/"+TEAMS.currentUser.id+"/form-manager/"+g);c.find(".js_useflow").attr("formId",g);c.find(".js_reportConf").attr("formId",g);c.find(".js_continueWrite").attr("formId",g);c.find(".js_authConfig").attr("formId",g);c.find(".form-message").addClass("hide").hide();
c.find("#form-title").attr("renderType","notRelateFlow");c.find(".js_relateFlow").attr("formId",g);c.find(".js_relateFlow").attr("data-id",g);c.find(".js_serNumRule").attr("formId",g).attr("data-id",g);this.createStatus(c,a);"prepend"===d?b.prepend(c):b.append(c);this.buildSerialNumber(b)},renderForm:function(a,b,c,d){switch(this.pageModule){case "biaoge":this.renderBiageForm(a,b,c,d);break;case "workflow":this.renderFlowForm(a,b,c,d)}},renderCompanyKeyword:function(a){var b=$(this.el),c=$(this.tpl),
d=b.find(".js_forms."+this.activeTab+" .js_form-list"),b=c.siblings("#search-boxlist").find(".j_Search."+this.activeTab).clone();d.html(b);var b=d.find(".js_searchlist"),e=a.formPage,f=e.result;a=a.pageNo;d.find("#pageNo").val(a);a=d.find(".j_Search."+this.activeTab+" .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;d.find(".j_Search."+this.activeTab+" .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?d.find(".js_noresult").show():d.find(".js_noresult").hide();
e.hasNext?d.find("#loadMore").show():d.find("#loadMore").hide();for(d=0;d<f.length;d++)e=f[d],a=null,a=this.isAdmin?c.siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone():c.siblings("#fei-formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderForm(e,b,a,"append");this.isAdmin||(b.find(".j_formcateInfo").remove(),b.find("#form-title").removeClass("j_entityslider-toggle"));this.buildSerialNumber(b)},renderKeywords:function(a){var b=this;b.loadmoreType="keyword";var c=
b.model,d=$(b.el),e=$.trim(d.find(".js_searchkeyword").val());a["formParam.keyword"]=e;a.pageSize=20;c.findCompany(a,function(a){b.renderCompanyKeyword(a);d.find("#loadMore").attr("isKeyword","isKeyword")})},deleteForm:function(a,b,c,d){var e=this,g=e.model,h=$(a).parents(".j_formlist");"cloud"===c&&(h=$(a).parents("#cloudformul"));var k=function(c){c&&g.deleteForm(b,function(b){b.message?f.notify(b.message):($(a).parents("li").remove(),f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),e.buildCount(h),
e.buildSerialNumber(h))})};"cloud"===c?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",k):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+d+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",k)},buildSerialNumber:function(a){this.buildCount(a);a.find(".js_formitemsli").each(function(a){$(this).find("#form-number").text(a+1)})},buildCount:function(a){var b=a.parents(".js_formcategory."+this.activeTab).find(".js_formitemsli").length;a.parents(".js_formcategory."+
this.activeTab).find(".js_formcount").text("("+b+")")},sortCategory:function(a){a.find(".js_formcategory."+this.activeTab).each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var b=this.model,c={},d=a.prevAll(),e=a.next(),g=a.prev(),h=a.parents(".j_formlist").find(".js_formitemsli").eq(0);d.each(function(a){c["forms["+a+"].id"]=$(this).attr("formid")});(d=parseInt(e.attr("sort"))+1)||(d=parseInt(g.attr("sort")));var g=h.attr("formid"),h=parseInt(h.attr("sort")),
e=a.attr("formid"),k=a.parents(".js_formcategory."+this.activeTab).find(".form-category-hd .js_categoryname").attr("id");c.formId=e;c.sort=d;c.categoryId=k;49990<=h&&(c.firstFormId=g);b.sort(c,function(b){b.sort&&a.attr("sort",b.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});b.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},createStatus:function(a,b){var c=b.status,d=b.id,e="";if("j_biaoge"==this.activeTab){switch(c){case "submit":e="\u672a\u53d1\u5e03";
a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");a.removeClass("collecting stopped").addClass("unpublished");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"submit" formid\x3d"'+d+'"\x3e\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "disable":e="\u5df2\u505c\u6b62";a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");
a.removeClass("collecting unpublished").addClass("stopped");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+d+'"\x3e\u91cd\u65b0\u53d1\u5e03\x3c/a\x3e\x3c/li\x3e');break;case "enable":e="\u6536\u96c6\u4e2d",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("stopped unpublished").addClass("collecting"),a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+
d+'"\x3e\u505c\u6b62\x3c/a\x3e\x3c/li\x3e')}a.find(".j_gatherStatus \x3e a").html(e+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}else if("j_workflow"==this.activeTab)switch(c){case "submit":case "disable":e="\u542f\u7528";a.find("#form-title").removeClass("j_entityslider-toggle");a.removeClass("collecting").addClass("unpublished");a.find(".j_changeStatus").attr("formid",d);a.find(".j_changeStatus").attr("target-status",c);a.find(".j_changeStatus \x3e span").text(e);a.find(".icon-lock").removeClass("unlock").attr("title",
"\u5df2\u505c\u7528\u7684\u8868\u5355");break;case "enable":e="\u505c\u7528",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("unpublished").addClass("collecting"),a.find(".j_changeStatus").attr("formid",d),a.find(".j_changeStatus").attr("target-status",c),a.find(".j_changeStatus \x3e span").text(e),a.find(".icon-lock").addClass("unlock").attr("title","\u5df2\u542f\u7528\u7684\u8868\u5355")}},remove:function(){$(this.el).off(".FormCompanyView");this.formoperationView&&(this.formoperationView.remove(),
this.formoperationView=null);this.header&&(this.header.remove(),this.header=null)},setFlowsequenceIcon:function(a,b){"show"==b?$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(".form-message").show():$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(" .form-message").hide()},search:function(a){$(this.el);var b=$("#formstatus-filter .filter-item .checked");1==b.length&&(a["form.status"]=b.data("entity"));b=$("#relatedstatus-filter .filter-item .checked");1==b.length&&(a["form.relateFlow"]=
b.data("entity"));"j_biaoge"==this.activeTab?a.module="biaoge":"j_workflow"==this.activeTab&&(a.module="workflow");this.filterCompanyForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},filterCompanyForms:function(a){var b=this,c=b.model,d=$(b.el),e=$(b.tpl);c.findCompany(a,function(a){d.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");var c=d.find(".js_forms."+b.activeTab+" .js_form-list"),f=e.siblings("#search-boxlist").find(".j_Search."+b.activeTab).clone();
null==c.find(".j_Search."+b.activeTab).get(0)&&c.html(f);var f=c.find(".js_searchlist"),g=a.formPage.result,h;for(h in g){var k=g[h],l=e.siblings("#formitems."+b.activeTab).find(".js_formitemsli").clone();b.renderForm(k,f,l,"append")}a=a.formPage;1==a.pageNo&&0==a.result.length?c.find(".js_noresult").show():c.find(".js_noresult").hide();a.hasNext?c.find("#loadMore").show():c.find("#loadMore").hide();b.buildSerialNumber(f);d.find("#formlist-loading").hide()})}});m.exports=h});
define("teams/form/formdatareportlistview",["teams/utils","teams/form/formdatareportmodel","teams/component/filter"],function(h,q,m){var f=h("teams/utils"),e=h("teams/form/formdatareportmodel"),c=h("teams/component/filter");h=Backbone.View.extend({initialize:function(b){this.userId=b.userId;this.type=b.type;this.el=b.container||"#j_formContent";this.model=new e(b);$(this.el).html(f.template("form.formdatareportlist"))},render:function(){var b=this;b.model.search(b._getParam(),function(a){$("#reportlist-loading").hide();
1==a.page.pageNo&&0==a.page.result.length?($(".j_no_my_datareport").show(),$("#report-list").hide()):($("#report-list").show(),$(".j_no_my_datareport").hide());a.page.hasNext?$(".js_more").show():$(".js_more").hide();1==b.model.pageNo&&$("#report-list").empty();b._renderList(a.page.result);$("#reportlist-loading").addClass("hide");f.layout(b.el)})},delegateEvents:function(){var b=this,a=this.model,d=$(b.el);d.on("click.FormDataReportList",".js_more",function(){a.pageNo=1*a.pageNo+1;b.render();$(this).hide()});
$("body").on("click.FormDataReportList",".goto-top",function(a){f.gotoTop(b.el)});d.on("click.FormDataReportList",".orderType",function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");a.pageNo=1;b.render()});d.on("search.FormDataReportList","#report-keywords",function(){a.pageNo=1;b.render()});d.on("keyup.FormDataReportList","#report-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});d.on("click.FormDataReportList",
"li.search .icon-search",function(){d.find("#report-keywords").trigger("search")});d.on("keyup.FormDataReportList","#report-list",function(a){a=a.which;if(38==a){var c=b.getPrev();c&&c.trigger("click")}40==a&&(a=b.getNext())&&a.trigger("click")});d.on("mouseenter.FormDataReportList","#datareport-filter",function(a){var d=$(this).attr("data-toggle");b.filter||(b.filter=new c({el:d,module:"formdatareport",targetObj:$(this),userId:b.userId}),b.filter.render(a));a=setTimeout(function(){$(d).slideDown("fast")},
300);$(this).data("showTimer",a);$(this).addClass("open")}).on("mouseleave.FormDataReportList","#datareport-filter",function(a){a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100);$(this).removeClass("open")}).on("filter.FormDataReportList","#datareport-filter",function(c){a.pageNo=1;b.render()});d.on("click.FormDataReportList","li.datareport",function(a){$(this).removeClass("unread");$(this).removeClass("newComment");
b._highLight($(this).attr("id"))})},_getParam:function(){var b={},a={};a.type="subordinates"===this.type?"subordinates":"mine";a.status="subordinates"!=this.type?this.type:null;a.order={property:$("#j_order_list").find(".active a").attr("data-entity")};$("#report-keywords").val()==$("#report-keywords").attr("placeholder")?a.keywords=null:a.keywords=$("#report-keywords").val().trim()||null;a.creators=this.filter?this.filter.managers:null;a.reportGtDate=$("#report-time-begin").val()||null;a.reportLtDate=
$("#report-time-end").val()||null;a.formIds=this.filter?this.filter.comments:null;b.userId=this.userId;b.filter=a;return b},_rebuildSN:function(){f.rebuildSN($("#report-list"))},_highLight:function(b){b?f.highLight("#j_formContent",b):f.highLight("#j_formContent",$("#j_formContent").find("li:first").attr("id"))},_renderList:function(b){for(var a=0;a<b.length;a++){var c=$("#report-clone").clone(),e=b[a];c.find(".date").html(Date.create(e.createTime).format("{yyyy}-{MM}-{dd}"));c.attr("id",e.id);c.attr("href",
"/forms/"+this.userId+"/"+e.id);c.attr("userId",this.userId);c.attr("data-id",e.id);c.attr("renderType",this.type);c.find(".text").html(e.name);"subordinates"===this.type&&c.find(".user").html(e.reporter.username);"finshed"===e.status&&c.find(".text").addClass("finished-line");e.unread&&c.addClass("unread");e.newConment&&c.addClass("newComment");$("#report-list").append(c)}this._rebuildSN()},remove:function(){this.undelegateEvents();$(this.el).off(".FormDataReportList");this.filter&&(this.filter.remove(),
this.filter=null)}});m.exports=h});
define("teams/form/formreportconfigview",["teams/utils","teams/component/typeahead","teams/component/validation","teams/utils"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h("teams/component/validation");f=h("teams/utils");h=Backbone.View.extend({initialize:function(c){this.formId=c.formId;this.type=c.type;this.el="#form-report-config";this.callback=c.callback;this.userId=c.userId;this.parentEl=c.parentEl?c.parentEl:"body";$(this.parentEl).append(f.template("form.formreportconfig"))},delegateEvents:function(){var c=
this;$(c.el).on("shown.bs.modal.ReportConfig",function(b){b=$(c.el).find("#user-select").find("option:selected").attr("value");"user"==b?e({el:c.el+" #userContainer #typeahead-report-employee",callback:function(a){if(a&&!$.isEmptyObject(a)){var b=$(c.el).find("#userContainer .j_selected");c.renderTypeheader(b,a)}}}):"department"==b&&e({el:c.el+" #departmentContainer #typeahead-report-department",callback:function(a){if(a&&!$.isEmptyObject(a)){var b=$(c.el).find("#departmentContainer .j_selected");
c.renderTypeheader(b,a)}}})});$(c.el).on("hidden.bs.modal.ReportConfig",function(b){$(b.target).hasClass("datepicker")||c.remove()});$(c.el).off("change.ReportConfig",".j_reportuser-select select").on("change.ReportConfig",".j_reportuser-select select",function(){$(this);var b=$(c.el).find("#user-select").val();"user"==b?($(c.el).find(".j_userSelect").removeClass("hide"),$(c.el).find(".j_deptSelect").addClass("hide"),e({el:c.el+" #userContainer #typeahead-report-employee",callback:function(a){if(a&&
!$.isEmptyObject(a)){var b=$(c.el).find("#userContainer .j_selected");c.renderTypeheader(b,a)}}})):"department"==b?($(c.el).find(".j_userSelect").addClass("hide"),$(c.el).find(".j_deptSelect").removeClass("hide"),e({el:c.el+" #departmentContainer #typeahead-report-department",callback:function(a){if(a&&!$.isEmptyObject(a)){var b=$(c.el).find("#departmentContainer .j_selected");c.renderTypeheader(b,a)}}})):($(c.el).find(".j_userSelect").addClass("hide"),$(c.el).find(".j_deptSelect").addClass("hide"));
c.resetRepeatResult()});$(c.el).off("change.ReportConfig","#config-repeat-type").on("change.ReportConfig","#config-repeat-type",function(){var b=$(this).val();"everyday"==b?($(c.el).find("#week-repeat").addClass("hide"),$(c.el).find("#ford-back").addClass("hide"),$(c.el).find("#frequency-type").text("\u5929")):"everyWeek"==b?($(c.el).find("#week-repeat").removeClass("hide"),$(c.el).find("#ford-back").addClass("hide"),$(c.el).find("#frequency-type").text("\u5468")):"everyMonth"==b?($(c.el).find("#week-repeat").addClass("hide"),
$(c.el).find("#ford-back").removeClass("hide"),$(c.el).find("#frequency-type").text("\u6708")):($(c.el).find("#week-repeat").addClass("hide"),$(c.el).find("#ford-back").removeClass("hide"),$(c.el).find("#frequency-type").text("\u5b63\u5ea6"));c.resetRepeatResult()});$(c.el).off("click.ReportConfig",".j_start").on("click.ReportConfig",".j_start",function(){c.renderDatePicker(".j_start")});$(c.el).off("change.ReportConfig",".j_end-repeat").on("change.ReportConfig",".j_end-repeat",function(){var b=$(this).val();
"never"==b?($(c.el).find(".j_happen-times").addClass("hide"),$(c.el).find(".j_end-date").addClass("hide")):"number"==b?($(c.el).find(".j_happen-times").removeClass("hide"),$(c.el).find(".j_end-date").addClass("hide")):"date"==b&&($(c.el).find(".j_happen-times").addClass("hide"),$(c.el).find(".j_end-date").removeClass("hide"),$(c.el).find(".j_end").val(Date.create(new Date).format("{yyyy}-{MM}-{dd}")));c.resetRepeatResult()});$(c.el).off("click.ReportConfig",".j_end").on("click.ReportConfig",".j_end",
function(){c.renderDatePicker(".j_end")});$(c.el).off("change.ReportConfig","#forward-backward").on("change.ReportConfig","#forward-backward",function(){c.resetRepeatResult()});$(c.el).on("blur.ReportConfig","#frequency-input,#fb-days, .j_times",function(){c.resetRepeatResult()});$(c.el).off("click.ReportConfig","#week-repeat input[type\x3dcheckbox][name\x3drepeatWk]").on("click.ReportConfig","#week-repeat input[type\x3dcheckbox][name\x3drepeatWk]",function(){c.resetRepeatResult()});$(c.el).off("change.ReportConfig",
".j_end").on("change.ReportConfig",".j_end",function(){c.resetRepeatResult()});$(c.el).off("click.ReportConfig",".j_user_btn").on("click.ReportConfig",".j_user_btn",function(){c.resetRepeatResult()});$(c.el).off("click.ReportConfig",".j_dept_btn").on("click.ReportConfig",".j_dept_btn",function(){c.resetRepeatResult()});$(c.el).off("click.ReportConfig","#btn-close-conf").on("click.ReportConfig","#btn-close-conf",function(b){$(c.el).modal("hide")});$(c.el).off("click.ReportConfig","#save-config").on("click.ReportConfig",
"#save-config",function(){c.saveConfig()})},resetRepeatResult:function(){var c=$(this.el),b=c.find("#frequency-input").val(),a=c.find("#frequency-type").text(),d=c.find(".j_end-repeat").val(),b="\u6bcf"+b+a,e="",a=c.find("#config-repeat-type").val();if("everyWeek"==a)c.find("input[type\x3dcheckbox][name\x3drepeatWk]:checked").each(function(a){a=$(this).val();switch(a){case "sunday":a="\u661f\u671f\u65e5";break;case "monday":a="\u661f\u671f\u4e00";break;case "tuesday":a="\u661f\u671f\u4e8c";break;
case "wednesday":a="\u661f\u671f\u4e09";break;case "thursday":a="\u661f\u671f\u56db";break;case "friday":a="\u661f\u671f\u4e94";break;case "saturday":a="\u661f\u671f\u516d"}e=e+a+"\u3001"}),-1!=e.lastIndexOf("\u3001")&&(e=e.substring(0,e.length-1)),0<e.length&&(b=b+","+e);else if("everyMonth"==a||"everyQuarter"==a)var a=c.find("#forward-backward").val(),f=c.find("#fb-days").val(),b=b+",",b="forward"==a?b+("\u6b63\u6570\u7b2c"+f+"\u5929"):b+("\u5012\u6570\u7b2c"+f+"\u5929");"never"==d?b+=",\u6c38\u4e0d\u7ed3\u675f":
"number"==d?(d=c.find(".j_times").val(),b+=",\u5171"+d+"\u6b21"):"date"==d&&(d=c.find(".j_end").val(),b+=",\u622a\u6b62\u5230"+d);c.find(".j_resultLabel").text("\u7ed3\u679c:");c.find(".j_configResult").text(b)},renderTypeheader:function(c,b){if(b.length)for(var a=0;a<b.length;a++){var d=b[a],e=d.name,f=d.id;if(e&&f){var h='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e";c.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&(h=null)});c.append(h)}}else e=
b.name,f=b.id,e&&f&&(h='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+f+"\x3e"+e+"\x3c/a\x3e\x3c/span\x3e",c.find(".entity-item").each(function(a){f==$(this).find("a").attr("id")&&(h=null)}),c.append(h))},renderDatePicker:function(c){$(c).datetimepicker("hide");$(c).datetimepicker("remove");this.initDatePickerProperty(c,"yyyy-mm-dd","month","month");$(c).datetimepicker("show");$(c).datetimepicker().on("changeDate",function(b){(b=b.date)||(b="");b instanceof Date&&(b=b.format("{yyyy}-{MM}-{dd}"),
$(c).val(b))})},initDatePickerProperty:function(c,b,a,d){$(c).datetimepicker({format:b,language:"zh-CN",todayHighlight:!0,todayBtn:!0,autoclose:!0,initialDate:new Date,startView:a,minView:d,maxView:"decade",pickerPosition:"bottom-right",showMeridian:!1})},saveConfig:function(){var c=this,b=$(c.el);if(c.checkParam()){var a=[],d=$(c.el).find("#user-select").val();"user"==d?b.find("#userContainer .j_selected a").each(function(b){a.push($(this).attr("id"))}):"department"==d&&b.find("#departmentContainer .j_selected a").each(function(b){a.push($(this).attr("id"))});
d=c.buildReportData(d);b=JSON.stringify(a);d=JSON.stringify(d);$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/reportconfig.json",dataType:"json",data:'{"shares":'+b+',"reportConfigData":'+d+"}",success:function(a){c.callback(a);f.notify("\u8bbe\u7f6e\u6210\u529f")}})}},checkParam:function(){var c=$(this.el),b=/^[1-9]+[0-9]*]*$/,a=$(this.el).find("#user-select").val();if("user"==a){if(0==$(this.el).find("#userContainer .j_selected a").length)return f.notify("\u8bf7\u9009\u62e9\u4eba\u5458"),
!1}else if("department"==a&&0==$(this.el).find("#departmentContainer .j_selected a").length)return f.notify("\u8bf7\u9009\u62e9\u4eba\u5458"),!1;a=c.find("#frequency-input").val();if(!b.test(a))return f.notify("\u91cd\u590d\u9891\u7387\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;a=c.find("#config-repeat-type").val();if("everyWeek"==a&&0==c.find("input[type\x3d'checkbox'][name\x3d'repeatWk']:checked").length)return f.notify("\u8bf7\u8bbe\u7f6e\u5468\u91cd\u590d\u6761\u4ef6"),!1;if("everyMonth"==a){var d=
c.find("#fb-days").val();if(!b.test(d))return f.notify("\u6b63\u6570\u548c\u5012\u6570\u5929\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;if(31<d)return f.notify("\u6708\u4efd\u6b63\u6570\u548c\u5012\u6570\u5929\u6570\u4e0d\u80fd\u8d85\u8fc731\u5929"),!1}else if("everyQuarter"==a){d=c.find("#fb-days").val();if(!b.test(d))return f.notify("\u6b63\u6570\u548c\u5012\u6570\u5929\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1;if(92<d)return f.notify("\u5b63\u5ea6\u6b63\u6570\u548c\u5012\u6570\u5929\u6570\u4e0d\u80fd\u8d85\u8fc792\u5929"),
!1}var e=c.find(".j_start").val(),d=Date.create(new Date).format("{yyyy}-{MM}-{dd}");if(null==e||""==e)return f.notify("\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4"),!1;if(e<d)return f.notify("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f53\u5929"),!1;e=c.find(".j_end-repeat").val();if("number"==e){if(a=c.find(".j_times").val(),!b.test(a))return f.notify("\u53d1\u751f\u6b21\u6570\u5fc5\u987b\u4e3a\u6b63\u6574\u6570"),!1}else if("date"==e){b=c.find(".j_end").val();c=c.find(".j_start").val();
c=Date.create(c).format("{yyyy}-{MM}-{dd}");e=Date.create(b).format("{yyyy}-{MM}-{dd}");if(null==b||""==b)return f.notify("\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4"),!1;if(c==d&&e==d)return f.notify("\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u540c\u65f6\u4e3a\u5f53\u5929"),!1;if(e<c)return f.notify("\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65f6\u95f4"),!1;c=this.dateDiff(e,c);if("everyWeek"==a){if(7>c)return f.notify("\u5468\u91cd\u590d\u7ed3\u675f\u65e5\u671f\u548c\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e7\u5929"),
!1}else if("everyMonth"==a){if(31>c)return f.notify("\u6708\u91cd\u590d\u5f00\u59cb\u65e5\u671f\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e31\u5929"),!1}else if("everyQuarter"==a&&92>c)return f.notify("\u5b63\u5ea6\u91cd\u590d\u5f00\u59cb\u65e5\u671f\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e92\u5929"),!1}return!0},buildReportData:function(c){var b=$(this.el),a={};a.userType=c;a.formId=this.formId;c=b.find("#config-repeat-type").val();a.repeatType=c;a.frequency=b.find("#frequency-input").val();
var d="";if("everyWeek"==c)b.find("input[type\x3dcheckbox][name\x3drepeatWk]:checked").each(function(a){var c=$(this).val();d+=c;a!=b.find("input[type\x3dcheckbox][name\x3drepeatWk]:checked").length-1&&(d+=",")}),""!=d&&(a.weekCycles=d);else if("everyMonth"==c||"everyQuarter"==c)c=b.find("#forward-backward").val(),""!=c&&(a.forBackward=c),c=b.find("#fb-days").val(),""!=c&&(a.fbDays=c);c=b.find(".j_start").val();a.startDate=Date.create(c);c=b.find(".j_end-repeat").val();a.endType=c;"number"==c?a.repeatTimes=
b.find(".j_times").val():"date"==c&&(c=b.find(".j_end").val(),a.endDate=Date.create(c));a.configResult=b.find(".j_configResult").text();return a},dateDiff:function(c,b){var a,d;a=c.split("-");d=new Date(a[1]+"-"+a[2]+"-"+a[0]);a=b.split("-");return parseInt(Math.abs(d-new Date(a[1]+"-"+a[2]+"-"+a[0]))/1E3/60/60/24)},queryLastConfigResult:function(){var c=this,b=$(c.el);$.ajax({type:"post",url:"/reportconfig/queryLastConfig.json",dataType:"json",data:{formId:c.formId,userId:c.userId},success:function(a){var d=
a.rptConfig,e=a.rptScope;if(null!=d&&""!=d){for(a=0;a<e.length;a++){var f=e[a].userType,h=e[a].userTypeId,k=e[a].userTypeName;"user"==f?($(c.el).find("#user-select").find("option[value\x3d'user']").attr("selected",!0),$(c.el).find(".j_userSelect").removeClass("hide"),$(c.el).find(".j_deptSelect").addClass("hide"),f='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e",$(c.el).find("#userContainer .j_selected").append(f)):"department"==f?($(c.el).find("#user-select").find("option[value\x3d'department']").attr("selected",
!0),$(c.el).find(".j_userSelect").addClass("hide"),$(c.el).find(".j_deptSelect").removeClass("hide"),f='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e",$(c.el).find("#departmentContainer .j_selected").append(f)):($(c.el).find("#user-select").find("option[value\x3d'allpeople']").attr("selected",!0),$(c.el).find(".j_userSelect").addClass("hide"),$(c.el).find(".j_deptSelect").addClass("hide"))}a=d.repeatType;e=d.frequency;$(c.el).find("#frequency-input").val(e);
if("everyday"==a)$(c.el).find("#week-repeat").addClass("hide"),$(c.el).find("#ford-back").addClass("hide"),$(c.el).find("#frequency-type").text("\u5929"),$(c.el).find("#config-repeat-type").find("option[value\x3d'everyday']").attr("selected",!0);else if("everyWeek"==a)for($(c.el).find("#week-repeat").removeClass("hide"),$(c.el).find("#ford-back").addClass("hide"),$(c.el).find("#frequency-type").text("\u5468"),$(c.el).find("#config-repeat-type").find("option[value\x3d'everyWeek']").attr("selected",
!0),e=[],e=d.weekCycles.split(","),a=0;a<e.length;a++)b.find("input[type\x3dcheckbox][name\x3drepeatWk][value\x3d"+e[a]+"]").attr("checked","checked");else"everyMonth"==a?($(c.el).find("#week-repeat").addClass("hide"),$(c.el).find("#ford-back").removeClass("hide"),$(c.el).find("#frequency-type").text("\u6708"),$(c.el).find("#config-repeat-type").find("option[value\x3d'everyMonth']").attr("selected",!0)):($(c.el).find("#week-repeat").addClass("hide"),$(c.el).find("#ford-back").removeClass("hide"),
$(c.el).find("#frequency-type").text("\u5b63\u5ea6"),$(c.el).find("#config-repeat-type").find("option[value\x3d'everyQuarter']").attr("selected",!0)),a=d.forBackward,"forward"==a?$(c.el).find("#forward-backward").find("option[value\x3d'forward']").attr("selected",!0):$(c.el).find("#forward-backward").find("option[value\x3d'backward']").attr("selected",!0),a=d.fbDays,$(c.el).find("#fb-days").val(a);a=Date.create(d.startDate).format("{yyyy}-{MM}-{dd}");$(c.el).find(".j_start").val(a);a=d.endType;"never"==
a?($(c.el).find(".j_happen-times").addClass("hide"),$(c.el).find(".j_end-date").addClass("hide"),$(c.el).find(".j_end-repeat").find("option[value\x3d'never']").attr("selected",!0)):"number"==a?($(c.el).find(".j_happen-times").removeClass("hide"),$(c.el).find(".j_end-date").addClass("hide"),$(c.el).find(".j_end-repeat").find("option[value\x3d'number']").attr("selected",!0),a=d.repeatTimes,$(c.el).find(".j_happen-times .j_times").val(a)):"date"==a&&($(c.el).find(".j_happen-times").addClass("hide"),
$(c.el).find(".j_end-date").removeClass("hide"),$(c.el).find(".j_end-repeat").find("option[value\x3d'date']").attr("selected",!0),a=Date.create(d.endDate).format("{yyyy}-{MM}-{dd}"),$(c.el).find(".j_end-date .j_end").val(a));d=d.configResult;b.find(".setting-result .j_resultLabel").text("\u4e0a\u6b21\u914d\u7f6e\u7ed3\u679c:");b.find(".j_configResult").text(d)}}})},render:function(){$(this.el).modal("show");this.queryLastConfigResult();f.layout(".j_repeat_setting")},hide:function(){$(this.el).modal("hide")},
remove:function(){$(this.el).off(".ReportConfig");$("#form-report-config").remove()}});m.exports=h});
define("teams/form/biaogeformview",["teams/utils","teams/workflow/flowview","teams/workflow/formview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/flowview"),c=h("teams/workflow/formview");h=Backbone.View.extend({teams:{},initialize:function(b){this.userId=b.userId||TEAMS.currentUser.id;this.formId=b.formId;this.dataId=b.dataId;this.el=b.container||"#entitySlider";this.page=b.page;this.renderType=b.renderType;this.formView=new c},delegateEvents:function(){var b=this;$(b.el).on("click.BiaogeFormView",
".btn-save",function(a){var c=$(this);c.removeClass("btn-save");b.formView.submit({parentEl:$(".js-biaoge-form"),dataStatus:1,callback:function(a){c.addClass("btn-save");a.message?f.notify(a.message):($("body").trigger("slideClose"),f.notify("\u8868\u5355\u4fdd\u5b58\u6210\u529f"))}})})},render:function(){var b=this.renderType,a=$(this.el);switch(b){case "relateFlow":this.mainView=new e({userId:TEAMS.currentUser.id,formId:this.formId,renderType:"biaogeform"});this.mainView.render();break;case "notRelateFlow":this.mainView=
new c({userId:this.userId,formId:this.formId,parentEl:this.el});a.html(f.template("biaoge.form"));f.layout(this.el+" .j_formContainer");this.mainView.render({parentEl:a.find(".js-biaoge-form"),formId:this.formId,callback:function(a){}});break;case "loadForm":this.mainView=new c({userId:this.userId,dataId:this.dataId,parentEl:this.el}),a.html(f.template("biaoge.form")),f.layout(this.el+" .j_formContainer"),this.mainView.loadForm({parentEl:a.find(".js-biaoge-form"),dataId:this.dataId,readOnly:!0,callback:function(b){a.find(".j_form_title").text(b.form.name);
a.find(".j_action").hide()}})}},remove:function(){$(this.el).off(".BiaogeFormView");this.mainView&&(this.mainView.remove(),this.mainView=null);this.formView&&(this.formView.remove(),this.formView=null)}});m.exports=h});
define("teams/form/formcolor",function(h,q,m){m.exports={data:"#1cb1e7 #f9a900 #ffc32e #1cb1e7 #f75e8d #5ec9f7 #ff8f6a #3ac3b5 #78c16e #ff953d #78c16c #9b89b9 #78919d #5c6ac1 #5e97f7 #f75e8c #ff8f6a #3ac3b5 #9b89b9 #ff8f6a #a1897e #ff8f6a #9b89b9 #f75e8d #a1897e #ff953d #78c16e #3ac3b5 #a1897e #bd85cd #5ec9f7 #f75e5e #f7bf26 #5c6ac1 #f7bf26 #bd85cd #f75e5e #78919d #5ec9f7 #78c16e #f36666 #ff608f #7066e3 #ff784a #1acf8d #4693f9 #81d12c #7066e3 #b774d3 #81d12c #7066e3 #ff784a #00c3eb #ff9702 #3497f1 #81d12c #ff9700 #00c3eb #1acf8d #f96a6a #81d12c #b774d3 #ff608f #ff5e32 #df3030 #df3058 #46addd #5874bf #5ec956 #f15e4a".split(" "),getRandomColor:function(){var f=
this.data;return f[Math.floor(Math.random()*f.length)]},getColor:function(f){var e=this.data;f=f>e.length?e.length:f;return e[f]}}});
define("teams/form/formdatareportview",["teams/utils","teams/form/formdatareportmodel","teams/workflow/formview","teams/component/extendview","teams/component/validation"],function(h,q,m){var f=h("teams/utils"),e=h("teams/form/formdatareportmodel"),c=h("teams/workflow/formview"),b=h("teams/component/extendview"),a=h("teams/component/validation");h=Backbone.View.extend({initialize:function(a){this.model=new e(a);this.userId=a.userId||TEAMS.currentUser.id;this.id=a.id;this.formData=a.formData;this.closable=
a.closable;this.el=a.container||"#entitySlider";this.page=a.page;$(this.el).html(f.template("form.formdatareport"));this.formView=new c},delegateEvents:function(){var b=this,c=$(b.el);c.off("click.FormDataReport",".j_btn_back").on("click.FormDataReport",".j_btn_back",function(){f.confirm("\u786e\u8ba4\u8981\u9000\u56de\u4e0a\u62a5\u5417\uff1f",function(a){if(a){a={};var c={};a.status="todo";a.id=b.id;c.dataReport=a;c.userId=b.userId;b.model.update(c,function(a){a.actionMsg?f.notify(a.actionMsg.message):
(f.notify("\u5df2\u9000\u56de\u4e0a\u62a5"),0<$("#back_report").length&&$("#back_report").attr("dataId",b.formData).click(),"function"==typeof b.page.entityCallback&&b.page.entityCallback("back"));$(".j_btn_close").click()})}})});c.off("click.FormDataReport",".j_btn_save").on("click.FormDataReport",".j_btn_save",function(){if(!a.formValidateImm(c.find("#info-div")))return!1;var e=$(this).attr("status"),h=c.find("#datareport-submit,#datareport-save").removeClass("j_btn_save"),k={};k.parentEl=c.find("#datareport-form");
k.callback=function(a){h.addClass("j_btn_save");if(a&&a.actionMsg)return f.notify(a.actionMsg.message),!1;var c="";if(a&&a.formData&&a.formData.id){a=a.formData.id;var c="todo"===e?"\u6682\u5b58\u6210\u529f":"\u63d0\u4ea4\u6210\u529f",g={},k={};g.status=e;g.formData=a;g.name=$("#datareport-name").val();g.id=b.id;k.dataReport=g;k.userId=b.userId;b.model.update(k,function(a){f.notify(c);b.render();"function"==typeof b.page.entityCallback&&"finshed"===e&&b.page.entityCallback("finshed")})}else c="todo"===
e?"\u6682\u5b58\u5931\u8d25":"\u63d0\u4ea4\u5931\u8d25",f.notify(c)};b.formView.submit(k)})},render:function(){var a=this,b={};b.id=a.id;b.formData=a.formData;a.model.show(b,function(b){var c=b.dataReport,e=b.actionMsg;if(e&&e.message)return $(a.el).html(f.template("base.nopermission",{msg:e,module:"formdatareport",id:a.id})),$(a.el).find(".scrollwrapper").trigger("resizeSroll"),!1;a.id=b.dataReport.id;a.editable="todo"===c.status&&c.reporter.id==TEAMS.currentUser.id?!0:!1;a.backable="finshed"===
c.status&&4<c.permission?!0:!1;a._renderMenu(c);a._rendeTitle(c);a._renderForm(c);a._initComponent();c.formData&&(a.extendview.formDataId=c.formData);a._renderComponent(c);$(a.el).find(".scrollwrapper").trigger("resizeSroll");f.layout(a.el+" #reportContent")})},_initComponent:function(){this.extendview=new b({targetId:this.id,module:"formdatareport",container:"#datareport-info",parentEl:this.el})},_renderComponent:function(a){this.extendview.render(a)},_renderMenu:function(a){a=this.backable;this.editable?
$(this.el).find(".j_btn_save").show():$(this.el).find(".j_btn_save").hide();a?$(this.el).find(".j_btn_back").show():$(this.el).find(".j_btn_back").hide()},_rendeTitle:function(a){var b=$(this.el),c="",e="";a.creator&&a.creator.id&&(c=a.creator.id,e=a.creator.name);var f="";a.department&&a.department.name&&(f=a.department.name);var h=Date.create(a.createTime).format("{yyyy}-{MM}-{dd}");b.find("#applicants .applyUser_js").attr("userId",c).text(e).attr("title",e);b.find("#applicants .applyDepa_js").text(f);
b.find("#applicants .applyDate_js").val(h);b.find("#datareport-name").val(a.name).attr("disabled",!this.editable)},_renderForm:function(a){var b=$(this.el),c={};c.readOnly=!this.editable;c.parentEl=b.find("#datareport-form");c.callback=function(a){a.formLayout.layoutDetail&&b.find("#datareport-form").show();var c="(\u56e2\u961f)";"personal"==a.form.ownership&&(c="(\u4e2a\u4eba)");b.find("#formName").text(a.form.name);b.find("#ownership").text(c)};a.formData?(c.dataId=a.formData,this.formView.loadForm(c)):
(c.formId=a.formId,c.layoutId=a.formLayout,this.formView.render(c))},remove:function(){this.undelegateEvents();$(this.el).off(".FormDataReport");this.filter&&(this.filter.remove(),this.filter=null);this.formView&&(this.formView.remove(),this.formView=null)}});m.exports=h});
define("teams/form/formemployeeview","teams/utils teams/component/validation teams/form/formmanagemodel teams/component/entityslider teams/component/typeahead teams/formmanage/formdistributeview teams/formmanage/formloglistview teams/component/filter teams/form/formoperationview teams/form/formcolor".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");var e=h("teams/form/formmanagemodel");h("teams/component/entityslider");h("teams/component/typeahead");var c=h("teams/formmanage/formdistributeview"),
b=h("teams/formmanage/formloglistview");h("teams/component/filter");var a=h("teams/form/formoperationview"),d=h("teams/form/formcolor");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.el=a.container?a.container:"#j_workflowcenter";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.type=a.type;this.tpl=f.template("form.formemployee",{isWeaver:this.isWeaver,isAdmin:this.isAdmin});
this.model=new e(a);this.loadmoreType="list";this.pageModule=a.pageModule||"biaoge";this.activeTab="j_"+this.pageModule},delegateEvents:function(){var d=this,e=d.model,h=$(d.tpl),k=$(d.el);$("body").on("click.FormEmployeeView",".goto-top",function(a){f.gotoTop(".js_forms."+d.activeTab)});k.on("click.FormEmployeeView",".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+a)});k.on("click.FormEmployeeView",".js_shareForm",function(){if($(this).parents(".js_formboxli").hasClass("unpublished"))f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5206\u53d1\uff01");
else if($(this).parents(".js_formboxli").hasClass("collecting")){var a=$(this).attr("formId"),b=$(this).parent().parent().find("#form-title").text(),d=$(this).parent().parent().find("#form-describe").text();new c({container:"#baidushare",shareTitle:b,shareDesc:d,shareUrl:window.location.origin+"/biaoge/fill/"+a});$("#distributeModal").modal("show")}});k.on("confirmHandler.FormEmployeeView",".j_insideCollect",function(a,b){var c=$(this).parents("li"),d=c.attr("formid"),c=c.find("#form-title").text(),
g=b.objs;if(b&&g){for(var h={},k=0;k<g.length;k++)h["userIds["+k+"]"]=g[k].id;h["form.id"]=d;h["form.name"]=c;e.incollect(h,function(a){console.log(a)});f.notify("\u64cd\u4f5c\u6210\u529f\uff01")}});k.on("click.FormEmployeeView",".js_formLog",function(){var a=$(this).attr("formId");(new b({formId:a})).render();$("#formlog-dialog").modal("show")});k.on("click.FormEmployeeView",".js_deleteForm",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("type"),f={formId:b};"cloud"==c?d.deleteForm(a,
f,c):e.findCount({formId:b},function(b){d.deleteForm(a,f,c,b.count)})});k.on("click.FormEmployeeView",".js_copyForm",function(){var b=$(this).attr("formId"),c=$(this).parents(".js_formListBox").find("#form-title").text(),e={};e.formId=b;e.el="#copy-form";e.ownership="company";e.ownership_display="false";e.module=d.pageModule;e.formTitle=c;e.tpl=f.template("flow.formcopy",{userId:d.userId,operationtype:"\u590d\u5236",admin:!0});d.formoperationView=new a(e);d.formoperationView.render()});k.on("click.FormEmployeeView",
".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});k.on("click.FormEmployeeView",".js_renameForm",function(){var a=$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=$('\x3cinput type\x3d"text" name\x3d"formTitle" style\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+a+"\x3e"),b=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();
$(this).parents(".js_formListBox").find("#form-title").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(b)}});k.on("blur.FormEmployeeView",'input[name\x3d"formTitle"]',function(){var a=$(this).attr("formId"),b=$.trim($(this).val()),c=this;if(""==b||b==$(c).prev().text())$(c).prev().show(),$(c).remove();else{var d={};d.formId=a;d.formName=$.trim(b);d.ownership="personal";e.renameForm(d,function(a){(a=a.message)?f.notify(a):($(c).prev().text(b).attr("title",
b).show(),$(c).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});k.on("keydown.FormEmployeeView",'input[name\x3d"formTitle"]',function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).prev().show(),$(this).remove()):13==a&&(""==b||b==$(this).prev().text()?($(this).prev().show(),$(this).remove()):$(this).trigger("blur.FormEmployeeView"))});k.on("keyup.FormEmployeeView",".js_searchkeyword",function(a){var b=$.trim($(this).val());13==(a?a:window.event?window.event:
null).keyCode&&(a={pageNo:1},k.find(".js_forms."+d.activeTab+" .js_form-list").empty(),b?d.renderKeywords(a):(k.find(".js_forms."+d.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e'),d.renderEmployeeForms(a)))});k.on("click.FormEmployeeView",".icon-search",function(a){a=k.find(".js_searchkeyword");a=$.trim(a.val());var b={pageNo:1};k.find(".js_forms."+d.activeTab+" .js_form-list").empty();a?d.renderKeywords(b):(k.find(".js_forms."+
d.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e'),d.renderEmployeeForms(b))});k.on("click.FormEmployeeView",".js_newcategory",function(a){a=h.siblings(".js_formcategory."+d.activeTab).clone().attr("id","newCateId");a.find(".j_formcateInfo").remove();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_createcategory" placeholder\x3d"\u5206\u7c7b\u540d\u79f0(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)" maxLength\x3d"20"\x3e');
a.find(".js_categoryname").append(b);var c=k.find(".js_forms."+d.activeTab+" .js_form-list #custom-category #newCateId");1==c.size()?c.find(".js_createcategory").focus():(k.find(".js_forms."+d.activeTab+" .js_form-list #custom-category").prepend(a),b.focus())});k.on("blur.FormEmployeeView",".js_createcategory",function(a){$(this);var b=$.trim($(this).val());a=$(this).attr("placeholder");var c=$(this).parent(),h=$(this).parents(".js_formcategory."+d.activeTab);b==a||""==b?$(".js_forms."+d.activeTab+
" .js_form-list #newCateId").remove():e.createCategory({"formCategory.name":b,"formCategory.type":"personal",module:"j_biaoge"==d.activeTab?"biaoge":"workflow"},function(a){a.message?f.notify(a.message):(c.empty().text(b).next().text("(0)"),c.attr("id",a.formCategory.id),h.removeAttr("id"),f.notify("\u65b0\u5efa\u8868\u5355\u5206\u7c7b\u6210\u529f"),d.drag())})});k.on("keydown.FormEmployeeView",".js_createcategory",function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?$(this).parents(".js_formcategory."+
d.activeTab).remove():13==a&&(""==b?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):$(this).trigger("blur.FormEmployeeView"))});k.on("mouseenter.FormEmployeeView","#custom-category #cate-name",function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&0==$(this).find(".js_createcategory").length&&(0!=$(this).find(".js_formcount .js_deletecategory").length?$(this).find(".js_formcount .js_deletecategory").show():$(this).find(".js_formcount").append('\x3ca class\x3d"js_deletecategory btn-delecategory" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e'))});
k.on("mouseleave.FormEmployeeView","#custom-category #cate-name",function(a){$(this).find(".js_formcount .js_deletecategory").hide()});k.on("click.FormEmployeeView",".js_deletecategory",function(a){var b=$(this);f.confirm("\u5220\u9664\u5206\u7c7b\u540e\uff0c\u8be5\u5206\u7c7b\u7684\u8868\u5355\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u5176\u4ed6\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5206\u7c7b\uff1f",function(a){if(a){a={"formCategory.id":b.parents("#cate-name").find(".js_categoryname").attr("id")};
var c=b.parents(".js_formcategory."+d.activeTab).find(".j_formlist"),h=c.html(),c=c.find(".js_formitemsli");if(0!=c.length){var n="";c.each(function(a){a=$(this).attr("formid");n+=a+","});a.formIds=n}e.deleteCategory(a,function(a){b.parents(".js_formcategory."+d.activeTab).remove();k.find(".js_other .j_formlist").prepend(h);f.notify("\u8868\u5355\u7c7b\u522b\u5220\u9664\u6210\u529f")})}})});k.on("click.FormEmployeeView","#formmanagelist #custom-category .js_formcategory .js_categoryname",function(a){if(null==
$(this).parents(".js_cloudforms").get(0)||d.isWeaver){a=$(this).text();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_updatecatename" maxLength\x3d"20"\x3e');0==$(this).find(".js_createcategory").length&&($(this).before(b).hide(),b.focus().val(a))}});k.on("keydown.FormEmployeeView",".js_updatecatename",function(a,b){var c=$(this),h=$.trim($(this).val()),k=$(this).next().text(),n=$(this).next().attr("id"),m=$(this).next().attr("type"),q={},z=a.keyCode||b;27==z?($(this).next().show(),$(this).remove()):
13==z&&(""==h?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):h!=k?(q["formCategory.id"]=n,q["formCategory.name"]=h,q["formCategory.type"]=m,q.module="j_biaoge"==d.activeTab?"biaoge":"workflow",e.updateCategoryName(q,function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5206\u7c7b\u540d\u79f0\u4fee\u6539\u6210\u529f"),c.next().text(h).show(),c.remove())})):($(this).next().show(),$(this).remove()))});k.on("blur.FormEmployeeView",".js_updatecatename",function(a){a=$.trim($(this).val());
var b=$(this).next().text();a==b?($(this).next().show(),$(this).remove()):$(this).trigger("keydown.FormEmployeeView",13)});k.on("mouseenter.FormEmployeeView",".j_form-category",function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&$(this).find(".j_formcateInfo").removeClass("hide")});k.on("mouseleave.FormEmployeeView",".form-category-hd",function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&$(this).find(".j_formcateInfo").addClass("hide")});$("body").on("relatedFlow.FormEmployeeView",
function(a,b,c){d.setFlowsequenceIcon(b,c)});k.on("click.FormEmployeeView",".js_formtab li",function(a){a=$(this);k.find(".js_formtab li").removeClass("active");k.find(".js_searchkeyword").val();a.addClass("active");d.activeTab="j_"+a.attr("module");d.pageModule=a.attr("module");k.find(".js_forms").hide();k.find(".js_forms."+d.activeTab).show();"true"!=a.attr("data-load")&&d.rendertab({pageNo:1})});k.on("click.FormEmployeeView",".j_Search .js_loadMore",function(a){a=$(this);var b={pageNo:$(this).attr("pageNo")};
a.attr("isKeyword")?d.renderKeywords(b):d.rendertab(b)})},render:function(){var a=$(this.el),b=this.tpl,b=$(b).siblings("#formmanage-container");a.html(b.html());a.find(".return_js").attr("href","/workflows/"+this.userId+"/new");a.find(".js_forms."+this.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');this.rendertab({pageNo:1})},rendertab:function(a){var b=$(this.el);f.layout(this.el+" .js_forms."+this.activeTab);b.find(".js_forms."+
this.activeTab+" #formlist-loading").show();b.find(".js_forms."+this.activeTab).show();b.find(".js_formtab li[module\x3d'"+this.pageModule+"']").attr("data-load","true").addClass("active");a.queryType="formManange";a.ownership="personal";"j_biaoge"==this.activeTab?a.module="biaoge":"j_workflow"==this.activeTab&&(a.module="workflow");this.renderEmployeeForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},drag:function(){var a=this,b=a.model;$(a.el).find(".js_forms."+a.activeTab+
" .js_form-list #custom-category ul.form-list,.js_forms."+a.activeTab+" .js_form-list #other-category ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist").sortable({handle:".js_formListBox",placeholder:"form-placeholder",connectWith:".js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist",update:function(b,c){a.buildCount($(this));a.buildSerialNumber($(this));c.item.data("update",!0)},receive:function(a,
b){b.item.data("receive",!0)},stop:function(c,d){if(d.item.data("update"))if(d.item.data("update",!1),d.item.data("receive")){d.item.data("receive",!1);var e=d.item.attr("formid"),h=d.item.parents(".js_formcategory."+a.activeTab).find(".form-category-hd .js_categoryname").attr("id");b.updateCategory({"form.id":e,"formCategory.id":h},function(b){b.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(d.item))})}else a.sort(d.item)}})},renderEmployeeForms:function(a){var b=this,
c=b.model,d=$(b.el);d.find(".js_forms."+b.activeTab+" #formlist-loading").show();a.pageSize=20;a.module=b.pageModule;c.findMember(a,function(a){b.renderEmployeeKeyword(a);d.find(".js_forms."+b.activeTab+" #formlist-loading").hide()})},renderPersonalForm:function(a,b,c,e){c=this.tpl;$(this.el);var f=a.name,h=a.describe,m=a.id,u=a.fillCount;c=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli");this.isAdmin||c.find(".js_copyForm").addClass("hide");c.attr("formid",m);c.attr("id",m);c.find("#form-number").css("background-color",
d.getRandomColor());c.find(".js_formPreview").attr("formId",m);c.find("#form-title").text(f);c.find("#form-title").attr("data-id",m);c.find("#form-title").attr("userId",this.userId);c.find("#form-title").attr("title",f);void 0==h&&(h="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription"));c.find("#form-describe").text(h);c.find("#form-describe").attr("title",h);c.find(".js_renameForm").attr("formId",m);c.find(".js_editForm").attr("formId",
m);c.find(".js_shareForm").attr("formId",m);c.find(".js_formLog").attr("formId",m);c.find(".js_copyForm").attr("formId",m);c.find(".js_deleteForm").attr("formId",m);c.find(".js_formListBox").attr("formId",m);c.find(".j_fillCount").text(u+"\u4efd\u6570\u636e");c.find(".j_fillCount").attr("href","/forms/"+TEAMS.currentUser.id+"/form-manager/"+m);c.find(".j_operator").text(a.operator.username);c.find(".j_createtime").text(Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"));c.find(".form-message").addClass("hide").hide();
c.find("#form-title").attr("renderType","notRelateFlow");c.find(".js_relateFlow").attr("formId",m);c.find(".js_relateFlow").attr("data-id",m);"prepend"==e?b.prepend(c):b.append(c)},renderEmployeeKeyword:function(a){var b=$(this.el),c=$(this.tpl),d=b.find(".js_forms."+this.activeTab+" .js_form-list"),b=c.siblings("#search-boxlist").find(".j_Search."+this.activeTab).clone();null==d.find(".j_Search."+this.activeTab).get(0)&&d.html(b);var b=d.find(".js_searchlist"),e=a.formPage,f=e.result;a=a.pageNo;
d.find("#pageNo").val(a);a=d.find(".j_Search."+this.activeTab+" .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;d.find(".j_Search."+this.activeTab+" .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?d.find(".js_noresult").show():d.find(".js_noresult").hide();e.hasNext?d.find("#loadMore").show().attr("pageNo",e.pageNo+1):d.find("#loadMore").hide();for(d=0;d<f.length;d++)e=f[d],a=c.siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),
this.renderPersonalForm(e,b,a,"append");this.buildSerialNumber(b)},renderKeywords:function(a){var b=this,c=b.model,d=$(b.el),e=$.trim(d.find(".js_searchkeyword").val());a.pageSize=20;a["formParam.keyword"]=e;switch(b.activeTab){case "j_biaoge":a.module="biaoge";break;case "j_workflow":a.module="workflow"}c.findMember(a,function(a){b.renderEmployeeKeyword(a);d.find("#loadMore").attr("isKeyword","isKeyword")})},deleteForm:function(a,b,c,d){var e=this,h=e.model,m=$(a).parents(".j_formlist");"cloud"==
c&&(m=$(a).parents("#cloudformul"));var u=function(c){c&&h.deleteForm(b,function(b){b.message?f.notify(b.message):($(a).parents("li").remove(),f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),e.buildSerialNumber(m))})};"cloud"==c?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",u):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+d+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",u)},buildSerialNumber:function(a){a.find(".js_formitemsli").each(function(a){$(this).find("#form-number").text(a+
1)})},buildCount:function(a){var b=a.parents(".js_formcategory."+this.activeTab).find(".js_formitemsli").length;a.parents(".js_formcategory."+this.activeTab).find(".js_formcount").text("("+b+")")},sortCategory:function(a){a.find(".js_formcategory."+view.activeTab).each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var b=this.model,c={},d=a.prevAll(),e=a.next(),h=a.prev(),m=a.parents(".j_formlist").find(".js_formitemsli").eq(0);d.each(function(a){c["forms["+
a+"].id"]=$(this).attr("formid")});(d=parseInt(e.attr("sort"))+1)||(d=parseInt(h.attr("sort")));var h=m.attr("formid"),m=parseInt(m.attr("sort")),e=a.attr("formid"),u=a.parents(".js_formcategory."+this.activeTab).find(".form-category-hd .js_categoryname").attr("id");c.formId=e;c.sort=d;c.categoryId=u;49990<=m&&(c.firstFormId=h);b.sort(c,function(b){b.sort&&a.attr("sort",b.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});b.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},
remove:function(){$(this.el).off(".FormEmployeeView");this.header&&(this.header.remove(),this.header=null)},setFlowsequenceIcon:function(a,b){"show"==b?$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(".form-message").show():$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(" .form-message").hide()}});m.exports=h});
define("teams/form/formauthconfigview",["teams/utils","teams/component/typeahead","teams/component/validation","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h("teams/component/validation");var c=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(b){this.formId=b.formId;this.el="#form-auth-config";this.callback=b.callback;this.userId=b.userId;this.parentEl=b.parentEl?b.parentEl:"body";$(this.parentEl).append(f.template("form.formauthconfig"));
this.model=new c(b)},delegateEvents:function(){var b=this,a=b.formId;$(b.el).on("shown.bs.modal.AuthConfig",function(a){var c=$(b.el).find("#lookauth-select").find("option:selected").attr("value");"user"==c?e({el:b.el+" .j_lookuserContainer #typeahead-lookauth-employee",callback:function(a){if(a&&!$.isEmptyObject(a)){var d=$(b.el).find("#look-auth .j_selected");b.renderTypeheader(d,a,c)}}}):"department"==c&&e({el:b.el+" .j_lookdeptContainer #typeahead-lookauth-department",callback:function(a){if(a&&
!$.isEmptyObject(a)){var d=$(b.el).find("#look-auth .j_selected");b.renderTypeheader(d,a,c)}}})});$(b.el).on("hidden.bs.modal.AuthConfig",function(a){$(a.target).hasClass("datepicker")||b.remove()});$(b.el).off("change.AuthConfig",".j_lookAuthSelect select").on("change.AuthConfig",".j_lookAuthSelect select",function(){$(this);var c=$(b.el).find("#lookauth-select").val();if("user"==c)$(b.el).find(".j_lookAuthUser").removeClass("hide"),$(b.el).find(".j_lookAuthDept").addClass("hide"),$(b.el).find("#look-auth .j_selected").removeClass("hide"),
e({el:b.el+" .j_lookuserContainer #typeahead-lookauth-employee",callback:function(a){if(a&&!$.isEmptyObject(a)){var e=$(b.el).find("#look-auth .j_selected");b.renderTypeheader(e,a,c)}}});else if("department"==c)$(b.el).find(".j_lookAuthUser").addClass("hide"),$(b.el).find(".j_lookAuthDept").removeClass("hide"),$(b.el).find("#look-auth .j_selected").removeClass("hide"),e({el:b.el+" .j_lookdeptContainer #typeahead-lookauth-department",callback:function(a){if(a&&!$.isEmptyObject(a)){var e=$(b.el).find("#look-auth .j_selected");
b.renderTypeheader(e,a,c)}}});else{$(b.el).find(".j_lookAuthUser").addClass("hide");$(b.el).find(".j_lookAuthDept").addClass("hide");$(b.el).find("#look-auth .j_selected").removeClass("hide");var g=$(b.el).find("#look-auth .j_selected"),h=!1;g.find(".entity-item").each(function(a){0==$(this).find("a").attr("id")&&(h=!0)});h?f.notify("\u5df2\u6dfb\u6240\u6709\u4eba\uff0c\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0"):(b.saveAndSortSelectUser(a,"\u6240\u6709\u4eba","0",c,g),g.append('\x3cspan class\x3d"entity-item" type\x3d"allpeople"\x3e\x3ca id\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e'))}});
$(b.el).off("click.AuthConfig","#authconfig-close").on("click.AuthConfig","#authconfig-close",function(a){$(b.el).modal("hide")});$(b.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))})},deleteEvent:function(b){var a=b.prevAll("a").attr("id"),c=b.parents(".entity-container");b.parent(".entity-item").remove();c.trigger("removeEntity",a);b=b.parent(".entity-item").attr("type");c={};c.formId=this.formId;c.uidORdeptid=a;c.selectType=
b;c.queryType="authconfig";$.ajax({type:"post",url:"/form/deleteShareConfig.json",dataType:"json",data:c,success:function(a){f.notify("\u6570\u636e\u5df2\u5220\u9664")}})},renderTypeheader:function(b,a,c){var e=this.formId;if(a.length)for(var f=0;f<a.length;f++){var h=a[f],k=h.name,m=h.id;if(k&&m){var p='\x3cspan class\x3d"entity-item" type\x3d"'+c+'"\x3e\x3ca id\x3d'+m+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){m==$(this).find("a").attr("id")&&(p=null)});this.saveAndSortSelectUser(e,
k,m,c,b);b.append(p)}}else k=a.name,m=a.id,k&&m&&(p='\x3cspan class\x3d"entity-item" type\x3d"'+c+'"\x3e\x3ca id\x3d'+m+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){m==$(this).find("a").attr("id")&&(p=null)}),this.saveAndSortSelectUser(e,k,m,c,b),b.append(p))},saveAndSortSelectUser:function(b,a,c,e,h){var n=this.model,k={};k.selectType=e;k.formId=b;k.content=a;k.linkId=c;k.uidORdeptid=c;k.queryType="authconfig";var m=!1;h.find(".entity-item").each(function(a){c==$(this).find("a").attr("id")&&
(m=!0)});m?f.notify("\u5df2\u6dfb\u52a0\u6b64\u4eba\uff0c\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0"):n.saveShareConfig(k,function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u6dfb\u52a0\u4eba\u5458\u6210\u529f")})},queryLastConfig:function(){var b=this,a=b.model,c={};c.formId=b.formId;c.queryType="authconfig";a.queryLastConfig(c,function(a){a=a.shareEntrys;if(null!=a)for(var c=0;c<a.length;c++){var d=a[c].entryType;"all"==d&&(d="allpeople");$(b.el).find("#lookauth-select").find("option[value\x3d'user']").attr("selected",
!0);var e=a[c].sid,f=a[c].name;$(b.el).find("#look-auth .j_selected").append('\x3cspan class\x3d"entity-item" type\x3d"'+d+'"\x3e\x3ca id\x3d'+e+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e")}})},render:function(){$(this.el).modal("show");this.queryLastConfig()},hide:function(){$(this.el).modal("hide")},remove:function(){$(this.el).off(".AuthConfig");$("#form-auth-config").remove()}});m.exports=h});
define("teams/form/formcloudmodel",["teams/utils"],function(h,q,m){var f=h("teams/utils");h=Backbone.Model.extend({initialize:function(e){},defaults:{pageNo:1,pageSize:10,order:"default"},load:function(){this.loadLabel();this.searchForm()},loadLabel:function(e){var c=this;$.ajax({type:"get",url:"/biaoge/findFormLabel.json",dataType:"json",data:{rank:"2"},success:function(b){b&&b.actionMsg?f.notify(b.actionMsg.message,null,"error"):(c.set("formLabels",b.formLabels),e&&e(b))}})},getFormByLabels:function(e,
c){this.set({keyword:"",labelIds:e,pageNo:"1",order:"default"});this.searchForm(c)},getFormByKeyword:function(e,c){this.set({keyword:e,pageNo:"1",order:"default"});this.searchForm(c)},sortFormList:function(e,c){this.set({pageNo:"1",order:e||"default"});this.searchForm(c)},nextPage:function(e){this.set({pageNo:this.get("nextPage")});this.searchForm(e)},searchForm:function(e){var c=this,b=_.pick(c.attributes,"keyword","labelIds","pageNo","pageSize","order");$.ajax({type:"post",contentType:"application/json;charset\x3dUTF-8",
url:"/biaoge/findFormByLabel.json",dataType:"json",data:JSON.stringify(b),success:function(a){if(a&&a.actionMsg)f.notify(a.actionMsg.message,null,"error");else{var b=a&&a.formPage;c.set({forms:b.result,pageNo:b.pageNo,nextPage:b.nextPage,hasNext:b.hasNext,hasPre:b.hasPre});0==b.result?$(".j_formlist .j_no-result").removeClass("hide"):$(".j_formlist .j_no-result").addClass("hide");e&&e(a)}}})},popularityForm:function(e,c){$.ajax({type:"post",url:"/biaoge/popularityForm.json",dataType:"json",data:e,
success:function(b){b&&b.actionMsg?f.notify(b.actionMsg.message,null,"error"):c&&c(b)}})}});m.exports=h});
define("teams/form/formdatareportmodel",function(h,q,m){h=Backbone.Model.extend({pageNo:1,pageSize:25,initialize:function(f){f&&(this.id=f.id,this.userId=f.userId)},search:function(f,e){f.pageNo=this.pageNo;f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatareport/search.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},show:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatareport/showReport.json",
dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},update:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formdatareport/update.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/form/formtagview",["teams/utils","teams/component/formtagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/formtagmodel");h=Backbone.View.extend({initialize:function(c){this.container=c.container;this.el=(this.parentEl=c.parentEl)?this.parentEl+" "+this.container:this.container;this.targetId=c.targetId;this._module=c.module;this.callbacks=c.callbacks;$(this.el).html(f.template("form.formtagnew"));this.model=new e(c)},delegateEvents:function(){var c=this,b=this.model;
$(c.el).off("click.FormTagView","#formtag-container .j_tagname").on("click.FormTagView","#formtag-container .j_tagname",function(a){a=$(this);var d=a.attr("tagid");if(a.attr("readonly")){var e={};e.targetId=c.targetId;e.id=d;e.module=c._module;a.hasClass("linked")?b.unlink(e,function(a){a.message?f.notify(a.message):(c.render(),f.notify("\u5220\u9664\u8868\u5355\u5206\u7c7b\u6210\u529f"))}):b.link(e,function(a){a.message?f.notify(a.message):(c.render(),f.notify("\u5173\u8054\u8868\u5355\u5206\u7c7b\u6210\u529f"))})}});
$(c.el).off("click.FormTagView","#formtag-container .j_tagedit").on("click.FormTagView","#formtag-container .j_tagedit",function(a){a=$(this);a.attr("tagid");$(c.el).find(".j_tagname").attr("readonly",!0);a.parents("a").find(".j_tagname").attr("readonly",!1);a.parents("a").find(".j_tagname").focus()});$(c.el).off("keydown.FormTagView","#formtag-container .j_tagname").on("keydown.FormTagView","#formtag-container .j_tagname",function(a){var d=$(this);a=a.keyCode;var e=$.trim(d.val()),d=d.attr("tagid"),
h={};h.id=d;h.name=e;13==a&&(""==e||null==e?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):b.updateTag(h,function(a){a.message?f.notify(a.message):(c.render(),f.notify("\u7f16\u8f91\u8868\u5355\u5206\u7c7b\u6210\u529f"))}))});$(c.el).off("click.FormTagView","#formtag-container .j_tagcreate").on("click.FormTagView","#formtag-container .j_tagcreate",function(a){a=$(c.el).find("#formtag-container").find("#formtagcreate-input").val().trim();if(null==a||""==a)f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0");
else{var d={};d["formtag.name"]=a;d.targetId=c.targetId;d.module=c._module;b.create(d,function(a){a.message?(f.notify(a.message),$(c.el).find("#formtag-container").find("#formtagcreate-input").focus()):(c.render(),$(c.el).find("#formtag-container").find("#formtagcreate-input").val(""),f.notify("\u6dfb\u52a0\u8868\u5355\u5206\u7c7b\u6210\u529f"))})}});$(c.el).off("keydown.FormTagView","#formtag-container #formtagcreate-input").on("keydown.FormTagView","#formtag-container #formtagcreate-input",function(a){13==
a.keyCode&&$(c.el).find("#formtag-container").find(".j_tagcreate").trigger("click.FormTagView")});$(c.el).off("click.FormTagView","#formtag-container .j_tagdelete").on("click.FormTagView","#formtag-container .j_tagdelete",function(a){a=$(this).attr("tagid");var d={};d.targetId=c.targetId;d.id=a;d.module=c._module;b.deleteTag(d,function(a){a.message?f.notify(a.message):(c.render(),f.notify("\u5220\u9664\u8868\u5355\u5206\u7c7b\u6210\u529f"))})})},render:function(){$(this.el).find("#formtag-container").find(".j_formtag-ul").empty();
this.renderMyFormTags();f.layout(".j_formtagScr")},renderMyFormTags:function(){var c=this.model,b=$(this.el),a={};a.targetId=this.targetId;c.queryMyFormTags(a,function(a){a=a.formtags;var c=b.find("#formtag-container .j_formtag-ul");if(null!=a&&0<a.length)for(var e=0;e<a.length;e++){var f=a[e],h=b.find("#formtag-li-clone li").clone();h.find(".j_tagname").val(f.name);h.find(".j_tagname").attr("title",f.name);h.find(".j_tagname").attr("tagid",f.id);h.find(".j_tagedit").attr("tagid",f.id);h.find(".j_tagdelete").attr("tagid",
f.id);h.attr("id",f.id);null!=f.formlabellinkId&&(h.find(".j_tagname").addClass("linked"),h.find(".j_choose").attr("checked","checked"));0<c.find("#"+f.id).length||c.append(h)}else c.html('\x3cspan class\x3d"j_noresult no-data"\x3e\u60a8\u8fd8\u672a\u6dfb\u52a0\u6211\u7684\u8868\u5355\u5206\u7c7b,\u5feb\u53bb\u8bd5\u8bd5\u4e3a\u8868\u5355\u6dfb\u52a0\u4e13\u5c5e\u4e8e\u60a8\u7684\u5206\u7c7b\x3c/span\x3e')})},remove:function(){$(this.el).off(".FormTagView")}});m.exports=h});
define("teams/form/formwriteview","teams/utils teams/form/formmanagemodel teams/form/formoperationview teams/component/entityslider teams/component/typeahead teams/formmanage/formdistributeview teams/formmanage/formloglistview teams/formmanage/formcollectloglistview teams/component/filter teams/form/formcolor teams/form/formreportconfigview teams/form/formauthconfigview teams/form/formcontinuewriteview teams/form/formtag".split(" "),function(h,q,m){var f=h("teams/utils"),e=h("teams/form/formmanagemodel"),
c=h("teams/form/formoperationview");h("teams/component/entityslider");h("teams/component/typeahead");var b=h("teams/formmanage/formdistributeview"),a=h("teams/component/filter"),d=h("teams/form/formcolor"),g=h("teams/form/formreportconfigview"),l=h("teams/form/formauthconfigview"),n=h("teams/form/formcontinuewriteview");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.el=a.container?a.container:"#j_workflowcenter";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==
TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.type=a.type;this.tpl=f.template("form.formwrite",{userId:this.userId,isWeaver:this.isWeaver,isAdmin:this.isAdmin});this.model=new e(a);this.pageModule="biaoge"},delegateEvents:function(){var d=this,e=d.model,h=$(d.tpl),m=$(d.el);m.off("click.FormWriteView",".js_reportConf").on("click.FormWriteView",".js_reportConf",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u4e0a\u62a5\uff01"),
!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formreportconfigview=new g({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formreportconfigview.hide()}}),d.formreportconfigview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u4e0a\u62a5\uff01"),!1})});m.on("click.FormWriteView",".j_dataReportConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u64cd\u4f5c\uff01"),
!1});m.on("click.FormWriteView",".js_authConfig",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u4e0a\u62a5\uff01"),!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formauthconfigview=new l({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formauthconfigview.hide()}}),d.formauthconfigview.render();
else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u4e0a\u62a5\uff01"),!1})});m.on("click.FormCompanyView",".js_continueWrite",function(){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u6301\u7eed\u586b\u5199\uff01"),!1;var a=$(this).attr("formId");e.getFiledByForm({formId:a},function(b){if(b.formFields&&0!=b.formFields.length)d.formcontinuewriteview=
new n({parentEl:d.el,userId:d.userId,formId:a,callback:function(a){d.formcontinuewriteview.hide()}}),d.formcontinuewriteview.render();else return f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u6301\u7eed\u586b\u5199\uff01"),!1})});$("body").on("click.FormWriteView",".goto-top",function(a){f.gotoTop(".js_forms."+d.activeTab)});m.on("click.FormWriteView",".js_copyForm",function(){var a=$(this).attr("formId"),b=$(this).parents(".js_formListBox").find("#form-title").text(),e,g=$(this).attr("osp");
"personal"==g?e=!1:"company"==g&&(e=!0);var l={};l.formId=a;l.module=d.pageModule;l.el="#copy-form";l.formTitle=b;l.ownership=g;l.tpl=f.template("flow.formcopy",{userId:d.userId,operationtype:"\u590d\u5236",admin:e});l.copyCallback=function(a){var b=m.find(".js_forms."+d.activeTab+" .js_form-list .js_other .j_formlist"),c=h.siblings("#formitems."+d.activeTab).find(".js_formitemsli").clone();d.renderPersonalForm(a.form,b,c,"prepend")};d.formoperationView=new c(l);d.formoperationView.render()});m.on("click.FormWriteView",
".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});m.on("click.FormWriteView",".js_formPreview-only",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});m.on("click.FormWriteView",".js_renameForm",function(){var a=$(this).attr("formId");if(0==$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').length){var a=$('\x3cinput type\x3d"text" name\x3d"formTitle" style\x3d"width:100%" class\x3d"input-formTitle form-control" maxLength\x3d"50" formId\x3d'+
a+"\x3e"),b=$(this).parents(".js_formListBox").find("#form-title").text();$(this).parents(".js_formListBox").find("#form-title").hide();$(this).parents(".js_formListBox").find("#form-title").after(a);$(this).parents(".js_formListBox").find('input[name\x3d"formTitle"]').focus().val(b)}});m.on("blur.FormWriteView",'input[name\x3d"formTitle"]',function(){var a=$(this).attr("formId"),b=$.trim($(this).val()),c=this;if(""==b||b==$(c).prev().text())$(c).prev().show(),$(c).remove();else{var d={};d.formId=
a;d.formName=$.trim(b);d.ownership="personal";e.renameForm(d,function(a){(a=a.message)?f.notify(a):($(c).prev().text(b).attr("title",b).show(),$(c).remove(),f.notify("\u8868\u5355\u540d\u79f0\u4fee\u6539\u6210\u529f"))})}});m.on("keydown.FormWriteView",'input[name\x3d"formTitle"]',function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).prev().show(),$(this).remove()):13==a&&(""==b||b==$(this).prev().text()?($(this).prev().show(),$(this).remove()):$(this).trigger("blur.FormWriteView"))});
m.off("click.FormWriteView",".js_buildNewForm").on("click.FormWriteView",".js_buildNewForm",function(){var a={};a.module=d.pageModule;a.el="#build-newform";a.tpl=f.template("biaoge.formnew");a.ownership="personal";a.formwrite="formwrite";a.saveCallback=function(a){d.render()};d.formoperationView=new c(a);d.formoperationView.render()});m.off("click.FormWriteView",".j_form_search").on("click.FormWriteView",".j_form_search",function(a){a=m.find(".js_searchkeyword");a=$.trim(a.val());var b={module:"biaoge"};
b.keyword=a;m.find(".js_forms."+d.activeTab+" .js_form-list").empty();a?d.renderKeywords(b):(m.find(".js_forms."+d.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e'),d.renderPersonalForms(b))});m.on("keyup.FormWriteView",".js_searchkeyword",function(a){13==(a?a:window.event?window.event:null).keyCode&&m.find(".j_form_search").click()});m.on("click.FormWriteView",".js_newcategory",function(a){a=h.siblings(".js_formcategory."+
d.activeTab).clone().attr("id","newCateId");a.find(".j_formcateInfo").remove();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_createcategory" placeholder\x3d"\u5206\u7c7b\u540d\u79f0(ESC\u53d6\u6d88\uff0c\u56de\u8f66\u952e\u4fdd\u5b58)" maxLength\x3d"20"\x3e');a.find(".js_categoryname").append(b);var c=m.find(".js_forms."+d.activeTab+" .js_form-list #custom-category #newCateId");1==c.length?c.find(".js_createcategory").focus():(m.find(".js_forms."+d.activeTab+" .js_form-list #custom-category").prepend(a),
b.focus())});m.on("blur.FormWriteView",".js_createcategory",function(a){$(this);var b=$.trim($(this).val());a=$(this).attr("placeholder");var c=$(this).parent(),g=$(this).parents(".js_formcategory."+d.activeTab);b==a||""==b?$(".js_forms."+d.activeTab+" .js_form-list #newCateId").remove():e.createCategory({"formCategory.name":b,"formCategory.type":"company",module:d.pageModule},function(a){a.message?f.notify(a.message):(c.empty().text(b).next().text("(0)"),c.attr("id",a.formCategory.id),g.removeAttr("id"),
f.notify("\u65b0\u5efa\u8868\u5355\u5206\u7c7b\u6210\u529f"),d.drag())})});m.on("keydown.FormWriteView",".js_createcategory",function(a){a=a.keyCode;var b=$.trim($(this).val());27==a?($(this).val(""),$(this).parents(".js_formcategory."+d.activeTab).remove()):13==a&&(""==b?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):$(this).trigger("blur.FormWriteView"))});m.on("mouseenter.FormWriteView","#custom-category #cate-name",function(a){if(null==$(this).parents(".js_cloudforms").get(0)||
d.isWeaver)0<$(this).parents(".js_other").length||0==$(this).find(".js_createcategory").length&&(0!=$(this).find(".js_formcount .js_deletecategory").length?$(this).find(".js_formcount .js_deletecategory").show():$(this).find(".js_formcount").append('\x3ca class\x3d"js_deletecategory btn-delecategory" title\x3d"\u5220\u9664"\x3e\x26times;\x3c/a\x3e'))});m.on("mouseleave.FormWriteView","#custom-category #cate-name",function(a){$(this).find(".js_formcount .js_deletecategory").hide()});m.on("click.FormWriteView",
".js_deletecategory",function(a){var b=$(this);f.confirm("\u5220\u9664\u5206\u7c7b\u540e\uff0c\u8be5\u5206\u7c7b\u7684\u8868\u5355\u4f1a\u81ea\u52a8\u5f52\u7c7b\u5230\u3010\u5176\u4ed6\u3011\u4e2d\uff0c\u786e\u8ba4\u5220\u9664\u8be5\u5206\u7c7b\uff1f",function(a){if(a){a={"formCategory.id":b.parents("#cate-name").find(".js_categoryname").attr("id")};var c=b.parents(".js_formcategory."+d.activeTab).find(".j_formlist"),g=c.html(),c=c.find(".js_formitemsli");if(0!=c.length){var h="";c.each(function(a){a=
$(this).attr("formid");h+=a+","});a.formIds=h}e.deleteCategory(a,function(a){b.parents(".js_formcategory."+d.activeTab).remove();m.find(".js_other .j_formlist").prepend(g);f.notify("\u8868\u5355\u7c7b\u522b\u5220\u9664\u6210\u529f")})}})});m.on("click.FormWriteView","#formmanagelist #custom-category .js_formcategory .js_categoryname",function(a){if(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver){a=$(this).text();var b=$('\x3cinput type\x3d"text" class\x3d"form-control js_updatecatename" maxLength\x3d"20"\x3e');
0==$(this).find(".js_createcategory").length&&($(this).before(b).hide(),b.focus().val(a))}});m.on("keydown.FormWriteView",".js_updatecatename",function(a,b){var c=$(this),g=$.trim($(this).val()),h=$(this).next().text(),l=$(this).next().attr("id"),n=$(this).next().attr("type"),p={},m=a.keyCode||b;27==m?($(this).next().show(),c.val(h),$(this).remove()):13==m&&(""==g?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u5206\u7c7b\u540d\u79f0"):g!=h?(p["formCategory.id"]=l,p["formCategory.name"]=g,p["formCategory.type"]=
n,p.module=d.pageModule,e.updateCategoryName(p,function(a){a.message?f.notify(a.message):(f.notify("\u8868\u5355\u5206\u7c7b\u540d\u79f0\u4fee\u6539\u6210\u529f"),c.next().text(g).show(),c.remove())})):($(this).next().show(),$(this).remove()))});m.on("blur.FormWriteView",".js_updatecatename",function(a){a=$.trim($(this).val());var b=$(this).next().text();a===b?($(this).next().show(),$(this).remove()):$(this).trigger("keydown.FormWriteView",13)});m.on("mouseenter.FormWriteView",".j_form-category",
function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&$(this).find(".j_formcateInfo").removeClass("hide")});m.on("mouseleave.FormWriteView",".form-category-hd",function(a){(null==$(this).parents(".js_cloudforms").get(0)||d.isWeaver)&&$(this).find(".j_formcateInfo").addClass("hide")});$("body").on("relatedFlow.FormWriteView",function(a,b,c){d.setFlowsequenceIcon(b,c)});m.on("mouseenter.FormWriteView","#forms-filter",function(b){var c=$(this).attr("data-toggle");d.filter||(d.filter=
new a({el:c,module:"biaoge",targetObj:$(this),userId:d.userId}),d.filter.render(b));b=setTimeout(function(){$(c).slideDown("fast")},300);$(this).data("showTimer",b);$(this).addClass("open")}).on("mouseleave.FormWriteView","#forms-filter",function(a){a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100);$(this).removeClass("open")}).on("filter.FormWriteView","#forms-filter",function(a){e.pageNo=1;d.search({pageNo:e.pageNo,
pageSize:1E6})});m.on("click.FormWriteView","#form-title",function(){switch(d.pageModule){case "workflow":var a=$(this).attr("skiptype");void 0!=a&&("edit"===a?$(this).parents(".js_formListBox").find(".js_editForm").trigger("click.FormWriteView"):$(this).parents(".js_formListBox").find(".js_formPreview").trigger("click.FormWriteView"))}});m.on("click.FormWriteView",".js_editForm",function(){var a=$(this).attr("formId");window.open("/form/edit/"+a)});m.on("click.FormWriteView",".js_shareForm",function(){var a=
this;if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5206\u53d1\uff01");else if($(this).parents(".js_formboxli").hasClass("collecting")){var c=$(this).attr("formId");e.getFiledByForm({formId:c},function(d){if(d.formFields&&0<d.formFields.length){d=$(a).parents("ul").parents("li").find("#form-title").text();var e=$(a).parents("ul").parents("li").find("#form-describe").text();new b({container:"#baidushare",
shareTitle:d,shareDesc:e,shareUrl:window.location.protocol+"//"+window.location.host+"/biaoge/fill/"+c});$("#distributeModal").modal("show")}else f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})}});m.on("confirmHandler.FormWriteView",".j_employee",function(a,b){var c=$(this).parents("li"),d=c.attr("formid"),c=c.find("#form-title").text(),g=b.objs;if(b&&g&&0<g.length){for(var h={},k=0;k<g.length;k++)h["userIds["+k+"]"]=g[k].id;h["form.id"]=d;h["form.name"]=c;e.incollect(h,
function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})}else f.notify("\u8bf7\u9009\u62e9\u4eba\u5458\uff01")});m.on("click.FormWriteView",".j_insideCollect",function(a,b){if($(this).parents(".js_formboxli").hasClass("unpublished")||$(this).parents(".js_formboxli").hasClass("stopped"))return f.notify("\u8bf7\u53d1\u5e03\u8868\u5355\u540e\u518d\u5185\u90e8\u6536\u96c6\uff01"),!1;var c=$(this).parents("ul").parents("li"),d=c.attr("formid");e.getFiledByForm({formId:d},
function(a){a.formFields&&0!=a.formFields.length?c.find(".j_employee").click():f.notify("\u8bf7\u4e3a\u8868\u5355\u6dfb\u52a0\u5185\u5bb9\u518d\u5206\u53d1\uff01")})});m.on("click.FormWriteView",".js_deleteForm",function(){if($(this).parents(".js_formitemsli").hasClass("collecting"))f.notify("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u505c\u7528\u8868\u5355\u540e\u91cd\u65b0\u64cd\u4f5c\uff01");else{var a=this,b=$(this).attr("formId"),c=$(this).attr("type"),g={formId:b};"cloud"===c?d.deleteForm(a,g,c):
e.findCount({formId:b},function(b){d.deleteForm(a,g,c,b.count)})}});m.on("click.FormWriteView",".j_changeStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("target-status"),g=$(this).text(),h="",l={"form.id":b,"form.status":c};updateStatus=function(c){c&&e.updateStatus(l,function(c){c=c.form.status;if("j_biaoge"==d.activeTab){var e=$(a).parents(".js_formitemsli");switch(c){case "disable":h="\u505c\u7528";e.find("#form-title").removeClass("j_entityslider-toggle");e.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");
e.removeClass("collecting unpublished").addClass("stopped");e.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+b+'"\x3e\u542f\u7528\x3c/a\x3e\x3c/li\x3e');break;case "enable":h="\u542f\u7528",e.find("#form-title").addClass("j_entityslider-toggle"),e.find(".reportConfig-btn").addClass("dropdown-menu-toggle"),e.removeClass("stopped unpublished").addClass("collecting"),e.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+
b+'"\x3e\u505c\u6b62\x3c/a\x3e\x3c/li\x3e')}e.find(".j_gatherStatus \x3e a").html(h+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}f.notify("\u8868\u5355\u72b6\u6001\u4fee\u6539\u6210\u529f")})};f.confirm("\u786e\u5b9a\u8981"+g+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});m.on("click.FormWriteView",".js_useflow",function(a){a=$(this);var b=TEAMS.currentUser.admin?!0:!1,e={};e.formId=a.attr("formId");e.module="workflow";e.el="#copy-form";e.formTitle=a.attr("name");e.ownership=a.attr("ownership");
e.tpl=f.template("flow.formcopy",{userId:TEAMS.currentUser.id,operationtype:"\u4f7f\u7528\u5ba1\u6279",admin:b});e.copyCallback=function(a){a&&a.form&&"company"==a.form.ownership?ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/company",{trigger:!0}):ROUTER.navigate("/workflows/"+TEAMS.currentUser.id+"/personal",{trigger:!0})};d.formoperationView=new c(e);d.formoperationView.render()});m.on("click.FormWriteView",".js_changeFormStatus",function(){var a=this,b=$(this).attr("formId"),c=$(this).attr("status"),
d=$(this).text(),g={"form.id":b,"form.status":c},h=$(a).parents(".js_formitemsli").attr("formtype");updateStatus=function(c){c&&e.updateStatus(g,function(c){c=c.form.status;var g="";if("enable"==c)g="personal"==h?"\u505c\u7528":"\u4e0b\u67b6",$(a).parents(".js_formitemsli").find(".icon-lock").hide(),$(a).parents(".js_formitemsli").find(".j_formRecommend").show();else if("disable"==c){g="personal"==h?"\u542f\u7528":"\u53d1\u5e03";$(a).parents(".js_formitemsli").find(".icon-lock").show();$(a).parents(".js_formitemsli").find(".j_formRecommend").hide();
var k=$(a).parents(".js_formitemsli").find(".j_star"),l=k.data("recommend");0==l&&e.recommend({formId:b,recommend:l},function(a){k.data("recommend",1);k.removeClass("icon-star").addClass("icon-star-empty").attr("title","\u63a8\u8350")})}$(a).attr("status",c);$(a).text(g);f.notify("\u8868\u5355\u5df2"+d)})};f.confirm("\u786e\u5b9a\u8981"+d+"\u6b64\u8868\u5355\u5417\uff1f",updateStatus)});m.on("click.FormWriteView","#pop-forms .j_preview",function(){var a=$(this).parents("#pop-forms").attr("data-form-id");
window.open("/biaoge/preview/"+a+"/biaoge")});m.on("click.FormWriteView","#pop-forms .j_use",function(){var a=$(this).parents("#pop-forms").attr("data-form-id"),b=$(this).parents("#pop-forms").find(".item-title").text();d.formoperationView=new c({el:"#copy-form",formId:a,module:d.pageModule,formTitle:b,ownership:"personal",tpl:f.template("flow.formcopy",{userId:d.userId,operationtype:"\u542f\u7528",admin:TEAMS.currentUser.admin}),copyCallback:function(a){f.notify("\u8868\u5355\u542f\u7528\u6210\u529f!");
d.render()}});d.formoperationView.render()});m.on("click.FormWriteView","#pop-forms .j_title",function(){var a=$(this).parents("#pop-forms").attr("data-form-id");window.open("/biaoge/preview/"+a+"/biaoge")})},cloneeForm:function(){var a=$(this.tpl).siblings("#formitems.j_biaoge").find(".js_formitemsli").clone();a.find(".j_fillCount").html("0\u4efd\u6570\u636e");a.find("#form-title").html("\u67e5\u770b\u4ecb\u7ecd");a.addClass("unpublished");var b=$(this.tpl).siblings(".js_formcategory.j_biaoge").find(".j_formlist").clone();
b.attr("id","intro_clonee");b.append(a);$(this.el).find(".js_forms.j_biaoge .js_form-list").append(b)},ifShowIntro:function(a){var b=this,c=b.model,d={},e;d["config.configKey"]="guide.biaoge.showintro";c.queryIntroCount(d,function(d){0>$("body").find(".j_form-personal").length||(1==!d.introCount?(1>a?(e="N",b.cloneeForm()):e="Y",b.renderIntro(e)):1>a?($(".j_biaoge .js_form-list").show(),d=$(b.tpl).siblings("#noform-clone").find("#noformsShow").clone(),d.find(".router").attr("href","forms/"+TEAMS.currentUser.id+
"/cloud"),$(".j_biaoge .js_form-list").append(d),$(".j_biaoge .js_form-list").append('\x3cdiv id\x3d"propforms-con"\x3e\x3c/div\x3e'),c.queryRecommend({},function(a){a=a.forms;if(null!=a&&""!=a)for(var c in a){var d=a[c],e=$(b.tpl).siblings("#noform-clone").find("#pop-forms").clone();e.attr("data-form-id",d.id);e.find(".item-title").text(d.name);e.find(".item-info").text(Date.create(d.createTime).format("{yyyy}-{MM}-{dd}")+" | \u67e5\u770b"+d.viewCount+"\u6b21");e.find(".dlcnt").attr("title","\u4f7f\u7528"+
d.copyCount+"\u6b21");e.find(".dlcnt .countnum").text(d.copyCount);$(".j_biaoge .js_form-list #propforms-con").append(e)}})):$("#noformsShow").remove())})},renderIntro:function(a){var b=this;$("body").addClass("introjs-open");introJs().setOptions({showStepNumbers:!1,steps:[{element:".aside .j_aside-nav",intro:"\x3ch5\x3e\u83dc\u5355\u533a\x3c/h5\x3e1\u3001\u201c\u6570\u636e\u8bb0\u5f55\u201d\u53ef\u4ee5\u5bf9\u81ea\u5df1\u7684\u8868\u5355\u6570\u636e\u8fdb\u884c\u7ba1\u7406\uff1b\x3cbr\x3e2\u3001\u5f85\u586b\u5199\u4e0a\u62a5\u548c\u672a\u586b\u5199\u4e0a\u62a5\u4ee5\u53ca\u4e0b\u5c5e\u4e0a\u62a5\u53ef\u4ee5\u586b\u5199\u6216\u67e5\u770b\u81ea\u5df1\u6216\u4e0b\u5c5e\u7684\u4e0a\u62a5\u4fe1\u606f\uff1b\x3cbr\x3e3\u3001\u201c\u4e91\u8868\u5355\u5e93\u201d\u53ef\u6311\u9009\u9002\u5408\u81ea\u5df1\u7684\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e",
position:"right"},{element:".j_toolList .j_form_new",intro:"\x3ch5\x3e\u65b0\u5efa\u8868\u5355\x3c/h5\x3e\u70b9\u51fb\u65b0\u5efa\u8868\u5355\u521b\u5efa\u65b0\u7684\u8868\u5355\uff0c\u5982\u679c\u662f\u7ba1\u7406\u5458\uff0c\u53ef\u521b\u5efa\u56e2\u961f\u8868\u5355\uff1b\x3cbr\x3e\x3cbr\x3e",position:"left"},{element:".j_toolList .j_formIntroduction",intro:"\x3ch5\x3e\u65b0\u5efa\u5206\u7c7b\x3c/h5\x3e1\u3001\u65b0\u5efa\u5206\u7c7b\u53ef\u66f4\u597d\u7ba1\u7406\u60a8\u7684\u8868\u5355\uff0c\u53ea\u6709\u7ba1\u7406\u5458\u53ef\u89c1\u6b64\u6309\u94ae\uff1b\x3cbr\x3e\x3cbr\x3e",
position:"left"},{element:".js_forms.j_biaoge .js_formitemsli",intro:"\x3ch5\x3e\u8868\u5355\u6982\u51b5\x3c/h5\x3e1\u3001\u5bf9\u8868\u5355\u57fa\u672c\u4fe1\u606f\u8fdb\u884c\u7ba1\u7406\uff0c\u5305\u62ec\u7f16\u8f91\u9884\u89c8\u7b49\uff1b\x3cbr\x3e2\u3001\u5185\u90e8\u6536\u96c6\uff0c\u4ee5\u5ba1\u6279\u5f62\u5f0f\u5206\u53d1\u7ed9\u56e2\u961f\u6210\u5458\u6536\u96c6\u6570\u636e\uff1b\x3cbr\x3e3\u3001\u5916\u90e8\u5206\u53d1\uff0c\u5206\u4eab\u94fe\u63a5\u81f3\u670b\u53cb\u5708\u6536\u96c6\u6570\u636e\uff1b\x3cbr\x3e\x3cbr\x3e",
position:"right"},{element:".js_forms.j_biaoge .j_fillCount",intro:"\x3ch5\x3e\u6570\u636e\u6536\u96c6\u7edf\u8ba1\x3c/h5\x3e\u53ef\u5bf9\u6536\u96c6\u7684\u6570\u636e\u8fdb\u884c\u591a\u7ef4\u5ea6\u7edf\u8ba1\u5206\u6790\uff1b\x3cbr\x3e\x3cbr\x3e",position:"right"}]}).onbeforechange(function(a){}).onchange(function(a){}).oncomplete(function(){b.introSaveConf(a)}).onexit(function(){b.introSaveConf(a)}).start().refresh()},introSaveConf:function(a){var b=this,c=b.model;window.onbeforeunload=null;$("body").removeClass("introjs-open");
$.ajax({type:"POST",data:{"config.configKey":"guide.biaoge.showintro","config.configValue":"1"},dataType:"json",url:"/base/configuration/saveConfig.json",success:function(a){}});$("#intro_clonee").remove();"N"==a?($(".j_biaoge .js_form-list").show(),a=$(b.tpl).siblings("#noform-clone").find("#noformsShow").clone(),a.find(".router").attr("href","forms/"+TEAMS.currentUser.id+"/cloud"),$(".j_biaoge .js_form-list").append(a),$(".j_biaoge .js_form-list").append('\x3cdiv id\x3d"propforms-con"\x3e\x3c/div\x3e'),
c.queryRecommend({},function(a){a=a.forms;if(null!=a&&""!=a)for(var c in a){var d=a[c],e=$(b.tpl).siblings("#noform-clone").find("#pop-forms").clone();e.attr("data-form-id",d.id);e.find(".item-title").text(d.name);e.find(".item-info").text(Date.create(d.createTime).format("{yyyy}-{MM}-{dd}")+" | \u67e5\u770b"+d.viewCount+"\u6b21");e.find(".dlcnt").attr("title","\u4f7f\u7528"+d.copyCount+"\u6b21");e.find(".dlcnt .countnum").text(d.copyCount);$(".j_biaoge .js_form-list #propforms-con").append(e)}})):
"Y"==a&&$("#noformsShow").remove()},render:function(){var a=$(this.el),b=this.tpl,b=$(b).siblings("#formmanage-container");a.html(b.html());this.rendertab();a.find(".j_toolList .j_cloudpage-a").addClass("router");a.find(".j_toolList .j_cloudpage-a").attr("href","/forms/"+TEAMS.currentUser.id+"/cloud")},getPageModule:function(){this.activeTab="j_"+this.pageModule},rendertab:function(){var a=$(this.el);this.getPageModule();f.layout(this.el+" .js_forms."+this.activeTab);a.find(".js_forms."+this.activeTab+
" #formlist-loading").show();a.find(".js_forms.j_"+this.pageModule).show();a.find(".js_formtab li[module\x3d'"+this.pageModule+"']").attr("data-load","true").addClass("active");this.isAdmin||a.find(".j_formIntroduction .js_newcategory").remove();this.renderPersonalForms({module:"biaoge"});$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},drag:function(){var a=this,b=a.model;$(a.el).find(".js_forms."+a.activeTab+" .js_form-list #custom-category ul.form-list,.js_forms."+a.activeTab+
" .js_form-list #other-category ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist").sortable({placeholder:"form-placeholder",connectWith:".js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist",update:function(b,c){a.buildCount($(this));a.buildSerialNumber($(this));c.item.data("update",!0)},receive:function(a,b){b.item.data("receive",!0)},stop:function(c,d){if(d.item.data("update"))if(d.item.data("update",
!1),d.item.data("receive")){d.item.data("receive",!1);var e=d.item.attr("formid"),g=d.item.parents(".js_formcategory."+a.activeTab).find(".form-category-hd .js_categoryname").attr("id");b.updateCategory({"form.id":e,"formCategory.id":g},function(b){b.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(d.item))})}else a.sort(d.item)}})},loadCateAndForms:function(a,b,c){$(this.el);c=this.tpl;var d=b.find("#custom-category");b=b.find("#other-category");a=a.formCategories;for(var e in a){var f=
a[e],g=f.name,h=f.id,l=f.sort,n=f.forms,m=n.length,q=f.type,f=$(c).siblings(".js_formcategory."+this.activeTab);"\u5176\u4ed6"==g?f.addClass("js_other").find(".j_form-category").removeClass("j_form-category"):f.find(".js_categoryname").attr("id",h).attr("sort",l).attr("type",q);f.find(".js_categoryname").text(g);f.find(".js_categoryname").attr("title",g);f.find(".form-acount").text("("+m+")");for(var E in n)g=n[E],h=f.find(".j_formlist"),l=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),
this.renderPersonalForm(g,h,l);f.hasClass("js_other")?b.append(f):d.append(f);this.buildSerialNumber(f.find(".j_formlist"))}},renderPersonalForms:function(a){var b=this,c=b.model,d=$(b.el);a.module="biaoge";c.queryMyForms(a,function(a){var e=d.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");b.loadCateAndForms(a,e,"personal");"j_biaoge"==b.activeTab&&(a=d.find(".js_forms.j_biaoge .js_formitemsli").length,b.ifShowIntro(a));d.find(".js_forms."+b.activeTab+" #formlist-loading").hide();
b.drag();d.find(".js_forms."+b.activeTab+" .js_form-list #custom-category").sortable({handle:".form-category-hd",update:function(a,b){b.item.data("update",!0)},stop:function(a,d){if(d.item.data("update")){b.sortCategory($(this));var e={};$(this).find(".js_formcategory."+b.activeTab+" #cate-name .js_categoryname").each(function(a){e["formCategories["+a+"].id"]=$(this).attr("id");e["formCategories["+a+"].sort"]=$(this).attr("sort")});c.formCategorSort(e,function(a){a.message||($(".js_updatecatename").trigger("keydown.FormListView",
13),f.notify("\u8868\u5355\u5206\u7c7b\u6392\u5e8f\u6210\u529f"))})}}})})},renderBiageForm:function(a,b,c,e){c=this.tpl;$(this.el);var f=a.name,g=a.describe,h=a.id,l=a.newFillCount,n=a.operator.id,m=TEAMS.currentUser.id;c=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli");c.find("#form-number").css("background-color",d.getRandomColor());c.attr("formid",h).attr("sort",a.sort);c.attr("formid",h);c.attr("id",h);c.find(".js_formPreview").attr("formId",h);"company"==a.ownership&&c.find(".j_team-icon").removeClass("hide");
c.find("#form-title").text(f);c.find("#form-title").attr("title",f);c.find("#form-title").attr("data-id",h);c.find("#form-title").attr("userId",this.userId);c.find("#form-title").attr("href","/forms/"+TEAMS.currentUser.id+"/formstat/"+h);if(void 0==g||""===g)g="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",c.find("#form-describe").removeClass("description").addClass("nodescription");c.find("#form-describe").text(g);c.find("#form-describe").attr("title",g);c.find(".js_formListBox").attr("formId",h);c.find(".j_fillCount").text(l+
"\u4efd\u6570\u636e");c.find(".j_fillCount").attr("href","/forms/"+TEAMS.currentUser.id+"/formstat/"+h);c.find(".form-message").addClass("hide").hide();c.find(".js_renameForm").attr("formId",h);c.find(".js_editForm").attr("formId",h);c.find(".js_shareForm").attr("formId",h);c.find(".js_copyForm").attr("formId",h).attr("osp",a.ownership);c.find(".js_deleteForm").attr("formId",h);c.find(".js_useflow").attr("formId",h).attr("ownership",a.ownership).attr("name",f);c.find(".js_reportConf").attr("formId",
h);c.find(".js_authConfig").attr("formId",h);c.find(".js_continueWrite").attr("formId",h);n!=m&&(c.find(".js_manager_btn .js_editForm").remove(),c.find(".js_manager_btn .reportConfig-btn").remove(),c.find(".js_manager_btn .formmore-btn").remove(),c.find(".js_manager_btn .js_formPreview-only").removeClass("hide"),c.find(".js_formPreview-only").attr("formId",h),c.find(".js_formListBox .j_gatherStatus").remove(),c.find(".j_recover-icon").removeClass("hide"),c.find(".j_recover-icon").attr("title",Date.create(a.createTime).format("{yyyy}-{MM}-{dd}")+
"\u7531"+a.operator.name+"\u521b\u5efa"));this.createStatus(c,a);"prepend"==e?b.prepend(c):b.append(c);this.buildSerialNumber(b)},renderPersonalForm:function(a,b,c,d){this.renderBiageForm(a,b,c,d)},renderPersonalKeyword:function(a){var b=$(this.el),c=$(this.tpl),d=b.find(".js_forms."+this.activeTab+" .js_form-list"),b=c.siblings("#search-boxlist").find(".j_Search."+this.activeTab).clone();d.html(b);var b=d.find(".js_searchlist"),e=a.formPage,f=e.result;a=a.pageNo;d.find("#pageNo").val(a);a=d.find(".j_Search."+
this.activeTab+" .j_formcount").text();a=a.substring(1,a.length-1);a=parseInt(a)?f.length+parseInt(a):f.length;d.find(".j_Search."+this.activeTab+" .j_formcount").text("("+a+")");1==e.pageNo&&0==e.result.length?d.find(".js_noresult").show():d.find(".js_noresult").hide();e.hasNext?d.find("#loadMore").show():d.find("#loadMore").hide();for(d=0;d<f.length;d++)e=f[d],a=c.siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderPersonalForm(e,b,a,"append");this.buildSerialNumber(b)},
renderKeywords:function(a){var b=this,c=b.model,d=$(b.el);a.pageNo=1;a.pageSize=1E7;c.queryMyFormsKeywords(a,function(a){b.renderPersonalKeyword(a);d.find("#loadMore").attr("isKeyword","isKeyword")})},deleteForm:function(a,b,c,d){var e=this,g=e.model,h=$(a).parents(".j_formlist");"cloud"===c&&(h=$(a).parents("#cloudformul"));var l=function(c){c&&g.deleteForm(b,function(b){b.message?f.notify(b.message):($(a).parents("li").remove(),f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),e.buildCount(h),e.buildSerialNumber(h))})};
"cloud"===c?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",l):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+d+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",l)},buildSerialNumber:function(a){this.buildCount(a);a.find(".js_formitemsli").each(function(a){$(this).find("#form-number").text(a+1)})},buildCount:function(a){var b=a.parents(".js_formcategory."+this.activeTab).find(".js_formitemsli").length;a.parents(".js_formcategory."+
this.activeTab).find(".js_formcount").text("("+b+")")},sortCategory:function(a){a.find(".js_formcategory."+this.activeTab).each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var b=this.model,c={},d=a.prevAll(),e=a.next(),g=a.prev(),h=a.parents(".j_formlist").find(".js_formitemsli").eq(0);d.each(function(a){c["forms["+a+"].id"]=$(this).attr("formid")});(d=parseInt(e.attr("sort"))+1)||(d=parseInt(g.attr("sort")));var g=h.attr("formid"),h=parseInt(h.attr("sort")),
e=a.attr("formid"),l=a.parents(".js_formcategory."+this.activeTab).find(".form-category-hd .js_categoryname").attr("id");c.formId=e;c.sort=d;c.categoryId=l;49990<=h&&(c.firstFormId=g);b.sort(c,function(b){b.sort&&a.attr("sort",b.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});b.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},createStatus:function(a,b){var c=b.status,d=b.id,e="";if("j_biaoge"==this.activeTab){switch(c){case "submit":e="\u505c\u7528";
a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");a.removeClass("collecting stopped").addClass("unpublished");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"submit" formid\x3d"'+d+'"\x3e\u542f\u7528\x3c/a\x3e\x3c/li\x3e');break;case "disable":e="\u505c\u7528";a.find("#form-title").removeClass("j_entityslider-toggle");a.find(".reportConfig-btn").removeClass("dropdown-menu-toggle");
a.removeClass("collecting unpublished").addClass("stopped");a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"disable" formid\x3d"'+d+'"\x3e\u542f\u7528\x3c/a\x3e\x3c/li\x3e');break;case "enable":e="\u542f\u7528",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("stopped unpublished").addClass("collecting"),a.find(".j_gatherStatus \x3e ul").html('\x3cli\x3e\x3ca class\x3d"j_changeStatus" target-status\x3d"enable" formid\x3d"'+d+
'"\x3e\u505c\u7528\x3c/a\x3e\x3c/li\x3e')}a.find(".j_gatherStatus \x3e a").html(e+'\x3ci class\x3d"caret ml-3"\x3e\x3c/i\x3e')}},remove:function(){$(this.el).off(".FormWriteView");this.formoperationView&&(this.formoperationView.remove(),this.formoperationView=null);this.header&&(this.header.remove(),this.header=null)},setFlowsequenceIcon:function(a,b){"show"==b?$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(".form-message").show():$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(" .form-message").hide()},
search:function(a){var b=$(this.el);a.creators=this.filter?this.filter.managers:null;a.tags=this.filter?this.filter.tags:null;a.stats=this.filter?this.filter.status:null;a.formtypes=this.filter?this.filter.formtypes:null;a.startTime=b.find("#form-filter-dropdown #formcreate-time-begin").val();a.endTime=b.find("#form-filter-dropdown #formcreate-time-end").val();b.find(".js_forms."+this.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');
a.module="biaoge";this.filterPersonalForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},filterPersonalForms:function(a){var b=this,c=b.model,d=$(b.el);$(b.tpl);c.queryMyForms(a,function(a){var e=d.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");b.loadCateAndForms(a,e,"personal");"j_biaoge"==b.activeTab&&(0<d.find(".js_forms.j_biaoge .js_formitemsli").length?d.find("#noformsShow").remove():$(".j_biaoge .js_form-list").show().append('\x3cdiv id\x3d"noformsShow" class\x3d"js_noresult eform-nodata text-center c-777 mb-15"\x3e\u65e0\u6570\u636e\x3c/div\x3e'));
d.find(".js_forms."+b.activeTab+" #formlist-loading").hide();b.drag();d.find(".js_forms."+b.activeTab+" .js_form-list #custom-category").sortable({handle:".form-category-hd",update:function(a,b){b.item.data("update",!0)},stop:function(a,d){if(d.item.data("update")){b.sortCategory($(this));var e={};$(this).find(".js_formcategory."+b.activeTab+" #cate-name .js_categoryname").each(function(a){e["formCategories["+a+"].id"]=$(this).attr("id");e["formCategories["+a+"].sort"]=$(this).attr("sort")});c.formCategorSort(e,
function(a){a.message||($(".js_updatecatename").trigger("keydown.FormListView",13),f.notify("\u8868\u5355\u5206\u7c7b\u6392\u5e8f\u6210\u529f"))})}}})})}});m.exports=h});
define("teams/form/formsubordinateview","teams/utils teams/component/validation teams/form/formmanagemodel teams/component/entityslider teams/component/typeahead teams/formmanage/formdistributeview teams/formmanage/formloglistview teams/component/filter teams/form/formoperationview teams/form/formcolor".split(" "),function(h,q,m){var f=h("teams/utils");h("teams/component/validation");var e=h("teams/form/formmanagemodel");h("teams/component/entityslider");h("teams/component/typeahead");h("teams/formmanage/formdistributeview");
h("teams/formmanage/formloglistview");var c=h("teams/component/filter");h("teams/form/formoperationview");var b=h("teams/form/formcolor");h=Backbone.View.extend({initialize:function(a){this.userId=a.userId;this.el=a.container?a.container:"#j_workflowcenter";this.isAdmin=TEAMS.currentUser.admin;this.isWeaver="t7akvdnf84"==TEAMS.currentTenant.tenantKey||"T7AKVDNF84"==TEAMS.currentTenant.tenantKey?!0:!1;this.type=a.type;this.tpl=f.template("form.formsubordinate",{isWeaver:this.isWeaver,isAdmin:this.isAdmin});
this.model=new e(a);this.activeTab="j_biaoge";this.loadmoreType="list";this.pageModule="biaoge"},delegateEvents:function(){var a=this,b=a.model;$(a.tpl);var e=$(a.el);$("body").on("click.FormSubordinateView",".goto-top",function(b){f.gotoTop(".js_forms."+a.activeTab)});e.on("click.FormSubordinateView",".js_formPreview",function(){var a=$(this).attr("formId");window.open("/form/preview/"+a)});e.on("keyup.FormSubordinateView",".js_searchkeyword",function(b){var c=$.trim($(this).val());13==(b?b:window.event?
window.event:null).keyCode&&(b={},a.model.pageNo=1,b.pageNo=a.model.pageNo,e.find(".js_forms."+a.activeTab+" .js_form-list").empty(),c?a.renderKeywords(b):(e.find(".js_forms."+a.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e'),a.renderSubordinateForms(b)))});$("body").on("relatedFlow.FormSubordinateView",function(b,c,d){a.setFlowsequenceIcon(c,d)});e.on("mouseenter.FormSubordinateView","#forms-filter",function(b){var d=
$(this).attr("data-toggle");a.filter=new c({el:d,module:"formmanage",targetObj:$(this),userId:a.userId});a.filter.render(b);b=setTimeout(function(){$(d).slideDown("fast")},300);$(this).data("showTimer",b);$(this).addClass("open")}).on("mouseleave.FormSubordinateView","#forms-filter",function(a){a=$(this).attr("data-toggle");var b=$(this).data("showTimer");b&&clearTimeout(b);$(this).removeData("showTimer");$(a).slideUp(100);$(this).removeClass("open")}).on("filter.FormSubordinateView","#forms-filter",
function(c){b.pageNo=1;a.search({pageNo:b.pageNo,pageSize:1E6})});e.on("click.FormSubordinateView","#form-filter-dropdown .filter-item",function(c){b.pageNo=1;a.search({pageNo:b.pageNo,pageSize:1E6})});e.on("click.FormSubordinateView",".js_formtab .toolkit-item",function(b){e.find(".js_formtab .toolkit-item").removeClass("active");$(this).addClass("active");$(this).hasClass("j_biaoge-tab")?(a.activeTab="j_biaoge",e.find(".js_forms.j_biaoge").removeClass("hide"),e.find(".js_forms.j_workflow").addClass("hide"),
a.pageModule="biaoge"):$(this).hasClass("j_workflow-tab")&&(a.activeTab="j_workflow",e.find(".js_forms.j_biaoge").addClass("hide"),e.find(".js_forms.j_workflow").removeClass("hide"),a.pageModule="workflow","false"==e.find(".js_forms.j_workflow").attr("data-load")&&(a.rendertab({pageNo:1}),e.find(".js_forms.j_workflow").attr("data-load","true")))});e.on("click.FormSubordinateView",".j_Search .js_loadMore",function(b){a.model.pageNo++;b={pageNo:a.model.pageNo};"list"==a.loadmoreType?a.rendertab(b):
"keyword"==a.loadmoreType&&a.renderKeywords(b)})},render:function(){var a=$(this.el),b=this.tpl,b=$(b).siblings("#formmanage-container");a.html(b.html());a.find(".return_js").attr("href","/workflows/"+this.userId+"/new");a.find(".js_forms."+this.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');this.rendertab({pageNo:1})},rendertab:function(a){var b=$(this.el);f.layout(this.el+" .js_forms."+this.activeTab);b.find(".js_forms."+
this.activeTab+" #formlist-loading").show();a.queryType="formManange";a.ownership="personal";"j_biaoge"==this.activeTab?a.module="biaoge":"j_workflow"==this.activeTab&&(a.module="workflow");this.renderSubordinateForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},drag:function(){var a=this,b=a.model;$(a.el).find(".js_forms."+a.activeTab+" .js_form-list #custom-category ul.form-list,.js_forms."+a.activeTab+" .js_form-list #other-category ul.form-list,.js_formcategory."+a.activeTab+
" ul.j_formlist").sortable({handle:".js_formListBox",placeholder:"form-placeholder",connectWith:".js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_forms."+a.activeTab+" .js_form-list ul.form-list,.js_formcategory."+a.activeTab+" ul.j_formlist",update:function(b,c){a.buildCount($(this));a.buildSerialNumber($(this));c.item.data("update",!0)},receive:function(a,b){b.item.data("receive",!0)},stop:function(c,e){if(e.item.data("update"))if(e.item.data("update",!1),e.item.data("receive")){e.item.data("receive",
!1);var h=e.item.attr("formid"),k=e.item.parents(".js_formcategory."+a.activeTab).find(".form-category-hd .js_categoryname").attr("id");b.updateCategory({"form.id":h,"formCategory.id":k},function(b){b.message||(f.notify("\u8868\u5355\u4fee\u6539\u5206\u7c7b\u6210\u529f"),a.sort(e.item))})}else a.sort(e.item)}})},loadCateAndForms:function(a,b,c){$(this.el);c=this.tpl;var e=b.find("#custom-category");b=b.find("#other-category");a=a.formCategories;for(var f in a){var h=a[f],m=h.name,p=h.id,s=h.sort,
q=h.forms,w=q.length,v=h.type,h=$(c).siblings(".js_formcategory."+this.activeTab);"\u5176\u4ed6"==m?h.addClass("js_other").find(".j_form-category").removeClass("j_form-category"):h.find(".js_categoryname").attr("id",p).attr("sort",s).attr("type",v);h.find(".js_categoryname").text(m);h.find(".js_categoryname").attr("title",m);h.find(".form-acount").text("("+w+")");for(var x in q)m=q[x],p=h.find(".j_formlist"),s=$(c).siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderPersonalForm(m,
p,s);h.hasClass("js_other")?b.append(h):e.append(h);this.buildSerialNumber(h.find(".j_formlist"))}},renderSubordinateForms:function(a){var b=this;b.loadmoreType="list";var c=b.model,e=$(b.el);e.find(".js_forms."+b.activeTab+" #formlist-loading").show();a.pageSize=20;a.queryType="manange";a["form.status"]="enable";a.module=b.pageModule;c.findSubordinateForms(a,function(a){b.renderEmployeeKeyword(a);e.find(".js_forms."+b.activeTab+" #formlist-loading").hide();0==e.find(".js_forms."+b.activeTab+" .js_formitemsli").length?
e.find(".js_forms."+b.activeTab+" .js_noresult").show():e.find(".js_forms."+b.activeTab+" .js_noresult").hide()})},renderPersonalForm:function(a,c,e,f){e=this.tpl;$(this.el);var h=a.name,k=a.describe,m=a.id,p=a.fillCount;e=$(e).siblings("#formitems."+this.activeTab).find(".js_formitemsli");e.find(".js_copyForm").addClass("hide");e.attr("formid",m);e.attr("id",m);e.find("#form-number").css("background-color",b.getRandomColor());e.find(".js_formPreview").attr("formId",m);e.find("#form-title").text(h);
e.find("#form-title").attr("data-id",m);e.find("#form-title").attr("userId",this.userId);e.find("#form-title").attr("title",h);void 0==k&&(k="\u6682\u65e0\u8868\u5355\u63cf\u8ff0",e.find("#form-describe").removeClass("description").addClass("nodescription"));e.find("#form-describe").text(k);e.find("#form-describe").attr("title",k);e.find(".js_renameForm").attr("formId",m);e.find(".js_editForm").attr("formId",m);e.find(".js_shareForm").attr("formId",m);e.find(".js_formLog").attr("formId",m);e.find(".js_copyForm").attr("formId",
m);e.find(".js_deleteForm").attr("formId",m);e.find(".js_formListBox").attr("formId",m);e.find(".j_fillCount").text(p+"\u4efd\u6570\u636e");e.find(".j_fillCount").attr("href","/forms/"+TEAMS.currentUser.id+"/form-manager/"+m);e.find(".j_operator").text(a.operator.username);e.find(".j_createtime").text(Date.create(a.createTime).format("{yyyy}-{MM}-{dd}"));e.find(".form-message").addClass("hide").hide();e.find("#form-title").attr("renderType","notRelateFlow");e.find(".js_relateFlow").attr("formId",
m);e.find(".js_relateFlow").attr("data-id",m);this.createStatus(e,a);"prepend"==f?c.prepend(e):c.append(e)},renderEmployeeKeyword:function(a){var b=$(this.el),c=$(this.tpl),e=b.find(".js_forms."+this.activeTab+" .js_form-list"),b=c.siblings("#search-boxlist").find(".j_Search."+this.activeTab).clone();null==e.find(".j_Search."+this.activeTab).get(0)&&e.html(b);var b=e.find(".js_searchlist"),f=a.formPage,h=f.result;a=a.pageNo;e.find("#pageNo").val(a);a=e.find(".j_Search."+this.activeTab+" .j_formcount").text();
a=a.substring(1,a.length-1);a=parseInt(a)?h.length+parseInt(a):h.length;e.find(".j_Search."+this.activeTab+" .j_formcount").text("("+a+")");1==f.pageNo&&0==f.result.length?e.find(".js_noresult").show():e.find(".js_noresult").hide();f.hasNext?e.find("#loadMore").show():e.find("#loadMore").hide();for(e=0;e<h.length;e++)f=h[e],a=c.siblings("#formitems."+this.activeTab).find(".js_formitemsli").clone(),this.renderPersonalForm(f,b,a,"append");this.buildSerialNumber(b)},renderKeywords:function(a){var b=
this,c=b.model,e=$(b.el),f=$.trim(e.find(".js_searchkeyword").val());a.pageSize=20;a["form.ownership"]="personal";a["form.keyword"]=f;a["form.status"]="enable";a["form.module"]="biaoge";c.findSubordinateForms(a,function(a){b.renderEmployeeKeyword(a);e.find("#loadMore").attr("isKeyword","isKeyword")})},deleteForm:function(a,b,c,e){var h=this,k=h.model,m=$(a).parents(".j_formlist");"cloud"===c&&(m=$(a).parents("#cloudformul"));var p=function(c){c&&k.deleteForm(b,function(b){b.message?f.notify(b.message):
($(a).parents("li").remove(),f.notify("\u8868\u5355\u5220\u9664\u6210\u529f"),h.buildSerialNumber(m))})};"cloud"===c?f.confirm("\u4e91\u8868\u5355\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d,\u786e\u5b9a\u5220\u9664\u5417\uff1f",p):f.confirm("\u6b64\u8868\u5355\u5df2\u586b\u5199\u8fc7"+e+"\u6b21,\u786e\u5b9a\u5220\u9664\u5417\uff1f",p)},buildSerialNumber:function(a){a.find(".js_formitemsli").each(function(a){$(this).find("#form-number").text(a+1)})},buildCount:function(a){var b=a.parents(".js_formcategory."+
this.activeTab).find(".js_formitemsli").length;a.parents(".js_formcategory."+this.activeTab).find(".js_formcount").text("("+b+")")},sortCategory:function(a){a.find(".js_formcategory."+view.activeTab).each(function(a){$(this).find("#cate-name .js_categoryname").attr("sort",a+1)})},sort:function(a){$(this.el);var b=this.model,c={},e=a.prevAll(),h=a.next(),k=a.prev(),m=a.parents(".j_formlist").find(".js_formitemsli").eq(0);e.each(function(a){c["forms["+a+"].id"]=$(this).attr("formid")});(e=parseInt(h.attr("sort"))+
1)||(e=parseInt(k.attr("sort")));var k=m.attr("formid"),m=parseInt(m.attr("sort")),h=a.attr("formid"),p=a.parents(".js_formcategory."+this.activeTab).find(".form-category-hd .js_categoryname").attr("id");c.formId=h;c.sort=e;c.categoryId=p;49990<=m&&(c.firstFormId=k);b.sort(c,function(b){b.sort&&a.attr("sort",b.sort);a.prevAll().each(function(a){$(this).attr("sort",parseInt($(this).attr("sort"))+1)});b.message||f.notify("\u8868\u5355\u6392\u5e8f\u6210\u529f")})},createStatus:function(a,b){var c=b.status,
e=b.id,f="";if("j_biaoge"!=this.activeTab&&"j_workflow"==this.activeTab)switch(c){case "submit":case "disable":f="\u542f\u7528";a.find("#form-title").removeClass("j_entityslider-toggle");a.removeClass("collecting").addClass("unpublished");a.find(".j_changeStatus").attr("formid",e);a.find(".j_changeStatus").attr("target-status",c);a.find(".j_changeStatus \x3e span").text(f);break;case "enable":f="\u505c\u7528",a.find("#form-title").addClass("j_entityslider-toggle"),a.removeClass("unpublished").addClass("collecting"),
a.find(".j_changeStatus").attr("formid",e),a.find(".j_changeStatus").attr("target-status",c),a.find(".j_changeStatus \x3e span").text(f)}},remove:function(){$(this.el).off(".FormSubordinateView");this.header&&(this.header.remove(),this.header=null)},setFlowsequenceIcon:function(a,b){"show"==b?$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(".form-message").show():$(this.el).find(".js_formboxli[formid\x3d"+a+"]").find(" .form-message").hide()},search:function(a){$(this.el).find(".js_forms."+
this.activeTab+" .js_form-list").html('\x3cdiv id\x3d"custom-category"\x3e\x3c/div\x3e\x3cdiv id\x3d"other-category"\x3e\x3c/div\x3e');var b=$("#formstatus-filter .filter-item .checked");1==b.length&&(a["form.status"]=b.data("entity"));b=$("#relatedstatus-filter .filter-item .checked");1==b.length&&(a["form.relateFlow"]=b.data("entity"));"j_biaoge"==this.activeTab?a.module="biaoge":"j_workflow"==this.activeTab&&(a.module="workflow");this.filterForms(a);$(".js_forms."+this.activeTab+" .js_form-list").removeClass("hide")},
filterForms:function(a){var b=this,c=b.model,e=$(b.el),f=$(b.tpl);c.findSubordinateForms(a,function(a){e.find("#formmanagelist .js_forms."+b.activeTab+" .js_form-list");var c=e.find(".js_forms."+b.activeTab+" .js_form-list"),g=f.siblings("#search-boxlist").find(".j_Search."+b.activeTab).clone();null==c.find(".j_Search."+b.activeTab).get(0)&&c.html(g);var g=c.find(".js_searchlist"),h=a.formPage.result,m;for(m in h){var q=h[m],v=f.siblings("#formitems."+b.activeTab).find(".js_formitemsli").clone();
b.renderPersonalForm(q,g,v,"append")}a=a.formPage;1==a.pageNo&&0==a.result.length?c.find(".js_noresult").show():c.find(".js_noresult").hide();a.hasNext?(c.find("#loadMore").show(),e.find(".js_loadMore").removeAttr("isKeyword")):c.find("#loadMore").hide();b.buildSerialNumber(g);e.find("#formlist-loading").hide()})}});m.exports=h});
define("teams/form/formtag",["teams/utils","teams/component/typeahead","teams/component/formtagmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead"),c=h("teams/component/formtagmodel");h=Backbone.View.extend({el:"",targetId:"",initialize:function(b){this.container=b.container;this.ccontainer=b.ccontainer;this.el=(this.parentEl=b.parentEl)?this.parentEl+" "+this.container:this.container;this.targetId=b.targetId;this._module=b.module;this.callbacks=b.callbacks;$(this.el).html(f.template("form.formtag",
{panel:"tag"}));this.retpl($(this.el),!0);this.model=new c(b)},render:function(b){$(this.el).find(".entity-container").attr({"target-id":this.targetId,module:this._module});this.renderExistTags()},renderExistTags:function(){var b=this.model,a=$(this.el),c={};c.targetId=this.targetId;b.queryExistTags(c,function(b){b=b.formtags;if(null!=b)for(var c=0;c<b.length;c++){var d=b[c],e=!0;a.find(".entity-item").each(function(){d.id==$(this).find("a").attr("data-value")&&(e=!1)});if(e){var f="\x3cspan class\x3d'entity-item'\x3e\x3ca data-value\x3d'"+
d.id+"'\x3e"+d.name+"\x3c/a\x3e\x3c/span\x3e";a.find(".entity-container").append(f)}}})},delegateEvents:function(){var b=this,a=this.model;$(b.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(c){var e=$(this).prevAll("a").attr("data-value"),h=$(this).parents(".entity-container");$(this).parent(".entity-item").remove();h.trigger("removeEntity",e);var n={};n.targetId=b.targetId;n.id=e;n.module=b._module;a.unlink(n,function(a){});c.stopPropagation();var k=$(this).prevAll("a").attr("data-value"),
h=$(this).parents(".entity-container"),m=h.attr("data-url");if(m&&k){var p=$(this).parent(),n=h.data("param")||{};n._method="delete";c=function(a){a&&$.ajax({type:"POST",dataType:"json",data:n,url:m.replace("{id}",k),success:function(a){p.remove();h.trigger("removeEntity",a);$("#stream").trigger("insertStream",a.streams||a.stream);$("#readinfo").trigger("updateReadInfo");f.notify("\u6570\u636e\u5df2\u5220\u9664");b.callbacks&&b.callbacks.unlink&&b.callbacks.unlink(k,a.streams||a.stream)}})};h.attr("data-noConfirm")?
c(!0):f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",c)}else $(this).parent().hasClass("tag")||($(this).parent(".entity-item").remove(),h.trigger("removeEntity",e))});e({el:b.el+" #typeahead-tag",callback:function(a){"new"==a.id?b.create(a):b.link(a)}})},retpl:function(b,a){a&&(b.find(".tag-controls").addClass("tag-controls-mine"),b.find(".j_tag_label").text("\u6211\u7684\u6807\u7b7e:"),b.find("#typeahead-tag").attr({placeholder:"\u8f93\u5165\u6211\u7684\u6807\u7b7e",privacy:1}))},link:function(b){var a=
this,c=this.model,e=!1,h=a.el;$(h).find("#tags .entity-item a").each(function(){$(this).attr("data-value")==b.id&&(e=!0,f.notify("\u6807\u7b7e\u5df2\u5b58\u5728"))});e||c.link(b,function(b){var c=b.formtag;a.renderTag(h,c);$(a.parentEl+" #stream").trigger("insertStream",b.stream);a.callbacks&&a.callbacks.link&&a.callbacks.link(c.id,b.stream)})},create:function(b){var a=this,c=b.privacy?a.el:a.cel;this.model.create(b,function(b){var e=b.formtag;a.renderTag(c,e);$(a.parentEl+" #stream").trigger("insertStream",
b.stream);$("#left").trigger("refresh","tag");f.notify("\u6807\u7b7e\u521b\u5efa\u6210\u529f");a.callbacks&&a.callbacks.link&&a.callbacks.link(e.id,b.stream)})},renderTag:function(b,a){var c="\x3cspan class\x3d'entity-item'\x3e\x3ca class\x3d'router' href\x3d'/tag/"+(a.privacy?"privacy":"common")+"/"+a.id+"' data-value\x3d'"+a.id+"'\x3e"+a.name+"\x3c/a\x3e\x3c/span\x3e";$(b).find(".entity-container").append(c)},getLinkIds:function(){var b=[];$(this.el).find(".entity-item").each(function(){b.push($(this).find("a").attr("data-value"))});
return b}});m.exports=h});
define("teams/form/formcontinuewriteview",["teams/utils","teams/component/typeahead","teams/component/validation","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/component/typeahead");h("teams/component/validation");var c=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(b){this.formId=b.formId;this.el="#form-continue-write";this.callback=b.callback;this.userId=b.userId;this.parentEl=b.parentEl?b.parentEl:"body";$(this.parentEl).append(f.template("form.formcontinuewrite"));this.model=
new c(b);this.workflowConfig=b.workflowConfig},delegateEvents:function(){var b=this,a=b.formId;$(b.el).on("shown.bs.modal.ContinueWrite",function(a){var c=$(b.el).find("#contwrite-select").find("option:selected").attr("value");"user"==c?e({el:b.el+" .j_writeuserContainer #typeahead-contwrite-employee",callback:function(a){if(a&&!$.isEmptyObject(a)){var d=$(b.el).find("#continue-write .j_selected");b.renderTypeheader(d,a,c)}}}):"department"==c&&e({el:b.el+" .j_writedeptContainer #typeahead-contwrite-department",
callback:function(a){if(a&&!$.isEmptyObject(a)){var d=$(b.el).find("#continue-write .j_selected");b.renderTypeheader(d,a,c)}}})});$(b.el).on("hidden.bs.modal.ContinueWrite",function(a){$(a.target).hasClass("datepicker")||b.remove()});$(b.el).off("change.ContinueWrite",".j_contwriteSelect select").on("change.ContinueWrite",".j_contwriteSelect select",function(){$(this);var c=$(b.el).find("#contwrite-select").val();if("user"==c)$(b.el).find(".j_contWriteUser").removeClass("hide"),$(b.el).find(".j_contWriteDept").addClass("hide"),
$(b.el).find("#continue-write .j_selected").removeClass("hide"),e({el:b.el+" .j_writeuserContainer #typeahead-contwrite-employee",callback:function(a){if(a&&!$.isEmptyObject(a)){var e=$(b.el).find("#continue-write .j_selected");b.renderTypeheader(e,a,c)}}});else if("department"==c)$(b.el).find(".j_contWriteUser").addClass("hide"),$(b.el).find(".j_contWriteDept").removeClass("hide"),$(b.el).find("#continue-write .j_selected").removeClass("hide"),e({el:b.el+" .j_writedeptContainer #typeahead-contwrite-department",
callback:function(a){if(a&&!$.isEmptyObject(a)){var e=$(b.el).find("#continue-write .j_selected");b.renderTypeheader(e,a,c)}}});else{$(b.el).find(".j_contWriteUser").addClass("hide");$(b.el).find(".j_contWriteDept").addClass("hide");$(b.el).find("#continue-write .j_selected").removeClass("hide");var g=$(b.el).find("#continue-write .j_selected"),h=!1;g.find(".entity-item").each(function(a){0==$(this).find("a").attr("id")&&(h=!0)});h?f.notify("\u5df2\u6dfb\u6240\u6709\u4eba\uff0c\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0"):
(b.saveAndSortSelectUser(a,"\u6240\u6709\u4eba","0",c,g),g.append('\x3cspan class\x3d"entity-item" type\x3d"allpeople"\x3e\x3ca id\x3d"0"\x3e\u6240\u6709\u4eba\x3c/a\x3e\x3c/span\x3e'))}});$(b.el).off("click.ContinueWrite","#contWrite-close").on("click.ContinueWrite","#contWrite-close",function(a){$(b.el).modal("hide")});$(b.el).off("click",".entity-item .close").on("click ",".entity-item .close",function(a){a.stopPropagation();b.deleteEvent($(this))})},deleteEvent:function(b){var a=b.prevAll("a").attr("id"),
c=b.parents(".entity-container");b.parent(".entity-item").remove();c.trigger("removeEntity",a);b=b.parent(".entity-item").attr("type");c={};c.formId=this.formId;c.uidORdeptid=a;c.selectType=b;c.queryType="contwrite";$.ajax({type:"post",url:"/form/deleteShareConfig.json",dataType:"json",data:c,success:function(a){f.notify("\u6570\u636e\u5df2\u5220\u9664")}})},renderTypeheader:function(b,a,c){var e=this.formId;if(a.length)for(var f=0;f<a.length;f++){var h=a[f],k=h.name,m=h.id;if(k&&m){var p='\x3cspan class\x3d"entity-item" type\x3d"'+
c+'"\x3e\x3ca id\x3d'+m+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){m==$(this).find("a").attr("id")&&(p=null)});this.saveAndSortSelectUser(e,k,m,c,b);b.append(p)}}else k=a.name,m=a.id,k&&m&&(p='\x3cspan class\x3d"entity-item" type\x3d"'+c+'"\x3e\x3ca id\x3d'+m+"\x3e"+k+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){m==$(this).find("a").attr("id")&&(p=null)}),this.saveAndSortSelectUser(e,k,m,c,b),b.append(p))},saveAndSortSelectUser:function(b,a,c,e,
h){var n=this.model,k={};k.selectType=e;k.formId=b;k.content=a;k.linkId=c;k.uidORdeptid=c;k.queryType="contwrite";var m=!1;h.find(".entity-item").each(function(a){c==$(this).find("a").attr("id")&&(m=!0)});m?f.notify("\u5df2\u6dfb\u52a0\u6b64\u4eba\uff0c\u4e0d\u7528\u91cd\u590d\u6dfb\u52a0"):n.saveShareConfig(k,function(a){a.actionMsg?f.notify(a.actionMsg.message):f.notify("\u4fdd\u5b58\u6210\u529f")})},queryLastConfig:function(){var b=this,a=b.model,c={};c.formId=b.formId;c.queryType="contwrite";
a.queryLastConfig(c,function(a){a=a.shareEntrys;if(null!=a)for(var c=0;c<a.length;c++){var d=a[c].entryType;"all"==d&&(d="allpeople");$(b.el).find("#contwrite-select").find("option[value\x3d'user']").attr("selected",!0);var e=a[c].sid,f=a[c].name;$(b.el).find("#continue-write .j_selected").append('\x3cspan class\x3d"entity-item" type\x3d"'+d+'"\x3e\x3ca id\x3d'+e+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e")}})},render:function(){this.workflowConfig?($(this.el).find(".detail-header .j_header").html('\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u5ba1\u6279\u8868\u5355\u6743\u9650\u8bbe\u7f6e'),
$(this.el).find("#continue-write .j_write-label").text("\u5ba1\u6279\u8868\u5355\u6743\u9650\u8bbe\u7f6e")):($(this.el).find(".detail-header .j_header").html('\x3ci class\x3d"graph graph-agenda"\x3e\x3c/i\x3e\u5185\u90e8\u6301\u7eed\u586b\u5199\u8bbe\u7f6e'),$(this.el).find("#continue-write .j_write-label").text("\u5185\u90e8\u6301\u7eed\u586b\u5199\u8bbe\u7f6e"));$(this.el).modal("show");this.queryLastConfig()},hide:function(){$(this.el).modal("hide")},remove:function(){$(this.el).off(".ContinueWrite");
$("#form-continue-write").remove()}});m.exports=h});
define("teams/form/formmanagemodel",function(h,q,m){h=Backbone.Model.extend({formId:0,pageNo:1,pageSize:10,initialize:function(f){},createUserStream:function(f,e){$.ajax({type:"post",url:"/form/createUserStream.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},createDepartmentStream:function(f,e){$.ajax({type:"post",url:"/form/createDepartmentStream.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveShareConfig:function(f,e){$.ajax({type:"post",url:"/form/saveShareConfig.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},queryLastConfig:function(f,e){$.ajax({type:"post",url:"/form/queryLastConfig.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryCompanyAndEmployForms:function(f,e){$.ajax({type:"post",url:"/form/queryCompanyAndEmployForms.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryMyForms:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/form/queryMyForms.json",dataType:"json",data:JSON.stringify(f),
success:function(c){e&&e(c)}})},queryMyFormsKeywords:function(f,e){$.ajax({type:"post",url:"/form/queryMyFormsKeywords.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryMyWriteForms:function(f,e){$.ajax({type:"post",url:"/form/queryMyWriteForms.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findSubordinateForms:function(f,e){$.ajax({type:"post",url:"/form/findSubordinateForms.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findPersonal:function(f,e){$.ajax({type:"post",
url:"/form/findPersonal.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCompany:function(f,e){$.ajax({type:"post",url:"/form/findCompany.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCloud:function(f,e){$.ajax({type:"get",url:"/form/findCloud.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteForm:function(f,e){$.ajax({type:"post",url:"/form/delete.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryMaxSort:function(f,e){$.ajax({type:"post",
url:"/form/queryMaxSort.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},copyForm:function(f,e){$.ajax({type:"post",url:"/form/copy.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},saveForm:function(f,e){$.ajax({type:"post",async:!1,url:"/form/save.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},renameForm:function(f,e){$.ajax({type:"post",url:"/form/rename.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},checkFormName:function(f,e){$.ajax({type:"get",
url:"/form/checkFormName.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateStatus:function(f,e){$.ajax({type:"post",url:"/form/updateStatus.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryKeywords:function(f,e){$.ajax({type:"post",url:"/form/queryKeywords.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCount:function(f,e){$.ajax({type:"get",url:"/form/findCount.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},suggestion:function(f){$.ajax({type:"get",
url:"/search/suggestion.json",dataType:"json",success:function(e){f&&f(e)}})},updateCategory:function(f,e){$.ajax({type:"post",url:"/form/updateCategory.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findAll:function(f,e){$.ajax({type:"get",url:"/form/findAll.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCateAndCompany:function(f,e){$.ajax({type:"get",url:"/form/findCateAndCompany.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCateAndPersonal:function(f,
e){$.ajax({type:"get",url:"/form/findCateAndPersonal.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findCateAndCloud:function(f,e){$.ajax({type:"get",url:"/form/findCateAndCloud.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},createCategory:function(f,e){$.ajax({type:"post",url:"/form/createCategory.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteCategory:function(f,e){$.ajax({type:"post",url:"/form/deleteCategory.json",dataType:"json",data:f,success:function(c){e&&
e(c)}})},formCategorSort:function(f,e){$.ajax({type:"post",url:"/form/formCategorSort.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateCategoryName:function(f,e){$.ajax({type:"post",url:"/form/updateCategoryName.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},sort:function(f,e){$.ajax({type:"post",url:"/form/sort.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},recommend:function(f,e){$.ajax({type:"post",url:"/form/recommend.json",dataType:"json",data:f,
success:function(c){e&&e(c)}})},updateRelateFlow:function(f,e){$.ajax({type:"post",url:"/form/updateRelateFLow.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryCategory:function(f,e){$.ajax({type:"post",url:"/form/queryCategory.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},incollect:function(f,e){$.ajax({type:"post",url:"/formdatareport/incollect.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryIntroCount:function(f,e){$.ajax({type:"post",url:"/base/configuration/queryIntroCount.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},useflow:function(f,e){$.ajax({type:"post",url:"/form/useflow.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},getFiledByForm:function(f,e){$.ajax({type:"post",url:"/form/getFiledByForm.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},findMember:function(f,e){$.ajax({type:"post",url:"/form/findMember.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},queryRecommend:function(f,e){$.ajax({type:"post",url:"/form/queryRecommend.json",
dataType:"json",data:f,success:function(c){e&&e(c)}})},findNewestLayout:function(f,e){$.ajax({type:"post",url:"/form/findNewestLayout.json",dataType:"json",data:{formId:f},success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/form/formoperationview",["teams/utils","teams/component/validation","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/validation");var e=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(c){this.param=c;this.model=new e(c);this.userId=TEAMS.currentUser.id;this.tpl=c.tpl;this.saveCallback=c.saveCallback;this.el=c.el;this.ownership=c.ownership;this.formwrite=c.formwrite;this.formTitle=c.formTitle;this.copyCallback=c.copyCallback;
this.isAdmin=TEAMS.currentUser.admin;$("body").append(this.tpl);this.initElement()},initElement:function(){var c=$(this.el);"t7akvdnf84"==TEAMS.currentTenant.tenantKey?c.find(".js_formowner .js_cloudform").removeClass("hide"):c.find(".js_formowner .js_cloudform").remove();"cloud"==this.ownership?c.find(".js_formowner").parent().addClass("hide"):c.find(".js_formowner .js_cloudform").addClass("hide")},delegateEvents:function(){var c=this,b=c.model,a=$(c.el),d=c.el;a.on("hidden.bs.modal",function(a){c.remove()});
a.on("keydown.FormoperationView","#form-name",function(b){13===b.keyCode&&(a.find("#form-btn-save").trigger("click"),b.preventDefault())});a.on("keydown.FormoperationView","#form-name-copy",function(b){13===b.keyCode&&(a.find("#form-btn-copy").trigger("click"),b.preventDefault())});a.on("click.FormoperationView","#form-btn-cancel",function(){a.modal("hide")});a.on("shown.bs.modal",function(){"#build-newform"==d?a.find("#form-name").focus():a.find("#form-name-copy").focus().val(c.formTitle)});a.on("blur.FormoperationView",
"#form-name",function(){var d=$(this).val(),e=a.find('.js_forminfo input[name\x3d"ownership"]:checked').val(),h={};e||(e="personal");"personal"==e&&(h["form.operator"]=c.userId);h["form.name"]=$.trim(d);h["form.ownership"]=e;c.param["form.report.id"]&&(h["form.report.id"]=c.param["form.report.id"]);h.module=c.param.module;""!=$.trim(d)&&b.checkFormName(h,function(a){(a=a.message)&&f.notify(a)})});a.on("click.BuildnewformView","#form-btn-save",function(){var d=$.trim(a.find(".js_forminfo #form-name").val()),
e=$.trim(a.find(".js_forminfo #form-describe").val()),h=a.find('.js_forminfo input[name\x3d"ownership"]:checked').val(),k={};h||(h="personal");c.param["form.report.id"]&&(k["form.report.id"]=c.param["form.report.id"]);if(""==$.trim(d))f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u540d\u79f0");else{k["form.name"]=d;k["form.describe"]=e;k["form.ownership"]=h;k.module=c.param.module;void 0!=c.param&&void 0!=c.param.formLabelId&&(k["formLabel.id"]=c.param.formLabelId);var m=null;b.saveForm(k,function(b){var d=
b.message;d?f.notify(d):(m=b.form.id,c.saveCallback&&c.saveCallback(b),f.notify("\u8868\u5355\u4fdd\u5b58\u6210\u529f"),a.modal("hide"))});null!=m&&c.isReportForm?window.open("/form/editreport/"+m):null!=m&&window.open("/form/edit/"+m)}});a.on("click.BuildnewformView","#biaoge-form-btn-save",function(){var d=$.trim(a.find(".js_forminfo #form-name").val()),e=$.trim(a.find(".js_forminfo #form-describe").val()),h=a.find('.js_forminfo input[name\x3d"ownership"]:checked').val(),k=a.find('.js_forminfo input[name\x3d"asCompany-form"]').is(":checked"),
m={};h||(h="personal");c.param["form.report.id"]&&(m["form.report.id"]=c.param["form.report.id"]);if(""==$.trim(d))f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u540d\u79f0");else{var p;"company"==h?p=a.find(".js_company_select").val():"personal"==h&&(null!=c.formwrite&&""!=c.formwrite?(p=a.find(".js_company_select").val(),m["form.formwrite"]="formwrite",k&&(h="company")):p=a.find(".js_personal_select").val());m["form.name"]=d;m["form.describe"]=e;m["form.ownership"]=h;m.module=c.param.module;"\u5176\u4ed6"!=
p&&(m["form.formCategory.id"]=p);void 0!=c.param.formLabelId&&(m["formLabel.id"]=c.param.formLabelId);var q=null;b.saveForm(m,function(b){b.message?f.notify(b.message):b.actionMsg?f.notify(b.actionMsg.message):(q=b.form.id,c.saveCallback&&c.saveCallback(b),f.notify("\u8868\u5355\u4fdd\u5b58\u6210\u529f"),a.modal("hide"))});null!=q&&c.isReportForm?window.open("/form/editreport/"+q):null!=q&&window.open("/form/edit/"+q)}});a.on("click.FormoperationView","#form-btn-copy",function(){var d={},e=$.trim(a.find(".js_forminfo #form-name-copy").val()),
h=$(this).parents(".js_forminfo").find(".js_formowner").find('input[name\x3d"ownership"]:checked').val();""==$.trim(e)?f.notify("\u8bf7\u8f93\u5165\u8868\u5355\u540d\u79f0"):(h||(h="personal"),d["form.name"]=e,d.formName=e,d["form.ownership"]=h,d.ownership=h,"personal"==h&&(d["form.operator"]=c.userId),d.module=c.param.module,d.formId=c.param.formId,b.checkFormName(d,function(e){(e=e.message)?f.notify(e):b.queryMaxSort(d,function(e){d.newSort=e.newSort;b.copyForm(d,function(b){f.notify("\u8868\u5355\u590d\u5236\u6210\u529f");
c.copyCallback&&c.copyCallback(b);a.modal("hide")})})}))});a.on("hidden.bs.modal",function(a){c.remove()})},render:function(){var c=$(this.el);c.modal();c.find('input[name\x3d"ownership"][id\x3d"'+this.ownership+'"]').attr("checked",!0);var b={ownership:this.ownership,module:this.param.module};"company"==this.ownership?(c.find(".js_personal_select").remove(),c.find(".js_personal_label").remove(),this.model.queryCategory(b,function(a){for(var b=0;b<a.formCategories.length;b++)c.find(".js_company_select").append('\x3coption value\x3d"'+
a.formCategories[b].id+'"\x3e'+a.formCategories[b].name+"\x3c/option\x3e");c.find(".js_company_select").append('\x3coption selected\x3d"selected"\x3e\u5176\u4ed6\x3c/option\x3e')})):"personal"==this.ownership&&(null!=this.formwrite&&""!=this.formwrite?(c.find(".js_personal_select").remove(),c.find(".js_personal_label").remove(),this.model.queryCategory({ownership:"company",module:"biaoge"},function(a){for(var b=0;b<a.formCategories.length;b++)c.find(".js_company_select").append('\x3coption value\x3d"'+
a.formCategories[b].id+'"\x3e'+a.formCategories[b].name+"\x3c/option\x3e");c.find(".js_company_select").append('\x3coption selected\x3d"selected"\x3e\u5176\u4ed6\x3c/option\x3e')}),this.isAdmin&&c.find(".j_asCompany").removeClass("hide")):(c.find(".js_company_select").remove(),c.find(".js_company_label").remove(),this.model.queryCategory(b,function(a){for(var b=0;b<a.formCategories.length;b++)c.find(".js_personal_select").append('\x3coption value\x3d"'+a.formCategories[b].id+'"\x3e'+a.formCategories[b].name+
"\x3c/option\x3e");c.find(".js_personal_select").append('\x3coption selected\x3d"selected"\x3e\u5176\u4ed6\x3c/option\x3e')})));c.find("#form-describe").autosize();this.param.ownership_display&&"false"==this.param.ownership_display&&$(".js_formowner").parent().addClass("hide")},remove:function(){$(this.el).off(".FormoperationView");$(this.el).remove()}});m.exports=h});
define("teams/form/writeformview",["teams/utils","teams/workflow/formview","teams/form/formdatareportmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/workflow/formview"),c=h("teams/form/formdatareportmodel");h=Backbone.View.extend({teams:{},initialize:function(b){this.model=new c(b);this.userId=b.userId||TEAMS.currentUser.id;this.formId=b.formId;this.dataId=b.dataId;this.el=b.container||"#entitySlider";this.page=b.page;this.formView=new e;$(this.el).html(f.template("form.writeform"))},delegateEvents:function(){var b=
this,a=$(b.el);a.off("click.WriteFormView",".j_btn_save").on("click.WriteFormView",".j_btn_save",function(c){var e=$(this),h=e.attr("status"),n=a.find("#form-info-div #applicants .applyUser_js").attr("userid");e.removeClass("j_btn_save");b.formView.submit({parentEl:$(".js-biaoge-form"),dataStatus:1,callback:function(c){e.addClass("j_btn_save");if(c&&c.message)f.notify(c.message);else{c=c.formData.id;var d={},m={},q={id:b.userId},u={id:n};msg="todo"==h?"\u6682\u5b58\u6210\u529f":"\u63d0\u4ea4\u6210\u529f";
var w=a.find("#form-info-div #form-name").val();d.status=h;d.formData=c;d.name=w;d.formId=b.formId;d.id=null;d.reporter=q;d.creator=u;m.dataReport=d;b.model.update(m,function(a){$("body").trigger("slideClose");f.notify(msg)})}}})})},render:function(){var b=$(this.el);this.mainView=new e({userId:this.userId,formId:this.formId,parentEl:this.el});f.layout(this.el+" .j_formContainer");this.mainView.render({parentEl:b.find(".js-biaoge-form"),formId:this.formId,callback:function(a){a=a.form;null!=a&&(b.find(".j_formContainer #formName").text(a.name),
b.find("#form-info-div #form-name").val(a.name),b.find("#form-info-div #applicants .applyUser_js").text(a.operator.name),b.find("#form-info-div #applicants .applyUser_js").attr("userid",a.operator.id),b.find("#form-info-div #applicants .j_dept").text(a.operator.department.name),b.find("#form-info-div #applicants .j_date").text(Date.create(new Date).format("{yyyy}-{MM}-{dd}")))}})},remove:function(){$(this.el).off(".WriteFormView");this.mainView&&(this.mainView.remove(),this.mainView=null);this.formView&&
(this.formView.remove(),this.formView=null)}});m.exports=h});
define("teams/form/formcloudview",["teams/utils","teams/form/formcloudmodel","teams/form/formoperationview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/form/formcloudmodel"),c=h("teams/form/formoperationview");h=Backbone.View.extend({initialize:function(b){b=b||{};this.el=b.el;this.userId=b.userId;this.model=new e;$(this.el).html(f.template("form.cloud"));this.currentForm={};this.pageModule=b.module},delegateEvents:function(){var b=this,a=$(b.el);$("body").off("click.FormCloud",".goto-top").on("click.FormCloud",
".goto-top",function(a){f.gotoTop(".j_formcloudmain")});$(window).off("resize.FormCloud").on("resize.FormCloud",function(){0<$(".j_formlabel").length&&($(".j_formlabel")[0].scrollHeight>$(".j_formlabel").data("maxHeight")?$(".j_labelmore").show():$(".j_labelmore").hide())});this.model.on("change:formLabels",function(a,c){b.$(".j_formlabel").html(f.template("form.cloud.label",{data:c}));$(".j_formlabel")[0].scrollHeight>$(".j_formlabel").data("maxHeight")?$(".j_labelmore").show():$(".j_labelmore").hide()}).on("change:forms",
function(a,c){b.$(".form-more").hide();1===a.get("pageNo")?b.$(".j_formlist .j_table").html(f.template("form.cloud.list",{data:c})):b.$(".j_formlist .j_table").append(f.template("form.cloud.list",{data:c}));a.get("hasNext")&&b.$(".form-more").show()}).on("change:order",function(a,c){var e=c||"default";b.$('.j_toolkit a[data-order\x3d"'+e+'"]').hasClass("current")||(b.$(".j_toolkit a").removeClass("current"),b.$('.j_toolkit a[data-order\x3d"'+e+'"]').addClass("current"))}).on("change:keyword",function(a,
b){$("#formsearch-keywords").val()!==b&&$("#formsearch-keywords").val(b)});this.$(".j_formlist").off("click.FormCloud","a").on("click.FormCloud","a",function(){var a=$(this).data("operate"),e=$(this).parents(".eform-cloud-item").data("formId"),h=$(this).parents(".eform-cloud-item").find(".item-title").text();switch(a){case "preview":"biaoge"==b.pageModule?window.open("/biaoge/preview/"+e+"/biaoge"):"workflow"==b.pageModule&&window.open("/biaoge/preview/"+e+"/workflow");break;case "copy":b.formoperationView=
new c({el:"#copy-form",formId:e,module:b.pageModule,formTitle:h,ownership:"personal",tpl:f.template("flow.formcopy",{userId:b.userId,operationtype:"\u542f\u7528",admin:TEAMS.currentUser.admin}),copyCallback:function(a){f.notify("\u8868\u5355\u542f\u7528\u6210\u529f!");var c;"workflow"==b.pageModule?c="personal"==a.form.ownership?"/workflows/"+TEAMS.currentUser.id+"/personal":"/workflows/"+TEAMS.currentUser.id+"/company":"biaoge"==b.pageModule&&(c="/forms/"+TEAMS.currentUser.id+"/write");ROUTER.navigate(c,
{trigger:!0})}}),b.formoperationView.render()}return!1});this.$(".j_formlabel").off("click.FormCloud","a[data-label-id]").on("click.FormCloud","a[data-label-id]",function(){var a=$(this).parent();if(a.hasClass("selected")){var c=$(this).data("labelId");a.removeClass("selected");$(".j_formresult a[data-label-id\x3d"+c+"]").parent().remove()}else a.addClass("selected"),$(".j_formresult dl").append(a.clone());var e=[];$(".j_formresult a[data-label-id]").each(function(){e.add($(this).data("labelId"))});
b.model.getFormByLabels(e);return!1});this.$(".j_formresult").off("click.FormCloud","a[data-label-id]").on("click.FormCloud","a[data-label-id]",function(){var a=$(this).data("labelId");$(this).parent().remove();$(".j_formlabel a[data-label-id\x3d"+a+"]").parent().removeClass("selected");var c=[];$(".j_formresult a[data-label-id]").each(function(){c.add($(this).data("labelId"))});b.model.getFormByLabels(c);return!1});this.$(".j_toolkit").off("click.FormCloud","a[data-order]").on("click.FormCloud",
"a[data-order]",function(){var a=$(this);if(a.hasClass("current"))return!1;var c=a.data("order");b.$(".j_toolkit a").removeClass("current");a.addClass("current");c&&b.model.sortFormList(c);return!1});this.$(".form-more").off("click.FormCloud").on("click.FormCloud",function(){b.model.nextPage()});this.$(".j_labelmore").off("click.FormCloud","span").on("click.FormCloud","span",function(){b.$(".j_formlabel").hasClass("formcloud-sub")?(b.$(".j_formlabel").removeClass("formcloud-sub"),b.$(".j_labelmore i").removeClass().addClass("icon-angle-up")):
(b.$(".j_formlabel").addClass("formcloud-sub"),b.$(".j_labelmore i").removeClass().addClass("icon-angle-down"))});this.$(".j_toolkit").off("search.FormCloud","#formsearch-keywords").on("search.FormCloud","#formsearch-keywords",function(a){a=$.trim($(this).val());b.model.getFormByKeyword(a)});this.$(".j_toolkit").off("keyup.FormCloud","#formsearch-keywords").on("keyup.FormCloud","#formsearch-keywords",function(a){13==a.which&&$(this).trigger("search")});this.$(".j_toolkit").off("click.FormCloud",".icon-search").on("click.FormCloud",
".icon-search",function(c){c=a.find("#formsearch-keywords");c=$.trim(c.val());b.model.getFormByKeyword(c)})},render:function(){$(".j_formlist .j_no-result").addClass("hide");this.model.load();f.layout(".j_formcloudmain");this.popularityForm()},remove:function(){$(this.el).off(".FormCloud");$(window).off(".FormCloud");$(this.el).html("")},popularityForm:function(){var b=this.pageModule;this.model.popularityForm({pageNo:1,pageSize:5},function(a){$.each(a.forms,function(a){var c=$(".j_hotform-wrap .hotform-list:first").clone().show();
a+=1;4<=a&&a++;c.find(".catalog-logo img").attr("src","images/formcloudview/"+a+".png");c.find(".j_formname").attr("title",this.name).text(this.name);c.find(".hotform-card").attr("href","/biaoge/preview/"+this.id+"/"+b);$(".j_hotform-wrap").append(c)})})}});m.exports=h});
define("teams/formmanage/formwatchmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:1,pageSize:15,formwatch:{filter:1,status:1},initialize:function(f){f=f||{};this.id=f.id;this.targetId=f.targetId;this._module=f.module;this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}")},load:function(f){var e=this;$.ajax({type:"get",url:"/formmanage/findList.json",dataType:"json",success:function(c){e.form=c.form;
f&&f(c)}})},search:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formmanage/search.json",dataType:"json",data:f,success:function(c){e&&e(c)}})},formwatchByDay:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/formmanage/formwatchByDay.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formmanage/formcollectloglistmodel",function(h,q,m){h=Backbone.Model.extend({initialize:function(f){this.pageSize=10;this.pageNo=1},queryLog:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/form/queryInCollectLog.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})},inCollectSendAgain:function(f,e){$.ajax({type:"post",url:"/formdatareport/inCollectSendAgain.json",dataType:"json",data:f,success:function(c){e&&
e(c)}})},queryLogDetail:function(f,e){f.pageSize=this.pageSize;$.ajax({contentType:"application/json;charset\x3dUTF-8",type:"post",url:"/form/queryInCollectLogDetail.json",dataType:"json",data:JSON.stringify(f),success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formmanage/formdistributeview",["teams/utils","jquery.qrcode.min","teams/baidushare/baidushare"],function(h,q,m){var f=h("teams/utils");h("jquery.qrcode.min");var e=h("teams/baidushare/baidushare");h=Backbone.View.extend({initialize:function(c){this.el="#formmanageDialog-container";$(this.el).html(f.template("formmanage.formdistribute"));$(this.el).find(".j_sharetitle").text("\u3010"+c.shareTitle+"\u3011");this.$el=$(this.el);this.options=c;this.create_qccode();
ZeroClipboard.config({swfPath:"js/clipboard.swf",activeClass:"zeroclipboard-is-active"})},delegateEvents:function(){var c=this;$("#distributeModal").on("hidden.bs.modal",function(b){$("#formdistribute-container").empty()});$("#create-qccode").off("click").on("click",function(b){c.create_qccode()});$("#distributeModal .btn-image-group .btn-image-item").click(function(){var b=$(this);b.parent().find(".btn-image-item").removeClass("select unselect");b.siblings().addClass("unselect");b.addClass("select");
$("#distributeModal .modal-body .form").addClass("hide");b=b.attr("target");$(b).removeClass("hide")});$("#bdTitle").blur(function(){var b=$.trim($("#bdTitle").text());window._bd_share_config.share[0].bdText=b});if(window.clipboardData)$("#distributeModal").on("click.distributeModal",".j_invite_link",function(){window.clipboardData.setData("text",$(this).attr("data-entity"));f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")});else c.copyLink($("#distributeModal").find(".j_invite_link"));
c.$el.find(".j_share").off("click","span").on("click","span",function(b){b=$(this);var a=c.options.shareUrl,d=c.options.shareTitle;b.hasClass("j_qzone")?window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url\x3d"+a+"\x26title\x3d"+d):b.hasClass("j_tsina")?window.open("http://service.weibo.com/share/share.php?url\x3d"+a+"\x26title\x3d"+d):b.hasClass("j_tqq")?window.open("http://share.v.t.qq.com/index.php?c\x3dshare\x26a\x3dindex\x26url\x3d"+a+"\x26title\x3d"+d):b.hasClass("j_mshare")?
window.open("http://s.share.baidu.com/mshare?click\x3d1\x26url\x3d"+a+"\x26title\x3d"+d):b.hasClass("j_douban")&&window.open("http://www.douban.com/share/service?href\x3d"+a+"\x26name\x3d"+d)})},create_qccode:function(){$("#copy-text").val(this.options.shareUrl);$("#copy-btn").attr("data-entity",this.options.shareUrl);$("#qrcode").html("");$("#qrcode").qrcode({width:130,height:130,correctLevel:0,text:this.options.shareUrl});$("#qrcode").show()},baidushare:function(c){$("#bdTitle").text(c.shareTitle);
c.callback=function(b){"weixin"==b&&setTimeout(function(){$("#bdshare_weixin_qrcode_dialog").addClass("weixin_qrcode")},100)};this.baidushareView=new e(c)},render:function(){},copyLink:function(c){var b=new ZeroClipboard(c);b.on("ready",function(){b.on("copy",function(a){a.clipboardData.setData("text/plain",c.attr("data-entity"))});b.on("aftercopy",function(a){f.notify("\u94fe\u63a5\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f")});b.on("error",function(a){f.notify(a.messsage)})})}});m.exports=
h});
define("teams/formmanage/formlabeleditview",["teams/utils","teams/formmanage/formlabeltreemodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formlabeltreemodel"),c=h("teams/component/typeahead");h=Backbone.View.extend({initialize:function(b){this.model=new e;this.el=b.el;this.id=b.id;this.name=b.name;this.type=b.type;this.root=b.root;this.parent=b.parent;this.rank=b.rank;this.options=b;$(this.el).html(f.template("formmanage.formlabeledit"));f.layout("#formlabel-info");this.firstPageLoad=
!0;this.checkNumberEvent()},delegateEvents:function(){var b=this,a=$(b.el);a.off("blur.formlabel","#formlabel-name").on("blur.formlabel","#formlabel-name",function(a){var c=$(a.currentTarget);a=$("#formlabel-id").val();c=c.val();$("#formlabel-name").attr("data-old")!=c&&(a?b.saveFormLabelProperty():b.saveFormLabel())});a.off("blur.formlabel","#formlabel-sort").on("blur.formlabel","#formlabel-sort",function(a){var c=$(a.currentTarget);a=$("#formlabel-id").val();var c=c.val(),e=$("#formlabel-sort").attr("data-old");
""==$.trim(c)?($(this).focus(),f.notify("\u7c7b\u522b\u5e8f\u53f7\u4e0d\u80fd\u4e3a\u7a7a")):e!=c&&a&&b.saveFormLabelProperty()});c({el:"#formlabel-info #typeahead-formlabel",callback:function(a){if(a&&!$.isEmptyObject(a)&&b.id!=a.id){var c=$("#formlabel-name").val();b.model.saveFormLabelProperty({id:b.id,parentId:a.id,rank:a.rank+1,name:c},function(c){c.message?f.notify(c.message):(b.options.parentNode=$("#"+a.id),b.parent.reload(),b.reload(),f.notify("\u4fee\u6539\u6210\u529f"))})}},resultHandler:function(a){var c=
[];$.each(a,function(a,d){b.id!=d.id&&c.push(d)});return c}})},checkNumberEvent:function(){$(document).on("keydown","input[componentKey\x3d'NumberComponent']",function(b){b=parseInt(b.keyCode);var a=$(this).val();if((110==b||190==b)&&0<=a.indexOf(".")||(109==b||173==b)&&0<=a.indexOf("-"))return!1});$(document).on("keyup","input[componentKey\x3d'NumberComponent']",function(b){b=$(this).val();isNaN(b)&&"-"!=b&&$(this).val(parseFloat(b));"."==b.charAt(0)&&$(this).val(0+parseFloat(b))});$(document).on("keyup",
"input[componentKey\x3d'NumberComponent']",function(b){b=$(this).val();$(this).val(b.replace(/[^\d.-]/g,""));if(null!=$(this).parents(".subform_js").get(0)){b=$(this).attr("name");var a=$(this).parents(".subform_js"),c=a.find('input[name\x3d"'+b+'"]'),c=window.formPlugin.calculateTotal(c);a.find('span[name\x3d"'+b+'"]').html(c)}});$(document).on("blur","input[componentKey\x3d'NumberComponent']",function(b){b=$(this).val();$(this).val(b.replace(/[^\d.-]/g,""));if(null!=$(this).parents(".subform_js").get(0)){b=
$(this).attr("name");var a=$(this).parents(".subform_js"),c=a.find('input[name\x3d"'+b+'"]'),c=window.formPlugin.calculateTotal(c);a.find('span[name\x3d"'+b+'"]').html(c)}})},render:function(){"edit"==this.type?($("#operType").text("\u4fee\u6539\u7c7b\u522b"),this.root&&$("#formlabel-info #formlabel-root").hide(),$("#formlabel-info").removeClass("hide"),$("#formlabel-id").val(this.id),$("#formlabel-name").val(this.name),$("#formlabel-parent").val(this.options.parentNode.attr("id")),$("#formlabelSelector a").text(this.options.parentNode.find(".tree-name").text()),
$("#parent-rank").val(this.options.parentNode.attr("data-rank")),$("#formlabel-name").attr("data-old",this.name),this.model.getById(this.id,function(b){if(b=b.formLabel.sort)$("#formlabel-sort").attr("data-old",b),$("#formlabel-sort").val(b)})):($("#operType").text("\u6dfb\u52a0\u7c7b\u522b"),"add"==this.type?this.renderAdd():this.renderAddRoot(),$("#formlabel-sort").val(0));this.firstPageLoad&&$("#formlabel-name").focus()},renderAdd:function(){var b=this,a=this.model,c=b.id,e=$("#formlabel-info").removeClass("hide");
e.find("input:not(#formlabelSelector)").val("");e.find("textarea").val("");a.getById(c,function(a){var c=a.formLabel;b.formlabel=a.formLabel;e.find("#formlabel-parent").val(c.id);e.find("#formlabelSelector a").html(c.name);e.find("#parent-rank").val(c.rank)})},saveFormLabel:function(){var b=this,a=$("#formlabel-info"),c=$("#formlabel-name").val();if(20<$.trim(c).length)f.notify("\u7c7b\u522b\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26");else if(0==$.trim(c).length)f.notify("\u7c7b\u522b\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a");
else{var e=a.find("#formlabel-name").val(),h=a.find("#formlabel-parent").val(),c=parseInt(a.find("#parent-rank").val()),n=a.find("#formlabel-sort").val();h?(c={formLabel:{name:e,parentId:h,rank:c+1,sort:n,labelType:"cloud"}},c=JSON.stringify(c),this.model.saveFormLabel(c,function(c){c.message?f.notify(c.message):c.formLabel.id?(a.find("#formlabel-id").val(c.formLabel.id),$("#formlabel-info").data("formlabel",c.formLabel),c.formLabel.name&&b.trigger("addNode",c.formLabel.id),f.notify("\u4fdd\u5b58\u6210\u529f"),
b.id=c.formLabel.id,b.name=e,b.options.parentNode=$("#"+h),b.parent.reload(),b.reload()):f.notify("\u6570\u636e\u9519\u8bef\uff0c\u6dfb\u52a0\u5931\u8d25")})):f.notify("\u4e0a\u7ea7\u7c7b\u522b\u4e0d\u80fd\u4e3a\u7a7a")}},saveFormLabelProperty:function(){var b=$("#formlabel-info #formlabel-name"),a=this;$("#formlabel-info").data("formlabel");var c=b.val(),b=b.attr("name"),e=$("#formlabel-name").val();if(20<$.trim(e).length)$("#formlabel-info").data("formlabelName",e),f.notify("\u7c7b\u522b\u540d\u79f0\u4e0d\u5f97\u8d85\u8fc720\u4e2a\u5b57\u7b26");
else if(0==$.trim(e).length)f.notify("\u7c7b\u522b\u540d\u79f0\u4e0d\u5f97\u4e3a\u7a7a"),$("#formlabel-name").val(formlabelName);else{var h="";b&&(h=b.replace("formLabel.",""));b={};b.id=$("#formlabel-id").val();b.name=c;b.parentId=$("#formlabel-parent").val();""==b.parentId&&(b.parentId=-1);b.sort=$("#formlabel-sort").val();a.model.saveFormLabelProperty(b,function(b){b.message?f.notify(b.message):("parent.id"===h||"disporder"===h?a.trigger("rerenderTree"):(a.name=c,a.parent.reload(),a.reload()),
f.notify("\u4fdd\u5b58\u6210\u529f"))})}},remove:function(){},renderAddRoot:function(){var b=$("#formlabel-info").removeClass("hide");$("#formlabel-info #formlabel-root").hide();b.find("#formlabel-parent").val(-1);b.find("#parent-rank").val(0)},reload:function(){view=this;view.type="edit";view.firstPageLoad=!1;view.render()}});m.exports=h});
define("teams/formmanage/formcollectloglistview",["teams/utils","teams/formmanage/formcollectloglistmodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formcollectloglistmodel"),c=h("teams/component/typeahead");h=Backbone.View.extend({initialize:function(b){this.el=b.el;this.formId=b.formId;$(this.el).html(f.template("formmanage.formcollectloglist"));this.model=new e(b)},delegateEvents:function(){var b=this,a=$(this.el),d=this.model;$("body").off("click.FormCollectLogListView",
".goto-top").on("click.FormCollectLogListView",".goto-top",function(a){f.gotoTop()});a.on("click.FormCollectLogListView",".pagination .page-first",function(a){$(this).hasClass("disabled")||(d.pageNo=1,b.renderPage(d.pageNo))});a.on("click.FormCollectLogListView",".pagination .page-pre",function(a){$(this).hasClass("disabled")||(--d.pageNo,b.renderPage(d.pageNo))});a.on("click.FormCollectLogListView",".pagination .page-next",function(a){$(this).hasClass("disabled")||(++d.pageNo,b.renderPage(d.pageNo))});
a.on("click.FormCollectLogListView",".pagination .page-last",function(a){$(this).hasClass("disabled")||b.renderPage(b.totalPages)});a.on("click.FormCollectLogListView","#collectlogContent .j_detail",function(a){a=$(this).parent().parent();if(a.hasClass("active"))a.find(".detailContentClone").addClass("hide"),a.removeClass("active");else{var c=$(this).attr("collectId");b.renderDetailPage(1,c,a)}});a.on("click.FormCollectLogListView","#collectlog-more",function(a){a=$(this).data("page");var c=$(this).parents(".j_loglist").find(".active .j_detail").attr("collectId"),
d=$(this).parent().parent().find(".j_logdetaillist");b.renderDetailPage(a.nextPage,c,d)});f.datepicker({el:b.el+" #sendStartTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#sendStartTime"),d=$(b.el).find("#sendEndTime");d.val()&&a>d.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),c.val("")):c.val(a)}});f.datepicker({el:b.el+" #sendEndTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");
var c=$(b.el).find("#sendStartTime"),d=$(b.el).find("#sendEndTime");c.val()&&a<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),d.val("")):d.val(a)}});c({el:b.el+" #sendersDiv #senders",callback:function(c){if(c&&!$.isEmptyObject(c)){var d=a.find("#sendersDiv .j_selected");b.renderTypeheader(d,c)}}});a.on("click.FormCollectLogListView",".btn-search",function(c){$(this).removeClass("btn-search");a.find("#collectlogContent .j_loglist");b.renderPage(1);$(this).addClass("btn-search")});
a.on("click.FormCollectLogListView",".j_send_again",function(a){a={};a["userIds[0]"]=$(this).parent().find(".j_accepter").attr("userId");a.collectId=$(this).parents(".j_logdetaillist").attr("collectId");a["form.id"]=b.formId;d.inCollectSendAgain(a,function(a){console.log(a)});f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})},render:function(){this.renderPage(this.model.pageNo);f.layout("#collectlog-Content")},renderPage:function(b){var a=this,c=a.model,e={},f=$(a.el),h=f.find("#sendStartTime").val(),
k=f.find("#sendEndTime").val(),m=[];f.find("#sendersDiv .j_optcontainer .j_selected span a").each(function(){var a=$(this).attr("id");m.push(a)});e.formId=a.formId;e.startTime=$.trim(h);e.endTime=$.trim(k);e.userIds=m;e.pageNo=b;c.queryLog(e,function(c){c=c.collectLogPage;a.totalPages=c.totalPages;c=c.result;var d=f.find("#collectlogContent .j_loglist");1==b&&(null==c||0==c.length?(f.find(".j_collectlog_empty").removeClass("hide"),f.find(".list-sub").addClass("hide"),f.find(".j_page_set").addClass("hide")):
(f.find(".j_collectlog_empty").addClass("hide"),f.find(".list-sub").removeClass("hide"),f.find(".j_page_set").removeClass("hide")));d.empty();if(null!=c)for(var e=0;e<c.length;e++){var g=f.find("#collectlogClone li").clone(),h=c[e];g.find(".j_number").text(1+e+10*(b-1));g.find(".j_opertor").text(h.creator.username);g.find(".j_send_count").text(h.sendCount);g.find(".j_detail").attr("collectId",h.id);g.find(".j_success_failure").text(h.successCount+"/"+h.failureCount);h=Date.create(h.createTime);g.find(".j_send_time").text(h.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")).attr("title",
h.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));d.append(g)}f.find(".j_page_set .active a").text("\u7b2c"+b+"/"+a.totalPages+"\u9875");a.loadPageControl(b)})},renderDetailPage:function(b,a,c){var e=this.model,f={},h=$(this.el);f.collectId=a;f.pageNo=b;e.queryLogDetail(f,function(a){a=a.collectLogDetailPage;var e=a.result,f,g;1==b?(f=h.find("#collectlogDetailContent ul").clone(),g=f.find(".j_logdetaillist")):(f=c.parents(".detailContentClone"),g=c);a&&a.hasNext?(f.find("#collectlog-more").parent().show(),
f.find("#collectlog-more").data("page",a)):f.find("#collectlog-more").parent().hide();1==b&&(g.empty(),null==e||0==e.length?f.find(".j_empty").show():f.find(".j_empty").hide());if(null!=e){g.attr("collectId",e[0].collectId);for(var l=0;l<e.length;l++){var m=h.find("#collectlogdetailClone li").clone(),q=e[l];m.find(".j_accepter").text(q.operator.username);m.find(".j_accepter").attr("userId",q.operator.id);"failure"==q.status?(m.find(".j_success_status").text("\u53d1\u9001\u5931\u8d25"),m.find(".j_send_again").removeClass("hide")):
"success"==q.status?m.find(".j_success_status").text("\u53d1\u9001\u6210\u529f"):m.find(".j_success_status").text("\u5904\u7406\u4e2d");g.append(m)}}f.removeClass("hide");1==a.pageNo&&c.append(f).addClass("active")})},renderTypeheader:function(b,a){if(a.length)for(var c=0;c<a.length;c++){var e=a[c],f=e.name,h=e.id;if(f&&h){var k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)});
b.append(k)}}else f=a.name,h=a.id,f&&h&&(k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)}),b.append(k))},loadPageControl:function(b){$(this.el);1>=this.totalPages?$(this.el).find(".page-buttons").addClass("disabled"):(1==b&&($(this.el).find(".page-next").removeClass("disabled"),$(this.el).find(".page-last").removeClass("disabled"),$(this.el).find(".page-first").addClass("disabled"),
$(this.el).find(".page-pre").addClass("disabled")),b==this.totalPages&&($(this.el).find(".page-first").removeClass("disabled"),$(this.el).find(".page-pre").removeClass("disabled"),$(this.el).find(".page-next").addClass("disabled"),$(this.el).find(".page-last").addClass("disabled")),1!=b&&b!=this.totalPages&&($(this.el).find(".page-first").removeClass("disabled"),$(this.el).find(".page-pre").removeClass("disabled"),$(this.el).find(".page-next").removeClass("disabled"),$(this.el).find(".page-last").removeClass("disabled")))},
remove:function(){var b=$(this.el);b.off(".FormCollectLogListView");b.remove()}});m.exports=h});
define("teams/formmanage/formwatchpage",["teams/utils","teams/core/page","teams/formmanage/formwatchlistview","teams/formmanage/formwatchchartview"],function(h,q,m){var f=h("teams/utils");q=h("teams/core/page");var e=h("teams/formmanage/formwatchlistview"),c=h("teams/formmanage/formwatchchartview");h=q.extend({initialize:function(b){this.el=b.container;this.userId=b.userId?b.userId:TEAMS.currentUser.id;$(this.el).html(f.template("formmanage.formwatchpage",{userId:this.userId}));f.layout(this.el);
this.subType=b.subType},render:function(){this.initLayout({userId:this.options.userId?this.options.userId:TEAMS.currentUser.id,self:!this.options.userId||this.options.userId==TEAMS.currentUser.id});this.mainView="chart"==this.subType?new c(this.options):new e(this.options);this.mainView.render()},delegateEvents:function(){var b=this;$("#formwatch-page").find(".js_formtab .toolkit-item-tab").click(function(){$(this).parent().find(".toolkit-item-tab").removeClass("active");$(this).addClass("active");
b.render()})},load:function(b){}});m.exports=h});
define("teams/formmanage/formlabellistmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:1,pageSize:15,initialize:function(f){this.pageSize=f.pageSize||this.pageSize},loadData:function(f,e){var c=$.extend(f,{pageNo:this.pageNo,pageSize:this.pageSize});$.ajax({url:"/form/findFormLabelData.json",type:"post",dataType:"json",data:c,success:function(b){e&&e(b)}})},findCateAndCloud:function(f,e){$.ajax({url:"/form/findCateAndCloud.json",type:"post",dataType:"json",data:f,success:function(c){e&&
e(c)}})},saveFormLabelLink:function(f,e){$.ajax({url:"/form/saveFormLabelLink.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},findFormSelectData:function(f,e){$.ajax({url:"/form/findFormSelectData.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteFormLabelLink:function(f,e){$.ajax({url:"/form/deleteFormLabelLink.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateFormStatus:function(f,e){$.ajax({url:"/form/updateStatus.json",
type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},updateFormRecommend:function(f,e){$.ajax({url:"/form/recommend.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formmanage/formlabeltreemodel",function(h,q,m){h=Backbone.Model.extend({loadData:function(f){$.ajax({url:"/form/findFormLaberAll.json",type:"post",dataType:"json",success:function(e){f&&f(e)}})},saveFormLabelProperty:function(f,e){$.ajax({url:"/form/updateFormLabel.json",contentType:"application/json;charset\x3dUTF-8",type:"post",dataType:"json",data:JSON.stringify({params:f}),success:function(c){e&&e(c)}})},getById:function(f,e){$.ajax({url:"/form/getById.json",type:"post",dataType:"json",
data:{labelId:f},success:function(c){e&&e(c)}})},saveFormLabel:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/form/saveFormLabel.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})},deleteFormLabel:function(f,e){$.ajax({contentType:"application/json;charset\x3dUTF-8",url:"/form/deleteFormLabel.json",type:"post",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formmanage/formwatchlistview",["teams/utils","teams/formmanage/formwatchmodel","teams/component/filter","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formwatchmodel");h("teams/component/filter");var c=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(b){this.el="#j_formContent";$(this.el).html(f.template("formmanage.formwatchlist"));this.model=new e;f.layout("#j_formContent #formwatch-list");this.keywords=""},delegateEvents:function(){var b=
this,a=this.model,c=$("#formwatch-list");$("body").off("click.FormWatchList",".goto-top").on("click.FormWatchList",".goto-top",function(a){f.gotoTop("#formwatch-list")});c.off("click.status",".status .tzCheckBox").on("click.status",".status .tzCheckBox",function(a){var c=$(this).parent().parent(),d=c.find(".index").attr("data-id"),e;$(this).hasClass("open")?(e="enable",a="\u8868\u5355\u5f53\u524d\u72b6\u6001\u4e3a\u542f\u7528\uff0c\u662f\u5426\u7981\u7528\u8868\u5355\uff1f"):(e="disable",a="\u8868\u5355\u5f53\u524d\u72b6\u6001\u4e3a\u7981\u7528\uff0c\u662f\u5426\u542f\u7528\u8868\u5355\uff1f");
f.confirm(a,function(a){a&&b.updateStatus({"form.id":d,"form.status":e},c)})});c.on("click.toolkit-list","#check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$("#form-list .index span.checkbox").not(":first").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).addClass("hide");$(this).parent("th").removeClass("selected");$(this).prev().removeClass("hide")}):$("#form-list .index span.checkbox").not(":first").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");
$(this).removeClass("hide");$(this).parent("th").addClass("selected");$(this).prev().addClass("hide")});$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});c.on("click.index",".checkbox",function(){var a=!1;$(this).find("i").hasClass("icon-checkbox-checked")&&(a=!0);a?$(this).parent("th").removeClass("selected"):$(this).parent("th").addClass("selected");$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});c.on("mouseenter.table",
"tbody tr",function(a){a=!1;$(this).find(".index").hasClass("selected")&&(a=!0);a||($(this).find(".sn").addClass("hide"),$(this).find(".checkbox").removeClass("hide"))}).on("mouseleave.table","tbody tr",function(a){a=!1;$(this).find(".index").hasClass("selected")&&(a=!0);a||($(this).find(".sn").removeClass("hide"),$(this).find(".checkbox").addClass("hide"))});c.on("click.toolkit-list",".j_batch",function(a){var c="disable";a="\u542f\u7528";$(this).hasClass("watch-disable")&&(c="enable",a="\u7981\u7528");
f.confirm("\u786e\u8ba4"+a+"\u9009\u4e2d\u7684\u8868\u5355\uff1f",function(a){a&&$("#form-list tbody th.selected").each(function(){var a=$(this).parent(),d={"form.id":a.find(".index").attr("data-id"),"form.status":c};b.updateStatus(d,a)})})});c.on("click.toolkit-list",".orderType",function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#formwatch-order").attr("data-entity",$(this).attr("data-entity"));$("#formwatch-order").attr("data-direction",$(this).attr("data-direction"));
a.pageNo=1;b.search()});c.on("search.toolkit-list","#formsearch-keywords",function(c){a.pageNo=1;b.keywords=$.trim($("#formsearch-keywords").val());b.search()});c.on("keyup.toolkit-list","#formsearch-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});$(b.el).find(".page-first").click(function(){$(this).hasClass("disabled")||(a.pageNo=1,b.search())});$(b.el).find(".page-pre").click(function(){$(this).hasClass("disabled")||(--a.pageNo,b.search())});$(b.el).find(".page-next").click(function(){$(this).hasClass("disabled")||
(++a.pageNo,b.search())})},render:function(){this.renderFormWatchList(this.filterType)},renderFormWatchList:function(b){this.load(b)},search:function(){$("#formwatch-loading").removeClass("hide");var b=this,a=b.model,c=b.keywords,e="";if("undefined"!=typeof $("#formwatch-order").attr("data-entity"))var e=$("#formwatch-order").attr("data-entity"),f=$("#formwatch-order").attr("data-direction"),e="default"==e?"":"C."+e+" "+f;else e="C.create_time DESC";c={formManage:{name:c,sortType:e},pageNo:a.pageNo,
pageSize:a.pageSize};c=JSON.stringify(c);a.search(c,function(a){$("#fromwatchlist-loading").addClass("hide");var c=$("#form-list tbody");$("#form-list tbody tr").not(":first").detach();$.each(a.page.result,function(a){var b=$("#form-list tbody tr:first").clone().removeClass("hide");b.find(".index .sn").text(a+1);b.find(".index").attr("data-id",this.id);b.find(".name").html('\x3ca href\x3d"/form/preview/'+this.id+'" target\x3d"_blank"\x3e'+this.name+"\x3c/a\x3e");b.find(".user").text(this.operator?
this.operator.name:"");"enable"==this.status&&b.find(".status .tzCheckBox").addClass("open checked").attr("title","\u7981\u7528\u8868\u5355");b.find(".viewCount").text(this.viewCount);b.find(".copyCount").text(this.copyCount);b.find(".submit-counts").text(this.fillCount);b.find(".createTime").text((new Date(this.createTime)).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));b.appendTo(c)});b.loadPage(a.page)})},load:function(b){this.model.pageNo=1;this.search()},updateStatus:function(b,a){(new c).updateStatus(b,
function(c){"enable"==b["form.status"]?a.find(".status .tzCheckBox").removeClass("open").attr("title","\u542f\u7528\u8868\u5355"):a.find(".status .tzCheckBox").addClass("open").attr("title","\u7981\u7528\u8868\u5355")})},loadPage:function(b){var a=this,c=a.model;0>=b.totalCount?($(a.el).find(".page-last").unbind("click"),$(a.el).find(".page-buttons").addClass("disabled"),$(a.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55")):($(a.el).find(".pagination").find(".active a").html("\u7b2c"+
b.pageNo+"/"+b.totalPages+"\u9875"),1==b.totalPages?$(a.el).find(".page-buttons").addClass("disabled"):($(a.el).find(".page-last").click(function(){$(this).hasClass("disabled")||(c.pageNo=b.totalPages,a.search())}),1==b.pageNo&&($(a.el).find(".page-next").removeClass("disabled"),$(a.el).find(".page-last").removeClass("disabled"),$(a.el).find(".page-first").addClass("disabled"),$(a.el).find(".page-pre").addClass("disabled")),b.pageNo==b.totalPages&&($(a.el).find(".page-first").removeClass("disabled"),
$(a.el).find(".page-pre").removeClass("disabled"),$(a.el).find(".page-next").addClass("disabled"),$(a.el).find(".page-last").addClass("disabled")),1!=b.pageNo&&b.pageNo!=b.totalPages&&($(a.el).find(".page-first").removeClass("disabled"),$(a.el).find(".page-pre").removeClass("disabled"),$(a.el).find(".page-next").removeClass("disabled"),$(a.el).find(".page-last").removeClass("disabled")),$("#formwatch-list .pagination-centered").removeClass("hide")))}});m.exports=h});
define("teams/formmanage/formlabelpageview",["teams/utils","teams/formmanage/formlabeltreeview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formlabeltreeview");h=Backbone.View.extend({teams:{},initialize:function(c){this.id=c.id;this.el=c.el;this.noUrl=c.noUrl;$(this.el).html(f.template("formmanage.formlabelpage"));this.formLabelTreeView=new e({el:this.el+" #form-tree-list",readonly:this.readonly,noUrl:this.noUrl});TEAMS.currentUser.admin||$(this.el).find("#add-root").hide();f.layout("#form-tree")},
delegateEvents:function(){var c=this;$(c.el).on("click.departmenttree","#organization-users",function(b){$(c.el).find("#organization-users").parent().addClass("active");$(c.el).find("#group-users").parent().removeClass("active");$(c.el).find("#org-tree-list").removeClass("hide");$(c.el).find("#org-group-list").addClass("hide");$(c.el).find(".root").trigger("click")});$(c.el).on("click.departmenttree",".nodeicon",function(b){$(this).toggleClass("icon-caret-right");$(this).toggleClass("icon-caret-down");
$(this).parent(".treenode").next().slideToggle("fast")})},render:function(){var c=this,b=c.id,a=$(c.el),d=c.type;this.formLabelTreeView.render(b,function(){"department"==d?c.formLabelTreeView.highLight(b):b&&0<a.find("#"+c.id).length?a.find("#"+c.id).trigger("click"):$("#formlabel-all").trigger("click")});$(c).find("#organization-users").trigger("click")},remove:function(){$(this.el).html("");this.formLabelTreeView&&(this.formLabelTreeView.remove(),this.formLabelTreeView=null)}});m.exports=h});
define("teams/formmanage/formwatchchartview",["teams/utils","teams/component/typeahead","teams/formmanage/formwatchmodel"],function(h,q,m){var f=h("teams/utils");h("teams/component/typeahead");var e=h("teams/formmanage/formwatchmodel");q=Backbone.View.extend({initialize:function(c){c=f.template("formmanage.formwatchchart");$("#j_formContent").html(c);this.el="#formwatchchartview";this.$el=$("#formwatchchartview");this.model=new e;this.initComponents();f.layout("#j_formContent #formwatchchartview")},
initComponents:function(){var c=this,b=c.model;f.datepicker([{el:"#begin-date",callback:function(a){var d=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(d,b.endDate)?b.beginDate=d||b.beginDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(a){var d=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(b.beginDate,d)?b.endDate=d||b.endDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),
endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);c.$el.find("#begin-date").val(b.beginDate);c.$el.find("#end-date").val(b.endDate);c.$el.find('[data\x3d"thisMonth"]').addClass("btn-success")},isBefore:function(c,b){if(c&&b){if(Date.create(c).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");return!1}return!0},delegateEvents:function(){var c=this,b=c.model;$("body").off("click.formwatchreport",".goto-top").on("click.formwatchreport",
".goto-top",function(a){f.gotoTop("#formwatchchartview")});c.$el.on("click.formwatchreport",".j_time a",function(a){switch($(a.target).attr("data")){case "thisWeek":b.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":b.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":b.beginDate=
Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":b.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),b.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}c.$el.find("#begin-date").val(b.beginDate);c.$el.find("#end-date").val(b.endDate);c.$el.find(".j_time .btn").removeClass("btn-success");$(this).addClass("btn-success");c.loadDayChart()});c.$el.on("click.formwatchreport",
"#load",function(){c.$el.find(".j_time .btn").removeClass("btn-success");c.loadDayChart()})},remove:function(){this.$el.off(".formwatchreport");this.dayChart&&($(window).off("resize",this.dayChart.resize),this.dayChart.dispose(),this.dayChart=null);this.finishChart&&($(window).off("resize",this.finishChart.resize),this.finishChart.dispose(),this.finishChart=null);this.urgencyChart&&($(window).off("resize",this.urgencyChart.resize),this.urgencyChart.dispose(),this.urgencyChart=null);this.stopListening();
this.model=null},render:function(c,b){var a=this;f.layout("#j_formContent");h.async("https://static.eteams.cn/js/echarts.min.js",function(){a.initCharts();a.loadDayChart()})},dayChartBasicOption:{title:{text:"\u8868\u5355\u65b0\u5efa\u8d8b\u52bf\u7edf\u8ba1"},tooltip:{trigger:"item"},legend:{data:[""]},calculable:!0,toolbox:{show:!0,feature:{magicType:{show:!0,type:["bar","line"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:{show:!0,start:5,end:95},yAxis:[{type:"value"}],color:["#3AEC94"]},
dayChart:null,initCharts:function(){var c;c=this.dayChart=echarts.init(document.getElementById("day-chart"),"macarons");$(window).on("resize",c.resize)},loadDayChart:function(){var c=this;if(c.dayChart){var b=c.dayChart;b.showLoading({effect:"spin"});var a=c.$el.find("#begin-date").val(),d=c.$el.find("#end-date").val()+" 24:00:00",a={formManage:{beginDate:a,endDate:d}},a=JSON.stringify(a);c.model.formwatchByDay(a,function(a){b.hideLoading();var d=[],e=[];$.each(a.list,function(){d.push((new Date(this.createTime)).format("{yyyy}-{MM}-{dd}"));
e.push(this.submitCounts)});a=_.extend({xAxis:[{type:"category",data:d}],series:[{name:"\u8868\u5355\u65b0\u5efa\u91cf",type:"bar",data:e}]},c.dayChartBasicOption);b.setOption(a,!0)})}else f.alert("\u672a\u627e\u5230\u56fe\u8868\u7ec4\u4ef6\uff0c\u8bf7\u786e\u8ba4\u9875\u9762\u52a0\u8f7d\u6b63\u786e")}});m.exports=q});
define("teams/formmanage/formlabellistview",["teams/utils","teams/formmanage/formlabellistmodel","teams/form/formoperationview","teams/formmanage/formselectview","teams/form/formmanagemodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formlabellistmodel"),c=h("teams/form/formoperationview"),b=h("teams/formmanage/formselectview"),a=h("teams/form/formmanagemodel");h=Backbone.View.extend({initialize:function(a){this.el=a.el;this.id=a.id;this.model=new e({pageSize:15});this.parent=a.parent;
this.page=null;$(this.el).html(f.template("formmanage.formlabellist"));this.keywords="";this.render();f.layout("#form-table-list");$("#formlabelid").val(this.id);null==this.id&&($(this.el).find(".js_buildNewForm").remove(),$(this.el).find(".js_addLinkForm").remove(),$(this.el).find(".j_clearAll").remove())},render:function(){var a="";if("undefined"!=typeof $("#form-order").attr("data-entity"))var a=$("#form-order").attr("data-entity"),b=$("#form-order").attr("data-direction"),a="default"==a?"":"F."+
a+" "+b;else a="F.create_time desc";var c=this;c.model.loadData({"formLabel.id":c.id,"formLabel.sortType":a,"formLabel.name":c.keywords},function(a){c.page=a.formPage;$("#formLabelClone tbody tr").not(":first").detach();for(var b=0;b<a.formPage.result.length;b++)c.loadFormList(b+1,a.formPage.result[b]);c.loadPage(c.page)});$(c.el).find("#formLabelListClone").removeClass("hide");$(c.el).find("#employee-container").addClass("hide")},delegateEvents:function(){var d=this,e=d.model,h=$("#formLabelListClone");
$("body").off("click.formLabelList",".goto-top").on("click.formLabelList",".goto-top",function(a){f.gotoTop("#form-table-list")});$("#formLabelListClone .orderType").click(function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#form-order").attr("data-entity",$(this).attr("data-entity"));$("#form-order").attr("data-direction",$(this).attr("data-direction"));e.pageNo=1;d.render()});h.on("search.formLabelList","#formsearch-keywords",function(a){e.pageNo=
1;d.keywords=$.trim(h.find("#formsearch-keywords").val());d.render()});h.on("keyup.formLabelList","#formsearch-keywords",function(a){13==(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});$(d.el).find(".page-first").click(function(){$(this).hasClass("disabled")||(e.pageNo=1,d.render())});$(d.el).find(".page-pre").click(function(){$(this).hasClass("disabled")||(--e.pageNo,d.render())});$(d.el).find(".page-next").click(function(){$(this).hasClass("disabled")||(++e.pageNo,d.render())});
h.on("click.formLabelList",".js_buildNewForm",function(){var a={module:"cloud",formLabelId:d.id,el:"#build-newform"};a.parentEl=d.el;a.tpl=f.template("flow.formnew",{userId:TEAMS.currentUser.id,admin:TEAMS.currentUser.admin});a.ownership="cloud";a.saveCallback=function(a){a.message?f.notify(a.message):(d.parent.reload(),d.render())};d.formoperationView=new c(a);d.formoperationView.render()});$("#btn_addForm").click(function(){d.model.findCateAndCloud({pageNo:1},function(a){d.loadCloudForm(a)})});
h.find(".js_addLinkForm").click(function(){(new b({"formLabel.id":d.id,parent:d})).findFormSelectData()});h.on("click.formLabelList","#check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$("#formLabelClone tbody #index span.checkbox").not(":first").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");$(this).addClass("hide");$(this).parent("th").removeClass("selected");$(this).prev().removeClass("hide")}):$("#formLabelClone tbody #index span.checkbox").not(":first").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");
$(this).removeClass("hide");$(this).parent("th").addClass("selected");$(this).prev().addClass("hide")});$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});h.on("click.formLabelList",".checkbox",function(){var a=!1;$(this).find("i").hasClass("icon-checkbox-checked")&&(a=!0);a?$(this).parent("th").removeClass("selected"):$(this).parent("th").addClass("selected");$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});$("#js_deletelink").click(function(){f.confirm("\u786e\u8ba4\u5220\u9664\u9009\u4e2d\u7684\u5173\u8054\u8868\u5355\uff1f",
function(a){a&&(d.deleteFormlabelLink(),d.render())})});h.off("click.formLabelList","#status .tzCheckBox").on("click.formLabelList","#status .tzCheckBox",function(a){var b=$(this).parent().parent(),c=b.find("#index").attr("data-id"),e;$(this).hasClass("open")?(e="enable",a="\u8868\u5355\u5f53\u524d\u72b6\u6001\u4e3a\u542f\u7528\uff0c\u662f\u5426\u7981\u7528\u8868\u5355\uff1f"):(e="disable",a="\u8868\u5355\u5f53\u524d\u72b6\u6001\u4e3a\u7981\u7528\uff0c\u662f\u5426\u542f\u7528\u8868\u5355\uff1f");
f.confirm(a,function(a){a&&d.updateFormStatus({"form.id":c,"form.status":e},b)})});h.off("click.formLabelList","#recommend .j_star").on("click.formLabelList","#recommend .j_star",function(a){var b=$(this).parent().parent().parent(),c=b.find("#index").attr("data-id"),e;$(this).hasClass("icon-star")?(e=0,a="\u786e\u5b9a\u53d6\u6d88\u63a8\u8350\u8be5\u8868\u5355\uff1f"):(e=1,a="\u786e\u5b9a\u63a8\u8350\u8be5\u8868\u5355\uff1f");f.confirm(a,function(a){a&&d.updateFormRecommend({formId:c,recommend:e},
b)})});h.off("click.formLabelList","#operation .j_operationType").on("click.formLabelList","#operation .j_operationType",function(b){var c=$(this).parent().parent().attr("data-formId");switch($(this).attr("data-operatype")){case "edit":window.open("/form/edit/"+c);break;case "delete":b="\u786e\u8ba4\u5220\u9664\u8be5\u8868\u5355\uff1f";var h=new a;f.confirm(b,function(a){a&&h.deleteForm({formId:c},function(a){a.message?f.notify(a.message):(d.parent.reload(),d.render())})});break;case "deletelink":f.confirm("\u786e\u8ba4\u5220\u9664\u8be5\u8868\u5355\u4e0e\u7c7b\u522b\u7684\u5173\u8054\uff1f",
function(a){a&&e.deleteFormLabelLink({"formLabel.id":d.id,ids:c},function(a){a.message?f.notify(a.message):(d.parent.reload(),d.render())})});break;case "rename":b=$(this).parents("tr").find("#title");var l=b.find("a").text();b.html('\x3cinput class\x3d"form-control" type\x3d"text" data-old\x3d"'+l+'" value\x3d"" maxlength\x3d"100" \x3e').addClass("input");b.find("input").focus().val(l)}});h.find("#formLabelClone").off("blur.formLabelList","#title input").on("blur.formLabelList","#title input",function(b){var c=
$(this);b=$.trim(c.val());var d=c.parent(),e=d.parent().find("#index").attr("data-id"),g=c.attr("data-old"),h='\x3ca target\x3d"_blank" href\x3d"/form/preview/'+e+'"\x3e'+b+"\x3c/a\x3e";g==b?d.html(h).removeClass("input"):""==b?(c.focus(),f.notify("\u8868\u5355\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a")):(new a).renameForm({formId:e,formName:b},function(a){a.message?(c.focus(),f.notify(a.message)):d.html(h).removeClass("input")})});h.off("click.formLabelList",".j_clearAll").on("click.formLabelList",".j_clearAll",
function(a){a="\u786e\u8ba4\u6e05\u7a7a"+$("#form-tree-list .treenode.selected .tree-name").text()+"\u7c7b\u522b\u4e0b\u6240\u6709\u5173\u8054\uff1f";f.confirm(a,function(a){a&&e.deleteFormLabelLink({"formLabel.id":d.id},function(a){a.message?f.notify(a.message):(d.parent.reload(),d.render())})})})},loadFormList:function(a,b){var c=$(this.el).find("#formLabelClone tbody tr:first").clone().show();c.find("#index .sn").text(a);c.find("#index").attr("data-id",b.id);c.find("#title").html("\x3ca href\x3d'/form/preview/"+
b.id+"' target\x3d'_blank' title\x3d'"+b.name+"'\x3e"+b.name+"\x3c/a\x3e");c.find("#createTime").html((new Date(b.createTime)).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));c.find("#showNum").html(b.viewCount);c.find("#saveNum").html(b.copyCount);c.find("#operation .dropdown-menu").attr("data-formId",b.id);"enable"==b.status&&(c.find("#status .tzCheckBox").addClass("open checked").attr("title","\u7981\u7528\u8868\u5355"),b.recommend?c.find("#recommend .j_star").addClass("icon-star").attr("title","\u53d6\u6d88\u63a8\u8350"):
c.find("#recommend .j_star").addClass("icon-star-empty").attr("title","\u63a8\u8350"));if(b.formlabels){for(var e=[],f=0;f<b.formlabels.length;f++)e.push(b.formlabels[f].name);e=e.join("\uff0c");c.find("#includeLabels").text(e).attr("title",e)}c.appendTo($(this.el).find("#formLabelClone tbody"))},loadPage:function(a){var b=this,c=b.model;0>=a.totalCount?($(b.el).find(".page-last").unbind("click"),$(b.el).find(".page-buttons").addClass("disabled"),$(b.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55")):
($(b.el).find(".pagination").find(".active a").html("\u7b2c"+a.pageNo+"/"+a.totalPages+"\u9875"),1==a.totalPages?$(b.el).find(".page-buttons").addClass("disabled"):($(b.el).find(".page-last").click(function(){$(this).hasClass("disabled")||(c.pageNo=a.totalPages,b.render())}),1==a.pageNo&&($(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled"),$(b.el).find(".page-first").addClass("disabled"),$(b.el).find(".page-pre").addClass("disabled")),a.pageNo==a.totalPages&&
($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").addClass("disabled"),$(b.el).find(".page-last").addClass("disabled")),1!=a.pageNo&&a.pageNo!=a.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")),b.$el.find(".pagination-centered").removeClass("hide")))},
remove:function(){var a=$(this.el);a.off("#formLabel");a.remove()},loadCloudForm:function(a){var b=$("#cloudformlist_dialog .modal-body tbody");b.find("tr").not(":first").detach();$.each(a.formCategories,function(){var a=b.find("tr:first").clone().show();a.find("#index").text("");a.find("#title").text("");a.find("#desc").text("");a.appendTo(b)})},deleteFormlabelLink:function(){var a=this,b=a.model,c=[];$("#formLabelClone tbody th.selected").each(function(){c.push($(this).attr("data-id"))});b.deleteFormLabelLink({"formLabel.id":a.id,
ids:c},function(b){a.parent.reload()})},updateFormStatus:function(a,b){this.model.updateFormStatus(a,function(c){"enable"==a["form.status"]?(b.find("#status .tzCheckBox").removeClass("open").attr("title","\u542f\u7528\u8868\u5355"),b.find("#recommend .j_star").removeClass("icon-star icon-star-empty")):(b.find("#status .tzCheckBox").addClass("open").attr("title","\u7981\u7528\u8868\u5355"),b.find("#recommend .j_star").removeClass("icon-star"),b.find("#recommend .j_star").addClass("icon-star-empty").attr("title",
"\u63a8\u8350"))})},updateFormRecommend:function(a,b){this.model.updateFormRecommend(a,function(c){0==a.recommend?(b.find("#recommend .j_star").removeClass("icon-star icon-star-empty"),b.find("#recommend .j_star").addClass("icon-star-empty").attr("title","\u63a8\u8350")):(b.find("#recommend .j_star").removeClass("icon-star icon-star-empty"),b.find("#recommend .j_star").addClass("icon-star").attr("title","\u53d6\u6d88\u63a8\u8350"))})}});m.exports=h});
define("teams/formmanage/formselectview",["teams/utils","jquery.qrcode.min","teams/baidushare/baidushare","teams/formmanage/formlabellistmodel"],function(h,q,m){var f=h("teams/utils");h("teams/qrcode/jquery.qrcode.min");h("teams/baidushare/baidushare");var e=h("teams/formmanage/formlabellistmodel");h=Backbone.View.extend({pageNo:1,pageSize:10,initialize:function(c){this.el="#formselect_Container";this.$el=$(this.el);this.model=new e({pageSize:10});this.options=c;this.id=c["formLabel.id"];
this.page=null;this.parent=c.parent;$(this.el).html(f.template("formmanage.select"));f.layout("#formselect_Container .modal-body")},delegateEvents:function(){var c=this,b=c.$el,a=c.model;b.find("#check-all").click(function(){b.find("tbody tr:visible").find("#index input").prop("checked",$(this).is(":checked"))});b.find("#btnSave").click(function(){var a=[];$("#select-form-list tbody th.selected").each(function(){var b=$(this).parent().find(".index").attr("data-id");a.push(b)});a=a.join(",");c.model.saveFormLabelLink({"params.formids":a,
"params.formlableid":c.id},function(a){c.$el.find("#formselect").modal("hide");$("#form-tree-list").trigger("reload");c.parent.render();f.notify("\u64cd\u4f5c\u6210\u529f")})});b.off("click.toolkit-list","#form-check-all").on("click.toolkit-list","#form-check-all",function(){var a=!1;$(this).hasClass("icon-checkbox-checked")&&(a=!0);a?$("#select-form-list #index span.checkbox").not(":first").each(function(){$(this).find("i").removeClass("icon-checkbox-checked").addClass("icon-checkbox-unchecked");
$(this).addClass("hide");$(this).parent("th").removeClass("selected");$(this).prev().removeClass("hide")}):$("#select-form-list #index span.checkbox").not(":first").each(function(){$(this).find("i").addClass("icon-checkbox-checked").removeClass("icon-checkbox-unchecked");$(this).removeClass("hide");$(this).parent("th").addClass("selected");$(this).prev().addClass("hide")});$(this).toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});b.off("click.index",".checkbox").on("click.index",
".checkbox",function(){var a=!1;$(this).find("i").hasClass("icon-checkbox-checked")&&(a=!0);a?$(this).parent("th").removeClass("selected"):$(this).parent("th").addClass("selected");$(this).find("i").toggleClass("icon-checkbox-checked").toggleClass("icon-checkbox-unchecked")});b.off("mouseenter.table","tbody tr").on("mouseenter.table","tbody tr",function(a){a=!1;$(this).find(".index").hasClass("selected")&&(a=!0);a||($(this).find(".sn").addClass("hide"),$(this).find(".checkbox").removeClass("hide"))}).off("mouseleave.table",
"tbody tr").on("mouseleave.table","tbody tr",function(a){a=!1;$(this).find(".index").hasClass("selected")&&(a=!0);a||($(this).find(".sn").removeClass("hide"),$(this).find(".checkbox").addClass("hide"))});b.off("search.toolkit-list","#formsearch-keywords").on("search.toolkit-list","#formsearch-keywords",function(d){a.pageNo=1;c.keywords=$.trim(b.find("#formsearch-keywords").val());c.render()});b.off("keyup.toolkit-list","#formsearch-keywords").on("keyup.toolkit-list","#formsearch-keywords",function(a){13==
(a?a:window.event?window.event:null).keyCode&&$(this).trigger("search")});$(c.el).find(".page-first").click(function(){$(this).hasClass("disabled")||(a.pageNo=1,c.render())});$(c.el).find(".page-pre").click(function(){$(this).hasClass("disabled")||(--a.pageNo,c.render())});$(c.el).find(".page-next").click(function(){$(this).hasClass("disabled")||(++a.pageNo,c.render())})},render:function(){this.findFormSelectData()},findFormSelectData:function(){var c=this;c.model.findFormSelectData({"formLabel.id":c.id,
"form.name":c.keywords,pageNo:c.model.pageNo,pageSize:c.model.pageSize},function(b){var a=c.$el.find("#formselect");a.find("tbody tr").not(":first").detach();$.each(b.formPage.result,function(b){var e=a.find("tbody tr:first").clone().show();e.find("#index").attr("data-id",this.id).find(".sn").text(b+1);e.find("#title").text(this.name).attr("title",this.name);if(this.formlabels){var f=[];for(b=0;b<this.formlabels.length;b++)f.push(this.formlabels[b].name);f=f.join("\uff0c");e.find("#includeLabels").text(f).attr("title",
f)}e.appendTo($(c.el).find("#formLabelClone tbody"));e.appendTo(a.find("tbody"))});c.loadPage(b.formPage);a.modal("show")})},loadPage:function(c){var b=this,a=b.model;0>=c.totalCount?($(b.el).find(".page-last").unbind("click"),$(b.el).find(".page-buttons").addClass("disabled"),$(b.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55")):($(b.el).find(".pagination").find(".active a").html("\u7b2c"+c.pageNo+"/"+c.totalPages+"\u9875"),1==c.totalPages?$(b.el).find(".page-buttons").addClass("disabled"):
($(b.el).find(".page-last").click(function(){$(this).hasClass("disabled")||(a.pageNo=c.totalPages,b.render())}),1==c.pageNo&&($(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled"),$(b.el).find(".page-first").addClass("disabled"),$(b.el).find(".page-pre").addClass("disabled")),c.pageNo==c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").addClass("disabled"),$(b.el).find(".page-last").addClass("disabled")),
1!=c.pageNo&&c.pageNo!=c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")),b.$el.find(".pagination-centered").removeClass("hide")))}});m.exports=h});
define("teams/formmanage/formlabeltreeview",["teams/utils","teams/formmanage/formlabeltreemodel","teams/formmanage/formlabellistview","teams/formmanage/formlabeleditview"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formlabeltreemodel"),c=h("teams/formmanage/formlabellistview"),b=h("teams/formmanage/formlabeleditview");h=Backbone.View.extend({lightClass:"selected",fold:"icon-caret-right",unfold:"icon-caret-down",initialize:function(a){this.el=a.el;this.noUrl=a.noUrl;this.readonly=
a.readonly;this.model=new e;this.formLabelId=null},delegateEvents:function(){var a=this,d=$(a.el);d.off(".tree");d.on("click","."+a.unfold,function(b){b.stopPropagation();$(this).parent().parent().find("ul").slideToggle(400);$(this).removeClass(a.unfold).addClass(a.fold)});d.on("click","."+a.fold,function(b){b.stopPropagation();$(this).parent().parent().find("ul").slideToggle(400);$(this).removeClass(a.fold).addClass(a.unfold)});d.off("click",".j_treenode").on("click",".j_treenode",function(b){a.formLabelId=
$(this).attr("id");new c({id:a.formLabelId,el:"#mainContainer #form-table-list",parent:a});a.highLight(a.formLabelId)});$("#formlabel-all").off("click").on("click",function(b){new c({id:null,el:"#mainContainer #form-table-list",parent:a});d.find(".treenode").removeClass("selected")});d.on("click","#edit-department",function(c){c.stopPropagation();c=$(this).attr("nodeid");var d=$(this).parent().parent().attr("data-parentId"),d=$("#"+d),e=$(this).parent().parent().find("a").text();(new b({id:c,parentNode:d,
name:e,type:"edit",root:0<d.length?!1:!0,parent:a,el:"#mainContainer #form-table-list"})).render();a.highLight(c)});d.on("click","#add-department",function(c){c.stopPropagation();c=$(this).attr("nodeid");var d=$(this).parent().parent().attr("data-rank");(new b({id:c,parent:a,type:"add",el:"#mainContainer #form-table-list",rank:d})).render();a.highLight(c)});d.on("click","#delete-department",function(b){b.stopPropagation();var c={formLabel:{id:$(this).attr("nodeid")}},c=JSON.stringify(c);f.confirm("\u786e\u5b9a\u8981\u5220\u9664\u7c7b\u522b\u5417\uff1f\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u6062\u590d",
function(b){b&&a.model.deleteFormLabel(c,function(b){b.message?f.notify(b.message):a.reload(function(){$("#formlabel-all").trigger("click")})})})});$("#add-root").click(function(c){(new b({id:-1,parent:a,type:"add-root",el:"#mainContainer #form-table-list",rank:1})).render()});$("#form-tree-list").off("reload.tree").on("reload.tree",function(){a.reload()})},render:function(a,b){var c=this;c.id=a;c.model.loadData(function(a){a=a.formLabels;c.initTree(a);c.bindData(a);b()})},initTree:function(a){var b=
this,c=b.getRoot(a);$.each(c,function(){var c=b.createRootTree(this,a);$(b.el).append(c)});$("#list-loading").addClass("hide")},reload:function(a){var b=this;$(b.el).html("");b.render(b.id,function(){b.highLight(b.formLabelId);a&&a()})},parseDom:function(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes},createRootTree:function(a,b){var c="\x3cul\x3e",e=this.createChild(a,b);return c=c+e+"\x3c/ul\x3e"},createTree:function(a,b){for(var c="\x3cul\x3e",e=0,f=0,h=b.length;f<h;f++){var m=
b[f];if(!m)break;var p=m.nodeObj.parent;p&&p.id==a.id&&m.id!=a.id&&(m=this.createChild(m,b),c+=m,e++)}return 0==e?"":c+"\x3c/ul\x3e"},createChild:function(a,b){if(a){var c="root"==a.parentId?"root":"",e="padding-left:"+20*a.rank+"px",f=this.createTree(a,b),h=f?this.unfold:"",m="j_treenode";this.readonly&&(m="");e="\x3cli\x3e"+('\x3cdiv class\x3d"treenode router '+m+" "+c+'" style\x3d"'+e+'" id\x3d"'+a.id+'" data-parentId\x3d"'+a.parentId+'" data-rank\x3d"'+a.rank+'"\x3e');c='\x3cspan class\x3d"num fr"\x3e'+
a.attachment+'\x3c/span\x3e\x3ca class\x3d"router j_label" root\x3d"'+c+'" id\x3d"'+a.id+'" title\x3d"'+a.name+'"\x3e\x3cspan class\x3d"tree-name word-limit"\x3e'+a.name+"\x3c/span\x3e\x3c/a\x3e";""===(this.noUrl?"":a.url?a.url:"#")&&(c='\x3ca class\x3d"router" title\x3d"'+a.name+'"\x3e\x3cspan class\x3d"tree-name"\x3e'+a.name+"\x3c/span\x3e\x3c/a\x3e");this.readonly||(m="\x3cspan class\x3d'actions'\x3e",TEAMS.currentUser.admin&&(m+="\x3ca id\x3d'add-department' nodeid\x3d'"+a.id+"' class\x3d'router' title\x3d'\u6dfb\u52a0\u4e0b\u7ea7\u6807\u7b7e'\x3e\x3ci class\x3d'icon-plus-thin'\x3e\x3c/i\x3e\x3c/a\x3e",
19==a.id.length&&(m+="\x3ca id\x3d'edit-department' nodeid\x3d'"+a.id+"' class\x3d'router' title\x3d'\u7f16\u8f91'\x3e\x3ci class\x3d'icon-edit'\x3e\x3c/i\x3e\x3c/a\x3e",a.nodeObj.hasChildren||0!=a.nodeObj.formCounts||(m+="\x3ca id\x3d'delete-department' nodeid\x3d'"+a.id+"' title\x3d'\u5220\u9664\u6807\u7b7e'\x3e\x3ci class\x3d'icon-trash'\x3e\x3c/i\x3e\x3c/a\x3e"))),e+=m+"\x3c/span\x3e");e+="\x3ci class\x3d'nodeicon "+h+"'\x3e\x3c/i\x3e";e=e+c+"\x3c/div\x3e";e+=f;return e+="\x3c/li\x3e"}},getRoot:function(a){for(var b=
[],c=0,e=a.length;c<e;c++){var f=a[c];f.nodeObj.parent||b.push(f)}return b},bindData:function(a){for(var b=0,c=a.length;b<c;b++){var e=a[b];$(this.el).find("#"+e.id).data("node",e)}},getSelectedNode:function(){return $(this.el).find(".selected")},getSelectedNodeObj:function(){return this.getSelectedNode().data("node")},reloadNode:function(a,b){var c=this,e=a.data("node");c.model.loadData(function(e){c.restoreNode(a,e.nodes);b&&b()},e.id)},restoreNode:function(a,b){view=this;var c=a.data("node"),e=
a.parent().prev(),f=a.parent().next(),h=a.parent().parent();a.parent().remove();var m=view.createChild(c,b);0<e.length?e.after(m):0<f.length?f.before(m):h.append(m);view.highLight(c.id);b.push(c);view.bindData(b)},updateNode:function(a){var b=$(this.el),c=a.name;b.find("#"+a.id+" .j_label span").text(c)},highLight:function(a){var b=$(this.el),c=this.lightClass;b.find(".treenode").removeClass(c);b.find("#"+a).addClass(c);a||b.find(".root").addClass(c);this.formLabelId=a},remove:function(){$(this.el).html("");
this.FormLabelListView&&(this.FormLabelListView.remove(),this.FormLabelListView=null)}});m.exports=h});
define("teams/formmanage/formloglistmodel",function(h,q,m){h=Backbone.Model.extend({id:"",pageNo:1,pageSize:10,initialize:function(f){f=f||{};this.formId=f.formId;this.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");this.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}")},search:function(f,e){$.ajax({type:"post",url:"/formdata/findFormDataByFormId.json",dataType:"json",data:f,success:function(c){e&&e(c)}})}});m.exports=h});
define("teams/formmanage/formincollectlogview",["teams/utils","teams/formmanage/formcollectloglistmodel","teams/component/typeahead"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formcollectloglistmodel"),c=h("teams/component/typeahead");h=Backbone.View.extend({initialize:function(b){this.el="#formcollectlog-dialog";this.formId=b.formId;$("body").append(f.template("formmanage.formincollectlog",{userId:this.userId}));this.model=new e(b)},delegateEvents:function(){var b=this,a=$(this.el),
d=this.model;a.on("hidden.bs.modal",function(a){b.remove()});$("body").off("click.FormCollectLogListView",".goto-top").on("click.FormCollectLogListView",".goto-top",function(a){f.gotoTop()});a.on("click.FormCollectLogListView",".pagination .page-first",function(a){$(this).hasClass("disabled")||(d.pageNo=1,b.renderPage(d.pageNo))});a.on("click.FormCollectLogListView",".pagination .page-pre",function(a){$(this).hasClass("disabled")||(--d.pageNo,b.renderPage(d.pageNo))});a.on("click.FormCollectLogListView",
".pagination .page-next",function(a){$(this).hasClass("disabled")||(++d.pageNo,b.renderPage(d.pageNo))});a.on("click.FormCollectLogListView",".pagination .page-last",function(a){$(this).hasClass("disabled")||b.renderPage(b.totalPages)});a.on("click.FormCollectLogListView","#collectlogContent .j_detail",function(a){a=$(this).parent().parent();if(a.hasClass("active"))a.find(".detailContentClone").addClass("hide"),a.removeClass("active");else{var c=$(this).attr("collectId");b.renderDetailPage(1,c,a)}});
a.on("click.FormCollectLogListView","#collectlog-more",function(a){a=$(this).data("page");var c=$(this).parents(".j_loglist").find(".active .j_detail").attr("collectId"),d=$(this).parent().parent().find(".j_logdetaillist");b.renderDetailPage(a.nextPage,c,d)});f.datepicker({el:b.el+" #sendStartTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#sendStartTime"),d=$(b.el).find("#sendEndTime");d.val()&&a>d.val()?(f.notify("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"),
c.val("")):c.val(a)}});f.datepicker({el:b.el+" #sendEndTime",callback:function(a){a=Date.create(a.date).format("{yyyy}-{MM}-{dd}");var c=$(b.el).find("#sendStartTime"),d=$(b.el).find("#sendEndTime");c.val()&&a<c.val()?(f.notify("\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u65e5\u671f"),d.val("")):d.val(a)}});c({el:b.el+" #sendersDiv #senders",callback:function(c){if(c&&!$.isEmptyObject(c)){var d=a.find("#sendersDiv .j_selected");b.renderTypeheader(d,c)}}});a.on("click.FormCollectLogListView",
".btn-search",function(c){$(this).removeClass("btn-search");a.find("#collectlogContent .j_loglist");b.renderPage(1);$(this).addClass("btn-search")});a.on("click.FormCollectLogListView",".j_send_again",function(a){a={};a["userIds[0]"]=$(this).parent().find(".j_accepter").attr("userId");a.collectId=$(this).parents(".j_logdetaillist").attr("collectId");a["form.id"]=b.formId;d.inCollectSendAgain(a,function(a){console.log(a)});f.notify("\u64cd\u4f5c\u6210\u529f\uff01")})},render:function(){this.renderPage(this.model.pageNo);
$("#formcollectlog-dialog").modal("show");f.layout(".j_trashbinListScrMod")},renderPage:function(b){var a=this,c=a.model,e={},f=$(a.el),h=f.find("#sendStartTime").val(),k=f.find("#sendEndTime").val(),m=[];f.find("#sendersDiv .j_optcontainer .j_selected span a").each(function(){var a=$(this).attr("id");m.push(a)});e.formId=a.formId;e.startTime=$.trim(h);e.endTime=$.trim(k);e.userIds=m;e.pageNo=b;c.queryLog(e,function(c){c=c.collectLogPage;a.totalPages=c.totalPages;c=c.result;var d=f.find("#collectlogContent .j_loglist");
1==b&&(null==c||0==c.length?(f.find(".j_collectlog_empty").removeClass("hide"),f.find(".list-sub").addClass("hide"),f.find(".j_page_set").addClass("hide")):(f.find(".j_collectlog_empty").addClass("hide"),f.find(".list-sub").removeClass("hide"),f.find(".j_page_set").removeClass("hide")));d.empty();if(null!=c)for(var e=0;e<c.length;e++){var g=f.find("#collectlogClone li").clone(),h=c[e];g.find(".j_number").text(1+e+10*(b-1));g.find(".j_opertor").text(h.creator.username);g.find(".j_send_count").text(h.sendCount);
g.find(".j_detail").attr("collectId",h.id);g.find(".j_success_failure").text(h.successCount+"/"+h.failureCount);h=Date.create(h.createTime);g.find(".j_send_time").text(h.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}")).attr("title",h.format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));d.append(g)}f.find(".j_page_set .active a").text("\u7b2c"+b+"/"+a.totalPages+"\u9875");a.loadPageControl(b)})},renderDetailPage:function(b,a,c){var e=this.model,f={},h=$(this.el);f.collectId=a;f.pageNo=b;e.queryLogDetail(f,function(a){a=
a.collectLogDetailPage;var e=a.result,f,g;1==b?(f=h.find("#collectlogDetailContent ul").clone(),g=f.find(".j_logdetaillist")):(f=c.parents(".detailContentClone"),g=c);a&&a.hasNext?(f.find("#collectlog-more").parent().show(),f.find("#collectlog-more").data("page",a)):f.find("#collectlog-more").parent().hide();1==b&&(g.empty(),null==e||0==e.length?f.find(".j_empty").show():f.find(".j_empty").hide());if(null!=e){g.attr("collectId",e[0].collectId);for(var l=0;l<e.length;l++){var m=h.find("#collectlogdetailClone li").clone(),
q=e[l];m.find(".j_accepter").text(q.operator.username);m.find(".j_accepter").attr("userId",q.operator.id);"failure"==q.status?(m.find(".j_success_status").text("\u53d1\u9001\u5931\u8d25"),m.find(".j_send_again").removeClass("hide")):"success"==q.status?m.find(".j_success_status").text("\u53d1\u9001\u6210\u529f"):m.find(".j_success_status").text("\u5904\u7406\u4e2d");g.append(m)}}f.removeClass("hide");1==a.pageNo&&c.append(f).addClass("active")})},renderTypeheader:function(b,a){if(a.length)for(var c=
0;c<a.length;c++){var e=a[c],f=e.name,h=e.id;if(f&&h){var k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e";b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)});b.append(k)}}else f=a.name,h=a.id,f&&h&&(k='\x3cspan class\x3d"entity-item"\x3e\x3ca id\x3d'+h+"\x3e"+f+"\x3c/a\x3e\x3c/span\x3e",b.find(".entity-item").each(function(a){h==$(this).find("a").attr("id")&&(k=null)}),b.append(k))},loadPageControl:function(b){$(this.el);1>=
this.totalPages?$(this.el).find(".page-buttons").addClass("disabled"):(1==b&&($(this.el).find(".page-next").removeClass("disabled"),$(this.el).find(".page-last").removeClass("disabled"),$(this.el).find(".page-first").addClass("disabled"),$(this.el).find(".page-pre").addClass("disabled")),b==this.totalPages&&($(this.el).find(".page-first").removeClass("disabled"),$(this.el).find(".page-pre").removeClass("disabled"),$(this.el).find(".page-next").addClass("disabled"),$(this.el).find(".page-last").addClass("disabled")),
1!=b&&b!=this.totalPages&&($(this.el).find(".page-first").removeClass("disabled"),$(this.el).find(".page-pre").removeClass("disabled"),$(this.el).find(".page-next").removeClass("disabled"),$(this.el).find(".page-last").removeClass("disabled")))},remove:function(){var b=$(this.el);b.off(".FormCollectLogListView");b.remove()}});m.exports=h});
define("teams/formmanage/formloglistview",["teams/utils","teams/formmanage/formloglistmodel"],function(h,q,m){var f=h("teams/utils"),e=h("teams/formmanage/formloglistmodel");h=Backbone.View.extend({initialize:function(c){this.el=c.el;this.userId=c.userId?c.userId:TEAMS.currentUser.id;$(this.el).html(f.template("formmanage.formloglist"));this.$el=$(this.el);this.model=new e(c);this.initComponents();f.layout(this.el)},initComponents:function(){var c=this,b=c.model;f.datepicker([{el:"#begin-date",callback:function(a){var d=
a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(d,b.endDate)?b.beginDate=d||b.beginDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")},{el:"#end-date",callback:function(a){var d=a.date.format("{yyyy}-{MM}-{dd}");c.isBefore(b.beginDate,d)?b.endDate=d||b.endDate:a.target.value=null},startDate:Date.create().addMonths(-6).format("{yyyy}-{MM}-{dd}"),endDate:Date.create().format("{yyyy}-{MM}-{dd}")}]);c.$el.find("#begin-date").val(b.beginDate);
c.$el.find("#end-date").val(b.endDate);c.$el.find('[data\x3d"thisMonth"]').addClass("btn-success")},isBefore:function(c,b){if(c&&b){if(Date.create(c).isBefore(b,864E5))return!0;f.notify("\u8bf7\u786e\u8ba4\u8f93\u5165\u7684\u8d77\u59cb\u65e5\u5728\u5230\u671f\u65e5\u4e4b\u524d");return!1}return!0},delegateEvents:function(){var c=this,b=this.model;$("body").off("click.FormLogListView",".goto-top").on("click.FormLogListView",".goto-top",function(a){f.gotoTop()});this.$el.on("click.FormLogListView",
".orderType",function(){$(".orderType").parent("li").removeClass("active");$(this).parent("li").addClass("active");$("#form-order").attr("data-entity",$(this).attr("data-entity"));$("#form-order").attr("data-direction",$(this).attr("data-direction"));b.pageNo=1;c.search()});c.$el.find(".page-first").click(function(){$(this).hasClass("disabled")||(b.pageNo=1,c.search())});c.$el.find(".page-pre").click(function(){$(this).hasClass("disabled")||(--b.pageNo,c.search())});c.$el.find(".page-next").click(function(){$(this).hasClass("disabled")||
(++b.pageNo,c.search())});c.$el.on("click.FormLogListView",".j_time a",function(a){switch($(a.target).attr("data")){case "thisWeek":b.beginDate=Date.create().beginningOfWeek().format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "last2weeks":b.beginDate=Date.create().beginningOfWeek().addDays(-7).format("{yyyy}-{MM}-{dd}");b.endDate=Date.create().endOfWeek().format("{yyyy}-{MM}-{dd}");break;case "thisMonth":b.beginDate=Date.create().beginningOfMonth().format("{yyyy}-{MM}-{dd}");
b.endDate=Date.create().endOfMonth().format("{yyyy}-{MM}-{dd}");break;case "lastMonth":b.beginDate=Date.create().addMonths(-1).beginningOfMonth().format("{yyyy}-{MM}-{dd}"),b.endDate=Date.create().addMonths(-1).endOfMonth().format("{yyyy}-{MM}-{dd}")}c.$el.find("#begin-date").val(b.beginDate);c.$el.find("#end-date").val(b.endDate);c.$el.find(".j_time .btn").removeClass("btn-success");$(this).addClass("btn-success");b.pageNo=1;c.search()});c.$el.find("#load").click(function(){c.$el.find(".j_time .btn").removeClass("btn-success");
b.pageNo=1;c.search()})},render:function(){this.search();f.layout("#oneformlog-Content")},search:function(){$("#formlist-loading").removeClass("hide");var c=this,b=c.model,a="";if("undefined"!=typeof c.$el.find("#form-order").attr("data-entity"))var a=c.$el.find("#form-order").attr("data-entity"),d=c.$el.find("#form-order").attr("data-direction"),a="default"==a?"":"F."+a+" "+d;else a="F.CREATE_TIME DESC";d="";""!=b.beginDate&&(d+=" and F.create_Time \x3e '"+b.beginDate+"'");""!=b.endDate&&(d+=" and F.create_Time \x3c '"+
b.endDate+" 24:00:00'");b.search({pageNo:b.pageNo,pageSize:b.pageSize,"form.id":b.formId,sortType:a,searchFilter:d},function(a){$("#formlist-loading").addClass("hide");var b=$("#formlog-table tbody");$("#formlog-table tbody tr").not(":first").detach();$.each(a.formDataPage.result,function(a){var c=$("#formlog-table tbody tr:first").clone().show();c.find("#index").text(a+1);c.find("#createTime").text((new Date(this.createTime)).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"));c.find("#spentTime").text(this.spentTime);
c.find("#ip").text(this.ip);a=this.client;"undefined"!=typeof this.version&&(a+=" - "+this.version);c.find("#source").text(a);a="/form/previewFill/"+this.id;c.find("#query a").attr("href",a);c.appendTo(b)});c.loadPage(a.formDataPage)})},loadPage:function(c){var b=this,a=b.model;0>=c.totalCount?($(b.el).find(".page-last").unbind("click"),$(b.el).find(".page-buttons").addClass("disabled"),$(b.el).find(".pagination").find(".active a").html("\u65e0\u8bb0\u5f55")):($(b.el).find(".pagination").find(".active a").html("\u7b2c"+
c.pageNo+"/"+c.totalPages+"\u9875"),1==c.totalPages?$(b.el).find(".page-buttons").addClass("disabled"):($(b.el).find(".page-last").click(function(){$(this).hasClass("disabled")||(a.pageNo=c.totalPages,b.search())}),1==c.pageNo&&($(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled"),$(b.el).find(".page-first").addClass("disabled"),$(b.el).find(".page-pre").addClass("disabled")),c.pageNo==c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),
$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").addClass("disabled"),$(b.el).find(".page-last").addClass("disabled")),1!=c.pageNo&&c.pageNo!=c.totalPages&&($(b.el).find(".page-first").removeClass("disabled"),$(b.el).find(".page-pre").removeClass("disabled"),$(b.el).find(".page-next").removeClass("disabled"),$(b.el).find(".page-last").removeClass("disabled")),b.$el.find(".pagination-centered").removeClass("hide")))},remove:function(){$(this.el).off(".FormLogListView");
$(this.el).remove()}});m.exports=h});

